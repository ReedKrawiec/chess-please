/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/game/main.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/chess.js/chess.js":
/*!****************************************!*\
  !*** ./node_modules/chess.js/chess.js ***!
  \****************************************/
/*! exports provided: BLACK, WHITE, EMPTY, PAWN, KNIGHT, BISHOP, ROOK, QUEEN, KING, SQUARES, FLAGS, Chess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BLACK", function() { return BLACK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WHITE", function() { return WHITE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EMPTY", function() { return EMPTY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PAWN", function() { return PAWN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KNIGHT", function() { return KNIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BISHOP", function() { return BISHOP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROOK", function() { return ROOK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QUEEN", function() { return QUEEN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KING", function() { return KING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SQUARES", function() { return SQUARES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FLAGS", function() { return FLAGS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Chess", function() { return Chess; });
/*
 * Copyright (c) 2022, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 *
 *----------------------------------------------------------------------------*/

const SYMBOLS = 'pnbrqkPNBRQK'

const DEFAULT_POSITION =
  'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1'

const TERMINATION_MARKERS = ['1-0', '0-1', '1/2-1/2', '*']

const PAWN_OFFSETS = {
  b: [16, 32, 17, 15],
  w: [-16, -32, -17, -15],
}

const PIECE_OFFSETS = {
  n: [-18, -33, -31, -14, 18, 33, 31, 14],
  b: [-17, -15, 17, 15],
  r: [-16, 1, 16, -1],
  q: [-17, -16, -15, 1, 17, 16, 15, -1],
  k: [-17, -16, -15, 1, 17, 16, 15, -1],
}

// prettier-ignore
const ATTACKS = [
  20, 0, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0, 0,20, 0,
   0,20, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0,20, 0, 0,
   0, 0,20, 0, 0, 0, 0, 24,  0, 0, 0, 0,20, 0, 0, 0,
   0, 0, 0,20, 0, 0, 0, 24,  0, 0, 0,20, 0, 0, 0, 0,
   0, 0, 0, 0,20, 0, 0, 24,  0, 0,20, 0, 0, 0, 0, 0,
   0, 0, 0, 0, 0,20, 2, 24,  2,20, 0, 0, 0, 0, 0, 0,
   0, 0, 0, 0, 0, 2,53, 56, 53, 2, 0, 0, 0, 0, 0, 0,
  24,24,24,24,24,24,56,  0, 56,24,24,24,24,24,24, 0,
   0, 0, 0, 0, 0, 2,53, 56, 53, 2, 0, 0, 0, 0, 0, 0,
   0, 0, 0, 0, 0,20, 2, 24,  2,20, 0, 0, 0, 0, 0, 0,
   0, 0, 0, 0,20, 0, 0, 24,  0, 0,20, 0, 0, 0, 0, 0,
   0, 0, 0,20, 0, 0, 0, 24,  0, 0, 0,20, 0, 0, 0, 0,
   0, 0,20, 0, 0, 0, 0, 24,  0, 0, 0, 0,20, 0, 0, 0,
   0,20, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0,20, 0, 0,
  20, 0, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0, 0,20
];

// prettier-ignore
const RAYS = [
   17,  0,  0,  0,  0,  0,  0, 16,  0,  0,  0,  0,  0,  0, 15, 0,
    0, 17,  0,  0,  0,  0,  0, 16,  0,  0,  0,  0,  0, 15,  0, 0,
    0,  0, 17,  0,  0,  0,  0, 16,  0,  0,  0,  0, 15,  0,  0, 0,
    0,  0,  0, 17,  0,  0,  0, 16,  0,  0,  0, 15,  0,  0,  0, 0,
    0,  0,  0,  0, 17,  0,  0, 16,  0,  0, 15,  0,  0,  0,  0, 0,
    0,  0,  0,  0,  0, 17,  0, 16,  0, 15,  0,  0,  0,  0,  0, 0,
    0,  0,  0,  0,  0,  0, 17, 16, 15,  0,  0,  0,  0,  0,  0, 0,
    1,  1,  1,  1,  1,  1,  1,  0, -1, -1,  -1,-1, -1, -1, -1, 0,
    0,  0,  0,  0,  0,  0,-15,-16,-17,  0,  0,  0,  0,  0,  0, 0,
    0,  0,  0,  0,  0,-15,  0,-16,  0,-17,  0,  0,  0,  0,  0, 0,
    0,  0,  0,  0,-15,  0,  0,-16,  0,  0,-17,  0,  0,  0,  0, 0,
    0,  0,  0,-15,  0,  0,  0,-16,  0,  0,  0,-17,  0,  0,  0, 0,
    0,  0,-15,  0,  0,  0,  0,-16,  0,  0,  0,  0,-17,  0,  0, 0,
    0,-15,  0,  0,  0,  0,  0,-16,  0,  0,  0,  0,  0,-17,  0, 0,
  -15,  0,  0,  0,  0,  0,  0,-16,  0,  0,  0,  0,  0,  0,-17
];

const SHIFTS = { p: 0, n: 1, b: 2, r: 3, q: 4, k: 5 }

const BITS = {
  NORMAL: 1,
  CAPTURE: 2,
  BIG_PAWN: 4,
  EP_CAPTURE: 8,
  PROMOTION: 16,
  KSIDE_CASTLE: 32,
  QSIDE_CASTLE: 64,
}

const RANK_1 = 7
const RANK_2 = 6
const RANK_3 = 5
const RANK_4 = 4
const RANK_5 = 3
const RANK_6 = 2
const RANK_7 = 1
const RANK_8 = 0

// prettier-ignore
const SQUARE_MAP = {
  a8:   0, b8:   1, c8:   2, d8:   3, e8:   4, f8:   5, g8:   6, h8:   7,
  a7:  16, b7:  17, c7:  18, d7:  19, e7:  20, f7:  21, g7:  22, h7:  23,
  a6:  32, b6:  33, c6:  34, d6:  35, e6:  36, f6:  37, g6:  38, h6:  39,
  a5:  48, b5:  49, c5:  50, d5:  51, e5:  52, f5:  53, g5:  54, h5:  55,
  a4:  64, b4:  65, c4:  66, d4:  67, e4:  68, f4:  69, g4:  70, h4:  71,
  a3:  80, b3:  81, c3:  82, d3:  83, e3:  84, f3:  85, g3:  86, h3:  87,
  a2:  96, b2:  97, c2:  98, d2:  99, e2: 100, f2: 101, g2: 102, h2: 103,
  a1: 112, b1: 113, c1: 114, d1: 115, e1: 116, f1: 117, g1: 118, h1: 119
};

const ROOKS = {
  w: [
    { square: SQUARE_MAP.a1, flag: BITS.QSIDE_CASTLE },
    { square: SQUARE_MAP.h1, flag: BITS.KSIDE_CASTLE },
  ],
  b: [
    { square: SQUARE_MAP.a8, flag: BITS.QSIDE_CASTLE },
    { square: SQUARE_MAP.h8, flag: BITS.KSIDE_CASTLE },
  ],
}

const PARSER_STRICT = 0
const PARSER_SLOPPY = 1

/* this function is used to uniquely identify ambiguous moves */
function get_disambiguator(move, moves) {
  var from = move.from
  var to = move.to
  var piece = move.piece

  var ambiguities = 0
  var same_rank = 0
  var same_file = 0

  for (var i = 0, len = moves.length; i < len; i++) {
    var ambig_from = moves[i].from
    var ambig_to = moves[i].to
    var ambig_piece = moves[i].piece

    /* if a move of the same piece type ends on the same to square, we'll
     * need to add a disambiguator to the algebraic notation
     */
    if (piece === ambig_piece && from !== ambig_from && to === ambig_to) {
      ambiguities++

      if (rank(from) === rank(ambig_from)) {
        same_rank++
      }

      if (file(from) === file(ambig_from)) {
        same_file++
      }
    }
  }

  if (ambiguities > 0) {
    /* if there exists a similar moving piece on the same rank and file as
     * the move in question, use the square as the disambiguator
     */
    if (same_rank > 0 && same_file > 0) {
      return algebraic(from)
    } else if (same_file > 0) {
      /* if the moving piece rests on the same file, use the rank symbol as the
       * disambiguator
       */
      return algebraic(from).charAt(1)
    } else {
      /* else use the file symbol */
      return algebraic(from).charAt(0)
    }
  }

  return ''
}

function infer_piece_type(san) {
  var piece_type = san.charAt(0)
  if (piece_type >= 'a' && piece_type <= 'h') {
    var matches = san.match(/[a-h]\d.*[a-h]\d/)
    if (matches) {
      return undefined
    }
    return PAWN
  }
  piece_type = piece_type.toLowerCase()
  if (piece_type === 'o') {
    return KING
  }
  return piece_type
}

// parses all of the decorators out of a SAN string
function stripped_san(move) {
  return move.replace(/=/, '').replace(/[+#]?[?!]*$/, '')
}

/*****************************************************************************
 * UTILITY FUNCTIONS
 ****************************************************************************/
function rank(i) {
  return i >> 4
}

function file(i) {
  return i & 15
}

function algebraic(i) {
  var f = file(i),
    r = rank(i)
  return 'abcdefgh'.substring(f, f + 1) + '87654321'.substring(r, r + 1)
}

function swap_color(c) {
  return c === WHITE ? BLACK : WHITE
}

function is_digit(c) {
  return '0123456789'.indexOf(c) !== -1
}

function clone(obj) {
  var dupe = obj instanceof Array ? [] : {}

  for (var property in obj) {
    if (typeof property === 'object') {
      dupe[property] = clone(obj[property])
    } else {
      dupe[property] = obj[property]
    }
  }

  return dupe
}

function trim(str) {
  return str.replace(/^\s+|\s+$/g, '')
}

/***************************************************************************
 * PUBLIC CONSTANTS
 **************************************************************************/

const BLACK = 'b'
const WHITE = 'w'

const EMPTY = -1

const PAWN = 'p'
const KNIGHT = 'n'
const BISHOP = 'b'
const ROOK = 'r'
const QUEEN = 'q'
const KING = 'k'

const SQUARES = (function () {
  /* from the ECMA-262 spec (section 12.6.4):
   * "The mechanics of enumerating the properties ... is
   * implementation dependent"
   * so: for (var sq in SQUARES) { keys.push(sq); } might not be
   * ordered correctly
   */
  var keys = []
  for (var i = SQUARE_MAP.a8; i <= SQUARE_MAP.h1; i++) {
    if (i & 0x88) {
      i += 7
      continue
    }
    keys.push(algebraic(i))
  }
  return keys
})()

const FLAGS = {
  NORMAL: 'n',
  CAPTURE: 'c',
  BIG_PAWN: 'b',
  EP_CAPTURE: 'e',
  PROMOTION: 'p',
  KSIDE_CASTLE: 'k',
  QSIDE_CASTLE: 'q',
}

const Chess = function (fen) {
  var board = new Array(128)
  var kings = { w: EMPTY, b: EMPTY }
  var turn = WHITE
  var castling = { w: 0, b: 0 }
  var ep_square = EMPTY
  var half_moves = 0
  var move_number = 1
  var history = []
  var header = {}
  var comments = {}

  /* if the user passes in a fen string, load it, else default to
   * starting position
   */
  if (typeof fen === 'undefined') {
    load(DEFAULT_POSITION)
  } else {
    load(fen)
  }

  function clear(keep_headers) {
    if (typeof keep_headers === 'undefined') {
      keep_headers = false
    }

    board = new Array(128)
    kings = { w: EMPTY, b: EMPTY }
    turn = WHITE
    castling = { w: 0, b: 0 }
    ep_square = EMPTY
    half_moves = 0
    move_number = 1
    history = []
    if (!keep_headers) header = {}
    comments = {}
    update_setup(generate_fen())
  }

  function prune_comments() {
    var reversed_history = []
    var current_comments = {}
    var copy_comment = function (fen) {
      if (fen in comments) {
        current_comments[fen] = comments[fen]
      }
    }
    while (history.length > 0) {
      reversed_history.push(undo_move())
    }
    copy_comment(generate_fen())
    while (reversed_history.length > 0) {
      make_move(reversed_history.pop())
      copy_comment(generate_fen())
    }
    comments = current_comments
  }

  function reset() {
    load(DEFAULT_POSITION)
  }

  function load(fen, keep_headers) {
    if (typeof keep_headers === 'undefined') {
      keep_headers = false
    }

    var tokens = fen.split(/\s+/)
    var position = tokens[0]
    var square = 0

    if (!validate_fen(fen).valid) {
      return false
    }

    clear(keep_headers)

    for (var i = 0; i < position.length; i++) {
      var piece = position.charAt(i)

      if (piece === '/') {
        square += 8
      } else if (is_digit(piece)) {
        square += parseInt(piece, 10)
      } else {
        var color = piece < 'a' ? WHITE : BLACK
        put({ type: piece.toLowerCase(), color: color }, algebraic(square))
        square++
      }
    }

    turn = tokens[1]

    if (tokens[2].indexOf('K') > -1) {
      castling.w |= BITS.KSIDE_CASTLE
    }
    if (tokens[2].indexOf('Q') > -1) {
      castling.w |= BITS.QSIDE_CASTLE
    }
    if (tokens[2].indexOf('k') > -1) {
      castling.b |= BITS.KSIDE_CASTLE
    }
    if (tokens[2].indexOf('q') > -1) {
      castling.b |= BITS.QSIDE_CASTLE
    }

    ep_square = tokens[3] === '-' ? EMPTY : SQUARE_MAP[tokens[3]]
    half_moves = parseInt(tokens[4], 10)
    move_number = parseInt(tokens[5], 10)

    update_setup(generate_fen())

    return true
  }

  /* TODO: this function is pretty much crap - it validates structure but
   * completely ignores content (e.g. doesn't verify that each side has a king)
   * ... we should rewrite this, and ditch the silly error_number field while
   * we're at it
   */
  function validate_fen(fen) {
    var errors = {
      0: 'No errors.',
      1: 'FEN string must contain six space-delimited fields.',
      2: '6th field (move number) must be a positive integer.',
      3: '5th field (half move counter) must be a non-negative integer.',
      4: '4th field (en-passant square) is invalid.',
      5: '3rd field (castling availability) is invalid.',
      6: '2nd field (side to move) is invalid.',
      7: "1st field (piece positions) does not contain 8 '/'-delimited rows.",
      8: '1st field (piece positions) is invalid [consecutive numbers].',
      9: '1st field (piece positions) is invalid [invalid piece].',
      10: '1st field (piece positions) is invalid [row too large].',
      11: 'Illegal en-passant square',
    }

    /* 1st criterion: 6 space-seperated fields? */
    var tokens = fen.split(/\s+/)
    if (tokens.length !== 6) {
      return { valid: false, error_number: 1, error: errors[1] }
    }

    /* 2nd criterion: move number field is a integer value > 0? */
    if (isNaN(tokens[5]) || parseInt(tokens[5], 10) <= 0) {
      return { valid: false, error_number: 2, error: errors[2] }
    }

    /* 3rd criterion: half move counter is an integer >= 0? */
    if (isNaN(tokens[4]) || parseInt(tokens[4], 10) < 0) {
      return { valid: false, error_number: 3, error: errors[3] }
    }

    /* 4th criterion: 4th field is a valid e.p.-string? */
    if (!/^(-|[abcdefgh][36])$/.test(tokens[3])) {
      return { valid: false, error_number: 4, error: errors[4] }
    }

    /* 5th criterion: 3th field is a valid castle-string? */
    if (!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(tokens[2])) {
      return { valid: false, error_number: 5, error: errors[5] }
    }

    /* 6th criterion: 2nd field is "w" (white) or "b" (black)? */
    if (!/^(w|b)$/.test(tokens[1])) {
      return { valid: false, error_number: 6, error: errors[6] }
    }

    /* 7th criterion: 1st field contains 8 rows? */
    var rows = tokens[0].split('/')
    if (rows.length !== 8) {
      return { valid: false, error_number: 7, error: errors[7] }
    }

    /* 8th criterion: every row is valid? */
    for (var i = 0; i < rows.length; i++) {
      /* check for right sum of fields AND not two numbers in succession */
      var sum_fields = 0
      var previous_was_number = false

      for (var k = 0; k < rows[i].length; k++) {
        if (!isNaN(rows[i][k])) {
          if (previous_was_number) {
            return { valid: false, error_number: 8, error: errors[8] }
          }
          sum_fields += parseInt(rows[i][k], 10)
          previous_was_number = true
        } else {
          if (!/^[prnbqkPRNBQK]$/.test(rows[i][k])) {
            return { valid: false, error_number: 9, error: errors[9] }
          }
          sum_fields += 1
          previous_was_number = false
        }
      }
      if (sum_fields !== 8) {
        return { valid: false, error_number: 10, error: errors[10] }
      }
    }

    if (
      (tokens[3][1] == '3' && tokens[1] == 'w') ||
      (tokens[3][1] == '6' && tokens[1] == 'b')
    ) {
      return { valid: false, error_number: 11, error: errors[11] }
    }

    /* everything's okay! */
    return { valid: true, error_number: 0, error: errors[0] }
  }

  function generate_fen() {
    var empty = 0
    var fen = ''

    for (var i = SQUARE_MAP.a8; i <= SQUARE_MAP.h1; i++) {
      if (board[i] == null) {
        empty++
      } else {
        if (empty > 0) {
          fen += empty
          empty = 0
        }
        var color = board[i].color
        var piece = board[i].type

        fen += color === WHITE ? piece.toUpperCase() : piece.toLowerCase()
      }

      if ((i + 1) & 0x88) {
        if (empty > 0) {
          fen += empty
        }

        if (i !== SQUARE_MAP.h1) {
          fen += '/'
        }

        empty = 0
        i += 8
      }
    }

    var cflags = ''
    if (castling[WHITE] & BITS.KSIDE_CASTLE) {
      cflags += 'K'
    }
    if (castling[WHITE] & BITS.QSIDE_CASTLE) {
      cflags += 'Q'
    }
    if (castling[BLACK] & BITS.KSIDE_CASTLE) {
      cflags += 'k'
    }
    if (castling[BLACK] & BITS.QSIDE_CASTLE) {
      cflags += 'q'
    }

    /* do we have an empty castling flag? */
    cflags = cflags || '-'
    var epflags = ep_square === EMPTY ? '-' : algebraic(ep_square)

    return [fen, turn, cflags, epflags, half_moves, move_number].join(' ')
  }

  function set_header(args) {
    for (var i = 0; i < args.length; i += 2) {
      if (typeof args[i] === 'string' && typeof args[i + 1] === 'string') {
        header[args[i]] = args[i + 1]
      }
    }
    return header
  }

  /* called when the initial board setup is changed with put() or remove().
   * modifies the SetUp and FEN properties of the header object.  if the FEN is
   * equal to the default position, the SetUp and FEN are deleted
   * the setup is only updated if history.length is zero, ie moves haven't been
   * made.
   */
  function update_setup(fen) {
    if (history.length > 0) return

    if (fen !== DEFAULT_POSITION) {
      header['SetUp'] = '1'
      header['FEN'] = fen
    } else {
      delete header['SetUp']
      delete header['FEN']
    }
  }

  function get(square) {
    var piece = board[SQUARE_MAP[square]]
    return piece ? { type: piece.type, color: piece.color } : null
  }

  function put(piece, square) {
    /* check for valid piece object */
    if (!('type' in piece && 'color' in piece)) {
      return false
    }

    /* check for piece */
    if (SYMBOLS.indexOf(piece.type.toLowerCase()) === -1) {
      return false
    }

    /* check for valid square */
    if (!(square in SQUARE_MAP)) {
      return false
    }

    var sq = SQUARE_MAP[square]

    /* don't let the user place more than one king */
    if (
      piece.type == KING &&
      !(kings[piece.color] == EMPTY || kings[piece.color] == sq)
    ) {
      return false
    }

    board[sq] = { type: piece.type, color: piece.color }
    if (piece.type === KING) {
      kings[piece.color] = sq
    }

    update_setup(generate_fen())

    return true
  }

  function remove(square) {
    var piece = get(square)
    board[SQUARE_MAP[square]] = null
    if (piece && piece.type === KING) {
      kings[piece.color] = EMPTY
    }

    update_setup(generate_fen())

    return piece
  }

  function build_move(board, from, to, flags, promotion) {
    var move = {
      color: turn,
      from: from,
      to: to,
      flags: flags,
      piece: board[from].type,
    }

    if (promotion) {
      move.flags |= BITS.PROMOTION
      move.promotion = promotion
    }

    if (board[to]) {
      move.captured = board[to].type
    } else if (flags & BITS.EP_CAPTURE) {
      move.captured = PAWN
    }
    return move
  }

  function generate_moves(options) {
    function add_move(board, moves, from, to, flags) {
      /* if pawn promotion */
      if (
        board[from].type === PAWN &&
        (rank(to) === RANK_8 || rank(to) === RANK_1)
      ) {
        var pieces = [QUEEN, ROOK, BISHOP, KNIGHT]
        for (var i = 0, len = pieces.length; i < len; i++) {
          moves.push(build_move(board, from, to, flags, pieces[i]))
        }
      } else {
        moves.push(build_move(board, from, to, flags))
      }
    }

    var moves = []
    var us = turn
    var them = swap_color(us)
    var second_rank = { b: RANK_7, w: RANK_2 }

    var first_sq = SQUARE_MAP.a8
    var last_sq = SQUARE_MAP.h1
    var single_square = false

    /* do we want legal moves? */
    var legal =
      typeof options !== 'undefined' && 'legal' in options
        ? options.legal
        : true

    var piece_type =
      typeof options !== 'undefined' &&
      'piece' in options &&
      typeof options.piece === 'string'
        ? options.piece.toLowerCase()
        : true

    /* are we generating moves for a single square? */
    if (typeof options !== 'undefined' && 'square' in options) {
      if (options.square in SQUARE_MAP) {
        first_sq = last_sq = SQUARE_MAP[options.square]
        single_square = true
      } else {
        /* invalid square */
        return []
      }
    }

    for (var i = first_sq; i <= last_sq; i++) {
      /* did we run off the end of the board */
      if (i & 0x88) {
        i += 7
        continue
      }

      var piece = board[i]
      if (piece == null || piece.color !== us) {
        continue
      }

      if (piece.type === PAWN && (piece_type === true || piece_type === PAWN)) {
        /* single square, non-capturing */
        var square = i + PAWN_OFFSETS[us][0]
        if (board[square] == null) {
          add_move(board, moves, i, square, BITS.NORMAL)

          /* double square */
          var square = i + PAWN_OFFSETS[us][1]
          if (second_rank[us] === rank(i) && board[square] == null) {
            add_move(board, moves, i, square, BITS.BIG_PAWN)
          }
        }

        /* pawn captures */
        for (j = 2; j < 4; j++) {
          var square = i + PAWN_OFFSETS[us][j]
          if (square & 0x88) continue

          if (board[square] != null && board[square].color === them) {
            add_move(board, moves, i, square, BITS.CAPTURE)
          } else if (square === ep_square) {
            add_move(board, moves, i, ep_square, BITS.EP_CAPTURE)
          }
        }
      } else if (piece_type === true || piece_type === piece.type) {
        for (var j = 0, len = PIECE_OFFSETS[piece.type].length; j < len; j++) {
          var offset = PIECE_OFFSETS[piece.type][j]
          var square = i

          while (true) {
            square += offset
            if (square & 0x88) break

            if (board[square] == null) {
              add_move(board, moves, i, square, BITS.NORMAL)
            } else {
              if (board[square].color === us) break
              add_move(board, moves, i, square, BITS.CAPTURE)
              break
            }

            /* break, if knight or king */
            if (piece.type === 'n' || piece.type === 'k') break
          }
        }
      }
    }

    /* check for castling if: a) we're generating all moves, or b) we're doing
     * single square move generation on the king's square
     */
    if (piece_type === true || piece_type === KING) {
      if (!single_square || last_sq === kings[us]) {
        /* king-side castling */
        if (castling[us] & BITS.KSIDE_CASTLE) {
          var castling_from = kings[us]
          var castling_to = castling_from + 2

          if (
            board[castling_from + 1] == null &&
            board[castling_to] == null &&
            !attacked(them, kings[us]) &&
            !attacked(them, castling_from + 1) &&
            !attacked(them, castling_to)
          ) {
            add_move(board, moves, kings[us], castling_to, BITS.KSIDE_CASTLE)
          }
        }

        /* queen-side castling */
        if (castling[us] & BITS.QSIDE_CASTLE) {
          var castling_from = kings[us]
          var castling_to = castling_from - 2

          if (
            board[castling_from - 1] == null &&
            board[castling_from - 2] == null &&
            board[castling_from - 3] == null &&
            !attacked(them, kings[us]) &&
            !attacked(them, castling_from - 1) &&
            !attacked(them, castling_to)
          ) {
            add_move(board, moves, kings[us], castling_to, BITS.QSIDE_CASTLE)
          }
        }
      }
    }

    /* return all pseudo-legal moves (this includes moves that allow the king
     * to be captured)
     */
    if (!legal) {
      return moves
    }

    /* filter out illegal moves */
    var legal_moves = []
    for (var i = 0, len = moves.length; i < len; i++) {
      make_move(moves[i])
      if (!king_attacked(us)) {
        legal_moves.push(moves[i])
      }
      undo_move()
    }

    return legal_moves
  }

  /* convert a move from 0x88 coordinates to Standard Algebraic Notation
   * (SAN)
   *
   * @param {boolean} sloppy Use the sloppy SAN generator to work around over
   * disambiguation bugs in Fritz and Chessbase.  See below:
   *
   * r1bqkbnr/ppp2ppp/2n5/1B1pP3/4P3/8/PPPP2PP/RNBQK1NR b KQkq - 2 4
   * 4. ... Nge7 is overly disambiguated because the knight on c6 is pinned
   * 4. ... Ne7 is technically the valid SAN
   */
  function move_to_san(move, moves) {
    var output = ''

    if (move.flags & BITS.KSIDE_CASTLE) {
      output = 'O-O'
    } else if (move.flags & BITS.QSIDE_CASTLE) {
      output = 'O-O-O'
    } else {
      if (move.piece !== PAWN) {
        var disambiguator = get_disambiguator(move, moves)
        output += move.piece.toUpperCase() + disambiguator
      }

      if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {
        if (move.piece === PAWN) {
          output += algebraic(move.from)[0]
        }
        output += 'x'
      }

      output += algebraic(move.to)

      if (move.flags & BITS.PROMOTION) {
        output += '=' + move.promotion.toUpperCase()
      }
    }

    make_move(move)
    if (in_check()) {
      if (in_checkmate()) {
        output += '#'
      } else {
        output += '+'
      }
    }
    undo_move()

    return output
  }

  function attacked(color, square) {
    for (var i = SQUARE_MAP.a8; i <= SQUARE_MAP.h1; i++) {
      /* did we run off the end of the board */
      if (i & 0x88) {
        i += 7
        continue
      }

      /* if empty square or wrong color */
      if (board[i] == null || board[i].color !== color) continue

      var piece = board[i]
      var difference = i - square
      var index = difference + 119

      if (ATTACKS[index] & (1 << SHIFTS[piece.type])) {
        if (piece.type === PAWN) {
          if (difference > 0) {
            if (piece.color === WHITE) return true
          } else {
            if (piece.color === BLACK) return true
          }
          continue
        }

        /* if the piece is a knight or a king */
        if (piece.type === 'n' || piece.type === 'k') return true

        var offset = RAYS[index]
        var j = i + offset

        var blocked = false
        while (j !== square) {
          if (board[j] != null) {
            blocked = true
            break
          }
          j += offset
        }

        if (!blocked) return true
      }
    }

    return false
  }

  function king_attacked(color) {
    return attacked(swap_color(color), kings[color])
  }

  function in_check() {
    return king_attacked(turn)
  }

  function in_checkmate() {
    return in_check() && generate_moves().length === 0
  }

  function in_stalemate() {
    return !in_check() && generate_moves().length === 0
  }

  function insufficient_material() {
    var pieces = {}
    var bishops = []
    var num_pieces = 0
    var sq_color = 0

    for (var i = SQUARE_MAP.a8; i <= SQUARE_MAP.h1; i++) {
      sq_color = (sq_color + 1) % 2
      if (i & 0x88) {
        i += 7
        continue
      }

      var piece = board[i]
      if (piece) {
        pieces[piece.type] = piece.type in pieces ? pieces[piece.type] + 1 : 1
        if (piece.type === BISHOP) {
          bishops.push(sq_color)
        }
        num_pieces++
      }
    }

    /* k vs. k */
    if (num_pieces === 2) {
      return true
    } else if (
      /* k vs. kn .... or .... k vs. kb */
      num_pieces === 3 &&
      (pieces[BISHOP] === 1 || pieces[KNIGHT] === 1)
    ) {
      return true
    } else if (num_pieces === pieces[BISHOP] + 2) {
      /* kb vs. kb where any number of bishops are all on the same color */
      var sum = 0
      var len = bishops.length
      for (var i = 0; i < len; i++) {
        sum += bishops[i]
      }
      if (sum === 0 || sum === len) {
        return true
      }
    }

    return false
  }

  function in_threefold_repetition() {
    /* TODO: while this function is fine for casual use, a better
     * implementation would use a Zobrist key (instead of FEN). the
     * Zobrist key would be maintained in the make_move/undo_move functions,
     * avoiding the costly that we do below.
     */
    var moves = []
    var positions = {}
    var repetition = false

    while (true) {
      var move = undo_move()
      if (!move) break
      moves.push(move)
    }

    while (true) {
      /* remove the last two fields in the FEN string, they're not needed
       * when checking for draw by rep */
      var fen = generate_fen().split(' ').slice(0, 4).join(' ')

      /* has the position occurred three or move times */
      positions[fen] = fen in positions ? positions[fen] + 1 : 1
      if (positions[fen] >= 3) {
        repetition = true
      }

      if (!moves.length) {
        break
      }
      make_move(moves.pop())
    }

    return repetition
  }

  function push(move) {
    history.push({
      move: move,
      kings: { b: kings.b, w: kings.w },
      turn: turn,
      castling: { b: castling.b, w: castling.w },
      ep_square: ep_square,
      half_moves: half_moves,
      move_number: move_number,
    })
  }

  function make_move(move) {
    var us = turn
    var them = swap_color(us)
    push(move)

    board[move.to] = board[move.from]
    board[move.from] = null

    /* if ep capture, remove the captured pawn */
    if (move.flags & BITS.EP_CAPTURE) {
      if (turn === BLACK) {
        board[move.to - 16] = null
      } else {
        board[move.to + 16] = null
      }
    }

    /* if pawn promotion, replace with new piece */
    if (move.flags & BITS.PROMOTION) {
      board[move.to] = { type: move.promotion, color: us }
    }

    /* if we moved the king */
    if (board[move.to].type === KING) {
      kings[board[move.to].color] = move.to

      /* if we castled, move the rook next to the king */
      if (move.flags & BITS.KSIDE_CASTLE) {
        var castling_to = move.to - 1
        var castling_from = move.to + 1
        board[castling_to] = board[castling_from]
        board[castling_from] = null
      } else if (move.flags & BITS.QSIDE_CASTLE) {
        var castling_to = move.to + 1
        var castling_from = move.to - 2
        board[castling_to] = board[castling_from]
        board[castling_from] = null
      }

      /* turn off castling */
      castling[us] = ''
    }

    /* turn off castling if we move a rook */
    if (castling[us]) {
      for (var i = 0, len = ROOKS[us].length; i < len; i++) {
        if (
          move.from === ROOKS[us][i].square &&
          castling[us] & ROOKS[us][i].flag
        ) {
          castling[us] ^= ROOKS[us][i].flag
          break
        }
      }
    }

    /* turn off castling if we capture a rook */
    if (castling[them]) {
      for (var i = 0, len = ROOKS[them].length; i < len; i++) {
        if (
          move.to === ROOKS[them][i].square &&
          castling[them] & ROOKS[them][i].flag
        ) {
          castling[them] ^= ROOKS[them][i].flag
          break
        }
      }
    }

    /* if big pawn move, update the en passant square */
    if (move.flags & BITS.BIG_PAWN) {
      if (turn === 'b') {
        ep_square = move.to - 16
      } else {
        ep_square = move.to + 16
      }
    } else {
      ep_square = EMPTY
    }

    /* reset the 50 move counter if a pawn is moved or a piece is captured */
    if (move.piece === PAWN) {
      half_moves = 0
    } else if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {
      half_moves = 0
    } else {
      half_moves++
    }

    if (turn === BLACK) {
      move_number++
    }
    turn = swap_color(turn)
  }

  function undo_move() {
    var old = history.pop()
    if (old == null) {
      return null
    }

    var move = old.move
    kings = old.kings
    turn = old.turn
    castling = old.castling
    ep_square = old.ep_square
    half_moves = old.half_moves
    move_number = old.move_number

    var us = turn
    var them = swap_color(turn)

    board[move.from] = board[move.to]
    board[move.from].type = move.piece // to undo any promotions
    board[move.to] = null

    if (move.flags & BITS.CAPTURE) {
      board[move.to] = { type: move.captured, color: them }
    } else if (move.flags & BITS.EP_CAPTURE) {
      var index
      if (us === BLACK) {
        index = move.to - 16
      } else {
        index = move.to + 16
      }
      board[index] = { type: PAWN, color: them }
    }

    if (move.flags & (BITS.KSIDE_CASTLE | BITS.QSIDE_CASTLE)) {
      var castling_to, castling_from
      if (move.flags & BITS.KSIDE_CASTLE) {
        castling_to = move.to + 1
        castling_from = move.to - 1
      } else if (move.flags & BITS.QSIDE_CASTLE) {
        castling_to = move.to - 2
        castling_from = move.to + 1
      }

      board[castling_to] = board[castling_from]
      board[castling_from] = null
    }

    return move
  }

  // convert a move from Standard Algebraic Notation (SAN) to 0x88 coordinates
  function move_from_san(move, sloppy) {
    // strip off any move decorations: e.g Nf3+?! becomes Nf3
    var clean_move = stripped_san(move)

    // the move parsers is a 2-step state
    for (var parser = 0; parser < 2; parser++) {
      if (parser == PARSER_SLOPPY) {
        // only run the sloppy parse if explicitly requested
        if (!sloppy) {
          return null
        }

        // The sloppy parser allows the user to parse non-standard chess
        // notations. This parser is opt-in (by specifying the
        // '{ sloppy: true }' setting) and is only run after the Standard
        // Algebraic Notation (SAN) parser has failed.
        //
        // When running the sloppy parser, we'll run a regex to grab the piece,
        // the to/from square, and an optional promotion piece. This regex will
        // parse common non-standard notation like: Pe2-e4, Rc1c4, Qf3xf7,
        // f7f8q, b1c3

        // NOTE: Some positions and moves may be ambiguous when using the
        // sloppy parser. For example, in this position:
        // 6k1/8/8/B7/8/8/8/BN4K1 w - - 0 1, the move b1c3 may be interpreted
        // as Nc3 or B1c3 (a disambiguated bishop move). In these cases, the
        // sloppy parser will default to the most most basic interpretation
        // (which is b1c3 parsing to Nc3).

        // FIXME: these var's are hoisted into function scope, this will need
        // to change when switching to const/let

        var overly_disambiguated = false

        var matches = clean_move.match(
          /([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/
        )
        if (matches) {
          var piece = matches[1]
          var from = matches[2]
          var to = matches[3]
          var promotion = matches[4]

          if (from.length == 1) {
            overly_disambiguated = true
          }
        } else {
          // The [a-h]?[1-8]? portion of the regex below handles moves that may
          // be overly disambiguated (e.g. Nge7 is unnecessary and non-standard
          // when there is one legal knight move to e7). In this case, the value
          // of 'from' variable will be a rank or file, not a square.
          var matches = clean_move.match(
            /([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/
          )

          if (matches) {
            var piece = matches[1]
            var from = matches[2]
            var to = matches[3]
            var promotion = matches[4]

            if (from.length == 1) {
              var overly_disambiguated = true
            }
          }
        }
      }

      var piece_type = infer_piece_type(clean_move)
      var moves = generate_moves({
        legal: true,
        piece: piece ? piece : piece_type,
      })

      for (var i = 0, len = moves.length; i < len; i++) {
        switch (parser) {
          case PARSER_STRICT: {
            if (clean_move === stripped_san(move_to_san(moves[i], moves))) {
              return moves[i]
            }
            break
          }
          case PARSER_SLOPPY: {
            if (matches) {
              // hand-compare move properties with the results from our sloppy
              // regex
              if (
                (!piece || piece.toLowerCase() == moves[i].piece) &&
                SQUARE_MAP[from] == moves[i].from &&
                SQUARE_MAP[to] == moves[i].to &&
                (!promotion || promotion.toLowerCase() == moves[i].promotion)
              ) {
                return moves[i]
              } else if (overly_disambiguated) {
                // SPECIAL CASE: we parsed a move string that may have an
                // unneeded rank/file disambiguator (e.g. Nge7).  The 'from'
                // variable will
                var square = algebraic(moves[i].from)
                if (
                  (!piece || piece.toLowerCase() == moves[i].piece) &&
                  SQUARE_MAP[to] == moves[i].to &&
                  (from == square[0] || from == square[1]) &&
                  (!promotion || promotion.toLowerCase() == moves[i].promotion)
                ) {
                  return moves[i]
                }
              }
            }
          }
        }
      }
    }

    return null
  }

  /* pretty = external move object */
  function make_pretty(ugly_move) {
    var move = clone(ugly_move)
    move.san = move_to_san(move, generate_moves({ legal: true }))
    move.to = algebraic(move.to)
    move.from = algebraic(move.from)

    var flags = ''

    for (var flag in BITS) {
      if (BITS[flag] & move.flags) {
        flags += FLAGS[flag]
      }
    }
    move.flags = flags

    return move
  }

  /*****************************************************************************
   * DEBUGGING UTILITIES
   ****************************************************************************/
  function perft(depth) {
    var moves = generate_moves({ legal: false })
    var nodes = 0
    var color = turn

    for (var i = 0, len = moves.length; i < len; i++) {
      make_move(moves[i])
      if (!king_attacked(color)) {
        if (depth - 1 > 0) {
          var child_nodes = perft(depth - 1)
          nodes += child_nodes
        } else {
          nodes++
        }
      }
      undo_move()
    }

    return nodes
  }

  return {
    /***************************************************************************
     * PUBLIC API
     **************************************************************************/
    load: function (fen) {
      return load(fen)
    },

    reset: function () {
      return reset()
    },

    moves: function (options) {
      /* The internal representation of a chess move is in 0x88 format, and
       * not meant to be human-readable.  The code below converts the 0x88
       * square coordinates to algebraic coordinates.  It also prunes an
       * unnecessary move keys resulting from a verbose call.
       */

      var ugly_moves = generate_moves(options)
      var moves = []

      for (var i = 0, len = ugly_moves.length; i < len; i++) {
        /* does the user want a full move object (most likely not), or just
         * SAN
         */
        if (
          typeof options !== 'undefined' &&
          'verbose' in options &&
          options.verbose
        ) {
          moves.push(make_pretty(ugly_moves[i]))
        } else {
          moves.push(
            move_to_san(ugly_moves[i], generate_moves({ legal: true }))
          )
        }
      }

      return moves
    },

    in_check: function () {
      return in_check()
    },

    in_checkmate: function () {
      return in_checkmate()
    },

    in_stalemate: function () {
      return in_stalemate()
    },

    in_draw: function () {
      return (
        half_moves >= 100 ||
        in_stalemate() ||
        insufficient_material() ||
        in_threefold_repetition()
      )
    },

    insufficient_material: function () {
      return insufficient_material()
    },

    in_threefold_repetition: function () {
      return in_threefold_repetition()
    },

    game_over: function () {
      return (
        half_moves >= 100 ||
        in_checkmate() ||
        in_stalemate() ||
        insufficient_material() ||
        in_threefold_repetition()
      )
    },

    validate_fen: function (fen) {
      return validate_fen(fen)
    },

    fen: function () {
      return generate_fen()
    },

    board: function () {
      var output = [],
        row = []

      for (var i = SQUARE_MAP.a8; i <= SQUARE_MAP.h1; i++) {
        if (board[i] == null) {
          row.push(null)
        } else {
          row.push({
            square: algebraic(i),
            type: board[i].type,
            color: board[i].color,
          })
        }
        if ((i + 1) & 0x88) {
          output.push(row)
          row = []
          i += 8
        }
      }

      return output
    },

    pgn: function (options) {
      /* using the specification from http://www.chessclub.com/help/PGN-spec
       * example for html usage: .pgn({ max_width: 72, newline_char: "<br />" })
       */
      var newline =
        typeof options === 'object' && typeof options.newline_char === 'string'
          ? options.newline_char
          : '\n'
      var max_width =
        typeof options === 'object' && typeof options.max_width === 'number'
          ? options.max_width
          : 0
      var result = []
      var header_exists = false

      /* add the PGN header headerrmation */
      for (var i in header) {
        /* TODO: order of enumerated properties in header object is not
         * guaranteed, see ECMA-262 spec (section 12.6.4)
         */
        result.push('[' + i + ' "' + header[i] + '"]' + newline)
        header_exists = true
      }

      if (header_exists && history.length) {
        result.push(newline)
      }

      var append_comment = function (move_string) {
        var comment = comments[generate_fen()]
        if (typeof comment !== 'undefined') {
          var delimiter = move_string.length > 0 ? ' ' : ''
          move_string = `${move_string}${delimiter}{${comment}}`
        }
        return move_string
      }

      /* pop all of history onto reversed_history */
      var reversed_history = []
      while (history.length > 0) {
        reversed_history.push(undo_move())
      }

      var moves = []
      var move_string = ''

      /* special case of a commented starting position with no moves */
      if (reversed_history.length === 0) {
        moves.push(append_comment(''))
      }

      /* build the list of moves.  a move_string looks like: "3. e3 e6" */
      while (reversed_history.length > 0) {
        move_string = append_comment(move_string)
        var move = reversed_history.pop()

        /* if the position started with black to move, start PGN with 1. ... */
        if (!history.length && move.color === 'b') {
          move_string = move_number + '. ...'
        } else if (move.color === 'w') {
          /* store the previous generated move_string if we have one */
          if (move_string.length) {
            moves.push(move_string)
          }
          move_string = move_number + '.'
        }

        move_string =
          move_string + ' ' + move_to_san(move, generate_moves({ legal: true }))
        make_move(move)
      }

      /* are there any other leftover moves? */
      if (move_string.length) {
        moves.push(append_comment(move_string))
      }

      /* is there a result? */
      if (typeof header.Result !== 'undefined') {
        moves.push(header.Result)
      }

      /* history should be back to what it was before we started generating PGN,
       * so join together moves
       */
      if (max_width === 0) {
        return result.join('') + moves.join(' ')
      }

      var strip = function () {
        if (result.length > 0 && result[result.length - 1] === ' ') {
          result.pop()
          return true
        }
        return false
      }

      /* NB: this does not preserve comment whitespace. */
      var wrap_comment = function (width, move) {
        for (var token of move.split(' ')) {
          if (!token) {
            continue
          }
          if (width + token.length > max_width) {
            while (strip()) {
              width--
            }
            result.push(newline)
            width = 0
          }
          result.push(token)
          width += token.length
          result.push(' ')
          width++
        }
        if (strip()) {
          width--
        }
        return width
      }

      /* wrap the PGN output at max_width */
      var current_width = 0
      for (var i = 0; i < moves.length; i++) {
        if (current_width + moves[i].length > max_width) {
          if (moves[i].includes('{')) {
            current_width = wrap_comment(current_width, moves[i])
            continue
          }
        }
        /* if the current move will push past max_width */
        if (current_width + moves[i].length > max_width && i !== 0) {
          /* don't end the line with whitespace */
          if (result[result.length - 1] === ' ') {
            result.pop()
          }

          result.push(newline)
          current_width = 0
        } else if (i !== 0) {
          result.push(' ')
          current_width++
        }
        result.push(moves[i])
        current_width += moves[i].length
      }

      return result.join('')
    },

    load_pgn: function (pgn, options) {
      // allow the user to specify the sloppy move parser to work around over
      // disambiguation bugs in Fritz and Chessbase
      var sloppy =
        typeof options !== 'undefined' && 'sloppy' in options
          ? options.sloppy
          : false

      function mask(str) {
        return str.replace(/\\/g, '\\')
      }

      function has_keys(object) {
        for (var key in object) {
          return true
        }
        return false
      }

      function parse_pgn_header(header, options) {
        var newline_char =
          typeof options === 'object' &&
          typeof options.newline_char === 'string'
            ? options.newline_char
            : '\r?\n'
        var header_obj = {}
        var headers = header.split(new RegExp(mask(newline_char)))
        var key = ''
        var value = ''

        for (var i = 0; i < headers.length; i++) {
          key = headers[i].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/, '$1')
          value = headers[i].replace(/^\[[A-Za-z]+\s"(.*)"\ *\]$/, '$1')
          if (trim(key).length > 0) {
            header_obj[key] = value
          }
        }

        return header_obj
      }

      var newline_char =
        typeof options === 'object' && typeof options.newline_char === 'string'
          ? options.newline_char
          : '\r?\n'

      // RegExp to split header. Takes advantage of the fact that header and movetext
      // will always have a blank line between them (ie, two newline_char's).
      // With default newline_char, will equal: /^(\[((?:\r?\n)|.)*\])(?:\r?\n){2}/
      var header_regex = new RegExp(
        '^(\\[((?:' +
          mask(newline_char) +
          ')|.)*\\])' +
          '(?:' +
          mask(newline_char) +
          '){2}'
      )

      // If no header given, begin with moves.
      var header_string = header_regex.test(pgn)
        ? header_regex.exec(pgn)[1]
        : ''

      // Put the board in the starting position
      reset()

      /* parse PGN header */
      var headers = parse_pgn_header(header_string, options)
      for (var key in headers) {
        set_header([key, headers[key]])
      }

      /* load the starting position indicated by [Setup '1'] and
       * [FEN position] */
      if (headers['SetUp'] === '1') {
        if (!('FEN' in headers && load(headers['FEN'], true))) {
          // second argument to load: don't clear the headers
          return false
        }
      }

      /* NB: the regexes below that delete move numbers, recursive
       * annotations, and numeric annotation glyphs may also match
       * text in comments. To prevent this, we transform comments
       * by hex-encoding them in place and decoding them again after
       * the other tokens have been deleted.
       *
       * While the spec states that PGN files should be ASCII encoded,
       * we use {en,de}codeURIComponent here to support arbitrary UTF8
       * as a convenience for modern users */

      var to_hex = function (string) {
        return Array.from(string)
          .map(function (c) {
            /* encodeURI doesn't transform most ASCII characters,
             * so we handle these ourselves */
            return c.charCodeAt(0) < 128
              ? c.charCodeAt(0).toString(16)
              : encodeURIComponent(c).replace(/\%/g, '').toLowerCase()
          })
          .join('')
      }

      var from_hex = function (string) {
        return string.length == 0
          ? ''
          : decodeURIComponent('%' + string.match(/.{1,2}/g).join('%'))
      }

      var encode_comment = function (string) {
        string = string.replace(new RegExp(mask(newline_char), 'g'), ' ')
        return `{${to_hex(string.slice(1, string.length - 1))}}`
      }

      var decode_comment = function (string) {
        if (string.startsWith('{') && string.endsWith('}')) {
          return from_hex(string.slice(1, string.length - 1))
        }
      }

      /* delete header to get the moves */
      var ms = pgn
        .replace(header_string, '')
        .replace(
          /* encode comments so they don't get deleted below */
          new RegExp(`(\{[^}]*\})+?|;([^${mask(newline_char)}]*)`, 'g'),
          function (match, bracket, semicolon) {
            return bracket !== undefined
              ? encode_comment(bracket)
              : ' ' + encode_comment(`{${semicolon.slice(1)}}`)
          }
        )
        .replace(new RegExp(mask(newline_char), 'g'), ' ')

      /* delete recursive annotation variations */
      var rav_regex = /(\([^\(\)]+\))+?/g
      while (rav_regex.test(ms)) {
        ms = ms.replace(rav_regex, '')
      }

      /* delete move numbers */
      ms = ms.replace(/\d+\.(\.\.)?/g, '')

      /* delete ... indicating black to move */
      ms = ms.replace(/\.\.\./g, '')

      /* delete numeric annotation glyphs */
      ms = ms.replace(/\$\d+/g, '')

      /* trim and get array of moves */
      var moves = trim(ms).split(new RegExp(/\s+/))

      /* delete empty entries */
      moves = moves.join(',').replace(/,,+/g, ',').split(',')
      var move = ''

      var result = ''

      for (var half_move = 0; half_move < moves.length; half_move++) {
        var comment = decode_comment(moves[half_move])
        if (comment !== undefined) {
          comments[generate_fen()] = comment
          continue
        }

        move = move_from_san(moves[half_move], sloppy)

        /* invalid move */
        if (move == null) {
          /* was the move an end of game marker */
          if (TERMINATION_MARKERS.indexOf(moves[half_move]) > -1) {
            result = moves[half_move]
          } else {
            return false
          }
        } else {
          /* reset the end of game marker if making a valid move */
          result = ''
          make_move(move)
        }
      }

      /* Per section 8.2.6 of the PGN spec, the Result tag pair must match
       * match the termination marker. Only do this when headers are present,
       * but the result tag is missing
       */
      if (result && Object.keys(header).length && !header['Result']) {
        set_header(['Result', result])
      }

      return true
    },

    header: function () {
      return set_header(arguments)
    },

    turn: function () {
      return turn
    },

    move: function (move, options) {
      /* The move function can be called with in the following parameters:
       *
       * .move('Nxb7')      <- where 'move' is a case-sensitive SAN string
       *
       * .move({ from: 'h7', <- where the 'move' is a move object (additional
       *         to :'h8',      fields are ignored)
       *         promotion: 'q',
       *      })
       */

      // allow the user to specify the sloppy move parser to work around over
      // disambiguation bugs in Fritz and Chessbase
      var sloppy =
        typeof options !== 'undefined' && 'sloppy' in options
          ? options.sloppy
          : false

      var move_obj = null

      if (typeof move === 'string') {
        move_obj = move_from_san(move, sloppy)
      } else if (typeof move === 'object') {
        var moves = generate_moves()

        /* convert the pretty move object to an ugly move object */
        for (var i = 0, len = moves.length; i < len; i++) {
          if (
            move.from === algebraic(moves[i].from) &&
            move.to === algebraic(moves[i].to) &&
            (!('promotion' in moves[i]) ||
              move.promotion === moves[i].promotion)
          ) {
            move_obj = moves[i]
            break
          }
        }
      }

      /* failed to find move */
      if (!move_obj) {
        return null
      }

      /* need to make a copy of move because we can't generate SAN after the
       * move is made
       */
      var pretty_move = make_pretty(move_obj)

      make_move(move_obj)

      return pretty_move
    },

    undo: function () {
      var move = undo_move()
      return move ? make_pretty(move) : null
    },

    clear: function () {
      return clear()
    },

    put: function (piece, square) {
      return put(piece, square)
    },

    get: function (square) {
      return get(square)
    },

    ascii() {
      var s = '   +------------------------+\n'
      for (var i = SQUARE_MAP.a8; i <= SQUARE_MAP.h1; i++) {
        /* display the rank */
        if (file(i) === 0) {
          s += ' ' + '87654321'[rank(i)] + ' |'
        }

        /* empty piece */
        if (board[i] == null) {
          s += ' . '
        } else {
          var piece = board[i].type
          var color = board[i].color
          var symbol =
            color === WHITE ? piece.toUpperCase() : piece.toLowerCase()
          s += ' ' + symbol + ' '
        }

        if ((i + 1) & 0x88) {
          s += '|\n'
          i += 8
        }
      }
      s += '   +------------------------+\n'
      s += '     a  b  c  d  e  f  g  h'

      return s
    },

    remove: function (square) {
      return remove(square)
    },

    perft: function (depth) {
      return perft(depth)
    },

    square_color: function (square) {
      if (square in SQUARE_MAP) {
        var sq_0x88 = SQUARE_MAP[square]
        return (rank(sq_0x88) + file(sq_0x88)) % 2 === 0 ? 'light' : 'dark'
      }

      return null
    },

    history: function (options) {
      var reversed_history = []
      var move_history = []
      var verbose =
        typeof options !== 'undefined' &&
        'verbose' in options &&
        options.verbose

      while (history.length > 0) {
        reversed_history.push(undo_move())
      }

      while (reversed_history.length > 0) {
        var move = reversed_history.pop()
        if (verbose) {
          move_history.push(make_pretty(move))
        } else {
          move_history.push(move_to_san(move, generate_moves({ legal: true })))
        }
        make_move(move)
      }

      return move_history
    },

    get_comment: function () {
      return comments[generate_fen()]
    },

    set_comment: function (comment) {
      comments[generate_fen()] = comment.replace('{', '[').replace('}', ']')
    },

    delete_comment: function () {
      var comment = comments[generate_fen()]
      delete comments[generate_fen()]
      return comment
    },

    get_comments: function () {
      prune_comments()
      return Object.keys(comments).map(function (fen) {
        return { fen: fen, comment: comments[fen] }
      })
    },

    delete_comments: function () {
      prune_comments()
      return Object.keys(comments).map(function (fen) {
        var comment = comments[fen]
        delete comments[fen]
        return { fen: fen, comment: comment }
      })
    },
  }
}


/***/ }),

/***/ "./node_modules/peerjs/dist sync recursive":
/*!***************************************!*\
  !*** ./node_modules/peerjs/dist sync ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = function() { return []; };
webpackEmptyContext.resolve = webpackEmptyContext;
module.exports = webpackEmptyContext;
webpackEmptyContext.id = "./node_modules/peerjs/dist sync recursive";

/***/ }),

/***/ "./node_modules/peerjs/dist/peerjs.min.js":
/*!************************************************!*\
  !*** ./node_modules/peerjs/dist/peerjs.min.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var require;parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if( true&&"string"==typeof t)return __webpack_require__("./node_modules/peerjs/dist sync recursive")(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]); true?module.exports=l:undefined}if(parcelRequire=f,i)throw i;return f}({"EgBh":[function(require,module,exports) {
var e={};e.useBlobBuilder=function(){try{return new Blob([]),!1}catch(e){return!0}}(),e.useArrayBufferView=!e.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(e){return!0}}(),module.exports.binaryFeatures=e;var r=module.exports.BlobBuilder;function t(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(r=module.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),t.prototype.append=function(e){"number"==typeof e?this._pieces.push(e):(this.flush(),this._parts.push(e))},t.prototype.flush=function(){if(this._pieces.length>0){var r=new Uint8Array(this._pieces);e.useArrayBufferView||(r=r.buffer),this._parts.push(r),this._pieces=[]}},t.prototype.getBuffer=function(){if(this.flush(),e.useBlobBuilder){for(var t=new r,i=0,u=this._parts.length;i<u;i++)t.append(this._parts[i]);return t.getBlob()}return new Blob(this._parts)},module.exports.BufferBuilder=t;
},{}],"kdPp":[function(require,module,exports) {
var t=require("./bufferbuilder").BufferBuilder,e=require("./bufferbuilder").binaryFeatures,i={unpack:function(t){return new r(t).unpack()},pack:function(t){var e=new n;return e.pack(t),e.getBuffer()}};function r(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function n(){this.bufferBuilder=new t}function u(t){var e=t.charCodeAt(0);return e<=2047?"00":e<=65535?"000":e<=2097151?"0000":e<=67108863?"00000":"000000"}function a(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,u).length}module.exports=i,r.prototype.unpack=function(){var t,e=this.unpack_uint8();if(e<128)return e;if((224^e)<32)return(224^e)-32;if((t=160^e)<=15)return this.unpack_raw(t);if((t=176^e)<=15)return this.unpack_string(t);if((t=144^e)<=15)return this.unpack_array(t);if((t=128^e)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:case 213:case 214:case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}},r.prototype.unpack_uint8=function(){var t=255&this.dataView[this.index];return this.index++,t},r.prototype.unpack_uint16=function(){var t=this.read(2),e=256*(255&t[0])+(255&t[1]);return this.index+=2,e},r.prototype.unpack_uint32=function(){var t=this.read(4),e=256*(256*(256*t[0]+t[1])+t[2])+t[3];return this.index+=4,e},r.prototype.unpack_uint64=function(){var t=this.read(8),e=256*(256*(256*(256*(256*(256*(256*t[0]+t[1])+t[2])+t[3])+t[4])+t[5])+t[6])+t[7];return this.index+=8,e},r.prototype.unpack_int8=function(){var t=this.unpack_uint8();return t<128?t:t-256},r.prototype.unpack_int16=function(){var t=this.unpack_uint16();return t<32768?t:t-65536},r.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)},r.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)},r.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e},r.prototype.unpack_string=function(t){for(var e,i,r=this.read(t),n=0,u="";n<t;)(e=r[n])<128?(u+=String.fromCharCode(e),n++):(192^e)<32?(i=(192^e)<<6|63&r[n+1],u+=String.fromCharCode(i),n+=2):(i=(15&e)<<12|(63&r[n+1])<<6|63&r[n+2],u+=String.fromCharCode(i),n+=3);return this.index+=t,u},r.prototype.unpack_array=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=this.unpack();return e},r.prototype.unpack_map=function(t){for(var e={},i=0;i<t;i++){var r=this.unpack(),n=this.unpack();e[r]=n}return e},r.prototype.unpack_float=function(){var t=this.unpack_uint32(),e=(t>>23&255)-127;return(0===t>>31?1:-1)*(8388607&t|8388608)*Math.pow(2,e-23)},r.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),i=(t>>20&2047)-1023;return(0===t>>31?1:-1)*((1048575&t|1048576)*Math.pow(2,i-20)+e*Math.pow(2,i-52))},r.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")},n.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},n.prototype.pack=function(t){var i=typeof t;if("string"===i)this.pack_string(t);else if("number"===i)Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if("boolean"===i)!0===t?this.bufferBuilder.append(195):!1===t&&this.bufferBuilder.append(194);else if("undefined"===i)this.bufferBuilder.append(192);else{if("object"!==i)throw new Error('Type "'+i+'" not yet supported');if(null===t)this.bufferBuilder.append(192);else{var r=t.constructor;if(r==Array)this.pack_array(t);else if(r==Blob||r==File||t instanceof Blob||t instanceof File)this.pack_bin(t);else if(r==ArrayBuffer)e.useArrayBufferView?this.pack_bin(new Uint8Array(t)):this.pack_bin(t);else if("BYTES_PER_ELEMENT"in t)e.useArrayBufferView?this.pack_bin(new Uint8Array(t.buffer)):this.pack_bin(t.buffer);else if(r==Object||r.toString().startsWith("class"))this.pack_object(t);else if(r==Date)this.pack_string(t.toString());else{if("function"!=typeof t.toBinaryPack)throw new Error('Type "'+r.toString()+'" not yet supported');this.bufferBuilder.append(t.toBinaryPack())}}}this.bufferBuilder.flush()},n.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(e<=15)this.pack_uint8(160+e);else if(e<=65535)this.bufferBuilder.append(218),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(e)}this.bufferBuilder.append(t)},n.prototype.pack_string=function(t){var e=a(t);if(e<=15)this.pack_uint8(176+e);else if(e<=65535)this.bufferBuilder.append(216),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(e)}this.bufferBuilder.append(t)},n.prototype.pack_array=function(t){var e=t.length;if(e<=15)this.pack_uint8(144+e);else if(e<=65535)this.bufferBuilder.append(220),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(e)}for(var i=0;i<e;i++)this.pack(t[i])},n.prototype.pack_integer=function(t){if(t>=-32&&t<=127)this.bufferBuilder.append(255&t);else if(t>=0&&t<=255)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-0x8000000000000000&&t<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(t);else{if(!(t>=0&&t<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(t)}},n.prototype.pack_double=function(t){var e=0;t<0&&(e=1,t=-t);var i=Math.floor(Math.log(t)/Math.LN2),r=t/Math.pow(2,i)-1,n=Math.floor(r*Math.pow(2,52)),u=Math.pow(2,32),a=e<<31|i+1023<<20|n/u&1048575,p=n%u;this.bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(p)},n.prototype.pack_object=function(t){var e=Object.keys(t).length;if(e<=15)this.pack_uint8(128+e);else if(e<=65535)this.bufferBuilder.append(222),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(e)}for(var i in t)t.hasOwnProperty(i)&&(this.pack(i),this.pack(t[i]))},n.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)},n.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_uint32=function(t){var e=4294967295&t;this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},n.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),i=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&i)>>>24),this.bufferBuilder.append((16711680&i)>>>16),this.bufferBuilder.append((65280&i)>>>8),this.bufferBuilder.append(255&i)},n.prototype.pack_int8=function(t){this.bufferBuilder.append(255&t)},n.prototype.pack_int16=function(t){this.bufferBuilder.append((65280&t)>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),i=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&i)>>>24),this.bufferBuilder.append((16711680&i)>>>16),this.bufferBuilder.append((65280&i)>>>8),this.bufferBuilder.append(255&i)};
},{"./bufferbuilder":"EgBh"}],"iSxC":[function(require,module,exports) {
"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractVersion=o,exports.wrapPeerConnectionEvent=i,exports.disableLog=s,exports.disableWarnings=a,exports.log=p,exports.deprecated=u,exports.detectBrowser=c,exports.compactObject=f,exports.walkStats=l,exports.filterStats=v;var n=!0,r=!0;function o(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function i(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return o.apply(this,arguments);var i=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,i),o.apply(this,[e,i])};var i=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(n))return i.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function s(e){return"boolean"!=typeof e?new Error("Argument type: "+t(e)+". Please use a boolean."):(n=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function a(e){return"boolean"!=typeof e?new Error("Argument type: "+t(e)+". Please use a boolean."):(r=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function p(){if("object"===("undefined"==typeof window?"undefined":t(window))){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function u(e,t){r&&console.warn(e+" is deprecated, please use "+t+" instead.")}function c(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=o(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=o(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=o(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=o(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function d(e){return"[object Object]"===Object.prototype.toString.call(e)}function f(t){return d(t)?Object.keys(t).reduce(function(n,r){var o=d(t[r]),i=o?f(t[r]):t[r],s=o&&!Object.keys(i).length;return void 0===i||s?n:Object.assign(n,e({},r,i))},{}):t}function l(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach(function(r){r.endsWith("Id")?l(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(function(t){l(e,e.get(t),n)})}))}function v(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;var i=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)}),i.forEach(function(t){e.forEach(function(n){n.type===r&&n.trackId===t.id&&l(e,n,o)})}),o}
},{}],"s6SN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=i;var e=t(require("../utils.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,t&&t.set(e,o),o}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=e.log;function i(e,r){var t=e&&e.navigator;if(t.mediaDevices){var i=function(e){if("object"!==o(e)||e.mandatory||e.optional)return e;var r={};return Object.keys(e).forEach(function(t){if("require"!==t&&"advanced"!==t&&"mediaSource"!==t){var n="object"===o(e[t])?e[t]:{ideal:e[t]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var i=function(e,r){return e?e+r.charAt(0).toUpperCase()+r.slice(1):"deviceId"===r?"sourceId":r};if(void 0!==n.ideal){r.optional=r.optional||[];var a={};"number"==typeof n.ideal?(a[i("min",t)]=n.ideal,r.optional.push(a),(a={})[i("max",t)]=n.ideal,r.optional.push(a)):(a[i("",t)]=n.ideal,r.optional.push(a))}void 0!==n.exact&&"number"!=typeof n.exact?(r.mandatory=r.mandatory||{},r.mandatory[i("",t)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(r.mandatory=r.mandatory||{},r.mandatory[i(e,t)]=n[e])})}}),e.advanced&&(r.optional=(r.optional||[]).concat(e.advanced)),r},a=function(e,a){if(r.version>=61)return a(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===o(e.audio)){var c=function(e,r,t){r in e&&!(t in e)&&(e[t]=e[r],delete e[r])};c((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),c(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"===o(e.video)){var d=e.video.facingMode;d=d&&("object"===o(d)?d:{ideal:d});var u,s=r.version<66;if(d&&("user"===d.exact||"environment"===d.exact||"user"===d.ideal||"environment"===d.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||s))if(delete e.video.facingMode,"environment"===d.exact||"environment"===d.ideal?u=["back","rear"]:"user"!==d.exact&&"user"!==d.ideal||(u=["front"]),u)return t.mediaDevices.enumerateDevices().then(function(r){var t=(r=r.filter(function(e){return"videoinput"===e.kind})).find(function(e){return u.some(function(r){return e.label.toLowerCase().includes(r)})});return!t&&r.length&&u.includes("back")&&(t=r[r.length-1]),t&&(e.video.deviceId=d.exact?{exact:t.deviceId}:{ideal:t.deviceId}),e.video=i(e.video),n("chrome: "+JSON.stringify(e)),a(e)});e.video=i(e.video)}return n("chrome: "+JSON.stringify(e)),a(e)},c=function(e){return r.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,r,o){a(e,function(e){t.webkitGetUserMedia(e,r,function(e){o&&o(c(e))})})}.bind(t),t.mediaDevices.getUserMedia){var d=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return a(e,function(e){return d(e).then(function(r){if(e.audio&&!r.getAudioTracks().length||e.video&&!r.getVideoTracks().length)throw r.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return r},function(e){return Promise.reject(c(e))})})}}}}
},{"../utils.js":"iSxC"}],"VHa8":[function(require,module,exports) {
"use strict";function e(e,i){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof i?e.navigator.mediaDevices.getDisplayMedia=function(a){return i(a).then(function(i){var t=a.video&&a.video.width,o=a.video&&a.video.height,d=a.video&&a.video.frameRate;return a.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:d||3}},t&&(a.video.mandatory.maxWidth=t),o&&(a.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(a)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;
},{}],"uI5X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimMediaStream=a,exports.shimOnTrack=c,exports.shimGetSendersWithDtmf=p,exports.shimGetStats=d,exports.shimSenderReceiverGetStats=h,exports.shimAddTrackRemoveTrackWithNative=f,exports.shimAddTrackRemoveTrack=m,exports.shimPeerConnection=u,exports.fixNegotiationNeeded=l,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return t.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}});var e=i(require("../utils.js")),t=require("./getusermedia"),r=require("./getdisplaymedia");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function c(t){if("object"!==s(t)||!t.RTCPeerConnection||"ontrack"in t.RTCPeerConnection.prototype)e.wrapPeerConnectionEvent(t,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e});else{Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var r=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._ontrackpoly||(this._ontrackpoly=function(r){r.stream.addEventListener("addtrack",function(n){var i;i=t.RTCPeerConnection.prototype.getReceivers?e.getReceivers().find(function(e){return e.track&&e.track.id===n.track.id}):{track:n.track};var o=new Event("track");o.track=n.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],e.dispatchEvent(o)}),r.stream.getTracks().forEach(function(n){var i;i=t.RTCPeerConnection.prototype.getReceivers?e.getReceivers().find(function(e){return e.track&&e.track.id===n.id}):{track:n};var o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],e.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}}function p(e){if("object"===s(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var i=r.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach(function(e){r._senders.push(t(r,e))})};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach(function(e){var r=t._senders.find(function(t){return t.track===e});r&&t._senders.splice(t._senders.indexOf(r),1)})}}else if("object"===s(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function d(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,[r,n,i]=arguments;if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var o=function(e){var t={};return e.result().forEach(function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){r[t]=e.stat(t)}),t[r.id]=r}),t},s=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){return t.apply(this,[function(e){n(s(o(e)))},r])}return new Promise(function(r,n){t.apply(e,[function(e){r(s(o(e)))},n])}).then(n,i)}}}function h(t){if("object"===s(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver){if(!("getStats"in t.RTCRtpSender.prototype)){var r=t.RTCPeerConnection.prototype.getSenders;r&&(t.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=r.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t});var n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),t.RTCRtpSender.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(r){return e.filterStats(r,t.track,!0)})}}if(!("getStats"in t.RTCRtpReceiver.prototype)){var i=t.RTCPeerConnection.prototype.getReceivers;i&&(t.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),e.wrapPeerConnectionEvent(t,"track",function(e){return e.receiver._pc=e.srcElement,e}),t.RTCRtpReceiver.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(r){return e.filterStats(r,t.track,!1)})}}if("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype){var o=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){var e,r,n,i=arguments[0];return this.getSenders().forEach(function(t){t.track===i&&(e?n=!0:e=t)}),this.getReceivers().forEach(function(e){return e.track===i&&(r?n=!0:r=e),e.track===i}),n||e&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):e?e.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}}function f(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")});var n=this.getSenders();r.apply(this,arguments);var i=this.getSenders().filter(function(e){return-1===n.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(r){var n=t._shimmedLocalStreams[r].indexOf(e);-1!==n&&t._shimmedLocalStreams[r].splice(n,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]}),i.apply(this,arguments)}}function m(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return f(e);var r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=r.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(function(e){if(r.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}n.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[r.id];if(o)o.addTrack(t),Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))});else{var s=new e.MediaStream([t]);this._streams[r.id]=s,this._reverseStreams[s.id]=r,this.addStream(s)}return this.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t],n=o({},t,function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[function(r){var n=c(e,r);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(this,arguments).then(function(t){return c(e,t)})});e.RTCPeerConnection.prototype[t]=n[t]});var s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(e=this,t=arguments[0],r=t.sdp,Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:r})),s.apply(this,arguments)):s.apply(this,arguments);var e,t,r};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:c(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach(function(n){r._streams[n].getTracks().find(function(t){return e.track===t})&&(t=r._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function c(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(i.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:r})}}function u(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t],n=o({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=n[t]})}function l(t,r){e.wrapPeerConnectionEvent(t,"negotiationneeded",function(e){var t=e.target;if(!(r.version<72||t.getConfiguration&&"plan-b"===t.getConfiguration().sdpSemantics)||"stable"===t.signalingState)return e})}
},{"../utils.js":"iSxC","./getusermedia":"s6SN","./getdisplaymedia":"VHa8"}],"NZ1C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.filterIceServers=n;var r=t(require("../utils"));function e(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return e=function(){return r},r}function t(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=e();if(t&&t.has(r))return t.get(r);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var f=u?Object.getOwnPropertyDescriptor(r,i):null;f&&(f.get||f.set)?Object.defineProperty(n,i,f):n[i]=r[i]}return n.default=r,t&&t.set(r,n),n}function n(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");var u="string"==typeof t;return u&&(t=[t]),t=t.filter(function(r){if(0===r.indexOf("stun:"))return!1;var e=r.startsWith("turn")&&!r.startsWith("turn:[")&&r.includes("transport=udp");return e&&!n?(n=!0,!0):e&&!n}),delete e.url,e.urls=u?t[0]:t,!!t.length}})}
},{"../utils":"iSxC"}],"YHvh":[function(require,module,exports) {
"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(r){return r.trim().split("\n").map(function(r){return r.trim()})},r.splitSections=function(r){return r.split("\nm=").map(function(r,e){return(e>0?"m="+r:r).trim()+"\r\n"})},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(r){return 0===r.indexOf(t)})},r.parseCandidate=function(r){for(var e,t={foundation:(e=0===r.indexOf("a=candidate:")?r.substring(12).split(" "):r.substring(10).split(" "))[0],component:parseInt(e[1],10),protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],address:e[4],port:parseInt(e[5],10),type:e[7]},a=8;a<e.length;a+=2)switch(e[a]){case"raddr":t.relatedAddress=e[a+1];break;case"rport":t.relatedPort=parseInt(e[a+1],10);break;case"tcptype":t.tcpType=e[a+1];break;case"ufrag":t.ufrag=e[a+1],t.usernameFragment=e[a+1];break;default:t[e[a]]=e[a+1]}return t},r.writeCandidate=function(r){var e=[];e.push(r.foundation),e.push(r.component),e.push(r.protocol.toUpperCase()),e.push(r.priority),e.push(r.address||r.ip),e.push(r.port);var t=r.type;return e.push("typ"),e.push(t),"host"!==t&&r.relatedAddress&&r.relatedPort&&(e.push("raddr"),e.push(r.relatedAddress),e.push("rport"),e.push(r.relatedPort)),r.tcpType&&"tcp"===r.protocol.toLowerCase()&&(e.push("tcptype"),e.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(e.push("ufrag"),e.push(r.usernameFragment||r.ufrag)),"candidate:"+e.join(" ")},r.parseIceOptions=function(r){return r.substr(14).split(" ")},r.parseRtpMap=function(r){var e=r.substr(9).split(" "),t={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),t.name=e[0],t.clockRate=parseInt(e[1],10),t.channels=3===e.length?parseInt(e[2],10):1,t.numChannels=t.channels,t},r.writeRtpMap=function(r){var e=r.payloadType;void 0!==r.preferredPayloadType&&(e=r.preferredPayloadType);var t=r.channels||r.numChannels||1;return"a=rtpmap:"+e+" "+r.name+"/"+r.clockRate+(1!==t?"/"+t:"")+"\r\n"},r.parseExtmap=function(r){var e=r.substr(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1]}},r.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&"sendrecv"!==r.direction?"/"+r.direction:"")+" "+r.uri+"\r\n"},r.parseFmtp=function(r){for(var e,t={},a=r.substr(r.indexOf(" ")+1).split(";"),n=0;n<a.length;n++)t[(e=a[n].trim().split("="))[0].trim()]=e[1];return t},r.writeFmtp=function(r){var e="",t=r.payloadType;if(void 0!==r.preferredPayloadType&&(t=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){var a=[];Object.keys(r.parameters).forEach(function(e){r.parameters[e]?a.push(e+"="+r.parameters[e]):a.push(e)}),e+="a=fmtp:"+t+" "+a.join(";")+"\r\n"}return e},r.parseRtcpFb=function(r){var e=r.substr(r.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},r.writeRtcpFb=function(r){var e="",t=r.payloadType;return void 0!==r.preferredPayloadType&&(t=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(function(r){e+="a=rtcp-fb:"+t+" "+r.type+(r.parameter&&r.parameter.length?" "+r.parameter:"")+"\r\n"}),e},r.parseSsrcMedia=function(r){var e=r.indexOf(" "),t={ssrc:parseInt(r.substr(7,e-7),10)},a=r.indexOf(":",e);return a>-1?(t.attribute=r.substr(e+1,a-e-1),t.value=r.substr(a+1)):t.attribute=r.substr(e+1),t},r.parseSsrcGroup=function(r){var e=r.substr(13).split(" ");return{semantics:e.shift(),ssrcs:e.map(function(r){return parseInt(r,10)})}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(r){var e=r.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(r,e){var t="a=setup:"+e+"\r\n";return r.fingerprints.forEach(function(r){t+="a=fingerprint:"+r.algorithm+" "+r.value+"\r\n"}),t},r.parseCryptoLine=function(r){var e=r.substr(9).split(" ");return{tag:parseInt(e[0],10),cryptoSuite:e[1],keyParams:e[2],sessionParams:e.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(r){if(0!==r.indexOf("inline:"))return null;var e=r.substr(7).split("|");return{keyMethod:"inline",keySalt:e[0],lifeTime:e[1],mkiValue:e[2]?e[2].split(":")[0]:void 0,mkiLength:e[2]?e[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var a=r.matchPrefix(e+t,"a=ice-ufrag:")[0],n=r.matchPrefix(e+t,"a=ice-pwd:")[0];return a&&n?{usernameFragment:a.substr(12),password:n.substr(10)}:null},r.writeIceParameters=function(r){return"a=ice-ufrag:"+r.usernameFragment+"\r\na=ice-pwd:"+r.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=r.splitLines(e)[0].split(" "),n=3;n<a.length;n++){var s=a[n],i=r.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(i){var p=r.parseRtpMap(i),c=r.matchPrefix(e,"a=fmtp:"+s+" ");switch(p.parameters=c.length?r.parseFmtp(c[0]):{},p.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(r.parseRtcpFb),t.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(p.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var a="";a+="m="+e+" ",a+=t.codecs.length>0?"9":"0",a+=" UDP/TLS/RTP/SAVPF ",a+=t.codecs.map(function(r){return void 0!==r.preferredPayloadType?r.preferredPayloadType:r.payloadType}).join(" ")+"\r\n",a+="c=IN IP4 0.0.0.0\r\n",a+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){a+=r.writeRtpMap(e),a+=r.writeFmtp(e),a+=r.writeRtcpFb(e)});var n=0;return t.codecs.forEach(function(r){r.maxptime>n&&(n=r.maxptime)}),n>0&&(a+="a=maxptime:"+n+"\r\n"),a+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){a+=r.writeExtmap(e)}),a},r.parseRtpEncodingParameters=function(e){var t,a=[],n=r.parseRtpParameters(e),s=-1!==n.fecMechanisms.indexOf("RED"),i=-1!==n.fecMechanisms.indexOf("ULPFEC"),p=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"cname"===r.attribute}),c=p.length>0&&p[0].ssrc,o=r.matchPrefix(e,"a=ssrc-group:FID").map(function(r){return r.substr(17).split(" ").map(function(r){return parseInt(r,10)})});o.length>0&&o[0].length>1&&o[0][0]===c&&(t=o[0][1]),n.codecs.forEach(function(r){if("RTX"===r.name.toUpperCase()&&r.parameters.apt){var e={ssrc:c,codecPayloadType:parseInt(r.parameters.apt,10)};c&&t&&(e.rtx={ssrc:t}),a.push(e),s&&((e=JSON.parse(JSON.stringify(e))).fec={ssrc:c,mechanism:i?"red+ulpfec":"red"},a.push(e))}}),0===a.length&&c&&a.push({ssrc:c});var u=r.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,a.forEach(function(r){r.maxBitrate=u})),a},r.parseRtcpParameters=function(e){var t={},a=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"cname"===r.attribute})[0];a&&(t.cname=a.value,t.ssrc=a.ssrc);var n=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=n.length>0,t.compound=0===n.length;var s=r.matchPrefix(e,"a=rtcp-mux");return t.mux=s.length>0,t},r.parseMsid=function(e){var t,a=r.matchPrefix(e,"a=msid:");if(1===a.length)return{stream:(t=a[0].substr(7).split(" "))[0],track:t[1]};var n=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"msid"===r.attribute});return n.length>0?{stream:(t=n[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,a=r.parseMLine(e),n=r.matchPrefix(e,"a=max-message-size:");n.length>0&&(t=parseInt(n[0].substr(19),10)),isNaN(t)&&(t=65536);var s=r.matchPrefix(e,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:a.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var i=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(i[0],10),protocol:i[1],maxMessageSize:t}}},r.writeSctpDescription=function(r,e){var t=[];return t="DTLS/SCTP"!==r.protocol?["m="+r.kind+" 9 "+r.protocol+" "+e.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+e.port+"\r\n"]:["m="+r.kind+" 9 "+r.protocol+" "+e.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+e.port+" "+e.protocol+" 65535\r\n"],void 0!==e.maxMessageSize&&t.push("a=max-message-size:"+e.maxMessageSize+"\r\n"),t.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,a){var n=void 0!==t?t:2;return"v=0\r\no="+(a||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,a,n){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===a?"actpass":"active"),s+="a=mid:"+e.mid+"\r\n",e.direction?s+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var i="msid:"+n.id+" "+e.rtpSender.track.id+"\r\n";s+="a="+i,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+i,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+i,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s},r.getDirection=function(e,t){for(var a=r.splitLines(e),n=0;n<a.length;n++)switch(a[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[n].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(r){return"0"===r.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),a=0;a<t.length;a++)if(t[a].length<2||"="!==t[a].charAt(1))return!1;return!0},"object"==typeof module&&(module.exports=r);
},{}],"NJ2u":[function(require,module,exports) {
"use strict";var e=require("sdp");function t(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function r(t,r,n,a,i){var s=e.writeRtpDescription(t.kind,r);if(s+=e.writeIceParameters(t.iceGatherer.getLocalParameters()),s+=e.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),s+="a=mid:"+t.mid+"\r\n",t.rtpSender&&t.rtpReceiver?s+="a=sendrecv\r\n":t.rtpSender?s+="a=sendonly\r\n":t.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",t.rtpSender){var o=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=o;var c="msid:"+(a?a.id:"-")+" "+o+"\r\n";s+="a="+c,s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+c,t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+"\r\n",t.rtpSender&&t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+"\r\n"),s}function n(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var a="string"==typeof n;return a&&(n=[n]),n=n.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!r?(r=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")}),delete e.url,e.urls=a?n[0]:n,!!n.length}})}function a(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},a=function(e,t,r,a){var i=n(e.parameters.apt,r),s=n(t.parameters.apt,a);return i&&s&&i.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach(function(n){for(var i=0;i<t.codecs.length;i++){var s=t.codecs[i];if(n.name.toLowerCase()===s.name.toLowerCase()&&n.clockRate===s.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&s.parameters.apt&&!a(n,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(n.numChannels,s.numChannels),r.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var n=0;n<t.headerExtensions.length;n++){var a=t.headerExtensions[n];if(e.uri===a.uri){r.headerExtensions.push(a);break}}}),r}function i(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function s(e,t){var r=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return r||e.addRemoteCandidate(t),!r}function o(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}module.exports=function(c,d){function p(e,t){t.addTrack(e),t.dispatchEvent(new c.MediaStreamTrackEvent("addtrack",{track:e}))}function l(e,t,r,n){var a=new Event("track");a.track=t,a.receiver=r,a.transceiver={receiver:r},a.streams=n,c.setTimeout(function(){e._dispatchEvent("track",a)})}var f=function(t){var r=this,a=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){r[e]=a[e].bind(a)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",t=JSON.parse(JSON.stringify(t||{})),this.usingBundle="max-bundle"===t.bundlePolicy,"negotiate"===t.rtcpMuxPolicy)throw o("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(t.rtcpMuxPolicy||(t.rtcpMuxPolicy="require"),t.iceTransportPolicy){case"all":case"relay":break;default:t.iceTransportPolicy="all"}switch(t.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:t.bundlePolicy="balanced"}if(t.iceServers=n(t.iceServers||[],d),this._iceGatherers=[],t.iceCandidatePoolSize)for(var i=t.iceCandidatePoolSize;i>0;i--)this._iceGatherers.push(new c.RTCIceGatherer({iceServers:t.iceServers,gatherPolicy:t.iceTransportPolicy}));else t.iceCandidatePoolSize=0;this._config=t,this.transceivers=[],this._sdpSessionId=e.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(f.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(f.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),f.prototype.onicecandidate=null,f.prototype.onaddstream=null,f.prototype.ontrack=null,f.prototype.onremovestream=null,f.prototype.onsignalingstatechange=null,f.prototype.oniceconnectionstatechange=null,f.prototype.onconnectionstatechange=null,f.prototype.onicegatheringstatechange=null,f.prototype.onnegotiationneeded=null,f.prototype.ondatachannel=null,f.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},f.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},f.prototype.getConfiguration=function(){return this._config},f.prototype.getLocalStreams=function(){return this.localStreams},f.prototype.getRemoteStreams=function(){return this.remoteStreams},f.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var a=this._createIceAndDtlsTransports();n.iceTransport=a.iceTransport,n.dtlsTransport=a.dtlsTransport}return t||this.transceivers.push(n),n},f.prototype.addTrack=function(e,t){if(this._isClosed)throw o("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find(function(t){return t.track===e}))throw o("InvalidAccessError","Track already exists.");for(var n=0;n<this.transceivers.length;n++)this.transceivers[n].track||this.transceivers[n].kind!==e.kind||(r=this.transceivers[n]);return r||(r=this._createTransceiver(e.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(t)&&this.localStreams.push(t),r.track=e,r.stream=t,r.rtpSender=new c.RTCRtpSender(e,r.dtlsTransport),r.rtpSender},f.prototype.addStream=function(e){var t=this;if(d>=15025)e.getTracks().forEach(function(r){t.addTrack(r,e)});else{var r=e.clone();e.getTracks().forEach(function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),r.getTracks().forEach(function(e){t.addTrack(e,r)})}},f.prototype.removeTrack=function(e){if(this._isClosed)throw o("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(e instanceof c.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var t=this.transceivers.find(function(t){return t.rtpSender===e});if(!t)throw o("InvalidAccessError","Sender was not created by this connection.");var r=t.stream;t.rtpSender.stop(),t.rtpSender=null,t.track=null,t.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},f.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var r=t.getSenders().find(function(t){return t.track===e});r&&t.removeTrack(r)})},f.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},f.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},f.prototype._createIceGatherer=function(e,t){var r=this;if(t&&e>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var n=new c.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(n,"state",{value:"new",writable:!0}),this.transceivers[e].bufferedCandidateEvents=[],this.transceivers[e].bufferCandidates=function(t){var a=!t.candidate||0===Object.keys(t.candidate).length;n.state=a?"completed":"gathering",null!==r.transceivers[e].bufferedCandidateEvents&&r.transceivers[e].bufferedCandidateEvents.push(t)},n.addEventListener("localcandidate",this.transceivers[e].bufferCandidates),n},f.prototype._gather=function(t,r){var n=this,a=this.transceivers[r].iceGatherer;if(!a.onlocalcandidate){var i=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,a.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),a.onlocalcandidate=function(i){if(!(n.usingBundle&&r>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:r};var o=i.candidate,c=!o||0===Object.keys(o).length;if(c)"new"!==a.state&&"gathering"!==a.state||(a.state="completed");else{"new"===a.state&&(a.state="gathering"),o.component=1,o.ufrag=a.getLocalParameters().usernameFragment;var d=e.writeCandidate(o);s.candidate=Object.assign(s.candidate,e.parseCandidate(d)),s.candidate.candidate=d,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var p=e.getMediaSections(n._localDescription.sdp);p[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",n._localDescription.sdp=e.getDescription(n._localDescription.sdp)+p.join("");var l=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),c||n._dispatchEvent("icecandidate",s),l&&(n._dispatchEvent("icecandidate",new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},c.setTimeout(function(){i.forEach(function(e){a.onlocalcandidate(e)})},0)}},f.prototype._createIceAndDtlsTransports=function(){var e=this,t=new c.RTCIceTransport(null);t.onicestatechange=function(){e._updateIceConnectionState(),e._updateConnectionState()};var r=new c.RTCDtlsTransport(t);return r.ondtlsstatechange=function(){e._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),e._updateConnectionState()},{iceTransport:t,dtlsTransport:r}},f.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},f.prototype._transceive=function(t,r,n){var i=a(t.localCapabilities,t.remoteCapabilities);r&&t.rtpSender&&(i.encodings=t.sendEncodingParameters,i.rtcp={cname:e.localCName,compound:t.rtcpParameters.compound},t.recvEncodingParameters.length&&(i.rtcp.ssrc=t.recvEncodingParameters[0].ssrc),t.rtpSender.send(i)),n&&t.rtpReceiver&&i.codecs.length>0&&("video"===t.kind&&t.recvEncodingParameters&&d<15019&&t.recvEncodingParameters.forEach(function(e){delete e.rtx}),t.recvEncodingParameters.length?i.encodings=t.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:t.rtcpParameters.compound},t.rtcpParameters.cname&&(i.rtcp.cname=t.rtcpParameters.cname),t.sendEncodingParameters.length&&(i.rtcp.ssrc=t.sendEncodingParameters[0].ssrc),t.rtpReceiver.receive(i))},f.prototype.setLocalDescription=function(t){var r,n,s=this;if(-1===["offer","answer"].indexOf(t.type))return Promise.reject(o("TypeError",'Unsupported type "'+t.type+'"'));if(!i("setLocalDescription",t.type,s.signalingState)||s._isClosed)return Promise.reject(o("InvalidStateError","Can not set local "+t.type+" in state "+s.signalingState));if("offer"===t.type)r=e.splitSections(t.sdp),n=r.shift(),r.forEach(function(t,r){var n=e.parseRtpParameters(t);s.transceivers[r].localCapabilities=n}),s.transceivers.forEach(function(e,t){s._gather(e.mid,t)});else if("answer"===t.type){r=e.splitSections(s._remoteDescription.sdp),n=r.shift();var c=e.matchPrefix(n,"a=ice-lite").length>0;r.forEach(function(t,r){var i=s.transceivers[r],o=i.iceGatherer,d=i.iceTransport,p=i.dtlsTransport,l=i.localCapabilities,f=i.remoteCapabilities;if(!(e.isRejected(t)&&0===e.matchPrefix(t,"a=bundle-only").length)&&!i.rejected){var u=e.getIceParameters(t,n),v=e.getDtlsParameters(t,n);c&&(v.role="server"),s.usingBundle&&0!==r||(s._gather(i.mid,r),"new"===d.state&&d.start(o,u,c?"controlling":"controlled"),"new"===p.state&&p.start(v));var h=a(l,f);s._transceive(i,h.codecs.length>0,!1)}})}return s._localDescription={type:t.type,sdp:t.sdp},"offer"===t.type?s._updateSignalingState("have-local-offer"):s._updateSignalingState("stable"),Promise.resolve()},f.prototype.setRemoteDescription=function(t){var r=this;if(-1===["offer","answer"].indexOf(t.type))return Promise.reject(o("TypeError",'Unsupported type "'+t.type+'"'));if(!i("setRemoteDescription",t.type,r.signalingState)||r._isClosed)return Promise.reject(o("InvalidStateError","Can not set remote "+t.type+" in state "+r.signalingState));var n={};r.remoteStreams.forEach(function(e){n[e.id]=e});var f=[],u=e.splitSections(t.sdp),v=u.shift(),h=e.matchPrefix(v,"a=ice-lite").length>0,m=e.matchPrefix(v,"a=group:BUNDLE ").length>0;r.usingBundle=m;var g=e.matchPrefix(v,"a=ice-options:")[0];return r.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,u.forEach(function(i,o){var l=e.splitLines(i),u=e.getKind(i),g=e.isRejected(i)&&0===e.matchPrefix(i,"a=bundle-only").length,y=l[0].substr(2).split(" ")[2],S=e.getDirection(i,v),T=e.parseMsid(i),E=e.getMid(i)||e.generateIdentifier();if(g||"application"===u&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))r.transceivers[o]={mid:E,kind:u,protocol:y,rejected:!0};else{var C,P,w,R,_,k,b,x,D;!g&&r.transceivers[o]&&r.transceivers[o].rejected&&(r.transceivers[o]=r._createTransceiver(u,!0));var I,L,M=e.parseRtpParameters(i);g||(I=e.getIceParameters(i,v),(L=e.getDtlsParameters(i,v)).role="client"),b=e.parseRtpEncodingParameters(i);var O=e.parseRtcpParameters(i),G=e.matchPrefix(i,"a=end-of-candidates",v).length>0,j=e.matchPrefix(i,"a=candidate:").map(function(t){return e.parseCandidate(t)}).filter(function(e){return 1===e.component});if(("offer"===t.type||"answer"===t.type)&&!g&&m&&o>0&&r.transceivers[o]&&(r._disposeIceAndDtlsTransports(o),r.transceivers[o].iceGatherer=r.transceivers[0].iceGatherer,r.transceivers[o].iceTransport=r.transceivers[0].iceTransport,r.transceivers[o].dtlsTransport=r.transceivers[0].dtlsTransport,r.transceivers[o].rtpSender&&r.transceivers[o].rtpSender.setTransport(r.transceivers[0].dtlsTransport),r.transceivers[o].rtpReceiver&&r.transceivers[o].rtpReceiver.setTransport(r.transceivers[0].dtlsTransport)),"offer"!==t.type||g){if("answer"===t.type&&!g){P=(C=r.transceivers[o]).iceGatherer,w=C.iceTransport,R=C.dtlsTransport,_=C.rtpReceiver,k=C.sendEncodingParameters,x=C.localCapabilities,r.transceivers[o].recvEncodingParameters=b,r.transceivers[o].remoteCapabilities=M,r.transceivers[o].rtcpParameters=O,j.length&&"new"===w.state&&(!h&&!G||m&&0!==o?j.forEach(function(e){s(C.iceTransport,e)}):w.setRemoteCandidates(j)),m&&0!==o||("new"===w.state&&w.start(P,I,"controlling"),"new"===R.state&&R.start(L)),!a(C.localCapabilities,C.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&C.sendEncodingParameters[0].rtx&&delete C.sendEncodingParameters[0].rtx,r._transceive(C,"sendrecv"===S||"recvonly"===S,"sendrecv"===S||"sendonly"===S),!_||"sendrecv"!==S&&"sendonly"!==S?delete C.rtpReceiver:(D=_.track,T?(n[T.stream]||(n[T.stream]=new c.MediaStream),p(D,n[T.stream]),f.push([D,_,n[T.stream]])):(n.default||(n.default=new c.MediaStream),p(D,n.default),f.push([D,_,n.default])))}}else{(C=r.transceivers[o]||r._createTransceiver(u)).mid=E,C.iceGatherer||(C.iceGatherer=r._createIceGatherer(o,m)),j.length&&"new"===C.iceTransport.state&&(!G||m&&0!==o?j.forEach(function(e){s(C.iceTransport,e)}):C.iceTransport.setRemoteCandidates(j)),x=c.RTCRtpReceiver.getCapabilities(u),d<15019&&(x.codecs=x.codecs.filter(function(e){return"rtx"!==e.name})),k=C.sendEncodingParameters||[{ssrc:1001*(2*o+2)}];var N,A=!1;if("sendrecv"===S||"sendonly"===S){if(A=!C.rtpReceiver,_=C.rtpReceiver||new c.RTCRtpReceiver(C.dtlsTransport,u),A)D=_.track,T&&"-"===T.stream||(T?(n[T.stream]||(n[T.stream]=new c.MediaStream,Object.defineProperty(n[T.stream],"id",{get:function(){return T.stream}})),Object.defineProperty(D,"id",{get:function(){return T.track}}),N=n[T.stream]):(n.default||(n.default=new c.MediaStream),N=n.default)),N&&(p(D,N),C.associatedRemoteMediaStreams.push(N)),f.push([D,_,N])}else C.rtpReceiver&&C.rtpReceiver.track&&(C.associatedRemoteMediaStreams.forEach(function(e){var t,r,n=e.getTracks().find(function(e){return e.id===C.rtpReceiver.track.id});n&&(t=n,(r=e).removeTrack(t),r.dispatchEvent(new c.MediaStreamTrackEvent("removetrack",{track:t})))}),C.associatedRemoteMediaStreams=[]);C.localCapabilities=x,C.remoteCapabilities=M,C.rtpReceiver=_,C.rtcpParameters=O,C.sendEncodingParameters=k,C.recvEncodingParameters=b,r._transceive(r.transceivers[o],!1,A)}}}),void 0===r._dtlsRole&&(r._dtlsRole="offer"===t.type?"active":"passive"),r._remoteDescription={type:t.type,sdp:t.sdp},"offer"===t.type?r._updateSignalingState("have-remote-offer"):r._updateSignalingState("stable"),Object.keys(n).forEach(function(e){var t=n[e];if(t.getTracks().length){if(-1===r.remoteStreams.indexOf(t)){r.remoteStreams.push(t);var a=new Event("addstream");a.stream=t,c.setTimeout(function(){r._dispatchEvent("addstream",a)})}f.forEach(function(e){var n=e[0],a=e[1];t.id===e[2].id&&l(r,n,a,[t])})}}),f.forEach(function(e){e[2]||l(r,e[0],e[1],[])}),c.setTimeout(function(){r&&r.transceivers&&r.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},f.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},f.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},f.prototype._maybeFireNegotiationNeeded=function(){var e=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,c.setTimeout(function(){if(e.needNegotiation){e.needNegotiation=!1;var t=new Event("negotiationneeded");e._dispatchEvent("negotiationneeded",t)}},0))},f.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},f.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},f.prototype.createOffer=function(){var t=this;if(t._isClosed)return Promise.reject(o("InvalidStateError","Can not call createOffer after close"));var n=t.transceivers.filter(function(e){return"audio"===e.kind}).length,a=t.transceivers.filter(function(e){return"video"===e.kind}).length,i=arguments[0];if(i){if(i.mandatory||i.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==i.offerToReceiveAudio&&(n=!0===i.offerToReceiveAudio?1:!1===i.offerToReceiveAudio?0:i.offerToReceiveAudio),void 0!==i.offerToReceiveVideo&&(a=!0===i.offerToReceiveVideo?1:!1===i.offerToReceiveVideo?0:i.offerToReceiveVideo)}for(t.transceivers.forEach(function(e){"audio"===e.kind?--n<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)});n>0||a>0;)n>0&&(t._createTransceiver("audio"),n--),a>0&&(t._createTransceiver("video"),a--);var s=e.writeSessionBoilerplate(t._sdpSessionId,t._sdpSessionVersion++);t.transceivers.forEach(function(r,n){var a=r.track,i=r.kind,s=r.mid||e.generateIdentifier();r.mid=s,r.iceGatherer||(r.iceGatherer=t._createIceGatherer(n,t.usingBundle));var o=c.RTCRtpSender.getCapabilities(i);d<15019&&(o.codecs=o.codecs.filter(function(e){return"rtx"!==e.name})),o.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),o.headerExtensions.forEach(function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var p=r.sendEncodingParameters||[{ssrc:1001*(2*n+1)}];a&&d>=15019&&"video"===i&&!p[0].rtx&&(p[0].rtx={ssrc:p[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new c.RTCRtpReceiver(r.dtlsTransport,i)),r.localCapabilities=o,r.sendEncodingParameters=p}),"max-compat"!==t._config.bundlePolicy&&(s+="a=group:BUNDLE "+t.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n",t.transceivers.forEach(function(n,a){s+=r(n,n.localCapabilities,"offer",n.stream,t._dtlsRole),s+="a=rtcp-rsize\r\n",!n.iceGatherer||"new"===t.iceGatheringState||0!==a&&t.usingBundle||(n.iceGatherer.getLocalCandidates().forEach(function(t){t.component=1,s+="a="+e.writeCandidate(t)+"\r\n"}),"completed"===n.iceGatherer.state&&(s+="a=end-of-candidates\r\n"))});var p=new c.RTCSessionDescription({type:"offer",sdp:s});return Promise.resolve(p)},f.prototype.createAnswer=function(){var t=this;if(t._isClosed)return Promise.reject(o("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==t.signalingState&&"have-local-pranswer"!==t.signalingState)return Promise.reject(o("InvalidStateError","Can not call createAnswer in signalingState "+t.signalingState));var n=e.writeSessionBoilerplate(t._sdpSessionId,t._sdpSessionVersion++);t.usingBundle&&(n+="a=group:BUNDLE "+t.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),n+="a=ice-options:trickle\r\n";var i=e.getMediaSections(t._remoteDescription.sdp).length;t.transceivers.forEach(function(e,s){if(!(s+1>i)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?n+="m=application 0 DTLS/SCTP 5000\r\n":n+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?n+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(n+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(n+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var o;if(e.stream)"audio"===e.kind?o=e.stream.getAudioTracks()[0]:"video"===e.kind&&(o=e.stream.getVideoTracks()[0]),o&&d>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var c=a(e.localCapabilities,e.remoteCapabilities);!c.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,n+=r(e,c,"answer",e.stream,t._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(n+="a=rtcp-rsize\r\n")}});var s=new c.RTCSessionDescription({type:"answer",sdp:n});return Promise.resolve(s)},f.prototype.addIceCandidate=function(t){var r,n=this;return t&&void 0===t.sdpMLineIndex&&!t.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(a,i){if(!n._remoteDescription)return i(o("InvalidStateError","Can not add ICE candidate without a remote description"));if(t&&""!==t.candidate){var c=t.sdpMLineIndex;if(t.sdpMid)for(var d=0;d<n.transceivers.length;d++)if(n.transceivers[d].mid===t.sdpMid){c=d;break}var p=n.transceivers[c];if(!p)return i(o("OperationError","Can not add ICE candidate"));if(p.rejected)return a();var l=Object.keys(t.candidate).length>0?e.parseCandidate(t.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return a();if(l.component&&1!==l.component)return a();if((0===c||c>0&&p.iceTransport!==n.transceivers[0].iceTransport)&&!s(p.iceTransport,l))return i(o("OperationError","Can not add ICE candidate"));var f=t.candidate.trim();0===f.indexOf("a=")&&(f=f.substr(2)),(r=e.getMediaSections(n._remoteDescription.sdp))[c]+="a="+(l.type?f:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=e.getDescription(n._remoteDescription.sdp)+r.join("")}else for(var u=0;u<n.transceivers.length&&(n.transceivers[u].rejected||(n.transceivers[u].iceTransport.addRemoteCandidate({}),(r=e.getMediaSections(n._remoteDescription.sdp))[u]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=e.getDescription(n._remoteDescription.sdp)+r.join(""),!n.usingBundle));u++);a()})},f.prototype.getStats=function(e){if(e&&e instanceof c.MediaStreamTrack){var t=null;if(this.transceivers.forEach(function(r){r.rtpSender&&r.rtpSender.track===e?t=r.rtpSender:r.rtpReceiver&&r.rtpReceiver.track===e&&(t=r.rtpReceiver)}),!t)throw o("InvalidAccessError","Invalid selector.");return t.getStats()}var r=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&r.push(e[t].getStats())})}),Promise.all(r).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(e){var r=c[e];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then(function(e){var r=new Map;return Object.keys(e).forEach(function(n){e[n].type=t(e[n]),r.set(n,e[n])}),r})}}});var u=["createOffer","createAnswer"];return u.forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(u=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),f};
},{"sdp":"YHvh"}],"YdKx":[function(require,module,exports) {
"use strict";function e(e){var r=e&&e.navigator,t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return t(e).catch(function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=e;
},{}],"P3bV":[function(require,module,exports) {
"use strict";function e(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;
},{}],"XRic":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimPeerConnection=p,exports.shimReplaceTrack=a,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}});var e=s(require("../utils")),t=require("./filtericeservers"),r=o(require("rtcpeerconnection-shim")),n=require("./getusermedia"),i=require("./getdisplaymedia");function o(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function p(n,i){if(n.RTCIceGatherer&&(n.RTCIceCandidate||(n.RTCIceCandidate=function(e){return e}),n.RTCSessionDescription||(n.RTCSessionDescription=function(e){return e}),i.version<15025)){var o=Object.getOwnPropertyDescriptor(n.MediaStreamTrack.prototype,"enabled");Object.defineProperty(n.MediaStreamTrack.prototype,"enabled",{set:function(e){o.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!n.RTCRtpSender||"dtmf"in n.RTCRtpSender.prototype||Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new n.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),n.RTCDtmfSender&&!n.RTCDTMFSender&&(n.RTCDTMFSender=n.RTCDtmfSender);var c=(0,r.default)(n,i.version);n.RTCPeerConnection=function(r){return r&&r.iceServers&&(r.iceServers=(0,t.filterIceServers)(r.iceServers,i.version),e.log("ICE servers after filtering:",r.iceServers)),new c(r)},n.RTCPeerConnection.prototype=c.prototype}function a(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}
},{"../utils":"iSxC","./filtericeservers":"NZ1C","rtcpeerconnection-shim":"NJ2u","./getusermedia":"YdKx","./getdisplaymedia":"P3bV"}],"GzSv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=n;var e=o(require("../utils"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=t();if(o&&o.has(e))return o.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,o&&o.set(e,r),r}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t,o){var n=t&&t.navigator,i=t&&t.MediaStreamTrack;if(n.getUserMedia=function(t,o,r){e.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(t).then(o,r)},!(o.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var a=function(e,t,o){t in e&&!(o in e)&&(e[o]=e[t],delete e[t])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===r(e)&&"object"===r(e.audio)&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),s(e)},i&&i.prototype.getSettings){var p=i.prototype.getSettings;i.prototype.getSettings=function(){var e=p.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){var u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===r(e)&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[e])}}}}
},{"../utils":"iSxC"}],"UuGU":[function(require,module,exports) {
"use strict";function e(e,i){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(a){if(!a||!a.video){var t=new DOMException("getDisplayMedia without video constraints is undefined");return t.name="NotFoundError",t.code=8,Promise.reject(t)}return!0===a.video?a.video={mediaSource:i}:a.video.mediaSource=i,e.navigator.mediaDevices.getUserMedia(a)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;
},{}],"Fzdr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimOnTrack=s,exports.shimPeerConnection=c,exports.shimSenderGetStats=p,exports.shimReceiverGetStats=u,exports.shimRemoveStream=f,exports.shimRTCDataChannel=d,exports.shimAddTransceiver=C,exports.shimGetParameters=y,exports.shimCreateOffer=l,exports.shimCreateAnswer=m,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return t.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return n.shimGetDisplayMedia}});var e=o(require("../utils")),t=require("./getusermedia"),n=require("./getdisplaymedia");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){"object"===a(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function c(e,t){if("object"===a(e)&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t],r=i({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=r[t]});var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var[e,o,i]=arguments;return r.apply(this,[e||null]).then(function(e){if(t.version<53&&!o)try{e.forEach(function(e){e.type=n[e.type]||e.type})}catch(r){if("TypeError"!==r.name)throw r;e.forEach(function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(o,i)}}}function p(e){if("object"===a(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach(function(t){return t._pc=e}),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function u(t){if("object"===a(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&!(t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)){var n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=n.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),e.wrapPeerConnectionEvent(t,"track",function(e){return e.receiver._pc=e.srcElement,e}),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function f(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(t){var n=this;e.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(e){e.track&&t.getTracks().includes(e.track)&&n.removeTrack(e)})})}function d(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function C(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach(function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var r=t.apply(this,arguments);if(n){var{sender:o}=r,i=o.getParameters();"encodings"in i&&(1!==i.encodings.length||0!==Object.keys(i.encodings[0]).length)||(i.encodings=e.sendEncodings,o.sendEncodings=e.sendEncodings,this.setParametersPromises.push(o.setParameters(i).then(function(){delete o.sendEncodings}).catch(function(){delete o.sendEncodings})))}return r})}}function y(e){if("object"===a(e)&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function l(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,e)}).finally(function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}}function m(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,e)}).finally(function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}}
},{"../utils":"iSxC","./getusermedia":"GzSv","./getdisplaymedia":"UuGU"}],"t1lL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimLocalStreamsAPI=n,exports.shimRemoteStreamsAPI=i,exports.shimCallbacksAPI=a,exports.shimGetUserMedia=c,exports.shimConstraints=s,exports.shimRTCIceServerUrls=d,exports.shimTrackEventTransceiver=f,exports.shimCreateOfferLegacy=p,exports.shimAudioContext=u;var e=r(require("../utils"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,r&&r.set(e,o),o}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){if("object"===o(e)&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(function(o){return t.call(r,o,e)}),e.getVideoTracks().forEach(function(o){return t.call(r,o,e)})},e.RTCPeerConnection.prototype.addTrack=function(e){for(var r=this,o=arguments.length,n=new Array(o>1?o-1:0),i=1;i<o;i++)n[i-1]=arguments[i];return n&&n.forEach(function(e){r._localStreams?r._localStreams.includes(e)||r._localStreams.push(e):r._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var r=this._localStreams.indexOf(e);if(-1!==r){this._localStreams.splice(r,1);var o=e.getTracks();this.getSenders().forEach(function(e){o.includes(e.track)&&t.removeTrack(e)})}})}}function i(e){if("object"===o(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r)}})})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}})}),t.apply(e,arguments)}}}function a(e){if("object"===o(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,a=t.setRemoteDescription,c=t.addIceCandidate;t.createOffer=function(e,t){var o=arguments.length>=2?arguments[2]:arguments[0],n=r.apply(this,[o]);return t?(n.then(e,t),Promise.resolve()):n},t.createAnswer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o};var s=function(e,t,r){var o=i.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o};t.setLocalDescription=s,s=function(e,t,r){var o=a.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o},t.setRemoteDescription=s,s=function(e,t,r){var o=c.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o},t.addIceCandidate=s}}function c(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=t.mediaDevices,o=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=function(e){return o(s(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,o){t.mediaDevices.getUserMedia(e).then(r,o)}.bind(t))}function s(t){return t&&void 0!==t.video?Object.assign({},t,{video:e.compactObject(t.video)}):t}function d(t){if(t.RTCPeerConnection){var r=t.RTCPeerConnection;t.RTCPeerConnection=function(t,o){if(t&&t.iceServers){for(var n=[],i=0;i<t.iceServers.length;i++){var a=t.iceServers[i];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(e.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,n.push(a)):n.push(t.iceServers[i])}t.iceServers=n}return new r(t,o)},t.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:function(){return r.generateCertificate}})}}function f(e){"object"===o(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function p(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=this.getTransceivers().find(function(e){return"audio"===e.receiver.track.kind});!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveAudio||r||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var o=this.getTransceivers().find(function(e){return"video"===e.receiver.track.kind});!1===e.offerToReceiveVideo&&o?"sendrecv"===o.direction?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":"recvonly"===o.direction&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):!0!==e.offerToReceiveVideo||o||this.addTransceiver("video")}return t.apply(this,arguments)}}function u(e){"object"!==o(e)||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}
},{"../utils":"iSxC"}],"GOQK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimRTCIceCandidate=a,exports.shimMaxMessageSize=c,exports.shimSendThrowTypeError=s,exports.shimConnectionState=p,exports.removeExtmapAllowMixed=d,exports.shimAddIceCandidateNullOrEmpty=u;var e=r(require("sdp")),t=o(require("./utils"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,t&&t.set(e,o),o}function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(n){if(n.RTCIceCandidate&&!(n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)){var o=n.RTCIceCandidate;n.RTCIceCandidate=function(t){if("object"===i(t)&&t.candidate&&0===t.candidate.indexOf("a=")&&((t=JSON.parse(JSON.stringify(t))).candidate=t.candidate.substr(2)),t.candidate&&t.candidate.length){var n=new o(t),r=e.default.parseCandidate(t.candidate),a=Object.assign(n,r);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new o(t)},n.RTCIceCandidate.prototype=o.prototype,t.wrapPeerConnectionEvent(n,"icecandidate",function(e){return e.candidate&&Object.defineProperty(e,"candidate",{value:new n.RTCIceCandidate(e.candidate),writable:"false"}),e})}}function c(t,n){if(t.RTCPeerConnection){"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===n.browser&&n.version>=76){var{sdpSemantics:t}=this.getConfiguration();"plan-b"===t&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(t){if(!t||!t.sdp)return!1;var n=e.default.splitSections(t.sdp);return n.shift(),n.some(function(t){var n=e.default.parseMLine(t);return n&&"application"===n.kind&&-1!==n.protocol.indexOf("SCTP")})}(arguments[0])){var r,i=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),a=(p=i,d=65536,"firefox"===n.browser&&(d=n.version<57?-1===p?16384:2147483637:n.version<60?57===n.version?65535:65536:2147483637),d),c=function(t,o){var r=65536;"firefox"===n.browser&&57===n.version&&(r=65535);var i=e.default.matchPrefix(t.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===n.browser&&-1!==o&&(r=2147483637),r}(arguments[0],i);r=0===a&&0===c?Number.POSITIVE_INFINITY:0===a||0===c?Math.max(a,c):Math.min(a,c);var s={};Object.defineProperty(s,"maxMessageSize",{get:function(){return r}}),this._sctp=s}var p,d;return o.apply(this,arguments)}}}function s(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=n.apply(this,arguments);return o(e,this),e},t.wrapPeerConnectionEvent(e,"datachannel",function(e){return o(e.channel,e.target),e})}function o(e,t){var n=e.send;e.send=function(){var o=arguments[0],r=o.length||o.size||o.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function p(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}}function d(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var o=t.sdp.split("\n").filter(function(e){return"a=extmap-allow-mixed"!==e.trim()}).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:o}):t.sdp=o}return n.apply(this,arguments)}}}function u(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}
},{"sdp":"YHvh","./utils":"iSxC"}],"KtlG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.adapterFactory=o;var e=m(require("./utils")),i=m(require("./chrome/chrome_shim")),r=m(require("./edge/edge_shim")),s=m(require("./firefox/firefox_shim")),t=m(require("./safari/safari_shim")),a=m(require("./common_shim"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=n();if(i&&i.has(e))return i.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var a=s?Object.getOwnPropertyDescriptor(e,t):null;a&&(a.get||a.set)?Object.defineProperty(r,t,a):r[t]=e[t]}return r.default=e,i&&i.set(e,r),r}function o(){var{window:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},o=e.log,h=e.detectBrowser(n),d={browserDetails:h,commonShim:a,extractVersion:e.extractVersion,disableLog:e.disableLog,disableWarnings:e.disableWarnings};switch(h.browser){case"chrome":if(!i||!i.shimPeerConnection||!m.shimChrome)return o("Chrome shim is not included in this adapter release."),d;if(null===h.version)return o("Chrome shim can not determine version, not shimming."),d;o("adapter.js shimming chrome."),d.browserShim=i,a.shimAddIceCandidateNullOrEmpty(n,h),i.shimGetUserMedia(n,h),i.shimMediaStream(n,h),i.shimPeerConnection(n,h),i.shimOnTrack(n,h),i.shimAddTrackRemoveTrack(n,h),i.shimGetSendersWithDtmf(n,h),i.shimGetStats(n,h),i.shimSenderReceiverGetStats(n,h),i.fixNegotiationNeeded(n,h),a.shimRTCIceCandidate(n,h),a.shimConnectionState(n,h),a.shimMaxMessageSize(n,h),a.shimSendThrowTypeError(n,h),a.removeExtmapAllowMixed(n,h);break;case"firefox":if(!s||!s.shimPeerConnection||!m.shimFirefox)return o("Firefox shim is not included in this adapter release."),d;o("adapter.js shimming firefox."),d.browserShim=s,a.shimAddIceCandidateNullOrEmpty(n,h),s.shimGetUserMedia(n,h),s.shimPeerConnection(n,h),s.shimOnTrack(n,h),s.shimRemoveStream(n,h),s.shimSenderGetStats(n,h),s.shimReceiverGetStats(n,h),s.shimRTCDataChannel(n,h),s.shimAddTransceiver(n,h),s.shimGetParameters(n,h),s.shimCreateOffer(n,h),s.shimCreateAnswer(n,h),a.shimRTCIceCandidate(n,h),a.shimConnectionState(n,h),a.shimMaxMessageSize(n,h),a.shimSendThrowTypeError(n,h);break;case"edge":if(!r||!r.shimPeerConnection||!m.shimEdge)return o("MS edge shim is not included in this adapter release."),d;o("adapter.js shimming edge."),d.browserShim=r,r.shimGetUserMedia(n,h),r.shimGetDisplayMedia(n,h),r.shimPeerConnection(n,h),r.shimReplaceTrack(n,h),a.shimMaxMessageSize(n,h),a.shimSendThrowTypeError(n,h);break;case"safari":if(!t||!m.shimSafari)return o("Safari shim is not included in this adapter release."),d;o("adapter.js shimming safari."),d.browserShim=t,a.shimAddIceCandidateNullOrEmpty(n,h),t.shimRTCIceServerUrls(n,h),t.shimCreateOfferLegacy(n,h),t.shimCallbacksAPI(n,h),t.shimLocalStreamsAPI(n,h),t.shimRemoteStreamsAPI(n,h),t.shimTrackEventTransceiver(n,h),t.shimGetUserMedia(n,h),t.shimAudioContext(n,h),a.shimRTCIceCandidate(n,h),a.shimMaxMessageSize(n,h),a.shimSendThrowTypeError(n,h),a.removeExtmapAllowMixed(n,h);break;default:o("Unsupported browser!")}return d}
},{"./utils":"iSxC","./chrome/chrome_shim":"uI5X","./edge/edge_shim":"XRic","./firefox/firefox_shim":"Fzdr","./safari/safari_shim":"t1lL","./common_shim":"GOQK"}],"tI1X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./adapter_factory.js"),t=(0,e.adapterFactory)({window:"undefined"==typeof window?void 0:window}),d=t;exports.default=d;
},{"./adapter_factory.js":"KtlG"}],"sXtV":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.webRTCAdapter=void 0;var t=e(require("webrtc-adapter"));exports.webRTCAdapter=t.default;
},{"webrtc-adapter":"tI1X"}],"I31f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Supports=void 0;var r=require("./adapter");exports.Supports=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return"undefined"!=typeof RTCPeerConnection},e.prototype.isBrowserSupported=function(){var r=this.getBrowser(),e=this.getVersion();return!!this.supportedBrowsers.includes(r)&&("chrome"===r?e>=this.minChromeVersion:"firefox"===r?e>=this.minFirefoxVersion:"safari"===r&&(!this.isIOS&&e>=this.minSafariVersion))},e.prototype.getBrowser=function(){return r.webRTCAdapter.browserDetails.browser},e.prototype.getVersion=function(){return r.webRTCAdapter.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var e,i=this.getBrowser(),t=r.webRTCAdapter.browserDetails.version||0;if("chrome"===i&&t<72)return!1;if("firefox"===i&&t>=59)return!0;if(!(window.RTCRtpTransceiver&&"currentDirection"in RTCRtpTransceiver.prototype))return!1;var o=!1;try{(e=new RTCPeerConnection).addTransceiver("audio"),o=!0}catch(s){}finally{e&&e.close()}return o},e.prototype.toString=function(){return"Supports: \n    browser:"+this.getBrowser()+" \n    version:"+this.getVersion()+" \n    isIOS:"+this.isIOS+" \n    isWebRTCSupported:"+this.isWebRTCSupported()+" \n    isBrowserSupported:"+this.isBrowserSupported()+" \n    isUnifiedPlanSupported:"+this.isUnifiedPlanSupported()},e}());
},{"./adapter":"sXtV"}],"BHXf":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var o={};if(null!=r)for(var n in r)"default"!==n&&Object.prototype.hasOwnProperty.call(r,n)&&e(o,r,n);return t(o,r),o};Object.defineProperty(exports,"__esModule",{value:!0}),exports.util=void 0;var o=r(require("peerjs-js-binarypack")),n=require("./supports"),i={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:0.peerjs.com:3478",username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};exports.util=new(function(){function e(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=i,this.browser=n.Supports.getBrowser(),this.browserVersion=n.Supports.getVersion(),this.supports=function(){var e,t={browser:n.Supports.isBrowserSupported(),webRTC:n.Supports.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;try{e=new RTCPeerConnection(i),t.audioVideo=!0;var r=void 0;try{r=e.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!r.ordered;try{r.binaryType="blob",t.binaryBlob=!n.Supports.isIOS}catch(o){}}catch(o){}finally{r&&r.close()}}catch(o){}finally{e&&e.close()}return t}(),this.pack=o.pack,this.unpack=o.unpack,this._dataCount=1}return e.prototype.noop=function(){},e.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},e.prototype.chunk=function(e){for(var t=[],r=e.size,o=Math.ceil(r/exports.util.chunkedMTU),n=0,i=0;i<r;){var a=Math.min(r,i+exports.util.chunkedMTU),u=e.slice(i,a),s={__peerData:this._dataCount,n:n,data:u,total:o};t.push(s),i=a,n++}return this._dataCount++,t},e.prototype.blobToArrayBuffer=function(e,t){var r=new FileReader;return r.onload=function(e){e.target&&t(e.target.result)},r.readAsArrayBuffer(e),r},e.prototype.binaryStringToArrayBuffer=function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer},e.prototype.randomToken=function(){return Math.random().toString(36).substr(2)},e.prototype.isSecure=function(){return"https:"===location.protocol},e}());
},{"peerjs-js-binarypack":"kdPp","./supports":"I31f"}],"JJlS":[function(require,module,exports) {
"use strict";var e=Object.prototype.hasOwnProperty,t="~";function n(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,n,o,s,i){if("function"!=typeof o)throw new TypeError("The listener must be a function");var c=new r(o,s||e,i),f=t?t+n:n;return e._events[f]?e._events[f].fn?e._events[f]=[e._events[f],c]:e._events[f].push(c):(e._events[f]=c,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function i(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(t=!1)),i.prototype.eventNames=function(){var n,r,o=[];if(0===this._eventsCount)return o;for(r in n=this._events)e.call(n,r)&&o.push(t?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(n)):o},i.prototype.listeners=function(e){var n=t?t+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},i.prototype.listenerCount=function(e){var n=t?t+e:e,r=this._events[n];return r?r.fn?1:r.length:0},i.prototype.emit=function(e,n,r,o,s,i){var c=t?t+e:e;if(!this._events[c])return!1;var f,u,a=this._events[c],l=arguments.length;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,o),!0;case 5:return a.fn.call(a.context,n,r,o,s),!0;case 6:return a.fn.call(a.context,n,r,o,s,i),!0}for(u=1,f=new Array(l-1);u<l;u++)f[u-1]=arguments[u];a.fn.apply(a.context,f)}else{var v,h=a.length;for(u=0;u<h;u++)switch(a[u].once&&this.removeListener(e,a[u].fn,void 0,!0),l){case 1:a[u].fn.call(a[u].context);break;case 2:a[u].fn.call(a[u].context,n);break;case 3:a[u].fn.call(a[u].context,n,r);break;case 4:a[u].fn.call(a[u].context,n,r,o);break;default:if(!f)for(v=1,f=new Array(l-1);v<l;v++)f[v-1]=arguments[v];a[u].fn.apply(a[u].context,f)}}return!0},i.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},i.prototype.removeListener=function(e,n,r,o){var i=t?t+e:e;if(!this._events[i])return this;if(!n)return s(this,i),this;var c=this._events[i];if(c.fn)c.fn!==n||o&&!c.once||r&&c.context!==r||s(this,i);else{for(var f=0,u=[],a=c.length;f<a;f++)(c[f].fn!==n||o&&!c[f].once||r&&c[f].context!==r)&&u.push(c[f]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},i.prototype.removeAllListeners=function(e){var r;return e?(r=t?t+e:e,this._events[r]&&s(this,r)):(this._events=new n,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=t,i.EventEmitter=i,"undefined"!=typeof module&&(module.exports=i);
},{}],"WOs9":[function(require,module,exports) {
"use strict";var r=this&&this.__read||function(r,e){var o="function"==typeof Symbol&&r[Symbol.iterator];if(!o)return r;var t,n,l=o.call(r),i=[];try{for(;(void 0===e||e-- >0)&&!(t=l.next()).done;)i.push(t.value)}catch(s){n={error:s}}finally{try{t&&!t.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return i},e=this&&this.__spreadArray||function(r,e){for(var o=0,t=e.length,n=r.length;o<t;o++,n++)r[n]=e[o];return r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LogLevel=void 0;var o,t="PeerJS: ";!function(r){r[r.Disabled=0]="Disabled",r[r.Errors=1]="Errors",r[r.Warnings=2]="Warnings",r[r.All=3]="All"}(o=exports.LogLevel||(exports.LogLevel={}));var n=function(){function n(){this._logLevel=o.Disabled}return Object.defineProperty(n.prototype,"logLevel",{get:function(){return this._logLevel},set:function(r){this._logLevel=r},enumerable:!1,configurable:!0}),n.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=o.All&&this._print.apply(this,e([o.All],r(t)))},n.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=o.Warnings&&this._print.apply(this,e([o.Warnings],r(t)))},n.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=o.Errors&&this._print.apply(this,e([o.Errors],r(t)))},n.prototype.setLogFunction=function(r){this._print=r},n.prototype._print=function(n){for(var l=[],i=1;i<arguments.length;i++)l[i-1]=arguments[i];var s=e([t],r(l));for(var a in s)s[a]instanceof Error&&(s[a]="("+s[a].name+") "+s[a].message);n>=o.All?console.log.apply(console,e([],r(s))):n>=o.Warnings?console.warn.apply(console,e(["WARNING"],r(s))):n>=o.Errors&&console.error.apply(console,e(["ERROR"],r(s)))},n}();exports.default=new n;
},{}],"ZRYf":[function(require,module,exports) {
"use strict";var e,r,o,n,t,a,i;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ServerMessageType=exports.SocketEventType=exports.SerializationType=exports.PeerErrorType=exports.PeerEventType=exports.ConnectionType=exports.ConnectionEventType=void 0,function(e){e.Open="open",e.Stream="stream",e.Data="data",e.Close="close",e.Error="error",e.IceStateChanged="iceStateChanged"}(e=exports.ConnectionEventType||(exports.ConnectionEventType={})),function(e){e.Data="data",e.Media="media"}(r=exports.ConnectionType||(exports.ConnectionType={})),function(e){e.Open="open",e.Close="close",e.Connection="connection",e.Call="call",e.Disconnected="disconnected",e.Error="error"}(o=exports.PeerEventType||(exports.PeerEventType={})),function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"}(n=exports.PeerErrorType||(exports.PeerErrorType={})),function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"}(t=exports.SerializationType||(exports.SerializationType={})),function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"}(a=exports.SocketEventType||(exports.SocketEventType={})),function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"}(i=exports.ServerMessageType||(exports.ServerMessageType={}));
},{}],"wJlv":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),t=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,s,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){s={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},n=this&&this.__spreadArray||function(e,t){for(var n=0,o=t.length,s=e.length;n<o;n++,s++)e[s]=t[n];return e},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Socket=void 0;var r=require("eventemitter3"),i=s(require("./logger")),c=require("./enums"),a=function(s){function r(e,t,n,o,r,i){void 0===i&&(i=5e3);var c=s.call(this)||this;c.pingInterval=i,c._disconnected=!0,c._messagesQueue=[];var a=e?"wss://":"ws://";return c._baseUrl=a+t+":"+n+o+"peerjs?key="+r,c}return e(r,s),r.prototype.start=function(e,t){var n=this;this._id=e;var o=this._baseUrl+"&id="+e+"&token="+t;!this._socket&&this._disconnected&&(this._socket=new WebSocket(o),this._disconnected=!1,this._socket.onmessage=function(e){var t;try{t=JSON.parse(e.data),i.default.log("Server message received:",t)}catch(o){return void i.default.log("Invalid server message",e.data)}n.emit(c.SocketEventType.Message,t)},this._socket.onclose=function(e){n._disconnected||(i.default.log("Socket closed.",e),n._cleanup(),n._disconnected=!0,n.emit(c.SocketEventType.Disconnected))},this._socket.onopen=function(){n._disconnected||(n._sendQueuedMessages(),i.default.log("Socket open"),n._scheduleHeartbeat())})},r.prototype._scheduleHeartbeat=function(){var e=this;this._wsPingTimer=setTimeout(function(){e._sendHeartbeat()},this.pingInterval)},r.prototype._sendHeartbeat=function(){if(this._wsOpen()){var e=JSON.stringify({type:c.ServerMessageType.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}else i.default.log("Cannot send heartbeat, because socket closed")},r.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},r.prototype._sendQueuedMessages=function(){var e,s,r=n([],t(this._messagesQueue));this._messagesQueue=[];try{for(var i=o(r),c=i.next();!c.done;c=i.next()){var a=c.value;this.send(a)}}catch(u){e={error:u}}finally{try{c&&!c.done&&(s=i.return)&&s.call(i)}finally{if(e)throw e.error}}},r.prototype.send=function(e){if(!this._disconnected)if(this._id)if(e.type){if(this._wsOpen()){var t=JSON.stringify(e);this._socket.send(t)}}else this.emit(c.SocketEventType.Error,"Invalid message");else this._messagesQueue.push(e)},r.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},r.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},r}(r.EventEmitter);exports.Socket=a;
},{"eventemitter3":"JJlS","./logger":"WOs9","./enums":"ZRYf"}],"HCdX":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(i,r){function c(e){try{s(o.next(e))}catch(n){r(n)}}function a(e){try{s(o.throw(e))}catch(n){r(n)}}function s(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(c,a)}s((o=o.apply(e,n||[])).next())})},t=this&&this.__generator||function(e,n){var t,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=n.call(e,c)}catch(a){r=[6,a],o=0}finally{t=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Negotiator=void 0;var i=require("./util"),r=o(require("./logger")),c=require("./enums"),a=function(){function o(e){this.connection=e}return o.prototype.startConnection=function(e){var n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===c.ConnectionType.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){if(this.connection.type===c.ConnectionType.Data){var t=this.connection,o={ordered:!!e.reliable},i=n.createDataChannel(t.label,o);t.initialize(i)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},o.prototype._startPeerConnection=function(){r.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},o.prototype._setupListeners=function(e){var n=this,t=this.connection.peer,o=this.connection.connectionId,a=this.connection.type,s=this.connection.provider;r.default.log("Listening for ICE candidates."),e.onicecandidate=function(e){e.candidate&&e.candidate.candidate&&(r.default.log("Received ICE candidates for "+t+":",e.candidate),s.socket.send({type:c.ServerMessageType.Candidate,payload:{candidate:e.candidate,type:a,connectionId:o},dst:t}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":r.default.log("iceConnectionState is failed, closing connections to "+t),n.connection.emit(c.ConnectionEventType.Error,new Error("Negotiation of connection to "+t+" failed.")),n.connection.close();break;case"closed":r.default.log("iceConnectionState is closed, closing connections to "+t),n.connection.emit(c.ConnectionEventType.Error,new Error("Connection to "+t+" closed.")),n.connection.close();break;case"disconnected":r.default.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=i.util.noop}n.connection.emit(c.ConnectionEventType.IceStateChanged,e.iceConnectionState)},r.default.log("Listening for data channel"),e.ondatachannel=function(e){r.default.log("Received data channel");var n=e.channel;s.getConnection(t,o).initialize(n)},r.default.log("Listening for remote stream"),e.ontrack=function(e){r.default.log("Received remote stream");var i=e.streams[0],a=s.getConnection(t,o);if(a.type===c.ConnectionType.Media){var d=a;n._addStreamToMediaConnection(i,d)}}},o.prototype.cleanup=function(){r.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var n="closed"!==e.signalingState,t=!1;if(this.connection.type===c.ConnectionType.Data){var o=this.connection.dataChannel;o&&(t=!!o.readyState&&"closed"!==o.readyState)}(n||t)&&e.close()}},o.prototype._makeOffer=function(){return n(this,void 0,Promise,function(){var n,o,a,s,d,l,u;return t(this,function(t){switch(t.label){case 0:n=this.connection.peerConnection,o=this.connection.provider,t.label=1;case 1:return t.trys.push([1,7,,8]),[4,n.createOffer(this.connection.options.constraints)];case 2:a=t.sent(),r.default.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(a.sdp=this.connection.options.sdpTransform(a.sdp)||a.sdp),t.label=3;case 3:return t.trys.push([3,5,,6]),[4,n.setLocalDescription(a)];case 4:return t.sent(),r.default.log("Set localDescription:",a,"for:"+this.connection.peer),s={sdp:a,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:i.util.browser},this.connection.type===c.ConnectionType.Data&&(d=this.connection,s=e(e({},s),{label:d.label,reliable:d.reliable,serialization:d.serialization})),o.socket.send({type:c.ServerMessageType.Offer,payload:s,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=(l=t.sent())&&(o.emitError(c.PeerErrorType.WebRTC,l),r.default.log("Failed to setLocalDescription, ",l)),[3,6];case 6:return[3,8];case 7:return u=t.sent(),o.emitError(c.PeerErrorType.WebRTC,u),r.default.log("Failed to createOffer, ",u),[3,8];case 8:return[2]}})})},o.prototype._makeAnswer=function(){return n(this,void 0,Promise,function(){var e,n,o,a,s;return t(this,function(t){switch(t.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,t.label=1;case 1:return t.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:o=t.sent(),r.default.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(o.sdp=this.connection.options.sdpTransform(o.sdp)||o.sdp),t.label=3;case 3:return t.trys.push([3,5,,6]),[4,e.setLocalDescription(o)];case 4:return t.sent(),r.default.log("Set localDescription:",o,"for:"+this.connection.peer),n.socket.send({type:c.ServerMessageType.Answer,payload:{sdp:o,type:this.connection.type,connectionId:this.connection.connectionId,browser:i.util.browser},dst:this.connection.peer}),[3,6];case 5:return a=t.sent(),n.emitError(c.PeerErrorType.WebRTC,a),r.default.log("Failed to setLocalDescription, ",a),[3,6];case 6:return[3,8];case 7:return s=t.sent(),n.emitError(c.PeerErrorType.WebRTC,s),r.default.log("Failed to create answer, ",s),[3,8];case 8:return[2]}})})},o.prototype.handleSDP=function(e,o){return n(this,void 0,Promise,function(){var n,i,a,s;return t(this,function(t){switch(t.label){case 0:o=new RTCSessionDescription(o),n=this.connection.peerConnection,i=this.connection.provider,r.default.log("Setting remote description",o),a=this,t.label=1;case 1:return t.trys.push([1,5,,6]),[4,n.setRemoteDescription(o)];case 2:return t.sent(),r.default.log("Set remoteDescription:"+e+" for:"+this.connection.peer),"OFFER"!==e?[3,4]:[4,a._makeAnswer()];case 3:t.sent(),t.label=4;case 4:return[3,6];case 5:return s=t.sent(),i.emitError(c.PeerErrorType.WebRTC,s),r.default.log("Failed to setRemoteDescription, ",s),[3,6];case 6:return[2]}})})},o.prototype.handleCandidate=function(e){return n(this,void 0,Promise,function(){var n,o,i,a,s,d;return t(this,function(t){switch(t.label){case 0:r.default.log("handleCandidate:",e),n=e.candidate,o=e.sdpMLineIndex,i=e.sdpMid,a=this.connection.peerConnection,s=this.connection.provider,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,a.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:o,candidate:n}))];case 2:return t.sent(),r.default.log("Added ICE candidate for:"+this.connection.peer),[3,4];case 3:return d=t.sent(),s.emitError(c.PeerErrorType.WebRTC,d),r.default.log("Failed to handleCandidate, ",d),[3,4];case 4:return[2]}})})},o.prototype._addTracksToConnection=function(e,n){if(r.default.log("add tracks from stream "+e.id+" to peer connection"),!n.addTrack)return r.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(t){n.addTrack(t,e)})},o.prototype._addStreamToMediaConnection=function(e,n){r.default.log("add stream "+e.id+" to media connection "+n.connectionId),n.addStream(e)},o}();exports.Negotiator=a;
},{"./util":"BHXf","./logger":"WOs9","./enums":"ZRYf"}],"tQFK":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseConnection=void 0;var e=require("eventemitter3"),n=function(e){function n(t,n,o){var r=e.call(this)||this;return r.peer=t,r.provider=n,r.options=o,r._open=!1,r.metadata=o.metadata,r}return t(n,e),Object.defineProperty(n.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),n}(e.EventEmitter);exports.BaseConnection=n;
},{"eventemitter3":"JJlS"}],"dbHP":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaConnection=void 0;var n=require("./util"),i=r(require("./logger")),a=require("./negotiator"),s=require("./enums"),l=require("./baseconnection"),c=function(r){function l(e,t,o){var i=r.call(this,e,t,o)||this;return i._localStream=i.options._stream,i.connectionId=i.options.connectionId||l.ID_PREFIX+n.util.randomToken(),i._negotiator=new a.Negotiator(i),i._localStream&&i._negotiator.startConnection({_stream:i._localStream,originator:!0}),i}return e(l,r),Object.defineProperty(l.prototype,"type",{get:function(){return s.ConnectionType.Media},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),l.prototype.addStream=function(e){i.default.log("Receiving stream",e),this._remoteStream=e,r.prototype.emit.call(this,s.ConnectionEventType.Stream,e)},l.prototype.handleMessage=function(e){var t=e.type,o=e.payload;switch(e.type){case s.ServerMessageType.Answer:this._negotiator.handleSDP(t,o.sdp),this._open=!0;break;case s.ServerMessageType.Candidate:this._negotiator.handleCandidate(o.candidate);break;default:i.default.warn("Unrecognized message type:"+t+" from peer:"+this.peer)}},l.prototype.answer=function(e,r){var n,a;if(void 0===r&&(r={}),this._localStream)i.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=e,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection(t(t({},this.options._payload),{_stream:e}));var s=this.provider._getMessages(this.connectionId);try{for(var l=o(s),c=l.next();!c.done;c=l.next()){var p=c.value;this.handleMessage(p)}}catch(u){n={error:u}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}this._open=!0}},l.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,r.prototype.emit.call(this,s.ConnectionEventType.Close))},l.ID_PREFIX="mc_",l}(l.BaseConnection);exports.MediaConnection=c;
},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK"}],"GGp6":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodingQueue=void 0;var r=require("eventemitter3"),o=t(require("./logger")),n=function(t){function r(){var e=t.call(this)||this;return e.fileReader=new FileReader,e._queue=[],e._processing=!1,e.fileReader.onload=function(t){e._processing=!1,t.target&&e.emit("done",t.target.result),e.doNextTask()},e.fileReader.onerror=function(t){o.default.error("EncodingQueue error:",t),e._processing=!1,e.destroy(),e.emit("error",t)},e}return e(r,t),Object.defineProperty(r.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),r.prototype.enque=function(e){this.queue.push(e),this.processing||this.doNextTask()},r.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},r.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},r}(r.EventEmitter);exports.EncodingQueue=n;
},{"eventemitter3":"JJlS","./logger":"WOs9"}],"GBTQ":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),t=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataConnection=void 0;var i=require("./util"),o=n(require("./logger")),r=require("./negotiator"),a=require("./enums"),s=require("./baseconnection"),u=require("./encodingQueue"),l=function(n){function s(e,t,l){var f=n.call(this,e,t,l)||this;return f.stringify=JSON.stringify,f.parse=JSON.parse,f._buffer=[],f._bufferSize=0,f._buffering=!1,f._chunkedData={},f._encodingQueue=new u.EncodingQueue,f.connectionId=f.options.connectionId||s.ID_PREFIX+i.util.randomToken(),f.label=f.options.label||f.connectionId,f.serialization=f.options.serialization||a.SerializationType.Binary,f.reliable=!!f.options.reliable,f._encodingQueue.on("done",function(e){f._bufferedSend(e)}),f._encodingQueue.on("error",function(){o.default.error("DC#"+f.connectionId+": Error occured in encoding from blob to arraybuffer, close DC"),f.close()}),f._negotiator=new r.Negotiator(f),f._negotiator.startConnection(f.options._payload||{originator:!0}),f}return e(s,n),Object.defineProperty(s.prototype,"type",{get:function(){return a.ConnectionType.Data},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),s.prototype.initialize=function(e){this._dc=e,this._configureDataChannel()},s.prototype._configureDataChannel=function(){var e=this;i.util.supports.binaryBlob&&!i.util.supports.reliable||(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){o.default.log("DC#"+e.connectionId+" dc connection success"),e._open=!0,e.emit(a.ConnectionEventType.Open)},this.dataChannel.onmessage=function(t){o.default.log("DC#"+e.connectionId+" dc onmessage:",t.data),e._handleDataMessage(t)},this.dataChannel.onclose=function(){o.default.log("DC#"+e.connectionId+" dc closed for:",e.peer),e.close()}},s.prototype._handleDataMessage=function(e){var t=this,o=e.data,r=o.constructor,s=o;if(this.serialization===a.SerializationType.Binary||this.serialization===a.SerializationType.BinaryUTF8){if(r===Blob)return void i.util.blobToArrayBuffer(o,function(e){var n=i.util.unpack(e);t.emit(a.ConnectionEventType.Data,n)});if(r===ArrayBuffer)s=i.util.unpack(o);else if(r===String){var u=i.util.binaryStringToArrayBuffer(o);s=i.util.unpack(u)}}else this.serialization===a.SerializationType.JSON&&(s=this.parse(o));s.__peerData?this._handleChunk(s):n.prototype.emit.call(this,a.ConnectionEventType.Data,s)},s.prototype._handleChunk=function(e){var t=e.__peerData,n=this._chunkedData[t]||{data:[],count:0,total:e.total};if(n.data[e.n]=e.data,n.count++,this._chunkedData[t]=n,n.total===n.count){delete this._chunkedData[t];var i=new Blob(n.data);this._handleDataMessage({data:i})}},s.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,n.prototype.emit.call(this,a.ConnectionEventType.Close))},s.prototype.send=function(e,t){if(this.open)if(this.serialization===a.SerializationType.JSON)this._bufferedSend(this.stringify(e));else if(this.serialization===a.SerializationType.Binary||this.serialization===a.SerializationType.BinaryUTF8){var o=i.util.pack(e);if(!t&&o.size>i.util.chunkedMTU)return void this._sendChunks(o);i.util.supports.binaryBlob?this._bufferedSend(o):this._encodingQueue.enque(o)}else this._bufferedSend(e);else n.prototype.emit.call(this,a.ConnectionEventType.Error,new Error("Connection is not open. You should listen for the `open` event before sending messages."))},s.prototype._bufferedSend=function(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this._bufferSize=this._buffer.length)},s.prototype._trySend=function(e){var t=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>s.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){t._buffering=!1,t._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return o.default.error("DC#:"+this.connectionId+" Error when sending:",n),this._buffering=!0,this.close(),!1}return!0},s.prototype._tryBuffer=function(){if(this.open&&0!==this._buffer.length){var e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},s.prototype._sendChunks=function(e){var n,r,a=i.util.chunk(e);o.default.log("DC#"+this.connectionId+" Try to send "+a.length+" chunks...");try{for(var s=t(a),u=s.next();!u.done;u=s.next()){var l=u.value;this.send(l,!0)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},s.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case a.ServerMessageType.Answer:this._negotiator.handleSDP(e.type,t.sdp);break;case a.ServerMessageType.Candidate:this._negotiator.handleCandidate(t.candidate);break;default:o.default.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}},s.ID_PREFIX="dc_",s.MAX_BUFFERED_AMOUNT=8388608,s}(s.BaseConnection);exports.DataConnection=l;
},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK","./encodingQueue":"GGp6"}],"in7L":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,r,o){return new(r||(r=Promise))(function(n,s){function i(t){try{a(o.next(t))}catch(e){s(e)}}function u(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,u)}a((o=o.apply(t,e||[])).next())})},e=this&&this.__generator||function(t,e){var r,o,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(n=(n=i.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(u){s=[6,u],o=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.API=void 0;var o=require("./util"),n=r(require("./logger")),s=function(){function r(t){this._options=t}return r.prototype._buildUrl=function(t){var e=(this._options.secure?"https://":"http://")+this._options.host+":"+this._options.port+this._options.path+this._options.key+"/"+t;return e+="?ts="+(new Date).getTime()+Math.random()},r.prototype.retrieveId=function(){return t(this,void 0,Promise,function(){var t,r,s,i;return e(this,function(e){switch(e.label){case 0:t=this._buildUrl("id"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(t)];case 2:if(200!==(r=e.sent()).status)throw new Error("Error. Status:"+r.status);return[2,r.text()];case 3:throw s=e.sent(),n.default.error("Error retrieving ID",s),i="","/"===this._options.path&&this._options.host!==o.util.CLOUD_HOST&&(i=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+i);case 4:return[2]}})})},r.prototype.listAllPeers=function(){return t(this,void 0,Promise,function(){var t,r,s,i;return e(this,function(e){switch(e.label){case 0:t=this._buildUrl("peers"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(t)];case 2:if(200!==(r=e.sent()).status){if(401===r.status)throw s="",s=this._options.host===o.util.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+s);throw new Error("Error. Status:"+r.status)}return[2,r.json()];case 3:throw i=e.sent(),n.default.error("Error retrieving list peers",i),new Error("Could not get list peers from the server."+i);case 4:return[2]}})})},r}();exports.API=s;
},{"./util":"BHXf","./logger":"WOs9"}],"Hxpd":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Peer=void 0;var i=require("eventemitter3"),s=require("./util"),a=o(require("./logger")),c=require("./socket"),l=require("./mediaconnection"),u=require("./dataconnection"),d=require("./enums"),p=require("./api"),h=function(){return function(){}}(),f=function(o){function i(e,n){var r,c=o.call(this)||this;return c._id=null,c._lastServerId=null,c._destroyed=!1,c._disconnected=!1,c._open=!1,c._connections=new Map,c._lostMessages=new Map,e&&e.constructor==Object?n=e:e&&(r=e.toString()),n=t({debug:0,host:s.util.CLOUD_HOST,port:s.util.CLOUD_PORT,path:"/",key:i.DEFAULT_KEY,token:s.util.randomToken(),config:s.util.defaultConfig},n),c._options=n,"/"===c._options.host&&(c._options.host=window.location.hostname),c._options.path&&("/"!==c._options.path[0]&&(c._options.path="/"+c._options.path),"/"!==c._options.path[c._options.path.length-1]&&(c._options.path+="/")),void 0===c._options.secure&&c._options.host!==s.util.CLOUD_HOST?c._options.secure=s.util.isSecure():c._options.host==s.util.CLOUD_HOST&&(c._options.secure=!0),c._options.logFunction&&a.default.setLogFunction(c._options.logFunction),a.default.logLevel=c._options.debug||0,c._api=new p.API(n),c._socket=c._createServerConnection(),s.util.supports.audioVideo||s.util.supports.data?r&&!s.util.validateId(r)?(c._delayedAbort(d.PeerErrorType.InvalidID,'ID "'+r+'" is invalid'),c):(r?c._initialize(r):c._api.retrieveId().then(function(e){return c._initialize(e)}).catch(function(e){return c._abort(d.PeerErrorType.ServerError,e)}),c):(c._delayedAbort(d.PeerErrorType.BrowserIncompatible,"The current browser does not support WebRTC"),c)}return e(i,o),Object.defineProperty(i.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"connections",{get:function(){var e,t,o=Object.create(null);try{for(var i=n(this._connections),s=i.next();!s.done;s=i.next()){var a=r(s.value,2),c=a[0],l=a[1];o[c]=l}}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),i.prototype._createServerConnection=function(){var e=this,t=new c.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(d.SocketEventType.Message,function(t){e._handleMessage(t)}),t.on(d.SocketEventType.Error,function(t){e._abort(d.PeerErrorType.SocketError,t)}),t.on(d.SocketEventType.Disconnected,function(){e.disconnected||(e.emitError(d.PeerErrorType.Network,"Lost connection to server."),e.disconnect())}),t.on(d.SocketEventType.Close,function(){e.disconnected||e._abort(d.PeerErrorType.SocketClosed,"Underlying socket is already closed.")}),t},i.prototype._initialize=function(e){this._id=e,this.socket.start(e,this._options.token)},i.prototype._handleMessage=function(e){var t,r,o=e.type,i=e.payload,s=e.src;switch(o){case d.ServerMessageType.Open:this._lastServerId=this.id,this._open=!0,this.emit(d.PeerEventType.Open,this.id);break;case d.ServerMessageType.Error:this._abort(d.PeerErrorType.ServerError,i.msg);break;case d.ServerMessageType.IdTaken:this._abort(d.PeerErrorType.UnavailableID,'ID "'+this.id+'" is taken');break;case d.ServerMessageType.InvalidKey:this._abort(d.PeerErrorType.InvalidKey,'API KEY "'+this._options.key+'" is invalid');break;case d.ServerMessageType.Leave:a.default.log("Received leave message from "+s),this._cleanupPeer(s),this._connections.delete(s);break;case d.ServerMessageType.Expire:this.emitError(d.PeerErrorType.PeerUnavailable,"Could not connect to peer "+s);break;case d.ServerMessageType.Offer:var c=i.connectionId;if((_=this.getConnection(s,c))&&(_.close(),a.default.warn("Offer received for existing Connection ID:"+c)),i.type===d.ConnectionType.Media)_=new l.MediaConnection(s,this,{connectionId:c,_payload:i,metadata:i.metadata}),this._addConnection(s,_),this.emit(d.PeerEventType.Call,_);else{if(i.type!==d.ConnectionType.Data)return void a.default.warn("Received malformed connection type:"+i.type);_=new u.DataConnection(s,this,{connectionId:c,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable}),this._addConnection(s,_),this.emit(d.PeerEventType.Connection,_)}var p=this._getMessages(c);try{for(var h=n(p),f=h.next();!f.done;f=h.next()){var y=f.value;_.handleMessage(y)}}catch(v){t={error:v}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}break;default:if(!i)return void a.default.warn("You received a malformed message from "+s+" of type "+o);var _;c=i.connectionId;(_=this.getConnection(s,c))&&_.peerConnection?_.handleMessage(e):c?this._storeMessage(c,e):a.default.warn("You received an unrecognized message:",e)}},i.prototype._storeMessage=function(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)},i.prototype._getMessages=function(e){var t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]},i.prototype.connect=function(e,t){if(void 0===t&&(t={}),this.disconnected)return a.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(d.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var n=new u.DataConnection(e,this,t);return this._addConnection(e,n),n},i.prototype.call=function(e,t,n){if(void 0===n&&(n={}),this.disconnected)return a.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(d.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(t){n._stream=t;var r=new l.MediaConnection(e,this,n);return this._addConnection(e,r),r}a.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},i.prototype._addConnection=function(e,t){a.default.log("add connection "+t.type+":"+t.connectionId+" to peerId:"+e),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)},i.prototype._removeConnection=function(e){var t=this._connections.get(e.peer);if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}this._lostMessages.delete(e.connectionId)},i.prototype.getConnection=function(e,t){var r,o,i=this._connections.get(e);if(!i)return null;try{for(var s=n(i),a=s.next();!a.done;a=s.next()){var c=a.value;if(c.connectionId===t)return c}}catch(l){r={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return null},i.prototype._delayedAbort=function(e,t){var n=this;setTimeout(function(){n._abort(e,t)},0)},i.prototype._abort=function(e,t){a.default.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()},i.prototype.emitError=function(e,t){var n;a.default.error("Error:",t),(n="string"==typeof t?new Error(t):t).type=e,this.emit(d.PeerEventType.Error,n)},i.prototype.destroy=function(){this.destroyed||(a.default.log("Destroy peer with ID:"+this.id),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit(d.PeerEventType.Close))},i.prototype._cleanup=function(){var e,t;try{for(var r=n(this._connections.keys()),o=r.next();!o.done;o=r.next()){var i=o.value;this._cleanupPeer(i),this._connections.delete(i)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.socket.removeAllListeners()},i.prototype._cleanupPeer=function(e){var t,r,o=this._connections.get(e);if(o)try{for(var i=n(o),s=i.next();!s.done;s=i.next()){s.value.close()}}catch(a){t={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},i.prototype.disconnect=function(){if(!this.disconnected){var e=this.id;a.default.log("Disconnect peer with ID:"+e),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit(d.PeerEventType.Disconnected,e)}},i.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)a.default.log("Attempting reconnection to server with ID "+this._lastServerId),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");a.default.error("In a hurry? We're still trying to make the initial connection!")}},i.prototype.listAllPeers=function(e){var t=this;void 0===e&&(e=function(e){}),this._api.listAllPeers().then(function(t){return e(t)}).catch(function(e){return t._abort(d.PeerErrorType.ServerError,e)})},i.DEFAULT_KEY="peerjs",i}(i.EventEmitter);exports.Peer=f;
},{"eventemitter3":"JJlS","./util":"BHXf","./logger":"WOs9","./socket":"wJlv","./mediaconnection":"dbHP","./dataconnection":"GBTQ","./enums":"ZRYf","./api":"in7L"}],"iTK6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.peerjs=void 0;var e=require("./util"),r=require("./peer");exports.peerjs={Peer:r.Peer,util:e.util},exports.default=r.Peer,window.peerjs=exports.peerjs,window.Peer=r.Peer;
},{"./util":"BHXf","./peer":"Hxpd"}]},{},["iTK6"], null)
//# sourceMappingURL=/peerjs.min.js.map

/***/ }),

/***/ "./src/game/main.ts":
/*!**************************!*\
  !*** ./src/game/main.ts ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.items = exports.getNextPuzzle = exports.g = void 0;
const van_1 = __webpack_require__(/*! ../van */ "./src/van.ts");
const PUZZLES_URL = "https://raw.githubusercontent.com/ReedKrawiec/chess-please/master/src/game/puzzles.csv";
let canvas_element = document.getElementById("target");
function getNextPuzzle(puzzles, target_rating, range) {
    let filtered = puzzles.filter(p => p.rating >= target_rating - range && p.rating <= target_rating + range);
    if (filtered.length == 0) {
        return null;
    }
    return filtered[Math.floor(Math.random() * filtered.length)];
}
exports.getNextPuzzle = getNextPuzzle;
;
exports.items = {
    "test": {
        name: "test",
        obj_name: "test_item",
        description: `Deez nuts`
    },
    "test2": {
        name: "test2",
        obj_name: "test_item2",
        description: `Strings are a deceptively complex data structure that are best though off as multi-dimensional vectors. Working with strings in Java is easy. Doing the same in C is horrible.`
    },
    "test_char": {
        name: "Test Character",
        obj_name: "test_item",
        description: "I'm in your inventory !! :o"
    }
};
(function () {
    return __awaiter(this, void 0, void 0, function* () {
        let puzzles_raw = yield fetch(PUZZLES_URL);
        let puzzles_lines = (yield puzzles_raw.text()).split("\n");
        let puzzles = puzzles_lines.map(line => {
            let lines_split = line.split(",");
            return {
                id: lines_split[0],
                fen: lines_split[1],
                solution: lines_split[2] ? lines_split[2].split(" ") : [],
                rating: parseInt(lines_split[3])
            };
        });
        puzzles.sort((a, b) => a.rating - b.rating);
        exports.g = new van_1.game(canvas_element.getContext("2d"), {
            rating: 1600,
            puzzles,
            flags: {},
            inventory: ["test", "test2", "test", "test2", "test", "test2", "test", "test2", "test", "test2"]
        });
        exports.g.loadRoomString("test");
    });
})();


/***/ }),

/***/ "./src/game/objects/abstract/item.ts":
/*!*******************************************!*\
  !*** ./src/game/objects/abstract/item.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.item = void 0;
const main_1 = __webpack_require__(/*! game/main */ "./src/game/main.ts");
const controls_1 = __webpack_require__(/*! lib/controls */ "./src/lib/controls.ts");
const object_1 = __webpack_require__(/*! lib/object */ "./src/lib/object.ts");
const van_1 = __webpack_require__(/*! src/van */ "./src/van.ts");
class item extends object_1.obj {
    constructor(state, params = van_1.copy(item.default_params)) {
        super(state, params);
        this.sprite_url = "./sprites/Error.png";
        this.height = 100;
        this.width = 100;
        this.collision = true;
        this.render = true;
        this.tick_state = false;
    }
    statef(time_delta) {
        super.statef(time_delta);
        let mouse = controls_1.Poll_Mouse(main_1.g.getRoom().cameras[0], true);
        if (mouse) {
            if (mouse && this.collidesWithPoint(mouse)) {
                console.log("test");
                let room = main_1.g.getRoom();
                room.inventory_hud.setHoveredItem(this.item);
            }
        }
    }
    renderf(time_delta) {
        return super.renderf(time_delta);
    }
    registerAnimations() {
    }
    registerAudio() {
    }
    registerControls() {
    }
}
exports.item = item;
item.default_params = {};


/***/ }),

/***/ "./src/game/objects/abstract/piece.ts":
/*!********************************************!*\
  !*** ./src/game/objects/abstract/piece.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.piece = void 0;
const controls_1 = __webpack_require__(/*! lib/controls */ "./src/lib/controls.ts");
const object_1 = __webpack_require__(/*! lib/object */ "./src/lib/object.ts");
const van_1 = __webpack_require__(/*! src/van */ "./src/van.ts");
class piece extends object_1.obj {
    constructor(state, params = van_1.copy(piece.default_params)) {
        super(state, params);
        this.sprite_url = "./sprites/Error.png";
        this.collision = false;
        this.render = true;
        this.static = true;
        this.tags.add("piece");
        switch (params.type) {
            case "P":
                this.sprite_url = "./sprites/chess/white_pawn.png";
                this.width = 12;
                this.height = 16;
                break;
            case "p":
                this.sprite_url = "./sprites/chess/black_pawn.png";
                this.width = 12;
                this.height = 16;
                break;
            case "K":
                this.sprite_url = "./sprites/chess/white_king.png";
                this.width = 20;
                this.height = 20;
                break;
            case "k":
                this.sprite_url = "./sprites/chess/black_king.png";
                this.width = 20;
                this.height = 20;
                break;
            case "B":
                this.sprite_url = "./sprites/chess/white_bishop.png";
                this.width = 16;
                this.height = 20;
                break;
            case "b":
                this.sprite_url = "./sprites/chess/black_bishop.png";
                this.width = 16;
                this.height = 20;
                break;
            case "N":
                this.sprite_url = "./sprites/chess/white_knight.png";
                this.width = 20;
                this.height = 20;
                break;
            case "n":
                this.sprite_url = "./sprites/chess/black_knight.png";
                this.width = 20;
                this.height = 20;
                break;
            case "R":
                this.sprite_url = "./sprites/chess/white_rook.png";
                this.width = 16;
                this.height = 20;
                break;
            case "r":
                this.sprite_url = "./sprites/chess/black_rook.png";
                this.width = 14;
                this.height = 18;
                break;
            case "Q":
                this.sprite_url = "./sprites/chess/white_queen.png";
                this.width = 18;
                this.height = 20;
                break;
            case "q":
                this.sprite_url = "./sprites/chess/black_queen.png";
                this.width = 18;
                this.height = 20;
                break;
        }
    }
    statef(time_delta) {
        super.statef(time_delta);
    }
    renderf(time_delta) {
        return super.renderf(time_delta);
    }
    registerAnimations() {
    }
    registerAudio() {
    }
    registerControls() {
        this.bindControl("mouse0down", controls_1.exec_type.once, () => {
            let mouse = controls_1.Poll_Mouse(this.getRoom().cameras[0]);
            if (this.collidesWithBox({ x: mouse.x, y: mouse.y, width: 20, height: 20 })) {
                this.getRoom().state.dragging = this;
                this.getRoom().state.start_drag = this.state.position;
                this.layer = 2;
            }
        });
    }
}
exports.piece = piece;
piece.default_params = {
    type: "P",
    square: "a1"
};


/***/ }),

/***/ "./src/game/objects/abstract/wood_floor.ts":
/*!*************************************************!*\
  !*** ./src/game/objects/abstract/wood_floor.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.floor = void 0;
const object_1 = __webpack_require__(/*! lib/object */ "./src/lib/object.ts");
const render_1 = __webpack_require__(/*! lib/render */ "./src/lib/render.ts");
const van_1 = __webpack_require__(/*! src/van */ "./src/van.ts");
class floor extends object_1.obj {
    constructor(state, params = van_1.copy(floor.default_params)) {
        super(state, params);
        this.sprite_url = "./sprites/Error.png";
        this.height = 100;
        this.width = 100;
        this.collision = false;
        this.render = true;
        this.static = true;
        this.scale_type = render_1.scale_type.repeat;
        this.tags.add("floor");
    }
    statef(time_delta) {
        super.statef(time_delta);
    }
    renderf(time_delta) {
        return super.renderf(time_delta);
    }
    registerAnimations() {
    }
    registerAudio() {
    }
    registerControls() {
    }
}
exports.floor = floor;
floor.default_params = {};


/***/ }),

/***/ "./src/game/objects/black_background.ts":
/*!**********************************************!*\
  !*** ./src/game/objects/black_background.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.black_background = void 0;
const object_1 = __webpack_require__(/*! lib/object */ "./src/lib/object.ts");
class black_background extends object_1.obj {
    constructor() {
        super(...arguments);
        this.sprite_url = "./sprites/black.png";
        this.height = 1;
        this.width = 1;
        this.collision = false;
        this.render = true;
        this.layer = -1;
    }
}
exports.black_background = black_background;


/***/ }),

/***/ "./src/game/objects/board.ts":
/*!***********************************!*\
  !*** ./src/game/objects/board.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.board = void 0;
const object_1 = __webpack_require__(/*! lib/object */ "./src/lib/object.ts");
const van_1 = __webpack_require__(/*! src/van */ "./src/van.ts");
class board extends object_1.obj {
    constructor(state, params = van_1.copy(board.default_params)) {
        super(state, params);
        this.sprite_url = "./sprites/chess/board.png";
        this.height = 180;
        this.width = 180;
        this.collision = true;
        this.render = true;
        this.layer = 0;
        this.static = true;
        this.tags.add("board");
    }
    statef(time_delta) {
        super.statef(time_delta);
    }
    renderf(time_delta) {
        return super.renderf(time_delta);
    }
    registerAnimations() {
    }
    registerAudio() {
    }
    registerControls() {
    }
}
exports.board = board;
board.default_params = {};


/***/ }),

/***/ "./src/game/objects/example.ts":
/*!*************************************!*\
  !*** ./src/game/objects/example.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.example = void 0;
const object_1 = __webpack_require__(/*! lib/object */ "./src/lib/object.ts");
class example extends object_1.obj {
    constructor(state, params = example.default_params) {
        super(state, params);
        this.sprite_url = "./sprites/Error.png";
        this.height = 100;
        this.width = 100;
        this.collision = true;
        this.render = true;
    }
    statef(time_delta) {
        super.statef(time_delta);
    }
    renderf(time_delta) {
        return super.renderf(time_delta);
    }
    register_animations() {
    }
    register_audio() {
    }
    register_controls() {
    }
}
exports.example = example;
example.default_params = {};


/***/ }),

/***/ "./src/game/objects/inv_icon.ts":
/*!**************************************!*\
  !*** ./src/game/objects/inv_icon.ts ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.inv_icon = void 0;
const main_1 = __webpack_require__(/*! game/main */ "./src/game/main.ts");
const controls_1 = __webpack_require__(/*! lib/controls */ "./src/lib/controls.ts");
const object_1 = __webpack_require__(/*! lib/object */ "./src/lib/object.ts");
const van_1 = __webpack_require__(/*! src/van */ "./src/van.ts");
class inv_icon extends object_1.obj {
    constructor(state, params = van_1.copy(inv_icon.default_params)) {
        super(state, params);
        this.sprite_url = "./sprites/invicon.png";
        this.height = 300;
        this.width = 300;
        this.collision = true;
        this.render = true;
        this.tick_state = false;
        this.hud_clickable = true;
    }
    statef(time_delta) {
        super.statef(time_delta);
    }
    renderf(time_delta) {
        return super.renderf(time_delta);
    }
    registerAnimations() {
    }
    registerAudio() {
    }
    registerControls() {
        this.bindControl("mouse0down", controls_1.exec_type.once, () => {
            let room = main_1.g.getRoom();
            room.cameras[0].setHud(room.inventory_hud);
            room.state.movable = false;
        });
    }
}
exports.inv_icon = inv_icon;
inv_icon.default_params = {};


/***/ }),

/***/ "./src/game/objects/inventory_clicks.ts":
/*!**********************************************!*\
  !*** ./src/game/objects/inventory_clicks.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.inventory_clicks = void 0;
const main_1 = __webpack_require__(/*! game/main */ "./src/game/main.ts");
const top_down_1 = __webpack_require__(/*! game/rooms/abstract/top_down */ "./src/game/rooms/abstract/top_down.ts");
const controls_1 = __webpack_require__(/*! lib/controls */ "./src/lib/controls.ts");
const hud_1 = __webpack_require__(/*! lib/hud */ "./src/lib/hud.ts");
const math_1 = __webpack_require__(/*! lib/math */ "./src/lib/math.ts");
const object_1 = __webpack_require__(/*! lib/object */ "./src/lib/object.ts");
const van_1 = __webpack_require__(/*! src/van */ "./src/van.ts");
const top_down_2 = __webpack_require__(/*! game/rooms/abstract/top_down */ "./src/game/rooms/abstract/top_down.ts");
const collision_1 = __webpack_require__(/*! lib/collision */ "./src/lib/collision.ts");
class inventory_clicks extends object_1.obj {
    constructor(state, params = van_1.copy(inventory_clicks.default_params)) {
        super(state, params);
        this.sprite_url = "./sprites/Error.png";
        this.height = 0;
        this.width = 0;
        this.collision = true;
        this.hitbox = {
            width: 100,
            height: 100,
            x_offset: 0,
            y_offset: 0
        };
        this.render = true;
        this.layer = 3;
        Object.assign(this.state, {
            show_left: false,
            show_right: false
        });
        this.text_nodes.push(new hud_1.Text({
            position: this.state.position,
            size: 40,
            scaling: 1,
            font: "VT323",
            color: "white"
        }, () => "Back"));
        this.text_nodes.push(new hud_1.Text({
            position: math_1.Vec.create(50, van_1.viewport.height / 2),
            size: 40,
            scaling: 1,
            font: "VT323",
            color: "white"
        }, () => this.state.show_left ? "<" : ""));
        this.text_nodes.push(new hud_1.Text({
            position: math_1.Vec.create(van_1.viewport.width - 50, van_1.viewport.height / 2),
            size: 40,
            scaling: 1,
            font: "VT323",
            color: "white"
        }, () => this.state.show_right ? ">" : ""));
        this.state.show_right = main_1.g.state.globals.inventory.length > 8;
        this.tags.add("manager");
    }
    statef(time) {
        super.statef(time);
        let hud = main_1.g.getRoom().cameras[0].hud;
        console.log(hud.state.current_page);
    }
    registerControls() {
        this.bindControl("mouse0", controls_1.exec_type.once, () => {
            const click_regions = {
                "back": {
                    x: 50,
                    y: 50,
                    height: 100,
                    width: 100
                },
                "left": {
                    x: 50,
                    y: van_1.viewport.height / 2,
                    height: 100,
                    width: 100
                },
                "right": {
                    x: van_1.viewport.width - 50,
                    y: van_1.viewport.height / 2,
                    height: 100,
                    width: 100
                }
            };
            let room = main_1.g.getRoom();
            let mouse = controls_1.Poll_Mouse(room.cameras[0], true);
            if (collision_1.pointCollidesWithBox(mouse, click_regions["back"])) {
                room.cameras[0].setHud(new top_down_1.main_hud());
                room.state.current_view = top_down_2.views.main;
                room.state.movable = true;
            }
            if (collision_1.pointCollidesWithBox(mouse, click_regions["left"])) {
                let hud = room.cameras[0].hud;
                console.log(hud.state.current_page);
                if (hud.state.current_page > 0) {
                    hud.renderPage(hud.state.current_page - 1);
                    if (hud.state.current_page - 1 > 0) {
                        this.state.show_left = true;
                    }
                    else {
                        this.state.show_left = false;
                    }
                    this.state.show_right = true;
                }
            }
            if (collision_1.pointCollidesWithBox(mouse, click_regions["right"])) {
                let hud = room.cameras[0].hud;
                if ((hud.state.current_page + 1) * 8 < main_1.g.state.globals.inventory.length) {
                    console.log("rendering" + hud.state.current_page);
                    hud.renderPage(hud.state.current_page + 1);
                    if ((hud.state.current_page + 1) * 8 < main_1.g.state.globals.inventory.length) {
                        this.state.show_right = true;
                    }
                    else {
                        this.state.show_right = false;
                    }
                    this.state.show_left = true;
                }
            }
        });
    }
}
exports.inventory_clicks = inventory_clicks;


/***/ }),

/***/ "./src/game/objects/main_character.ts":
/*!********************************************!*\
  !*** ./src/game/objects/main_character.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.main_character = void 0;
const main_1 = __webpack_require__(/*! game/main */ "./src/game/main.ts");
const controls_1 = __webpack_require__(/*! lib/controls */ "./src/lib/controls.ts");
const object_1 = __webpack_require__(/*! lib/object */ "./src/lib/object.ts");
const sprite_1 = __webpack_require__(/*! lib/sprite */ "./src/lib/sprite.ts");
const van_1 = __webpack_require__(/*! src/van */ "./src/van.ts");
class main_character extends object_1.obj {
    constructor(state, params = van_1.copy(main_character.default_params)) {
        super(state, params);
        this.sprite_url = "./sprites/main_char_walk.png";
        this.height = 380;
        this.width = 254;
        this.collision = true;
        this.static = false;
        this.render = true;
        this.tags.add("player");
    }
    statef(time_delta) {
        super.statef(time_delta);
    }
    renderf(time_delta) {
        /*
        let positioned = super.renderf(time_delta) as positioned_sprite;
        if(this.tags.has("dark")){
          positioned.sprite = sprites[0][1];
        }
        else{
          positioned.sprite = sprites[0][0];
        }
        return positioned;
        */
        return super.renderf(time_delta);
    }
    registerAnimations() {
        let sprites = sprite_1.sprite_gen(this, this.width, this.height);
        this.animations.add("walk_r", [
            [0, sprites[0][0]],
            [100, sprites[0][1]],
            [200, sprites[0][2]],
            [300, sprites[0][3]],
            [400, sprites[0][4]],
            [500, sprites[0][5]],
            [600, sprites[0][6]],
            [700, sprites[0][7]],
            [800, sprites[0][8]],
        ], 900);
        this.animations.add("walk_l", [
            [0, sprites[1][8]],
            [100, sprites[1][7]],
            [200, sprites[1][6]],
            [300, sprites[1][5]],
            [400, sprites[1][4]],
            [500, sprites[1][3]],
            [600, sprites[1][2]],
            [700, sprites[1][1]],
            [800, sprites[1][0]],
        ], 900);
    }
    registerAudio() {
    }
    registerControls() {
        const speed = 8;
        this.bindControl("KeyW", controls_1.exec_type.once, () => {
            let room = main_1.g.getRoom();
            if (room.state.movable)
                this.state.velocity.y = speed;
        });
        this.bindControl("KeyWup", controls_1.exec_type.once, () => {
            this.state.velocity.y = 0;
        });
        this.bindControl("KeyS", controls_1.exec_type.once, () => {
            let room = main_1.g.getRoom();
            if (room.state.movable)
                this.state.velocity.y = -speed;
        });
        this.bindControl("KeySup", controls_1.exec_type.once, () => {
            this.state.velocity.y = 0;
        });
        this.bindControl("KeyA", controls_1.exec_type.once, () => {
            let room = main_1.g.getRoom();
            if (room.state.movable && this.state.velocity.x > -speed) {
                console.log("left");
                this.state.velocity.x = -speed;
                this.animations.play("walk_l");
            }
        });
        this.bindControl("KeyAup", controls_1.exec_type.once, () => {
            this.state.velocity.x = 0;
        });
        this.bindControl("KeyD", controls_1.exec_type.once, () => {
            let room = main_1.g.getRoom();
            if (room.state.movable && this.state.velocity.x < speed) {
                this.state.velocity.x = speed;
                this.animations.play("walk_r");
            }
        }, 1);
        this.bindControl("KeyDup", controls_1.exec_type.once, () => {
            this.state.velocity.x = 0;
        });
    }
}
exports.main_character = main_character;
main_character.default_params = {};


/***/ }),

/***/ "./src/game/objects/pawn.ts":
/*!**********************************!*\
  !*** ./src/game/objects/pawn.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.pawn = void 0;
const van_1 = __webpack_require__(/*! src/van */ "./src/van.ts");
const piece_1 = __webpack_require__(/*! ./abstract/piece */ "./src/game/objects/abstract/piece.ts");
class pawn extends piece_1.piece {
    constructor(state, params = van_1.copy(piece_1.piece.default_params)) {
        super(state, params);
        this.state.scaling = {
            height: 8,
            width: 8
        };
    }
    statef(time_delta) {
        super.statef(time_delta);
    }
    renderf(time_delta) {
        return super.renderf(time_delta);
    }
    registerAnimations() {
    }
    registerAudio() {
    }
}
exports.pawn = pawn;


/***/ }),

/***/ "./src/game/objects/prefabs.ts":
/*!*************************************!*\
  !*** ./src/game/objects/prefabs.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.prefabs = void 0;
const black_background_1 = __webpack_require__(/*! ./black_background */ "./src/game/objects/black_background.ts");
const board_1 = __webpack_require__(/*! ./board */ "./src/game/objects/board.ts");
const example_1 = __webpack_require__(/*! ./example */ "./src/game/objects/example.ts");
const inv_icon_1 = __webpack_require__(/*! ./inv_icon */ "./src/game/objects/inv_icon.ts");
const inventory_clicks_1 = __webpack_require__(/*! ./inventory_clicks */ "./src/game/objects/inventory_clicks.ts");
const main_character_1 = __webpack_require__(/*! ./main_character */ "./src/game/objects/main_character.ts");
const pawn_1 = __webpack_require__(/*! ./pawn */ "./src/game/objects/pawn.ts");
const test_char_1 = __webpack_require__(/*! ./test_char */ "./src/game/objects/test_char.ts");
const test_item_1 = __webpack_require__(/*! ./test_item */ "./src/game/objects/test_item.ts");
const test_item2_1 = __webpack_require__(/*! ./test_item2 */ "./src/game/objects/test_item2.ts");
const text_background_1 = __webpack_require__(/*! ./text_background */ "./src/game/objects/text_background.ts");
const wood_floor_1 = __webpack_require__(/*! ./wood_floor */ "./src/game/objects/wood_floor.ts");
exports.prefabs = {
    black_background: black_background_1.black_background,
    board: board_1.board,
    example: example_1.example,
    inv_icon: inv_icon_1.inv_icon,
    inventory_clicks: inventory_clicks_1.inventory_clicks,
    main_character: main_character_1.main_character,
    pawn: pawn_1.pawn,
    test_char: test_char_1.test_char,
    test_item: test_item_1.test_item,
    test_item2: test_item2_1.test_item2,
    text_background: text_background_1.text_background,
    wood_floor: wood_floor_1.wood_floor,
};


/***/ }),

/***/ "./src/game/objects/test_char.ts":
/*!***************************************!*\
  !*** ./src/game/objects/test_char.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.test_char = void 0;
const main_1 = __webpack_require__(/*! game/main */ "./src/game/main.ts");
const object_1 = __webpack_require__(/*! lib/object */ "./src/lib/object.ts");
const sprite_1 = __webpack_require__(/*! lib/sprite */ "./src/lib/sprite.ts");
const van_1 = __webpack_require__(/*! src/van */ "./src/van.ts");
class test_char extends object_1.obj {
    constructor(state, params = van_1.copy(test_char.default_params)) {
        super(state, params);
        this.sprite_url = "./sprites/test_char.png";
        this.height = 500;
        this.width = 500;
        this.collision = true;
        this.render = true;
    }
    statef(time_delta) {
        super.statef(time_delta);
    }
    renderf(time_delta) {
        let sprites = sprite_1.sprite_gen(this, 500, 500);
        let positioned = super.renderf(time_delta);
        if (this.tags.has("dark")) {
            positioned.sprite = sprites[0][1];
        }
        else {
            positioned.sprite = sprites[0][0];
        }
        return positioned;
    }
    registerEvents() {
        this.addEventHandler("click", () => {
            console.log("clicked");
            let room = main_1.g.state.current_room;
            room.setConv([{
                    name: "John",
                    left: "main_character",
                    right: "test_char",
                    dark: "right",
                    full_text: "play me in chess *****"
                }, {
                    name: "Smith",
                    left: "main_character",
                    right: "test_char",
                    dark: "left",
                    full_text: "i will kill u"
                }], () => {
                this.game.loadRoomString("boardView");
            });
        });
    }
    registerAnimations() {
    }
    registerAudio() {
    }
    registerControls() {
    }
}
exports.test_char = test_char;
test_char.default_params = {};


/***/ }),

/***/ "./src/game/objects/test_item.ts":
/*!***************************************!*\
  !*** ./src/game/objects/test_item.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.test_item = void 0;
const item_1 = __webpack_require__(/*! game/objects/abstract/item */ "./src/game/objects/abstract/item.ts");
const main_1 = __webpack_require__(/*! game/main */ "./src/game/main.ts");
class test_item extends item_1.item {
    constructor() {
        super(...arguments);
        this.sprite_url = "./sprites/Error.png";
        this.height = 100;
        this.width = 100;
        this.render = true;
        this.item = main_1.items["test"];
    }
}
exports.test_item = test_item;


/***/ }),

/***/ "./src/game/objects/test_item2.ts":
/*!****************************************!*\
  !*** ./src/game/objects/test_item2.ts ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.test_item2 = void 0;
const item_1 = __webpack_require__(/*! game/objects/abstract/item */ "./src/game/objects/abstract/item.ts");
const main_1 = __webpack_require__(/*! game/main */ "./src/game/main.ts");
class test_item2 extends item_1.item {
    constructor() {
        super(...arguments);
        this.sprite_url = "./sprites/Error.png";
        this.height = 100;
        this.width = 100;
        this.render = true;
        this.item = main_1.items["test2"];
    }
}
exports.test_item2 = test_item2;


/***/ }),

/***/ "./src/game/objects/text_background.ts":
/*!*********************************************!*\
  !*** ./src/game/objects/text_background.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.text_background = void 0;
const object_1 = __webpack_require__(/*! lib/object */ "./src/lib/object.ts");
const van_1 = __webpack_require__(/*! src/van */ "./src/van.ts");
class text_background extends object_1.obj {
    constructor(state, params = van_1.copy(text_background.default_params)) {
        super(state, params);
        this.sprite_url = "./sprites/darkgray.png";
        this.height = 1;
        this.width = 1;
        this.collision = true;
        this.render = true;
        this.layer = 3;
    }
    statef(time_delta) {
        super.statef(time_delta);
    }
    renderf(time_delta) {
        return super.renderf(time_delta);
    }
    register_animations() {
    }
    register_audio() {
    }
    register_controls() {
    }
}
exports.text_background = text_background;
text_background.default_params = {};


/***/ }),

/***/ "./src/game/objects/wood_floor.ts":
/*!****************************************!*\
  !*** ./src/game/objects/wood_floor.ts ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.wood_floor = void 0;
const wood_floor_1 = __webpack_require__(/*! ./abstract/wood_floor */ "./src/game/objects/abstract/wood_floor.ts");
class wood_floor extends wood_floor_1.floor {
    constructor() {
        super(...arguments);
        this.sprite_url = "./sprites/wood_floor.jpg";
        this.height = 400;
        this.width = 400;
    }
    registerEvents() {
        this.addEventHandler("click", () => {
            console.log("test");
        });
    }
    registerControls() {
    }
}
exports.wood_floor = wood_floor;


/***/ }),

/***/ "./src/game/rooms/abstract/Pathing_Room.ts":
/*!*************************************************!*\
  !*** ./src/game/rooms/abstract/Pathing_Room.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Pathing_Room = void 0;
const room_1 = __webpack_require__(/*! ../../../lib/room */ "./src/lib/room.ts");
const collision_1 = __webpack_require__(/*! ../../../lib/collision */ "./src/lib/collision.ts");
function one_arr(height, width) {
    let mesh = [];
    for (let a = 0; a < height; a++) {
        mesh[a] = [];
        for (let b = 0; b < width; b++) {
            mesh[a][b] = 1;
        }
    }
    return mesh;
}
class Pathing_Room extends room_1.room {
    constructor() {
        super(...arguments);
        this.nav_node_diameter = 100;
        this.nav_padding = 0;
        this.nav_recalculation_interval = 5000;
        this.pathfind_counter = 0;
    }
    carveNavMesh(nav_mesh, obj, fill) {
        let bounds = obj.getBoundingBox();
        let mesh = nav_mesh.grid;
        let b_l = this.posToCord(nav_mesh, bounds.bottom_left);
        let t_r = this.posToCord(nav_mesh, bounds.top_right);
        let y_min = Math.max(0, b_l.y);
        let y_max = Math.min(mesh.length - 1, t_r.y);
        let x_min = Math.max(0, b_l.x);
        let x_max = Math.min(mesh[0].length - 1, t_r.x);
        for (let a = x_min; a <= x_max; a++) {
            for (let b = y_min; b <= y_max; b++) {
                mesh[b][a] = fill;
            }
        }
    }
    computeNavMesh(floor_tag, object_id) {
        let room = this.game.getRoom();
        let floors = room.getObjByTag(floor_tag);
        let coll_box = collision_1.getEncompassingBox(floors);
        let width = coll_box.width / this.nav_node_diameter;
        let height = coll_box.height / this.nav_node_diameter;
        let colliders = room.checkCollisions(coll_box, [floor_tag]).filter((o) => o.id != object_id);
        let bot_left = {
            x: coll_box.x - coll_box.width / 2,
            y: coll_box.y - coll_box.height / 2
        };
        let top_right = {
            x: coll_box.x + coll_box.width / 2,
            y: coll_box.y + coll_box.height / 2
        };
        let mesh = one_arr(height, width);
        let nav_mesh = {
            grid: mesh,
            box: coll_box,
            objects: floors
        };
        this.nav_mesh = nav_mesh;
        for (let floor of floors) {
            let old_hbox = floor.hitbox;
            let new_width = (floor.width * floor.state.scaling.width - 2 * this.nav_padding) / floor.state.scaling.width;
            let new_height = (floor.height * floor.state.scaling.height - 2 * this.nav_padding) / floor.state.scaling.height;
            floor.hitbox = {
                x_offset: 0,
                y_offset: 0,
                width: new_width > 0 ? new_width : 0,
                height: new_height > 0 ? new_height : 0
            };
            this.carveNavMesh(nav_mesh, floor, 0);
            floor.hitbox = old_hbox;
        }
        for (let obj of colliders) {
            this.carveNavMesh(nav_mesh, obj, 1);
        }
        return nav_mesh;
    }
    posToCord(nav_mesh, pos) {
        let room = this.game.getRoom();
        let x = Math.floor((pos.x - nav_mesh.box.x + nav_mesh.box.width / 2) / nav_mesh.box.width * (nav_mesh.box.width / room.nav_node_diameter));
        let y = Math.floor((pos.y - nav_mesh.box.y + nav_mesh.box.height / 2) / nav_mesh.box.height * (nav_mesh.box.height / room.nav_node_diameter));
        return { x, y };
    }
    statef(time) {
        super.statef(time);
    }
}
exports.Pathing_Room = Pathing_Room;


/***/ }),

/***/ "./src/game/rooms/abstract/top_down.json":
/*!***********************************************!*\
  !*** ./src/game/rooms/abstract/top_down.json ***!
  \***********************************************/
/*! exports provided: objects, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"objects\":[]}");

/***/ }),

/***/ "./src/game/rooms/abstract/top_down.ts":
/*!*********************************************!*\
  !*** ./src/game/rooms/abstract/top_down.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.top_down = exports.conversation_hud = exports.inventory_hud = exports.main_hud = exports.views = void 0;
const van_1 = __webpack_require__(/*! src/van */ "./src/van.ts");
const render_1 = __webpack_require__(/*! lib/render */ "./src/lib/render.ts");
const config = __webpack_require__(/*! ./top_down.json */ "./src/game/rooms/abstract/top_down.json");
const Pathing_Room_1 = __webpack_require__(/*! ./Pathing_Room */ "./src/game/rooms/abstract/Pathing_Room.ts");
const text_background_1 = __webpack_require__(/*! game/objects/text_background */ "./src/game/objects/text_background.ts");
const black_background_1 = __webpack_require__(/*! game/objects/black_background */ "./src/game/objects/black_background.ts");
const hud_1 = __webpack_require__(/*! lib/hud */ "./src/lib/hud.ts");
const math_1 = __webpack_require__(/*! lib/math */ "./src/lib/math.ts");
const utils_1 = __webpack_require__(/*! lib/utils */ "./src/lib/utils.ts");
const controls_1 = __webpack_require__(/*! lib/controls */ "./src/lib/controls.ts");
const main_1 = __webpack_require__(/*! game/main */ "./src/game/main.ts");
const inventory_clicks_1 = __webpack_require__(/*! game/objects/inventory_clicks */ "./src/game/objects/inventory_clicks.ts");
let cfig = config;
var views;
(function (views) {
    views[views["main"] = 0] = "main";
    views[views["inventory"] = 1] = "inventory";
    views[views["text"] = 2] = "text";
})(views = exports.views || (exports.views = {}));
function getLines(text, maxWidth, font_name, font_size) {
    var words = text.split(" ");
    var lines = [];
    var currentLine = words[0];
    let ctx = document.createElement("canvas").getContext("2d");
    ctx.font = `${font_size}px ${font_name}`;
    for (var i = 1; i < words.length; i++) {
        var word = words[i];
        var width = ctx.measureText(currentLine + " " + word).width;
        if (width < maxWidth) {
            currentLine += " " + word;
        }
        else {
            lines.push(currentLine);
            currentLine = word;
        }
    }
    lines.push(currentLine);
    return lines;
}
class main_hud extends hud_1.HUD {
    load() {
        const _super = Object.create(null, {
            load: { get: () => super.load }
        });
        return __awaiter(this, void 0, void 0, function* () {
            return _super.load.call(this);
        });
    }
    setGraphicElements() {
        return [ /*new inv_icon({
          position:Vec.create(3 * viewport.width/20,3 * viewport.height/20),
          scaling:{width:.5,height:.5}
        })*/];
    }
    statef(time) {
        super.statef(time);
    }
}
exports.main_hud = main_hud;
const text_speed = 20;
class inventory_hud extends hud_1.HUD {
    constructor() {
        super(...arguments);
        this.state = {
            line_texts: ["", "", "", ""],
            name: "",
            current_page: 0
        };
    }
    setGraphicElements() {
        let b_background = new black_background_1.black_background({
            position: math_1.Vec.create(van_1.viewport.width / 2, van_1.viewport.height / 2),
            scaling: { width: van_1.viewport.width, height: van_1.viewport.height }
        });
        b_background.opacity = 0.9;
        return [b_background, new inventory_clicks_1.inventory_clicks({
                position: math_1.Vec.create(50, 20),
                scaling: { width: 1, height: 1 }
            }),];
    }
    setTextElements() {
        let nodes = [];
        for (let a of utils_1.range(4)) {
            nodes.push(new hud_1.Text({
                position: math_1.Vec.create(100, 8 * van_1.viewport.height / 32 - (van_1.viewport.width / 30 + 5) * a),
                size: van_1.viewport.width / 30,
                scaling: 1,
                font: "VT323",
                color: "white",
                align: "left"
            }, () => this.state.line_texts[a]));
        }
        nodes.push(new hud_1.Text({
            position: math_1.Vec.create(100, 12 * van_1.viewport.height / 32),
            size: van_1.viewport.width / 20,
            scaling: 1,
            font: "VT323",
            color: "white",
            align: "left"
        }, () => this.state.name));
        return nodes;
    }
    setHoveredItem(item) {
        let lines = getLines(item.description, van_1.viewport.width - 100, "VT323", van_1.viewport.width / 30);
        lines = lines.slice(0, 3);
        this.state.line_texts = ["", "", "", ""];
        for (let [index, line] of lines.entries()) {
            this.state.line_texts[index] = line;
        }
        this.state.name = item.name;
    }
    renderPage(page_index) {
        this.graphic_elements = this.graphic_elements.filter((e) => !e.tags.has("item"));
        let inv = main_1.g.state.globals.inventory;
        let inv_clicks = this.graphic_elements.filter((e) => e.tags.has("manager"))[0];
        if (page_index == 0) {
            inv_clicks.state.show_left = false;
            inv_clicks.state.show_right = true;
            this.state.line_texts = ["", "", "", ""];
            this.state.name = "";
        }
        this.state.current_page = page_index;
        let names = inv.slice(page_index * 8, (page_index + 1) * 8);
        for (let [index, item_name] of names.entries()) {
            let entry = main_1.items[item_name];
            let obj_width = van_1.viewport.width / 960;
            if (index > 3) {
                let obj = van_1.createItemString(entry.obj_name, {
                    position: math_1.Vec.create((1 + index % 4) * (van_1.viewport.width / 5), 1 / 4 * van_1.viewport.height / 2 + van_1.viewport.height / 2),
                    scaling: { height: obj_width, width: obj_width }
                });
                obj.UnbindAll();
                obj.removeAllEventHandlers();
                obj.tags.add("item");
                this.addGraphic(obj);
            }
            else {
                let obj = van_1.createItemString(entry.obj_name, {
                    position: math_1.Vec.create((1 + index % 4) * (van_1.viewport.width / 5), 3 / 4 * van_1.viewport.height / 2 + van_1.viewport.height / 2),
                    scaling: { height: obj_width, width: obj_width }
                });
                obj.UnbindAll();
                obj.removeAllEventHandlers();
                obj.tags.add("item");
                this.addGraphic(obj);
            }
            if (index === inv.length - 1)
                break;
        }
    }
    setActive() {
        return __awaiter(this, void 0, void 0, function* () {
            this.renderPage(0);
        });
    }
}
exports.inventory_hud = inventory_hud;
class conversation_hud extends hud_1.HUD {
    constructor() {
        super();
        this.max_characters = 15;
        this.text_speed = text_speed;
        this.state = {
            text_active: false,
            full_text: [],
            index: 0,
            timer: 0,
            current_line: 0,
            current_text_line: 0,
            line_text: ["", "", "", ""],
            blocked: false,
            text_finished: false,
            name: ""
        };
    }
    progress() {
        if (this.state.text_finished) {
            return true;
        }
        if (!this.state.text_finished && this.state.blocked) {
            this.state.blocked = false;
            this.state.current_line = 0;
            this.clearLines();
        }
        return false;
    }
    clearCharacterPortrain(side) {
        if (side == "left") {
            this.graphic_elements = this.graphic_elements.filter((obj) => !obj.tags.has("text_left"));
        }
        if (side == "right") {
            this.graphic_elements = this.graphic_elements.filter((obj) => !obj.tags.has("text_right"));
        }
    }
    changeCharacterPortrait(side, obj, dark) {
        return __awaiter(this, void 0, void 0, function* () {
            obj.layer = 2;
            obj.state.scaling = { width: van_1.viewport.width / 480, height: van_1.viewport.width / 480 };
            if (dark)
                obj.tags.add("dark");
            if (side == "left") {
                obj.tags.add("text_left");
                obj.state.position = math_1.Vec.create(van_1.viewport.width / 6, van_1.viewport.height / 4);
                this.graphic_elements = this.graphic_elements.filter((obj) => !obj.tags.has("text_left"));
            }
            if (side == "right") {
                obj.tags.add("text_right");
                obj.state.position = math_1.Vec.create(5 * van_1.viewport.width / 6, van_1.viewport.height / 4);
                this.graphic_elements = this.graphic_elements.filter((obj) => !obj.tags.has("text_right"));
            }
            obj.UnbindAll();
            obj.removeAllEventHandlers();
            this.addGraphic(obj);
        });
    }
    statef(time) {
        super.statef(time);
        if (this.state.text_active) {
            if (this.state.timer > this.text_speed) {
                if (!this.state.blocked) {
                    this.state.line_text[this.state.current_line] += this.state.full_text[this.state.current_text_line][this.state.index];
                    this.state.index++;
                    if (this.state.index === this.state.full_text[this.state.current_text_line].length) {
                        this.state.current_line++;
                        this.state.current_text_line++;
                        this.state.index = 0;
                    }
                    if (this.state.current_line === 4) {
                        this.state.blocked = true;
                    }
                    if (this.state.current_text_line === this.state.full_text.length) {
                        this.state.blocked = true;
                        this.state.text_finished = true;
                    }
                    this.state.timer = 0;
                }
            }
            this.state.timer += time;
        }
    }
    clearLines() {
        this.state.line_text = utils_1.range(4).map(() => "");
    }
    setGraphicElements() {
        let b_background = new black_background_1.black_background({
            position: math_1.Vec.create(van_1.viewport.width / 2, van_1.viewport.height / 2),
            scaling: { width: van_1.viewport.width, height: van_1.viewport.height }
        });
        b_background.opacity = 0.9;
        return [
            new text_background_1.text_background({
                position: math_1.Vec.create(van_1.viewport.width / 2, van_1.viewport.height / 6),
                scaling: { width: van_1.viewport.width, height: van_1.viewport.height / 3 }
            }), b_background
        ];
    }
    setTextElements() {
        let nodes = [];
        for (let a of utils_1.range(4)) {
            nodes.push(new hud_1.Text({
                position: math_1.Vec.create(100, 6 * van_1.viewport.height / 32 - (van_1.viewport.width / 50 + 5) * a),
                size: van_1.viewport.width / 50,
                scaling: 1,
                font: "VT323",
                color: "white",
                align: "left"
            }, () => { return this.state.line_text[a]; }));
        }
        nodes.push(new hud_1.Text({
            position: math_1.Vec.create(80, 8 * van_1.viewport.height / 32),
            size: van_1.viewport.width / 40,
            scaling: 1,
            font: "VT323",
            color: "white",
            align: "left"
        }, () => this.state.name));
        return nodes;
    }
    setText(text) {
        this.state.text_active = true;
        this.state.current_text_line = 0;
        this.state.current_line = 0;
        this.state.blocked = false;
        this.clearLines();
        this.state.text_finished = false;
        this.state.full_text = getLines(text, van_1.viewport.width - 100, "Arial", van_1.viewport.width / 50);
        this.progress();
    }
}
exports.conversation_hud = conversation_hud;
class top_down extends Pathing_Room_1.Pathing_Room {
    constructor(game, cfig) {
        super(game, cfig);
        this.background_url = "./sprites/Error.png";
        this.render = true;
        this.floor_tag = "floor";
        this.nav_padding = 100;
        this.text_hud = new conversation_hud();
        this.main_hud = new main_hud();
        this.inventory_hud = new inventory_hud();
        this.nav_node_diameter = 200;
        this.state = {
            current_view: views.main,
            movable: true,
            conv: undefined
        };
        this.cameras.push(new render_1.Camera({
            x: 0,
            y: 0,
            dimensions: van_1.viewport,
            scaling: 0.6
        }, {
            x: 0,
            y: 0,
            width: 1,
            height: 1
        }, this.main_hud));
        console.log("v1");
    }
    load() {
        const _super = Object.create(null, {
            load: { get: () => super.load }
        });
        return __awaiter(this, void 0, void 0, function* () {
            yield this.inventory_hud.load();
            yield this.main_hud.load();
            yield this.text_hud.load();
            return _super.load.call(this);
        });
    }
    setConv(script, after_conv) {
        this.state.current_view = views.text;
        this.cameras[0].setHud(this.text_hud);
        this.state.conv = {
            current_conv: script,
            callback: after_conv
        };
        this.progressConv(script[0]);
        this.state.movable = false;
    }
    progressConv(script) {
        this.text_hud.setText(script.full_text);
        this.text_hud.state.name = script.name;
        if (script.left !== undefined) {
            this.text_hud.changeCharacterPortrait("left", this.createItemString(script.left, { position: math_1.Vec.create(0, 0) }, {}), script.dark === "left");
        }
        else {
            this.text_hud.clearCharacterPortrain("left");
        }
        if (script.right !== undefined) {
            this.text_hud.changeCharacterPortrait("right", this.createItemString(script.right, { position: math_1.Vec.create(0, 0) }, {}), script.dark === "right");
        }
        else {
            this.text_hud.clearCharacterPortrain("right");
        }
    }
    nextConversationEntry() {
        let flag_values = this.state.conv.current_conv[0].flags;
        let items = this.state.conv.current_conv[0].items;
        if (items) {
            for (let item of items) {
                if (item.action = "add") {
                    main_1.g.state.globals.inventory.push(item.name);
                }
                else {
                    let index = main_1.g.state.globals.inventory.indexOf(item.name);
                    if (index > -1) {
                        main_1.g.state.globals.inventory.splice(index, 1);
                    }
                }
            }
        }
        if (flag_values) {
            for (let flag of Object.keys(flag_values)) {
                main_1.setFlag(flag, flag_values[flag]);
            }
        }
        if (this.state.conv.current_conv.length > 1) {
            this.state.conv.current_conv.splice(0, 1);
            this.progressConv(this.state.conv.current_conv[0]);
        }
        else {
            this.text_hud.clearLines();
            this.state.current_view = views.main;
            this.cameras[0].setHud(new main_hud());
            this.state.movable = true;
            this.state.conv.callback();
        }
    }
    registerControls() {
        this.bindControl("mouse0down", controls_1.exec_type.once, () => {
            if (this.cameras[0].hud === this.text_hud) {
                if (this.text_hud.state.text_finished) {
                    this.nextConversationEntry();
                }
                else {
                    this.text_hud.progress();
                }
            }
        });
        this.bindControl("Spacedown", controls_1.exec_type.once, () => {
            if (this.state.current_view === views.text) {
                this.text_hud.text_speed = text_speed / 2;
            }
        });
        this.bindControl("Spaceup", controls_1.exec_type.once, () => {
            this.text_hud.text_speed = text_speed;
        });
        this.bindControl("KeyX", controls_1.exec_type.once, () => {
            if (!(this.state.current_view === views.text)) {
                this.setConv([{
                        left: "main_character",
                        right: "main_character",
                        name: "John Smith",
                        dark: "left",
                        full_text: `In case of an error, the promise becomes rejected, and the execution should jump to the closest rejection handler. But there is none. So the error gets “stuck”. There’s no code to handle it.`,
                        flags: {
                            test: "one"
                        }
                    }, {
                        right: "example",
                        name: "test",
                        dark: "left",
                        full_text: `Test TestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTestTest.`,
                        flags: {
                            test2: "yep"
                        }
                    }, {
                        name: "",
                        dark: "left",
                        full_text: `But why?...`,
                        flags: {
                            test: "twp"
                        }
                    }]);
            }
        });
    }
    registerParticles() {
    }
    statef(delta_time) {
        super.statef(delta_time);
        let player = this.cache("player", this.getObjByTag("player")[0]);
        this.cameras[0].state.position = player.state.position;
        if (!this.state.movable) {
            player.state.velocity = math_1.Vec.create(0, 0);
        }
    }
}
exports.top_down = top_down;


/***/ }),

/***/ "./src/game/rooms/boardView.json":
/*!***************************************!*\
  !*** ./src/game/rooms/boardView.json ***!
  \***************************************/
/*! exports provided: objects, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"objects\":[{\"type\":\"board\",\"state\":{\"position\":{\"x\":0,\"y\":0.6619656075768603},\"scaling\":{\"width\":8,\"height\":8}}}]}");

/***/ }),

/***/ "./src/game/rooms/boardView.ts":
/*!*************************************!*\
  !*** ./src/game/rooms/boardView.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.boardView = void 0;
const room_1 = __webpack_require__(/*! lib/room */ "./src/lib/room.ts");
const van_1 = __webpack_require__(/*! src/van */ "./src/van.ts");
const config = __webpack_require__(/*! ./boardView.json */ "./src/game/rooms/boardView.json");
const controls_1 = __webpack_require__(/*! lib/controls */ "./src/lib/controls.ts");
const main_1 = __webpack_require__(/*! game/main */ "./src/game/main.ts");
const render_1 = __webpack_require__(/*! lib/render */ "./src/lib/render.ts");
const piece_1 = __webpack_require__(/*! game/objects/abstract/piece */ "./src/game/objects/abstract/piece.ts");
const chess_js_1 = __webpack_require__(/*! chess.js */ "./node_modules/chess.js/chess.js");
const math_1 = __webpack_require__(/*! lib/math */ "./src/lib/math.ts");
const hud_1 = __webpack_require__(/*! lib/hud */ "./src/lib/hud.ts");
let cfig = config;
class boardHud extends hud_1.HUD {
    setTextElements() {
        return [
            new hud_1.Text({
                position: math_1.Vec.create(49 * van_1.viewport.width / 50, 2 * van_1.viewport.height / 20),
                size: 40,
                scaling: 1,
                font: "VT323",
                color: "white",
                align: "right"
            }, () => `${main_1.g.state.globals.rating}`),
        ];
    }
}
class boardView extends room_1.room {
    constructor(game) {
        super(game, cfig);
        this.background_url = "./sprites/Error.png";
        this.render = true;
        this.proximity_map = new room_1.proximity_matrix(2000, 1);
        this.cameras.push(new render_1.Camera({
            x: 0,
            y: 0,
            dimensions: van_1.viewport,
            scaling: 0.3
        }, {
            x: 0,
            y: 0,
            width: 1,
            height: 1
        }, new boardHud()));
        this.state = {
            dragging: null,
            start_drag: null,
            perspective: null,
            puzzle: null,
            number_correct: 0
        };
    }
    registerControls() {
        super.registerControls();
        this.bindControl("KeyC", controls_1.exec_type.once, () => {
            this.getObjByTag("piece").forEach((piece) => piece.delete());
            console.log(this.objects);
        });
        this.bindControl("mouse0down", controls_1.exec_type.once, () => {
            console.log(this.objects);
        });
        this.bindControl("mouse0up", controls_1.exec_type.once, () => {
            if (this.state.dragging) {
                let mouse = controls_1.Poll_Mouse(this.cameras[0]);
                this.state.dragging.layer = 1;
                if (mouse.x > 700 || mouse.y > 700 || mouse.x < -700 || mouse.y < -700) {
                    this.state.dragging.state.position = this.state.start_drag;
                }
                else {
                    let rows = ["a", "b", "c", "d", "e", "f", "g", "h"];
                    let cols = ["1", "2", "3", "4", "5", "6", "7", "8"];
                    if (this.state.perspective == "w") {
                        rows = rows.reverse();
                        cols = cols.reverse();
                    }
                    let mod_x = Math.floor(mouse.x / 178.571429) + 4;
                    let mod_y = Math.floor(mouse.y / 178.571429) + 4;
                    let square = `${rows[mod_x]}${cols[mod_y]}`;
                    let full_move = this.state.dragging.params.square + square;
                    console.log(full_move + " " + this.state.puzzle.solution[0]);
                    if (full_move == this.state.puzzle.solution[0]) {
                        console.log("correct");
                        let x = -625 + 178.571429 * (mod_x);
                        let y = -625 + 178.571429 * (mod_y);
                        let collision = this.checkObjectsPointInclusive(mouse, ["piece"]).filter((obj) => obj != this.state.dragging);
                        this.state.puzzle.solution.shift();
                        if (collision.length > 0) {
                            collision[0].delete();
                            console.log("delete");
                        }
                        this.state.dragging.state.position.x = x;
                        this.state.dragging.state.position.y = y;
                        this.state.dragging.params.square = square;
                        if (this.state.puzzle.solution.length > 0) {
                            let next_move = this.state.puzzle.solution.shift();
                            this.otherPlayerMove(next_move);
                        }
                        else {
                            this.showNextPuzzle();
                            main_1.g.state.globals.rating += 25;
                            this.state.number_correct += 1;
                            if (this.state.number_correct == 5) {
                                this.game.loadRoomString("test");
                            }
                        }
                    }
                    else {
                        console.log("incorrect");
                        this.state.dragging.state.position.x = this.state.start_drag.x;
                        this.state.dragging.state.position.y = this.state.start_drag.y;
                    }
                }
                this.state.dragging = null;
                this.state.start_drag = null;
            }
        });
        this.bindControl("KeyX", controls_1.exec_type.once, () => __awaiter(this, void 0, void 0, function* () {
        }));
    }
    showNextPuzzle() {
        return __awaiter(this, void 0, void 0, function* () {
            let puzzles = main_1.g.state.globals.puzzles;
            let rating = main_1.g.state.globals.rating;
            let next_puzzle;
            do {
                next_puzzle = main_1.getNextPuzzle(puzzles, rating, 50);
            } while (next_puzzle.solution.length <= 2);
            let chess = new chess_js_1.Chess(next_puzzle.fen);
            let board = chess.board();
            console.log(chess.ascii());
            console.log(chess.fen());
            this.getObjByTag("piece").forEach(p => p.delete());
            this.state.perspective = chess.turn();
            this.state.puzzle = next_puzzle;
            if (chess.turn() === "b") {
                board.reverse();
                //board = board.map(row => row.reverse());
            }
            else {
                board = board.map(row => row.reverse());
            }
            console.log(next_puzzle.solution);
            for (let y = 0; y < 8; y++) {
                for (let x = 0; x < 8; x++) {
                    if (board[y][x]) {
                        let type = board[y][x].type;
                        if (board[y][x].color === "w") {
                            type = type.toUpperCase();
                        }
                        yield this.addItem(new piece_1.piece({
                            position: math_1.Vec.create((x - 4) * 178.571429 + 90, (y - 4) * 178.571429 + 90),
                            scaling: {
                                width: 8,
                                height: 8
                            }
                        }, {
                            type: type,
                            square: board[y][x].square
                        }));
                    }
                }
            }
            let next_move = this.state.puzzle.solution.shift();
            this.otherPlayerMove(next_move);
        });
    }
    squareToPosition(square) {
        let rows = ["a", "b", "c", "d", "e", "f", "g", "h"];
        let cols = ["1", "2", "3", "4", "5", "6", "7", "8"];
        if (this.state.perspective == "w") {
            rows = rows.reverse();
            cols = cols.reverse();
        }
        let x = rows.indexOf(square[0]);
        let y = cols.indexOf(square[1]);
        return math_1.Vec.create((x - 4) * 178.571429 + 90, (y - 4) * 178.571429 + 90);
    }
    otherPlayerMove(move) {
        let start = this.squareToPosition(move.substring(0, 2));
        let end = this.squareToPosition(move.substring(2, 4));
        let ai_piece = this.checkObjectsPointInclusive(start, ["piece"])[0];
        let taken_piece = this.checkObjectsPointInclusive(end, ["piece"]);
        if (taken_piece.length > 0) {
            taken_piece[0].delete();
        }
        this.movePiece(ai_piece, end);
    }
    movePiece(piece, target) {
        let counter = 0;
        let diff = math_1.Vec.sub(target, piece.state.position);
        console.log(diff);
        let interval = setInterval(() => {
            let offset = math_1.Vec.func(diff, (v) => v / 60);
            piece.state.position = math_1.Vec.add(piece.state.position, offset);
            counter++;
            let current_diff = math_1.Vec.distance(piece.state.position, target);
            if (current_diff < 5) {
                clearInterval(interval);
            }
        }, 80 / 60);
    }
    registerParticles() {
    }
    registerAudio() {
        this.audio.add("russian", "./sounds/Russian.mpga");
    }
    initialize() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.showNextPuzzle();
            this.audio.play("russian", 1);
            setInterval(() => {
                if (this.valid) {
                    this.audio.play("russian", 1);
                }
            }, this.audio.get("russian").duration * 1000);
        });
    }
    statef(delta_time) {
        super.statef(delta_time);
        if (this.state.dragging) {
            let mouse = controls_1.Poll_Mouse(this.cameras[0]);
            this.state.dragging.state.position = mouse;
        }
    }
}
exports.boardView = boardView;


/***/ }),

/***/ "./src/game/rooms/rooms.ts":
/*!*********************************!*\
  !*** ./src/game/rooms/rooms.ts ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.rooms = void 0;
const boardView_1 = __webpack_require__(/*! ./boardView */ "./src/game/rooms/boardView.ts");
const test_1 = __webpack_require__(/*! ./test */ "./src/game/rooms/test.ts");
exports.rooms = {
    boardView: boardView_1.boardView,
    test: test_1.test,
};


/***/ }),

/***/ "./src/game/rooms/test.json":
/*!**********************************!*\
  !*** ./src/game/rooms/test.json ***!
  \**********************************/
/*! exports provided: objects, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"objects\":[{\"type\":\"main_character\",\"state\":{\"position\":{\"x\":698.4441777562859,\"y\":-0.7518356170508014}}},{\"type\":\"wood_floor\",\"state\":{\"position\":{\"x\":0,\"y\":0},\"scaling\":{\"width\":10,\"height\":10}}},{\"type\":\"test_char\",\"state\":{\"position\":{\"x\":0,\"y\":0}}}]}");

/***/ }),

/***/ "./src/game/rooms/test.ts":
/*!********************************!*\
  !*** ./src/game/rooms/test.ts ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.test = void 0;
const room_1 = __webpack_require__(/*! lib/room */ "./src/lib/room.ts");
const config = __webpack_require__(/*! ./test.json */ "./src/game/rooms/test.json");
const top_down_1 = __webpack_require__(/*! game/rooms/abstract/top_down */ "./src/game/rooms/abstract/top_down.ts");
let cfig = config;
class test extends top_down_1.top_down {
    constructor(game) {
        super(game, cfig);
        this.background_url = "./sprites/Error.png";
        this.render = true;
        this.proximity_map = new room_1.proximity_matrix(4000, 9);
    }
    registerControls() {
        super.registerControls();
    }
    registerParticles() {
    }
    statef(delta_time) {
        super.statef(delta_time);
    }
}
exports.test = test;


/***/ }),

/***/ "./src/lib/audio.ts":
/*!**************************!*\
  !*** ./src/lib/audio.ts ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.audio = void 0;
const debug_1 = __webpack_require__(/*! ./debug */ "./src/lib/debug.ts");
const van_1 = __webpack_require__(/*! ../van */ "./src/van.ts");
class audio {
    constructor() {
        this.sounds = {};
    }
    add(name, url) {
        let p = url;
        if (van_1.DEBUG) {
            p = debug_1.path.join(debug_1.root_path, url);
        }
        console.log(p);
        this.sounds[name] = new Audio(p);
        console.log(this.sounds[name]);
    }
    load() {
        return __awaiter(this, void 0, void 0, function* () {
            let keys = Object.keys(this.sounds);
            let promises = keys.map((key) => {
                return new Promise((resolve, reject) => {
                    this.sounds[key].addEventListener("canplaythrough", (e) => {
                        resolve();
                    });
                });
            });
            try {
                let x = yield Promise.all(promises);
                return (x);
            }
            catch (e) {
                console.log(e);
            }
        });
    }
    stop(name) {
        this.sounds[name].pause();
        this.sounds[name].currentTime = 0;
    }
    cleanup() {
        for (let key of Object.keys(this.sounds)) {
            this.stop(key);
        }
    }
    pause(name) {
        this.sounds[name].pause();
    }
    get(name) {
        return this.sounds[name];
    }
    play(name, volume) {
        let a = this.sounds[name];
        console.log(a.duration);
        a.pause();
        a.currentTime = 0;
        a.volume = volume;
        a.play();
    }
}
exports.audio = audio;


/***/ }),

/***/ "./src/lib/collision.ts":
/*!******************************!*\
  !*** ./src/lib/collision.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.velocityCollisionCheck = exports.check_collisions = exports.check_all_collisions = exports.check_all_objects = exports.getEncompassingBox = exports.boxCollidesWithBox = exports.pointCollidesWithBox = void 0;
const object_1 = __webpack_require__(/*! ../lib/object */ "./src/lib/object.ts");
var direction;
(function (direction) {
    direction[direction["left"] = 0] = "left";
    direction[direction["right"] = 1] = "right";
    direction[direction["up"] = 2] = "up";
    direction[direction["down"] = 3] = "down";
})(direction || (direction = {}));
function pointCollidesWithBox(point, box) {
    return boxCollidesWithBox({ x: point.x, y: point.y, width: 0, height: 0 }, box);
}
exports.pointCollidesWithBox = pointCollidesWithBox;
function boxCollidesWithBox(box1, box2) {
    let collides_horrizontally = false, collides_vertically = false;
    let object_bounds = {
        left: box1.x - box1.width / 2,
        right: box1.x + box1.width / 2,
        top: box1.y + box1.height / 2,
        bottom: box1.y - box1.height / 2
    };
    let other_object_bounds = {
        left: box2.x - box2.width / 2,
        right: box2.x + box2.width / 2,
        top: box2.y + box2.height / 2,
        bottom: box2.y - box2.height / 2
    };
    //We can compare the sides of the boxes to see if they overlap
    //We check once for hoizontal overlap, then vertical.
    if ((object_bounds.left >= other_object_bounds.left && object_bounds.left < other_object_bounds.right) || (other_object_bounds.left > object_bounds.left && other_object_bounds.left < object_bounds.right)) {
        collides_horrizontally = true;
    }
    else {
        return false;
    }
    if ((object_bounds.bottom >= other_object_bounds.bottom && object_bounds.bottom < other_object_bounds.top) || (other_object_bounds.bottom > object_bounds.bottom && other_object_bounds.bottom < object_bounds.top)) {
        collides_vertically = true;
    }
    else {
        return false;
    }
    return collides_horrizontally && collides_vertically;
}
exports.boxCollidesWithBox = boxCollidesWithBox;
function getEncompassingBox(objects) {
    let first_object = objects[0].getBoundingBox();
    let max_y = first_object.top_right.y;
    let max_x = first_object.top_right.x;
    let min_y = first_object.bottom_left.y;
    let min_x = first_object.bottom_left.x;
    for (let a = 1; a < objects.length; a++) {
        let object = objects[a].getBoundingBox();
        if (object.top_right.y > max_y)
            max_y = object.top_right.y;
        if (object.top_right.x > max_x)
            max_x = object.top_right.x;
        if (object.bottom_left.y < min_y)
            min_y = object.bottom_left.y;
        if (object.bottom_left.x < min_x)
            min_x = object.bottom_left.x;
    }
    return {
        x: min_x + (max_x - min_x) / 2,
        y: min_y + (max_y - min_y) / 2,
        height: max_y - min_y,
        width: max_x - min_x
    };
}
exports.getEncompassingBox = getEncompassingBox;
function check_all_objects(c, objs, exemption = []) {
    return objs.filter((a) => (!exemption.some((b) => a.tags.has(b)) && a.collidesWithBox(c)));
}
exports.check_all_objects = check_all_objects;
function check_all_collisions(c, objs, exemption = []) {
    let matched = [];
    for (let a of objs) {
        if (!exemption.some((b) => a.tags.has(b)) && a.collision && a.collidesWithBox(c)) {
            matched.push(a);
        }
    }
    return matched;
}
exports.check_all_collisions = check_all_collisions;
//Checks up to the first collision
function check_collisions(c, objs, exemption) {
    for (let a of objs) {
        if (a.id !== exemption && a.collision && a.collidesWithBox(c)) {
            return a;
        }
    }
    return null;
}
exports.check_collisions = check_collisions;
function velocity_max(velocity, box, objs, exemption, dir) {
    let collision = check_collisions(box, objs, exemption);
    if (collision == null) {
        return velocity;
    }
    else {
        let collider = collision;
        let origin = object_1.getId(objs, exemption);
        let orig_st = origin.state;
        let collider_st = collider.state;
        let orig_col = origin.getFullCollisionBox();
        let collider_col = collider.getFullCollisionBox();
        if (dir == direction.left) {
            return (orig_col.x - orig_col.width / 2) - (collider_col.x + collider_col.width / 2);
        }
        else if (dir == direction.right) {
            return (collider_col.x - collider_col.width / 2) - (orig_col.x + orig_col.width / 2);
        }
        else if (dir == direction.down) {
            return (orig_col.y - orig_col.height / 2) - (collider_col.y + collider_col.height / 2);
        }
        else if (dir == direction.up) {
            return (collider_col.y - collider_col.height / 2) - (orig_col.y + orig_col.height / 2);
        }
    }
}
function velocityCollisionCheck(object, list) {
    list = [...list];
    let ob = object;
    let st = object.state;
    let x_vel = st.velocity.x;
    let y_vel = st.velocity.y;
    if (x_vel == 0 && y_vel == 0)
        return;
    if (!ob.collision) {
        ob.state.position.x += ob.state.velocity.x;
        ob.state.position.y += ob.state.velocity.y;
        return;
    }
    let col_box = ob.getFullCollisionBox();
    if (x_vel > 0) {
        let box = {
            x: col_box.x + col_box.width / 2 + x_vel / 2,
            y: col_box.y,
            width: x_vel,
            height: col_box.height
        };
        let vel = velocity_max(st.velocity.x, box, list, ob.id, direction.right);
        if (vel > 0) {
            st.position.x = st.position.x + vel;
        }
        else {
            st.velocity.x = 0;
        }
    }
    else if (x_vel < 0) {
        let box = {
            x: x_vel / 2 + col_box.x - col_box.width / 2,
            y: col_box.y,
            width: -1 * x_vel,
            height: col_box.height
        };
        let vel = velocity_max(st.velocity.x, box, list, ob.id, direction.left);
        if (vel < 0) {
            st.position.x = st.position.x + vel;
        }
        else {
            st.velocity.x = 0;
        }
    }
    if (y_vel > 0) {
        let box = {
            x: col_box.x,
            y: col_box.y + col_box.height / 2 + y_vel / 2,
            width: col_box.width,
            height: y_vel
        };
        let vel = velocity_max(st.velocity.y, box, list, ob.id, direction.up);
        if (vel > 0) {
            st.position.y = st.position.y + vel;
        }
        else {
            st.velocity.y = 0;
        }
    }
    else if (y_vel < 0) {
        let box = {
            x: col_box.x,
            y: y_vel / 2 + col_box.y - col_box.height / 2,
            width: col_box.width,
            height: -1 * y_vel
        };
        let vel = velocity_max(st.velocity.y, box, list, ob.id, direction.down);
        if (vel < 0) {
            st.position.y = st.position.y + vel;
        }
        else {
            st.velocity.y = 0;
        }
    }
}
exports.velocityCollisionCheck = velocityCollisionCheck;


/***/ }),

/***/ "./src/lib/controls.ts":
/*!*****************************!*\
  !*** ./src/lib/controls.ts ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Bind = exports.Unbind = exports.ExecuteRepeatBinds = exports.Poll_Mouse = exports.held_keys = exports.handleGamepad = exports.within_Canvas = exports.debug_binds = exports.exec_type = exports.btype = void 0;
const main_1 = __webpack_require__(/*! ../game/main */ "./src/game/main.ts");
const van_1 = __webpack_require__(/*! ../van */ "./src/van.ts");
const debug_1 = __webpack_require__(/*! ./debug */ "./src/lib/debug.ts");
var btype;
(function (btype) {
    btype[btype["mouse"] = 0] = "mouse";
    btype[btype["keyboard"] = 1] = "keyboard";
    btype[btype["gamepad"] = 2] = "gamepad";
})(btype = exports.btype || (exports.btype = {}));
var exec_type;
(function (exec_type) {
    exec_type[exec_type["once"] = 0] = "once";
    exec_type[exec_type["repeat"] = 1] = "repeat";
})(exec_type = exports.exec_type || (exports.exec_type = {}));
let id = 0;
let x = 0;
let y = 0;
let last_x = 0;
let last_y = 0;
let binds = {};
exports.debug_binds = [];
let mouseBinds = {};
let bind_count = 0;
let all_binds = [];
let repeat_binds = [];
let target = document.getElementById("target");
/*
export function init_click_handler(game:game<unknown>){
  window.addEventListener("click",(e)=>{
    
    let mouse = Poll_Mouse(game.state.cameras[0]);
    if(!mouse){
      return
    }
    let box:collision_box = {
      x:mouse.x,
      y:mouse.y,
      height:1,
      width:1
    };
    
  let d:bind[];
  if(DEBUG){
    if(debug_state.last_clicked && debug_state.last_clicked.id == "debug_target"){
      d = [...debug_binds];
    }
    else if(!PAUSED && debug_state.last_clicked && debug_state.last_clicked.id == "target"){
      d= [...all_binds]
    }
    else{
      d = [];
    }
  }
  else{
    d = [...all_binds];
  }
    for(let a = 0;a < d.length;a++){
      let selected = d[a];
      if(selected.type === btype.mouse && selected.key === "mouse1" && selected.execute == exec_type.once){
        if(selected.obj !== undefined){
          if(selected.obj.collidesWithBox(box)){
            selected.function();
          }
        }
        else{
          selected.function();
        }
      }
    }
  })
}
*/
function within_Canvas(canvas) {
    let wratio = parseFloat(window.getComputedStyle(canvas).width) / van_1.GetViewportDimensions().width;
    let vratio = parseFloat(window.getComputedStyle(canvas).height) / van_1.GetViewportDimensions().height;
    let bounds = canvas.getBoundingClientRect();
    if (x > bounds.left && x < bounds.right && y < bounds.bottom && y > bounds.top) {
        return true;
    }
    return false;
}
exports.within_Canvas = within_Canvas;
let binding_map = {};
let pressBind = (key, hud_layer = false) => {
    let on_names;
    let off_names;
    let base;
    let selected_bind_map;
    if (key.slice(-4) === "down") {
        base = key.substring(0, key.length - 4);
        on_names = [base, key];
        off_names = [`${base}up`];
    }
    else if (key.slice(-2) === "up") {
        base = key.substring(0, key.length - 2);
        on_names = [key];
        off_names = [`${base}down`, base];
    }
    else {
        throw new Error("Attempted to activate invalid bind.");
    }
    const clicked_on = (target) => (debug_1.debug_state.last_clicked && debug_1.debug_state.last_clicked.id == target);
    const valid_mouse_click = (bind, index) => {
        return bind.type != btype.mouse || (within_Canvas(main_1.g.state.canvases[index]) && (bind.obj == undefined || (bind.obj && bind.obj.info.on_hud_layer == hud_layer)));
    };
    for (let keyname of on_names) {
        if (keyname == base) {
            exports.held_keys[keyname] = true;
        }
        let selected_binds = binding_map[keyname];
        if (selected_binds !== undefined) {
            for (let bind of selected_binds) {
                if ((van_1.DEBUG && bind.debug && clicked_on("debug_target") && valid_mouse_click(bind, 1))
                    ||
                        (van_1.DEBUG && (!van_1.PAUSED && clicked_on("target") && valid_mouse_click(bind, 0)))
                    ||
                        !van_1.DEBUG && valid_mouse_click(bind, 0)) {
                    bind.executed = true;
                    if (bind.execute == exec_type.repeat) {
                        bind.repeat_timer.active = true;
                    }
                    else {
                        bind.function();
                    }
                }
            }
        }
    }
    for (let keyname of off_names) {
        if (keyname == base) {
            exports.held_keys[keyname] = false;
        }
        let selected_binds = binding_map[keyname];
        if (selected_binds !== undefined) {
            for (let bind of selected_binds) {
                bind.executed = false;
                if (bind.execute == exec_type.repeat) {
                    bind.repeat_timer.active = false;
                }
            }
        }
    }
    for (let repeat_bind of repeat_binds) {
        let bind = repeat_bind.bind;
        if (on_names.includes(repeat_bind.bind.key)) {
            if ((van_1.DEBUG && bind.debug && clicked_on("debug_target") && valid_mouse_click(bind, 1))
                ||
                    (van_1.DEBUG && (!van_1.PAUSED && clicked_on("target") && valid_mouse_click(bind, 0)))
                ||
                    !van_1.DEBUG && valid_mouse_click(bind, 0)) {
                repeat_bind.active = true;
            }
        }
        else if (off_names.includes(repeat_bind.bind.key)) {
            repeat_bind.active = false;
        }
    }
};
let xbox_key = ["A", "B", "X", "Y", "LB", "RB", "LT", "RT", "Back", "Select", "ThumbLeftDown", "ThumbRightDown", "PadUp", "PadDown", "PadLeft", "PadRight", "Start"];
let xbox_keys_state = [];
xbox_key.forEach((key) => {
    xbox_keys_state.push({
        key,
        last_state: 0
    });
});
function handleGamepad(gamepad) {
    if (binding_map["GamepadLeftThumb"] != undefined) {
        for (let bind of binding_map["GamepadLeftThumb"]) {
            bind.function(gamepad.axes[0], gamepad.axes[1] * -1);
        }
    }
    if (binding_map["GamepadRightThumb"] != undefined) {
        for (let bind of binding_map["GamepadRightThumb"]) {
            bind.function(gamepad.axes[2], gamepad.axes[3] * -1);
        }
    }
    for (let [i, button] of gamepad.buttons.entries()) {
        let button_entry = xbox_keys_state[i];
        if (button.value > 0 && button_entry.last_state == 0) {
            //Button Down
            pressBind(`Gamepad${button_entry.key}down`);
        }
        else if (button.value == 0 && xbox_keys_state[i].last_state > 0) {
            pressBind(`Gamepad${button_entry.key}up`);
        }
        button_entry.last_state = button.value;
    }
}
exports.handleGamepad = handleGamepad;
let was_valid = false;
window.addEventListener("mousedown", (e) => {
    e.preventDefault();
    let hud_clicked = false;
    for (let camera of main_1.g.getRoom().cameras) {
        let mouse = Poll_Mouse(camera, true);
        if (mouse && camera.hud) {
            for (let obj of camera.hud.graphic_elements.filter((obj) => obj.hud_clickable)) {
                if (obj.collidesWithBox({ x: mouse.x, y: mouse.y, width: 0, height: 0 })) {
                    pressBind("mouse" + e.button + "down", true);
                    return;
                }
            }
        }
    }
    pressBind("mouse" + e.button + "down");
});
window.addEventListener("mouseup", (e) => {
    e.preventDefault();
    pressBind(`mouse${e.button}up`);
});
exports.held_keys = {};
window.addEventListener("wheel", (e) => {
    let code;
    e.preventDefault();
    if (e.deltaY < 0) {
        code = "scrollup";
    }
    else if (e.deltaY > 0) {
        code = "scrolldown";
    }
    pressBind(code);
});
window.addEventListener("keydown", (e) => {
    if (e.code == "Tab") {
        e.preventDefault();
    }
    pressBind(`${e.code}down`);
});
window.addEventListener("keyup", (e) => {
    pressBind(`${e.code}up`);
});
let tracker = document.getElementById("target");
window.addEventListener("mousemove", (e) => {
    var rect = e.target.getBoundingClientRect();
    //console.log(e.target)
    last_x = x;
    last_y = y;
    x = e.clientX; //x position within the element.
    y = e.clientY; //y position within the element.
});
function Poll_Mouse(camera, hud_layer = false, canvas = main_1.g.state.canvases[0]) {
    let height = van_1.GetViewportDimensions().height;
    let wratio = parseFloat(window.getComputedStyle(canvas).width) / van_1.GetViewportDimensions().width;
    let vratio = parseFloat(window.getComputedStyle(canvas).height) / van_1.GetViewportDimensions().height;
    let bounds = canvas.getBoundingClientRect();
    if (x > bounds.left && x < bounds.right && y < bounds.bottom && y > bounds.top) {
        if (hud_layer) {
            return {
                x: (x - bounds.left) / wratio,
                y: ((height - (y - bounds.top) / vratio) - camera.state.viewport.y)
            };
        }
        return ({
            x: ((x - bounds.left - camera.state.viewport.x) / wratio / camera.state.scaling + camera.state.position.x - camera.state.dimensions.width / camera.state.scaling / 2),
            y: ((height - (y - bounds.top) / vratio) / camera.state.scaling + camera.state.position.y - camera.state.dimensions.height / camera.state.scaling / 2 - camera.state.viewport.y)
        });
    }
    return undefined;
}
exports.Poll_Mouse = Poll_Mouse;
function ExecuteRepeatBinds(b) {
    for (let a of repeat_binds) {
        if (a.bind.execute === exec_type.repeat && a.timer == 0 && a.active) {
            a.bind.function();
        }
        if (a.active || (!a.active && a.timer != 0))
            a.timer += b;
        if (a.timer > a.interval) {
            a.timer = 0;
        }
    }
}
exports.ExecuteRepeatBinds = ExecuteRepeatBinds;
function Unbind(bind_id) {
    for (let key of Object.keys(binding_map)) {
        for (let a = 0; a < binding_map[key].length; a++) {
            if (binding_map[key][a].id == bind_id) {
                binding_map[key].splice(a, 1);
                break;
            }
        }
    }
    for (let a = 0; a < repeat_binds.length; a++) {
        if (repeat_binds[a].bind.id == bind_id) {
            repeat_binds.splice(a, 1);
            break;
        }
    }
}
exports.Unbind = Unbind;
function Bind(keyname, func, type, interval, debug, obj) {
    let bind_type = btype.keyboard;
    if (keyname.slice(0, 5) === "mouse" || keyname.slice(0, 6) === "scroll") {
        bind_type = btype.mouse;
    }
    else if (keyname.slice(0, 7) == "Gamepad") {
        bind_type = btype.gamepad;
    }
    let b = {
        key: keyname,
        type: bind_type,
        debug,
        id,
        function: func,
        execute: type,
        executed: false,
        interval,
        obj
    };
    if (type == exec_type.repeat) {
        b.repeat_timer = {
            bind: b,
            timer: 0,
            interval,
            active: false
        };
        repeat_binds.push(b.repeat_timer);
    }
    if (binding_map[keyname] == undefined) {
        binding_map[keyname] = [];
    }
    binding_map[keyname].push(b);
    id++;
    return id - 1;
}
exports.Bind = Bind;


/***/ }),

/***/ "./src/lib/debug.ts":
/*!**************************!*\
  !*** ./src/lib/debug.ts ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.debug_setup = exports.debug_state = exports.debug_update_prefabs = exports.debug_update_obj_list = exports.debug_update_properties_element = exports.debug_update_room_list = exports.debug_statef = exports.Debug_hud = exports.renderer_path = exports.root_path = exports.project_path = exports.path = void 0;
const van_1 = __webpack_require__(/*! ../van */ "./src/van.ts");
let fs;
let ipcRenderer;
const prefabs_1 = __webpack_require__(/*! ../game/objects/prefabs */ "./src/game/objects/prefabs.ts");
exports.project_path = "";
exports.root_path = "";
exports.renderer_path = "./renderer.js";
if (van_1.DEBUG) {
    exports.path = window.require("path");
    fs = window.require("fs");
    ipcRenderer = window.require("electron").ipcRenderer;
    exports.project_path = ipcRenderer.sendSync('path-request', 'ping')[0];
    exports.root_path = exports.path.join(exports.project_path, "..");
    exports.renderer_path = exports.path.join(exports.root_path, "../../target/renderer.js");
}
const object_template_1 = __webpack_require__(/*! ./templates/object_template */ "./src/lib/templates/object_template.ts");
const room_template_1 = __webpack_require__(/*! ./templates/room_template */ "./src/lib/templates/room_template.ts");
const main_1 = __webpack_require__(/*! ../game/main */ "./src/game/main.ts");
const rooms_1 = __webpack_require__(/*! ../game/rooms/rooms */ "./src/game/rooms/rooms.ts");
const controls_1 = __webpack_require__(/*! ../lib/controls */ "./src/lib/controls.ts");
const hud_1 = __webpack_require__(/*! ../lib/hud */ "./src/lib/hud.ts");
const render_1 = __webpack_require__(/*! ../lib/render */ "./src/lib/render.ts");
class Debug_hud extends hud_1.HUD {
    setTextElements() {
        return [
            new hud_1.Text({
                position: {
                    x: 10,
                    y: van_1.viewport.height - 24
                },
                size: 22,
                font: "Alata",
                color: "white",
                align: "left",
                scaling: 1
            }, () => exports.debug_state.render_delta_time > 0 ? Math.round(1000 / exports.debug_state.render_delta_time) + "" : ""),
            new hud_1.Text({
                position: {
                    x: 10,
                    y: 10
                },
                size: 22,
                font: "Alata",
                color: "white",
                align: "left",
                scaling: 1
            }, () => `X:${exports.debug_state.camera.state.position.x.toFixed(0)}`),
            new hud_1.Text({
                position: {
                    x: 10,
                    y: 32
                },
                size: 22,
                font: "Alata",
                color: "white",
                align: "left",
                scaling: 1
            }, () => `Y:${exports.debug_state.camera.state.position.y.toFixed(0)}`),
            new hud_1.Text({
                position: {
                    x: van_1.viewport.width - 10,
                    y: 32
                },
                size: 22,
                font: "Alata",
                color: "white",
                align: "right",
                scaling: 1
            }, () => {
                let mouse = controls_1.Poll_Mouse(exports.debug_state.camera, false, exports.debug_state.target);
                if (mouse) {
                    return `${mouse.x.toFixed(0)}:X`;
                }
                return `:X`;
            }),
            new hud_1.Text({
                position: {
                    x: van_1.viewport.width - 10,
                    y: 10
                },
                size: 22,
                font: "Alata",
                color: "white",
                align: "right",
                scaling: 1
            }, () => {
                let mouse = controls_1.Poll_Mouse(exports.debug_state.camera, false, exports.debug_state.target);
                if (mouse) {
                    return `${mouse.y.toFixed(0)}:Y`;
                }
                return `:Y`;
            }),
            new hud_1.Text({
                position: {
                    x: van_1.viewport.width - 10,
                    y: van_1.viewport.height - 24
                },
                size: 22,
                font: "Alata",
                color: "white",
                align: "right",
                scaling: 1
            }, () => {
                return `${main_1.g.state.current_room.constructor.name}.ts`;
            })
        ];
    }
}
exports.Debug_hud = Debug_hud;
function debug_statef(t) {
    let mouse = controls_1.Poll_Mouse(exports.debug_state.camera, false, exports.debug_state.target);
    if (exports.debug_state.camera.hud) {
        exports.debug_state.camera.hud.statef(t);
    }
    if (!van_1.PAUSED) {
        debug_update_properties_element();
    }
    if (mouse) {
        if (exports.debug_state.selected_element) {
            if (van_1.PAUSED && controls_1.held_keys["ControlLeft"] && exports.debug_state.current_action.property == "scaling") {
                let dist = {
                    x: Math.abs(mouse.x - exports.debug_state.selected_element.state.position.x),
                    y: Math.abs(mouse.y - exports.debug_state.selected_element.state.position.y)
                };
                exports.debug_state.selected_element.state.scaling.width = (2 * dist.x) / exports.debug_state.selected_element.width;
                exports.debug_state.selected_element.state.scaling.height = (2 * dist.y) / exports.debug_state.selected_element.height;
            }
            else {
                let st = exports.debug_state.selected_element.state;
                st.position.x = mouse.x - exports.debug_state.selected_element_offset.x,
                    st.position.y = mouse.y - exports.debug_state.selected_element_offset.y;
            }
        }
        if (van_1.PAUSED && exports.debug_state.rotation_element) {
            exports.debug_state.rotation_element.state.rotation = exports.debug_state.rotation_element.angleTowardsPoint(mouse);
        }
        if (exports.debug_state.middle_position) {
            let diff_y = mouse.y - exports.debug_state.middle_position.y;
            let diff_x = mouse.x - exports.debug_state.middle_position.x;
            exports.debug_state.camera.state.position.x = exports.debug_state.camera.state.position.x + -1 * diff_x;
            exports.debug_state.camera.state.position.y = exports.debug_state.camera.state.position.y + -1 * diff_y;
        }
    }
}
exports.debug_statef = debug_statef;
function debug_update_room_list() {
    let list = document.getElementById("room_list");
    list.textContent = '';
    for (let room_name of Object.keys(rooms_1.rooms)) {
        let para = document.createElement("p");
        para.appendChild(document.createTextNode(room_name));
        para.classList.add("room_list_item");
        para.addEventListener("click", (e) => {
            main_1.g.loadRoomString(room_name);
        });
        list.appendChild(para);
    }
}
exports.debug_update_room_list = debug_update_room_list;
let properties_elements = undefined;
if (van_1.DEBUG) {
    properties_elements = {
        pos_x: document.getElementById("pos_x"),
        pos_y: document.getElementById("pos_y"),
        vel_x: document.getElementById("vel_x"),
        vel_y: document.getElementById("vel_y"),
        rot: document.getElementById("rot"),
        sca_x: document.getElementById("sca_x"),
        sca_y: document.getElementById("sca_y"),
        render: document.getElementById("render"),
        collision: document.getElementById("collision"),
        tags: document.getElementById("tags"),
        layer: document.getElementById("layer")
    };
    let inputs = document.getElementsByTagName("input");
    for (let a = 0; a < inputs.length; a++) {
        inputs[a].addEventListener("click", (e) => {
            inputs[a].focus();
        });
    }
    let focused;
    let debug_target = document.getElementById("debug_target");
    debug_target.addEventListener("click", (e) => {
        for (let a = 0; a < inputs.length; a++) {
            inputs[a].blur();
        }
    });
    let target = document.getElementById("target");
    target.addEventListener("click", (e) => {
        for (let a = 0; a < inputs.length; a++) {
            inputs[a].blur();
        }
    });
    properties_elements.pos_x.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        let new_val = parseFloat(properties_elements.pos_x.value) || 0;
        exports.debug_state.actions_stack.push({
            property: "position",
            element: ele,
            new: JSON.stringify({ x: new_val, y: ele.state.position.y }),
            old: JSON.stringify(ele.state.position)
        });
        ele.state.position.x = new_val;
    });
    properties_elements.pos_y.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        let new_val = parseFloat(properties_elements.pos_y.value) || 0;
        exports.debug_state.actions_stack.push({
            property: "position",
            element: ele,
            new: JSON.stringify({ x: ele.state.position.x, y: new_val }),
            old: JSON.stringify(ele.state.position)
        });
        ele.state.position.y = new_val;
    });
    properties_elements.vel_x.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        ele.state.velocity.x = parseFloat(properties_elements.vel_x.value) || 0;
    });
    properties_elements.vel_y.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        ele.state.velocity.y = parseFloat(properties_elements.vel_y.value) || 0;
    });
    properties_elements.rot.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        let new_val = parseFloat(properties_elements.rot.value) || 0;
        exports.debug_state.actions_stack.push({
            property: "rotation",
            element: ele,
            new: JSON.stringify(new_val),
            old: JSON.stringify(ele.state.rotation)
        });
        ele.state.rotation = new_val;
    });
    properties_elements.sca_x.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        let new_val = parseFloat(properties_elements.sca_x.value) || 0;
        exports.debug_state.actions_stack.push({
            property: "scaling",
            element: ele,
            new: JSON.stringify({ width: new_val, height: ele.state.scaling.height }),
            old: JSON.stringify(ele.state.scaling)
        });
        ele.state.scaling.width = new_val;
    });
    properties_elements.sca_y.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        let new_val = parseFloat(properties_elements.sca_y.value) || 0;
        exports.debug_state.actions_stack.push({
            property: "scaling",
            element: ele,
            new: JSON.stringify({ width: ele.state.scaling.width, height: new_val }),
            old: JSON.stringify(ele.state.scaling)
        });
        ele.state.scaling.height = new_val;
    });
    properties_elements.render.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        ele.render = properties_elements.render.checked;
    });
    properties_elements.collision.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        ele.collision = properties_elements.collision.checked;
    });
    properties_elements.tags.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        ele.tags = new Set(properties_elements.tags.value.split(","));
    });
    properties_elements.layer.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        ele.layer = parseInt(properties_elements.layer.value);
    });
    document.getElementById("delete_element").addEventListener("click", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        ele.delete();
    });
}
function debug_update_properties_element() {
    if (exports.debug_state.selected_properties_element) {
        let ele = exports.debug_state.selected_properties_element;
        document.getElementById("obj_name").innerHTML = ele.constructor.name;
        properties_elements.pos_x.value = "" + ele.state.position.x.toFixed(2);
        properties_elements.pos_y.value = "" + ele.state.position.y.toFixed(2);
        properties_elements.vel_x.value = "" + ele.state.velocity.x.toFixed(2);
        properties_elements.vel_y.value = "" + ele.state.velocity.y.toFixed(2);
        properties_elements.rot.value = "" + ele.state.rotation.toFixed(2);
        properties_elements.sca_x.value = "" + ele.state.scaling.width.toFixed(2);
        properties_elements.sca_y.value = "" + ele.state.scaling.height.toFixed(2);
        properties_elements.tags.value = "" + Array.from(ele.tags).join(",");
        properties_elements.render.checked = ele.render;
        properties_elements.collision.checked = ele.collision;
        properties_elements.layer.value = "" + ele.layer;
        let list = document.getElementById("params_list");
        list.textContent = '';
        for (let k of Object.keys(ele.params)) {
            let p = document.createElement("p");
            let span = document.createElement("span");
            span.appendChild(document.createTextNode(k));
            let input = document.createElement("input");
            if (typeof ele.params[k] === "boolean") {
                input.setAttribute("type", "checkbox");
            }
            else if (typeof ele.params[k] === "number") {
                input.setAttribute("type", "number");
            }
            else if (typeof ele.params[k] === "string") {
                input.setAttribute("type", "text");
            }
            input.setAttribute("id", k);
            input.setAttribute("value", (JSON.stringify(ele.params[k])));
            input.addEventListener("click", (e) => {
                input.focus();
            });
            input.addEventListener("input", (e) => {
                let ele = exports.debug_state.selected_properties_element;
                let val = input.value;
                if (!isNaN(val)) {
                    ele.params[k] = parseFloat(val);
                }
                else if (val == "true") {
                    ele.params[k] = true;
                }
                else if (val == "false") {
                    ele.params[k] = false;
                }
                else {
                    try {
                        let parsed = JSON.parse(val);
                        ele.params[k] = JSON.parse(val);
                    }
                    catch (e) {
                    }
                }
            });
            p.appendChild(span);
            p.append(input);
            list.append(p);
        }
    }
}
exports.debug_update_properties_element = debug_update_properties_element;
function debug_update_obj_list() {
    let list = document.getElementById("objects_list");
    list.textContent = '';
    if (main_1.g.getRoom()) {
        for (let obj of main_1.g.getRoom().objects.slice().reverse()) {
            let para = document.createElement("p");
            para.appendChild(document.createTextNode(obj.constructor.name));
            para.classList.add("object_list_item");
            para.addEventListener("click", (e) => {
                if (exports.debug_state.selected_properties_element == obj) {
                    exports.debug_state.camera.state.position = Object.assign({}, obj.state.position);
                }
                else {
                    exports.debug_state.selected_properties_element = obj;
                    debug_update_properties_element();
                }
            });
            list.appendChild(para);
        }
    }
}
exports.debug_update_obj_list = debug_update_obj_list;
function debug_update_prefabs() {
    return __awaiter(this, void 0, void 0, function* () {
        let pres = Object.keys(prefabs_1.prefabs).map((o) => __awaiter(this, void 0, void 0, function* () {
            let a = (new prefabs_1.prefabs[o]({
                position: { x: 0, y: 0 },
                velocity: { x: 0, y: 0 },
                rotation: 0,
                scaling: { width: 1, height: 1 }
            }));
            yield a.load();
            a.render = true;
            let objs = a.combinedObjects();
            for (let obj of objs) {
                obj.UnbindAll();
            }
            let r = a.renderf(0);
            return {
                prefab: prefabs_1.prefabs[o],
                name: a.constructor.name,
                rendered: r
            };
        }));
        let a = yield Promise.all(pres);
        let target = document.getElementById("prefab_target");
        target.textContent = '';
        for (let prefab of a) {
            let div = document.createElement("div");
            let para = document.createElement("p");
            para.appendChild(document.createTextNode(prefab.name));
            div.appendChild(para);
            if (Array.isArray(prefab.rendered)) {
            }
            else {
                div.append(prefab.rendered.sprite.sprite_sheet);
            }
            div.classList.add("prefab_box");
            div.addEventListener("mousedown", () => __awaiter(this, void 0, void 0, function* () {
                let val = {
                    position: { x: exports.debug_state.camera.state.position.x, y: exports.debug_state.camera.state.position.y },
                    velocity: { x: 0, y: 0 },
                    rotation: 0,
                    scaling: { width: 1, height: 1 }
                };
                let obj = (new prefab.prefab(val));
                yield main_1.g.state.current_room.addItems(obj.combinedObjects());
            }));
            target.append(div);
        }
    });
}
exports.debug_update_prefabs = debug_update_prefabs;
exports.debug_setup = () => {
    exports.debug_state = {
        target: document.getElementById("debug_target"),
        camera: new render_1.Camera({
            x: 0,
            y: 0,
            dimensions: {
                height: van_1.viewport.height,
                width: van_1.viewport.width
            },
            scaling: 1,
            debug: true
        }, {
            x: 1,
            y: 0,
            width: 1,
            height: 1
        }),
        last_clicked: undefined,
        selected_element: undefined,
        selected_element_offset: undefined,
        rotation_element: undefined,
        middle_position: undefined,
        click_position: undefined,
        selected_properties_element: undefined,
        selected_element_initial_scaling: { width: 1, height: 1 },
        actions_stack: [],
        render_delta_time: 0,
        current_action: undefined,
        render_toggles: {
            "proximity_box": false,
            "path_finding": false,
            "collision_box": false,
            "bounding_box": false
        }
    };
    exports.debug_state.camera.hud = new Debug_hud();
    controls_1.Bind("mouse0down", () => {
        if (exports.debug_state.selected_element) {
            exports.debug_state.selected_element = null;
        }
        else {
            let mouse = controls_1.Poll_Mouse(exports.debug_state.camera, false, exports.debug_state.target);
            if (!mouse) {
                return;
            }
            exports.debug_state.click_position = mouse;
            let all_clicked = main_1.g.getRoom().checkObjectsPoint(mouse);
            let clicked;
            let filtered = all_clicked.filter((ele) => ele == exports.debug_state.selected_properties_element);
            if (filtered.length > 0) {
                clicked = filtered[0];
            }
            else {
                clicked = all_clicked.sort((a, b) => (b.layer - a.layer))[0];
            }
            if (clicked) {
                if (controls_1.held_keys["ControlLeft"]) {
                    exports.debug_state.current_action = {
                        element: clicked,
                        property: "scaling",
                        old: JSON.stringify(clicked.state.scaling),
                        new: undefined
                    };
                }
                else {
                    exports.debug_state.current_action = {
                        element: clicked,
                        property: "position",
                        old: JSON.stringify(clicked.state.position),
                        new: undefined
                    };
                }
                exports.debug_state.selected_properties_element = clicked;
                debug_update_properties_element();
                exports.debug_state.selected_element = clicked;
                exports.debug_state.selected_element_initial_scaling = clicked.state.scaling;
                exports.debug_state.selected_element_offset = {
                    x: mouse.x - clicked.state.position.x,
                    y: mouse.y - clicked.state.position.y
                };
            }
        }
    }, controls_1.exec_type.once, 1, true);
    controls_1.Bind("mouse1up", () => {
        exports.debug_state.middle_position = undefined;
    }, controls_1.exec_type.once, 1, true);
    controls_1.Bind("mouse1down", () => {
        let mouse = controls_1.Poll_Mouse(exports.debug_state.camera, false, exports.debug_state.target);
        if (!mouse) {
            return;
        }
        exports.debug_state.middle_position = mouse;
    }, controls_1.exec_type.once, 1, true);
    controls_1.Bind("mouse0up", () => {
        if (exports.debug_state.selected_element) {
            if (exports.debug_state.current_action.property == "scaling") {
                exports.debug_state.current_action.new = JSON.stringify(exports.debug_state.selected_element.state.scaling);
            }
            else if (exports.debug_state.current_action.property == "position") {
                exports.debug_state.current_action.new = JSON.stringify(exports.debug_state.selected_element.state.position);
            }
            exports.debug_state.actions_stack.push(exports.debug_state.current_action);
            exports.debug_state.selected_element = undefined;
        }
    }, controls_1.exec_type.once, 1, true);
    controls_1.Bind("mouse2down", () => {
        if (exports.debug_state.rotation_element) {
            exports.debug_state.rotation_element = null;
        }
        else {
            let mouse = controls_1.Poll_Mouse(exports.debug_state.camera, false, exports.debug_state.target);
            if (!mouse) {
                return;
            }
            let clicked = main_1.g.getRoom().checkObjectsPoint(mouse)[0];
            if (clicked) {
                exports.debug_state.rotation_element = clicked;
                exports.debug_state.current_action = {
                    element: exports.debug_state.rotation_element,
                    property: "rotation",
                    old: JSON.stringify(exports.debug_state.rotation_element.state.rotation),
                    new: undefined
                };
            }
        }
    }, controls_1.exec_type.once, 1, true);
    controls_1.Bind("mouse2up", () => {
        exports.debug_state.current_action.new = JSON.stringify(exports.debug_state.rotation_element.state.rotation);
        exports.debug_state.actions_stack.push(exports.debug_state.current_action);
        exports.debug_state.rotation_element = undefined;
    }, controls_1.exec_type.once, 1, true);
    let left_func = () => {
        let shift_held = controls_1.held_keys["ShiftLeft"] ? 1 : 0;
        if (exports.debug_state.last_clicked.id == "debug_target")
            exports.debug_state.camera.state.position.x = exports.debug_state.camera.state.position.x - ((5 + shift_held * 5) * (1 / exports.debug_state.camera.state.scaling));
    };
    let right_func = () => {
        let shift_held = controls_1.held_keys["ShiftLeft"] ? 1 : 0;
        if (exports.debug_state.last_clicked.id == "debug_target")
            exports.debug_state.camera.state.position.x = exports.debug_state.camera.state.position.x + ((5 + shift_held * 5) * (1 / exports.debug_state.camera.state.scaling));
    };
    let down_func = () => {
        let shift_held = controls_1.held_keys["ShiftLeft"] ? 1 : 0;
        if (!controls_1.held_keys["ControlLeft"] && exports.debug_state.last_clicked.id == "debug_target")
            exports.debug_state.camera.state.position.y = exports.debug_state.camera.state.position.y - ((5 + shift_held * 5) * (1 / exports.debug_state.camera.state.scaling));
    };
    let up_func = () => {
        let shift_held = controls_1.held_keys["ShiftLeft"] ? 1 : 0;
        if (exports.debug_state.last_clicked.id == "debug_target")
            exports.debug_state.camera.state.position.y = exports.debug_state.camera.state.position.y + ((5 + shift_held * 5) * (1 / exports.debug_state.camera.state.scaling));
    };
    let scroll_up = () => {
        if (exports.debug_state.last_clicked.id == "debug_target" && exports.debug_state.camera.state.scaling < 0.05)
            exports.debug_state.camera.state.scaling = exports.debug_state.camera.state.scaling + 0.01;
        else if (exports.debug_state.last_clicked.id == "debug_target")
            exports.debug_state.camera.state.scaling = exports.debug_state.camera.state.scaling + 0.05;
    };
    let save_func = () => {
        let ctrl_held = controls_1.held_keys["ControlLeft"];
        if (ctrl_held && van_1.PAUSED) {
            let name = main_1.g.getRoom().constructor.name;
            let a = exports.path.join(`${exports.project_path}`, `../rooms/${name}.json`);
            try {
                fs.writeFileSync(a, JSON.stringify(main_1.g.getRoom().exportStateConfig()));
            }
            catch (e) {
                console.log(e);
                console.log("ERROR WRITING ROOM INFO FILE.");
                alert("Error");
            }
            alert("Saved");
        }
        else if (ctrl_held && !van_1.PAUSED) {
            alert("pause to enable saving.");
        }
    };
    let scroll_down = () => {
        if (exports.debug_state.last_clicked.id == "debug_target" && exports.debug_state.camera.state.scaling > 0.05)
            exports.debug_state.camera.state.scaling = exports.debug_state.camera.state.scaling - 0.05;
        else if (exports.debug_state.last_clicked.id == "debug_target" && exports.debug_state.camera.state.scaling > 0.01)
            exports.debug_state.camera.state.scaling = exports.debug_state.camera.state.scaling - 0.01;
    };
    let undo_func = () => {
        if (controls_1.held_keys["ControlLeft"]) {
            let curr = exports.debug_state.actions_stack.pop();
            if (curr) {
                if (curr.property == "position") {
                    curr.element.state.position = JSON.parse(curr.old);
                }
                else if (curr.property === "rotation") {
                    curr.element.state.rotation = JSON.parse(curr.old);
                }
                else if (curr.property === "scaling") {
                    curr.element.state.scaling = JSON.parse(curr.old);
                }
            }
        }
    };
    controls_1.Bind("KeyA", left_func, controls_1.exec_type.repeat, 1, true);
    controls_1.Bind("KeyD", right_func, controls_1.exec_type.repeat, 1, true);
    controls_1.Bind("KeyW", up_func, controls_1.exec_type.repeat, 1, true);
    controls_1.Bind("KeyS", down_func, controls_1.exec_type.repeat, 1, true);
    controls_1.Bind("scrollup", scroll_up, controls_1.exec_type.once, 1, true);
    controls_1.Bind("scrolldown", scroll_down, controls_1.exec_type.once, 1, true);
    controls_1.Bind("KeyS", save_func, controls_1.exec_type.once, 1, true);
    controls_1.Bind("KeyZ", undo_func, controls_1.exec_type.once, 1, true);
    controls_1.Bind("KeyQ", () => {
        exports.debug_state.render_toggles["path_finding"] = !exports.debug_state.render_toggles["path_finding"];
    }, controls_1.exec_type.once, 1, true);
    controls_1.Bind("KeyE", () => {
        exports.debug_state.render_toggles["proximity_box"] = !exports.debug_state.render_toggles["proximity_box"];
    }, controls_1.exec_type.once, 1, true);
    controls_1.Bind("KeyR", () => {
        exports.debug_state.render_toggles["collision_box"] = !exports.debug_state.render_toggles["collision_box"];
    }, controls_1.exec_type.once, 1, true);
    controls_1.Bind("KeyT", () => {
        exports.debug_state.render_toggles["bounding_box"] = !exports.debug_state.render_toggles["bounding_box"];
    }, controls_1.exec_type.once, 1, true);
    window.addEventListener("click", (e) => {
        if (e.target instanceof HTMLElement) {
            exports.debug_state.last_clicked = e.target;
        }
    });
    let pause_button = document.getElementById("pause_button");
    pause_button.addEventListener("click", (e) => {
        van_1.setPaused(!van_1.PAUSED);
        if (van_1.PAUSED) {
            pause_button.innerHTML = "UNPAUSE";
        }
        else {
            pause_button.innerHTML = "PAUSE";
        }
    });
    let obj_button = document.getElementById("new_object_button");
    let room_button = document.getElementById("new_room_button");
    room_button.addEventListener("click", (e) => {
        let file_path = ipcRenderer.sendSync('object-path-request', "rooms");
        if (file_path) {
            let full_name = exports.path.parse(file_path).base;
            let new_name = full_name.substr(0, full_name.length - 3);
            let path_to_write = exports.path.join(`${file_path}`, "..", new_name + ".ts");
            fs.writeFileSync(path_to_write, room_template_1.room_template.split("template").join(new_name));
            path_to_write = exports.path.join(`${file_path}`, "..", new_name + ".json");
            fs.writeFileSync(path_to_write, `
    {
      "objects":[]
    }
    `);
        }
    });
    obj_button.addEventListener("click", (e) => {
        let file_path = ipcRenderer.sendSync('object-path-request', "objects");
        if (file_path) {
            let full_name = exports.path.parse(file_path).base;
            let new_name = full_name.substr(0, full_name.length - 3);
            let path_to_write = exports.path.join(`${file_path}`, "..", new_name + ".ts");
            fs.writeFileSync(path_to_write, object_template_1.object_template.split("template").join(new_name));
        }
    });
};


/***/ }),

/***/ "./src/lib/hud.ts":
/*!************************!*\
  !*** ./src/lib/hud.ts ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Text = exports.HUD = void 0;
class HUD {
    constructor() {
        this.graphic_elements = [];
        this.text_elements = [];
        this.rendering = false;
        this.text_elements.push(...this.setTextElements());
        for (let g of this.setGraphicElements()) {
            this.addGraphic(g);
        }
    }
    addGraphic(o) {
        return __awaiter(this, void 0, void 0, function* () {
            yield o.load();
            o.info.on_hud_layer = true;
            this.graphic_elements.push(o);
        });
    }
    addGraphics(o) {
        return __awaiter(this, void 0, void 0, function* () {
            for (let obj of o) {
                this.addGraphic(obj);
            }
        });
    }
    statef(a) {
        for (let x of this.graphic_elements) {
            x.statef(a);
        }
        for (let x of this.text_elements) {
            x.statef(a);
        }
    }
    setActive() {
        return __awaiter(this, void 0, void 0, function* () {
        });
    }
    load() {
        return Promise.all(this.graphic_elements.map((a) => a.load()));
    }
    setTextElements() {
        return [];
    }
    setGraphicElements() {
        return [];
    }
}
exports.HUD = HUD;
class Text {
    constructor(node, getFunc) {
        if (!node.align) {
            node.align = "center";
        }
        this.state = node;
        if (!this.state.text) {
            this.state.text = "";
        }
        this.getFunc = getFunc;
    }
    statef(a) {
        this.state.text = this.getFunc();
    }
    renderf(a) {
        let { size, color, font, text, max_width, align } = this.state;
        return {
            size,
            color,
            font,
            text,
            max_width,
            align
        };
    }
}
exports.Text = Text;


/***/ }),

/***/ "./src/lib/math.ts":
/*!*************************!*\
  !*** ./src/lib/math.ts ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Vec = exports.rotation_length = exports.clamp = exports.angle_towards = exports.getRandInt = void 0;
function getRandInt(min, max) {
    return Math.floor(Math.random() * (max - min)) + min;
}
exports.getRandInt = getRandInt;
function angle_towards(target1, target2) {
    return 90 - Math.atan2((target1.y - target2.y), (target1.x - target2.x)) * 180 / Math.PI;
}
exports.angle_towards = angle_towards;
function clamp(value, min, max) {
    return Math.min(Math.max(value, min), max);
}
exports.clamp = clamp;
//Finds the side lengths of a triangle if given the  angle (in degrees)
//along with the length of the hypotenuse
function rotation_length(length, degree) {
    let a_len = length * Math.sin(degree * Math.PI / 180);
    let b_len = length * Math.cos(degree * Math.PI / 180);
    return {
        x: a_len,
        y: b_len
    };
}
exports.rotation_length = rotation_length;
class Vec {
    static from(a) {
        return Vec.create(a.x, a.y);
    }
    static add(a, b) {
        return { x: a.x + b.x, y: a.y + b.y };
    }
    static sub(a, b) {
        return { x: a.x - b.x, y: a.y - b.y };
    }
    static scalar_divide(a, b) {
        return { x: a.x / b, y: a.y / b };
    }
    static scalar_add(a, b) {
        return { x: a.x + b, y: a.y + b };
    }
    static scalar_sub(a, b) {
        return { x: a.x - b, y: a.y - b };
    }
    static scalar_mod(a, b) {
        return { x: a.x % b, y: a.y % b };
    }
    static scalar_mult(a, b) {
        return { x: a.x * b, y: a.y * b };
    }
    static func(a, b) {
        let arr = [a.x, a.y].map(b);
        return Vec.create(arr[0], arr[1]);
    }
    static distance(a, b) {
        return Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));
    }
    static create(x, y) {
        return { x, y };
    }
}
exports.Vec = Vec;


/***/ }),

/***/ "./src/lib/network.ts":
/*!****************************!*\
  !*** ./src/lib/network.ts ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Web = exports.Single_Player = exports.Network = exports.obj_net_type = exports.net_type = void 0;
const math_1 = __webpack_require__(/*! lib/math */ "./src/lib/math.ts");
const peerjs_1 = __webpack_require__(/*! peerjs */ "./node_modules/peerjs/dist/peerjs.min.js");
var net_type;
(function (net_type) {
    net_type[net_type["single_player"] = 0] = "single_player";
    net_type[net_type["web"] = 1] = "web";
    net_type[net_type["single_host"] = 2] = "single_host";
})(net_type = exports.net_type || (exports.net_type = {}));
var obj_net_type;
(function (obj_net_type) {
    obj_net_type[obj_net_type["local"] = 0] = "local";
    obj_net_type[obj_net_type["sync"] = 1] = "sync";
    obj_net_type[obj_net_type["host"] = 2] = "host";
})(obj_net_type = exports.obj_net_type || (exports.obj_net_type = {}));
class Network {
    constructor() {
        this.peer_connections = [];
        this.id = math_1.getRandInt(0, 999999);
        this.max_players = 8;
        this.current_players = 0;
        this.id_counter = 1;
        this.password = "";
        this.local_id = "0";
        this.local_connection = new peerjs_1.default(this.id + "", {
            host: 'localhost',
            port: 9000,
            path: '/'
        });
        this.local_connection.on("error", (err) => {
            this.error(err);
        });
        this.local_connection.on("connection", (connection) => {
            this.recieve_connect(connection);
        });
    }
    init() {
    }
    send(type, data) {
    }
    recieve(type, data, local_id) {
        let room = this.game.state.current_room;
        switch (type) {
            case "update_item": {
                let { id, state } = data;
                let obj = room.getObj(id);
                for (let key of Object.keys(state)) {
                    obj.state[key] = JSON.parse(state[key]);
                }
                break;
            }
            case "add_item": {
                let { state_config, id } = data;
                room.addItemStateConfig(state_config, id);
                break;
            }
            case "connection": {
                let { address, local_id } = JSON.parse(data);
                if (address == this.id) {
                    this.local_id = local_id;
                }
                else if (this.current_players < this.max_players && !this.peer_connections.map(ent => ent.peer_id).includes(address)) {
                    this.connect(address, this.password, local_id);
                    this.max_players++;
                }
            }
        }
        room.parse_packet(type, data, local_id);
    }
    connect(address, password = "", local_id = undefined) {
        return __awaiter(this, void 0, void 0, function* () {
            return;
        });
    }
    recieve_connect(peer) {
    }
    error(error) {
    }
}
exports.Network = Network;
class Single_Player extends Network {
    constructor() {
        super(...arguments);
        this.type = net_type.single_player;
    }
}
exports.Single_Player = Single_Player;
class Web extends Network {
    constructor() {
        super(...arguments);
        this.type = net_type.web;
    }
    connect(address, password = "", local_id = "0") {
        return __awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => {
                let peer = this.local_connection.connect(address);
                peer.on("open", () => {
                    let entry = {
                        authenticated: false,
                        connection: peer,
                        peer_id: address,
                        local_id
                    };
                    this.peer_connections.push(entry);
                    peer.send(JSON.stringify({
                        type: "password",
                        data: password
                    }));
                    peer.on("data", (d) => {
                        let { type, data } = JSON.parse(d);
                        if (type == "auth" && data.result == "success" && !entry.authenticated) {
                            entry.authenticated = true;
                            peer.on("data", (d) => {
                                let { type, data, id } = JSON.parse(d);
                                this.recieve(type, data, entry.local_id);
                            });
                            resolve(true);
                        }
                        resolve(false);
                    });
                });
            });
        });
    }
    send(type, data) {
        for (let peer of this.peer_connections) {
            peer.connection.send(JSON.stringify({ type, data, id: this.local_id }));
        }
    }
    recieve_connect(peer) {
        let entry = {
            connection: peer,
            authenticated: false,
            peer_id: peer.peer,
            local_id: undefined
        };
        this.peer_connections.push(entry);
        peer.on("data", (d) => {
            let { type, data } = JSON.parse(d);
            if (type == "password" && data == this.password && !entry.authenticated) {
                console.log("password right");
                entry.authenticated = true;
                entry.local_id = `${this.id_counter++}`;
                peer.send(JSON.stringify({
                    type: "auth",
                    data: {
                        result: "success",
                        assigned_id: entry.local_id
                    }
                }));
                this.send("connection", JSON.stringify({
                    address: peer.peer,
                    local_id: entry.local_id
                }));
                entry.authenticated = true;
                peer.on("data", (d) => {
                    let { type, data } = JSON.parse(d);
                    this.recieve(type, data, entry.local_id);
                });
            }
            else if (type == "password" && data != this.password) {
                console.log("password wrong");
                peer.send(JSON.stringify({
                    type: "auth",
                    data: "failure"
                }));
            }
        });
    }
}
exports.Web = Web;


/***/ }),

/***/ "./src/lib/object.ts":
/*!***************************!*\
  !*** ./src/lib/object.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.gravity_obj = exports.static_obj = exports.composite_obj = exports.obj = exports.getId = void 0;
const render_1 = __webpack_require__(/*! ./render */ "./src/lib/render.ts");
const controls_1 = __webpack_require__(/*! ./controls */ "./src/lib/controls.ts");
const audio_1 = __webpack_require__(/*! ./audio */ "./src/lib/audio.ts");
const van_1 = __webpack_require__(/*! ../van */ "./src/van.ts");
const math_1 = __webpack_require__(/*! ./math */ "./src/lib/math.ts");
const debug_1 = __webpack_require__(/*! ../lib/debug */ "./src/lib/debug.ts");
const utils_1 = __webpack_require__(/*! lib/utils */ "./src/lib/utils.ts");
function getId(a, id) {
    for (let b = 0; b < a.length; b++) {
        if (a[b].id == id) {
            return a[b];
        }
    }
    return undefined;
}
exports.getId = getId;
//This counter tracks the global number of objects created so far
//an object's id (if not overwritten) will be a unique integer, which
//uses this counter.
let counter = 0;
class animations {
    constructor() {
        this.animations = {};
        //Tracks the time passed since the current animation
        //has started playing
        this.animation_tracker = 0;
        this.animating = false;
    }
    //defines an animation that can be played using the play method
    //the keyframes are an array of tuples in the 
    //format of [(time for this sprite to show), sprite]
    add(name, keyframes, length) {
        this.animations[name] = [keyframes, length];
    }
    play(name, callback) {
        this.current = name;
        this.callback = callback;
        this.animation_tracker = 0;
    }
    renderf(t) {
        let curr_animation = this.animations[this.current][0];
        let length = this.animations[this.current][1];
        let index = 0;
        for (; index < curr_animation.length - 1; index++) {
            let keyframe_time = curr_animation[index][0];
            let next_keyframe_time = curr_animation[index + 1][0];
            if (this.animation_tracker >= keyframe_time && this.animation_tracker < next_keyframe_time) {
                this.animation_tracker = this.animation_tracker + t;
                this.animating = true;
                //Returns the raw sprite that's correct to show at this time
                return curr_animation[index][1];
            }
        }
        if (this.animation_tracker >= length) {
            this.animation_tracker = 0;
            this.animating = false;
            if (this.callback) {
                this.callback();
            }
        }
        else {
            this.animation_tracker += t;
        }
        //Returns the last appropriate frame until the animation is over.
        return curr_animation[index][1];
    }
}
class obj {
    constructor(state, params = obj.default_params) {
        //Url to the object's individual sprite, or all of its sprites
        //bundled into a spritesheet
        this.sprite_url = "./sprites/Error.png";
        this.render_type = render_1.render_type.sprite;
        this.collision = false;
        this.tags = new Set();
        //tags are used to exclude or include objects when checking for collisions,
        //and for object identification / classification in scripts
        this.render = true;
        this.animations = new animations();
        this.audio = new audio_1.audio();
        //Last render time, used to calculate delta_time
        this.last_render = 0;
        //Params are options for the object, that do not rely on state
        // For example, the side of a piece in chess.
        this.params = {};
        this.static = false;
        this.layer = 1;
        this.save_to_file = true;
        this.tick_state = true;
        this.scale_type = render_1.scale_type.grow;
        this.proximity_boxes = new Set();
        this.hud_clickable = true;
        this.info = {};
        this.text_nodes = [];
        this.cache_entries = {};
        this.internal_cache = {};
        this.state_properties_to_sync = [];
        this.past_state = {};
        this.diff_state = {};
        this.event_handlers = {};
        this.id = "" + counter;
        this.binds = [];
        counter++;
        this.params = Object.assign({}, params);
        this.registerControls();
        this.registerAudio();
        this.registerEvents();
        let position_proxy = (pos) => new Proxy(pos, {
            "set": (target, prop, reciever) => {
                if (prop == "y" || prop == "x") {
                    if (target[prop] == reciever) {
                        return true;
                    }
                    let room = this.game.getRoom();
                    let offset = 0;
                    if (prop == "y") {
                        offset = this.getFullCollisionBox().height / 2;
                    }
                    else if (prop == "x") {
                        offset = this.getFullCollisionBox().width / 2;
                    }
                    if (reciever > 0) {
                        offset = -offset;
                    }
                    if (reciever > room.proximity_map.length / 2 + offset) {
                        reciever = room.proximity_map.length / 2 + offset;
                    }
                    if (reciever < -room.proximity_map.length / 2 + offset) {
                        reciever = -room.proximity_map.length / 2 + offset;
                    }
                    target[prop] = this.x_proxy(reciever);
                    this.recalculateProxBoxes();
                    if (this.static) {
                        let col_box = this.getFullCollisionBox();
                        col_box.height = col_box.height + 2 * this.game.getRoom().proximity_map.square_length;
                        col_box.width = col_box.width + 2 * this.game.getRoom().proximity_map.square_length;
                        this.game.updateStaticsInCollision(col_box);
                    }
                }
                return true;
            }
        });
        let scaling_proxy = (a) => new Proxy(a, {
            "set": (target, prop, reciever) => {
                if (prop == "width" || prop == "height") {
                    target[prop] = reciever;
                    this.recalculateProxBoxes();
                    if (this.static) {
                        this.game.updateStaticsInCollision(this.getFullCollisionBox());
                    }
                }
                return true;
            }
        });
        //Creates a copy of the passed in initial state to avoid 
        //Updating the saved state of the room
        this.state = JSON.parse(JSON.stringify(state));
        this.info = {
            on_hud_layer: false
        };
        if (!state.velocity) {
            this.state.velocity = math_1.Vec.create(0, 0);
        }
        if (!state.scaling) {
            this.state.scaling = { height: 1, width: 1 };
        }
        if (!state.rotation) {
            this.state.rotation = 0;
        }
        this.state = new Proxy(this.state, {
            "set": (target, prop, reciever) => {
                if (prop == "position") {
                    let res = reciever;
                    let vec = math_1.Vec.create(res.x, res.y);
                    target[prop] = position_proxy(vec);
                    if (this.game && this.game.getRoom()) {
                        this.recalculateProxBoxes();
                        if (this.static) {
                            this.game.updateStaticsInCollision(this.getFullCollisionBox());
                        }
                    }
                }
                else if (prop == "scaling") {
                    let res = reciever;
                    let dim = { width: res.width, height: res.height };
                    target[prop] = scaling_proxy(dim);
                    if (this.game && this.game.getRoom()) {
                        this.recalculateProxBoxes();
                        if (this.static) {
                            this.game.updateStaticsInCollision(this.getFullCollisionBox());
                        }
                    }
                }
                else {
                    target[prop] = reciever;
                }
                return true;
            }
        });
        this.state.position = position_proxy(this.state.position);
        this.state.scaling = scaling_proxy(this.state.scaling);
        this.params = params;
    }
    getState() {
        return this.state;
    }
    //Animations should be registered using this.animations.add in this method
    registerAnimations() {
    }
    //Sounds should be registered using this.audio.add in this method.
    registerAudio() {
    }
    registerEvents() {
    }
    removeAllEventHandlers() {
        this.event_handlers = {};
    }
    removeEventHandler(event) {
        this.event_handlers[event.type].splice(event.index, 1);
    }
    addEventHandler(event, func) {
        if (!this.event_handlers[event]) {
            this.event_handlers[event] = [];
        }
        this.event_handlers[event].push(func);
        return {
            type: event,
            index: this.event_handlers[event].indexOf(func)
        };
    }
    event(event) {
        if (this.event_handlers[event]) {
            for (let func of this.event_handlers[event]) {
                func();
            }
        }
    }
    defaultParams() {
        return van_1.copy(this.defaultParams);
    }
    x_proxy(val) {
        return val;
    }
    y_proxy(val) {
        return val;
    }
    recalculateProxBoxes() {
        let bounds = this.getBoundingBox();
        let prox_map = this.game.getRoom().proximity_map;
        let boxes = prox_map.getBoxLocations(this);
        for (let cord of this.proximity_boxes) {
            prox_map.remove(cord, this);
        }
        for (let cord of boxes) {
            prox_map.add(cord, this);
        }
    }
    mutate(key, value) {
        this[key] = value;
    }
    getRoom() {
        return this.game.getRoom();
    }
    load() {
        let _this = this;
        return new Promise((resolve, reject) => {
            let image = new Image();
            let url = this.sprite_url;
            if (van_1.DEBUG) {
                url = debug_1.path.join(debug_1.root_path, this.sprite_url);
            }
            image.src = url;
            image.onload = (() => __awaiter(this, void 0, void 0, function* () {
                _this.sprite_sheet = image;
                _this.registerAnimations();
                yield this.audio.load();
                /*worker_pool.send_all("sprite_sheet_cache",{
                  name:this.constructor.name,
                  encoded
                });
                */
                resolve();
            }));
        });
    }
    //Within normal objects, this just returns an array that contains the object.
    //This method is overwritten by composite objects, which returns every object
    //that the composite object contains. This simplifies the backend work, as each
    //object returns an array of atleast one object.
    combinedObjects() {
        return [this];
    }
    getBoundingBox() {
        let coll_box = this.getFullCollisionBox();
        return {
            top_right: {
                x: coll_box.x + coll_box.width / 2,
                y: coll_box.y + coll_box.height / 2
            },
            bottom_left: {
                x: coll_box.x - coll_box.width / 2,
                y: coll_box.y - coll_box.height / 2
            }
        };
    }
    //Distance from one object to another.
    distance(target) {
        return math_1.Vec.distance(this.state.position, target.state.position);
    }
    applyForce(vel) {
        this.state.velocity.x += vel.x;
        this.state.velocity.y += vel.y;
    }
    angleTowards(a) {
        return this.angleTowardsPoint(a.state.position);
    }
    angleTowardsPoint(target) {
        return 90 - Math.atan2((target.y - this.state.position.y), (target.x - this.state.position.x)) * 180 / Math.PI;
    }
    bindControl(key, x, func, interval = 1) {
        this.binds.push(controls_1.Bind(key, func, x, interval, false, this));
    }
    //This method is where controls and keybinds should
    //be defined using bindControl
    registerControls() {
    }
    statef(time) {
        for (let node of this.text_nodes) {
            node.statef(time);
        }
        if (this.state_properties_to_sync.length > 0) {
            let network_properties = {};
            let state = this.state;
            if (this.state_properties_to_sync) {
                for (let key of this.state_properties_to_sync) {
                    network_properties[key] = JSON.stringify(state[key]);
                }
            }
            this.diff_state = utils_1.diff(this.past_state, network_properties);
            this.past_state = network_properties;
        }
    }
    delete() {
        for (let a of this.binds) {
            controls_1.Unbind(a);
        }
        for (let cord of this.proximity_boxes) {
            this.game.getRoom().proximity_map.remove(cord, this);
        }
        this.game.getRoom().deleteItem(this.id);
        if (this.static) {
            this.game.updateStaticsInCollision(this.getFullCollisionBox());
        }
    }
    UnbindAll() {
        for (let a of this.binds) {
            controls_1.Unbind(a);
        }
    }
    //Returns the collision box of the object
    //Does not have to correspond to the object's sprite's size 
    //A composite object instead returns the bounding box that 
    //contains every one of its contained objects
    getFullCollisionBox() {
        //If a developer defined hitbox exists, use that, otherwise
        //generate it using the sprite width / height
        if (this.hitbox) {
            return {
                x: this.state.position.x,
                y: this.state.position.y,
                width: this.hitbox.width * this.state.scaling.width,
                height: this.hitbox.height * this.state.scaling.height
            };
        }
        else {
            return {
                x: this.state.position.x,
                y: this.state.position.y,
                width: this.width * this.state.scaling.width,
                height: this.height * this.state.scaling.height
            };
        }
    }
    //This is another methods, similar to getCombined
    //Just returns an array containing the object's collision box
    //Overwritten in composite objects to return every object's collision box
    //within the composite obect.
    getAllCollisionBoxes() {
        return [this.getFullCollisionBox()];
    }
    cache(key, value) {
        if (!this.cache_entries[key]) {
            this.cache_entries[key] = value;
        }
        return this.cache_entries[key];
    }
    collidesWithPoint(point) {
        return this.collidesWithBox({ x: point.x, y: point.y, height: 0, width: 0 });
    }
    //Checks to see if an object actually collides with the provided box.
    //A box represents an area within the game space
    //Checking for collisions is trivial currently, as all hitboxes are axis aligned
    //But implementing a more complicated physics engine would make this method's impl.
    //significatly more complex.
    collidesWithBox(other_object) {
        let collides_horrizontally = false, collides_vertically = false;
        let hbox = this.hitbox;
        if (!this.hitbox) {
            hbox = {
                x_offset: 0,
                y_offset: 0,
                width: this.width,
                height: this.height
            };
        }
        let object_bounds = {
            left: (this.state.position.x + hbox.x_offset - hbox.width * this.state.scaling.width / 2),
            right: (this.state.position.x + hbox.x_offset + hbox.width * this.state.scaling.width / 2),
            top: (this.state.position.y + hbox.y_offset + hbox.height * this.state.scaling.height / 2),
            bottom: (this.state.position.y + hbox.y_offset - hbox.height * this.state.scaling.height / 2)
        };
        let other_object_bounds = {
            left: (other_object.x - other_object.width / 2),
            right: (other_object.x + other_object.width / 2),
            top: (other_object.y + other_object.height / 2),
            bottom: (other_object.y - other_object.height / 2)
        };
        //We can compare the sides of the boxes to see if they overlap
        //We check once for hoizontal overlap, then vertical.
        if ((object_bounds.left >= other_object_bounds.left && object_bounds.left < other_object_bounds.right) || (other_object_bounds.left > object_bounds.left && other_object_bounds.left < object_bounds.right)) {
            collides_horrizontally = true;
        }
        else {
            return false;
        }
        if ((object_bounds.bottom >= other_object_bounds.bottom && object_bounds.bottom < other_object_bounds.top) || (other_object_bounds.bottom > object_bounds.bottom && other_object_bounds.bottom < object_bounds.top)) {
            collides_vertically = true;
        }
        else {
            return false;
        }
        return collides_horrizontally && collides_vertically;
    }
    //The particle must be registered in the room's registerParticles method 
    //The name parameter should correspond to the key of a particle
    emitParticle(name, offset, lifetime, range) {
        let room = this.game.getRoom();
        let st = this.state;
        let final_position = {
            x: st.position.x + offset.x,
            y: st.position.y + offset.y
        };
        room.emitParticle(name, final_position, lifetime, range);
    }
    //Internal method that keeps calculates the delta_time
    //Also converts individual sprites into arrays of one sprite.
    renderTrack(time) {
        let rendered = this.renderf(time - this.last_render);
        let final;
        this.last_render = time;
        if (Array.isArray(rendered))
            final = rendered;
        else {
            final = [rendered];
        }
        return final;
    }
    //Most objects should not be overwritting the renderf method
    //Returns the appropriate sprite for the object
    renderf(time) {
        //If the object doesn't have registered animations, or isn't playing one
        //We have to create the sprite here.
        if (Object.keys(this.animations.animations).length == 0 || !this.animations.current) {
            if (!this.sprite_sheet) {
                return {
                    sprite: undefined,
                    x: this.state.position.x,
                    y: this.state.position.y
                };
            }
            let sprite_height = this.height;
            let sprite_width = this.width;
            //Technically we don't need to define an object height and width
            //If the sprite_url points to a single static sprite, as we can just pull
            //the dimensions from the image
            if (this.height == undefined) {
                sprite_height = this.sprite_sheet.height;
            }
            if (this.width == undefined) {
                sprite_width = this.sprite_sheet.width;
            }
            return {
                sprite: {
                    sprite_sheet: this.sprite_sheet,
                    name: this.constructor.name,
                    left: 0,
                    top: 0,
                    sprite_width: sprite_width,
                    sprite_height: sprite_height,
                    opacity: this.opacity || 1
                },
                x: this.state.position.x,
                y: this.state.position.y
            };
        }
        return {
            sprite: this.animations.renderf(time),
            x: this.state.position.x,
            y: this.state.position.y
        };
    }
}
exports.obj = obj;
obj.default_params = {};
class composite_obj extends obj {
    constructor(pos, params) {
        super(pos, params);
        this.objects = [];
        this.render = false;
        this.registered = false;
        this.collision = false;
        this.statics = [];
    }
    load() {
        const _super = Object.create(null, {
            load: { get: () => super.load }
        });
        return __awaiter(this, void 0, void 0, function* () {
            yield _super.load.call(this);
            yield Promise.all([...this.objects.map((a) => a.load()), ...this.statics.map(a => a.obj.load())]);
        });
    }
    combinedObjects() {
        let combined = [...this.objects, ...this.statics.map(a => a.obj)];
        return [...combined, this];
    }
    getItemsByTag(tag) {
        return this.combinedObjects().filter((a) => a.tags.has(tag));
    }
    addItem(a, list = this.objects) {
        a.parent = this;
        list.push(...a.combinedObjects());
    }
    addItems(a, list = this.objects) {
        for (let o of a) {
            this.addItem(o, list);
        }
    }
    getAllCollisionBoxes() {
        let arr = [];
        for (let obj of [...this.statics.map(a => a.obj), ...this.objects]) {
            let created_box = obj.getAllCollisionBoxes();
            if (Array.isArray(created_box)) {
                arr.push(...created_box);
            }
            else {
                arr.push(created_box);
            }
        }
        return arr;
    }
    delete() {
        for (let a of this.objects) {
            a.delete();
        }
        for (let a of this.statics) {
            a.obj.delete();
        }
        super.delete();
    }
    collidesWithBox(a) {
        for (let obj of this.objects) {
            if (obj.collidesWithBox(a))
                return true;
        }
        for (let o of this.statics) {
            if (o.obj.collidesWithBox(a))
                return true;
        }
        return false;
    }
}
exports.composite_obj = composite_obj;
class static_obj {
    constructor() {
        this.sprite_url = "";
    }
}
exports.static_obj = static_obj;
class gravity_obj extends obj {
    constructor() {
        super(...arguments);
        this.gravity = true;
    }
}
exports.gravity_obj = gravity_obj;


/***/ }),

/***/ "./src/lib/render.ts":
/*!***************************!*\
  !*** ./src/lib/render.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.rect_renderer = exports.stroked_rect_renderer = exports.line_renderer = exports.sprite_renderer = exports.hud_sprite_renderer = exports.canvas_renderer = exports.text_renderer = exports.hud_text_renderer = exports.scale_type = exports.render_type = exports.Camera = void 0;
const van_1 = __webpack_require__(/*! ../van */ "./src/van.ts");
const math_1 = __webpack_require__(/*! ./math */ "./src/lib/math.ts");
class Camera {
    constructor(props, v, hud = undefined) {
        this.state = {
            scaling: props.scaling,
            position: {
                x: props.x,
                y: props.y
            },
            dimensions: props.dimensions,
            viewport: {
                x: v.x,
                y: v.y,
                width: v.width * props.dimensions.width,
                height: v.height * props.dimensions.height
            },
            debug: props.debug,
            hud,
            target_pos: undefined,
            start_pos: undefined,
            easing_time: 0,
            current_time: 0,
            speed: 0
        };
        if (hud) {
            hud.graphic_elements.forEach(e => {
                e.UnbindAll();
            });
        }
        this.setHud(hud);
    }
    statef(delta_time) {
        if (this.state.target_pos) {
            let t = this.state.current_time / this.state.easing_time;
            let distance = math_1.Vec.distance(this.state.position, this.state.target_pos);
            let coeff;
            if (t <= 0.5) {
                coeff = 2 * t * t;
            }
            else {
                t -= 0.5;
                coeff = 2 * t * (1 - t) + 0.5;
            }
            let angle = math_1.angle_towards(this.state.target_pos, this.state.position);
            let velocity = math_1.rotation_length(2 * this.state.speed * delta_time, angle);
            velocity = math_1.Vec.scalar_mult(velocity, coeff);
            this.state.position = math_1.Vec.add(this.state.position, velocity);
            this.state.current_time += delta_time;
            if (this.state.current_time > this.state.easing_time) {
                this.state.position = math_1.Vec.from(this.state.target_pos);
                this.state.target_pos = undefined;
            }
        }
    }
    set x(x) {
        this.state.position.x = x;
    }
    set y(y) {
        this.state.position.y = y;
    }
    get x() {
        return this.state.position.x;
    }
    get y() {
        return this.state.position.y;
    }
    setHud(hud = undefined) {
        if (this.hud) {
            this.hud.rendering = false;
            for (let o of this.hud.graphic_elements) {
                o.UnbindAll();
            }
        }
        if (hud && hud != this.hud) {
            hud.rendering = true;
            for (let o of hud.graphic_elements) {
                o.registerControls();
            }
            hud.setActive();
        }
        this.hud = hud;
    }
    moveTo(pos, time) {
        this.state.speed = math_1.Vec.distance(this.state.position, pos) / time;
        this.state.target_pos = pos;
        this.state.start_pos = math_1.Vec.from(this.state.position);
        this.state.easing_time = time;
        this.state.current_time = 0;
    }
}
exports.Camera = Camera;
var render_type;
(function (render_type) {
    render_type[render_type["text"] = 0] = "text";
    render_type[render_type["sprite"] = 1] = "sprite";
    render_type[render_type["rect"] = 2] = "rect";
    render_type[render_type["stroke_rect"] = 3] = "stroke_rect";
})(render_type = exports.render_type || (exports.render_type = {}));
var scale_type;
(function (scale_type) {
    scale_type[scale_type["grow"] = 0] = "grow";
    scale_type[scale_type["repeat"] = 1] = "repeat";
})(scale_type = exports.scale_type || (exports.scale_type = {}));
exports.hud_text_renderer = (r, s) => {
    let vheight = van_1.GetViewportDimensions().height;
    r.context.font = `${s.font.size}px ${s.font.font}`;
    r.context.fillStyle = s.font.color;
    r.context.textAlign = s.font.align;
    if (s.font.max_width) {
        r.context.fillText(s.font.text, s.x, vheight - s.y, s.font.max_width);
    }
    else {
        r.context.fillText(s.font.text, s.x, vheight - s.y);
    }
};
exports.text_renderer = (r, s) => {
    let camera = r.camera;
    let vheight = r.camera.state.dimensions.height;
    let final_x = ((s.x - camera.state.position.x + camera.state.dimensions.width * (1 / r.camera.state.scaling) / 2) * r.camera.state.scaling);
    let final_y = ((vheight - s.y * camera.state.scaling - camera.state.dimensions.height / 2 + camera.state.position.y * camera.state.scaling));
    r.context.font = `${s.font.size * r.camera.state.scaling}px ${s.font.font}`;
    r.context.fillStyle = s.font.color;
    r.context.textAlign = s.font.align;
    r.context.save();
    r.context.translate(final_x, final_y);
    if (s.font.max_width) {
        r.context.fillText(s.font.text, 0, 0, s.font.max_width);
    }
    else {
        r.context.fillText(s.font.text, 0, 0);
    }
    r.context.restore();
};
exports.canvas_renderer = (r, a) => {
    let camera = r.camera;
    let vheight = r.camera.state.dimensions.height / r.camera.state.scaling;
    let final_x = ((a.x - camera.state.position.x + camera.state.dimensions.width * (1 / r.camera.state.scaling) / 2 - a.width * a.scale.width / 2) * r.camera.state.scaling);
    let final_y = ((vheight - a.y - camera.state.dimensions.height * (1 / r.camera.state.scaling) / 2 - a.height * a.scale.height / 2 + camera.state.position.y) * r.camera.state.scaling);
    let height = a.height * r.camera.state.scaling * a.scale.height;
    let width = a.width * r.camera.state.scaling * a.scale.width;
    r.context.save();
    r.context.translate(final_x + (width) / 2, final_y + height / 2);
    r.context.drawImage(a.canvas, -(width) / 2, -height / 2, width, height);
    r.context.restore();
};
exports.hud_sprite_renderer = (r, s) => {
    let camera = r.camera;
    let vheight = r.camera.state.dimensions.height;
    let final_x = (s.x - s.sprite.sprite_width * s.scale.width / 2);
    let final_y = (vheight - s.y - s.sprite.sprite_height * s.scale.height / 2);
    let height = s.sprite.sprite_height * s.scale.height;
    let width = s.sprite.sprite_width * s.scale.width;
    r.context.save();
    r.context.globalAlpha = s.sprite.opacity;
    r.context.translate(final_x + (width) / 2, final_y + height / 2);
    let radians = s.rotation * (Math.PI / 180);
    r.context.rotate(radians);
    if (s.scale_type == scale_type.grow) {
        if (typeof s.sprite.sprite_sheet == "string") {
            let image = new Image();
            image.onload = () => {
                r.context.drawImage(image, s.sprite.left, s.sprite.top, s.sprite.sprite_width, s.sprite.sprite_height, -(width) / 2, -height / 2, width, height);
                r.context.restore();
            };
            image.src = s.sprite.sprite_sheet;
        }
        else {
            r.context.drawImage(s.sprite.sprite_sheet, s.sprite.left, s.sprite.top, s.sprite.sprite_width, s.sprite.sprite_height, -(width) / 2, -height / 2, width, height);
            r.context.restore();
        }
    }
    else if (s.scale_type == scale_type.repeat) {
        let one_width = s.sprite.sprite_width * r.camera.state.scaling;
        let one_height = s.sprite.sprite_height * r.camera.state.scaling;
        let total_hor_sprites = width / one_width;
        let total_ver_sprites = height / one_height;
        for (let a = 0; a < total_hor_sprites; a += 1) {
            for (let b = 0; b < total_ver_sprites; b += 1) {
                let new_width = one_width;
                let new_height = one_height;
                if ((a + 1) * one_width - width > 0) {
                    new_width = width % one_width;
                }
                if ((b + 1) * one_height - height > 0) {
                    new_height = height % one_height;
                }
                if (typeof s.sprite.sprite_sheet == "string") {
                    let image = new Image();
                    image.onload = () => {
                        r.context.drawImage(image, s.sprite.left, s.sprite.top, new_width / (r.camera.state.scaling), new_height / (r.camera.state.scaling), -width / 2 + a * one_width, -height / 2 + b * one_height, new_width, new_height);
                        r.context.restore();
                    };
                    image.src = s.sprite.sprite_sheet;
                }
                else {
                    r.context.drawImage(s.sprite.sprite_sheet, s.sprite.left, s.sprite.top, new_width / (r.camera.state.scaling), new_height / (r.camera.state.scaling), -width / 2 + a * one_width, -height / 2 + b * one_height, new_width, new_height);
                    r.context.restore();
                }
            }
        }
    }
};
exports.sprite_renderer = (r, s) => {
    let camera = r.camera;
    let vheight = r.camera.state.dimensions.height / r.camera.state.scaling;
    let final_x = ((s.x - camera.state.position.x + camera.state.dimensions.width * (1 / r.camera.state.scaling) / 2 - s.sprite.sprite_width * s.scale.width / 2) * r.camera.state.scaling);
    let final_y = ((vheight - s.y - camera.state.dimensions.height * (1 / r.camera.state.scaling) / 2 - s.sprite.sprite_height * s.scale.height / 2 + camera.state.position.y) * r.camera.state.scaling);
    let height = s.sprite.sprite_height * r.camera.state.scaling * s.scale.height;
    let width = s.sprite.sprite_width * r.camera.state.scaling * s.scale.width;
    r.context.save();
    r.context.globalAlpha = s.sprite.opacity;
    r.context.translate(final_x + (width) / 2, final_y + height / 2);
    let radians = s.rotation * (Math.PI / 180);
    r.context.rotate(radians);
    if (s.scale_type == scale_type.grow) {
        if (typeof s.sprite.sprite_sheet == "string") {
        }
        else {
            r.context.drawImage(s.sprite.sprite_sheet, s.sprite.left, s.sprite.top, s.sprite.sprite_width, s.sprite.sprite_height, -(width) / 2, -height / 2, width, height);
            r.context.restore();
            /*
            return worker_pool.send("draw_sprite",{
              translate:{x:final_x  + (width) / 2,y: final_y + height / 2},
              sprite:{
                name:s.sprite.name,
                left:s.sprite.left,
                top:s.sprite.top,
                sprite_width:s.sprite.sprite_width,
                sprite_height:s.sprite.sprite_height
              },
              width,
              height
            })
            */
        }
    }
    else if (s.scale_type == scale_type.repeat) {
        let one_width = s.sprite.sprite_width * r.camera.state.scaling;
        let one_height = s.sprite.sprite_height * r.camera.state.scaling;
        let total_hor_sprites = width / one_width;
        let total_ver_sprites = height / one_height;
        for (let a = 0; a < total_hor_sprites; a += 1) {
            for (let b = 0; b < total_ver_sprites; b += 1) {
                let new_width = one_width;
                let new_height = one_height;
                if ((a + 1) * one_width - width > 0) {
                    new_width = width % one_width;
                }
                if ((b + 1) * one_height - height > 0) {
                    new_height = height % one_height;
                }
                r.context.drawImage(s.sprite.sprite_sheet, s.sprite.left, s.sprite.top, new_width / (r.camera.state.scaling), new_height / (r.camera.state.scaling), -width / 2 + a * one_width, -height / 2 + b * one_height, new_width, new_height);
            }
        }
    }
    r.context.restore();
};
exports.line_renderer = (context, line, color, lineWidth, camera) => {
    let vheight = camera.state.dimensions.height / camera.state.scaling;
    let start_x = ((line.start.x - camera.state.position.x + camera.state.dimensions.width * (1 / camera.state.scaling) / 2) * camera.state.scaling);
    let start_y = ((vheight - line.start.y + camera.state.position.y - camera.state.dimensions.height * (1 / camera.state.scaling) / 2) * camera.state.scaling);
    let end_x = ((line.end.x - camera.state.position.x + camera.state.dimensions.width * (1 / camera.state.scaling) / 2) * camera.state.scaling);
    let end_y = ((vheight - line.end.y + camera.state.position.y - camera.state.dimensions.height * (1 / camera.state.scaling) / 2) * camera.state.scaling);
    context.beginPath();
    context.strokeStyle = color;
    context.lineWidth = lineWidth * camera.state.scaling;
    context.moveTo(start_x, start_y);
    context.lineTo(end_x, end_y);
    context.stroke();
};
exports.stroked_rect_renderer = (context, rect, x, y, color, lineWidth, camera) => {
    let vheight = camera.state.dimensions.height / camera.state.scaling;
    let final_x = ((x - camera.state.position.x + camera.state.dimensions.width * (1 / camera.state.scaling) / 2 - rect.width / 2) * camera.state.scaling);
    let final_y = ((vheight - y + camera.state.position.y - camera.state.dimensions.height * (1 / camera.state.scaling) / 2 - rect.height / 2) * camera.state.scaling);
    let height = rect.height * camera.state.scaling;
    let width = rect.width * camera.state.scaling;
    context.strokeStyle = color;
    context.lineWidth = lineWidth * camera.state.scaling;
    context.strokeRect(final_x, final_y, width, height);
};
exports.rect_renderer = (context, rect, x, y, color, camera, opacity = 1) => {
    let vheight = camera.state.dimensions.height / camera.state.scaling;
    let final_x = ((x - camera.state.position.x + camera.state.dimensions.width * (1 / camera.state.scaling) / 2 - rect.width / 2) * camera.state.scaling);
    let final_y = ((vheight - y - rect.height / 2 - camera.state.dimensions.height * (1 / camera.state.scaling) / 2 + camera.state.position.y) * camera.state.scaling);
    let height = rect.height * camera.state.scaling;
    let width = rect.width * camera.state.scaling;
    context.save();
    context.translate(final_x, final_y);
    context.globalAlpha = opacity;
    context.fillStyle = color;
    context.fillRect(-width / 2, -height / 2, width, height);
    context.restore();
};


/***/ }),

/***/ "./src/lib/room.ts":
/*!*************************!*\
  !*** ./src/lib/room.ts ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.p2p_room = exports.room = exports.proximity_matrix = exports.applyGravity = void 0;
const sprite_1 = __webpack_require__(/*! ./sprite */ "./src/lib/sprite.ts");
const collision_1 = __webpack_require__(/*! ./collision */ "./src/lib/collision.ts");
const van_1 = __webpack_require__(/*! ../van */ "./src/van.ts");
const controls_1 = __webpack_require__(/*! ./controls */ "./src/lib/controls.ts");
const audio_1 = __webpack_require__(/*! ./audio */ "./src/lib/audio.ts");
const debug_1 = __webpack_require__(/*! ../lib/debug */ "./src/lib/debug.ts");
const prefabs_1 = __webpack_require__(/*! ../game/objects/prefabs */ "./src/game/objects/prefabs.ts");
const math_1 = __webpack_require__(/*! lib/math */ "./src/lib/math.ts");
function applyGravity(ob, grav_const, grav_max) {
    if (ob.gravity && ob.state.velocity.y > grav_max) {
        ob.state.velocity.y += grav_const;
    }
}
exports.applyGravity = applyGravity;
class proximity_matrix {
    constructor(full_length, dimension) {
        this.internal_map = {};
        this.length = full_length;
        this.square_length = this.length / dimension;
        if (dimension % 2 != 1) {
            throw new Error("Proximity map matix dimension must be odd. Got:" + dimension);
        }
    }
    ensure(a) {
        if (!this.internal_map[a.y]) {
            this.internal_map[a.y] = {};
        }
        if (!this.internal_map[a.y][a.x]) {
            this.internal_map[a.y][a.x] = new Map();
        }
        return this.internal_map[a.y][a.x];
    }
    get(a) {
        return this.ensure(a);
    }
    add(a, o) {
        let entry = this.ensure(a);
        entry.set(o.id, o);
        o.proximity_boxes.add(a);
    }
    exists(a) {
        if (!this.internal_map[a.y] || !this.internal_map[a.y][a.x])
            return false;
        return true;
    }
    remove(a, o) {
        let entry = this.internal_map[a.y][a.x];
        entry.delete(o.id);
        o.proximity_boxes.delete(a);
    }
    getObjectsFromBox(a) {
        return this.getObjectsFromCords(this.getCordsFromBox(a));
    }
    getObjectsFromCords(input) {
        let object_set = new Set();
        for (let cord of input) {
            if (this.exists(cord)) {
                let keys = this.internal_map[cord.y][cord.x].keys();
                for (let k of keys) {
                    let j = this.internal_map[cord.y][cord.x].get(k);
                    object_set.add(j);
                }
            }
        }
        return Array.from(object_set);
    }
    getCordsFromBox(a) {
        let bottom_left = math_1.Vec.create(a.x - a.width / 2, a.y - a.height / 2);
        let top_right = math_1.Vec.create(a.x + a.width / 2, a.y + a.height / 2);
        return this.getCordsFromBoundingBox({ bottom_left, top_right });
    }
    getCordsFromBoundingBox(a) {
        let box = a;
        let bot_left = math_1.Vec.scalar_divide(math_1.Vec.scalar_add(box.bottom_left, this.length / 2), this.square_length);
        let top_right = math_1.Vec.scalar_divide(math_1.Vec.scalar_add(box.top_right, this.length / 2), this.square_length);
        bot_left = math_1.Vec.func(bot_left, (a) => Math.max(0, a));
        top_right = math_1.Vec.func(top_right, (a) => Math.min(this.length / this.square_length, a));
        let min = math_1.Vec.func(bot_left, (a) => Math.floor(a));
        let max = math_1.Vec.func(top_right, (a) => Math.ceil(a));
        let dimensions_in_boxes = math_1.Vec.sub(max, min);
        let all_boxes = [];
        let cord = math_1.Vec.func(math_1.Vec.scalar_divide(math_1.Vec.scalar_add(math_1.Vec.func(box.bottom_left, (a) => Math.max(a, -this.length / 2)), this.length / 2), this.square_length), (a) => Math.floor(a));
        for (let a = 0; a < dimensions_in_boxes.y; a++) {
            for (let b = 0; b < dimensions_in_boxes.x; b++) {
                let new_vec = math_1.Vec.add(math_1.Vec.create(b, a), cord);
                new_vec = math_1.Vec.func(new_vec, (a) => Math.floor(a));
                all_boxes.push(new_vec);
            }
        }
        return all_boxes;
    }
    getBoxLocations(o) {
        let box = o.getBoundingBox();
        let cords = this.getCordsFromBoundingBox(box);
        return cords;
    }
}
exports.proximity_matrix = proximity_matrix;
class room {
    constructor(game, config) {
        this.objects = [];
        //This object contains particle definitions
        this.particles = {};
        //This array is what actually contains the particles
        //that exists within the room.
        this.particles_arr = [];
        this.binds = [];
        this.valid = true;
        this.audio = new audio_1.audio();
        //These text nodes exists in the actual room space, rather than
        //on the hud layer.
        this.render = true;
        this.text_nodes = [];
        this.proximity_map = new proximity_matrix(10000, 5);
        this.cameras = [];
        this.cache_entries = {};
        this.game = game;
        this.config = config;
        this.bindControl("mouse0", controls_1.exec_type.once, () => {
            let hud_clicked = false;
            for (let cam of this.cameras) {
                if (cam.hud) {
                    let mouse_hud = controls_1.Poll_Mouse(cam, true);
                    for (let obj of cam.hud.graphic_elements) {
                        if (obj.collidesWithPoint(mouse_hud)) {
                            hud_clicked = true;
                            obj.event("click");
                        }
                    }
                }
            }
            if (!hud_clicked) {
                for (let cam of this.cameras) {
                    let mouse = controls_1.Poll_Mouse(cam);
                    let colliders = this.checkObjectsPoint(mouse);
                    for (let obj of colliders) {
                        obj.event("click");
                    }
                }
            }
        });
    }
    exportStateConfig() {
        let config = { objects: [] };
        let filtered = this.objects.filter((obj) => obj.save_to_file && !obj.parent);
        for (let o of filtered) {
            //If an object has a parent object, it's a descendent of a composite object
            //The parent will spawn this object when it's instantiated, so we do
            //not have to save this instance.
            let state = {
                position: math_1.Vec.from(o.state.position)
            };
            if (o.state.velocity.x != 0 || o.state.velocity.y != 0) {
                state.velocity = math_1.Vec.from(o.state.velocity);
            }
            if (o.state.rotation != 0) {
                state.rotation = o.state.rotation;
            }
            if (o.state.scaling.width != 1 || o.state.scaling.height != 1) {
                state.scaling = o.state.scaling;
            }
            if (Object.keys(o.params).length > 0) {
                config.objects.push({
                    type: o.constructor.name,
                    state,
                    parameters: o.params
                });
            }
            else {
                config.objects.push({
                    type: o.constructor.name,
                    state
                });
            }
        }
        return config;
    }
    //This handles the loading of all room sprites, and
    //any objects it contains.
    load() {
        let _this = this;
        return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {
            let background = new Image();
            let object_promise_array = this.objects.map((a) => a.load());
            yield Promise.all(object_promise_array);
            let background_url = this.background_url;
            if (van_1.DEBUG) {
                background_url = debug_1.path.join(debug_1.root_path, this.background_url);
            }
            background.src = background_url;
            background.onerror = (() => {
                throw new Error("Loading Error:" + this.background_url);
            });
            background.onload = (() => __awaiter(this, void 0, void 0, function* () {
                _this.background = background;
                yield this.audio.load();
                for (let cam of this.cameras) {
                    if (cam.hud) {
                        yield cam.hud.load();
                    }
                }
                resolve();
            }));
        }));
    }
    initialize() {
    }
    //This is used while loading objects from file, it's used to dynamically load
    //objects from the room's json. If adding items within code, it's better to create
    //new instances of objects through addItem
    createItemString(name, state_config, parameters) {
        return van_1.createItemString(name, state_config, parameters);
    }
    addItemStateConfig(config, id) {
        return __awaiter(this, void 0, void 0, function* () {
            if (prefabs_1.prefabs[config.type]) {
                let params = config.parameters || {};
                let new_obj = (new prefabs_1.prefabs[config.type](Object.assign({}, config.state), params));
                if (id)
                    new_obj.id = id;
                yield this.addItems(new_obj.combinedObjects());
            }
            else {
                console.log("UNKNOWN TYPE ATTEMPTED TO LOAD: " + config.type);
            }
        });
    }
    //Adds the passed item to the room.
    addItem(o, list = this.objects) {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.addItems([...o.combinedObjects()], list);
        });
    }
    //Adds every item in the passed array to the room.
    addItems(o, list = this.objects) {
        return __awaiter(this, void 0, void 0, function* () {
            for (let ob of o) {
                ob.game = this.game;
            }
            yield Promise.all(o.map((a) => a.load()));
            if (list == this.objects) {
                for (let ob of o) {
                    let cords = this.proximity_map.getBoxLocations(ob);
                    for (let cord of cords) {
                        this.proximity_map.add(cord, ob);
                    }
                }
            }
            list.push(...o);
            if (this.game.state.current_room && o.some((o) => o.static)) {
                this.game.drawAllStatics();
            }
            if (van_1.DEBUG && list === this.objects) {
                debug_1.debug_update_obj_list();
            }
        });
    }
    //Deletes the item and removes it from the room's object list
    deleteItem(id, list = this.objects) {
        for (let a = 0; a < list.length; a++) {
            if (list[a].id === id) {
                list.splice(a, 1);
                a--;
            }
        }
        if (van_1.DEBUG && list === this.objects) {
            debug_1.debug_update_obj_list();
        }
    }
    //Any particles that are needed in the room should be added to the particle array here.
    registerParticles() {
    }
    //Adds a bind that is executed when the passed key is activated
    //key examples: mouse0down KeyAdown KeyLup
    bindControl(key, x, func, interval = 1) {
        this.binds.push(controls_1.Bind(key, func, x, interval, false));
    }
    //Checks for objects that have collision at the passed point
    checkCollisionsPoint(pos, exempt, list = this.objects) {
        return this.checkCollisions({ x: pos.x, y: pos.y, height: 0, width: 0 }, exempt, list);
    }
    //Checks for any objects at the passed point
    checkObjectsPoint(pos, exempt, list = this.objects) {
        return this.checkObjects({ x: pos.x, y: pos.y, height: 0, width: 0 }, exempt, list);
    }
    //Checks for collisions at the point that contain every tag within the second argument
    checkCollisionsPointInclusive(pos, tags, list = this.objects) {
        return this.checkCollisionsInclusive({ x: pos.x, y: pos.y, height: 0, width: 0 }, tags, list);
    }
    //Checks for any objects that contain every tag within the second argument
    checkObjectsPointInclusive(pos, tags, list = this.objects) {
        return this.checkObjectsInclusive({ x: pos.x, y: pos.y, height: 0, width: 0 }, tags, list);
    }
    //Checks for collisions in the box that contain the tags in the second argument
    checkCollisionsInclusive(box, tags, list = this.objects) {
        if (van_1.DEBUG) {
            van_1.render_collision_box(box);
        }
        if (list == this.objects) {
            list = this.proximity_map.getObjectsFromBox(box);
        }
        return list.filter(obj => obj.collision && obj.collidesWithBox(box) && tags.every((val) => obj.tags.has(val)));
    }
    //Checks for any objects in the box that contain all tags in the second argument
    checkObjectsInclusive(box, tags, list = this.objects) {
        if (van_1.DEBUG && debug_1.debug_state.render_toggles["collision_box"]) {
            van_1.render_collision_box(box);
        }
        if (list == this.objects) {
            list = this.proximity_map.getObjectsFromBox(box);
        }
        return list.filter((obj) => obj.collidesWithBox(box) && tags.every((val) => obj.tags.has(val)));
    }
    //checks for objects with collision in the box that do not contain the tags in the second argument
    checkCollisions(box, exempt = [], list = this.objects) {
        if (van_1.DEBUG && debug_1.debug_state.render_toggles["collision_box"]) {
            van_1.render_collision_box(box);
        }
        if (list == this.objects) {
            list = this.proximity_map.getObjectsFromBox(box);
        }
        return list.filter(obj => obj.collision && obj.collidesWithBox(box) && exempt.every((val) => !obj.tags.has(val)));
    }
    //checks for  any objects in the box that do not contain the tags in the second argument
    checkObjects(box, exempt = [], list = this.objects) {
        if (van_1.DEBUG && debug_1.debug_state.render_toggles["collision_box"]) {
            van_1.render_collision_box(box);
        }
        if (list == this.objects) {
            list = this.proximity_map.getObjectsFromBox(box);
        }
        return list.filter(obj => obj.collidesWithBox(box) && exempt.every((val) => !obj.tags.has(val)));
    }
    //This method should be used to call bindControl and create any needed keyBindings
    registerControls() {
    }
    registerAudio() {
    }
    cleanup() {
    }
    cache(key, value) {
        if (!this.cache_entries[key]) {
            this.cache_entries[key] = value;
        }
        return this.cache_entries[key];
    }
    //The room's state updating function.
    statef(time) {
        for (let particle of this.particles_arr) {
            particle.statef(time);
        }
        for (let text_node of this.text_nodes) {
            text_node.statef(time);
        }
        let ticking_objects = this.objects.filter((o) => o.tick_state);
        for (let a = 0; a < ticking_objects.length; a++) {
            //This function checks the velocity of every object, and moves it into it's next location
            //provided that it can fit there.
            collision_1.velocityCollisionCheck(ticking_objects[a], this.objects);
            ticking_objects[a].statef(time);
        }
        for (let cam of this.cameras) {
            if (cam.hud) {
                cam.hud.statef(time);
            }
            cam.statef(time);
        }
    }
    emitParticle(name, pos, lifetime, pos_range) {
        let state = {
            position: math_1.Vec.func(pos, (a) => a + math_1.getRandInt(-pos_range, pos_range)),
            velocity: { x: 0, y: 0 },
            rotation: 0,
            scaling: { width: 1, height: 1 }
        };
        this.addItem(new sprite_1.Particle(this.particles[name], state, lifetime), this.particles_arr);
    }
    getObj(id) {
        for (let a = 0; a < this.objects.length; a++) {
            if (this.objects[a].id == id) {
                return this.objects[a];
            }
        }
        return null;
    }
    //Gets any objects that have the passed tag
    getObjByTag(tag) {
        return this.objects.filter((a) => a.tags.has(tag));
    }
    //renders the room's sprite
    renderf(time) {
        return {
            sprite_sheet: this.background,
            name: this.constructor.name,
            left: 0,
            top: 0,
            sprite_height: this.background.height,
            sprite_width: this.background.width,
            opacity: 1
        };
    }
}
exports.room = room;
class p2p_room extends room {
    constructor(game, config) {
        super(game, config);
        this.game = game;
        this.network = game.network;
        this.net_type = game.net_type;
    }
    parse_packet(type, data, id) {
    }
    send_packet(type, data, peer_id) {
        this.network.send(type, data);
    }
    addItemNetwork(type, state, parameters) {
        return __awaiter(this, void 0, void 0, function* () {
            let id = math_1.getRandInt(100000, 999999);
            let state_config = {
                type,
                state,
                parameters
            };
            this.send_packet("add_item", {
                id,
                state_config
            });
            yield this.addItemStateConfig(state_config, id.toString());
        });
    }
    recieve_packet(id, type, data) {
    }
    statef(time) {
        super.statef(time);
        let network_items = this.objects.filter((o) => o.state_properties_to_sync.length > 0 && Object.keys(o.diff_state).length > 0);
        for (let item of network_items) {
            this.send_packet("update_item", {
                id: item.id,
                state: item.diff_state
            });
        }
    }
}
exports.p2p_room = p2p_room;


/***/ }),

/***/ "./src/lib/sprite.ts":
/*!***************************!*\
  !*** ./src/lib/sprite.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.sprite_gen = exports.Particle = void 0;
const object_1 = __webpack_require__(/*! ./object */ "./src/lib/object.ts");
const math_1 = __webpack_require__(/*! ./math */ "./src/lib/math.ts");
class Particle extends object_1.obj {
    constructor(part, state, lifetime) {
        super(state);
        this.collision = false;
        this.state.position = math_1.Vec.create(this.state.position.x, this.state.position.y);
        this.state.lifetime = 0;
        this.sprite_url = part.sprite;
        this.height = part.height;
        this.width = part.width;
        this.max_lifetime = lifetime;
    }
    statef(time) {
        this.state.lifetime += time;
        if (this.state.lifetime > this.max_lifetime) {
            this.delete();
        }
    }
    delete() {
        let room = this.game.getRoom();
        room.deleteItem(this.id, room.particles_arr);
    }
    renderf(time) {
        if (!this.selected_sprite) {
            let sprites = sprite_gen(this, this.width, this.height);
            let random_row = math_1.getRandInt(0, sprites.length);
            let random_col = math_1.getRandInt(0, sprites[random_row].length);
            this.selected_sprite = sprites[random_row][random_col];
        }
        this.selected_sprite.opacity = 1 - this.state.lifetime / this.max_lifetime;
        return {
            x: this.state.position.x,
            y: this.state.position.y,
            sprite: this.selected_sprite
        };
    }
}
exports.Particle = Particle;
function sprite_gen(obj, sprite_width, sprite_height) {
    let width = obj.sprite_sheet.width;
    let height = obj.sprite_sheet.height;
    let sprites = [];
    for (let b = 0; b < height; b += sprite_height) {
        sprites.push([]);
        for (let a = 0; a < width; a += sprite_width) {
            sprites[b / sprite_height].push({
                sprite_sheet: obj.sprite_sheet,
                sprite_sheet_buffer: obj.sprite_sheet_buffer,
                name: obj.constructor.name,
                left: a,
                top: b,
                sprite_height,
                sprite_width,
                opacity: 1
            });
        }
    }
    return sprites;
}
exports.sprite_gen = sprite_gen;


/***/ }),

/***/ "./src/lib/templates/object_template.ts":
/*!**********************************************!*\
  !*** ./src/lib/templates/object_template.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.object_template = void 0;
exports.object_template = `import {obj} from "lib/object";
import { obj_state, Vector } from "lib/state";
import {copy} from "src/van";

export interface template_state extends obj_state{
    
}
    
export interface template_parameters{
    
}
    
export class template extends obj{
  sprite_url = "./sprites/Error.png";
  height = 100;
  width = 100;
  tags:Array<string>;
  collision = true;
  render = true;
  state:template_state;
  params:template_parameters;
  static default_params:template_parameters = {}
  constructor(state:obj_state,params:template_parameters = copy(template.default_params)){
    super(state,params);
  }
  statef(time_delta:number){
    super.statef(time_delta);
  }
  renderf(time_delta:number){
   return super.renderf(time_delta); 
  }
  registerAnimations(){
    
  }
  registerAudio(){
    
  }
  registerControls(){
        
  }
}`;


/***/ }),

/***/ "./src/lib/templates/room_template.ts":
/*!********************************************!*\
  !*** ./src/lib/templates/room_template.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.room_template = void 0;
exports.room_template = `import { room } from "lib/room";
import { game } from "src/van";
import { state_config } from "lib/room";
import * as config from "./template.json";
let cfig = config as unknown as state_config;
interface template_state {

}

export class template extends room<template_state>{
  background_url = "./sprites/Error.png";
  render = true;
  constructor(game: game<unknown>) {
    super(game, cfig);
  }
  registerControls() {

  }
  registerParticles() {

  }
  statef(delta_time: number) {
    super.statef(delta_time);
  }

}`;


/***/ }),

/***/ "./src/lib/utils.ts":
/*!**************************!*\
  !*** ./src/lib/utils.ts ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.range = exports.diff = void 0;
exports.diff = function (prev_state, new_state) {
    let delta_state = {};
    let keys = Object.keys(new_state);
    for (let key of keys) {
        if (!prev_state || new_state[key] != prev_state[key]) {
            delta_state[key] = new_state[key];
        }
    }
    return delta_state;
};
exports.range = function (first, second) {
    let start;
    let end;
    if (second) {
        start = first;
        end = second;
    }
    else {
        start = 0;
        end = first;
    }
    let to_return = [];
    for (let a = start; a < end; a++) {
        to_return.push(a);
    }
    return to_return;
};


/***/ }),

/***/ "./src/van.ts":
/*!********************!*\
  !*** ./src/van.ts ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.peer_to_peer_game = exports.peer_connection = exports.game = exports.createItemString = exports.objects = exports.rooms = exports.copy = exports.render_line = exports.render_filled_box = exports.render_collision_box = exports.setPaused = exports.setDebug = exports.viewport = exports.GetViewportDimensions = exports.GetScreenDimensions = exports.PAUSED = exports.DEBUG = void 0;
exports.DEBUG = "dev" === 'dev';
exports.PAUSED = "dev" === 'dev';
const render_1 = __webpack_require__(/*! ./lib/render */ "./src/lib/render.ts");
const controls_1 = __webpack_require__(/*! ./lib/controls */ "./src/lib/controls.ts");
const debug_1 = __webpack_require__(/*! ./lib/debug */ "./src/lib/debug.ts");
const rooms_1 = __webpack_require__(/*! ./game/rooms/rooms */ "./src/game/rooms/rooms.ts");
const network_1 = __webpack_require__(/*! lib/network */ "./src/lib/network.ts");
const prefabs_1 = __webpack_require__(/*! game/objects/prefabs */ "./src/game/objects/prefabs.ts");
const main_1 = __webpack_require__(/*! game/main */ "./src/game/main.ts");
let canvas_element = document.getElementById("target");
let context = canvas_element.getContext("2d");
let screen_width = window.innerWidth;
let screen_height = window.innerHeight;
//How often the game logic loop should run, in milliseconds
let logic_loop_interval = 1000 / 60;
let last_time = new Date();
let last_render_time = 0;
function GetScreenDimensions() {
    return ({
        width: screen_width,
        height: screen_height
    });
}
exports.GetScreenDimensions = GetScreenDimensions;
function GetViewportDimensions() {
    return ({
        height: canvas_element.height,
        width: canvas_element.width
    });
}
exports.GetViewportDimensions = GetViewportDimensions;
exports.viewport = {
    height: GetViewportDimensions().height,
    width: GetViewportDimensions().width
};
window.onresize = () => {
    exports.viewport.height = GetViewportDimensions().height;
    exports.viewport.width = GetViewportDimensions().width;
};
function setDebug(x) {
    exports.DEBUG = x;
}
exports.setDebug = setDebug;
function setPaused(x) {
    exports.PAUSED = x;
    if (x) {
        let room = main_1.g.getRoom();
        room.audio.cleanup();
        room.objects.forEach(x => x.audio.cleanup());
    }
}
exports.setPaused = setPaused;
exports.render_collision_box = (box, color = "red") => {
    boxes.push({
        box,
        color
    });
};
exports.render_filled_box = (box, color = "red", opacity = 1) => {
    filled_boxes.push({
        box,
        color,
        opacity
    });
};
let lines = [];
exports.render_line = (a) => {
    lines.push(a);
};
let boxes = [];
let filled_boxes = [];
exports.copy = (a) => {
    return JSON.parse(JSON.stringify(a));
};
exports.rooms = [];
//export let worker_pool = new WorkerPool(renderer_path,1);
exports.createItemString = (name, state_config, parameters) => {
    if (prefabs_1.prefabs[name]) {
        let new_obj = (new prefabs_1.prefabs[name](Object.assign({}, state_config), parameters));
        return new_obj;
    }
    throw new Error(`Attempted to create unknown obj type <${name}>`);
};
class game {
    constructor(ctx, init_state) {
        this.prototypes = [];
        this.rooms = [];
        this.isRendering = false;
        this.state = {
            canvases: [canvas_element],
            logic: undefined,
            context: ctx,
            cameras: [],
            current_room: undefined,
            globals: init_state
        };
        this.offscreen_canvas = document.createElement("canvas");
        /*
          this.test_canvas = <HTMLCanvasElement>document.getElementById("test");
          this.test_canvas.height = viewport.height;
          this.test_canvas.width = viewport.width;
          let offscreen = this.test_canvas.transferControlToOffscreen();
          //worker_pool.send_all("canvas_pass",{canvas:offscreen,viewport},[offscreen])
          */
        this.offscreen_context = this.offscreen_canvas.getContext("2d");
        this.static_canvas = document.createElement("canvas");
        this.static_context = this.static_canvas.getContext("2d");
        //worker_pool.send_all("canvas_pass",{canvas:offscreen,viewport},[offscreen])
        //DEBUG determines whether the game is running within the editor
        if (exports.DEBUG) {
            //Sets up some global debug state and the editor keybindings
            debug_1.debug_setup();
            this.state.canvases.push(debug_1.debug_state.target);
            //Initializes a separate logic loop solely for the editor
            //This separation allows for the editor to interact with the environment while
            //the actual room's state loop is paused.
            setInterval(() => {
                if (this.getRoom()) {
                    //This functions handles the editor interactions with the game environment
                    debug_1.debug_statef(16.66);
                }
            }, 16.66);
        }
        //Creates a onclick function on the window that handles element onclick functions
        //init_click_handler(this);
    }
    render(t) {
        return __awaiter(this, void 0, void 0, function* () {
            //t is current render time
            let delta_time = t - last_render_time;
            last_render_time = t;
            let all_cameras = [...this.state.cameras, ...this.state.current_room.cameras];
            let editor_camera_index = -1;
            if (exports.DEBUG) {
                debug_1.debug_state.render_delta_time = delta_time;
                all_cameras = [...all_cameras, debug_1.debug_state.camera];
                editor_camera_index = all_cameras.length - 1;
                if (all_cameras.length === 1) {
                    this.state.context.fillStyle = "white";
                    this.state.context.font = "50px Arial";
                    this.state.context.textAlign = "center";
                    this.state.context.fillText("NO CAMERA", exports.viewport.width / 2, exports.viewport.height / 2);
                }
                //The editor camera is always the last camera inside the cameras array
                //the editor camera is rendered to a different canvas than the main game canvas
                //so we use the camera's index to check what canvas to render to
            }
            for (let a = 0; a < all_cameras.length; a++) {
                let camera = all_cameras[a];
                //We render the cameras contents to an offscreen canvas, then copy its contents
                //to the main canvas.
                //This allows us to avoid any math needed to determine sprites that are partially offscreen
                //as any offscreen sections of the sprites will not be copied over, rather than explicitly 
                //calculating the cutoffs
                this.offscreen_canvas.height = camera.state.dimensions.height;
                this.offscreen_canvas.width = camera.state.dimensions.width;
                this.offscreen_context.fillStyle = "black";
                //let offscreen = new OffscreenCanvas(camera.state.dimensions.width,camera.state.dimensions.height);
                //await worker_pool.send("clear_canvas")
                this.offscreen_context.fillRect(0, 0, camera.state.dimensions.width, camera.state.dimensions.height);
                //This collision box represents the camera's field of view in the game space
                //We use the room's checkObjects function to find any object that exists within this area
                //These objects are the objects that need to be rendered for this camera
                let camera_box = {
                    x: camera.state.position.x,
                    y: camera.state.position.y,
                    width: camera.state.dimensions.width * (1 / camera.state.scaling),
                    height: camera.state.dimensions.height * (1 / camera.state.scaling)
                };
                let room = this.state.current_room;
                //List of all particles within the camera's fov
                let cords = room.proximity_map.getCordsFromBox(camera_box);
                let to_check = room.proximity_map.getObjectsFromCords(cords);
                let particle_collides = this.state.current_room.checkObjects(camera_box, [], this.state.current_room.particles_arr);
                //List of all objects within the camera's fov
                let camera_colliders = [...this.state.current_room.checkObjects(camera_box, [], to_check), ...particle_collides];
                let render_args = {
                    context: this.offscreen_context,
                    camera: camera,
                };
                //Renders the room's background.
                if (this.state.current_room.render) {
                    render_1.sprite_renderer(render_args, {
                        sprite: this.state.current_room.renderf(delta_time),
                        x: 0,
                        y: 0,
                        rotation: 0,
                        scale: {
                            width: 1,
                            height: 1
                        },
                        scale_type: render_1.scale_type.grow
                    });
                }
                render_1.canvas_renderer(render_args, {
                    canvas: this.static_canvas,
                    width: this.state.current_room.proximity_map.length,
                    height: this.state.current_room.proximity_map.length,
                    x: 0,
                    y: 0,
                    scale: { width: 1, height: 1 }
                });
                //Array of hitboxes for each item in the room
                let hitboxes = [];
                let render_toggles = debug_1.debug_state ? debug_1.debug_state.render_toggles : undefined;
                camera_colliders = camera_colliders.filter((b) => b.render && !b.static).sort((a, b) => (a.layer - b.layer));
                let promises = [];
                for (let a of camera_colliders) {
                    let rendered = a.renderTrack(t);
                    //Objects can return either a sprite, or an array of sprites to simplify the API
                    //For the user, and for use in composite objects(object that bundles other objects together)
                    //Internally, we convert any single sprite into an array of one sprite.
                    for (let positioned_sprite of rendered) {
                        //worker.postMessage(positioned_sprite.sprite.sprite_base64);
                        yield render_1.sprite_renderer(render_args, {
                            sprite: positioned_sprite.sprite,
                            x: positioned_sprite.x,
                            y: positioned_sprite.y,
                            rotation: a.state.rotation,
                            scale: a.state.scaling,
                            scale_type: a.scale_type
                        });
                    }
                    for (let node of a.text_nodes) {
                        render_1.text_renderer(render_args, {
                            x: node.state.position.x,
                            y: node.state.position.y,
                            font: node.renderf(t)
                        });
                    }
                    //Hitboxes are rendered late in the render loop, to ensure objects don't overlap them
                    //As we render objects, we add their hitboxes to this list
                    if (exports.DEBUG && a.collision && render_toggles["bounding_box"]) {
                        hitboxes.push(...a.getAllCollisionBoxes());
                    }
                }
                //This is a special class of object that exists in the game world
                for (let node of this.state.current_room.text_nodes) {
                    render_1.text_renderer(render_args, {
                        x: node.state.position.x,
                        y: node.state.position.y,
                        font: node.renderf(t)
                    });
                }
                if (camera.hud) {
                    let graphics = camera.hud.graphic_elements;
                    let text_elements = camera.hud.text_elements;
                    //Renders static graphics that are a part of the hud
                    for (let graphic of graphics.filter((b) => b.render && !b.static).sort((a, b) => (a.layer - b.layer))) {
                        let rendered = graphic.renderTrack(t);
                        if (graphic.render) {
                            for (let positioned_sprite of rendered) {
                                render_1.hud_sprite_renderer(render_args, {
                                    sprite: positioned_sprite.sprite,
                                    x: positioned_sprite.x,
                                    y: positioned_sprite.y,
                                    rotation: graphic.state.rotation,
                                    scale: graphic.state.scaling,
                                    scale_type: graphic.scale_type
                                });
                            }
                            for (let node of graphic.text_nodes) {
                                render_1.hud_text_renderer(render_args, {
                                    x: node.state.position.x,
                                    y: node.state.position.y,
                                    font: node.renderf(t)
                                });
                            }
                        }
                    }
                    for (let text of text_elements) {
                        render_1.hud_text_renderer(render_args, {
                            x: text.state.position.x,
                            y: text.state.position.y,
                            font: text.renderf(t)
                        });
                    }
                }
                //If a camera is marked as a debug camera, we render the
                //  hitboxes, and potentially update the editor
                if (camera.state.debug) {
                    if (render_toggles["proximity_box"]) {
                        let room = this.state.current_room;
                        let room_length = room.proximity_map.length;
                        let square_length = room.proximity_map.square_length;
                        let dimension = room_length / square_length;
                        for (let x = 0; x < dimension; x++) {
                            for (let y = 0; y < dimension; y++) {
                                exports.render_collision_box({
                                    x: x * square_length + square_length / 2 - room_length / 2,
                                    y: y * square_length + square_length / 2 - room_length / 2,
                                    width: square_length,
                                    height: square_length
                                }, "purple");
                            }
                        }
                    }
                    if (render_toggles["bounding_box"]) {
                        for (let obj of camera_colliders) {
                            exports.render_collision_box(obj.getFullCollisionBox(), "orange");
                        }
                    }
                    if (exports.DEBUG && debug_1.debug_state.render_toggles["path_finding"]) {
                        let room = this.state.current_room;
                        if (room.computeNavMesh) {
                            let mesh = room.computeNavMesh(room.floor_tag, "");
                            for (let y = 0; y < mesh.grid.length; y++) {
                                for (let x = 0; x < mesh.grid[y].length; x++) {
                                    let final_y = y * room.nav_node_diameter + (mesh.box.y - mesh.box.height / 2) + room.nav_node_diameter / 2;
                                    let final_x = x * room.nav_node_diameter + (mesh.box.x - mesh.box.width / 2) + room.nav_node_diameter / 2;
                                    exports.render_filled_box({
                                        x: final_x,
                                        y: final_y,
                                        width: room.nav_node_diameter,
                                        height: room.nav_node_diameter
                                    }, mesh.grid[y][x] == 0 ? "green" : "red", 0.4);
                                }
                            }
                        }
                    }
                    let box;
                    let boxes_copy = [...boxes];
                    let lines_copy = [...lines];
                    while (lines_copy.length > 0) {
                        let line = lines_copy.pop();
                        render_1.line_renderer(this.offscreen_context, line, "orange", 10, camera);
                    }
                    while (boxes_copy.length > 0) {
                        let box_entry = boxes_copy.pop();
                        let rect = {
                            width: box_entry.box.width,
                            height: box_entry.box.height
                        };
                        render_1.stroked_rect_renderer(this.offscreen_context, rect, box_entry.box.x, box_entry.box.y, box_entry.color, 1, camera);
                    }
                    while (hitboxes.length > 0) {
                        let box = hitboxes.pop();
                        let rect = {
                            width: box.width,
                            height: box.height
                        };
                        render_1.stroked_rect_renderer(this.offscreen_context, rect, box.x, box.y, "#008000", 1, camera);
                    }
                    while (filled_boxes.length > 0) {
                        let box = filled_boxes.pop();
                        let rect = {
                            width: box.box.width,
                            height: box.box.height
                        };
                        render_1.rect_renderer(this.offscreen_context, rect, box.box.x, box.box.y, box.color, camera, box.opacity);
                    }
                    //Draws a special box around the currently selected element
                    //inside the editor UI
                    if (exports.DEBUG && debug_1.debug_state.selected_properties_element) {
                        let coll = debug_1.debug_state.selected_properties_element.getFullCollisionBox();
                        render_1.rect_renderer(this.offscreen_context, { width: 5, height: 5 }, coll.x, coll.y, "skyblue", camera);
                        render_1.stroked_rect_renderer(this.offscreen_context, coll, coll.x, coll.y, "blue", 1, camera);
                    }
                    render_1.stroked_rect_renderer(this.offscreen_context, { width: this.state.current_room.proximity_map.length, height: this.state.current_room.proximity_map.length }, 0, 0, "purple", 10, camera);
                }
                //Separate canvas for the editor camera
                if (a !== editor_camera_index) {
                    //this.state.context.drawImage(this.test_canvas, camera.state.viewport.x, camera.state.viewport.y);
                    this.state.context.drawImage(this.offscreen_canvas, camera.state.viewport.x, camera.state.viewport.y);
                }
                else {
                    //debug_state.target.getContext("2d").drawImage(this.test_canvas, camera.state.viewport.x, camera.state.viewport.y);  
                    debug_1.debug_state.target.getContext("2d").drawImage(this.offscreen_canvas, camera.state.viewport.x, camera.state.viewport.y);
                }
            }
            if (exports.DEBUG) {
                boxes = [];
                filled_boxes = [];
                lines = [];
            }
            requestAnimationFrame((a) => __awaiter(this, void 0, void 0, function* () {
                if (this.isRendering) {
                    yield this.render(a);
                }
            }));
        });
    }
    start_logic(a) {
        //this is the room's state loop
        return window.setInterval(() => {
            let new_time = new Date();
            if (!exports.PAUSED) {
                let time_since = new_time.getTime() - last_time.getTime();
                let room = this.state.current_room;
                if (room) {
                    room.statef(time_since);
                    if (this.state.cameras) {
                        for (let cameras of this.state.cameras) {
                            if (cameras.hud) {
                                cameras.hud.statef(time_since);
                            }
                        }
                    }
                }
            }
            last_time = new_time;
            //This functions handles binds that occur on an interval
            controls_1.ExecuteRepeatBinds(a);
            var gamepads = [...navigator.getGamepads()];
            for (let gamepad of gamepads.filter(pad => pad != null)) {
                controls_1.handleGamepad(gamepad);
            }
        }, a);
    }
    getRoom() {
        return this.state.current_room;
    }
    loadRoomString(x) {
        return __awaiter(this, void 0, void 0, function* () {
            //room list is a object that contains each room's class,
            //with the room's name as the key for class
            //This object is populated at compile time
            let loaded_room = false;
            for (let a of Object.keys(rooms_1.rooms)) {
                if (a == x) {
                    //this isn't particularly type-safe.
                    let new_room = new rooms_1.rooms[a](this);
                    yield this.loadRoom(new_room);
                    return;
                }
            }
            throw new Error("Attempted to load non-existing room.");
        });
    }
    //Redraws any static objects contained within the list
    drawStaticObjects(input) {
        let room_length = this.state.current_room.proximity_map.length;
        let statics = input.filter(u => u.static);
        /*This camera spans the entire world space, which we use to capture
        A render of every static objects, which we cache. Instead of rendering
        every static object every frame, we render the cached image. */
        let static_cam = new render_1.Camera({
            x: 0,
            y: 0,
            dimensions: { height: room_length, width: room_length },
            scaling: 1,
            debug: false
        }, {
            x: 0,
            y: 0,
            width: 1,
            height: 1
        });
        statics.forEach((u) => {
            let rendered = u.renderTrack(u.last_render);
            for (let r of rendered) {
                render_1.sprite_renderer({
                    context: this.static_context,
                    camera: static_cam
                }, {
                    sprite: r.sprite,
                    x: r.x,
                    y: r.y,
                    rotation: u.state.rotation,
                    scale: u.state.scaling,
                    scale_type: u.scale_type
                });
            }
        });
    }
    //Redraws the statics that are contained within the input collision box.
    updateStaticsInCollision(input) {
        let prox_boxes = this.state.current_room.proximity_map.getCordsFromBox(input);
        let square_length = this.state.current_room.proximity_map.square_length;
        let room_length = this.state.current_room.proximity_map.length;
        for (let box of prox_boxes) {
            this.static_context.clearRect(box.x * square_length, room_length - (box.y * square_length + square_length), square_length, square_length);
        }
        let statics = this.state.current_room.proximity_map.getObjectsFromCords(prox_boxes);
        this.drawStaticObjects(statics);
    }
    //Creates the inital cached render of the static objects.
    drawAllStatics() {
        let room_length = this.state.current_room.proximity_map.length;
        this.static_canvas.width = room_length;
        this.static_canvas.height = room_length;
        this.static_context.clearRect(0, 0, room_length, room_length);
        this.drawStaticObjects(this.state.current_room.objects);
    }
    loadRoom(x) {
        return __awaiter(this, void 0, void 0, function* () {
            //Clears the room's logic loop if one
            //Was already running
            this.isRendering = false;
            if (this.state.logic) {
                window.clearInterval(this.state.logic);
            }
            //This reference is used during initialization
            x.game = this;
            //Deletes each object in the room (which also unbinds their binds),
            //and unbinds the room's bindings.
            if (this.state.current_room !== undefined) {
                this.state.current_room.audio.cleanup();
                this.state.current_room.valid = false;
                while (this.state.current_room.objects.length > 0) {
                    this.state.current_room.objects[0].audio.cleanup();
                    this.state.current_room.objects[0].delete();
                }
                for (let id of this.state.current_room.binds) {
                    controls_1.Unbind(id);
                }
            }
            yield x.load();
            for (let c of x.config.objects) {
                //This handles loading objects from the saved json file associated with each room.
                yield x.addItemStateConfig(c);
            }
            x.registerControls();
            x.registerParticles();
            x.registerAudio();
            this.state.current_room = x;
            yield this.state.current_room.initialize();
            this.drawAllStatics();
            this.state.logic = this.start_logic(logic_loop_interval);
            if (exports.DEBUG) {
                debug_1.debug_update_room_list();
                debug_1.debug_update_prefabs();
                debug_1.debug_update_obj_list();
            }
            if (!this.isRendering) {
                this.isRendering = true;
                //This starts the render loop for the room
                this.render(0);
            }
        });
    }
}
exports.game = game;
var peer_connection;
(function (peer_connection) {
    peer_connection[peer_connection["child"] = 0] = "child";
    peer_connection[peer_connection["host"] = 1] = "host";
})(peer_connection = exports.peer_connection || (exports.peer_connection = {}));
class peer_to_peer_game extends game {
    constructor(ctx, init_state) {
        super(ctx, init_state);
        this.net_type = network_1.net_type.web;
        this.network = new network_1.Web();
        this.network.game = this;
    }
}
exports.peer_to_peer_game = peer_to_peer_game;


/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NoZXNzLmpzL2NoZXNzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wZWVyanMvZGlzdCBzeW5jIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wZWVyanMvZGlzdC9wZWVyanMubWluLmpzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvb2JqZWN0cy9hYnN0cmFjdC9pdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL29iamVjdHMvYWJzdHJhY3QvcGllY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvb2JqZWN0cy9hYnN0cmFjdC93b29kX2Zsb29yLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL29iamVjdHMvYmxhY2tfYmFja2dyb3VuZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9vYmplY3RzL2JvYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL29iamVjdHMvZXhhbXBsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9vYmplY3RzL2ludl9pY29uLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL29iamVjdHMvaW52ZW50b3J5X2NsaWNrcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9vYmplY3RzL21haW5fY2hhcmFjdGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL29iamVjdHMvcGF3bi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9vYmplY3RzL3ByZWZhYnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvb2JqZWN0cy90ZXN0X2NoYXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvb2JqZWN0cy90ZXN0X2l0ZW0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvb2JqZWN0cy90ZXN0X2l0ZW0yLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL29iamVjdHMvdGV4dF9iYWNrZ3JvdW5kLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL29iamVjdHMvd29vZF9mbG9vci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9yb29tcy9hYnN0cmFjdC9QYXRoaW5nX1Jvb20udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvcm9vbXMvYWJzdHJhY3QvdG9wX2Rvd24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvcm9vbXMvYm9hcmRWaWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL3Jvb21zL3Jvb21zLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL3Jvb21zL3Rlc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9hdWRpby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL2NvbGxpc2lvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL2NvbnRyb2xzLnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvZGVidWcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9odWQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9tYXRoLnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvbmV0d29yay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL29iamVjdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL3JlbmRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL3Jvb20udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9zcHJpdGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi90ZW1wbGF0ZXMvb2JqZWN0X3RlbXBsYXRlLnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvdGVtcGxhdGVzL3Jvb21fdGVtcGxhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi91dGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmFuLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7UUFBQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTs7O1FBR0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLDBDQUEwQyxnQ0FBZ0M7UUFDMUU7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSx3REFBd0Qsa0JBQWtCO1FBQzFFO1FBQ0EsaURBQWlELGNBQWM7UUFDL0Q7O1FBRUE7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBLHlDQUF5QyxpQ0FBaUM7UUFDMUUsZ0hBQWdILG1CQUFtQixFQUFFO1FBQ3JJO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0EsMkJBQTJCLDBCQUEwQixFQUFFO1FBQ3ZELGlDQUFpQyxlQUFlO1FBQ2hEO1FBQ0E7UUFDQTs7UUFFQTtRQUNBLHNEQUFzRCwrREFBK0Q7O1FBRXJIO1FBQ0E7OztRQUdBO1FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNsRkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQywrQkFBK0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxnQkFBZ0I7O0FBRWhCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUssaURBQWlEO0FBQ3RELEtBQUssaURBQWlEO0FBQ3REO0FBQ0E7QUFDQSxLQUFLLGlEQUFpRDtBQUN0RCxLQUFLLGlEQUFpRDtBQUN0RDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEscUNBQXFDLFNBQVM7QUFDOUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRU87QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDUDtBQUNBO0FBQ0E7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QUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3BCLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwQixDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEIsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3BCLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwQixDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEIsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3BCLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNyQixFQUFFLEdBQUcsQ0FBQztRQUNQLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRTtZQUM1QixDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEIsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3BCLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwQixDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEIsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3BCLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwQixD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O1FBQ0gsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ3JEO0FBQ0gsQ0FBQztBQUVZLHFCQUFhLEdBQUcsQ0FBQyxDQUFlLEVBQUMsQ0FBYSxFQUFFLEVBQUU7SUFDN0QsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUN0QixJQUFJLE9BQU8sR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDO0lBQy9DLElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDMUksSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUMzSSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQzVFLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ25DLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSztJQUNsQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ2pCLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN0QyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFO1FBQ3BCLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztLQUN6RDtTQUNJO1FBQ0gsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0tBQ3ZDO0lBQ0QsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUN0QixDQUFDO0FBU1ksdUJBQWUsR0FBRyxDQUFDLENBQWUsRUFBQyxDQUFhLEVBQUUsRUFBRTtJQUMvRCxJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDO0lBQ3RCLElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDO0lBQ3hFLElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDeEssSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDckwsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7SUFDaEUsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDN0QsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNqQixDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxPQUFPLEdBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsT0FBTyxHQUFHLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNsRSxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FD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RyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9JLElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFMUosSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzNJLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7SUFHdEosT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ3BCLE9BQU8sQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO0lBQzVCLE9BQU8sQ0FBQyxTQUFTLEdBQUcsU0FBUyxHQUFHLE1B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bGUiOiJ2YW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gXCIuL3NyYy9nYW1lL21haW4udHNcIik7XG4iLCIvKlxuICogQ29weXJpZ2h0IChjKSAyMDIyLCBKZWZmIEhseXdhIChqaGx5d2FAZ21haWwuY29tKVxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbiAqIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICpcbiAqIDEuIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAqICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gKiAyLiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4gKiAgICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG4gKiAgICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cbiAqXG4gKiBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIlxuICogQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRVxuICogSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0VcbiAqIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRVxuICogTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUlxuICogQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0ZcbiAqIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTU1xuICogSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU5cbiAqIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpXG4gKiBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRVxuICogUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG4gKlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuY29uc3QgU1lNQk9MUyA9ICdwbmJycWtQTkJSUUsnXG5cbmNvbnN0IERFRkFVTFRfUE9TSVRJT04gPVxuICAncm5icWtibnIvcHBwcHBwcHAvOC84LzgvOC9QUFBQUFBQUC9STkJRS0JOUiB3IEtRa3EgLSAwIDEnXG5cbmNvbnN0IFRFUk1JTkFUSU9OX01BUktFUlMgPSBbJzEtMCcsICcwLTEnLCAnMS8yLTEvMicsICcqJ11cblxuY29uc3QgUEFXTl9PRkZTRVRTID0ge1xuICBiOiBbMTYsIDMyLCAxNywgMTVdLFxuICB3OiBbLTE2LCAtMzIsIC0xNywgLTE1XSxcbn1cblxuY29uc3QgUElFQ0VfT0ZGU0VUUyA9IHtcbiAgbjogWy0xOCwgLTMzLCAtMzEsIC0xNCwgMTgsIDMzLCAzMSwgMTRdLFxuICBiOiBbLTE3LCAtMTUsIDE3LCAxNV0sXG4gIHI6IFstMTYsIDEsIDE2LCAtMV0sXG4gIHE6IFstMTcsIC0xNiwgLTE1LCAxLCAxNywgMTYsIDE1LCAtMV0sXG4gIGs6IFstMTcsIC0xNiwgLTE1LCAxLCAxNywgMTYsIDE1LCAtMV0sXG59XG5cbi8vIHByZXR0aWVyLWlnbm9yZVxuY29uc3QgQVRUQUNLUyA9IFtcbiAgMjAsIDAsIDAsIDAsIDAsIDAsIDAsIDI0LCAgMCwgMCwgMCwgMCwgMCwgMCwyMCwgMCxcbiAgIDAsMjAsIDAsIDAsIDAsIDAsIDAsIDI0LCAgMCwgMCwgMCwgMCwgMCwyMCwgMCwgMCxcbiAgIDAsIDAsMjAsIDAsIDAsIDAsIDAsIDI0LCAgMCwgMCwgMCwgMCwyMCwgMCwgMCwgMCxcbiAgIDAsIDAsIDAsMjAsIDAsIDAsIDAsIDI0LCAgMCwgMCwgMCwyMCwgMCwgMCwgMCwgMCxcbiAgIDAsIDAsIDAsIDAsMjAsIDAsIDAsIDI0LCAgMCwgMCwyMCwgMCwgMCwgMCwgMCwgMCxcbiAgIDAsIDAsIDAsIDAsIDAsMjAsIDIsIDI0LCAgMiwyMCwgMCwgMCwgMCwgMCwgMCwgMCxcbiAgIDAsIDAsIDAsIDAsIDAsIDIsNTMsIDU2LCA1MywgMiwgMCwgMCwgMCwgMCwgMCwgMCxcbiAgMjQsMjQsMjQsMjQsMjQsMjQsNTYsICAwLCA1NiwyNCwyNCwyNCwyNCwyNCwyNCwgMCxcbiAgIDAsIDAsIDAsIDAsIDAsIDIsNTMsIDU2LCA1MywgMiwgMCwgMCwgMCwgMCwgMCwgMCxcbiAgIDAsIDAsIDAsIDAsIDAsMjAsIDIsIDI0LCAgMiwyMCwgMCwgMCwgMCwgMCwgMCwgMCxcbiAgIDAsIDAsIDAsIDAsMjAsIDAsIDAsIDI0LCAgMCwgMCwyMCwgMCwgMCwgMCwgMCwgMCxcbiAgIDAsIDAsIDAsMjAsIDAsIDAsIDAsIDI0LCAgMCwgMCwgMCwyMCwgMCwgMCwgMCwgMCxcbiAgIDAsIDAsMjAsIDAsIDAsIDAsIDAsIDI0LCAgMCwgMCwgMCwgMCwyMCwgMCwgMCwgMCxcbiAgIDAsMjAsIDAsIDAsIDAsIDAsIDAsIDI0LCAgMCwgMCwgMCwgMCwgMCwyMCwgMCwgMCxcbiAgMjAsIDAsIDAsIDAsIDAsIDAsIDAsIDI0LCAgMCwgMCwgMCwgMCwgMCwgMCwyMFxuXTtcblxuLy8gcHJldHRpZXItaWdub3JlXG5jb25zdCBSQVlTID0gW1xuICAgMTcsICAwLCAgMCwgIDAsICAwLCAgMCwgIDAsIDE2LCAgMCwgIDAsICAwLCAgMCwgIDAsICAwLCAxNSwgMCxcbiAgICAwLCAxNywgIDAsICAwLCAgMCwgIDAsICAwLCAxNiwgIDAsICAwLCAgMCwgIDAsICAwLCAxNSwgIDAsIDAsXG4gICAgMCwgIDAsIDE3LCAgMCwgIDAsICAwLCAgMCwgMTYsICAwLCAgMCwgIDAsICAwLCAxNSwgIDAsICAwLCAwLFxuICAgIDAsICAwLCAgMCwgMTcsICAwLCAgMCwgIDAsIDE2LCAgMCwgIDAsICAwLCAxNSwgIDAsICAwLCAgMCwgMCxcbiAgICAwLCAgMCwgIDAsICAwLCAxNywgIDAsICAwLCAxNiwgIDAsICAwLCAxNSwgIDAsICAwLCAgMCwgIDAsIDAsXG4gICAgMCwgIDAsICAwLCAgMCwgIDAsIDE3LCAgMCwgMTYsICAwLCAxNSwgIDAsICAwLCAgMCwgIDAsICAwLCAwLFxuICAgIDAsICAwLCAgMCwgIDAsICAwLCAgMCwgMTcsIDE2LCAxNSwgIDAsICAwLCAgMCwgIDAsICAwLCAgMCwgMCxcbiAgICAxLCAgMSwgIDEsICAxLCAgMSwgIDEsICAxLCAgMCwgLTEsIC0xLCAgLTEsLTEsIC0xLCAtMSwgLTEsIDAsXG4gICAgMCwgIDAsICAwLCAgMCwgIDAsICAwLC0xNSwtMTYsLTE3LCAgMCwgIDAsICAwLCAgMCwgIDAsICAwLCAwLFxuICAgIDAsICAwLCAgMCwgIDAsICAwLC0xNSwgIDAsLTE2LCAgMCwtMTcsICAwLCAgMCwgIDAsICAwLCAgMCwgMCxcbiAgICAwLCAgMCwgIDAsICAwLC0xNSwgIDAsICAwLC0xNiwgIDAsICAwLC0xNywgIDAsICAwLCAgMCwgIDAsIDAsXG4gICAgMCwgIDAsICAwLC0xNSwgIDAsICAwLCAgMCwtMTYsICAwLCAgMCwgIDAsLTE3LCAgMCwgIDAsICAwLCAwLFxuICAgIDAsICAwLC0xNSwgIDAsICAwLCAgMCwgIDAsLTE2LCAgMCwgIDAsICAwLCAgMCwtMTcsICAwLCAgMCwgMCxcbiAgICAwLC0xNSwgIDAsICAwLCAgMCwgIDAsICAwLC0xNiwgIDAsICAwLCAgMCwgIDAsICAwLC0xNywgIDAsIDAsXG4gIC0xNSwgIDAsICAwLCAgMCwgIDAsICAwLCAgMCwtMTYsICAwLCAgMCwgIDAsICAwLCAgMCwgIDAsLTE3XG5dO1xuXG5jb25zdCBTSElGVFMgPSB7IHA6IDAsIG46IDEsIGI6IDIsIHI6IDMsIHE6IDQsIGs6IDUgfVxuXG5jb25zdCBCSVRTID0ge1xuICBOT1JNQUw6IDEsXG4gIENBUFRVUkU6IDIsXG4gIEJJR19QQVdOOiA0LFxuICBFUF9DQVBUVVJFOiA4LFxuICBQUk9NT1RJT046IDE2LFxuICBLU0lERV9DQVNUTEU6IDMyLFxuICBRU0lERV9DQVNUTEU6IDY0LFxufVxuXG5jb25zdCBSQU5LXzEgPSA3XG5jb25zdCBSQU5LXzIgPSA2XG5jb25zdCBSQU5LXzMgPSA1XG5jb25zdCBSQU5LXzQgPSA0XG5jb25zdCBSQU5LXzUgPSAzXG5jb25zdCBSQU5LXzYgPSAyXG5jb25zdCBSQU5LXzcgPSAxXG5jb25zdCBSQU5LXzggPSAwXG5cbi8vIHByZXR0aWVyLWlnbm9yZVxuY29uc3QgU1FVQVJFX01BUCA9IHtcbiAgYTg6ICAgMCwgYjg6ICAgMSwgYzg6ICAgMiwgZDg6ICAgMywgZTg6ICAgNCwgZjg6ICAgNSwgZzg6ICAgNiwgaDg6ICAgNyxcbiAgYTc6ICAxNiwgYjc6ICAxNywgYzc6ICAxOCwgZDc6ICAxOSwgZTc6ICAyMCwgZjc6ICAyMSwgZzc6ICAyMiwgaDc6ICAyMyxcbiAgYTY6ICAzMiwgYjY6ICAzMywgYzY6ICAzNCwgZDY6ICAzNSwgZTY6ICAzNiwgZjY6ICAzNywgZzY6ICAzOCwgaDY6ICAzOSxcbiAgYTU6ICA0OCwgYjU6ICA0OSwgYzU6ICA1MCwgZDU6ICA1MSwgZTU6ICA1MiwgZjU6ICA1MywgZzU6ICA1NCwgaDU6ICA1NSxcbiAgYTQ6ICA2NCwgYjQ6ICA2NSwgYzQ6ICA2NiwgZDQ6ICA2NywgZTQ6ICA2OCwgZjQ6ICA2OSwgZzQ6ICA3MCwgaDQ6ICA3MSxcbiAgYTM6ICA4MCwgYjM6ICA4MSwgYzM6ICA4MiwgZDM6ICA4MywgZTM6ICA4NCwgZjM6ICA4NSwgZzM6ICA4NiwgaDM6ICA4NyxcbiAgYTI6ICA5NiwgYjI6ICA5NywgYzI6ICA5OCwgZDI6ICA5OSwgZTI6IDEwMCwgZjI6IDEwMSwgZzI6IDEwMiwgaDI6IDEwMyxcbiAgYTE6IDExMiwgYjE6IDExMywgYzE6IDExNCwgZDE6IDExNSwgZTE6IDExNiwgZjE6IDExNywgZzE6IDExOCwgaDE6IDExOVxufTtcblxuY29uc3QgUk9PS1MgPSB7XG4gIHc6IFtcbiAgICB7IHNxdWFyZTogU1FVQVJFX01BUC5hMSwgZmxhZzogQklUUy5RU0lERV9DQVNUTEUgfSxcbiAgICB7IHNxdWFyZTogU1FVQVJFX01BUC5oMSwgZmxhZzogQklUUy5LU0lERV9DQVNUTEUgfSxcbiAgXSxcbiAgYjogW1xuICAgIHsgc3F1YXJlOiBTUVVBUkVfTUFQLmE4LCBmbGFnOiBCSVRTLlFTSURFX0NBU1RMRSB9LFxuICAgIHsgc3F1YXJlOiBTUVVBUkVfTUFQLmg4LCBmbGFnOiBCSVRTLktTSURFX0NBU1RMRSB9LFxuICBdLFxufVxuXG5jb25zdCBQQVJTRVJfU1RSSUNUID0gMFxuY29uc3QgUEFSU0VSX1NMT1BQWSA9IDFcblxuLyogdGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IGFtYmlndW91cyBtb3ZlcyAqL1xuZnVuY3Rpb24gZ2V0X2Rpc2FtYmlndWF0b3IobW92ZSwgbW92ZXMpIHtcbiAgdmFyIGZyb20gPSBtb3ZlLmZyb21cbiAgdmFyIHRvID0gbW92ZS50b1xuICB2YXIgcGllY2UgPSBtb3ZlLnBpZWNlXG5cbiAgdmFyIGFtYmlndWl0aWVzID0gMFxuICB2YXIgc2FtZV9yYW5rID0gMFxuICB2YXIgc2FtZV9maWxlID0gMFxuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBtb3Zlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBhbWJpZ19mcm9tID0gbW92ZXNbaV0uZnJvbVxuICAgIHZhciBhbWJpZ190byA9IG1vdmVzW2ldLnRvXG4gICAgdmFyIGFtYmlnX3BpZWNlID0gbW92ZXNbaV0ucGllY2VcblxuICAgIC8qIGlmIGEgbW92ZSBvZiB0aGUgc2FtZSBwaWVjZSB0eXBlIGVuZHMgb24gdGhlIHNhbWUgdG8gc3F1YXJlLCB3ZSdsbFxuICAgICAqIG5lZWQgdG8gYWRkIGEgZGlzYW1iaWd1YXRvciB0byB0aGUgYWxnZWJyYWljIG5vdGF0aW9uXG4gICAgICovXG4gICAgaWYgKHBpZWNlID09PSBhbWJpZ19waWVjZSAmJiBmcm9tICE9PSBhbWJpZ19mcm9tICYmIHRvID09PSBhbWJpZ190bykge1xuICAgICAgYW1iaWd1aXRpZXMrK1xuXG4gICAgICBpZiAocmFuayhmcm9tKSA9PT0gcmFuayhhbWJpZ19mcm9tKSkge1xuICAgICAgICBzYW1lX3JhbmsrK1xuICAgICAgfVxuXG4gICAgICBpZiAoZmlsZShmcm9tKSA9PT0gZmlsZShhbWJpZ19mcm9tKSkge1xuICAgICAgICBzYW1lX2ZpbGUrK1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChhbWJpZ3VpdGllcyA+IDApIHtcbiAgICAvKiBpZiB0aGVyZSBleGlzdHMgYSBzaW1pbGFyIG1vdmluZyBwaWVjZSBvbiB0aGUgc2FtZSByYW5rIGFuZCBmaWxlIGFzXG4gICAgICogdGhlIG1vdmUgaW4gcXVlc3Rpb24sIHVzZSB0aGUgc3F1YXJlIGFzIHRoZSBkaXNhbWJpZ3VhdG9yXG4gICAgICovXG4gICAgaWYgKHNhbWVfcmFuayA+IDAgJiYgc2FtZV9maWxlID4gMCkge1xuICAgICAgcmV0dXJuIGFsZ2VicmFpYyhmcm9tKVxuICAgIH0gZWxzZSBpZiAoc2FtZV9maWxlID4gMCkge1xuICAgICAgLyogaWYgdGhlIG1vdmluZyBwaWVjZSByZXN0cyBvbiB0aGUgc2FtZSBmaWxlLCB1c2UgdGhlIHJhbmsgc3ltYm9sIGFzIHRoZVxuICAgICAgICogZGlzYW1iaWd1YXRvclxuICAgICAgICovXG4gICAgICByZXR1cm4gYWxnZWJyYWljKGZyb20pLmNoYXJBdCgxKVxuICAgIH0gZWxzZSB7XG4gICAgICAvKiBlbHNlIHVzZSB0aGUgZmlsZSBzeW1ib2wgKi9cbiAgICAgIHJldHVybiBhbGdlYnJhaWMoZnJvbSkuY2hhckF0KDApXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuICcnXG59XG5cbmZ1bmN0aW9uIGluZmVyX3BpZWNlX3R5cGUoc2FuKSB7XG4gIHZhciBwaWVjZV90eXBlID0gc2FuLmNoYXJBdCgwKVxuICBpZiAocGllY2VfdHlwZSA+PSAnYScgJiYgcGllY2VfdHlwZSA8PSAnaCcpIHtcbiAgICB2YXIgbWF0Y2hlcyA9IHNhbi5tYXRjaCgvW2EtaF1cXGQuKlthLWhdXFxkLylcbiAgICBpZiAobWF0Y2hlcykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICByZXR1cm4gUEFXTlxuICB9XG4gIHBpZWNlX3R5cGUgPSBwaWVjZV90eXBlLnRvTG93ZXJDYXNlKClcbiAgaWYgKHBpZWNlX3R5cGUgPT09ICdvJykge1xuICAgIHJldHVybiBLSU5HXG4gIH1cbiAgcmV0dXJuIHBpZWNlX3R5cGVcbn1cblxuLy8gcGFyc2VzIGFsbCBvZiB0aGUgZGVjb3JhdG9ycyBvdXQgb2YgYSBTQU4gc3RyaW5nXG5mdW5jdGlvbiBzdHJpcHBlZF9zYW4obW92ZSkge1xuICByZXR1cm4gbW92ZS5yZXBsYWNlKC89LywgJycpLnJlcGxhY2UoL1srI10/Wz8hXSokLywgJycpXG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogVVRJTElUWSBGVU5DVElPTlNcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuZnVuY3Rpb24gcmFuayhpKSB7XG4gIHJldHVybiBpID4+IDRcbn1cblxuZnVuY3Rpb24gZmlsZShpKSB7XG4gIHJldHVybiBpICYgMTVcbn1cblxuZnVuY3Rpb24gYWxnZWJyYWljKGkpIHtcbiAgdmFyIGYgPSBmaWxlKGkpLFxuICAgIHIgPSByYW5rKGkpXG4gIHJldHVybiAnYWJjZGVmZ2gnLnN1YnN0cmluZyhmLCBmICsgMSkgKyAnODc2NTQzMjEnLnN1YnN0cmluZyhyLCByICsgMSlcbn1cblxuZnVuY3Rpb24gc3dhcF9jb2xvcihjKSB7XG4gIHJldHVybiBjID09PSBXSElURSA/IEJMQUNLIDogV0hJVEVcbn1cblxuZnVuY3Rpb24gaXNfZGlnaXQoYykge1xuICByZXR1cm4gJzAxMjM0NTY3ODknLmluZGV4T2YoYykgIT09IC0xXG59XG5cbmZ1bmN0aW9uIGNsb25lKG9iaikge1xuICB2YXIgZHVwZSA9IG9iaiBpbnN0YW5jZW9mIEFycmF5ID8gW10gOiB7fVxuXG4gIGZvciAodmFyIHByb3BlcnR5IGluIG9iaikge1xuICAgIGlmICh0eXBlb2YgcHJvcGVydHkgPT09ICdvYmplY3QnKSB7XG4gICAgICBkdXBlW3Byb3BlcnR5XSA9IGNsb25lKG9ialtwcm9wZXJ0eV0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGR1cGVbcHJvcGVydHldID0gb2JqW3Byb3BlcnR5XVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkdXBlXG59XG5cbmZ1bmN0aW9uIHRyaW0oc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpXG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqIFBVQkxJQyBDT05TVEFOVFNcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuZXhwb3J0IGNvbnN0IEJMQUNLID0gJ2InXG5leHBvcnQgY29uc3QgV0hJVEUgPSAndydcblxuZXhwb3J0IGNvbnN0IEVNUFRZID0gLTFcblxuZXhwb3J0IGNvbnN0IFBBV04gPSAncCdcbmV4cG9ydCBjb25zdCBLTklHSFQgPSAnbidcbmV4cG9ydCBjb25zdCBCSVNIT1AgPSAnYidcbmV4cG9ydCBjb25zdCBST09LID0gJ3InXG5leHBvcnQgY29uc3QgUVVFRU4gPSAncSdcbmV4cG9ydCBjb25zdCBLSU5HID0gJ2snXG5cbmV4cG9ydCBjb25zdCBTUVVBUkVTID0gKGZ1bmN0aW9uICgpIHtcbiAgLyogZnJvbSB0aGUgRUNNQS0yNjIgc3BlYyAoc2VjdGlvbiAxMi42LjQpOlxuICAgKiBcIlRoZSBtZWNoYW5pY3Mgb2YgZW51bWVyYXRpbmcgdGhlIHByb3BlcnRpZXMgLi4uIGlzXG4gICAqIGltcGxlbWVudGF0aW9uIGRlcGVuZGVudFwiXG4gICAqIHNvOiBmb3IgKHZhciBzcSBpbiBTUVVBUkVTKSB7IGtleXMucHVzaChzcSk7IH0gbWlnaHQgbm90IGJlXG4gICAqIG9yZGVyZWQgY29ycmVjdGx5XG4gICAqL1xuICB2YXIga2V5cyA9IFtdXG4gIGZvciAodmFyIGkgPSBTUVVBUkVfTUFQLmE4OyBpIDw9IFNRVUFSRV9NQVAuaDE7IGkrKykge1xuICAgIGlmIChpICYgMHg4OCkge1xuICAgICAgaSArPSA3XG4gICAgICBjb250aW51ZVxuICAgIH1cbiAgICBrZXlzLnB1c2goYWxnZWJyYWljKGkpKVxuICB9XG4gIHJldHVybiBrZXlzXG59KSgpXG5cbmV4cG9ydCBjb25zdCBGTEFHUyA9IHtcbiAgTk9STUFMOiAnbicsXG4gIENBUFRVUkU6ICdjJyxcbiAgQklHX1BBV046ICdiJyxcbiAgRVBfQ0FQVFVSRTogJ2UnLFxuICBQUk9NT1RJT046ICdwJyxcbiAgS1NJREVfQ0FTVExFOiAnaycsXG4gIFFTSURFX0NBU1RMRTogJ3EnLFxufVxuXG5leHBvcnQgY29uc3QgQ2hlc3MgPSBmdW5jdGlvbiAoZmVuKSB7XG4gIHZhciBib2FyZCA9IG5ldyBBcnJheSgxMjgpXG4gIHZhciBraW5ncyA9IHsgdzogRU1QVFksIGI6IEVNUFRZIH1cbiAgdmFyIHR1cm4gPSBXSElURVxuICB2YXIgY2FzdGxpbmcgPSB7IHc6IDAsIGI6IDAgfVxuICB2YXIgZXBfc3F1YXJlID0gRU1QVFlcbiAgdmFyIGhhbGZfbW92ZXMgPSAwXG4gIHZhciBtb3ZlX251bWJlciA9IDFcbiAgdmFyIGhpc3RvcnkgPSBbXVxuICB2YXIgaGVhZGVyID0ge31cbiAgdmFyIGNvbW1lbnRzID0ge31cblxuICAvKiBpZiB0aGUgdXNlciBwYXNzZXMgaW4gYSBmZW4gc3RyaW5nLCBsb2FkIGl0LCBlbHNlIGRlZmF1bHQgdG9cbiAgICogc3RhcnRpbmcgcG9zaXRpb25cbiAgICovXG4gIGlmICh0eXBlb2YgZmVuID09PSAndW5kZWZpbmVkJykge1xuICAgIGxvYWQoREVGQVVMVF9QT1NJVElPTilcbiAgfSBlbHNlIHtcbiAgICBsb2FkKGZlbilcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyKGtlZXBfaGVhZGVycykge1xuICAgIGlmICh0eXBlb2Yga2VlcF9oZWFkZXJzID09PSAndW5kZWZpbmVkJykge1xuICAgICAga2VlcF9oZWFkZXJzID0gZmFsc2VcbiAgICB9XG5cbiAgICBib2FyZCA9IG5ldyBBcnJheSgxMjgpXG4gICAga2luZ3MgPSB7IHc6IEVNUFRZLCBiOiBFTVBUWSB9XG4gICAgdHVybiA9IFdISVRFXG4gICAgY2FzdGxpbmcgPSB7IHc6IDAsIGI6IDAgfVxuICAgIGVwX3NxdWFyZSA9IEVNUFRZXG4gICAgaGFsZl9tb3ZlcyA9IDBcbiAgICBtb3ZlX251bWJlciA9IDFcbiAgICBoaXN0b3J5ID0gW11cbiAgICBpZiAoIWtlZXBfaGVhZGVycykgaGVhZGVyID0ge31cbiAgICBjb21tZW50cyA9IHt9XG4gICAgdXBkYXRlX3NldHVwKGdlbmVyYXRlX2ZlbigpKVxuICB9XG5cbiAgZnVuY3Rpb24gcHJ1bmVfY29tbWVudHMoKSB7XG4gICAgdmFyIHJldmVyc2VkX2hpc3RvcnkgPSBbXVxuICAgIHZhciBjdXJyZW50X2NvbW1lbnRzID0ge31cbiAgICB2YXIgY29weV9jb21tZW50ID0gZnVuY3Rpb24gKGZlbikge1xuICAgICAgaWYgKGZlbiBpbiBjb21tZW50cykge1xuICAgICAgICBjdXJyZW50X2NvbW1lbnRzW2Zlbl0gPSBjb21tZW50c1tmZW5dXG4gICAgICB9XG4gICAgfVxuICAgIHdoaWxlIChoaXN0b3J5Lmxlbmd0aCA+IDApIHtcbiAgICAgIHJldmVyc2VkX2hpc3RvcnkucHVzaCh1bmRvX21vdmUoKSlcbiAgICB9XG4gICAgY29weV9jb21tZW50KGdlbmVyYXRlX2ZlbigpKVxuICAgIHdoaWxlIChyZXZlcnNlZF9oaXN0b3J5Lmxlbmd0aCA+IDApIHtcbiAgICAgIG1ha2VfbW92ZShyZXZlcnNlZF9oaXN0b3J5LnBvcCgpKVxuICAgICAgY29weV9jb21tZW50KGdlbmVyYXRlX2ZlbigpKVxuICAgIH1cbiAgICBjb21tZW50cyA9IGN1cnJlbnRfY29tbWVudHNcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIGxvYWQoREVGQVVMVF9QT1NJVElPTilcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvYWQoZmVuLCBrZWVwX2hlYWRlcnMpIHtcbiAgICBpZiAodHlwZW9mIGtlZXBfaGVhZGVycyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGtlZXBfaGVhZGVycyA9IGZhbHNlXG4gICAgfVxuXG4gICAgdmFyIHRva2VucyA9IGZlbi5zcGxpdCgvXFxzKy8pXG4gICAgdmFyIHBvc2l0aW9uID0gdG9rZW5zWzBdXG4gICAgdmFyIHNxdWFyZSA9IDBcblxuICAgIGlmICghdmFsaWRhdGVfZmVuKGZlbikudmFsaWQpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGNsZWFyKGtlZXBfaGVhZGVycylcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zaXRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBwaWVjZSA9IHBvc2l0aW9uLmNoYXJBdChpKVxuXG4gICAgICBpZiAocGllY2UgPT09ICcvJykge1xuICAgICAgICBzcXVhcmUgKz0gOFxuICAgICAgfSBlbHNlIGlmIChpc19kaWdpdChwaWVjZSkpIHtcbiAgICAgICAgc3F1YXJlICs9IHBhcnNlSW50KHBpZWNlLCAxMClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjb2xvciA9IHBpZWNlIDwgJ2EnID8gV0hJVEUgOiBCTEFDS1xuICAgICAgICBwdXQoeyB0eXBlOiBwaWVjZS50b0xvd2VyQ2FzZSgpLCBjb2xvcjogY29sb3IgfSwgYWxnZWJyYWljKHNxdWFyZSkpXG4gICAgICAgIHNxdWFyZSsrXG4gICAgICB9XG4gICAgfVxuXG4gICAgdHVybiA9IHRva2Vuc1sxXVxuXG4gICAgaWYgKHRva2Vuc1syXS5pbmRleE9mKCdLJykgPiAtMSkge1xuICAgICAgY2FzdGxpbmcudyB8PSBCSVRTLktTSURFX0NBU1RMRVxuICAgIH1cbiAgICBpZiAodG9rZW5zWzJdLmluZGV4T2YoJ1EnKSA+IC0xKSB7XG4gICAgICBjYXN0bGluZy53IHw9IEJJVFMuUVNJREVfQ0FTVExFXG4gICAgfVxuICAgIGlmICh0b2tlbnNbMl0uaW5kZXhPZignaycpID4gLTEpIHtcbiAgICAgIGNhc3RsaW5nLmIgfD0gQklUUy5LU0lERV9DQVNUTEVcbiAgICB9XG4gICAgaWYgKHRva2Vuc1syXS5pbmRleE9mKCdxJykgPiAtMSkge1xuICAgICAgY2FzdGxpbmcuYiB8PSBCSVRTLlFTSURFX0NBU1RMRVxuICAgIH1cblxuICAgIGVwX3NxdWFyZSA9IHRva2Vuc1szXSA9PT0gJy0nID8gRU1QVFkgOiBTUVVBUkVfTUFQW3Rva2Vuc1szXV1cbiAgICBoYWxmX21vdmVzID0gcGFyc2VJbnQodG9rZW5zWzRdLCAxMClcbiAgICBtb3ZlX251bWJlciA9IHBhcnNlSW50KHRva2Vuc1s1XSwgMTApXG5cbiAgICB1cGRhdGVfc2V0dXAoZ2VuZXJhdGVfZmVuKCkpXG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgLyogVE9ETzogdGhpcyBmdW5jdGlvbiBpcyBwcmV0dHkgbXVjaCBjcmFwIC0gaXQgdmFsaWRhdGVzIHN0cnVjdHVyZSBidXRcbiAgICogY29tcGxldGVseSBpZ25vcmVzIGNvbnRlbnQgKGUuZy4gZG9lc24ndCB2ZXJpZnkgdGhhdCBlYWNoIHNpZGUgaGFzIGEga2luZylcbiAgICogLi4uIHdlIHNob3VsZCByZXdyaXRlIHRoaXMsIGFuZCBkaXRjaCB0aGUgc2lsbHkgZXJyb3JfbnVtYmVyIGZpZWxkIHdoaWxlXG4gICAqIHdlJ3JlIGF0IGl0XG4gICAqL1xuICBmdW5jdGlvbiB2YWxpZGF0ZV9mZW4oZmVuKSB7XG4gICAgdmFyIGVycm9ycyA9IHtcbiAgICAgIDA6ICdObyBlcnJvcnMuJyxcbiAgICAgIDE6ICdGRU4gc3RyaW5nIG11c3QgY29udGFpbiBzaXggc3BhY2UtZGVsaW1pdGVkIGZpZWxkcy4nLFxuICAgICAgMjogJzZ0aCBmaWVsZCAobW92ZSBudW1iZXIpIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLicsXG4gICAgICAzOiAnNXRoIGZpZWxkIChoYWxmIG1vdmUgY291bnRlcikgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyLicsXG4gICAgICA0OiAnNHRoIGZpZWxkIChlbi1wYXNzYW50IHNxdWFyZSkgaXMgaW52YWxpZC4nLFxuICAgICAgNTogJzNyZCBmaWVsZCAoY2FzdGxpbmcgYXZhaWxhYmlsaXR5KSBpcyBpbnZhbGlkLicsXG4gICAgICA2OiAnMm5kIGZpZWxkIChzaWRlIHRvIG1vdmUpIGlzIGludmFsaWQuJyxcbiAgICAgIDc6IFwiMXN0IGZpZWxkIChwaWVjZSBwb3NpdGlvbnMpIGRvZXMgbm90IGNvbnRhaW4gOCAnLyctZGVsaW1pdGVkIHJvd3MuXCIsXG4gICAgICA4OiAnMXN0IGZpZWxkIChwaWVjZSBwb3NpdGlvbnMpIGlzIGludmFsaWQgW2NvbnNlY3V0aXZlIG51bWJlcnNdLicsXG4gICAgICA5OiAnMXN0IGZpZWxkIChwaWVjZSBwb3NpdGlvbnMpIGlzIGludmFsaWQgW2ludmFsaWQgcGllY2VdLicsXG4gICAgICAxMDogJzFzdCBmaWVsZCAocGllY2UgcG9zaXRpb25zKSBpcyBpbnZhbGlkIFtyb3cgdG9vIGxhcmdlXS4nLFxuICAgICAgMTE6ICdJbGxlZ2FsIGVuLXBhc3NhbnQgc3F1YXJlJyxcbiAgICB9XG5cbiAgICAvKiAxc3QgY3JpdGVyaW9uOiA2IHNwYWNlLXNlcGVyYXRlZCBmaWVsZHM/ICovXG4gICAgdmFyIHRva2VucyA9IGZlbi5zcGxpdCgvXFxzKy8pXG4gICAgaWYgKHRva2Vucy5sZW5ndGggIT09IDYpIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3JfbnVtYmVyOiAxLCBlcnJvcjogZXJyb3JzWzFdIH1cbiAgICB9XG5cbiAgICAvKiAybmQgY3JpdGVyaW9uOiBtb3ZlIG51bWJlciBmaWVsZCBpcyBhIGludGVnZXIgdmFsdWUgPiAwPyAqL1xuICAgIGlmIChpc05hTih0b2tlbnNbNV0pIHx8IHBhcnNlSW50KHRva2Vuc1s1XSwgMTApIDw9IDApIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3JfbnVtYmVyOiAyLCBlcnJvcjogZXJyb3JzWzJdIH1cbiAgICB9XG5cbiAgICAvKiAzcmQgY3JpdGVyaW9uOiBoYWxmIG1vdmUgY291bnRlciBpcyBhbiBpbnRlZ2VyID49IDA/ICovXG4gICAgaWYgKGlzTmFOKHRva2Vuc1s0XSkgfHwgcGFyc2VJbnQodG9rZW5zWzRdLCAxMCkgPCAwKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yX251bWJlcjogMywgZXJyb3I6IGVycm9yc1szXSB9XG4gICAgfVxuXG4gICAgLyogNHRoIGNyaXRlcmlvbjogNHRoIGZpZWxkIGlzIGEgdmFsaWQgZS5wLi1zdHJpbmc/ICovXG4gICAgaWYgKCEvXigtfFthYmNkZWZnaF1bMzZdKSQvLnRlc3QodG9rZW5zWzNdKSkge1xuICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcl9udW1iZXI6IDQsIGVycm9yOiBlcnJvcnNbNF0gfVxuICAgIH1cblxuICAgIC8qIDV0aCBjcml0ZXJpb246IDN0aCBmaWVsZCBpcyBhIHZhbGlkIGNhc3RsZS1zdHJpbmc/ICovXG4gICAgaWYgKCEvXihLUT9rP3E/fFFrP3E/fGtxP3xxfC0pJC8udGVzdCh0b2tlbnNbMl0pKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yX251bWJlcjogNSwgZXJyb3I6IGVycm9yc1s1XSB9XG4gICAgfVxuXG4gICAgLyogNnRoIGNyaXRlcmlvbjogMm5kIGZpZWxkIGlzIFwid1wiICh3aGl0ZSkgb3IgXCJiXCIgKGJsYWNrKT8gKi9cbiAgICBpZiAoIS9eKHd8YikkLy50ZXN0KHRva2Vuc1sxXSkpIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3JfbnVtYmVyOiA2LCBlcnJvcjogZXJyb3JzWzZdIH1cbiAgICB9XG5cbiAgICAvKiA3dGggY3JpdGVyaW9uOiAxc3QgZmllbGQgY29udGFpbnMgOCByb3dzPyAqL1xuICAgIHZhciByb3dzID0gdG9rZW5zWzBdLnNwbGl0KCcvJylcbiAgICBpZiAocm93cy5sZW5ndGggIT09IDgpIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3JfbnVtYmVyOiA3LCBlcnJvcjogZXJyb3JzWzddIH1cbiAgICB9XG5cbiAgICAvKiA4dGggY3JpdGVyaW9uOiBldmVyeSByb3cgaXMgdmFsaWQ/ICovXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvKiBjaGVjayBmb3IgcmlnaHQgc3VtIG9mIGZpZWxkcyBBTkQgbm90IHR3byBudW1iZXJzIGluIHN1Y2Nlc3Npb24gKi9cbiAgICAgIHZhciBzdW1fZmllbGRzID0gMFxuICAgICAgdmFyIHByZXZpb3VzX3dhc19udW1iZXIgPSBmYWxzZVxuXG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8IHJvd3NbaV0ubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgaWYgKCFpc05hTihyb3dzW2ldW2tdKSkge1xuICAgICAgICAgIGlmIChwcmV2aW91c193YXNfbnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yX251bWJlcjogOCwgZXJyb3I6IGVycm9yc1s4XSB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHN1bV9maWVsZHMgKz0gcGFyc2VJbnQocm93c1tpXVtrXSwgMTApXG4gICAgICAgICAgcHJldmlvdXNfd2FzX251bWJlciA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIS9eW3BybmJxa1BSTkJRS10kLy50ZXN0KHJvd3NbaV1ba10pKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yX251bWJlcjogOSwgZXJyb3I6IGVycm9yc1s5XSB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHN1bV9maWVsZHMgKz0gMVxuICAgICAgICAgIHByZXZpb3VzX3dhc19udW1iZXIgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc3VtX2ZpZWxkcyAhPT0gOCkge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yX251bWJlcjogMTAsIGVycm9yOiBlcnJvcnNbMTBdIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAodG9rZW5zWzNdWzFdID09ICczJyAmJiB0b2tlbnNbMV0gPT0gJ3cnKSB8fFxuICAgICAgKHRva2Vuc1szXVsxXSA9PSAnNicgJiYgdG9rZW5zWzFdID09ICdiJylcbiAgICApIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3JfbnVtYmVyOiAxMSwgZXJyb3I6IGVycm9yc1sxMV0gfVxuICAgIH1cblxuICAgIC8qIGV2ZXJ5dGhpbmcncyBva2F5ISAqL1xuICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBlcnJvcl9udW1iZXI6IDAsIGVycm9yOiBlcnJvcnNbMF0gfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2VuZXJhdGVfZmVuKCkge1xuICAgIHZhciBlbXB0eSA9IDBcbiAgICB2YXIgZmVuID0gJydcblxuICAgIGZvciAodmFyIGkgPSBTUVVBUkVfTUFQLmE4OyBpIDw9IFNRVUFSRV9NQVAuaDE7IGkrKykge1xuICAgICAgaWYgKGJvYXJkW2ldID09IG51bGwpIHtcbiAgICAgICAgZW1wdHkrK1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGVtcHR5ID4gMCkge1xuICAgICAgICAgIGZlbiArPSBlbXB0eVxuICAgICAgICAgIGVtcHR5ID0gMFxuICAgICAgICB9XG4gICAgICAgIHZhciBjb2xvciA9IGJvYXJkW2ldLmNvbG9yXG4gICAgICAgIHZhciBwaWVjZSA9IGJvYXJkW2ldLnR5cGVcblxuICAgICAgICBmZW4gKz0gY29sb3IgPT09IFdISVRFID8gcGllY2UudG9VcHBlckNhc2UoKSA6IHBpZWNlLnRvTG93ZXJDYXNlKClcbiAgICAgIH1cblxuICAgICAgaWYgKChpICsgMSkgJiAweDg4KSB7XG4gICAgICAgIGlmIChlbXB0eSA+IDApIHtcbiAgICAgICAgICBmZW4gKz0gZW1wdHlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpICE9PSBTUVVBUkVfTUFQLmgxKSB7XG4gICAgICAgICAgZmVuICs9ICcvJ1xuICAgICAgICB9XG5cbiAgICAgICAgZW1wdHkgPSAwXG4gICAgICAgIGkgKz0gOFxuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBjZmxhZ3MgPSAnJ1xuICAgIGlmIChjYXN0bGluZ1tXSElURV0gJiBCSVRTLktTSURFX0NBU1RMRSkge1xuICAgICAgY2ZsYWdzICs9ICdLJ1xuICAgIH1cbiAgICBpZiAoY2FzdGxpbmdbV0hJVEVdICYgQklUUy5RU0lERV9DQVNUTEUpIHtcbiAgICAgIGNmbGFncyArPSAnUSdcbiAgICB9XG4gICAgaWYgKGNhc3RsaW5nW0JMQUNLXSAmIEJJVFMuS1NJREVfQ0FTVExFKSB7XG4gICAgICBjZmxhZ3MgKz0gJ2snXG4gICAgfVxuICAgIGlmIChjYXN0bGluZ1tCTEFDS10gJiBCSVRTLlFTSURFX0NBU1RMRSkge1xuICAgICAgY2ZsYWdzICs9ICdxJ1xuICAgIH1cblxuICAgIC8qIGRvIHdlIGhhdmUgYW4gZW1wdHkgY2FzdGxpbmcgZmxhZz8gKi9cbiAgICBjZmxhZ3MgPSBjZmxhZ3MgfHwgJy0nXG4gICAgdmFyIGVwZmxhZ3MgPSBlcF9zcXVhcmUgPT09IEVNUFRZID8gJy0nIDogYWxnZWJyYWljKGVwX3NxdWFyZSlcblxuICAgIHJldHVybiBbZmVuLCB0dXJuLCBjZmxhZ3MsIGVwZmxhZ3MsIGhhbGZfbW92ZXMsIG1vdmVfbnVtYmVyXS5qb2luKCcgJylcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldF9oZWFkZXIoYXJncykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgaWYgKHR5cGVvZiBhcmdzW2ldID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgYXJnc1tpICsgMV0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGhlYWRlclthcmdzW2ldXSA9IGFyZ3NbaSArIDFdXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBoZWFkZXJcbiAgfVxuXG4gIC8qIGNhbGxlZCB3aGVuIHRoZSBpbml0aWFsIGJvYXJkIHNldHVwIGlzIGNoYW5nZWQgd2l0aCBwdXQoKSBvciByZW1vdmUoKS5cbiAgICogbW9kaWZpZXMgdGhlIFNldFVwIGFuZCBGRU4gcHJvcGVydGllcyBvZiB0aGUgaGVhZGVyIG9iamVjdC4gIGlmIHRoZSBGRU4gaXNcbiAgICogZXF1YWwgdG8gdGhlIGRlZmF1bHQgcG9zaXRpb24sIHRoZSBTZXRVcCBhbmQgRkVOIGFyZSBkZWxldGVkXG4gICAqIHRoZSBzZXR1cCBpcyBvbmx5IHVwZGF0ZWQgaWYgaGlzdG9yeS5sZW5ndGggaXMgemVybywgaWUgbW92ZXMgaGF2ZW4ndCBiZWVuXG4gICAqIG1hZGUuXG4gICAqL1xuICBmdW5jdGlvbiB1cGRhdGVfc2V0dXAoZmVuKSB7XG4gICAgaWYgKGhpc3RvcnkubGVuZ3RoID4gMCkgcmV0dXJuXG5cbiAgICBpZiAoZmVuICE9PSBERUZBVUxUX1BPU0lUSU9OKSB7XG4gICAgICBoZWFkZXJbJ1NldFVwJ10gPSAnMSdcbiAgICAgIGhlYWRlclsnRkVOJ10gPSBmZW5cbiAgICB9IGVsc2Uge1xuICAgICAgZGVsZXRlIGhlYWRlclsnU2V0VXAnXVxuICAgICAgZGVsZXRlIGhlYWRlclsnRkVOJ11cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXQoc3F1YXJlKSB7XG4gICAgdmFyIHBpZWNlID0gYm9hcmRbU1FVQVJFX01BUFtzcXVhcmVdXVxuICAgIHJldHVybiBwaWVjZSA/IHsgdHlwZTogcGllY2UudHlwZSwgY29sb3I6IHBpZWNlLmNvbG9yIH0gOiBudWxsXG4gIH1cblxuICBmdW5jdGlvbiBwdXQocGllY2UsIHNxdWFyZSkge1xuICAgIC8qIGNoZWNrIGZvciB2YWxpZCBwaWVjZSBvYmplY3QgKi9cbiAgICBpZiAoISgndHlwZScgaW4gcGllY2UgJiYgJ2NvbG9yJyBpbiBwaWVjZSkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIC8qIGNoZWNrIGZvciBwaWVjZSAqL1xuICAgIGlmIChTWU1CT0xTLmluZGV4T2YocGllY2UudHlwZS50b0xvd2VyQ2FzZSgpKSA9PT0gLTEpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIC8qIGNoZWNrIGZvciB2YWxpZCBzcXVhcmUgKi9cbiAgICBpZiAoIShzcXVhcmUgaW4gU1FVQVJFX01BUCkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIHZhciBzcSA9IFNRVUFSRV9NQVBbc3F1YXJlXVxuXG4gICAgLyogZG9uJ3QgbGV0IHRoZSB1c2VyIHBsYWNlIG1vcmUgdGhhbiBvbmUga2luZyAqL1xuICAgIGlmIChcbiAgICAgIHBpZWNlLnR5cGUgPT0gS0lORyAmJlxuICAgICAgIShraW5nc1twaWVjZS5jb2xvcl0gPT0gRU1QVFkgfHwga2luZ3NbcGllY2UuY29sb3JdID09IHNxKVxuICAgICkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgYm9hcmRbc3FdID0geyB0eXBlOiBwaWVjZS50eXBlLCBjb2xvcjogcGllY2UuY29sb3IgfVxuICAgIGlmIChwaWVjZS50eXBlID09PSBLSU5HKSB7XG4gICAgICBraW5nc1twaWVjZS5jb2xvcl0gPSBzcVxuICAgIH1cblxuICAgIHVwZGF0ZV9zZXR1cChnZW5lcmF0ZV9mZW4oKSlcblxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmUoc3F1YXJlKSB7XG4gICAgdmFyIHBpZWNlID0gZ2V0KHNxdWFyZSlcbiAgICBib2FyZFtTUVVBUkVfTUFQW3NxdWFyZV1dID0gbnVsbFxuICAgIGlmIChwaWVjZSAmJiBwaWVjZS50eXBlID09PSBLSU5HKSB7XG4gICAgICBraW5nc1twaWVjZS5jb2xvcl0gPSBFTVBUWVxuICAgIH1cblxuICAgIHVwZGF0ZV9zZXR1cChnZW5lcmF0ZV9mZW4oKSlcblxuICAgIHJldHVybiBwaWVjZVxuICB9XG5cbiAgZnVuY3Rpb24gYnVpbGRfbW92ZShib2FyZCwgZnJvbSwgdG8sIGZsYWdzLCBwcm9tb3Rpb24pIHtcbiAgICB2YXIgbW92ZSA9IHtcbiAgICAgIGNvbG9yOiB0dXJuLFxuICAgICAgZnJvbTogZnJvbSxcbiAgICAgIHRvOiB0byxcbiAgICAgIGZsYWdzOiBmbGFncyxcbiAgICAgIHBpZWNlOiBib2FyZFtmcm9tXS50eXBlLFxuICAgIH1cblxuICAgIGlmIChwcm9tb3Rpb24pIHtcbiAgICAgIG1vdmUuZmxhZ3MgfD0gQklUUy5QUk9NT1RJT05cbiAgICAgIG1vdmUucHJvbW90aW9uID0gcHJvbW90aW9uXG4gICAgfVxuXG4gICAgaWYgKGJvYXJkW3RvXSkge1xuICAgICAgbW92ZS5jYXB0dXJlZCA9IGJvYXJkW3RvXS50eXBlXG4gICAgfSBlbHNlIGlmIChmbGFncyAmIEJJVFMuRVBfQ0FQVFVSRSkge1xuICAgICAgbW92ZS5jYXB0dXJlZCA9IFBBV05cbiAgICB9XG4gICAgcmV0dXJuIG1vdmVcbiAgfVxuXG4gIGZ1bmN0aW9uIGdlbmVyYXRlX21vdmVzKG9wdGlvbnMpIHtcbiAgICBmdW5jdGlvbiBhZGRfbW92ZShib2FyZCwgbW92ZXMsIGZyb20sIHRvLCBmbGFncykge1xuICAgICAgLyogaWYgcGF3biBwcm9tb3Rpb24gKi9cbiAgICAgIGlmIChcbiAgICAgICAgYm9hcmRbZnJvbV0udHlwZSA9PT0gUEFXTiAmJlxuICAgICAgICAocmFuayh0bykgPT09IFJBTktfOCB8fCByYW5rKHRvKSA9PT0gUkFOS18xKVxuICAgICAgKSB7XG4gICAgICAgIHZhciBwaWVjZXMgPSBbUVVFRU4sIFJPT0ssIEJJU0hPUCwgS05JR0hUXVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcGllY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgbW92ZXMucHVzaChidWlsZF9tb3ZlKGJvYXJkLCBmcm9tLCB0bywgZmxhZ3MsIHBpZWNlc1tpXSkpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vdmVzLnB1c2goYnVpbGRfbW92ZShib2FyZCwgZnJvbSwgdG8sIGZsYWdzKSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbW92ZXMgPSBbXVxuICAgIHZhciB1cyA9IHR1cm5cbiAgICB2YXIgdGhlbSA9IHN3YXBfY29sb3IodXMpXG4gICAgdmFyIHNlY29uZF9yYW5rID0geyBiOiBSQU5LXzcsIHc6IFJBTktfMiB9XG5cbiAgICB2YXIgZmlyc3Rfc3EgPSBTUVVBUkVfTUFQLmE4XG4gICAgdmFyIGxhc3Rfc3EgPSBTUVVBUkVfTUFQLmgxXG4gICAgdmFyIHNpbmdsZV9zcXVhcmUgPSBmYWxzZVxuXG4gICAgLyogZG8gd2Ugd2FudCBsZWdhbCBtb3Zlcz8gKi9cbiAgICB2YXIgbGVnYWwgPVxuICAgICAgdHlwZW9mIG9wdGlvbnMgIT09ICd1bmRlZmluZWQnICYmICdsZWdhbCcgaW4gb3B0aW9uc1xuICAgICAgICA/IG9wdGlvbnMubGVnYWxcbiAgICAgICAgOiB0cnVlXG5cbiAgICB2YXIgcGllY2VfdHlwZSA9XG4gICAgICB0eXBlb2Ygb3B0aW9ucyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICdwaWVjZScgaW4gb3B0aW9ucyAmJlxuICAgICAgdHlwZW9mIG9wdGlvbnMucGllY2UgPT09ICdzdHJpbmcnXG4gICAgICAgID8gb3B0aW9ucy5waWVjZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIDogdHJ1ZVxuXG4gICAgLyogYXJlIHdlIGdlbmVyYXRpbmcgbW92ZXMgZm9yIGEgc2luZ2xlIHNxdWFyZT8gKi9cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICd1bmRlZmluZWQnICYmICdzcXVhcmUnIGluIG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zLnNxdWFyZSBpbiBTUVVBUkVfTUFQKSB7XG4gICAgICAgIGZpcnN0X3NxID0gbGFzdF9zcSA9IFNRVUFSRV9NQVBbb3B0aW9ucy5zcXVhcmVdXG4gICAgICAgIHNpbmdsZV9zcXVhcmUgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKiBpbnZhbGlkIHNxdWFyZSAqL1xuICAgICAgICByZXR1cm4gW11cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gZmlyc3Rfc3E7IGkgPD0gbGFzdF9zcTsgaSsrKSB7XG4gICAgICAvKiBkaWQgd2UgcnVuIG9mZiB0aGUgZW5kIG9mIHRoZSBib2FyZCAqL1xuICAgICAgaWYgKGkgJiAweDg4KSB7XG4gICAgICAgIGkgKz0gN1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICB2YXIgcGllY2UgPSBib2FyZFtpXVxuICAgICAgaWYgKHBpZWNlID09IG51bGwgfHwgcGllY2UuY29sb3IgIT09IHVzKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChwaWVjZS50eXBlID09PSBQQVdOICYmIChwaWVjZV90eXBlID09PSB0cnVlIHx8IHBpZWNlX3R5cGUgPT09IFBBV04pKSB7XG4gICAgICAgIC8qIHNpbmdsZSBzcXVhcmUsIG5vbi1jYXB0dXJpbmcgKi9cbiAgICAgICAgdmFyIHNxdWFyZSA9IGkgKyBQQVdOX09GRlNFVFNbdXNdWzBdXG4gICAgICAgIGlmIChib2FyZFtzcXVhcmVdID09IG51bGwpIHtcbiAgICAgICAgICBhZGRfbW92ZShib2FyZCwgbW92ZXMsIGksIHNxdWFyZSwgQklUUy5OT1JNQUwpXG5cbiAgICAgICAgICAvKiBkb3VibGUgc3F1YXJlICovXG4gICAgICAgICAgdmFyIHNxdWFyZSA9IGkgKyBQQVdOX09GRlNFVFNbdXNdWzFdXG4gICAgICAgICAgaWYgKHNlY29uZF9yYW5rW3VzXSA9PT0gcmFuayhpKSAmJiBib2FyZFtzcXVhcmVdID09IG51bGwpIHtcbiAgICAgICAgICAgIGFkZF9tb3ZlKGJvYXJkLCBtb3ZlcywgaSwgc3F1YXJlLCBCSVRTLkJJR19QQVdOKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qIHBhd24gY2FwdHVyZXMgKi9cbiAgICAgICAgZm9yIChqID0gMjsgaiA8IDQ7IGorKykge1xuICAgICAgICAgIHZhciBzcXVhcmUgPSBpICsgUEFXTl9PRkZTRVRTW3VzXVtqXVxuICAgICAgICAgIGlmIChzcXVhcmUgJiAweDg4KSBjb250aW51ZVxuXG4gICAgICAgICAgaWYgKGJvYXJkW3NxdWFyZV0gIT0gbnVsbCAmJiBib2FyZFtzcXVhcmVdLmNvbG9yID09PSB0aGVtKSB7XG4gICAgICAgICAgICBhZGRfbW92ZShib2FyZCwgbW92ZXMsIGksIHNxdWFyZSwgQklUUy5DQVBUVVJFKVxuICAgICAgICAgIH0gZWxzZSBpZiAoc3F1YXJlID09PSBlcF9zcXVhcmUpIHtcbiAgICAgICAgICAgIGFkZF9tb3ZlKGJvYXJkLCBtb3ZlcywgaSwgZXBfc3F1YXJlLCBCSVRTLkVQX0NBUFRVUkUpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHBpZWNlX3R5cGUgPT09IHRydWUgfHwgcGllY2VfdHlwZSA9PT0gcGllY2UudHlwZSkge1xuICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuID0gUElFQ0VfT0ZGU0VUU1twaWVjZS50eXBlXS5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgIHZhciBvZmZzZXQgPSBQSUVDRV9PRkZTRVRTW3BpZWNlLnR5cGVdW2pdXG4gICAgICAgICAgdmFyIHNxdWFyZSA9IGlcblxuICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBzcXVhcmUgKz0gb2Zmc2V0XG4gICAgICAgICAgICBpZiAoc3F1YXJlICYgMHg4OCkgYnJlYWtcblxuICAgICAgICAgICAgaWYgKGJvYXJkW3NxdWFyZV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgICBhZGRfbW92ZShib2FyZCwgbW92ZXMsIGksIHNxdWFyZSwgQklUUy5OT1JNQUwpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoYm9hcmRbc3F1YXJlXS5jb2xvciA9PT0gdXMpIGJyZWFrXG4gICAgICAgICAgICAgIGFkZF9tb3ZlKGJvYXJkLCBtb3ZlcywgaSwgc3F1YXJlLCBCSVRTLkNBUFRVUkUpXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIGJyZWFrLCBpZiBrbmlnaHQgb3Iga2luZyAqL1xuICAgICAgICAgICAgaWYgKHBpZWNlLnR5cGUgPT09ICduJyB8fCBwaWVjZS50eXBlID09PSAnaycpIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyogY2hlY2sgZm9yIGNhc3RsaW5nIGlmOiBhKSB3ZSdyZSBnZW5lcmF0aW5nIGFsbCBtb3Zlcywgb3IgYikgd2UncmUgZG9pbmdcbiAgICAgKiBzaW5nbGUgc3F1YXJlIG1vdmUgZ2VuZXJhdGlvbiBvbiB0aGUga2luZydzIHNxdWFyZVxuICAgICAqL1xuICAgIGlmIChwaWVjZV90eXBlID09PSB0cnVlIHx8IHBpZWNlX3R5cGUgPT09IEtJTkcpIHtcbiAgICAgIGlmICghc2luZ2xlX3NxdWFyZSB8fCBsYXN0X3NxID09PSBraW5nc1t1c10pIHtcbiAgICAgICAgLyoga2luZy1zaWRlIGNhc3RsaW5nICovXG4gICAgICAgIGlmIChjYXN0bGluZ1t1c10gJiBCSVRTLktTSURFX0NBU1RMRSkge1xuICAgICAgICAgIHZhciBjYXN0bGluZ19mcm9tID0ga2luZ3NbdXNdXG4gICAgICAgICAgdmFyIGNhc3RsaW5nX3RvID0gY2FzdGxpbmdfZnJvbSArIDJcblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGJvYXJkW2Nhc3RsaW5nX2Zyb20gKyAxXSA9PSBudWxsICYmXG4gICAgICAgICAgICBib2FyZFtjYXN0bGluZ190b10gPT0gbnVsbCAmJlxuICAgICAgICAgICAgIWF0dGFja2VkKHRoZW0sIGtpbmdzW3VzXSkgJiZcbiAgICAgICAgICAgICFhdHRhY2tlZCh0aGVtLCBjYXN0bGluZ19mcm9tICsgMSkgJiZcbiAgICAgICAgICAgICFhdHRhY2tlZCh0aGVtLCBjYXN0bGluZ190bylcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGFkZF9tb3ZlKGJvYXJkLCBtb3Zlcywga2luZ3NbdXNdLCBjYXN0bGluZ190bywgQklUUy5LU0lERV9DQVNUTEUpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyogcXVlZW4tc2lkZSBjYXN0bGluZyAqL1xuICAgICAgICBpZiAoY2FzdGxpbmdbdXNdICYgQklUUy5RU0lERV9DQVNUTEUpIHtcbiAgICAgICAgICB2YXIgY2FzdGxpbmdfZnJvbSA9IGtpbmdzW3VzXVxuICAgICAgICAgIHZhciBjYXN0bGluZ190byA9IGNhc3RsaW5nX2Zyb20gLSAyXG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBib2FyZFtjYXN0bGluZ19mcm9tIC0gMV0gPT0gbnVsbCAmJlxuICAgICAgICAgICAgYm9hcmRbY2FzdGxpbmdfZnJvbSAtIDJdID09IG51bGwgJiZcbiAgICAgICAgICAgIGJvYXJkW2Nhc3RsaW5nX2Zyb20gLSAzXSA9PSBudWxsICYmXG4gICAgICAgICAgICAhYXR0YWNrZWQodGhlbSwga2luZ3NbdXNdKSAmJlxuICAgICAgICAgICAgIWF0dGFja2VkKHRoZW0sIGNhc3RsaW5nX2Zyb20gLSAxKSAmJlxuICAgICAgICAgICAgIWF0dGFja2VkKHRoZW0sIGNhc3RsaW5nX3RvKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgYWRkX21vdmUoYm9hcmQsIG1vdmVzLCBraW5nc1t1c10sIGNhc3RsaW5nX3RvLCBCSVRTLlFTSURFX0NBU1RMRSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKiByZXR1cm4gYWxsIHBzZXVkby1sZWdhbCBtb3ZlcyAodGhpcyBpbmNsdWRlcyBtb3ZlcyB0aGF0IGFsbG93IHRoZSBraW5nXG4gICAgICogdG8gYmUgY2FwdHVyZWQpXG4gICAgICovXG4gICAgaWYgKCFsZWdhbCkge1xuICAgICAgcmV0dXJuIG1vdmVzXG4gICAgfVxuXG4gICAgLyogZmlsdGVyIG91dCBpbGxlZ2FsIG1vdmVzICovXG4gICAgdmFyIGxlZ2FsX21vdmVzID0gW11cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbW92ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIG1ha2VfbW92ZShtb3Zlc1tpXSlcbiAgICAgIGlmICgha2luZ19hdHRhY2tlZCh1cykpIHtcbiAgICAgICAgbGVnYWxfbW92ZXMucHVzaChtb3Zlc1tpXSlcbiAgICAgIH1cbiAgICAgIHVuZG9fbW92ZSgpXG4gICAgfVxuXG4gICAgcmV0dXJuIGxlZ2FsX21vdmVzXG4gIH1cblxuICAvKiBjb252ZXJ0IGEgbW92ZSBmcm9tIDB4ODggY29vcmRpbmF0ZXMgdG8gU3RhbmRhcmQgQWxnZWJyYWljIE5vdGF0aW9uXG4gICAqIChTQU4pXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2xvcHB5IFVzZSB0aGUgc2xvcHB5IFNBTiBnZW5lcmF0b3IgdG8gd29yayBhcm91bmQgb3ZlclxuICAgKiBkaXNhbWJpZ3VhdGlvbiBidWdzIGluIEZyaXR6IGFuZCBDaGVzc2Jhc2UuICBTZWUgYmVsb3c6XG4gICAqXG4gICAqIHIxYnFrYm5yL3BwcDJwcHAvMm41LzFCMXBQMy80UDMvOC9QUFBQMlBQL1JOQlFLMU5SIGIgS1FrcSAtIDIgNFxuICAgKiA0LiAuLi4gTmdlNyBpcyBvdmVybHkgZGlzYW1iaWd1YXRlZCBiZWNhdXNlIHRoZSBrbmlnaHQgb24gYzYgaXMgcGlubmVkXG4gICAqIDQuIC4uLiBOZTcgaXMgdGVjaG5pY2FsbHkgdGhlIHZhbGlkIFNBTlxuICAgKi9cbiAgZnVuY3Rpb24gbW92ZV90b19zYW4obW92ZSwgbW92ZXMpIHtcbiAgICB2YXIgb3V0cHV0ID0gJydcblxuICAgIGlmIChtb3ZlLmZsYWdzICYgQklUUy5LU0lERV9DQVNUTEUpIHtcbiAgICAgIG91dHB1dCA9ICdPLU8nXG4gICAgfSBlbHNlIGlmIChtb3ZlLmZsYWdzICYgQklUUy5RU0lERV9DQVNUTEUpIHtcbiAgICAgIG91dHB1dCA9ICdPLU8tTydcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKG1vdmUucGllY2UgIT09IFBBV04pIHtcbiAgICAgICAgdmFyIGRpc2FtYmlndWF0b3IgPSBnZXRfZGlzYW1iaWd1YXRvcihtb3ZlLCBtb3ZlcylcbiAgICAgICAgb3V0cHV0ICs9IG1vdmUucGllY2UudG9VcHBlckNhc2UoKSArIGRpc2FtYmlndWF0b3JcbiAgICAgIH1cblxuICAgICAgaWYgKG1vdmUuZmxhZ3MgJiAoQklUUy5DQVBUVVJFIHwgQklUUy5FUF9DQVBUVVJFKSkge1xuICAgICAgICBpZiAobW92ZS5waWVjZSA9PT0gUEFXTikge1xuICAgICAgICAgIG91dHB1dCArPSBhbGdlYnJhaWMobW92ZS5mcm9tKVswXVxuICAgICAgICB9XG4gICAgICAgIG91dHB1dCArPSAneCdcbiAgICAgIH1cblxuICAgICAgb3V0cHV0ICs9IGFsZ2VicmFpYyhtb3ZlLnRvKVxuXG4gICAgICBpZiAobW92ZS5mbGFncyAmIEJJVFMuUFJPTU9USU9OKSB7XG4gICAgICAgIG91dHB1dCArPSAnPScgKyBtb3ZlLnByb21vdGlvbi50b1VwcGVyQ2FzZSgpXG4gICAgICB9XG4gICAgfVxuXG4gICAgbWFrZV9tb3ZlKG1vdmUpXG4gICAgaWYgKGluX2NoZWNrKCkpIHtcbiAgICAgIGlmIChpbl9jaGVja21hdGUoKSkge1xuICAgICAgICBvdXRwdXQgKz0gJyMnXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvdXRwdXQgKz0gJysnXG4gICAgICB9XG4gICAgfVxuICAgIHVuZG9fbW92ZSgpXG5cbiAgICByZXR1cm4gb3V0cHV0XG4gIH1cblxuICBmdW5jdGlvbiBhdHRhY2tlZChjb2xvciwgc3F1YXJlKSB7XG4gICAgZm9yICh2YXIgaSA9IFNRVUFSRV9NQVAuYTg7IGkgPD0gU1FVQVJFX01BUC5oMTsgaSsrKSB7XG4gICAgICAvKiBkaWQgd2UgcnVuIG9mZiB0aGUgZW5kIG9mIHRoZSBib2FyZCAqL1xuICAgICAgaWYgKGkgJiAweDg4KSB7XG4gICAgICAgIGkgKz0gN1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvKiBpZiBlbXB0eSBzcXVhcmUgb3Igd3JvbmcgY29sb3IgKi9cbiAgICAgIGlmIChib2FyZFtpXSA9PSBudWxsIHx8IGJvYXJkW2ldLmNvbG9yICE9PSBjb2xvcikgY29udGludWVcblxuICAgICAgdmFyIHBpZWNlID0gYm9hcmRbaV1cbiAgICAgIHZhciBkaWZmZXJlbmNlID0gaSAtIHNxdWFyZVxuICAgICAgdmFyIGluZGV4ID0gZGlmZmVyZW5jZSArIDExOVxuXG4gICAgICBpZiAoQVRUQUNLU1tpbmRleF0gJiAoMSA8PCBTSElGVFNbcGllY2UudHlwZV0pKSB7XG4gICAgICAgIGlmIChwaWVjZS50eXBlID09PSBQQVdOKSB7XG4gICAgICAgICAgaWYgKGRpZmZlcmVuY2UgPiAwKSB7XG4gICAgICAgICAgICBpZiAocGllY2UuY29sb3IgPT09IFdISVRFKSByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAocGllY2UuY29sb3IgPT09IEJMQUNLKSByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLyogaWYgdGhlIHBpZWNlIGlzIGEga25pZ2h0IG9yIGEga2luZyAqL1xuICAgICAgICBpZiAocGllY2UudHlwZSA9PT0gJ24nIHx8IHBpZWNlLnR5cGUgPT09ICdrJykgcmV0dXJuIHRydWVcblxuICAgICAgICB2YXIgb2Zmc2V0ID0gUkFZU1tpbmRleF1cbiAgICAgICAgdmFyIGogPSBpICsgb2Zmc2V0XG5cbiAgICAgICAgdmFyIGJsb2NrZWQgPSBmYWxzZVxuICAgICAgICB3aGlsZSAoaiAhPT0gc3F1YXJlKSB7XG4gICAgICAgICAgaWYgKGJvYXJkW2pdICE9IG51bGwpIHtcbiAgICAgICAgICAgIGJsb2NrZWQgPSB0cnVlXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgICBqICs9IG9mZnNldFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFibG9ja2VkKSByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZnVuY3Rpb24ga2luZ19hdHRhY2tlZChjb2xvcikge1xuICAgIHJldHVybiBhdHRhY2tlZChzd2FwX2NvbG9yKGNvbG9yKSwga2luZ3NbY29sb3JdKVxuICB9XG5cbiAgZnVuY3Rpb24gaW5fY2hlY2soKSB7XG4gICAgcmV0dXJuIGtpbmdfYXR0YWNrZWQodHVybilcbiAgfVxuXG4gIGZ1bmN0aW9uIGluX2NoZWNrbWF0ZSgpIHtcbiAgICByZXR1cm4gaW5fY2hlY2soKSAmJiBnZW5lcmF0ZV9tb3ZlcygpLmxlbmd0aCA9PT0gMFxuICB9XG5cbiAgZnVuY3Rpb24gaW5fc3RhbGVtYXRlKCkge1xuICAgIHJldHVybiAhaW5fY2hlY2soKSAmJiBnZW5lcmF0ZV9tb3ZlcygpLmxlbmd0aCA9PT0gMFxuICB9XG5cbiAgZnVuY3Rpb24gaW5zdWZmaWNpZW50X21hdGVyaWFsKCkge1xuICAgIHZhciBwaWVjZXMgPSB7fVxuICAgIHZhciBiaXNob3BzID0gW11cbiAgICB2YXIgbnVtX3BpZWNlcyA9IDBcbiAgICB2YXIgc3FfY29sb3IgPSAwXG5cbiAgICBmb3IgKHZhciBpID0gU1FVQVJFX01BUC5hODsgaSA8PSBTUVVBUkVfTUFQLmgxOyBpKyspIHtcbiAgICAgIHNxX2NvbG9yID0gKHNxX2NvbG9yICsgMSkgJSAyXG4gICAgICBpZiAoaSAmIDB4ODgpIHtcbiAgICAgICAgaSArPSA3XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIHZhciBwaWVjZSA9IGJvYXJkW2ldXG4gICAgICBpZiAocGllY2UpIHtcbiAgICAgICAgcGllY2VzW3BpZWNlLnR5cGVdID0gcGllY2UudHlwZSBpbiBwaWVjZXMgPyBwaWVjZXNbcGllY2UudHlwZV0gKyAxIDogMVxuICAgICAgICBpZiAocGllY2UudHlwZSA9PT0gQklTSE9QKSB7XG4gICAgICAgICAgYmlzaG9wcy5wdXNoKHNxX2NvbG9yKVxuICAgICAgICB9XG4gICAgICAgIG51bV9waWVjZXMrK1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qIGsgdnMuIGsgKi9cbiAgICBpZiAobnVtX3BpZWNlcyA9PT0gMikge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgLyogayB2cy4ga24gLi4uLiBvciAuLi4uIGsgdnMuIGtiICovXG4gICAgICBudW1fcGllY2VzID09PSAzICYmXG4gICAgICAocGllY2VzW0JJU0hPUF0gPT09IDEgfHwgcGllY2VzW0tOSUdIVF0gPT09IDEpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gZWxzZSBpZiAobnVtX3BpZWNlcyA9PT0gcGllY2VzW0JJU0hPUF0gKyAyKSB7XG4gICAgICAvKiBrYiB2cy4ga2Igd2hlcmUgYW55IG51bWJlciBvZiBiaXNob3BzIGFyZSBhbGwgb24gdGhlIHNhbWUgY29sb3IgKi9cbiAgICAgIHZhciBzdW0gPSAwXG4gICAgICB2YXIgbGVuID0gYmlzaG9wcy5sZW5ndGhcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgc3VtICs9IGJpc2hvcHNbaV1cbiAgICAgIH1cbiAgICAgIGlmIChzdW0gPT09IDAgfHwgc3VtID09PSBsZW4pIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGZ1bmN0aW9uIGluX3RocmVlZm9sZF9yZXBldGl0aW9uKCkge1xuICAgIC8qIFRPRE86IHdoaWxlIHRoaXMgZnVuY3Rpb24gaXMgZmluZSBmb3IgY2FzdWFsIHVzZSwgYSBiZXR0ZXJcbiAgICAgKiBpbXBsZW1lbnRhdGlvbiB3b3VsZCB1c2UgYSBab2JyaXN0IGtleSAoaW5zdGVhZCBvZiBGRU4pLiB0aGVcbiAgICAgKiBab2JyaXN0IGtleSB3b3VsZCBiZSBtYWludGFpbmVkIGluIHRoZSBtYWtlX21vdmUvdW5kb19tb3ZlIGZ1bmN0aW9ucyxcbiAgICAgKiBhdm9pZGluZyB0aGUgY29zdGx5IHRoYXQgd2UgZG8gYmVsb3cuXG4gICAgICovXG4gICAgdmFyIG1vdmVzID0gW11cbiAgICB2YXIgcG9zaXRpb25zID0ge31cbiAgICB2YXIgcmVwZXRpdGlvbiA9IGZhbHNlXG5cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgdmFyIG1vdmUgPSB1bmRvX21vdmUoKVxuICAgICAgaWYgKCFtb3ZlKSBicmVha1xuICAgICAgbW92ZXMucHVzaChtb3ZlKVxuICAgIH1cblxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAvKiByZW1vdmUgdGhlIGxhc3QgdHdvIGZpZWxkcyBpbiB0aGUgRkVOIHN0cmluZywgdGhleSdyZSBub3QgbmVlZGVkXG4gICAgICAgKiB3aGVuIGNoZWNraW5nIGZvciBkcmF3IGJ5IHJlcCAqL1xuICAgICAgdmFyIGZlbiA9IGdlbmVyYXRlX2ZlbigpLnNwbGl0KCcgJykuc2xpY2UoMCwgNCkuam9pbignICcpXG5cbiAgICAgIC8qIGhhcyB0aGUgcG9zaXRpb24gb2NjdXJyZWQgdGhyZWUgb3IgbW92ZSB0aW1lcyAqL1xuICAgICAgcG9zaXRpb25zW2Zlbl0gPSBmZW4gaW4gcG9zaXRpb25zID8gcG9zaXRpb25zW2Zlbl0gKyAxIDogMVxuICAgICAgaWYgKHBvc2l0aW9uc1tmZW5dID49IDMpIHtcbiAgICAgICAgcmVwZXRpdGlvbiA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKCFtb3Zlcy5sZW5ndGgpIHtcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIG1ha2VfbW92ZShtb3Zlcy5wb3AoKSlcbiAgICB9XG5cbiAgICByZXR1cm4gcmVwZXRpdGlvblxuICB9XG5cbiAgZnVuY3Rpb24gcHVzaChtb3ZlKSB7XG4gICAgaGlzdG9yeS5wdXNoKHtcbiAgICAgIG1vdmU6IG1vdmUsXG4gICAgICBraW5nczogeyBiOiBraW5ncy5iLCB3OiBraW5ncy53IH0sXG4gICAgICB0dXJuOiB0dXJuLFxuICAgICAgY2FzdGxpbmc6IHsgYjogY2FzdGxpbmcuYiwgdzogY2FzdGxpbmcudyB9LFxuICAgICAgZXBfc3F1YXJlOiBlcF9zcXVhcmUsXG4gICAgICBoYWxmX21vdmVzOiBoYWxmX21vdmVzLFxuICAgICAgbW92ZV9udW1iZXI6IG1vdmVfbnVtYmVyLFxuICAgIH0pXG4gIH1cblxuICBmdW5jdGlvbiBtYWtlX21vdmUobW92ZSkge1xuICAgIHZhciB1cyA9IHR1cm5cbiAgICB2YXIgdGhlbSA9IHN3YXBfY29sb3IodXMpXG4gICAgcHVzaChtb3ZlKVxuXG4gICAgYm9hcmRbbW92ZS50b10gPSBib2FyZFttb3ZlLmZyb21dXG4gICAgYm9hcmRbbW92ZS5mcm9tXSA9IG51bGxcblxuICAgIC8qIGlmIGVwIGNhcHR1cmUsIHJlbW92ZSB0aGUgY2FwdHVyZWQgcGF3biAqL1xuICAgIGlmIChtb3ZlLmZsYWdzICYgQklUUy5FUF9DQVBUVVJFKSB7XG4gICAgICBpZiAodHVybiA9PT0gQkxBQ0spIHtcbiAgICAgICAgYm9hcmRbbW92ZS50byAtIDE2XSA9IG51bGxcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJvYXJkW21vdmUudG8gKyAxNl0gPSBudWxsXG4gICAgICB9XG4gICAgfVxuXG4gICAgLyogaWYgcGF3biBwcm9tb3Rpb24sIHJlcGxhY2Ugd2l0aCBuZXcgcGllY2UgKi9cbiAgICBpZiAobW92ZS5mbGFncyAmIEJJVFMuUFJPTU9USU9OKSB7XG4gICAgICBib2FyZFttb3ZlLnRvXSA9IHsgdHlwZTogbW92ZS5wcm9tb3Rpb24sIGNvbG9yOiB1cyB9XG4gICAgfVxuXG4gICAgLyogaWYgd2UgbW92ZWQgdGhlIGtpbmcgKi9cbiAgICBpZiAoYm9hcmRbbW92ZS50b10udHlwZSA9PT0gS0lORykge1xuICAgICAga2luZ3NbYm9hcmRbbW92ZS50b10uY29sb3JdID0gbW92ZS50b1xuXG4gICAgICAvKiBpZiB3ZSBjYXN0bGVkLCBtb3ZlIHRoZSByb29rIG5leHQgdG8gdGhlIGtpbmcgKi9cbiAgICAgIGlmIChtb3ZlLmZsYWdzICYgQklUUy5LU0lERV9DQVNUTEUpIHtcbiAgICAgICAgdmFyIGNhc3RsaW5nX3RvID0gbW92ZS50byAtIDFcbiAgICAgICAgdmFyIGNhc3RsaW5nX2Zyb20gPSBtb3ZlLnRvICsgMVxuICAgICAgICBib2FyZFtjYXN0bGluZ190b10gPSBib2FyZFtjYXN0bGluZ19mcm9tXVxuICAgICAgICBib2FyZFtjYXN0bGluZ19mcm9tXSA9IG51bGxcbiAgICAgIH0gZWxzZSBpZiAobW92ZS5mbGFncyAmIEJJVFMuUVNJREVfQ0FTVExFKSB7XG4gICAgICAgIHZhciBjYXN0bGluZ190byA9IG1vdmUudG8gKyAxXG4gICAgICAgIHZhciBjYXN0bGluZ19mcm9tID0gbW92ZS50byAtIDJcbiAgICAgICAgYm9hcmRbY2FzdGxpbmdfdG9dID0gYm9hcmRbY2FzdGxpbmdfZnJvbV1cbiAgICAgICAgYm9hcmRbY2FzdGxpbmdfZnJvbV0gPSBudWxsXG4gICAgICB9XG5cbiAgICAgIC8qIHR1cm4gb2ZmIGNhc3RsaW5nICovXG4gICAgICBjYXN0bGluZ1t1c10gPSAnJ1xuICAgIH1cblxuICAgIC8qIHR1cm4gb2ZmIGNhc3RsaW5nIGlmIHdlIG1vdmUgYSByb29rICovXG4gICAgaWYgKGNhc3RsaW5nW3VzXSkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IFJPT0tTW3VzXS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgbW92ZS5mcm9tID09PSBST09LU1t1c11baV0uc3F1YXJlICYmXG4gICAgICAgICAgY2FzdGxpbmdbdXNdICYgUk9PS1NbdXNdW2ldLmZsYWdcbiAgICAgICAgKSB7XG4gICAgICAgICAgY2FzdGxpbmdbdXNdIF49IFJPT0tTW3VzXVtpXS5mbGFnXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qIHR1cm4gb2ZmIGNhc3RsaW5nIGlmIHdlIGNhcHR1cmUgYSByb29rICovXG4gICAgaWYgKGNhc3RsaW5nW3RoZW1dKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gUk9PS1NbdGhlbV0ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG1vdmUudG8gPT09IFJPT0tTW3RoZW1dW2ldLnNxdWFyZSAmJlxuICAgICAgICAgIGNhc3RsaW5nW3RoZW1dICYgUk9PS1NbdGhlbV1baV0uZmxhZ1xuICAgICAgICApIHtcbiAgICAgICAgICBjYXN0bGluZ1t0aGVtXSBePSBST09LU1t0aGVtXVtpXS5mbGFnXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qIGlmIGJpZyBwYXduIG1vdmUsIHVwZGF0ZSB0aGUgZW4gcGFzc2FudCBzcXVhcmUgKi9cbiAgICBpZiAobW92ZS5mbGFncyAmIEJJVFMuQklHX1BBV04pIHtcbiAgICAgIGlmICh0dXJuID09PSAnYicpIHtcbiAgICAgICAgZXBfc3F1YXJlID0gbW92ZS50byAtIDE2XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlcF9zcXVhcmUgPSBtb3ZlLnRvICsgMTZcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZXBfc3F1YXJlID0gRU1QVFlcbiAgICB9XG5cbiAgICAvKiByZXNldCB0aGUgNTAgbW92ZSBjb3VudGVyIGlmIGEgcGF3biBpcyBtb3ZlZCBvciBhIHBpZWNlIGlzIGNhcHR1cmVkICovXG4gICAgaWYgKG1vdmUucGllY2UgPT09IFBBV04pIHtcbiAgICAgIGhhbGZfbW92ZXMgPSAwXG4gICAgfSBlbHNlIGlmIChtb3ZlLmZsYWdzICYgKEJJVFMuQ0FQVFVSRSB8IEJJVFMuRVBfQ0FQVFVSRSkpIHtcbiAgICAgIGhhbGZfbW92ZXMgPSAwXG4gICAgfSBlbHNlIHtcbiAgICAgIGhhbGZfbW92ZXMrK1xuICAgIH1cblxuICAgIGlmICh0dXJuID09PSBCTEFDSykge1xuICAgICAgbW92ZV9udW1iZXIrK1xuICAgIH1cbiAgICB0dXJuID0gc3dhcF9jb2xvcih0dXJuKVxuICB9XG5cbiAgZnVuY3Rpb24gdW5kb19tb3ZlKCkge1xuICAgIHZhciBvbGQgPSBoaXN0b3J5LnBvcCgpXG4gICAgaWYgKG9sZCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIHZhciBtb3ZlID0gb2xkLm1vdmVcbiAgICBraW5ncyA9IG9sZC5raW5nc1xuICAgIHR1cm4gPSBvbGQudHVyblxuICAgIGNhc3RsaW5nID0gb2xkLmNhc3RsaW5nXG4gICAgZXBfc3F1YXJlID0gb2xkLmVwX3NxdWFyZVxuICAgIGhhbGZfbW92ZXMgPSBvbGQuaGFsZl9tb3Zlc1xuICAgIG1vdmVfbnVtYmVyID0gb2xkLm1vdmVfbnVtYmVyXG5cbiAgICB2YXIgdXMgPSB0dXJuXG4gICAgdmFyIHRoZW0gPSBzd2FwX2NvbG9yKHR1cm4pXG5cbiAgICBib2FyZFttb3ZlLmZyb21dID0gYm9hcmRbbW92ZS50b11cbiAgICBib2FyZFttb3ZlLmZyb21dLnR5cGUgPSBtb3ZlLnBpZWNlIC8vIHRvIHVuZG8gYW55IHByb21vdGlvbnNcbiAgICBib2FyZFttb3ZlLnRvXSA9IG51bGxcblxuICAgIGlmIChtb3ZlLmZsYWdzICYgQklUUy5DQVBUVVJFKSB7XG4gICAgICBib2FyZFttb3ZlLnRvXSA9IHsgdHlwZTogbW92ZS5jYXB0dXJlZCwgY29sb3I6IHRoZW0gfVxuICAgIH0gZWxzZSBpZiAobW92ZS5mbGFncyAmIEJJVFMuRVBfQ0FQVFVSRSkge1xuICAgICAgdmFyIGluZGV4XG4gICAgICBpZiAodXMgPT09IEJMQUNLKSB7XG4gICAgICAgIGluZGV4ID0gbW92ZS50byAtIDE2XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbmRleCA9IG1vdmUudG8gKyAxNlxuICAgICAgfVxuICAgICAgYm9hcmRbaW5kZXhdID0geyB0eXBlOiBQQVdOLCBjb2xvcjogdGhlbSB9XG4gICAgfVxuXG4gICAgaWYgKG1vdmUuZmxhZ3MgJiAoQklUUy5LU0lERV9DQVNUTEUgfCBCSVRTLlFTSURFX0NBU1RMRSkpIHtcbiAgICAgIHZhciBjYXN0bGluZ190bywgY2FzdGxpbmdfZnJvbVxuICAgICAgaWYgKG1vdmUuZmxhZ3MgJiBCSVRTLktTSURFX0NBU1RMRSkge1xuICAgICAgICBjYXN0bGluZ190byA9IG1vdmUudG8gKyAxXG4gICAgICAgIGNhc3RsaW5nX2Zyb20gPSBtb3ZlLnRvIC0gMVxuICAgICAgfSBlbHNlIGlmIChtb3ZlLmZsYWdzICYgQklUUy5RU0lERV9DQVNUTEUpIHtcbiAgICAgICAgY2FzdGxpbmdfdG8gPSBtb3ZlLnRvIC0gMlxuICAgICAgICBjYXN0bGluZ19mcm9tID0gbW92ZS50byArIDFcbiAgICAgIH1cblxuICAgICAgYm9hcmRbY2FzdGxpbmdfdG9dID0gYm9hcmRbY2FzdGxpbmdfZnJvbV1cbiAgICAgIGJvYXJkW2Nhc3RsaW5nX2Zyb21dID0gbnVsbFxuICAgIH1cblxuICAgIHJldHVybiBtb3ZlXG4gIH1cblxuICAvLyBjb252ZXJ0IGEgbW92ZSBmcm9tIFN0YW5kYXJkIEFsZ2VicmFpYyBOb3RhdGlvbiAoU0FOKSB0byAweDg4IGNvb3JkaW5hdGVzXG4gIGZ1bmN0aW9uIG1vdmVfZnJvbV9zYW4obW92ZSwgc2xvcHB5KSB7XG4gICAgLy8gc3RyaXAgb2ZmIGFueSBtb3ZlIGRlY29yYXRpb25zOiBlLmcgTmYzKz8hIGJlY29tZXMgTmYzXG4gICAgdmFyIGNsZWFuX21vdmUgPSBzdHJpcHBlZF9zYW4obW92ZSlcblxuICAgIC8vIHRoZSBtb3ZlIHBhcnNlcnMgaXMgYSAyLXN0ZXAgc3RhdGVcbiAgICBmb3IgKHZhciBwYXJzZXIgPSAwOyBwYXJzZXIgPCAyOyBwYXJzZXIrKykge1xuICAgICAgaWYgKHBhcnNlciA9PSBQQVJTRVJfU0xPUFBZKSB7XG4gICAgICAgIC8vIG9ubHkgcnVuIHRoZSBzbG9wcHkgcGFyc2UgaWYgZXhwbGljaXRseSByZXF1ZXN0ZWRcbiAgICAgICAgaWYgKCFzbG9wcHkpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhlIHNsb3BweSBwYXJzZXIgYWxsb3dzIHRoZSB1c2VyIHRvIHBhcnNlIG5vbi1zdGFuZGFyZCBjaGVzc1xuICAgICAgICAvLyBub3RhdGlvbnMuIFRoaXMgcGFyc2VyIGlzIG9wdC1pbiAoYnkgc3BlY2lmeWluZyB0aGVcbiAgICAgICAgLy8gJ3sgc2xvcHB5OiB0cnVlIH0nIHNldHRpbmcpIGFuZCBpcyBvbmx5IHJ1biBhZnRlciB0aGUgU3RhbmRhcmRcbiAgICAgICAgLy8gQWxnZWJyYWljIE5vdGF0aW9uIChTQU4pIHBhcnNlciBoYXMgZmFpbGVkLlxuICAgICAgICAvL1xuICAgICAgICAvLyBXaGVuIHJ1bm5pbmcgdGhlIHNsb3BweSBwYXJzZXIsIHdlJ2xsIHJ1biBhIHJlZ2V4IHRvIGdyYWIgdGhlIHBpZWNlLFxuICAgICAgICAvLyB0aGUgdG8vZnJvbSBzcXVhcmUsIGFuZCBhbiBvcHRpb25hbCBwcm9tb3Rpb24gcGllY2UuIFRoaXMgcmVnZXggd2lsbFxuICAgICAgICAvLyBwYXJzZSBjb21tb24gbm9uLXN0YW5kYXJkIG5vdGF0aW9uIGxpa2U6IFBlMi1lNCwgUmMxYzQsIFFmM3hmNyxcbiAgICAgICAgLy8gZjdmOHEsIGIxYzNcblxuICAgICAgICAvLyBOT1RFOiBTb21lIHBvc2l0aW9ucyBhbmQgbW92ZXMgbWF5IGJlIGFtYmlndW91cyB3aGVuIHVzaW5nIHRoZVxuICAgICAgICAvLyBzbG9wcHkgcGFyc2VyLiBGb3IgZXhhbXBsZSwgaW4gdGhpcyBwb3NpdGlvbjpcbiAgICAgICAgLy8gNmsxLzgvOC9CNy84LzgvOC9CTjRLMSB3IC0gLSAwIDEsIHRoZSBtb3ZlIGIxYzMgbWF5IGJlIGludGVycHJldGVkXG4gICAgICAgIC8vIGFzIE5jMyBvciBCMWMzIChhIGRpc2FtYmlndWF0ZWQgYmlzaG9wIG1vdmUpLiBJbiB0aGVzZSBjYXNlcywgdGhlXG4gICAgICAgIC8vIHNsb3BweSBwYXJzZXIgd2lsbCBkZWZhdWx0IHRvIHRoZSBtb3N0IG1vc3QgYmFzaWMgaW50ZXJwcmV0YXRpb25cbiAgICAgICAgLy8gKHdoaWNoIGlzIGIxYzMgcGFyc2luZyB0byBOYzMpLlxuXG4gICAgICAgIC8vIEZJWE1FOiB0aGVzZSB2YXIncyBhcmUgaG9pc3RlZCBpbnRvIGZ1bmN0aW9uIHNjb3BlLCB0aGlzIHdpbGwgbmVlZFxuICAgICAgICAvLyB0byBjaGFuZ2Ugd2hlbiBzd2l0Y2hpbmcgdG8gY29uc3QvbGV0XG5cbiAgICAgICAgdmFyIG92ZXJseV9kaXNhbWJpZ3VhdGVkID0gZmFsc2VcblxuICAgICAgICB2YXIgbWF0Y2hlcyA9IGNsZWFuX21vdmUubWF0Y2goXG4gICAgICAgICAgLyhbcG5icnFrUE5CUlFLXSk/KFthLWhdWzEtOF0peD8tPyhbYS1oXVsxLThdKShbcXJiblFSQk5dKT8vXG4gICAgICAgIClcbiAgICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgICB2YXIgcGllY2UgPSBtYXRjaGVzWzFdXG4gICAgICAgICAgdmFyIGZyb20gPSBtYXRjaGVzWzJdXG4gICAgICAgICAgdmFyIHRvID0gbWF0Y2hlc1szXVxuICAgICAgICAgIHZhciBwcm9tb3Rpb24gPSBtYXRjaGVzWzRdXG5cbiAgICAgICAgICBpZiAoZnJvbS5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgb3Zlcmx5X2Rpc2FtYmlndWF0ZWQgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFRoZSBbYS1oXT9bMS04XT8gcG9ydGlvbiBvZiB0aGUgcmVnZXggYmVsb3cgaGFuZGxlcyBtb3ZlcyB0aGF0IG1heVxuICAgICAgICAgIC8vIGJlIG92ZXJseSBkaXNhbWJpZ3VhdGVkIChlLmcuIE5nZTcgaXMgdW5uZWNlc3NhcnkgYW5kIG5vbi1zdGFuZGFyZFxuICAgICAgICAgIC8vIHdoZW4gdGhlcmUgaXMgb25lIGxlZ2FsIGtuaWdodCBtb3ZlIHRvIGU3KS4gSW4gdGhpcyBjYXNlLCB0aGUgdmFsdWVcbiAgICAgICAgICAvLyBvZiAnZnJvbScgdmFyaWFibGUgd2lsbCBiZSBhIHJhbmsgb3IgZmlsZSwgbm90IGEgc3F1YXJlLlxuICAgICAgICAgIHZhciBtYXRjaGVzID0gY2xlYW5fbW92ZS5tYXRjaChcbiAgICAgICAgICAgIC8oW3BuYnJxa1BOQlJRS10pPyhbYS1oXT9bMS04XT8peD8tPyhbYS1oXVsxLThdKShbcXJiblFSQk5dKT8vXG4gICAgICAgICAgKVxuXG4gICAgICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgICAgIHZhciBwaWVjZSA9IG1hdGNoZXNbMV1cbiAgICAgICAgICAgIHZhciBmcm9tID0gbWF0Y2hlc1syXVxuICAgICAgICAgICAgdmFyIHRvID0gbWF0Y2hlc1szXVxuICAgICAgICAgICAgdmFyIHByb21vdGlvbiA9IG1hdGNoZXNbNF1cblxuICAgICAgICAgICAgaWYgKGZyb20ubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICAgdmFyIG92ZXJseV9kaXNhbWJpZ3VhdGVkID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgcGllY2VfdHlwZSA9IGluZmVyX3BpZWNlX3R5cGUoY2xlYW5fbW92ZSlcbiAgICAgIHZhciBtb3ZlcyA9IGdlbmVyYXRlX21vdmVzKHtcbiAgICAgICAgbGVnYWw6IHRydWUsXG4gICAgICAgIHBpZWNlOiBwaWVjZSA/IHBpZWNlIDogcGllY2VfdHlwZSxcbiAgICAgIH0pXG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBtb3Zlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBzd2l0Y2ggKHBhcnNlcikge1xuICAgICAgICAgIGNhc2UgUEFSU0VSX1NUUklDVDoge1xuICAgICAgICAgICAgaWYgKGNsZWFuX21vdmUgPT09IHN0cmlwcGVkX3Nhbihtb3ZlX3RvX3Nhbihtb3Zlc1tpXSwgbW92ZXMpKSkge1xuICAgICAgICAgICAgICByZXR1cm4gbW92ZXNbaV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgUEFSU0VSX1NMT1BQWToge1xuICAgICAgICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgLy8gaGFuZC1jb21wYXJlIG1vdmUgcHJvcGVydGllcyB3aXRoIHRoZSByZXN1bHRzIGZyb20gb3VyIHNsb3BweVxuICAgICAgICAgICAgICAvLyByZWdleFxuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgKCFwaWVjZSB8fCBwaWVjZS50b0xvd2VyQ2FzZSgpID09IG1vdmVzW2ldLnBpZWNlKSAmJlxuICAgICAgICAgICAgICAgIFNRVUFSRV9NQVBbZnJvbV0gPT0gbW92ZXNbaV0uZnJvbSAmJlxuICAgICAgICAgICAgICAgIFNRVUFSRV9NQVBbdG9dID09IG1vdmVzW2ldLnRvICYmXG4gICAgICAgICAgICAgICAgKCFwcm9tb3Rpb24gfHwgcHJvbW90aW9uLnRvTG93ZXJDYXNlKCkgPT0gbW92ZXNbaV0ucHJvbW90aW9uKVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW92ZXNbaV1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChvdmVybHlfZGlzYW1iaWd1YXRlZCkge1xuICAgICAgICAgICAgICAgIC8vIFNQRUNJQUwgQ0FTRTogd2UgcGFyc2VkIGEgbW92ZSBzdHJpbmcgdGhhdCBtYXkgaGF2ZSBhblxuICAgICAgICAgICAgICAgIC8vIHVubmVlZGVkIHJhbmsvZmlsZSBkaXNhbWJpZ3VhdG9yIChlLmcuIE5nZTcpLiAgVGhlICdmcm9tJ1xuICAgICAgICAgICAgICAgIC8vIHZhcmlhYmxlIHdpbGxcbiAgICAgICAgICAgICAgICB2YXIgc3F1YXJlID0gYWxnZWJyYWljKG1vdmVzW2ldLmZyb20pXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgKCFwaWVjZSB8fCBwaWVjZS50b0xvd2VyQ2FzZSgpID09IG1vdmVzW2ldLnBpZWNlKSAmJlxuICAgICAgICAgICAgICAgICAgU1FVQVJFX01BUFt0b10gPT0gbW92ZXNbaV0udG8gJiZcbiAgICAgICAgICAgICAgICAgIChmcm9tID09IHNxdWFyZVswXSB8fCBmcm9tID09IHNxdWFyZVsxXSkgJiZcbiAgICAgICAgICAgICAgICAgICghcHJvbW90aW9uIHx8IHByb21vdGlvbi50b0xvd2VyQ2FzZSgpID09IG1vdmVzW2ldLnByb21vdGlvbilcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBtb3Zlc1tpXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICAvKiBwcmV0dHkgPSBleHRlcm5hbCBtb3ZlIG9iamVjdCAqL1xuICBmdW5jdGlvbiBtYWtlX3ByZXR0eSh1Z2x5X21vdmUpIHtcbiAgICB2YXIgbW92ZSA9IGNsb25lKHVnbHlfbW92ZSlcbiAgICBtb3ZlLnNhbiA9IG1vdmVfdG9fc2FuKG1vdmUsIGdlbmVyYXRlX21vdmVzKHsgbGVnYWw6IHRydWUgfSkpXG4gICAgbW92ZS50byA9IGFsZ2VicmFpYyhtb3ZlLnRvKVxuICAgIG1vdmUuZnJvbSA9IGFsZ2VicmFpYyhtb3ZlLmZyb20pXG5cbiAgICB2YXIgZmxhZ3MgPSAnJ1xuXG4gICAgZm9yICh2YXIgZmxhZyBpbiBCSVRTKSB7XG4gICAgICBpZiAoQklUU1tmbGFnXSAmIG1vdmUuZmxhZ3MpIHtcbiAgICAgICAgZmxhZ3MgKz0gRkxBR1NbZmxhZ11cbiAgICAgIH1cbiAgICB9XG4gICAgbW92ZS5mbGFncyA9IGZsYWdzXG5cbiAgICByZXR1cm4gbW92ZVxuICB9XG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAqIERFQlVHR0lORyBVVElMSVRJRVNcbiAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIGZ1bmN0aW9uIHBlcmZ0KGRlcHRoKSB7XG4gICAgdmFyIG1vdmVzID0gZ2VuZXJhdGVfbW92ZXMoeyBsZWdhbDogZmFsc2UgfSlcbiAgICB2YXIgbm9kZXMgPSAwXG4gICAgdmFyIGNvbG9yID0gdHVyblxuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG1vdmVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBtYWtlX21vdmUobW92ZXNbaV0pXG4gICAgICBpZiAoIWtpbmdfYXR0YWNrZWQoY29sb3IpKSB7XG4gICAgICAgIGlmIChkZXB0aCAtIDEgPiAwKSB7XG4gICAgICAgICAgdmFyIGNoaWxkX25vZGVzID0gcGVyZnQoZGVwdGggLSAxKVxuICAgICAgICAgIG5vZGVzICs9IGNoaWxkX25vZGVzXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm9kZXMrK1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB1bmRvX21vdmUoKVxuICAgIH1cblxuICAgIHJldHVybiBub2Rlc1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICogUFVCTElDIEFQSVxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgICBsb2FkOiBmdW5jdGlvbiAoZmVuKSB7XG4gICAgICByZXR1cm4gbG9hZChmZW4pXG4gICAgfSxcblxuICAgIHJlc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gcmVzZXQoKVxuICAgIH0sXG5cbiAgICBtb3ZlczogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgIC8qIFRoZSBpbnRlcm5hbCByZXByZXNlbnRhdGlvbiBvZiBhIGNoZXNzIG1vdmUgaXMgaW4gMHg4OCBmb3JtYXQsIGFuZFxuICAgICAgICogbm90IG1lYW50IHRvIGJlIGh1bWFuLXJlYWRhYmxlLiAgVGhlIGNvZGUgYmVsb3cgY29udmVydHMgdGhlIDB4ODhcbiAgICAgICAqIHNxdWFyZSBjb29yZGluYXRlcyB0byBhbGdlYnJhaWMgY29vcmRpbmF0ZXMuICBJdCBhbHNvIHBydW5lcyBhblxuICAgICAgICogdW5uZWNlc3NhcnkgbW92ZSBrZXlzIHJlc3VsdGluZyBmcm9tIGEgdmVyYm9zZSBjYWxsLlxuICAgICAgICovXG5cbiAgICAgIHZhciB1Z2x5X21vdmVzID0gZ2VuZXJhdGVfbW92ZXMob3B0aW9ucylcbiAgICAgIHZhciBtb3ZlcyA9IFtdXG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB1Z2x5X21vdmVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIC8qIGRvZXMgdGhlIHVzZXIgd2FudCBhIGZ1bGwgbW92ZSBvYmplY3QgKG1vc3QgbGlrZWx5IG5vdCksIG9yIGp1c3RcbiAgICAgICAgICogU0FOXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIG9wdGlvbnMgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgJ3ZlcmJvc2UnIGluIG9wdGlvbnMgJiZcbiAgICAgICAgICBvcHRpb25zLnZlcmJvc2VcbiAgICAgICAgKSB7XG4gICAgICAgICAgbW92ZXMucHVzaChtYWtlX3ByZXR0eSh1Z2x5X21vdmVzW2ldKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtb3Zlcy5wdXNoKFxuICAgICAgICAgICAgbW92ZV90b19zYW4odWdseV9tb3Zlc1tpXSwgZ2VuZXJhdGVfbW92ZXMoeyBsZWdhbDogdHJ1ZSB9KSlcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG1vdmVzXG4gICAgfSxcblxuICAgIGluX2NoZWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gaW5fY2hlY2soKVxuICAgIH0sXG5cbiAgICBpbl9jaGVja21hdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBpbl9jaGVja21hdGUoKVxuICAgIH0sXG5cbiAgICBpbl9zdGFsZW1hdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBpbl9zdGFsZW1hdGUoKVxuICAgIH0sXG5cbiAgICBpbl9kcmF3OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBoYWxmX21vdmVzID49IDEwMCB8fFxuICAgICAgICBpbl9zdGFsZW1hdGUoKSB8fFxuICAgICAgICBpbnN1ZmZpY2llbnRfbWF0ZXJpYWwoKSB8fFxuICAgICAgICBpbl90aHJlZWZvbGRfcmVwZXRpdGlvbigpXG4gICAgICApXG4gICAgfSxcblxuICAgIGluc3VmZmljaWVudF9tYXRlcmlhbDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGluc3VmZmljaWVudF9tYXRlcmlhbCgpXG4gICAgfSxcblxuICAgIGluX3RocmVlZm9sZF9yZXBldGl0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gaW5fdGhyZWVmb2xkX3JlcGV0aXRpb24oKVxuICAgIH0sXG5cbiAgICBnYW1lX292ZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGhhbGZfbW92ZXMgPj0gMTAwIHx8XG4gICAgICAgIGluX2NoZWNrbWF0ZSgpIHx8XG4gICAgICAgIGluX3N0YWxlbWF0ZSgpIHx8XG4gICAgICAgIGluc3VmZmljaWVudF9tYXRlcmlhbCgpIHx8XG4gICAgICAgIGluX3RocmVlZm9sZF9yZXBldGl0aW9uKClcbiAgICAgIClcbiAgICB9LFxuXG4gICAgdmFsaWRhdGVfZmVuOiBmdW5jdGlvbiAoZmVuKSB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVfZmVuKGZlbilcbiAgICB9LFxuXG4gICAgZmVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZ2VuZXJhdGVfZmVuKClcbiAgICB9LFxuXG4gICAgYm9hcmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBvdXRwdXQgPSBbXSxcbiAgICAgICAgcm93ID0gW11cblxuICAgICAgZm9yICh2YXIgaSA9IFNRVUFSRV9NQVAuYTg7IGkgPD0gU1FVQVJFX01BUC5oMTsgaSsrKSB7XG4gICAgICAgIGlmIChib2FyZFtpXSA9PSBudWxsKSB7XG4gICAgICAgICAgcm93LnB1c2gobnVsbClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByb3cucHVzaCh7XG4gICAgICAgICAgICBzcXVhcmU6IGFsZ2VicmFpYyhpKSxcbiAgICAgICAgICAgIHR5cGU6IGJvYXJkW2ldLnR5cGUsXG4gICAgICAgICAgICBjb2xvcjogYm9hcmRbaV0uY29sb3IsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGkgKyAxKSAmIDB4ODgpIHtcbiAgICAgICAgICBvdXRwdXQucHVzaChyb3cpXG4gICAgICAgICAgcm93ID0gW11cbiAgICAgICAgICBpICs9IDhcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gb3V0cHV0XG4gICAgfSxcblxuICAgIHBnbjogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgIC8qIHVzaW5nIHRoZSBzcGVjaWZpY2F0aW9uIGZyb20gaHR0cDovL3d3dy5jaGVzc2NsdWIuY29tL2hlbHAvUEdOLXNwZWNcbiAgICAgICAqIGV4YW1wbGUgZm9yIGh0bWwgdXNhZ2U6IC5wZ24oeyBtYXhfd2lkdGg6IDcyLCBuZXdsaW5lX2NoYXI6IFwiPGJyIC8+XCIgfSlcbiAgICAgICAqL1xuICAgICAgdmFyIG5ld2xpbmUgPVxuICAgICAgICB0eXBlb2Ygb3B0aW9ucyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG9wdGlvbnMubmV3bGluZV9jaGFyID09PSAnc3RyaW5nJ1xuICAgICAgICAgID8gb3B0aW9ucy5uZXdsaW5lX2NoYXJcbiAgICAgICAgICA6ICdcXG4nXG4gICAgICB2YXIgbWF4X3dpZHRoID1cbiAgICAgICAgdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBvcHRpb25zLm1heF93aWR0aCA9PT0gJ251bWJlcidcbiAgICAgICAgICA/IG9wdGlvbnMubWF4X3dpZHRoXG4gICAgICAgICAgOiAwXG4gICAgICB2YXIgcmVzdWx0ID0gW11cbiAgICAgIHZhciBoZWFkZXJfZXhpc3RzID0gZmFsc2VcblxuICAgICAgLyogYWRkIHRoZSBQR04gaGVhZGVyIGhlYWRlcnJtYXRpb24gKi9cbiAgICAgIGZvciAodmFyIGkgaW4gaGVhZGVyKSB7XG4gICAgICAgIC8qIFRPRE86IG9yZGVyIG9mIGVudW1lcmF0ZWQgcHJvcGVydGllcyBpbiBoZWFkZXIgb2JqZWN0IGlzIG5vdFxuICAgICAgICAgKiBndWFyYW50ZWVkLCBzZWUgRUNNQS0yNjIgc3BlYyAoc2VjdGlvbiAxMi42LjQpXG4gICAgICAgICAqL1xuICAgICAgICByZXN1bHQucHVzaCgnWycgKyBpICsgJyBcIicgKyBoZWFkZXJbaV0gKyAnXCJdJyArIG5ld2xpbmUpXG4gICAgICAgIGhlYWRlcl9leGlzdHMgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChoZWFkZXJfZXhpc3RzICYmIGhpc3RvcnkubGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKG5ld2xpbmUpXG4gICAgICB9XG5cbiAgICAgIHZhciBhcHBlbmRfY29tbWVudCA9IGZ1bmN0aW9uIChtb3ZlX3N0cmluZykge1xuICAgICAgICB2YXIgY29tbWVudCA9IGNvbW1lbnRzW2dlbmVyYXRlX2ZlbigpXVxuICAgICAgICBpZiAodHlwZW9mIGNvbW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdmFyIGRlbGltaXRlciA9IG1vdmVfc3RyaW5nLmxlbmd0aCA+IDAgPyAnICcgOiAnJ1xuICAgICAgICAgIG1vdmVfc3RyaW5nID0gYCR7bW92ZV9zdHJpbmd9JHtkZWxpbWl0ZXJ9eyR7Y29tbWVudH19YFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtb3ZlX3N0cmluZ1xuICAgICAgfVxuXG4gICAgICAvKiBwb3AgYWxsIG9mIGhpc3Rvcnkgb250byByZXZlcnNlZF9oaXN0b3J5ICovXG4gICAgICB2YXIgcmV2ZXJzZWRfaGlzdG9yeSA9IFtdXG4gICAgICB3aGlsZSAoaGlzdG9yeS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldmVyc2VkX2hpc3RvcnkucHVzaCh1bmRvX21vdmUoKSlcbiAgICAgIH1cblxuICAgICAgdmFyIG1vdmVzID0gW11cbiAgICAgIHZhciBtb3ZlX3N0cmluZyA9ICcnXG5cbiAgICAgIC8qIHNwZWNpYWwgY2FzZSBvZiBhIGNvbW1lbnRlZCBzdGFydGluZyBwb3NpdGlvbiB3aXRoIG5vIG1vdmVzICovXG4gICAgICBpZiAocmV2ZXJzZWRfaGlzdG9yeS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbW92ZXMucHVzaChhcHBlbmRfY29tbWVudCgnJykpXG4gICAgICB9XG5cbiAgICAgIC8qIGJ1aWxkIHRoZSBsaXN0IG9mIG1vdmVzLiAgYSBtb3ZlX3N0cmluZyBsb29rcyBsaWtlOiBcIjMuIGUzIGU2XCIgKi9cbiAgICAgIHdoaWxlIChyZXZlcnNlZF9oaXN0b3J5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgbW92ZV9zdHJpbmcgPSBhcHBlbmRfY29tbWVudChtb3ZlX3N0cmluZylcbiAgICAgICAgdmFyIG1vdmUgPSByZXZlcnNlZF9oaXN0b3J5LnBvcCgpXG5cbiAgICAgICAgLyogaWYgdGhlIHBvc2l0aW9uIHN0YXJ0ZWQgd2l0aCBibGFjayB0byBtb3ZlLCBzdGFydCBQR04gd2l0aCAxLiAuLi4gKi9cbiAgICAgICAgaWYgKCFoaXN0b3J5Lmxlbmd0aCAmJiBtb3ZlLmNvbG9yID09PSAnYicpIHtcbiAgICAgICAgICBtb3ZlX3N0cmluZyA9IG1vdmVfbnVtYmVyICsgJy4gLi4uJ1xuICAgICAgICB9IGVsc2UgaWYgKG1vdmUuY29sb3IgPT09ICd3Jykge1xuICAgICAgICAgIC8qIHN0b3JlIHRoZSBwcmV2aW91cyBnZW5lcmF0ZWQgbW92ZV9zdHJpbmcgaWYgd2UgaGF2ZSBvbmUgKi9cbiAgICAgICAgICBpZiAobW92ZV9zdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICBtb3Zlcy5wdXNoKG1vdmVfc3RyaW5nKVxuICAgICAgICAgIH1cbiAgICAgICAgICBtb3ZlX3N0cmluZyA9IG1vdmVfbnVtYmVyICsgJy4nXG4gICAgICAgIH1cblxuICAgICAgICBtb3ZlX3N0cmluZyA9XG4gICAgICAgICAgbW92ZV9zdHJpbmcgKyAnICcgKyBtb3ZlX3RvX3Nhbihtb3ZlLCBnZW5lcmF0ZV9tb3Zlcyh7IGxlZ2FsOiB0cnVlIH0pKVxuICAgICAgICBtYWtlX21vdmUobW92ZSlcbiAgICAgIH1cblxuICAgICAgLyogYXJlIHRoZXJlIGFueSBvdGhlciBsZWZ0b3ZlciBtb3Zlcz8gKi9cbiAgICAgIGlmIChtb3ZlX3N0cmluZy5sZW5ndGgpIHtcbiAgICAgICAgbW92ZXMucHVzaChhcHBlbmRfY29tbWVudChtb3ZlX3N0cmluZykpXG4gICAgICB9XG5cbiAgICAgIC8qIGlzIHRoZXJlIGEgcmVzdWx0PyAqL1xuICAgICAgaWYgKHR5cGVvZiBoZWFkZXIuUmVzdWx0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBtb3Zlcy5wdXNoKGhlYWRlci5SZXN1bHQpXG4gICAgICB9XG5cbiAgICAgIC8qIGhpc3Rvcnkgc2hvdWxkIGJlIGJhY2sgdG8gd2hhdCBpdCB3YXMgYmVmb3JlIHdlIHN0YXJ0ZWQgZ2VuZXJhdGluZyBQR04sXG4gICAgICAgKiBzbyBqb2luIHRvZ2V0aGVyIG1vdmVzXG4gICAgICAgKi9cbiAgICAgIGlmIChtYXhfd2lkdGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5qb2luKCcnKSArIG1vdmVzLmpvaW4oJyAnKVxuICAgICAgfVxuXG4gICAgICB2YXIgc3RyaXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCAmJiByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdID09PSAnICcpIHtcbiAgICAgICAgICByZXN1bHQucG9wKClcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuXG4gICAgICAvKiBOQjogdGhpcyBkb2VzIG5vdCBwcmVzZXJ2ZSBjb21tZW50IHdoaXRlc3BhY2UuICovXG4gICAgICB2YXIgd3JhcF9jb21tZW50ID0gZnVuY3Rpb24gKHdpZHRoLCBtb3ZlKSB7XG4gICAgICAgIGZvciAodmFyIHRva2VuIG9mIG1vdmUuc3BsaXQoJyAnKSkge1xuICAgICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh3aWR0aCArIHRva2VuLmxlbmd0aCA+IG1heF93aWR0aCkge1xuICAgICAgICAgICAgd2hpbGUgKHN0cmlwKCkpIHtcbiAgICAgICAgICAgICAgd2lkdGgtLVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3bGluZSlcbiAgICAgICAgICAgIHdpZHRoID0gMFxuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQucHVzaCh0b2tlbilcbiAgICAgICAgICB3aWR0aCArPSB0b2tlbi5sZW5ndGhcbiAgICAgICAgICByZXN1bHQucHVzaCgnICcpXG4gICAgICAgICAgd2lkdGgrK1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdHJpcCgpKSB7XG4gICAgICAgICAgd2lkdGgtLVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aWR0aFxuICAgICAgfVxuXG4gICAgICAvKiB3cmFwIHRoZSBQR04gb3V0cHV0IGF0IG1heF93aWR0aCAqL1xuICAgICAgdmFyIGN1cnJlbnRfd2lkdGggPSAwXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vdmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChjdXJyZW50X3dpZHRoICsgbW92ZXNbaV0ubGVuZ3RoID4gbWF4X3dpZHRoKSB7XG4gICAgICAgICAgaWYgKG1vdmVzW2ldLmluY2x1ZGVzKCd7JykpIHtcbiAgICAgICAgICAgIGN1cnJlbnRfd2lkdGggPSB3cmFwX2NvbW1lbnQoY3VycmVudF93aWR0aCwgbW92ZXNbaV0pXG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKiBpZiB0aGUgY3VycmVudCBtb3ZlIHdpbGwgcHVzaCBwYXN0IG1heF93aWR0aCAqL1xuICAgICAgICBpZiAoY3VycmVudF93aWR0aCArIG1vdmVzW2ldLmxlbmd0aCA+IG1heF93aWR0aCAmJiBpICE9PSAwKSB7XG4gICAgICAgICAgLyogZG9uJ3QgZW5kIHRoZSBsaW5lIHdpdGggd2hpdGVzcGFjZSAqL1xuICAgICAgICAgIGlmIChyZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdID09PSAnICcpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wb3AoKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlc3VsdC5wdXNoKG5ld2xpbmUpXG4gICAgICAgICAgY3VycmVudF93aWR0aCA9IDBcbiAgICAgICAgfSBlbHNlIGlmIChpICE9PSAwKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goJyAnKVxuICAgICAgICAgIGN1cnJlbnRfd2lkdGgrK1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdC5wdXNoKG1vdmVzW2ldKVxuICAgICAgICBjdXJyZW50X3dpZHRoICs9IG1vdmVzW2ldLmxlbmd0aFxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0LmpvaW4oJycpXG4gICAgfSxcblxuICAgIGxvYWRfcGduOiBmdW5jdGlvbiAocGduLCBvcHRpb25zKSB7XG4gICAgICAvLyBhbGxvdyB0aGUgdXNlciB0byBzcGVjaWZ5IHRoZSBzbG9wcHkgbW92ZSBwYXJzZXIgdG8gd29yayBhcm91bmQgb3ZlclxuICAgICAgLy8gZGlzYW1iaWd1YXRpb24gYnVncyBpbiBGcml0eiBhbmQgQ2hlc3NiYXNlXG4gICAgICB2YXIgc2xvcHB5ID1cbiAgICAgICAgdHlwZW9mIG9wdGlvbnMgIT09ICd1bmRlZmluZWQnICYmICdzbG9wcHknIGluIG9wdGlvbnNcbiAgICAgICAgICA/IG9wdGlvbnMuc2xvcHB5XG4gICAgICAgICAgOiBmYWxzZVxuXG4gICAgICBmdW5jdGlvbiBtYXNrKHN0cikge1xuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1xcXFwvZywgJ1xcXFwnKVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBoYXNfa2V5cyhvYmplY3QpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHBhcnNlX3Bnbl9oZWFkZXIoaGVhZGVyLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBuZXdsaW5lX2NoYXIgPVxuICAgICAgICAgIHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgIHR5cGVvZiBvcHRpb25zLm5ld2xpbmVfY2hhciA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gb3B0aW9ucy5uZXdsaW5lX2NoYXJcbiAgICAgICAgICAgIDogJ1xccj9cXG4nXG4gICAgICAgIHZhciBoZWFkZXJfb2JqID0ge31cbiAgICAgICAgdmFyIGhlYWRlcnMgPSBoZWFkZXIuc3BsaXQobmV3IFJlZ0V4cChtYXNrKG5ld2xpbmVfY2hhcikpKVxuICAgICAgICB2YXIga2V5ID0gJydcbiAgICAgICAgdmFyIHZhbHVlID0gJydcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhlYWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBrZXkgPSBoZWFkZXJzW2ldLnJlcGxhY2UoL15cXFsoW0EtWl1bQS1aYS16XSopXFxzLipcXF0kLywgJyQxJylcbiAgICAgICAgICB2YWx1ZSA9IGhlYWRlcnNbaV0ucmVwbGFjZSgvXlxcW1tBLVphLXpdK1xcc1wiKC4qKVwiXFwgKlxcXSQvLCAnJDEnKVxuICAgICAgICAgIGlmICh0cmltKGtleSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaGVhZGVyX29ialtrZXldID0gdmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaGVhZGVyX29ialxuICAgICAgfVxuXG4gICAgICB2YXIgbmV3bGluZV9jaGFyID1cbiAgICAgICAgdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBvcHRpb25zLm5ld2xpbmVfY2hhciA9PT0gJ3N0cmluZydcbiAgICAgICAgICA/IG9wdGlvbnMubmV3bGluZV9jaGFyXG4gICAgICAgICAgOiAnXFxyP1xcbidcblxuICAgICAgLy8gUmVnRXhwIHRvIHNwbGl0IGhlYWRlci4gVGFrZXMgYWR2YW50YWdlIG9mIHRoZSBmYWN0IHRoYXQgaGVhZGVyIGFuZCBtb3ZldGV4dFxuICAgICAgLy8gd2lsbCBhbHdheXMgaGF2ZSBhIGJsYW5rIGxpbmUgYmV0d2VlbiB0aGVtIChpZSwgdHdvIG5ld2xpbmVfY2hhcidzKS5cbiAgICAgIC8vIFdpdGggZGVmYXVsdCBuZXdsaW5lX2NoYXIsIHdpbGwgZXF1YWw6IC9eKFxcWygoPzpcXHI/XFxuKXwuKSpcXF0pKD86XFxyP1xcbil7Mn0vXG4gICAgICB2YXIgaGVhZGVyX3JlZ2V4ID0gbmV3IFJlZ0V4cChcbiAgICAgICAgJ14oXFxcXFsoKD86JyArXG4gICAgICAgICAgbWFzayhuZXdsaW5lX2NoYXIpICtcbiAgICAgICAgICAnKXwuKSpcXFxcXSknICtcbiAgICAgICAgICAnKD86JyArXG4gICAgICAgICAgbWFzayhuZXdsaW5lX2NoYXIpICtcbiAgICAgICAgICAnKXsyfSdcbiAgICAgIClcblxuICAgICAgLy8gSWYgbm8gaGVhZGVyIGdpdmVuLCBiZWdpbiB3aXRoIG1vdmVzLlxuICAgICAgdmFyIGhlYWRlcl9zdHJpbmcgPSBoZWFkZXJfcmVnZXgudGVzdChwZ24pXG4gICAgICAgID8gaGVhZGVyX3JlZ2V4LmV4ZWMocGduKVsxXVxuICAgICAgICA6ICcnXG5cbiAgICAgIC8vIFB1dCB0aGUgYm9hcmQgaW4gdGhlIHN0YXJ0aW5nIHBvc2l0aW9uXG4gICAgICByZXNldCgpXG5cbiAgICAgIC8qIHBhcnNlIFBHTiBoZWFkZXIgKi9cbiAgICAgIHZhciBoZWFkZXJzID0gcGFyc2VfcGduX2hlYWRlcihoZWFkZXJfc3RyaW5nLCBvcHRpb25zKVxuICAgICAgZm9yICh2YXIga2V5IGluIGhlYWRlcnMpIHtcbiAgICAgICAgc2V0X2hlYWRlcihba2V5LCBoZWFkZXJzW2tleV1dKVxuICAgICAgfVxuXG4gICAgICAvKiBsb2FkIHRoZSBzdGFydGluZyBwb3NpdGlvbiBpbmRpY2F0ZWQgYnkgW1NldHVwICcxJ10gYW5kXG4gICAgICAgKiBbRkVOIHBvc2l0aW9uXSAqL1xuICAgICAgaWYgKGhlYWRlcnNbJ1NldFVwJ10gPT09ICcxJykge1xuICAgICAgICBpZiAoISgnRkVOJyBpbiBoZWFkZXJzICYmIGxvYWQoaGVhZGVyc1snRkVOJ10sIHRydWUpKSkge1xuICAgICAgICAgIC8vIHNlY29uZCBhcmd1bWVudCB0byBsb2FkOiBkb24ndCBjbGVhciB0aGUgaGVhZGVyc1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qIE5COiB0aGUgcmVnZXhlcyBiZWxvdyB0aGF0IGRlbGV0ZSBtb3ZlIG51bWJlcnMsIHJlY3Vyc2l2ZVxuICAgICAgICogYW5ub3RhdGlvbnMsIGFuZCBudW1lcmljIGFubm90YXRpb24gZ2x5cGhzIG1heSBhbHNvIG1hdGNoXG4gICAgICAgKiB0ZXh0IGluIGNvbW1lbnRzLiBUbyBwcmV2ZW50IHRoaXMsIHdlIHRyYW5zZm9ybSBjb21tZW50c1xuICAgICAgICogYnkgaGV4LWVuY29kaW5nIHRoZW0gaW4gcGxhY2UgYW5kIGRlY29kaW5nIHRoZW0gYWdhaW4gYWZ0ZXJcbiAgICAgICAqIHRoZSBvdGhlciB0b2tlbnMgaGF2ZSBiZWVuIGRlbGV0ZWQuXG4gICAgICAgKlxuICAgICAgICogV2hpbGUgdGhlIHNwZWMgc3RhdGVzIHRoYXQgUEdOIGZpbGVzIHNob3VsZCBiZSBBU0NJSSBlbmNvZGVkLFxuICAgICAgICogd2UgdXNlIHtlbixkZX1jb2RlVVJJQ29tcG9uZW50IGhlcmUgdG8gc3VwcG9ydCBhcmJpdHJhcnkgVVRGOFxuICAgICAgICogYXMgYSBjb252ZW5pZW5jZSBmb3IgbW9kZXJuIHVzZXJzICovXG5cbiAgICAgIHZhciB0b19oZXggPSBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHN0cmluZylcbiAgICAgICAgICAubWFwKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICAvKiBlbmNvZGVVUkkgZG9lc24ndCB0cmFuc2Zvcm0gbW9zdCBBU0NJSSBjaGFyYWN0ZXJzLFxuICAgICAgICAgICAgICogc28gd2UgaGFuZGxlIHRoZXNlIG91cnNlbHZlcyAqL1xuICAgICAgICAgICAgcmV0dXJuIGMuY2hhckNvZGVBdCgwKSA8IDEyOFxuICAgICAgICAgICAgICA/IGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNilcbiAgICAgICAgICAgICAgOiBlbmNvZGVVUklDb21wb25lbnQoYykucmVwbGFjZSgvXFwlL2csICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuam9pbignJylcbiAgICAgIH1cblxuICAgICAgdmFyIGZyb21faGV4ID0gZnVuY3Rpb24gKHN0cmluZykge1xuICAgICAgICByZXR1cm4gc3RyaW5nLmxlbmd0aCA9PSAwXG4gICAgICAgICAgPyAnJ1xuICAgICAgICAgIDogZGVjb2RlVVJJQ29tcG9uZW50KCclJyArIHN0cmluZy5tYXRjaCgvLnsxLDJ9L2cpLmpvaW4oJyUnKSlcbiAgICAgIH1cblxuICAgICAgdmFyIGVuY29kZV9jb21tZW50ID0gZnVuY3Rpb24gKHN0cmluZykge1xuICAgICAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZShuZXcgUmVnRXhwKG1hc2sobmV3bGluZV9jaGFyKSwgJ2cnKSwgJyAnKVxuICAgICAgICByZXR1cm4gYHske3RvX2hleChzdHJpbmcuc2xpY2UoMSwgc3RyaW5nLmxlbmd0aCAtIDEpKX19YFxuICAgICAgfVxuXG4gICAgICB2YXIgZGVjb2RlX2NvbW1lbnQgPSBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICAgIGlmIChzdHJpbmcuc3RhcnRzV2l0aCgneycpICYmIHN0cmluZy5lbmRzV2l0aCgnfScpKSB7XG4gICAgICAgICAgcmV0dXJuIGZyb21faGV4KHN0cmluZy5zbGljZSgxLCBzdHJpbmcubGVuZ3RoIC0gMSkpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyogZGVsZXRlIGhlYWRlciB0byBnZXQgdGhlIG1vdmVzICovXG4gICAgICB2YXIgbXMgPSBwZ25cbiAgICAgICAgLnJlcGxhY2UoaGVhZGVyX3N0cmluZywgJycpXG4gICAgICAgIC5yZXBsYWNlKFxuICAgICAgICAgIC8qIGVuY29kZSBjb21tZW50cyBzbyB0aGV5IGRvbid0IGdldCBkZWxldGVkIGJlbG93ICovXG4gICAgICAgICAgbmV3IFJlZ0V4cChgKFxce1tefV0qXFx9KSs/fDsoW14ke21hc2sobmV3bGluZV9jaGFyKX1dKilgLCAnZycpLFxuICAgICAgICAgIGZ1bmN0aW9uIChtYXRjaCwgYnJhY2tldCwgc2VtaWNvbG9uKSB7XG4gICAgICAgICAgICByZXR1cm4gYnJhY2tldCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgID8gZW5jb2RlX2NvbW1lbnQoYnJhY2tldClcbiAgICAgICAgICAgICAgOiAnICcgKyBlbmNvZGVfY29tbWVudChgeyR7c2VtaWNvbG9uLnNsaWNlKDEpfX1gKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICAucmVwbGFjZShuZXcgUmVnRXhwKG1hc2sobmV3bGluZV9jaGFyKSwgJ2cnKSwgJyAnKVxuXG4gICAgICAvKiBkZWxldGUgcmVjdXJzaXZlIGFubm90YXRpb24gdmFyaWF0aW9ucyAqL1xuICAgICAgdmFyIHJhdl9yZWdleCA9IC8oXFwoW15cXChcXCldK1xcKSkrPy9nXG4gICAgICB3aGlsZSAocmF2X3JlZ2V4LnRlc3QobXMpKSB7XG4gICAgICAgIG1zID0gbXMucmVwbGFjZShyYXZfcmVnZXgsICcnKVxuICAgICAgfVxuXG4gICAgICAvKiBkZWxldGUgbW92ZSBudW1iZXJzICovXG4gICAgICBtcyA9IG1zLnJlcGxhY2UoL1xcZCtcXC4oXFwuXFwuKT8vZywgJycpXG5cbiAgICAgIC8qIGRlbGV0ZSAuLi4gaW5kaWNhdGluZyBibGFjayB0byBtb3ZlICovXG4gICAgICBtcyA9IG1zLnJlcGxhY2UoL1xcLlxcLlxcLi9nLCAnJylcblxuICAgICAgLyogZGVsZXRlIG51bWVyaWMgYW5ub3RhdGlvbiBnbHlwaHMgKi9cbiAgICAgIG1zID0gbXMucmVwbGFjZSgvXFwkXFxkKy9nLCAnJylcblxuICAgICAgLyogdHJpbSBhbmQgZ2V0IGFycmF5IG9mIG1vdmVzICovXG4gICAgICB2YXIgbW92ZXMgPSB0cmltKG1zKS5zcGxpdChuZXcgUmVnRXhwKC9cXHMrLykpXG5cbiAgICAgIC8qIGRlbGV0ZSBlbXB0eSBlbnRyaWVzICovXG4gICAgICBtb3ZlcyA9IG1vdmVzLmpvaW4oJywnKS5yZXBsYWNlKC8sLCsvZywgJywnKS5zcGxpdCgnLCcpXG4gICAgICB2YXIgbW92ZSA9ICcnXG5cbiAgICAgIHZhciByZXN1bHQgPSAnJ1xuXG4gICAgICBmb3IgKHZhciBoYWxmX21vdmUgPSAwOyBoYWxmX21vdmUgPCBtb3Zlcy5sZW5ndGg7IGhhbGZfbW92ZSsrKSB7XG4gICAgICAgIHZhciBjb21tZW50ID0gZGVjb2RlX2NvbW1lbnQobW92ZXNbaGFsZl9tb3ZlXSlcbiAgICAgICAgaWYgKGNvbW1lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvbW1lbnRzW2dlbmVyYXRlX2ZlbigpXSA9IGNvbW1lbnRcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgbW92ZSA9IG1vdmVfZnJvbV9zYW4obW92ZXNbaGFsZl9tb3ZlXSwgc2xvcHB5KVxuXG4gICAgICAgIC8qIGludmFsaWQgbW92ZSAqL1xuICAgICAgICBpZiAobW92ZSA9PSBudWxsKSB7XG4gICAgICAgICAgLyogd2FzIHRoZSBtb3ZlIGFuIGVuZCBvZiBnYW1lIG1hcmtlciAqL1xuICAgICAgICAgIGlmIChURVJNSU5BVElPTl9NQVJLRVJTLmluZGV4T2YobW92ZXNbaGFsZl9tb3ZlXSkgPiAtMSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gbW92ZXNbaGFsZl9tb3ZlXVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLyogcmVzZXQgdGhlIGVuZCBvZiBnYW1lIG1hcmtlciBpZiBtYWtpbmcgYSB2YWxpZCBtb3ZlICovXG4gICAgICAgICAgcmVzdWx0ID0gJydcbiAgICAgICAgICBtYWtlX21vdmUobW92ZSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKiBQZXIgc2VjdGlvbiA4LjIuNiBvZiB0aGUgUEdOIHNwZWMsIHRoZSBSZXN1bHQgdGFnIHBhaXIgbXVzdCBtYXRjaFxuICAgICAgICogbWF0Y2ggdGhlIHRlcm1pbmF0aW9uIG1hcmtlci4gT25seSBkbyB0aGlzIHdoZW4gaGVhZGVycyBhcmUgcHJlc2VudCxcbiAgICAgICAqIGJ1dCB0aGUgcmVzdWx0IHRhZyBpcyBtaXNzaW5nXG4gICAgICAgKi9cbiAgICAgIGlmIChyZXN1bHQgJiYgT2JqZWN0LmtleXMoaGVhZGVyKS5sZW5ndGggJiYgIWhlYWRlclsnUmVzdWx0J10pIHtcbiAgICAgICAgc2V0X2hlYWRlcihbJ1Jlc3VsdCcsIHJlc3VsdF0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcblxuICAgIGhlYWRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHNldF9oZWFkZXIoYXJndW1lbnRzKVxuICAgIH0sXG5cbiAgICB0dXJuOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdHVyblxuICAgIH0sXG5cbiAgICBtb3ZlOiBmdW5jdGlvbiAobW92ZSwgb3B0aW9ucykge1xuICAgICAgLyogVGhlIG1vdmUgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB3aXRoIGluIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczpcbiAgICAgICAqXG4gICAgICAgKiAubW92ZSgnTnhiNycpICAgICAgPC0gd2hlcmUgJ21vdmUnIGlzIGEgY2FzZS1zZW5zaXRpdmUgU0FOIHN0cmluZ1xuICAgICAgICpcbiAgICAgICAqIC5tb3ZlKHsgZnJvbTogJ2g3JywgPC0gd2hlcmUgdGhlICdtb3ZlJyBpcyBhIG1vdmUgb2JqZWN0IChhZGRpdGlvbmFsXG4gICAgICAgKiAgICAgICAgIHRvIDonaDgnLCAgICAgIGZpZWxkcyBhcmUgaWdub3JlZClcbiAgICAgICAqICAgICAgICAgcHJvbW90aW9uOiAncScsXG4gICAgICAgKiAgICAgIH0pXG4gICAgICAgKi9cblxuICAgICAgLy8gYWxsb3cgdGhlIHVzZXIgdG8gc3BlY2lmeSB0aGUgc2xvcHB5IG1vdmUgcGFyc2VyIHRvIHdvcmsgYXJvdW5kIG92ZXJcbiAgICAgIC8vIGRpc2FtYmlndWF0aW9uIGJ1Z3MgaW4gRnJpdHogYW5kIENoZXNzYmFzZVxuICAgICAgdmFyIHNsb3BweSA9XG4gICAgICAgIHR5cGVvZiBvcHRpb25zICE9PSAndW5kZWZpbmVkJyAmJiAnc2xvcHB5JyBpbiBvcHRpb25zXG4gICAgICAgICAgPyBvcHRpb25zLnNsb3BweVxuICAgICAgICAgIDogZmFsc2VcblxuICAgICAgdmFyIG1vdmVfb2JqID0gbnVsbFxuXG4gICAgICBpZiAodHlwZW9mIG1vdmUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIG1vdmVfb2JqID0gbW92ZV9mcm9tX3Nhbihtb3ZlLCBzbG9wcHkpXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb3ZlID09PSAnb2JqZWN0Jykge1xuICAgICAgICB2YXIgbW92ZXMgPSBnZW5lcmF0ZV9tb3ZlcygpXG5cbiAgICAgICAgLyogY29udmVydCB0aGUgcHJldHR5IG1vdmUgb2JqZWN0IHRvIGFuIHVnbHkgbW92ZSBvYmplY3QgKi9cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG1vdmVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgbW92ZS5mcm9tID09PSBhbGdlYnJhaWMobW92ZXNbaV0uZnJvbSkgJiZcbiAgICAgICAgICAgIG1vdmUudG8gPT09IGFsZ2VicmFpYyhtb3Zlc1tpXS50bykgJiZcbiAgICAgICAgICAgICghKCdwcm9tb3Rpb24nIGluIG1vdmVzW2ldKSB8fFxuICAgICAgICAgICAgICBtb3ZlLnByb21vdGlvbiA9PT0gbW92ZXNbaV0ucHJvbW90aW9uKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgbW92ZV9vYmogPSBtb3Zlc1tpXVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyogZmFpbGVkIHRvIGZpbmQgbW92ZSAqL1xuICAgICAgaWYgKCFtb3ZlX29iaikge1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuXG4gICAgICAvKiBuZWVkIHRvIG1ha2UgYSBjb3B5IG9mIG1vdmUgYmVjYXVzZSB3ZSBjYW4ndCBnZW5lcmF0ZSBTQU4gYWZ0ZXIgdGhlXG4gICAgICAgKiBtb3ZlIGlzIG1hZGVcbiAgICAgICAqL1xuICAgICAgdmFyIHByZXR0eV9tb3ZlID0gbWFrZV9wcmV0dHkobW92ZV9vYmopXG5cbiAgICAgIG1ha2VfbW92ZShtb3ZlX29iailcblxuICAgICAgcmV0dXJuIHByZXR0eV9tb3ZlXG4gICAgfSxcblxuICAgIHVuZG86IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBtb3ZlID0gdW5kb19tb3ZlKClcbiAgICAgIHJldHVybiBtb3ZlID8gbWFrZV9wcmV0dHkobW92ZSkgOiBudWxsXG4gICAgfSxcblxuICAgIGNsZWFyOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gY2xlYXIoKVxuICAgIH0sXG5cbiAgICBwdXQ6IGZ1bmN0aW9uIChwaWVjZSwgc3F1YXJlKSB7XG4gICAgICByZXR1cm4gcHV0KHBpZWNlLCBzcXVhcmUpXG4gICAgfSxcblxuICAgIGdldDogZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgcmV0dXJuIGdldChzcXVhcmUpXG4gICAgfSxcblxuICAgIGFzY2lpKCkge1xuICAgICAgdmFyIHMgPSAnICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcXG4nXG4gICAgICBmb3IgKHZhciBpID0gU1FVQVJFX01BUC5hODsgaSA8PSBTUVVBUkVfTUFQLmgxOyBpKyspIHtcbiAgICAgICAgLyogZGlzcGxheSB0aGUgcmFuayAqL1xuICAgICAgICBpZiAoZmlsZShpKSA9PT0gMCkge1xuICAgICAgICAgIHMgKz0gJyAnICsgJzg3NjU0MzIxJ1tyYW5rKGkpXSArICcgfCdcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGVtcHR5IHBpZWNlICovXG4gICAgICAgIGlmIChib2FyZFtpXSA9PSBudWxsKSB7XG4gICAgICAgICAgcyArPSAnIC4gJ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBwaWVjZSA9IGJvYXJkW2ldLnR5cGVcbiAgICAgICAgICB2YXIgY29sb3IgPSBib2FyZFtpXS5jb2xvclxuICAgICAgICAgIHZhciBzeW1ib2wgPVxuICAgICAgICAgICAgY29sb3IgPT09IFdISVRFID8gcGllY2UudG9VcHBlckNhc2UoKSA6IHBpZWNlLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICBzICs9ICcgJyArIHN5bWJvbCArICcgJ1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKChpICsgMSkgJiAweDg4KSB7XG4gICAgICAgICAgcyArPSAnfFxcbidcbiAgICAgICAgICBpICs9IDhcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcyArPSAnICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLStcXG4nXG4gICAgICBzICs9ICcgICAgIGEgIGIgIGMgIGQgIGUgIGYgIGcgIGgnXG5cbiAgICAgIHJldHVybiBzXG4gICAgfSxcblxuICAgIHJlbW92ZTogZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgcmV0dXJuIHJlbW92ZShzcXVhcmUpXG4gICAgfSxcblxuICAgIHBlcmZ0OiBmdW5jdGlvbiAoZGVwdGgpIHtcbiAgICAgIHJldHVybiBwZXJmdChkZXB0aClcbiAgICB9LFxuXG4gICAgc3F1YXJlX2NvbG9yOiBmdW5jdGlvbiAoc3F1YXJlKSB7XG4gICAgICBpZiAoc3F1YXJlIGluIFNRVUFSRV9NQVApIHtcbiAgICAgICAgdmFyIHNxXzB4ODggPSBTUVVBUkVfTUFQW3NxdWFyZV1cbiAgICAgICAgcmV0dXJuIChyYW5rKHNxXzB4ODgpICsgZmlsZShzcV8weDg4KSkgJSAyID09PSAwID8gJ2xpZ2h0JyA6ICdkYXJrJ1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH0sXG5cbiAgICBoaXN0b3J5OiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgdmFyIHJldmVyc2VkX2hpc3RvcnkgPSBbXVxuICAgICAgdmFyIG1vdmVfaGlzdG9yeSA9IFtdXG4gICAgICB2YXIgdmVyYm9zZSA9XG4gICAgICAgIHR5cGVvZiBvcHRpb25zICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAndmVyYm9zZScgaW4gb3B0aW9ucyAmJlxuICAgICAgICBvcHRpb25zLnZlcmJvc2VcblxuICAgICAgd2hpbGUgKGhpc3RvcnkubGVuZ3RoID4gMCkge1xuICAgICAgICByZXZlcnNlZF9oaXN0b3J5LnB1c2godW5kb19tb3ZlKCkpXG4gICAgICB9XG5cbiAgICAgIHdoaWxlIChyZXZlcnNlZF9oaXN0b3J5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIG1vdmUgPSByZXZlcnNlZF9oaXN0b3J5LnBvcCgpXG4gICAgICAgIGlmICh2ZXJib3NlKSB7XG4gICAgICAgICAgbW92ZV9oaXN0b3J5LnB1c2gobWFrZV9wcmV0dHkobW92ZSkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbW92ZV9oaXN0b3J5LnB1c2gobW92ZV90b19zYW4obW92ZSwgZ2VuZXJhdGVfbW92ZXMoeyBsZWdhbDogdHJ1ZSB9KSkpXG4gICAgICAgIH1cbiAgICAgICAgbWFrZV9tb3ZlKG1vdmUpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBtb3ZlX2hpc3RvcnlcbiAgICB9LFxuXG4gICAgZ2V0X2NvbW1lbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBjb21tZW50c1tnZW5lcmF0ZV9mZW4oKV1cbiAgICB9LFxuXG4gICAgc2V0X2NvbW1lbnQ6IGZ1bmN0aW9uIChjb21tZW50KSB7XG4gICAgICBjb21tZW50c1tnZW5lcmF0ZV9mZW4oKV0gPSBjb21tZW50LnJlcGxhY2UoJ3snLCAnWycpLnJlcGxhY2UoJ30nLCAnXScpXG4gICAgfSxcblxuICAgIGRlbGV0ZV9jb21tZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY29tbWVudCA9IGNvbW1lbnRzW2dlbmVyYXRlX2ZlbigpXVxuICAgICAgZGVsZXRlIGNvbW1lbnRzW2dlbmVyYXRlX2ZlbigpXVxuICAgICAgcmV0dXJuIGNvbW1lbnRcbiAgICB9LFxuXG4gICAgZ2V0X2NvbW1lbnRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICBwcnVuZV9jb21tZW50cygpXG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMoY29tbWVudHMpLm1hcChmdW5jdGlvbiAoZmVuKSB7XG4gICAgICAgIHJldHVybiB7IGZlbjogZmVuLCBjb21tZW50OiBjb21tZW50c1tmZW5dIH1cbiAgICAgIH0pXG4gICAgfSxcblxuICAgIGRlbGV0ZV9jb21tZW50czogZnVuY3Rpb24gKCkge1xuICAgICAgcHJ1bmVfY29tbWVudHMoKVxuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGNvbW1lbnRzKS5tYXAoZnVuY3Rpb24gKGZlbikge1xuICAgICAgICB2YXIgY29tbWVudCA9IGNvbW1lbnRzW2Zlbl1cbiAgICAgICAgZGVsZXRlIGNvbW1lbnRzW2Zlbl1cbiAgICAgICAgcmV0dXJuIHsgZmVuOiBmZW4sIGNvbW1lbnQ6IGNvbW1lbnQgfVxuICAgICAgfSlcbiAgICB9LFxuICB9XG59XG4iLCJmdW5jdGlvbiB3ZWJwYWNrRW1wdHlDb250ZXh0KHJlcSkge1xuXHR2YXIgZSA9IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIgKyByZXEgKyBcIidcIik7XG5cdGUuY29kZSA9ICdNT0RVTEVfTk9UX0ZPVU5EJztcblx0dGhyb3cgZTtcbn1cbndlYnBhY2tFbXB0eUNvbnRleHQua2V5cyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gW107IH07XG53ZWJwYWNrRW1wdHlDb250ZXh0LnJlc29sdmUgPSB3ZWJwYWNrRW1wdHlDb250ZXh0O1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrRW1wdHlDb250ZXh0O1xud2VicGFja0VtcHR5Q29udGV4dC5pZCA9IFwiLi9ub2RlX21vZHVsZXMvcGVlcmpzL2Rpc3Qgc3luYyByZWN1cnNpdmVcIjsiLCJwYXJjZWxSZXF1aXJlPWZ1bmN0aW9uKGUscix0LG4pe3ZhciBpLG89XCJmdW5jdGlvblwiPT10eXBlb2YgcGFyY2VsUmVxdWlyZSYmcGFyY2VsUmVxdWlyZSx1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7ZnVuY3Rpb24gZih0LG4pe2lmKCFyW3RdKXtpZighZVt0XSl7dmFyIGk9XCJmdW5jdGlvblwiPT10eXBlb2YgcGFyY2VsUmVxdWlyZSYmcGFyY2VsUmVxdWlyZTtpZighbiYmaSlyZXR1cm4gaSh0LCEwKTtpZihvKXJldHVybiBvKHQsITApO2lmKHUmJlwic3RyaW5nXCI9PXR5cGVvZiB0KXJldHVybiB1KHQpO3ZhciBjPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrdCtcIidcIik7dGhyb3cgYy5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGN9cC5yZXNvbHZlPWZ1bmN0aW9uKHIpe3JldHVybiBlW3RdWzFdW3JdfHxyfSxwLmNhY2hlPXt9O3ZhciBsPXJbdF09bmV3IGYuTW9kdWxlKHQpO2VbdF1bMF0uY2FsbChsLmV4cG9ydHMscCxsLGwuZXhwb3J0cyx0aGlzKX1yZXR1cm4gclt0XS5leHBvcnRzO2Z1bmN0aW9uIHAoZSl7cmV0dXJuIGYocC5yZXNvbHZlKGUpKX19Zi5pc1BhcmNlbFJlcXVpcmU9ITAsZi5Nb2R1bGU9ZnVuY3Rpb24oZSl7dGhpcy5pZD1lLHRoaXMuYnVuZGxlPWYsdGhpcy5leHBvcnRzPXt9fSxmLm1vZHVsZXM9ZSxmLmNhY2hlPXIsZi5wYXJlbnQ9byxmLnJlZ2lzdGVyPWZ1bmN0aW9uKHIsdCl7ZVtyXT1bZnVuY3Rpb24oZSxyKXtyLmV4cG9ydHM9dH0se31dfTtmb3IodmFyIGM9MDtjPHQubGVuZ3RoO2MrKyl0cnl7Zih0W2NdKX1jYXRjaChlKXtpfHwoaT1lKX1pZih0Lmxlbmd0aCl7dmFyIGw9Zih0W3QubGVuZ3RoLTFdKTtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1sOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gbH0pOm4mJih0aGlzW25dPWwpfWlmKHBhcmNlbFJlcXVpcmU9ZixpKXRocm93IGk7cmV0dXJuIGZ9KHtcIkVnQmhcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xudmFyIGU9e307ZS51c2VCbG9iQnVpbGRlcj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IEJsb2IoW10pLCExfWNhdGNoKGUpe3JldHVybiEwfX0oKSxlLnVzZUFycmF5QnVmZmVyVmlldz0hZS51c2VCbG9iQnVpbGRlciYmZnVuY3Rpb24oKXt0cnl7cmV0dXJuIDA9PT1uZXcgQmxvYihbbmV3IFVpbnQ4QXJyYXkoW10pXSkuc2l6ZX1jYXRjaChlKXtyZXR1cm4hMH19KCksbW9kdWxlLmV4cG9ydHMuYmluYXJ5RmVhdHVyZXM9ZTt2YXIgcj1tb2R1bGUuZXhwb3J0cy5CbG9iQnVpbGRlcjtmdW5jdGlvbiB0KCl7dGhpcy5fcGllY2VzPVtdLHRoaXMuX3BhcnRzPVtdfVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJihyPW1vZHVsZS5leHBvcnRzLkJsb2JCdWlsZGVyPXdpbmRvdy5XZWJLaXRCbG9iQnVpbGRlcnx8d2luZG93Lk1vekJsb2JCdWlsZGVyfHx3aW5kb3cuTVNCbG9iQnVpbGRlcnx8d2luZG93LkJsb2JCdWlsZGVyKSx0LnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24oZSl7XCJudW1iZXJcIj09dHlwZW9mIGU/dGhpcy5fcGllY2VzLnB1c2goZSk6KHRoaXMuZmx1c2goKSx0aGlzLl9wYXJ0cy5wdXNoKGUpKX0sdC5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXtpZih0aGlzLl9waWVjZXMubGVuZ3RoPjApe3ZhciByPW5ldyBVaW50OEFycmF5KHRoaXMuX3BpZWNlcyk7ZS51c2VBcnJheUJ1ZmZlclZpZXd8fChyPXIuYnVmZmVyKSx0aGlzLl9wYXJ0cy5wdXNoKHIpLHRoaXMuX3BpZWNlcz1bXX19LHQucHJvdG90eXBlLmdldEJ1ZmZlcj1mdW5jdGlvbigpe2lmKHRoaXMuZmx1c2goKSxlLnVzZUJsb2JCdWlsZGVyKXtmb3IodmFyIHQ9bmV3IHIsaT0wLHU9dGhpcy5fcGFydHMubGVuZ3RoO2k8dTtpKyspdC5hcHBlbmQodGhpcy5fcGFydHNbaV0pO3JldHVybiB0LmdldEJsb2IoKX1yZXR1cm4gbmV3IEJsb2IodGhpcy5fcGFydHMpfSxtb2R1bGUuZXhwb3J0cy5CdWZmZXJCdWlsZGVyPXQ7XG59LHt9XSxcImtkUHBcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xudmFyIHQ9cmVxdWlyZShcIi4vYnVmZmVyYnVpbGRlclwiKS5CdWZmZXJCdWlsZGVyLGU9cmVxdWlyZShcIi4vYnVmZmVyYnVpbGRlclwiKS5iaW5hcnlGZWF0dXJlcyxpPXt1bnBhY2s6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyByKHQpLnVucGFjaygpfSxwYWNrOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBuO3JldHVybiBlLnBhY2sodCksZS5nZXRCdWZmZXIoKX19O2Z1bmN0aW9uIHIodCl7dGhpcy5pbmRleD0wLHRoaXMuZGF0YUJ1ZmZlcj10LHRoaXMuZGF0YVZpZXc9bmV3IFVpbnQ4QXJyYXkodGhpcy5kYXRhQnVmZmVyKSx0aGlzLmxlbmd0aD10aGlzLmRhdGFCdWZmZXIuYnl0ZUxlbmd0aH1mdW5jdGlvbiBuKCl7dGhpcy5idWZmZXJCdWlsZGVyPW5ldyB0fWZ1bmN0aW9uIHUodCl7dmFyIGU9dC5jaGFyQ29kZUF0KDApO3JldHVybiBlPD0yMDQ3P1wiMDBcIjplPD02NTUzNT9cIjAwMFwiOmU8PTIwOTcxNTE/XCIwMDAwXCI6ZTw9NjcxMDg4NjM/XCIwMDAwMFwiOlwiMDAwMDAwXCJ9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gdC5sZW5ndGg+NjAwP25ldyBCbG9iKFt0XSkuc2l6ZTp0LnJlcGxhY2UoL1teXFx1MDAwMC1cXHUwMDdGXS9nLHUpLmxlbmd0aH1tb2R1bGUuZXhwb3J0cz1pLHIucHJvdG90eXBlLnVucGFjaz1mdW5jdGlvbigpe3ZhciB0LGU9dGhpcy51bnBhY2tfdWludDgoKTtpZihlPDEyOClyZXR1cm4gZTtpZigoMjI0XmUpPDMyKXJldHVybigyMjReZSktMzI7aWYoKHQ9MTYwXmUpPD0xNSlyZXR1cm4gdGhpcy51bnBhY2tfcmF3KHQpO2lmKCh0PTE3Nl5lKTw9MTUpcmV0dXJuIHRoaXMudW5wYWNrX3N0cmluZyh0KTtpZigodD0xNDReZSk8PTE1KXJldHVybiB0aGlzLnVucGFja19hcnJheSh0KTtpZigodD0xMjheZSk8PTE1KXJldHVybiB0aGlzLnVucGFja19tYXAodCk7c3dpdGNoKGUpe2Nhc2UgMTkyOnJldHVybiBudWxsO2Nhc2UgMTkzOnJldHVybjtjYXNlIDE5NDpyZXR1cm4hMTtjYXNlIDE5NTpyZXR1cm4hMDtjYXNlIDIwMjpyZXR1cm4gdGhpcy51bnBhY2tfZmxvYXQoKTtjYXNlIDIwMzpyZXR1cm4gdGhpcy51bnBhY2tfZG91YmxlKCk7Y2FzZSAyMDQ6cmV0dXJuIHRoaXMudW5wYWNrX3VpbnQ4KCk7Y2FzZSAyMDU6cmV0dXJuIHRoaXMudW5wYWNrX3VpbnQxNigpO2Nhc2UgMjA2OnJldHVybiB0aGlzLnVucGFja191aW50MzIoKTtjYXNlIDIwNzpyZXR1cm4gdGhpcy51bnBhY2tfdWludDY0KCk7Y2FzZSAyMDg6cmV0dXJuIHRoaXMudW5wYWNrX2ludDgoKTtjYXNlIDIwOTpyZXR1cm4gdGhpcy51bnBhY2tfaW50MTYoKTtjYXNlIDIxMDpyZXR1cm4gdGhpcy51bnBhY2tfaW50MzIoKTtjYXNlIDIxMTpyZXR1cm4gdGhpcy51bnBhY2tfaW50NjQoKTtjYXNlIDIxMjpjYXNlIDIxMzpjYXNlIDIxNDpjYXNlIDIxNTpyZXR1cm47Y2FzZSAyMTY6cmV0dXJuIHQ9dGhpcy51bnBhY2tfdWludDE2KCksdGhpcy51bnBhY2tfc3RyaW5nKHQpO2Nhc2UgMjE3OnJldHVybiB0PXRoaXMudW5wYWNrX3VpbnQzMigpLHRoaXMudW5wYWNrX3N0cmluZyh0KTtjYXNlIDIxODpyZXR1cm4gdD10aGlzLnVucGFja191aW50MTYoKSx0aGlzLnVucGFja19yYXcodCk7Y2FzZSAyMTk6cmV0dXJuIHQ9dGhpcy51bnBhY2tfdWludDMyKCksdGhpcy51bnBhY2tfcmF3KHQpO2Nhc2UgMjIwOnJldHVybiB0PXRoaXMudW5wYWNrX3VpbnQxNigpLHRoaXMudW5wYWNrX2FycmF5KHQpO2Nhc2UgMjIxOnJldHVybiB0PXRoaXMudW5wYWNrX3VpbnQzMigpLHRoaXMudW5wYWNrX2FycmF5KHQpO2Nhc2UgMjIyOnJldHVybiB0PXRoaXMudW5wYWNrX3VpbnQxNigpLHRoaXMudW5wYWNrX21hcCh0KTtjYXNlIDIyMzpyZXR1cm4gdD10aGlzLnVucGFja191aW50MzIoKSx0aGlzLnVucGFja19tYXAodCl9fSxyLnByb3RvdHlwZS51bnBhY2tfdWludDg9ZnVuY3Rpb24oKXt2YXIgdD0yNTUmdGhpcy5kYXRhVmlld1t0aGlzLmluZGV4XTtyZXR1cm4gdGhpcy5pbmRleCsrLHR9LHIucHJvdG90eXBlLnVucGFja191aW50MTY9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnJlYWQoMiksZT0yNTYqKDI1NSZ0WzBdKSsoMjU1JnRbMV0pO3JldHVybiB0aGlzLmluZGV4Kz0yLGV9LHIucHJvdG90eXBlLnVucGFja191aW50MzI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnJlYWQoNCksZT0yNTYqKDI1NiooMjU2KnRbMF0rdFsxXSkrdFsyXSkrdFszXTtyZXR1cm4gdGhpcy5pbmRleCs9NCxlfSxyLnByb3RvdHlwZS51bnBhY2tfdWludDY0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yZWFkKDgpLGU9MjU2KigyNTYqKDI1NiooMjU2KigyNTYqKDI1NiooMjU2KnRbMF0rdFsxXSkrdFsyXSkrdFszXSkrdFs0XSkrdFs1XSkrdFs2XSkrdFs3XTtyZXR1cm4gdGhpcy5pbmRleCs9OCxlfSxyLnByb3RvdHlwZS51bnBhY2tfaW50OD1mdW5jdGlvbigpe3ZhciB0PXRoaXMudW5wYWNrX3VpbnQ4KCk7cmV0dXJuIHQ8MTI4P3Q6dC0yNTZ9LHIucHJvdG90eXBlLnVucGFja19pbnQxNj1mdW5jdGlvbigpe3ZhciB0PXRoaXMudW5wYWNrX3VpbnQxNigpO3JldHVybiB0PDMyNzY4P3Q6dC02NTUzNn0sci5wcm90b3R5cGUudW5wYWNrX2ludDMyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy51bnBhY2tfdWludDMyKCk7cmV0dXJuIHQ8TWF0aC5wb3coMiwzMSk/dDp0LU1hdGgucG93KDIsMzIpfSxyLnByb3RvdHlwZS51bnBhY2tfaW50NjQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnVucGFja191aW50NjQoKTtyZXR1cm4gdDxNYXRoLnBvdygyLDYzKT90OnQtTWF0aC5wb3coMiw2NCl9LHIucHJvdG90eXBlLnVucGFja19yYXc9ZnVuY3Rpb24odCl7aWYodGhpcy5sZW5ndGg8dGhpcy5pbmRleCt0KXRocm93IG5ldyBFcnJvcihcIkJpbmFyeVBhY2tGYWlsdXJlOiBpbmRleCBpcyBvdXQgb2YgcmFuZ2UgXCIrdGhpcy5pbmRleCtcIiBcIit0K1wiIFwiK3RoaXMubGVuZ3RoKTt2YXIgZT10aGlzLmRhdGFCdWZmZXIuc2xpY2UodGhpcy5pbmRleCx0aGlzLmluZGV4K3QpO3JldHVybiB0aGlzLmluZGV4Kz10LGV9LHIucHJvdG90eXBlLnVucGFja19zdHJpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLGkscj10aGlzLnJlYWQodCksbj0wLHU9XCJcIjtuPHQ7KShlPXJbbl0pPDEyOD8odSs9U3RyaW5nLmZyb21DaGFyQ29kZShlKSxuKyspOigxOTJeZSk8MzI/KGk9KDE5Ml5lKTw8Nnw2MyZyW24rMV0sdSs9U3RyaW5nLmZyb21DaGFyQ29kZShpKSxuKz0yKTooaT0oMTUmZSk8PDEyfCg2MyZyW24rMV0pPDw2fDYzJnJbbisyXSx1Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKGkpLG4rPTMpO3JldHVybiB0aGlzLmluZGV4Kz10LHV9LHIucHJvdG90eXBlLnVucGFja19hcnJheT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEFycmF5KHQpLGk9MDtpPHQ7aSsrKWVbaV09dGhpcy51bnBhY2soKTtyZXR1cm4gZX0sci5wcm90b3R5cGUudW5wYWNrX21hcD1mdW5jdGlvbih0KXtmb3IodmFyIGU9e30saT0wO2k8dDtpKyspe3ZhciByPXRoaXMudW5wYWNrKCksbj10aGlzLnVucGFjaygpO2Vbcl09bn1yZXR1cm4gZX0sci5wcm90b3R5cGUudW5wYWNrX2Zsb2F0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy51bnBhY2tfdWludDMyKCksZT0odD4+MjMmMjU1KS0xMjc7cmV0dXJuKDA9PT10Pj4zMT8xOi0xKSooODM4ODYwNyZ0fDgzODg2MDgpKk1hdGgucG93KDIsZS0yMyl9LHIucHJvdG90eXBlLnVucGFja19kb3VibGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnVucGFja191aW50MzIoKSxlPXRoaXMudW5wYWNrX3VpbnQzMigpLGk9KHQ+PjIwJjIwNDcpLTEwMjM7cmV0dXJuKDA9PT10Pj4zMT8xOi0xKSooKDEwNDg1NzUmdHwxMDQ4NTc2KSpNYXRoLnBvdygyLGktMjApK2UqTWF0aC5wb3coMixpLTUyKSl9LHIucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5pbmRleDtpZihlK3Q8PXRoaXMubGVuZ3RoKXJldHVybiB0aGlzLmRhdGFWaWV3LnN1YmFycmF5KGUsZSt0KTt0aHJvdyBuZXcgRXJyb3IoXCJCaW5hcnlQYWNrRmFpbHVyZTogcmVhZCBpbmRleCBvdXQgb2YgcmFuZ2VcIil9LG4ucHJvdG90eXBlLmdldEJ1ZmZlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1ZmZlckJ1aWxkZXIuZ2V0QnVmZmVyKCl9LG4ucHJvdG90eXBlLnBhY2s9ZnVuY3Rpb24odCl7dmFyIGk9dHlwZW9mIHQ7aWYoXCJzdHJpbmdcIj09PWkpdGhpcy5wYWNrX3N0cmluZyh0KTtlbHNlIGlmKFwibnVtYmVyXCI9PT1pKU1hdGguZmxvb3IodCk9PT10P3RoaXMucGFja19pbnRlZ2VyKHQpOnRoaXMucGFja19kb3VibGUodCk7ZWxzZSBpZihcImJvb2xlYW5cIj09PWkpITA9PT10P3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMTk1KTohMT09PXQmJnRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMTk0KTtlbHNlIGlmKFwidW5kZWZpbmVkXCI9PT1pKXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMTkyKTtlbHNle2lmKFwib2JqZWN0XCIhPT1pKXRocm93IG5ldyBFcnJvcignVHlwZSBcIicraSsnXCIgbm90IHlldCBzdXBwb3J0ZWQnKTtpZihudWxsPT09dCl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDE5Mik7ZWxzZXt2YXIgcj10LmNvbnN0cnVjdG9yO2lmKHI9PUFycmF5KXRoaXMucGFja19hcnJheSh0KTtlbHNlIGlmKHI9PUJsb2J8fHI9PUZpbGV8fHQgaW5zdGFuY2VvZiBCbG9ifHx0IGluc3RhbmNlb2YgRmlsZSl0aGlzLnBhY2tfYmluKHQpO2Vsc2UgaWYocj09QXJyYXlCdWZmZXIpZS51c2VBcnJheUJ1ZmZlclZpZXc/dGhpcy5wYWNrX2JpbihuZXcgVWludDhBcnJheSh0KSk6dGhpcy5wYWNrX2Jpbih0KTtlbHNlIGlmKFwiQllURVNfUEVSX0VMRU1FTlRcImluIHQpZS51c2VBcnJheUJ1ZmZlclZpZXc/dGhpcy5wYWNrX2JpbihuZXcgVWludDhBcnJheSh0LmJ1ZmZlcikpOnRoaXMucGFja19iaW4odC5idWZmZXIpO2Vsc2UgaWYocj09T2JqZWN0fHxyLnRvU3RyaW5nKCkuc3RhcnRzV2l0aChcImNsYXNzXCIpKXRoaXMucGFja19vYmplY3QodCk7ZWxzZSBpZihyPT1EYXRlKXRoaXMucGFja19zdHJpbmcodC50b1N0cmluZygpKTtlbHNle2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQudG9CaW5hcnlQYWNrKXRocm93IG5ldyBFcnJvcignVHlwZSBcIicrci50b1N0cmluZygpKydcIiBub3QgeWV0IHN1cHBvcnRlZCcpO3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQodC50b0JpbmFyeVBhY2soKSl9fX10aGlzLmJ1ZmZlckJ1aWxkZXIuZmx1c2goKX0sbi5wcm90b3R5cGUucGFja19iaW49ZnVuY3Rpb24odCl7dmFyIGU9dC5sZW5ndGh8fHQuYnl0ZUxlbmd0aHx8dC5zaXplO2lmKGU8PTE1KXRoaXMucGFja191aW50OCgxNjArZSk7ZWxzZSBpZihlPD02NTUzNSl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIxOCksdGhpcy5wYWNrX3VpbnQxNihlKTtlbHNle2lmKCEoZTw9NDI5NDk2NzI5NSkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBsZW5ndGhcIik7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMTkpLHRoaXMucGFja191aW50MzIoZSl9dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCh0KX0sbi5wcm90b3R5cGUucGFja19zdHJpbmc9ZnVuY3Rpb24odCl7dmFyIGU9YSh0KTtpZihlPD0xNSl0aGlzLnBhY2tfdWludDgoMTc2K2UpO2Vsc2UgaWYoZTw9NjU1MzUpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMTYpLHRoaXMucGFja191aW50MTYoZSk7ZWxzZXtpZighKGU8PTQyOTQ5NjcyOTUpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgbGVuZ3RoXCIpO3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjE3KSx0aGlzLnBhY2tfdWludDMyKGUpfXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQodCl9LG4ucHJvdG90eXBlLnBhY2tfYXJyYXk9ZnVuY3Rpb24odCl7dmFyIGU9dC5sZW5ndGg7aWYoZTw9MTUpdGhpcy5wYWNrX3VpbnQ4KDE0NCtlKTtlbHNlIGlmKGU8PTY1NTM1KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjIwKSx0aGlzLnBhY2tfdWludDE2KGUpO2Vsc2V7aWYoIShlPD00Mjk0OTY3Mjk1KSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGxlbmd0aFwiKTt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIyMSksdGhpcy5wYWNrX3VpbnQzMihlKX1mb3IodmFyIGk9MDtpPGU7aSsrKXRoaXMucGFjayh0W2ldKX0sbi5wcm90b3R5cGUucGFja19pbnRlZ2VyPWZ1bmN0aW9uKHQpe2lmKHQ+PS0zMiYmdDw9MTI3KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JnQpO2Vsc2UgaWYodD49MCYmdDw9MjU1KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjA0KSx0aGlzLnBhY2tfdWludDgodCk7ZWxzZSBpZih0Pj0tMTI4JiZ0PD0xMjcpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMDgpLHRoaXMucGFja19pbnQ4KHQpO2Vsc2UgaWYodD49MCYmdDw9NjU1MzUpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMDUpLHRoaXMucGFja191aW50MTYodCk7ZWxzZSBpZih0Pj0tMzI3NjgmJnQ8PTMyNzY3KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjA5KSx0aGlzLnBhY2tfaW50MTYodCk7ZWxzZSBpZih0Pj0wJiZ0PD00Mjk0OTY3Mjk1KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjA2KSx0aGlzLnBhY2tfdWludDMyKHQpO2Vsc2UgaWYodD49LTIxNDc0ODM2NDgmJnQ8PTIxNDc0ODM2NDcpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMTApLHRoaXMucGFja19pbnQzMih0KTtlbHNlIGlmKHQ+PS0weDgwMDAwMDAwMDAwMDAwMDAmJnQ8PTB4ODAwMDAwMDAwMDAwMDAwMCl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIxMSksdGhpcy5wYWNrX2ludDY0KHQpO2Vsc2V7aWYoISh0Pj0wJiZ0PD0weDEwMDAwMDAwMDAwMDAwMDAwKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGludGVnZXJcIik7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMDcpLHRoaXMucGFja191aW50NjQodCl9fSxuLnByb3RvdHlwZS5wYWNrX2RvdWJsZT1mdW5jdGlvbih0KXt2YXIgZT0wO3Q8MCYmKGU9MSx0PS10KTt2YXIgaT1NYXRoLmZsb29yKE1hdGgubG9nKHQpL01hdGguTE4yKSxyPXQvTWF0aC5wb3coMixpKS0xLG49TWF0aC5mbG9vcihyKk1hdGgucG93KDIsNTIpKSx1PU1hdGgucG93KDIsMzIpLGE9ZTw8MzF8aSsxMDIzPDwyMHxuL3UmMTA0ODU3NSxwPW4ldTt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIwMyksdGhpcy5wYWNrX2ludDMyKGEpLHRoaXMucGFja19pbnQzMihwKX0sbi5wcm90b3R5cGUucGFja19vYmplY3Q9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmtleXModCkubGVuZ3RoO2lmKGU8PTE1KXRoaXMucGFja191aW50OCgxMjgrZSk7ZWxzZSBpZihlPD02NTUzNSl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIyMiksdGhpcy5wYWNrX3VpbnQxNihlKTtlbHNle2lmKCEoZTw9NDI5NDk2NzI5NSkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBsZW5ndGhcIik7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMjMpLHRoaXMucGFja191aW50MzIoZSl9Zm9yKHZhciBpIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShpKSYmKHRoaXMucGFjayhpKSx0aGlzLnBhY2sodFtpXSkpfSxuLnByb3RvdHlwZS5wYWNrX3VpbnQ4PWZ1bmN0aW9uKHQpe3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQodCl9LG4ucHJvdG90eXBlLnBhY2tfdWludDE2PWZ1bmN0aW9uKHQpe3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQodD4+OCksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyNTUmdCl9LG4ucHJvdG90eXBlLnBhY2tfdWludDMyPWZ1bmN0aW9uKHQpe3ZhciBlPTQyOTQ5NjcyOTUmdDt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg0Mjc4MTkwMDgwJmUpPj4+MjQpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDE2NzExNjgwJmUpPj4+MTYpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDY1MjgwJmUpPj4+OCksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyNTUmZSl9LG4ucHJvdG90eXBlLnBhY2tfdWludDY0PWZ1bmN0aW9uKHQpe3ZhciBlPXQvTWF0aC5wb3coMiwzMiksaT10JU1hdGgucG93KDIsMzIpO3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDQyNzgxOTAwODAmZSk+Pj4yNCksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoMTY3MTE2ODAmZSk+Pj4xNiksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNjUyODAmZSk+Pj44KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDI1NSZlKSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg0Mjc4MTkwMDgwJmkpPj4+MjQpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDE2NzExNjgwJmkpPj4+MTYpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDY1MjgwJmkpPj4+OCksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyNTUmaSl9LG4ucHJvdG90eXBlLnBhY2tfaW50OD1mdW5jdGlvbih0KXt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDI1NSZ0KX0sbi5wcm90b3R5cGUucGFja19pbnQxNj1mdW5jdGlvbih0KXt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg2NTI4MCZ0KT4+OCksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyNTUmdCl9LG4ucHJvdG90eXBlLnBhY2tfaW50MzI9ZnVuY3Rpb24odCl7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCh0Pj4+MjQmMjU1KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCgxNjcxMTY4MCZ0KT4+PjE2KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg2NTI4MCZ0KT4+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JnQpfSxuLnByb3RvdHlwZS5wYWNrX2ludDY0PWZ1bmN0aW9uKHQpe3ZhciBlPU1hdGguZmxvb3IodC9NYXRoLnBvdygyLDMyKSksaT10JU1hdGgucG93KDIsMzIpO3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDQyNzgxOTAwODAmZSk+Pj4yNCksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoMTY3MTE2ODAmZSk+Pj4xNiksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNjUyODAmZSk+Pj44KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDI1NSZlKSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg0Mjc4MTkwMDgwJmkpPj4+MjQpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDE2NzExNjgwJmkpPj4+MTYpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDY1MjgwJmkpPj4+OCksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyNTUmaSl9O1xufSx7XCIuL2J1ZmZlcmJ1aWxkZXJcIjpcIkVnQmhcIn1dLFwiaVN4Q1wiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUsdCxuKXtyZXR1cm4gdCBpbiBlP09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse3ZhbHVlOm4sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTplW3RdPW4sZX1mdW5jdGlvbiB0KGUpe3JldHVybih0PVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmV4dHJhY3RWZXJzaW9uPW8sZXhwb3J0cy53cmFwUGVlckNvbm5lY3Rpb25FdmVudD1pLGV4cG9ydHMuZGlzYWJsZUxvZz1zLGV4cG9ydHMuZGlzYWJsZVdhcm5pbmdzPWEsZXhwb3J0cy5sb2c9cCxleHBvcnRzLmRlcHJlY2F0ZWQ9dSxleHBvcnRzLmRldGVjdEJyb3dzZXI9YyxleHBvcnRzLmNvbXBhY3RPYmplY3Q9ZixleHBvcnRzLndhbGtTdGF0cz1sLGV4cG9ydHMuZmlsdGVyU3RhdHM9djt2YXIgbj0hMCxyPSEwO2Z1bmN0aW9uIG8oZSx0LG4pe3ZhciByPWUubWF0Y2godCk7cmV0dXJuIHImJnIubGVuZ3RoPj1uJiZwYXJzZUludChyW25dLDEwKX1mdW5jdGlvbiBpKGUsdCxuKXtpZihlLlJUQ1BlZXJDb25uZWN0aW9uKXt2YXIgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxvPXIuYWRkRXZlbnRMaXN0ZW5lcjtyLmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oZSxyKXtpZihlIT09dClyZXR1cm4gby5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGk9ZnVuY3Rpb24oZSl7dmFyIHQ9bihlKTt0JiYoci5oYW5kbGVFdmVudD9yLmhhbmRsZUV2ZW50KHQpOnIodCkpfTtyZXR1cm4gdGhpcy5fZXZlbnRNYXA9dGhpcy5fZXZlbnRNYXB8fHt9LHRoaXMuX2V2ZW50TWFwW3RdfHwodGhpcy5fZXZlbnRNYXBbdF09bmV3IE1hcCksdGhpcy5fZXZlbnRNYXBbdF0uc2V0KHIsaSksby5hcHBseSh0aGlzLFtlLGldKX07dmFyIGk9ci5yZW1vdmVFdmVudExpc3RlbmVyO3IucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihlLG4pe2lmKGUhPT10fHwhdGhpcy5fZXZlbnRNYXB8fCF0aGlzLl9ldmVudE1hcFt0XSlyZXR1cm4gaS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoIXRoaXMuX2V2ZW50TWFwW3RdLmhhcyhuKSlyZXR1cm4gaS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHI9dGhpcy5fZXZlbnRNYXBbdF0uZ2V0KG4pO3JldHVybiB0aGlzLl9ldmVudE1hcFt0XS5kZWxldGUobiksMD09PXRoaXMuX2V2ZW50TWFwW3RdLnNpemUmJmRlbGV0ZSB0aGlzLl9ldmVudE1hcFt0XSwwPT09T2JqZWN0LmtleXModGhpcy5fZXZlbnRNYXApLmxlbmd0aCYmZGVsZXRlIHRoaXMuX2V2ZW50TWFwLGkuYXBwbHkodGhpcyxbZSxyXSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwib25cIit0LHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tcIl9vblwiK3RdfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpc1tcIl9vblwiK3RdJiYodGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHQsdGhpc1tcIl9vblwiK3RdKSxkZWxldGUgdGhpc1tcIl9vblwiK3RdKSxlJiZ0aGlzLmFkZEV2ZW50TGlzdGVuZXIodCx0aGlzW1wiX29uXCIrdF09ZSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSl9fWZ1bmN0aW9uIHMoZSl7cmV0dXJuXCJib29sZWFuXCIhPXR5cGVvZiBlP25ldyBFcnJvcihcIkFyZ3VtZW50IHR5cGU6IFwiK3QoZSkrXCIuIFBsZWFzZSB1c2UgYSBib29sZWFuLlwiKToobj1lLGU/XCJhZGFwdGVyLmpzIGxvZ2dpbmcgZGlzYWJsZWRcIjpcImFkYXB0ZXIuanMgbG9nZ2luZyBlbmFibGVkXCIpfWZ1bmN0aW9uIGEoZSl7cmV0dXJuXCJib29sZWFuXCIhPXR5cGVvZiBlP25ldyBFcnJvcihcIkFyZ3VtZW50IHR5cGU6IFwiK3QoZSkrXCIuIFBsZWFzZSB1c2UgYSBib29sZWFuLlwiKToocj0hZSxcImFkYXB0ZXIuanMgZGVwcmVjYXRpb24gd2FybmluZ3MgXCIrKGU/XCJkaXNhYmxlZFwiOlwiZW5hYmxlZFwiKSl9ZnVuY3Rpb24gcCgpe2lmKFwib2JqZWN0XCI9PT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvdz9cInVuZGVmaW5lZFwiOnQod2luZG93KSkpe2lmKG4pcmV0dXJuO1widW5kZWZpbmVkXCIhPXR5cGVvZiBjb25zb2xlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBjb25zb2xlLmxvZyYmY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpfX1mdW5jdGlvbiB1KGUsdCl7ciYmY29uc29sZS53YXJuKGUrXCIgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBcIit0K1wiIGluc3RlYWQuXCIpfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9e2Jyb3dzZXI6bnVsbCx2ZXJzaW9uOm51bGx9O2lmKHZvaWQgMD09PWV8fCFlLm5hdmlnYXRvcilyZXR1cm4gdC5icm93c2VyPVwiTm90IGEgYnJvd3Nlci5cIix0O3ZhcntuYXZpZ2F0b3I6bn09ZTtpZihuLm1vekdldFVzZXJNZWRpYSl0LmJyb3dzZXI9XCJmaXJlZm94XCIsdC52ZXJzaW9uPW8obi51c2VyQWdlbnQsL0ZpcmVmb3hcXC8oXFxkKylcXC4vLDEpO2Vsc2UgaWYobi53ZWJraXRHZXRVc2VyTWVkaWF8fCExPT09ZS5pc1NlY3VyZUNvbnRleHQmJmUud2Via2l0UlRDUGVlckNvbm5lY3Rpb24mJiFlLlJUQ0ljZUdhdGhlcmVyKXQuYnJvd3Nlcj1cImNocm9tZVwiLHQudmVyc2lvbj1vKG4udXNlckFnZW50LC9DaHJvbShlfGl1bSlcXC8oXFxkKylcXC4vLDIpO2Vsc2UgaWYobi5tZWRpYURldmljZXMmJm4udXNlckFnZW50Lm1hdGNoKC9FZGdlXFwvKFxcZCspLihcXGQrKSQvKSl0LmJyb3dzZXI9XCJlZGdlXCIsdC52ZXJzaW9uPW8obi51c2VyQWdlbnQsL0VkZ2VcXC8oXFxkKykuKFxcZCspJC8sMik7ZWxzZXtpZighZS5SVENQZWVyQ29ubmVjdGlvbnx8IW4udXNlckFnZW50Lm1hdGNoKC9BcHBsZVdlYktpdFxcLyhcXGQrKVxcLi8pKXJldHVybiB0LmJyb3dzZXI9XCJOb3QgYSBzdXBwb3J0ZWQgYnJvd3Nlci5cIix0O3QuYnJvd3Nlcj1cInNhZmFyaVwiLHQudmVyc2lvbj1vKG4udXNlckFnZW50LC9BcHBsZVdlYktpdFxcLyhcXGQrKVxcLi8sMSksdC5zdXBwb3J0c1VuaWZpZWRQbGFuPWUuUlRDUnRwVHJhbnNjZWl2ZXImJlwiY3VycmVudERpcmVjdGlvblwiaW4gZS5SVENSdHBUcmFuc2NlaXZlci5wcm90b3R5cGV9cmV0dXJuIHR9ZnVuY3Rpb24gZChlKXtyZXR1cm5cIltvYmplY3QgT2JqZWN0XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfWZ1bmN0aW9uIGYodCl7cmV0dXJuIGQodCk/T2JqZWN0LmtleXModCkucmVkdWNlKGZ1bmN0aW9uKG4scil7dmFyIG89ZCh0W3JdKSxpPW8/Zih0W3JdKTp0W3JdLHM9byYmIU9iamVjdC5rZXlzKGkpLmxlbmd0aDtyZXR1cm4gdm9pZCAwPT09aXx8cz9uOk9iamVjdC5hc3NpZ24obixlKHt9LHIsaSkpfSx7fSk6dH1mdW5jdGlvbiBsKGUsdCxuKXt0JiYhbi5oYXModC5pZCkmJihuLnNldCh0LmlkLHQpLE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24ocil7ci5lbmRzV2l0aChcIklkXCIpP2woZSxlLmdldCh0W3JdKSxuKTpyLmVuZHNXaXRoKFwiSWRzXCIpJiZ0W3JdLmZvckVhY2goZnVuY3Rpb24odCl7bChlLGUuZ2V0KHQpLG4pfSl9KSl9ZnVuY3Rpb24gdihlLHQsbil7dmFyIHI9bj9cIm91dGJvdW5kLXJ0cFwiOlwiaW5ib3VuZC1ydHBcIixvPW5ldyBNYXA7aWYobnVsbD09PXQpcmV0dXJuIG87dmFyIGk9W107cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXtcInRyYWNrXCI9PT1lLnR5cGUmJmUudHJhY2tJZGVudGlmaWVyPT09dC5pZCYmaS5wdXNoKGUpfSksaS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuZm9yRWFjaChmdW5jdGlvbihuKXtuLnR5cGU9PT1yJiZuLnRyYWNrSWQ9PT10LmlkJiZsKGUsbixvKX0pfSksb31cbn0se31dLFwiczZTTlwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1HZXRVc2VyTWVkaWE9aTt2YXIgZT10KHJlcXVpcmUoXCIuLi91dGlscy5qc1wiKSk7ZnVuY3Rpb24gcigpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuIG51bGw7dmFyIGU9bmV3IFdlYWtNYXA7cmV0dXJuIHI9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX1mdW5jdGlvbiB0KGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTtpZihudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpcmV0dXJue2RlZmF1bHQ6ZX07dmFyIHQ9cigpO2lmKHQmJnQuaGFzKGUpKXJldHVybiB0LmdldChlKTt2YXIgbz17fSxuPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtmb3IodmFyIGkgaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSl7dmFyIGE9bj9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsaSk6bnVsbDthJiYoYS5nZXR8fGEuc2V0KT9PYmplY3QuZGVmaW5lUHJvcGVydHkobyxpLGEpOm9baV09ZVtpXX1yZXR1cm4gby5kZWZhdWx0PWUsdCYmdC5zZXQoZSxvKSxvfWZ1bmN0aW9uIG8oZSl7cmV0dXJuKG89XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfXZhciBuPWUubG9nO2Z1bmN0aW9uIGkoZSxyKXt2YXIgdD1lJiZlLm5hdmlnYXRvcjtpZih0Lm1lZGlhRGV2aWNlcyl7dmFyIGk9ZnVuY3Rpb24oZSl7aWYoXCJvYmplY3RcIiE9PW8oZSl8fGUubWFuZGF0b3J5fHxlLm9wdGlvbmFsKXJldHVybiBlO3ZhciByPXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKFwicmVxdWlyZVwiIT09dCYmXCJhZHZhbmNlZFwiIT09dCYmXCJtZWRpYVNvdXJjZVwiIT09dCl7dmFyIG49XCJvYmplY3RcIj09PW8oZVt0XSk/ZVt0XTp7aWRlYWw6ZVt0XX07dm9pZCAwIT09bi5leGFjdCYmXCJudW1iZXJcIj09dHlwZW9mIG4uZXhhY3QmJihuLm1pbj1uLm1heD1uLmV4YWN0KTt2YXIgaT1mdW5jdGlvbihlLHIpe3JldHVybiBlP2Urci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStyLnNsaWNlKDEpOlwiZGV2aWNlSWRcIj09PXI/XCJzb3VyY2VJZFwiOnJ9O2lmKHZvaWQgMCE9PW4uaWRlYWwpe3Iub3B0aW9uYWw9ci5vcHRpb25hbHx8W107dmFyIGE9e307XCJudW1iZXJcIj09dHlwZW9mIG4uaWRlYWw/KGFbaShcIm1pblwiLHQpXT1uLmlkZWFsLHIub3B0aW9uYWwucHVzaChhKSwoYT17fSlbaShcIm1heFwiLHQpXT1uLmlkZWFsLHIub3B0aW9uYWwucHVzaChhKSk6KGFbaShcIlwiLHQpXT1uLmlkZWFsLHIub3B0aW9uYWwucHVzaChhKSl9dm9pZCAwIT09bi5leGFjdCYmXCJudW1iZXJcIiE9dHlwZW9mIG4uZXhhY3Q/KHIubWFuZGF0b3J5PXIubWFuZGF0b3J5fHx7fSxyLm1hbmRhdG9yeVtpKFwiXCIsdCldPW4uZXhhY3QpOltcIm1pblwiLFwibWF4XCJdLmZvckVhY2goZnVuY3Rpb24oZSl7dm9pZCAwIT09bltlXSYmKHIubWFuZGF0b3J5PXIubWFuZGF0b3J5fHx7fSxyLm1hbmRhdG9yeVtpKGUsdCldPW5bZV0pfSl9fSksZS5hZHZhbmNlZCYmKHIub3B0aW9uYWw9KHIub3B0aW9uYWx8fFtdKS5jb25jYXQoZS5hZHZhbmNlZCkpLHJ9LGE9ZnVuY3Rpb24oZSxhKXtpZihyLnZlcnNpb24+PTYxKXJldHVybiBhKGUpO2lmKChlPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpKSYmXCJvYmplY3RcIj09PW8oZS5hdWRpbykpe3ZhciBjPWZ1bmN0aW9uKGUscix0KXtyIGluIGUmJiEodCBpbiBlKSYmKGVbdF09ZVtyXSxkZWxldGUgZVtyXSl9O2MoKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSkpLmF1ZGlvLFwiYXV0b0dhaW5Db250cm9sXCIsXCJnb29nQXV0b0dhaW5Db250cm9sXCIpLGMoZS5hdWRpbyxcIm5vaXNlU3VwcHJlc3Npb25cIixcImdvb2dOb2lzZVN1cHByZXNzaW9uXCIpLGUuYXVkaW89aShlLmF1ZGlvKX1pZihlJiZcIm9iamVjdFwiPT09byhlLnZpZGVvKSl7dmFyIGQ9ZS52aWRlby5mYWNpbmdNb2RlO2Q9ZCYmKFwib2JqZWN0XCI9PT1vKGQpP2Q6e2lkZWFsOmR9KTt2YXIgdSxzPXIudmVyc2lvbjw2NjtpZihkJiYoXCJ1c2VyXCI9PT1kLmV4YWN0fHxcImVudmlyb25tZW50XCI9PT1kLmV4YWN0fHxcInVzZXJcIj09PWQuaWRlYWx8fFwiZW52aXJvbm1lbnRcIj09PWQuaWRlYWwpJiYoIXQubWVkaWFEZXZpY2VzLmdldFN1cHBvcnRlZENvbnN0cmFpbnRzfHwhdC5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMoKS5mYWNpbmdNb2RlfHxzKSlpZihkZWxldGUgZS52aWRlby5mYWNpbmdNb2RlLFwiZW52aXJvbm1lbnRcIj09PWQuZXhhY3R8fFwiZW52aXJvbm1lbnRcIj09PWQuaWRlYWw/dT1bXCJiYWNrXCIsXCJyZWFyXCJdOlwidXNlclwiIT09ZC5leGFjdCYmXCJ1c2VyXCIhPT1kLmlkZWFsfHwodT1bXCJmcm9udFwiXSksdSlyZXR1cm4gdC5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLnRoZW4oZnVuY3Rpb24ocil7dmFyIHQ9KHI9ci5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJ2aWRlb2lucHV0XCI9PT1lLmtpbmR9KSkuZmluZChmdW5jdGlvbihlKXtyZXR1cm4gdS5zb21lKGZ1bmN0aW9uKHIpe3JldHVybiBlLmxhYmVsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocil9KX0pO3JldHVybiF0JiZyLmxlbmd0aCYmdS5pbmNsdWRlcyhcImJhY2tcIikmJih0PXJbci5sZW5ndGgtMV0pLHQmJihlLnZpZGVvLmRldmljZUlkPWQuZXhhY3Q/e2V4YWN0OnQuZGV2aWNlSWR9OntpZGVhbDp0LmRldmljZUlkfSksZS52aWRlbz1pKGUudmlkZW8pLG4oXCJjaHJvbWU6IFwiK0pTT04uc3RyaW5naWZ5KGUpKSxhKGUpfSk7ZS52aWRlbz1pKGUudmlkZW8pfXJldHVybiBuKFwiY2hyb21lOiBcIitKU09OLnN0cmluZ2lmeShlKSksYShlKX0sYz1mdW5jdGlvbihlKXtyZXR1cm4gci52ZXJzaW9uPj02ND9lOntuYW1lOntQZXJtaXNzaW9uRGVuaWVkRXJyb3I6XCJOb3RBbGxvd2VkRXJyb3JcIixQZXJtaXNzaW9uRGlzbWlzc2VkRXJyb3I6XCJOb3RBbGxvd2VkRXJyb3JcIixJbnZhbGlkU3RhdGVFcnJvcjpcIk5vdEFsbG93ZWRFcnJvclwiLERldmljZXNOb3RGb3VuZEVycm9yOlwiTm90Rm91bmRFcnJvclwiLENvbnN0cmFpbnROb3RTYXRpc2ZpZWRFcnJvcjpcIk92ZXJjb25zdHJhaW5lZEVycm9yXCIsVHJhY2tTdGFydEVycm9yOlwiTm90UmVhZGFibGVFcnJvclwiLE1lZGlhRGV2aWNlRmFpbGVkRHVlVG9TaHV0ZG93bjpcIk5vdEFsbG93ZWRFcnJvclwiLE1lZGlhRGV2aWNlS2lsbFN3aXRjaE9uOlwiTm90QWxsb3dlZEVycm9yXCIsVGFiQ2FwdHVyZUVycm9yOlwiQWJvcnRFcnJvclwiLFNjcmVlbkNhcHR1cmVFcnJvcjpcIkFib3J0RXJyb3JcIixEZXZpY2VDYXB0dXJlRXJyb3I6XCJBYm9ydEVycm9yXCJ9W2UubmFtZV18fGUubmFtZSxtZXNzYWdlOmUubWVzc2FnZSxjb25zdHJhaW50OmUuY29uc3RyYWludHx8ZS5jb25zdHJhaW50TmFtZSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWUrKHRoaXMubWVzc2FnZSYmXCI6IFwiKSt0aGlzLm1lc3NhZ2V9fX07aWYodC5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSxyLG8pe2EoZSxmdW5jdGlvbihlKXt0LndlYmtpdEdldFVzZXJNZWRpYShlLHIsZnVuY3Rpb24oZSl7byYmbyhjKGUpKX0pfSl9LmJpbmQodCksdC5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKXt2YXIgZD10Lm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuYmluZCh0Lm1lZGlhRGV2aWNlcyk7dC5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKGUpe3JldHVybiBhKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGQoZSkudGhlbihmdW5jdGlvbihyKXtpZihlLmF1ZGlvJiYhci5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aHx8ZS52aWRlbyYmIXIuZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGgpdGhyb3cgci5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uuc3RvcCgpfSksbmV3IERPTUV4Y2VwdGlvbihcIlwiLFwiTm90Rm91bmRFcnJvclwiKTtyZXR1cm4gcn0sZnVuY3Rpb24oZSl7cmV0dXJuIFByb21pc2UucmVqZWN0KGMoZSkpfSl9KX19fX1cbn0se1wiLi4vdXRpbHMuanNcIjpcImlTeENcIn1dLFwiVkhhOFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUsaSl7ZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiZcImdldERpc3BsYXlNZWRpYVwiaW4gZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzfHxlLm5hdmlnYXRvci5tZWRpYURldmljZXMmJihcImZ1bmN0aW9uXCI9PXR5cGVvZiBpP2UubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWE9ZnVuY3Rpb24oYSl7cmV0dXJuIGkoYSkudGhlbihmdW5jdGlvbihpKXt2YXIgdD1hLnZpZGVvJiZhLnZpZGVvLndpZHRoLG89YS52aWRlbyYmYS52aWRlby5oZWlnaHQsZD1hLnZpZGVvJiZhLnZpZGVvLmZyYW1lUmF0ZTtyZXR1cm4gYS52aWRlbz17bWFuZGF0b3J5OntjaHJvbWVNZWRpYVNvdXJjZTpcImRlc2t0b3BcIixjaHJvbWVNZWRpYVNvdXJjZUlkOmksbWF4RnJhbWVSYXRlOmR8fDN9fSx0JiYoYS52aWRlby5tYW5kYXRvcnkubWF4V2lkdGg9dCksbyYmKGEudmlkZW8ubWFuZGF0b3J5Lm1heEhlaWdodD1vKSxlLm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGEpfSl9OmNvbnNvbGUuZXJyb3IoXCJzaGltR2V0RGlzcGxheU1lZGlhOiBnZXRTb3VyY2VJZCBhcmd1bWVudCBpcyBub3QgYSBmdW5jdGlvblwiKSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltR2V0RGlzcGxheU1lZGlhPWU7XG59LHt9XSxcInVJNVhcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltTWVkaWFTdHJlYW09YSxleHBvcnRzLnNoaW1PblRyYWNrPWMsZXhwb3J0cy5zaGltR2V0U2VuZGVyc1dpdGhEdG1mPXAsZXhwb3J0cy5zaGltR2V0U3RhdHM9ZCxleHBvcnRzLnNoaW1TZW5kZXJSZWNlaXZlckdldFN0YXRzPWgsZXhwb3J0cy5zaGltQWRkVHJhY2tSZW1vdmVUcmFja1dpdGhOYXRpdmU9ZixleHBvcnRzLnNoaW1BZGRUcmFja1JlbW92ZVRyYWNrPW0sZXhwb3J0cy5zaGltUGVlckNvbm5lY3Rpb249dSxleHBvcnRzLmZpeE5lZ290aWF0aW9uTmVlZGVkPWwsT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJzaGltR2V0VXNlck1lZGlhXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuc2hpbUdldFVzZXJNZWRpYX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcInNoaW1HZXREaXNwbGF5TWVkaWFcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gci5zaGltR2V0RGlzcGxheU1lZGlhfX0pO3ZhciBlPWkocmVxdWlyZShcIi4uL3V0aWxzLmpzXCIpKSx0PXJlcXVpcmUoXCIuL2dldHVzZXJtZWRpYVwiKSxyPXJlcXVpcmUoXCIuL2dldGRpc3BsYXltZWRpYVwiKTtmdW5jdGlvbiBuKCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgV2Vha01hcClyZXR1cm4gbnVsbDt2YXIgZT1uZXcgV2Vha01hcDtyZXR1cm4gbj1mdW5jdGlvbigpe3JldHVybiBlfSxlfWZ1bmN0aW9uIGkoZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO2lmKG51bGw9PT1lfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZSlyZXR1cm57ZGVmYXVsdDplfTt2YXIgdD1uKCk7aWYodCYmdC5oYXMoZSkpcmV0dXJuIHQuZ2V0KGUpO3ZhciByPXt9LGk9T2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2Zvcih2YXIgbyBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG8pKXt2YXIgcz1pP09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxvKTpudWxsO3MmJihzLmdldHx8cy5zZXQpP09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLG8scyk6cltvXT1lW29dfXJldHVybiByLmRlZmF1bHQ9ZSx0JiZ0LnNldChlLHIpLHJ9ZnVuY3Rpb24gbyhlLHQscil7cmV0dXJuIHQgaW4gZT9PYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTpyLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6ZVt0XT1yLGV9ZnVuY3Rpb24gcyhlKXtyZXR1cm4ocz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gYShlKXtlLk1lZGlhU3RyZWFtPWUuTWVkaWFTdHJlYW18fGUud2Via2l0TWVkaWFTdHJlYW19ZnVuY3Rpb24gYyh0KXtpZihcIm9iamVjdFwiIT09cyh0KXx8IXQuUlRDUGVlckNvbm5lY3Rpb258fFwib250cmFja1wiaW4gdC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpZS53cmFwUGVlckNvbm5lY3Rpb25FdmVudCh0LFwidHJhY2tcIixmdW5jdGlvbihlKXtyZXR1cm4gZS50cmFuc2NlaXZlcnx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJ0cmFuc2NlaXZlclwiLHt2YWx1ZTp7cmVjZWl2ZXI6ZS5yZWNlaXZlcn19KSxlfSk7ZWxzZXtPYmplY3QuZGVmaW5lUHJvcGVydHkodC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsXCJvbnRyYWNrXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbnRyYWNrfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fb250cmFjayYmdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhY2tcIix0aGlzLl9vbnRyYWNrKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFja1wiLHRoaXMuX29udHJhY2s9ZSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSk7dmFyIHI9dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb249ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLl9vbnRyYWNrcG9seXx8KHRoaXMuX29udHJhY2twb2x5PWZ1bmN0aW9uKHIpe3Iuc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoXCJhZGR0cmFja1wiLGZ1bmN0aW9uKG4pe3ZhciBpO2k9dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzP2UuZ2V0UmVjZWl2ZXJzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm4gZS50cmFjayYmZS50cmFjay5pZD09PW4udHJhY2suaWR9KTp7dHJhY2s6bi50cmFja307dmFyIG89bmV3IEV2ZW50KFwidHJhY2tcIik7by50cmFjaz1uLnRyYWNrLG8ucmVjZWl2ZXI9aSxvLnRyYW5zY2VpdmVyPXtyZWNlaXZlcjppfSxvLnN0cmVhbXM9W3Iuc3RyZWFtXSxlLmRpc3BhdGNoRXZlbnQobyl9KSxyLnN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3ZhciBpO2k9dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzP2UuZ2V0UmVjZWl2ZXJzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm4gZS50cmFjayYmZS50cmFjay5pZD09PW4uaWR9KTp7dHJhY2s6bn07dmFyIG89bmV3IEV2ZW50KFwidHJhY2tcIik7by50cmFjaz1uLG8ucmVjZWl2ZXI9aSxvLnRyYW5zY2VpdmVyPXtyZWNlaXZlcjppfSxvLnN0cmVhbXM9W3Iuc3RyZWFtXSxlLmRpc3BhdGNoRXZlbnQobyl9KX0sdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiYWRkc3RyZWFtXCIsdGhpcy5fb250cmFja3BvbHkpKSxyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fWZ1bmN0aW9uIHAoZSl7aWYoXCJvYmplY3RcIj09PXMoZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24mJiEoXCJnZXRTZW5kZXJzXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkmJlwiY3JlYXRlRFRNRlNlbmRlclwiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpe3ZhciB0PWZ1bmN0aW9uKGUsdCl7cmV0dXJue3RyYWNrOnQsZ2V0IGR0bWYoKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5fZHRtZiYmKFwiYXVkaW9cIj09PXQua2luZD90aGlzLl9kdG1mPWUuY3JlYXRlRFRNRlNlbmRlcih0KTp0aGlzLl9kdG1mPW51bGwpLHRoaXMuX2R0bWZ9LF9wYzplfX07aWYoIWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMpe2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VuZGVycz10aGlzLl9zZW5kZXJzfHxbXSx0aGlzLl9zZW5kZXJzLnNsaWNlKCl9O3ZhciByPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrPWZ1bmN0aW9uKGUsbil7dmFyIGk9ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGl8fChpPXQodGhpcyxlKSx0aGlzLl9zZW5kZXJzLnB1c2goaSkpLGl9O3ZhciBuPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrPWZ1bmN0aW9uKGUpe24uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PXRoaXMuX3NlbmRlcnMuaW5kZXhPZihlKTstMSE9PXQmJnRoaXMuX3NlbmRlcnMuc3BsaWNlKHQsMSl9fXZhciBpPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbTtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW09ZnVuY3Rpb24oZSl7dmFyIHI9dGhpczt0aGlzLl9zZW5kZXJzPXRoaXMuX3NlbmRlcnN8fFtdLGkuYXBwbHkodGhpcyxbZV0pLGUuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXtyLl9zZW5kZXJzLnB1c2godChyLGUpKX0pfTt2YXIgbz1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW07ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fc2VuZGVycz10aGlzLl9zZW5kZXJzfHxbXSxvLmFwcGx5KHRoaXMsW2VdKSxlLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHI9dC5fc2VuZGVycy5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyYWNrPT09ZX0pO3ImJnQuX3NlbmRlcnMuc3BsaWNlKHQuX3NlbmRlcnMuaW5kZXhPZihyKSwxKX0pfX1lbHNlIGlmKFwib2JqZWN0XCI9PT1zKGUpJiZlLlJUQ1BlZXJDb25uZWN0aW9uJiZcImdldFNlbmRlcnNcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlJiZcImNyZWF0ZURUTUZTZW5kZXJcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlJiZlLlJUQ1J0cFNlbmRlciYmIShcImR0bWZcImluIGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkpe3ZhciBhPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1hLmFwcGx5KHRoaXMsW10pO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuX3BjPWV9KSx0fSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5SVENSdHBTZW5kZXIucHJvdG90eXBlLFwiZHRtZlwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5fZHRtZiYmKFwiYXVkaW9cIj09PXRoaXMudHJhY2sua2luZD90aGlzLl9kdG1mPXRoaXMuX3BjLmNyZWF0ZURUTUZTZW5kZXIodGhpcy50cmFjayk6dGhpcy5fZHRtZj1udWxsKSx0aGlzLl9kdG1mfX0pfX1mdW5jdGlvbiBkKGUpe2lmKGUuUlRDUGVlckNvbm5lY3Rpb24pe3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxbcixuLGldPWFyZ3VtZW50cztpZihhcmd1bWVudHMubGVuZ3RoPjAmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHIpcmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKDA9PT10Lmxlbmd0aCYmKDA9PT1hcmd1bWVudHMubGVuZ3RofHxcImZ1bmN0aW9uXCIhPXR5cGVvZiByKSlyZXR1cm4gdC5hcHBseSh0aGlzLFtdKTt2YXIgbz1mdW5jdGlvbihlKXt2YXIgdD17fTtyZXR1cm4gZS5yZXN1bHQoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciByPXtpZDplLmlkLHRpbWVzdGFtcDplLnRpbWVzdGFtcCx0eXBlOntsb2NhbGNhbmRpZGF0ZTpcImxvY2FsLWNhbmRpZGF0ZVwiLHJlbW90ZWNhbmRpZGF0ZTpcInJlbW90ZS1jYW5kaWRhdGVcIn1bZS50eXBlXXx8ZS50eXBlfTtlLm5hbWVzKCkuZm9yRWFjaChmdW5jdGlvbih0KXtyW3RdPWUuc3RhdCh0KX0pLHRbci5pZF09cn0pLHR9LHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBNYXAoT2JqZWN0LmtleXMoZSkubWFwKGZ1bmN0aW9uKHQpe3JldHVyblt0LGVbdF1dfSkpfTtpZihhcmd1bWVudHMubGVuZ3RoPj0yKXtyZXR1cm4gdC5hcHBseSh0aGlzLFtmdW5jdGlvbihlKXtuKHMobyhlKSkpfSxyXSl9cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHIsbil7dC5hcHBseShlLFtmdW5jdGlvbihlKXtyKHMobyhlKSkpfSxuXSl9KS50aGVuKG4saSl9fX1mdW5jdGlvbiBoKHQpe2lmKFwib2JqZWN0XCI9PT1zKHQpJiZ0LlJUQ1BlZXJDb25uZWN0aW9uJiZ0LlJUQ1J0cFNlbmRlciYmdC5SVENSdHBSZWNlaXZlcil7aWYoIShcImdldFN0YXRzXCJpbiB0LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpKXt2YXIgcj10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzO3ImJih0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXIuYXBwbHkodGhpcyxbXSk7cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdC5fcGM9ZX0pLHR9KTt2YXIgbj10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztuJiYodC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oKXt2YXIgZT1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gZS5fcGM9dGhpcyxlfSksdC5SVENSdHBTZW5kZXIucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5fcGMuZ2V0U3RhdHMoKS50aGVuKGZ1bmN0aW9uKHIpe3JldHVybiBlLmZpbHRlclN0YXRzKHIsdC50cmFjaywhMCl9KX19aWYoIShcImdldFN0YXRzXCJpbiB0LlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZSkpe3ZhciBpPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycztpJiYodC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWkuYXBwbHkodGhpcyxbXSk7cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdC5fcGM9ZX0pLHR9KSxlLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHQsXCJ0cmFja1wiLGZ1bmN0aW9uKGUpe3JldHVybiBlLnJlY2VpdmVyLl9wYz1lLnNyY0VsZW1lbnQsZX0pLHQuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5fcGMuZ2V0U3RhdHMoKS50aGVuKGZ1bmN0aW9uKHIpe3JldHVybiBlLmZpbHRlclN0YXRzKHIsdC50cmFjaywhMSl9KX19aWYoXCJnZXRTdGF0c1wiaW4gdC5SVENSdHBTZW5kZXIucHJvdG90eXBlJiZcImdldFN0YXRzXCJpbiB0LlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZSl7dmFyIG89dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHMubGVuZ3RoPjAmJmFyZ3VtZW50c1swXWluc3RhbmNlb2YgdC5NZWRpYVN0cmVhbVRyYWNrKXt2YXIgZSxyLG4saT1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuZ2V0U2VuZGVycygpLmZvckVhY2goZnVuY3Rpb24odCl7dC50cmFjaz09PWkmJihlP249ITA6ZT10KX0pLHRoaXMuZ2V0UmVjZWl2ZXJzKCkuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gZS50cmFjaz09PWkmJihyP249ITA6cj1lKSxlLnRyYWNrPT09aX0pLG58fGUmJnI/UHJvbWlzZS5yZWplY3QobmV3IERPTUV4Y2VwdGlvbihcIlRoZXJlIGFyZSBtb3JlIHRoYW4gb25lIHNlbmRlciBvciByZWNlaXZlciBmb3IgdGhlIHRyYWNrLlwiLFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIpKTplP2UuZ2V0U3RhdHMoKTpyP3IuZ2V0U3RhdHMoKTpQcm9taXNlLnJlamVjdChuZXcgRE9NRXhjZXB0aW9uKFwiVGhlcmUgaXMgbm8gc2VuZGVyIG9yIHJlY2VpdmVyIGZvciB0aGUgdHJhY2suXCIsXCJJbnZhbGlkQWNjZXNzRXJyb3JcIikpfXJldHVybiBvLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fX1mdW5jdGlvbiBmKGUpe2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXM9dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc3x8e30sT2JqZWN0LmtleXModGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcykubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9zaGltbWVkTG9jYWxTdHJlYW1zW3RdWzBdfSl9O3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrPWZ1bmN0aW9uKGUscil7aWYoIXIpcmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXM9dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc3x8e307dmFyIG49dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbci5pZF0/LTE9PT10aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3IuaWRdLmluZGV4T2YobikmJnRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbci5pZF0ucHVzaChuKTp0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3IuaWRdPVtyLG5dLG59O3ZhciByPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbTtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW09ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zPXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXN8fHt9LGUuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXtpZih0LmdldFNlbmRlcnMoKS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyYWNrPT09ZX0pKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJUcmFjayBhbHJlYWR5IGV4aXN0cy5cIixcIkludmFsaWRBY2Nlc3NFcnJvclwiKX0pO3ZhciBuPXRoaXMuZ2V0U2VuZGVycygpO3IuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBpPXRoaXMuZ2V0U2VuZGVycygpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4tMT09PW4uaW5kZXhPZihlKX0pO3RoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbZS5pZF09W2VdLmNvbmNhdChpKX07dmFyIG49ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcz10aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zfHx7fSxkZWxldGUgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tlLmlkXSxuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07dmFyIGk9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2s7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2s9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcz10aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zfHx7fSxlJiZPYmplY3Qua2V5cyh0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPXQuX3NoaW1tZWRMb2NhbFN0cmVhbXNbcl0uaW5kZXhPZihlKTstMSE9PW4mJnQuX3NoaW1tZWRMb2NhbFN0cmVhbXNbcl0uc3BsaWNlKG4sMSksMT09PXQuX3NoaW1tZWRMb2NhbFN0cmVhbXNbcl0ubGVuZ3RoJiZkZWxldGUgdC5fc2hpbW1lZExvY2FsU3RyZWFtc1tyXX0pLGkuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1mdW5jdGlvbiBtKGUsdCl7aWYoZS5SVENQZWVyQ29ubmVjdGlvbil7aWYoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2smJnQudmVyc2lvbj49NjUpcmV0dXJuIGYoZSk7dmFyIHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1yLmFwcGx5KHRoaXMpO3JldHVybiB0aGlzLl9yZXZlcnNlU3RyZWFtcz10aGlzLl9yZXZlcnNlU3RyZWFtc3x8e30sdC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGUuX3JldmVyc2VTdHJlYW1zW3QuaWRdfSl9O3ZhciBuPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbTtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW09ZnVuY3Rpb24odCl7dmFyIHI9dGhpcztpZih0aGlzLl9zdHJlYW1zPXRoaXMuX3N0cmVhbXN8fHt9LHRoaXMuX3JldmVyc2VTdHJlYW1zPXRoaXMuX3JldmVyc2VTdHJlYW1zfHx7fSx0LmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoci5nZXRTZW5kZXJzKCkuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmFjaz09PWV9KSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiVHJhY2sgYWxyZWFkeSBleGlzdHMuXCIsXCJJbnZhbGlkQWNjZXNzRXJyb3JcIil9KSwhdGhpcy5fcmV2ZXJzZVN0cmVhbXNbdC5pZF0pe3ZhciBpPW5ldyBlLk1lZGlhU3RyZWFtKHQuZ2V0VHJhY2tzKCkpO3RoaXMuX3N0cmVhbXNbdC5pZF09aSx0aGlzLl9yZXZlcnNlU3RyZWFtc1tpLmlkXT10LHQ9aX1uLmFwcGx5KHRoaXMsW3RdKX07dmFyIGk9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbT1mdW5jdGlvbihlKXt0aGlzLl9zdHJlYW1zPXRoaXMuX3N0cmVhbXN8fHt9LHRoaXMuX3JldmVyc2VTdHJlYW1zPXRoaXMuX3JldmVyc2VTdHJlYW1zfHx7fSxpLmFwcGx5KHRoaXMsW3RoaXMuX3N0cmVhbXNbZS5pZF18fGVdKSxkZWxldGUgdGhpcy5fcmV2ZXJzZVN0cmVhbXNbdGhpcy5fc3RyZWFtc1tlLmlkXT90aGlzLl9zdHJlYW1zW2UuaWRdLmlkOmUuaWRdLGRlbGV0ZSB0aGlzLl9zdHJlYW1zW2UuaWRdfSxlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaz1mdW5jdGlvbih0LHIpe3ZhciBuPXRoaXM7aWYoXCJjbG9zZWRcIj09PXRoaXMuc2lnbmFsaW5nU3RhdGUpdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIlRoZSBSVENQZWVyQ29ubmVjdGlvbidzIHNpZ25hbGluZ1N0YXRlIGlzICdjbG9zZWQnLlwiLFwiSW52YWxpZFN0YXRlRXJyb3JcIik7dmFyIGk9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7aWYoMSE9PWkubGVuZ3RofHwhaVswXS5nZXRUcmFja3MoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiBlPT09dH0pKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJUaGUgYWRhcHRlci5qcyBhZGRUcmFjayBwb2x5ZmlsbCBvbmx5IHN1cHBvcnRzIGEgc2luZ2xlICBzdHJlYW0gd2hpY2ggaXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdHJhY2suXCIsXCJOb3RTdXBwb3J0ZWRFcnJvclwiKTtpZih0aGlzLmdldFNlbmRlcnMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyYWNrPT09dH0pKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJUcmFjayBhbHJlYWR5IGV4aXN0cy5cIixcIkludmFsaWRBY2Nlc3NFcnJvclwiKTt0aGlzLl9zdHJlYW1zPXRoaXMuX3N0cmVhbXN8fHt9LHRoaXMuX3JldmVyc2VTdHJlYW1zPXRoaXMuX3JldmVyc2VTdHJlYW1zfHx7fTt2YXIgbz10aGlzLl9zdHJlYW1zW3IuaWRdO2lmKG8pby5hZGRUcmFjayh0KSxQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCl7bi5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcIm5lZ290aWF0aW9ubmVlZGVkXCIpKX0pO2Vsc2V7dmFyIHM9bmV3IGUuTWVkaWFTdHJlYW0oW3RdKTt0aGlzLl9zdHJlYW1zW3IuaWRdPXMsdGhpcy5fcmV2ZXJzZVN0cmVhbXNbcy5pZF09cix0aGlzLmFkZFN0cmVhbShzKX1yZXR1cm4gdGhpcy5nZXRTZW5kZXJzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm4gZS50cmFjaz09PXR9KX0sW1wiY3JlYXRlT2ZmZXJcIixcImNyZWF0ZUFuc3dlclwiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciByPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW3RdLG49byh7fSx0LGZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWFyZ3VtZW50cztyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYXJndW1lbnRzWzBdP3IuYXBwbHkodGhpcyxbZnVuY3Rpb24ocil7dmFyIG49YyhlLHIpO3RbMF0uYXBwbHkobnVsbCxbbl0pfSxmdW5jdGlvbihlKXt0WzFdJiZ0WzFdLmFwcGx5KG51bGwsZSl9LGFyZ3VtZW50c1syXV0pOnIuYXBwbHkodGhpcyxhcmd1bWVudHMpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGMoZSx0KX0pfSk7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbdF09blt0XX0pO3ZhciBzPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb247ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbj1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoJiZhcmd1bWVudHNbMF0udHlwZT8oYXJndW1lbnRzWzBdPShlPXRoaXMsdD1hcmd1bWVudHNbMF0scj10LnNkcCxPYmplY3Qua2V5cyhlLl9yZXZlcnNlU3RyZWFtc3x8W10pLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIG49ZS5fcmV2ZXJzZVN0cmVhbXNbdF0saT1lLl9zdHJlYW1zW24uaWRdO3I9ci5yZXBsYWNlKG5ldyBSZWdFeHAobi5pZCxcImdcIiksaS5pZCl9KSxuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOnQudHlwZSxzZHA6cn0pKSxzLmFwcGx5KHRoaXMsYXJndW1lbnRzKSk6cy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGUsdCxyfTt2YXIgYT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLFwibG9jYWxEZXNjcmlwdGlvblwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsXCJsb2NhbERlc2NyaXB0aW9uXCIse2dldDpmdW5jdGlvbigpe3ZhciBlPWEuZ2V0LmFwcGx5KHRoaXMpO3JldHVyblwiXCI9PT1lLnR5cGU/ZTpjKHRoaXMsZSl9fSksZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2s9ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzO2lmKFwiY2xvc2VkXCI9PT10aGlzLnNpZ25hbGluZ1N0YXRlKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJUaGUgUlRDUGVlckNvbm5lY3Rpb24ncyBzaWduYWxpbmdTdGF0ZSBpcyAnY2xvc2VkJy5cIixcIkludmFsaWRTdGF0ZUVycm9yXCIpO2lmKCFlLl9wYyl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiQXJndW1lbnQgMSBvZiBSVENQZWVyQ29ubmVjdGlvbi5yZW1vdmVUcmFjayBkb2VzIG5vdCBpbXBsZW1lbnQgaW50ZXJmYWNlIFJUQ1J0cFNlbmRlci5cIixcIlR5cGVFcnJvclwiKTtpZighKGUuX3BjPT09dGhpcykpdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIlNlbmRlciB3YXMgbm90IGNyZWF0ZWQgYnkgdGhpcyBjb25uZWN0aW9uLlwiLFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIpO3RoaXMuX3N0cmVhbXM9dGhpcy5fc3RyZWFtc3x8e30sT2JqZWN0LmtleXModGhpcy5fc3RyZWFtcykuZm9yRWFjaChmdW5jdGlvbihuKXtyLl9zdHJlYW1zW25dLmdldFRyYWNrcygpLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIGUudHJhY2s9PT10fSkmJih0PXIuX3N0cmVhbXNbbl0pfSksdCYmKDE9PT10LmdldFRyYWNrcygpLmxlbmd0aD90aGlzLnJlbW92ZVN0cmVhbSh0aGlzLl9yZXZlcnNlU3RyZWFtc1t0LmlkXSk6dC5yZW1vdmVUcmFjayhlLnRyYWNrKSx0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwibmVnb3RpYXRpb25uZWVkZWRcIikpKX19ZnVuY3Rpb24gYyhlLHQpe3ZhciByPXQuc2RwO3JldHVybiBPYmplY3Qua2V5cyhlLl9yZXZlcnNlU3RyZWFtc3x8W10pLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIG49ZS5fcmV2ZXJzZVN0cmVhbXNbdF0saT1lLl9zdHJlYW1zW24uaWRdO3I9ci5yZXBsYWNlKG5ldyBSZWdFeHAoaS5pZCxcImdcIiksbi5pZCl9KSxuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOnQudHlwZSxzZHA6cn0pfX1mdW5jdGlvbiB1KGUsdCl7IWUuUlRDUGVlckNvbm5lY3Rpb24mJmUud2Via2l0UlRDUGVlckNvbm5lY3Rpb24mJihlLlJUQ1BlZXJDb25uZWN0aW9uPWUud2Via2l0UlRDUGVlckNvbm5lY3Rpb24pLGUuUlRDUGVlckNvbm5lY3Rpb24mJnQudmVyc2lvbjw1MyYmW1wic2V0TG9jYWxEZXNjcmlwdGlvblwiLFwic2V0UmVtb3RlRGVzY3JpcHRpb25cIixcImFkZEljZUNhbmRpZGF0ZVwiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciByPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW3RdLG49byh7fSx0LGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1swXT1uZXcoXCJhZGRJY2VDYW5kaWRhdGVcIj09PXQ/ZS5SVENJY2VDYW5kaWRhdGU6ZS5SVENTZXNzaW9uRGVzY3JpcHRpb24pKGFyZ3VtZW50c1swXSksci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVt0XT1uW3RdfSl9ZnVuY3Rpb24gbCh0LHIpe2Uud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQodCxcIm5lZ290aWF0aW9ubmVlZGVkXCIsZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YXJnZXQ7aWYoIShyLnZlcnNpb248NzJ8fHQuZ2V0Q29uZmlndXJhdGlvbiYmXCJwbGFuLWJcIj09PXQuZ2V0Q29uZmlndXJhdGlvbigpLnNkcFNlbWFudGljcyl8fFwic3RhYmxlXCI9PT10LnNpZ25hbGluZ1N0YXRlKXJldHVybiBlfSl9XG59LHtcIi4uL3V0aWxzLmpzXCI6XCJpU3hDXCIsXCIuL2dldHVzZXJtZWRpYVwiOlwiczZTTlwiLFwiLi9nZXRkaXNwbGF5bWVkaWFcIjpcIlZIYThcIn1dLFwiTloxQ1wiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmZpbHRlckljZVNlcnZlcnM9bjt2YXIgcj10KHJlcXVpcmUoXCIuLi91dGlsc1wiKSk7ZnVuY3Rpb24gZSgpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuIG51bGw7dmFyIHI9bmV3IFdlYWtNYXA7cmV0dXJuIGU9ZnVuY3Rpb24oKXtyZXR1cm4gcn0scn1mdW5jdGlvbiB0KHIpe2lmKHImJnIuX19lc01vZHVsZSlyZXR1cm4gcjtpZihudWxsPT09cnx8XCJvYmplY3RcIiE9dHlwZW9mIHImJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHIpcmV0dXJue2RlZmF1bHQ6cn07dmFyIHQ9ZSgpO2lmKHQmJnQuaGFzKHIpKXJldHVybiB0LmdldChyKTt2YXIgbj17fSx1PU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtmb3IodmFyIGkgaW4gcilpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixpKSl7dmFyIGY9dT9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHIsaSk6bnVsbDtmJiYoZi5nZXR8fGYuc2V0KT9PYmplY3QuZGVmaW5lUHJvcGVydHkobixpLGYpOm5baV09cltpXX1yZXR1cm4gbi5kZWZhdWx0PXIsdCYmdC5zZXQocixuKSxufWZ1bmN0aW9uIG4oZSx0KXt2YXIgbj0hMTtyZXR1cm4oZT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKSkuZmlsdGVyKGZ1bmN0aW9uKGUpe2lmKGUmJihlLnVybHN8fGUudXJsKSl7dmFyIHQ9ZS51cmxzfHxlLnVybDtlLnVybCYmIWUudXJscyYmci5kZXByZWNhdGVkKFwiUlRDSWNlU2VydmVyLnVybFwiLFwiUlRDSWNlU2VydmVyLnVybHNcIik7dmFyIHU9XCJzdHJpbmdcIj09dHlwZW9mIHQ7cmV0dXJuIHUmJih0PVt0XSksdD10LmZpbHRlcihmdW5jdGlvbihyKXtpZigwPT09ci5pbmRleE9mKFwic3R1bjpcIikpcmV0dXJuITE7dmFyIGU9ci5zdGFydHNXaXRoKFwidHVyblwiKSYmIXIuc3RhcnRzV2l0aChcInR1cm46W1wiKSYmci5pbmNsdWRlcyhcInRyYW5zcG9ydD11ZHBcIik7cmV0dXJuIGUmJiFuPyhuPSEwLCEwKTplJiYhbn0pLGRlbGV0ZSBlLnVybCxlLnVybHM9dT90WzBdOnQsISF0Lmxlbmd0aH19KX1cbn0se1wiLi4vdXRpbHNcIjpcImlTeENcIn1dLFwiWUh2aFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgcj17Z2VuZXJhdGVJZGVudGlmaWVyOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLDEwKX19O3IubG9jYWxDTmFtZT1yLmdlbmVyYXRlSWRlbnRpZmllcigpLHIuc3BsaXRMaW5lcz1mdW5jdGlvbihyKXtyZXR1cm4gci50cmltKCkuc3BsaXQoXCJcXG5cIikubWFwKGZ1bmN0aW9uKHIpe3JldHVybiByLnRyaW0oKX0pfSxyLnNwbGl0U2VjdGlvbnM9ZnVuY3Rpb24ocil7cmV0dXJuIHIuc3BsaXQoXCJcXG5tPVwiKS5tYXAoZnVuY3Rpb24ocixlKXtyZXR1cm4oZT4wP1wibT1cIityOnIpLnRyaW0oKStcIlxcclxcblwifSl9LHIuZ2V0RGVzY3JpcHRpb249ZnVuY3Rpb24oZSl7dmFyIHQ9ci5zcGxpdFNlY3Rpb25zKGUpO3JldHVybiB0JiZ0WzBdfSxyLmdldE1lZGlhU2VjdGlvbnM9ZnVuY3Rpb24oZSl7dmFyIHQ9ci5zcGxpdFNlY3Rpb25zKGUpO3JldHVybiB0LnNoaWZ0KCksdH0sci5tYXRjaFByZWZpeD1mdW5jdGlvbihlLHQpe3JldHVybiByLnNwbGl0TGluZXMoZSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiAwPT09ci5pbmRleE9mKHQpfSl9LHIucGFyc2VDYW5kaWRhdGU9ZnVuY3Rpb24ocil7Zm9yKHZhciBlLHQ9e2ZvdW5kYXRpb246KGU9MD09PXIuaW5kZXhPZihcImE9Y2FuZGlkYXRlOlwiKT9yLnN1YnN0cmluZygxMikuc3BsaXQoXCIgXCIpOnIuc3Vic3RyaW5nKDEwKS5zcGxpdChcIiBcIikpWzBdLGNvbXBvbmVudDpwYXJzZUludChlWzFdLDEwKSxwcm90b2NvbDplWzJdLnRvTG93ZXJDYXNlKCkscHJpb3JpdHk6cGFyc2VJbnQoZVszXSwxMCksaXA6ZVs0XSxhZGRyZXNzOmVbNF0scG9ydDpwYXJzZUludChlWzVdLDEwKSx0eXBlOmVbN119LGE9ODthPGUubGVuZ3RoO2ErPTIpc3dpdGNoKGVbYV0pe2Nhc2VcInJhZGRyXCI6dC5yZWxhdGVkQWRkcmVzcz1lW2ErMV07YnJlYWs7Y2FzZVwicnBvcnRcIjp0LnJlbGF0ZWRQb3J0PXBhcnNlSW50KGVbYSsxXSwxMCk7YnJlYWs7Y2FzZVwidGNwdHlwZVwiOnQudGNwVHlwZT1lW2ErMV07YnJlYWs7Y2FzZVwidWZyYWdcIjp0LnVmcmFnPWVbYSsxXSx0LnVzZXJuYW1lRnJhZ21lbnQ9ZVthKzFdO2JyZWFrO2RlZmF1bHQ6dFtlW2FdXT1lW2ErMV19cmV0dXJuIHR9LHIud3JpdGVDYW5kaWRhdGU9ZnVuY3Rpb24ocil7dmFyIGU9W107ZS5wdXNoKHIuZm91bmRhdGlvbiksZS5wdXNoKHIuY29tcG9uZW50KSxlLnB1c2goci5wcm90b2NvbC50b1VwcGVyQ2FzZSgpKSxlLnB1c2goci5wcmlvcml0eSksZS5wdXNoKHIuYWRkcmVzc3x8ci5pcCksZS5wdXNoKHIucG9ydCk7dmFyIHQ9ci50eXBlO3JldHVybiBlLnB1c2goXCJ0eXBcIiksZS5wdXNoKHQpLFwiaG9zdFwiIT09dCYmci5yZWxhdGVkQWRkcmVzcyYmci5yZWxhdGVkUG9ydCYmKGUucHVzaChcInJhZGRyXCIpLGUucHVzaChyLnJlbGF0ZWRBZGRyZXNzKSxlLnB1c2goXCJycG9ydFwiKSxlLnB1c2goci5yZWxhdGVkUG9ydCkpLHIudGNwVHlwZSYmXCJ0Y3BcIj09PXIucHJvdG9jb2wudG9Mb3dlckNhc2UoKSYmKGUucHVzaChcInRjcHR5cGVcIiksZS5wdXNoKHIudGNwVHlwZSkpLChyLnVzZXJuYW1lRnJhZ21lbnR8fHIudWZyYWcpJiYoZS5wdXNoKFwidWZyYWdcIiksZS5wdXNoKHIudXNlcm5hbWVGcmFnbWVudHx8ci51ZnJhZykpLFwiY2FuZGlkYXRlOlwiK2Uuam9pbihcIiBcIil9LHIucGFyc2VJY2VPcHRpb25zPWZ1bmN0aW9uKHIpe3JldHVybiByLnN1YnN0cigxNCkuc3BsaXQoXCIgXCIpfSxyLnBhcnNlUnRwTWFwPWZ1bmN0aW9uKHIpe3ZhciBlPXIuc3Vic3RyKDkpLnNwbGl0KFwiIFwiKSx0PXtwYXlsb2FkVHlwZTpwYXJzZUludChlLnNoaWZ0KCksMTApfTtyZXR1cm4gZT1lWzBdLnNwbGl0KFwiL1wiKSx0Lm5hbWU9ZVswXSx0LmNsb2NrUmF0ZT1wYXJzZUludChlWzFdLDEwKSx0LmNoYW5uZWxzPTM9PT1lLmxlbmd0aD9wYXJzZUludChlWzJdLDEwKToxLHQubnVtQ2hhbm5lbHM9dC5jaGFubmVscyx0fSxyLndyaXRlUnRwTWFwPWZ1bmN0aW9uKHIpe3ZhciBlPXIucGF5bG9hZFR5cGU7dm9pZCAwIT09ci5wcmVmZXJyZWRQYXlsb2FkVHlwZSYmKGU9ci5wcmVmZXJyZWRQYXlsb2FkVHlwZSk7dmFyIHQ9ci5jaGFubmVsc3x8ci5udW1DaGFubmVsc3x8MTtyZXR1cm5cImE9cnRwbWFwOlwiK2UrXCIgXCIrci5uYW1lK1wiL1wiK3IuY2xvY2tSYXRlKygxIT09dD9cIi9cIit0OlwiXCIpK1wiXFxyXFxuXCJ9LHIucGFyc2VFeHRtYXA9ZnVuY3Rpb24ocil7dmFyIGU9ci5zdWJzdHIoOSkuc3BsaXQoXCIgXCIpO3JldHVybntpZDpwYXJzZUludChlWzBdLDEwKSxkaXJlY3Rpb246ZVswXS5pbmRleE9mKFwiL1wiKT4wP2VbMF0uc3BsaXQoXCIvXCIpWzFdOlwic2VuZHJlY3ZcIix1cmk6ZVsxXX19LHIud3JpdGVFeHRtYXA9ZnVuY3Rpb24ocil7cmV0dXJuXCJhPWV4dG1hcDpcIisoci5pZHx8ci5wcmVmZXJyZWRJZCkrKHIuZGlyZWN0aW9uJiZcInNlbmRyZWN2XCIhPT1yLmRpcmVjdGlvbj9cIi9cIityLmRpcmVjdGlvbjpcIlwiKStcIiBcIityLnVyaStcIlxcclxcblwifSxyLnBhcnNlRm10cD1mdW5jdGlvbihyKXtmb3IodmFyIGUsdD17fSxhPXIuc3Vic3RyKHIuaW5kZXhPZihcIiBcIikrMSkuc3BsaXQoXCI7XCIpLG49MDtuPGEubGVuZ3RoO24rKyl0WyhlPWFbbl0udHJpbSgpLnNwbGl0KFwiPVwiKSlbMF0udHJpbSgpXT1lWzFdO3JldHVybiB0fSxyLndyaXRlRm10cD1mdW5jdGlvbihyKXt2YXIgZT1cIlwiLHQ9ci5wYXlsb2FkVHlwZTtpZih2b2lkIDAhPT1yLnByZWZlcnJlZFBheWxvYWRUeXBlJiYodD1yLnByZWZlcnJlZFBheWxvYWRUeXBlKSxyLnBhcmFtZXRlcnMmJk9iamVjdC5rZXlzKHIucGFyYW1ldGVycykubGVuZ3RoKXt2YXIgYT1bXTtPYmplY3Qua2V5cyhyLnBhcmFtZXRlcnMpLmZvckVhY2goZnVuY3Rpb24oZSl7ci5wYXJhbWV0ZXJzW2VdP2EucHVzaChlK1wiPVwiK3IucGFyYW1ldGVyc1tlXSk6YS5wdXNoKGUpfSksZSs9XCJhPWZtdHA6XCIrdCtcIiBcIithLmpvaW4oXCI7XCIpK1wiXFxyXFxuXCJ9cmV0dXJuIGV9LHIucGFyc2VSdGNwRmI9ZnVuY3Rpb24ocil7dmFyIGU9ci5zdWJzdHIoci5pbmRleE9mKFwiIFwiKSsxKS5zcGxpdChcIiBcIik7cmV0dXJue3R5cGU6ZS5zaGlmdCgpLHBhcmFtZXRlcjplLmpvaW4oXCIgXCIpfX0sci53cml0ZVJ0Y3BGYj1mdW5jdGlvbihyKXt2YXIgZT1cIlwiLHQ9ci5wYXlsb2FkVHlwZTtyZXR1cm4gdm9pZCAwIT09ci5wcmVmZXJyZWRQYXlsb2FkVHlwZSYmKHQ9ci5wcmVmZXJyZWRQYXlsb2FkVHlwZSksci5ydGNwRmVlZGJhY2smJnIucnRjcEZlZWRiYWNrLmxlbmd0aCYmci5ydGNwRmVlZGJhY2suZm9yRWFjaChmdW5jdGlvbihyKXtlKz1cImE9cnRjcC1mYjpcIit0K1wiIFwiK3IudHlwZSsoci5wYXJhbWV0ZXImJnIucGFyYW1ldGVyLmxlbmd0aD9cIiBcIityLnBhcmFtZXRlcjpcIlwiKStcIlxcclxcblwifSksZX0sci5wYXJzZVNzcmNNZWRpYT1mdW5jdGlvbihyKXt2YXIgZT1yLmluZGV4T2YoXCIgXCIpLHQ9e3NzcmM6cGFyc2VJbnQoci5zdWJzdHIoNyxlLTcpLDEwKX0sYT1yLmluZGV4T2YoXCI6XCIsZSk7cmV0dXJuIGE+LTE/KHQuYXR0cmlidXRlPXIuc3Vic3RyKGUrMSxhLWUtMSksdC52YWx1ZT1yLnN1YnN0cihhKzEpKTp0LmF0dHJpYnV0ZT1yLnN1YnN0cihlKzEpLHR9LHIucGFyc2VTc3JjR3JvdXA9ZnVuY3Rpb24ocil7dmFyIGU9ci5zdWJzdHIoMTMpLnNwbGl0KFwiIFwiKTtyZXR1cm57c2VtYW50aWNzOmUuc2hpZnQoKSxzc3JjczplLm1hcChmdW5jdGlvbihyKXtyZXR1cm4gcGFyc2VJbnQociwxMCl9KX19LHIuZ2V0TWlkPWZ1bmN0aW9uKGUpe3ZhciB0PXIubWF0Y2hQcmVmaXgoZSxcImE9bWlkOlwiKVswXTtpZih0KXJldHVybiB0LnN1YnN0cig2KX0sci5wYXJzZUZpbmdlcnByaW50PWZ1bmN0aW9uKHIpe3ZhciBlPXIuc3Vic3RyKDE0KS5zcGxpdChcIiBcIik7cmV0dXJue2FsZ29yaXRobTplWzBdLnRvTG93ZXJDYXNlKCksdmFsdWU6ZVsxXX19LHIuZ2V0RHRsc1BhcmFtZXRlcnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57cm9sZTpcImF1dG9cIixmaW5nZXJwcmludHM6ci5tYXRjaFByZWZpeChlK3QsXCJhPWZpbmdlcnByaW50OlwiKS5tYXAoci5wYXJzZUZpbmdlcnByaW50KX19LHIud3JpdGVEdGxzUGFyYW1ldGVycz1mdW5jdGlvbihyLGUpe3ZhciB0PVwiYT1zZXR1cDpcIitlK1wiXFxyXFxuXCI7cmV0dXJuIHIuZmluZ2VycHJpbnRzLmZvckVhY2goZnVuY3Rpb24ocil7dCs9XCJhPWZpbmdlcnByaW50OlwiK3IuYWxnb3JpdGhtK1wiIFwiK3IudmFsdWUrXCJcXHJcXG5cIn0pLHR9LHIucGFyc2VDcnlwdG9MaW5lPWZ1bmN0aW9uKHIpe3ZhciBlPXIuc3Vic3RyKDkpLnNwbGl0KFwiIFwiKTtyZXR1cm57dGFnOnBhcnNlSW50KGVbMF0sMTApLGNyeXB0b1N1aXRlOmVbMV0sa2V5UGFyYW1zOmVbMl0sc2Vzc2lvblBhcmFtczplLnNsaWNlKDMpfX0sci53cml0ZUNyeXB0b0xpbmU9ZnVuY3Rpb24oZSl7cmV0dXJuXCJhPWNyeXB0bzpcIitlLnRhZytcIiBcIitlLmNyeXB0b1N1aXRlK1wiIFwiKyhcIm9iamVjdFwiPT10eXBlb2YgZS5rZXlQYXJhbXM/ci53cml0ZUNyeXB0b0tleVBhcmFtcyhlLmtleVBhcmFtcyk6ZS5rZXlQYXJhbXMpKyhlLnNlc3Npb25QYXJhbXM/XCIgXCIrZS5zZXNzaW9uUGFyYW1zLmpvaW4oXCIgXCIpOlwiXCIpK1wiXFxyXFxuXCJ9LHIucGFyc2VDcnlwdG9LZXlQYXJhbXM9ZnVuY3Rpb24ocil7aWYoMCE9PXIuaW5kZXhPZihcImlubGluZTpcIikpcmV0dXJuIG51bGw7dmFyIGU9ci5zdWJzdHIoNykuc3BsaXQoXCJ8XCIpO3JldHVybntrZXlNZXRob2Q6XCJpbmxpbmVcIixrZXlTYWx0OmVbMF0sbGlmZVRpbWU6ZVsxXSxta2lWYWx1ZTplWzJdP2VbMl0uc3BsaXQoXCI6XCIpWzBdOnZvaWQgMCxta2lMZW5ndGg6ZVsyXT9lWzJdLnNwbGl0KFwiOlwiKVsxXTp2b2lkIDB9fSxyLndyaXRlQ3J5cHRvS2V5UGFyYW1zPWZ1bmN0aW9uKHIpe3JldHVybiByLmtleU1ldGhvZCtcIjpcIityLmtleVNhbHQrKHIubGlmZVRpbWU/XCJ8XCIrci5saWZlVGltZTpcIlwiKSsoci5ta2lWYWx1ZSYmci5ta2lMZW5ndGg/XCJ8XCIrci5ta2lWYWx1ZStcIjpcIityLm1raUxlbmd0aDpcIlwiKX0sci5nZXRDcnlwdG9QYXJhbWV0ZXJzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIubWF0Y2hQcmVmaXgoZSt0LFwiYT1jcnlwdG86XCIpLm1hcChyLnBhcnNlQ3J5cHRvTGluZSl9LHIuZ2V0SWNlUGFyYW1ldGVycz1mdW5jdGlvbihlLHQpe3ZhciBhPXIubWF0Y2hQcmVmaXgoZSt0LFwiYT1pY2UtdWZyYWc6XCIpWzBdLG49ci5tYXRjaFByZWZpeChlK3QsXCJhPWljZS1wd2Q6XCIpWzBdO3JldHVybiBhJiZuP3t1c2VybmFtZUZyYWdtZW50OmEuc3Vic3RyKDEyKSxwYXNzd29yZDpuLnN1YnN0cigxMCl9Om51bGx9LHIud3JpdGVJY2VQYXJhbWV0ZXJzPWZ1bmN0aW9uKHIpe3JldHVyblwiYT1pY2UtdWZyYWc6XCIrci51c2VybmFtZUZyYWdtZW50K1wiXFxyXFxuYT1pY2UtcHdkOlwiK3IucGFzc3dvcmQrXCJcXHJcXG5cIn0sci5wYXJzZVJ0cFBhcmFtZXRlcnM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXtjb2RlY3M6W10saGVhZGVyRXh0ZW5zaW9uczpbXSxmZWNNZWNoYW5pc21zOltdLHJ0Y3A6W119LGE9ci5zcGxpdExpbmVzKGUpWzBdLnNwbGl0KFwiIFwiKSxuPTM7bjxhLmxlbmd0aDtuKyspe3ZhciBzPWFbbl0saT1yLm1hdGNoUHJlZml4KGUsXCJhPXJ0cG1hcDpcIitzK1wiIFwiKVswXTtpZihpKXt2YXIgcD1yLnBhcnNlUnRwTWFwKGkpLGM9ci5tYXRjaFByZWZpeChlLFwiYT1mbXRwOlwiK3MrXCIgXCIpO3N3aXRjaChwLnBhcmFtZXRlcnM9Yy5sZW5ndGg/ci5wYXJzZUZtdHAoY1swXSk6e30scC5ydGNwRmVlZGJhY2s9ci5tYXRjaFByZWZpeChlLFwiYT1ydGNwLWZiOlwiK3MrXCIgXCIpLm1hcChyLnBhcnNlUnRjcEZiKSx0LmNvZGVjcy5wdXNoKHApLHAubmFtZS50b1VwcGVyQ2FzZSgpKXtjYXNlXCJSRURcIjpjYXNlXCJVTFBGRUNcIjp0LmZlY01lY2hhbmlzbXMucHVzaChwLm5hbWUudG9VcHBlckNhc2UoKSl9fX1yZXR1cm4gci5tYXRjaFByZWZpeChlLFwiYT1leHRtYXA6XCIpLmZvckVhY2goZnVuY3Rpb24oZSl7dC5oZWFkZXJFeHRlbnNpb25zLnB1c2goci5wYXJzZUV4dG1hcChlKSl9KSx0fSxyLndyaXRlUnRwRGVzY3JpcHRpb249ZnVuY3Rpb24oZSx0KXt2YXIgYT1cIlwiO2ErPVwibT1cIitlK1wiIFwiLGErPXQuY29kZWNzLmxlbmd0aD4wP1wiOVwiOlwiMFwiLGErPVwiIFVEUC9UTFMvUlRQL1NBVlBGIFwiLGErPXQuY29kZWNzLm1hcChmdW5jdGlvbihyKXtyZXR1cm4gdm9pZCAwIT09ci5wcmVmZXJyZWRQYXlsb2FkVHlwZT9yLnByZWZlcnJlZFBheWxvYWRUeXBlOnIucGF5bG9hZFR5cGV9KS5qb2luKFwiIFwiKStcIlxcclxcblwiLGErPVwiYz1JTiBJUDQgMC4wLjAuMFxcclxcblwiLGErPVwiYT1ydGNwOjkgSU4gSVA0IDAuMC4wLjBcXHJcXG5cIix0LmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2ErPXIud3JpdGVSdHBNYXAoZSksYSs9ci53cml0ZUZtdHAoZSksYSs9ci53cml0ZVJ0Y3BGYihlKX0pO3ZhciBuPTA7cmV0dXJuIHQuY29kZWNzLmZvckVhY2goZnVuY3Rpb24ocil7ci5tYXhwdGltZT5uJiYobj1yLm1heHB0aW1lKX0pLG4+MCYmKGErPVwiYT1tYXhwdGltZTpcIituK1wiXFxyXFxuXCIpLGErPVwiYT1ydGNwLW11eFxcclxcblwiLHQuaGVhZGVyRXh0ZW5zaW9ucyYmdC5oZWFkZXJFeHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24oZSl7YSs9ci53cml0ZUV4dG1hcChlKX0pLGF9LHIucGFyc2VSdHBFbmNvZGluZ1BhcmFtZXRlcnM9ZnVuY3Rpb24oZSl7dmFyIHQsYT1bXSxuPXIucGFyc2VSdHBQYXJhbWV0ZXJzKGUpLHM9LTEhPT1uLmZlY01lY2hhbmlzbXMuaW5kZXhPZihcIlJFRFwiKSxpPS0xIT09bi5mZWNNZWNoYW5pc21zLmluZGV4T2YoXCJVTFBGRUNcIikscD1yLm1hdGNoUHJlZml4KGUsXCJhPXNzcmM6XCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gci5wYXJzZVNzcmNNZWRpYShlKX0pLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm5cImNuYW1lXCI9PT1yLmF0dHJpYnV0ZX0pLGM9cC5sZW5ndGg+MCYmcFswXS5zc3JjLG89ci5tYXRjaFByZWZpeChlLFwiYT1zc3JjLWdyb3VwOkZJRFwiKS5tYXAoZnVuY3Rpb24ocil7cmV0dXJuIHIuc3Vic3RyKDE3KS5zcGxpdChcIiBcIikubWFwKGZ1bmN0aW9uKHIpe3JldHVybiBwYXJzZUludChyLDEwKX0pfSk7by5sZW5ndGg+MCYmb1swXS5sZW5ndGg+MSYmb1swXVswXT09PWMmJih0PW9bMF1bMV0pLG4uY29kZWNzLmZvckVhY2goZnVuY3Rpb24ocil7aWYoXCJSVFhcIj09PXIubmFtZS50b1VwcGVyQ2FzZSgpJiZyLnBhcmFtZXRlcnMuYXB0KXt2YXIgZT17c3NyYzpjLGNvZGVjUGF5bG9hZFR5cGU6cGFyc2VJbnQoci5wYXJhbWV0ZXJzLmFwdCwxMCl9O2MmJnQmJihlLnJ0eD17c3NyYzp0fSksYS5wdXNoKGUpLHMmJigoZT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKSkuZmVjPXtzc3JjOmMsbWVjaGFuaXNtOmk/XCJyZWQrdWxwZmVjXCI6XCJyZWRcIn0sYS5wdXNoKGUpKX19KSwwPT09YS5sZW5ndGgmJmMmJmEucHVzaCh7c3NyYzpjfSk7dmFyIHU9ci5tYXRjaFByZWZpeChlLFwiYj1cIik7cmV0dXJuIHUubGVuZ3RoJiYodT0wPT09dVswXS5pbmRleE9mKFwiYj1USUFTOlwiKT9wYXJzZUludCh1WzBdLnN1YnN0cig3KSwxMCk6MD09PXVbMF0uaW5kZXhPZihcImI9QVM6XCIpPzFlMypwYXJzZUludCh1WzBdLnN1YnN0cig1KSwxMCkqLjk1LTE2ZTM6dm9pZCAwLGEuZm9yRWFjaChmdW5jdGlvbihyKXtyLm1heEJpdHJhdGU9dX0pKSxhfSxyLnBhcnNlUnRjcFBhcmFtZXRlcnM9ZnVuY3Rpb24oZSl7dmFyIHQ9e30sYT1yLm1hdGNoUHJlZml4KGUsXCJhPXNzcmM6XCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gci5wYXJzZVNzcmNNZWRpYShlKX0pLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm5cImNuYW1lXCI9PT1yLmF0dHJpYnV0ZX0pWzBdO2EmJih0LmNuYW1lPWEudmFsdWUsdC5zc3JjPWEuc3NyYyk7dmFyIG49ci5tYXRjaFByZWZpeChlLFwiYT1ydGNwLXJzaXplXCIpO3QucmVkdWNlZFNpemU9bi5sZW5ndGg+MCx0LmNvbXBvdW5kPTA9PT1uLmxlbmd0aDt2YXIgcz1yLm1hdGNoUHJlZml4KGUsXCJhPXJ0Y3AtbXV4XCIpO3JldHVybiB0Lm11eD1zLmxlbmd0aD4wLHR9LHIucGFyc2VNc2lkPWZ1bmN0aW9uKGUpe3ZhciB0LGE9ci5tYXRjaFByZWZpeChlLFwiYT1tc2lkOlwiKTtpZigxPT09YS5sZW5ndGgpcmV0dXJue3N0cmVhbToodD1hWzBdLnN1YnN0cig3KS5zcGxpdChcIiBcIikpWzBdLHRyYWNrOnRbMV19O3ZhciBuPXIubWF0Y2hQcmVmaXgoZSxcImE9c3NyYzpcIikubWFwKGZ1bmN0aW9uKGUpe3JldHVybiByLnBhcnNlU3NyY01lZGlhKGUpfSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVyblwibXNpZFwiPT09ci5hdHRyaWJ1dGV9KTtyZXR1cm4gbi5sZW5ndGg+MD97c3RyZWFtOih0PW5bMF0udmFsdWUuc3BsaXQoXCIgXCIpKVswXSx0cmFjazp0WzFdfTp2b2lkIDB9LHIucGFyc2VTY3RwRGVzY3JpcHRpb249ZnVuY3Rpb24oZSl7dmFyIHQsYT1yLnBhcnNlTUxpbmUoZSksbj1yLm1hdGNoUHJlZml4KGUsXCJhPW1heC1tZXNzYWdlLXNpemU6XCIpO24ubGVuZ3RoPjAmJih0PXBhcnNlSW50KG5bMF0uc3Vic3RyKDE5KSwxMCkpLGlzTmFOKHQpJiYodD02NTUzNik7dmFyIHM9ci5tYXRjaFByZWZpeChlLFwiYT1zY3RwLXBvcnQ6XCIpO2lmKHMubGVuZ3RoPjApcmV0dXJue3BvcnQ6cGFyc2VJbnQoc1swXS5zdWJzdHIoMTIpLDEwKSxwcm90b2NvbDphLmZtdCxtYXhNZXNzYWdlU2l6ZTp0fTtpZihyLm1hdGNoUHJlZml4KGUsXCJhPXNjdHBtYXA6XCIpLmxlbmd0aD4wKXt2YXIgaT1yLm1hdGNoUHJlZml4KGUsXCJhPXNjdHBtYXA6XCIpWzBdLnN1YnN0cigxMCkuc3BsaXQoXCIgXCIpO3JldHVybntwb3J0OnBhcnNlSW50KGlbMF0sMTApLHByb3RvY29sOmlbMV0sbWF4TWVzc2FnZVNpemU6dH19fSxyLndyaXRlU2N0cERlc2NyaXB0aW9uPWZ1bmN0aW9uKHIsZSl7dmFyIHQ9W107cmV0dXJuIHQ9XCJEVExTL1NDVFBcIiE9PXIucHJvdG9jb2w/W1wibT1cIityLmtpbmQrXCIgOSBcIityLnByb3RvY29sK1wiIFwiK2UucHJvdG9jb2wrXCJcXHJcXG5cIixcImM9SU4gSVA0IDAuMC4wLjBcXHJcXG5cIixcImE9c2N0cC1wb3J0OlwiK2UucG9ydCtcIlxcclxcblwiXTpbXCJtPVwiK3Iua2luZCtcIiA5IFwiK3IucHJvdG9jb2wrXCIgXCIrZS5wb3J0K1wiXFxyXFxuXCIsXCJjPUlOIElQNCAwLjAuMC4wXFxyXFxuXCIsXCJhPXNjdHBtYXA6XCIrZS5wb3J0K1wiIFwiK2UucHJvdG9jb2wrXCIgNjU1MzVcXHJcXG5cIl0sdm9pZCAwIT09ZS5tYXhNZXNzYWdlU2l6ZSYmdC5wdXNoKFwiYT1tYXgtbWVzc2FnZS1zaXplOlwiK2UubWF4TWVzc2FnZVNpemUrXCJcXHJcXG5cIiksdC5qb2luKFwiXCIpfSxyLmdlbmVyYXRlU2Vzc2lvbklkPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKS5zdWJzdHIoMiwyMSl9LHIud3JpdGVTZXNzaW9uQm9pbGVycGxhdGU9ZnVuY3Rpb24oZSx0LGEpe3ZhciBuPXZvaWQgMCE9PXQ/dDoyO3JldHVyblwidj0wXFxyXFxubz1cIisoYXx8XCJ0aGlzaXNhZGFwdGVyb3J0Y1wiKStcIiBcIisoZXx8ci5nZW5lcmF0ZVNlc3Npb25JZCgpKStcIiBcIituK1wiIElOIElQNCAxMjcuMC4wLjFcXHJcXG5zPS1cXHJcXG50PTAgMFxcclxcblwifSxyLndyaXRlTWVkaWFTZWN0aW9uPWZ1bmN0aW9uKGUsdCxhLG4pe3ZhciBzPXIud3JpdGVSdHBEZXNjcmlwdGlvbihlLmtpbmQsdCk7aWYocys9ci53cml0ZUljZVBhcmFtZXRlcnMoZS5pY2VHYXRoZXJlci5nZXRMb2NhbFBhcmFtZXRlcnMoKSkscys9ci53cml0ZUR0bHNQYXJhbWV0ZXJzKGUuZHRsc1RyYW5zcG9ydC5nZXRMb2NhbFBhcmFtZXRlcnMoKSxcIm9mZmVyXCI9PT1hP1wiYWN0cGFzc1wiOlwiYWN0aXZlXCIpLHMrPVwiYT1taWQ6XCIrZS5taWQrXCJcXHJcXG5cIixlLmRpcmVjdGlvbj9zKz1cImE9XCIrZS5kaXJlY3Rpb24rXCJcXHJcXG5cIjplLnJ0cFNlbmRlciYmZS5ydHBSZWNlaXZlcj9zKz1cImE9c2VuZHJlY3ZcXHJcXG5cIjplLnJ0cFNlbmRlcj9zKz1cImE9c2VuZG9ubHlcXHJcXG5cIjplLnJ0cFJlY2VpdmVyP3MrPVwiYT1yZWN2b25seVxcclxcblwiOnMrPVwiYT1pbmFjdGl2ZVxcclxcblwiLGUucnRwU2VuZGVyKXt2YXIgaT1cIm1zaWQ6XCIrbi5pZCtcIiBcIitlLnJ0cFNlbmRlci50cmFjay5pZCtcIlxcclxcblwiO3MrPVwiYT1cIitpLHMrPVwiYT1zc3JjOlwiK2Uuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjK1wiIFwiK2ksZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmKHMrPVwiYT1zc3JjOlwiK2Uuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYytcIiBcIitpLHMrPVwiYT1zc3JjLWdyb3VwOkZJRCBcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMrXCJcXHJcXG5cIil9cmV0dXJuIHMrPVwiYT1zc3JjOlwiK2Uuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjK1wiIGNuYW1lOlwiK3IubG9jYWxDTmFtZStcIlxcclxcblwiLGUucnRwU2VuZGVyJiZlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4JiYocys9XCJhPXNzcmM6XCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjK1wiIGNuYW1lOlwiK3IubG9jYWxDTmFtZStcIlxcclxcblwiKSxzfSxyLmdldERpcmVjdGlvbj1mdW5jdGlvbihlLHQpe2Zvcih2YXIgYT1yLnNwbGl0TGluZXMoZSksbj0wO248YS5sZW5ndGg7bisrKXN3aXRjaChhW25dKXtjYXNlXCJhPXNlbmRyZWN2XCI6Y2FzZVwiYT1zZW5kb25seVwiOmNhc2VcImE9cmVjdm9ubHlcIjpjYXNlXCJhPWluYWN0aXZlXCI6cmV0dXJuIGFbbl0uc3Vic3RyKDIpfXJldHVybiB0P3IuZ2V0RGlyZWN0aW9uKHQpOlwic2VuZHJlY3ZcIn0sci5nZXRLaW5kPWZ1bmN0aW9uKGUpe3JldHVybiByLnNwbGl0TGluZXMoZSlbMF0uc3BsaXQoXCIgXCIpWzBdLnN1YnN0cigyKX0sci5pc1JlamVjdGVkPWZ1bmN0aW9uKHIpe3JldHVyblwiMFwiPT09ci5zcGxpdChcIiBcIiwyKVsxXX0sci5wYXJzZU1MaW5lPWZ1bmN0aW9uKGUpe3ZhciB0PXIuc3BsaXRMaW5lcyhlKVswXS5zdWJzdHIoMikuc3BsaXQoXCIgXCIpO3JldHVybntraW5kOnRbMF0scG9ydDpwYXJzZUludCh0WzFdLDEwKSxwcm90b2NvbDp0WzJdLGZtdDp0LnNsaWNlKDMpLmpvaW4oXCIgXCIpfX0sci5wYXJzZU9MaW5lPWZ1bmN0aW9uKGUpe3ZhciB0PXIubWF0Y2hQcmVmaXgoZSxcIm89XCIpWzBdLnN1YnN0cigyKS5zcGxpdChcIiBcIik7cmV0dXJue3VzZXJuYW1lOnRbMF0sc2Vzc2lvbklkOnRbMV0sc2Vzc2lvblZlcnNpb246cGFyc2VJbnQodFsyXSwxMCksbmV0VHlwZTp0WzNdLGFkZHJlc3NUeXBlOnRbNF0sYWRkcmVzczp0WzVdfX0sci5pc1ZhbGlkU0RQPWZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlfHwwPT09ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciB0PXIuc3BsaXRMaW5lcyhlKSxhPTA7YTx0Lmxlbmd0aDthKyspaWYodFthXS5sZW5ndGg8Mnx8XCI9XCIhPT10W2FdLmNoYXJBdCgxKSlyZXR1cm4hMTtyZXR1cm4hMH0sXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmKG1vZHVsZS5leHBvcnRzPXIpO1xufSx7fV0sXCJOSjJ1XCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPXJlcXVpcmUoXCJzZHBcIik7ZnVuY3Rpb24gdChlKXtyZXR1cm57aW5ib3VuZHJ0cDpcImluYm91bmQtcnRwXCIsb3V0Ym91bmRydHA6XCJvdXRib3VuZC1ydHBcIixjYW5kaWRhdGVwYWlyOlwiY2FuZGlkYXRlLXBhaXJcIixsb2NhbGNhbmRpZGF0ZTpcImxvY2FsLWNhbmRpZGF0ZVwiLHJlbW90ZWNhbmRpZGF0ZTpcInJlbW90ZS1jYW5kaWRhdGVcIn1bZS50eXBlXXx8ZS50eXBlfWZ1bmN0aW9uIHIodCxyLG4sYSxpKXt2YXIgcz1lLndyaXRlUnRwRGVzY3JpcHRpb24odC5raW5kLHIpO2lmKHMrPWUud3JpdGVJY2VQYXJhbWV0ZXJzKHQuaWNlR2F0aGVyZXIuZ2V0TG9jYWxQYXJhbWV0ZXJzKCkpLHMrPWUud3JpdGVEdGxzUGFyYW1ldGVycyh0LmR0bHNUcmFuc3BvcnQuZ2V0TG9jYWxQYXJhbWV0ZXJzKCksXCJvZmZlclwiPT09bj9cImFjdHBhc3NcIjppfHxcImFjdGl2ZVwiKSxzKz1cImE9bWlkOlwiK3QubWlkK1wiXFxyXFxuXCIsdC5ydHBTZW5kZXImJnQucnRwUmVjZWl2ZXI/cys9XCJhPXNlbmRyZWN2XFxyXFxuXCI6dC5ydHBTZW5kZXI/cys9XCJhPXNlbmRvbmx5XFxyXFxuXCI6dC5ydHBSZWNlaXZlcj9zKz1cImE9cmVjdm9ubHlcXHJcXG5cIjpzKz1cImE9aW5hY3RpdmVcXHJcXG5cIix0LnJ0cFNlbmRlcil7dmFyIG89dC5ydHBTZW5kZXIuX2luaXRpYWxUcmFja0lkfHx0LnJ0cFNlbmRlci50cmFjay5pZDt0LnJ0cFNlbmRlci5faW5pdGlhbFRyYWNrSWQ9bzt2YXIgYz1cIm1zaWQ6XCIrKGE/YS5pZDpcIi1cIikrXCIgXCIrbytcIlxcclxcblwiO3MrPVwiYT1cIitjLHMrPVwiYT1zc3JjOlwiK3Quc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjK1wiIFwiK2MsdC5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmKHMrPVwiYT1zc3JjOlwiK3Quc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYytcIiBcIitjLHMrPVwiYT1zc3JjLWdyb3VwOkZJRCBcIit0LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBcIit0LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMrXCJcXHJcXG5cIil9cmV0dXJuIHMrPVwiYT1zc3JjOlwiK3Quc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjK1wiIGNuYW1lOlwiK2UubG9jYWxDTmFtZStcIlxcclxcblwiLHQucnRwU2VuZGVyJiZ0LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4JiYocys9XCJhPXNzcmM6XCIrdC5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjK1wiIGNuYW1lOlwiK2UubG9jYWxDTmFtZStcIlxcclxcblwiKSxzfWZ1bmN0aW9uIG4oZSx0KXt2YXIgcj0hMTtyZXR1cm4oZT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKSkuZmlsdGVyKGZ1bmN0aW9uKGUpe2lmKGUmJihlLnVybHN8fGUudXJsKSl7dmFyIG49ZS51cmxzfHxlLnVybDtlLnVybCYmIWUudXJscyYmY29uc29sZS53YXJuKFwiUlRDSWNlU2VydmVyLnVybCBpcyBkZXByZWNhdGVkISBVc2UgdXJscyBpbnN0ZWFkLlwiKTt2YXIgYT1cInN0cmluZ1wiPT10eXBlb2YgbjtyZXR1cm4gYSYmKG49W25dKSxuPW4uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiAwPT09ZS5pbmRleE9mKFwidHVybjpcIikmJi0xIT09ZS5pbmRleE9mKFwidHJhbnNwb3J0PXVkcFwiKSYmLTE9PT1lLmluZGV4T2YoXCJ0dXJuOltcIikmJiFyPyhyPSEwLCEwKTowPT09ZS5pbmRleE9mKFwic3R1bjpcIikmJnQ+PTE0MzkzJiYtMT09PWUuaW5kZXhPZihcIj90cmFuc3BvcnQ9dWRwXCIpfSksZGVsZXRlIGUudXJsLGUudXJscz1hP25bMF06biwhIW4ubGVuZ3RofX0pfWZ1bmN0aW9uIGEoZSx0KXt2YXIgcj17Y29kZWNzOltdLGhlYWRlckV4dGVuc2lvbnM6W10sZmVjTWVjaGFuaXNtczpbXX0sbj1mdW5jdGlvbihlLHQpe2U9cGFyc2VJbnQoZSwxMCk7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspaWYodFtyXS5wYXlsb2FkVHlwZT09PWV8fHRbcl0ucHJlZmVycmVkUGF5bG9hZFR5cGU9PT1lKXJldHVybiB0W3JdfSxhPWZ1bmN0aW9uKGUsdCxyLGEpe3ZhciBpPW4oZS5wYXJhbWV0ZXJzLmFwdCxyKSxzPW4odC5wYXJhbWV0ZXJzLmFwdCxhKTtyZXR1cm4gaSYmcyYmaS5uYW1lLnRvTG93ZXJDYXNlKCk9PT1zLm5hbWUudG9Mb3dlckNhc2UoKX07cmV0dXJuIGUuY29kZWNzLmZvckVhY2goZnVuY3Rpb24obil7Zm9yKHZhciBpPTA7aTx0LmNvZGVjcy5sZW5ndGg7aSsrKXt2YXIgcz10LmNvZGVjc1tpXTtpZihuLm5hbWUudG9Mb3dlckNhc2UoKT09PXMubmFtZS50b0xvd2VyQ2FzZSgpJiZuLmNsb2NrUmF0ZT09PXMuY2xvY2tSYXRlKXtpZihcInJ0eFwiPT09bi5uYW1lLnRvTG93ZXJDYXNlKCkmJm4ucGFyYW1ldGVycyYmcy5wYXJhbWV0ZXJzLmFwdCYmIWEobixzLGUuY29kZWNzLHQuY29kZWNzKSljb250aW51ZTsocz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHMpKSkubnVtQ2hhbm5lbHM9TWF0aC5taW4obi5udW1DaGFubmVscyxzLm51bUNoYW5uZWxzKSxyLmNvZGVjcy5wdXNoKHMpLHMucnRjcEZlZWRiYWNrPXMucnRjcEZlZWRiYWNrLmZpbHRlcihmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PG4ucnRjcEZlZWRiYWNrLmxlbmd0aDt0KyspaWYobi5ydGNwRmVlZGJhY2tbdF0udHlwZT09PWUudHlwZSYmbi5ydGNwRmVlZGJhY2tbdF0ucGFyYW1ldGVyPT09ZS5wYXJhbWV0ZXIpcmV0dXJuITA7cmV0dXJuITF9KTticmVha319fSksZS5oZWFkZXJFeHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24oZSl7Zm9yKHZhciBuPTA7bjx0LmhlYWRlckV4dGVuc2lvbnMubGVuZ3RoO24rKyl7dmFyIGE9dC5oZWFkZXJFeHRlbnNpb25zW25dO2lmKGUudXJpPT09YS51cmkpe3IuaGVhZGVyRXh0ZW5zaW9ucy5wdXNoKGEpO2JyZWFrfX19KSxyfWZ1bmN0aW9uIGkoZSx0LHIpe3JldHVybi0xIT09e29mZmVyOntzZXRMb2NhbERlc2NyaXB0aW9uOltcInN0YWJsZVwiLFwiaGF2ZS1sb2NhbC1vZmZlclwiXSxzZXRSZW1vdGVEZXNjcmlwdGlvbjpbXCJzdGFibGVcIixcImhhdmUtcmVtb3RlLW9mZmVyXCJdfSxhbnN3ZXI6e3NldExvY2FsRGVzY3JpcHRpb246W1wiaGF2ZS1yZW1vdGUtb2ZmZXJcIixcImhhdmUtbG9jYWwtcHJhbnN3ZXJcIl0sc2V0UmVtb3RlRGVzY3JpcHRpb246W1wiaGF2ZS1sb2NhbC1vZmZlclwiLFwiaGF2ZS1yZW1vdGUtcHJhbnN3ZXJcIl19fVt0XVtlXS5pbmRleE9mKHIpfWZ1bmN0aW9uIHMoZSx0KXt2YXIgcj1lLmdldFJlbW90ZUNhbmRpZGF0ZXMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiB0LmZvdW5kYXRpb249PT1lLmZvdW5kYXRpb24mJnQuaXA9PT1lLmlwJiZ0LnBvcnQ9PT1lLnBvcnQmJnQucHJpb3JpdHk9PT1lLnByaW9yaXR5JiZ0LnByb3RvY29sPT09ZS5wcm90b2NvbCYmdC50eXBlPT09ZS50eXBlfSk7cmV0dXJuIHJ8fGUuYWRkUmVtb3RlQ2FuZGlkYXRlKHQpLCFyfWZ1bmN0aW9uIG8oZSx0KXt2YXIgcj1uZXcgRXJyb3IodCk7cmV0dXJuIHIubmFtZT1lLHIuY29kZT17Tm90U3VwcG9ydGVkRXJyb3I6OSxJbnZhbGlkU3RhdGVFcnJvcjoxMSxJbnZhbGlkQWNjZXNzRXJyb3I6MTUsVHlwZUVycm9yOnZvaWQgMCxPcGVyYXRpb25FcnJvcjp2b2lkIDB9W2VdLHJ9bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oYyxkKXtmdW5jdGlvbiBwKGUsdCl7dC5hZGRUcmFjayhlKSx0LmRpc3BhdGNoRXZlbnQobmV3IGMuTWVkaWFTdHJlYW1UcmFja0V2ZW50KFwiYWRkdHJhY2tcIix7dHJhY2s6ZX0pKX1mdW5jdGlvbiBsKGUsdCxyLG4pe3ZhciBhPW5ldyBFdmVudChcInRyYWNrXCIpO2EudHJhY2s9dCxhLnJlY2VpdmVyPXIsYS50cmFuc2NlaXZlcj17cmVjZWl2ZXI6cn0sYS5zdHJlYW1zPW4sYy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5fZGlzcGF0Y2hFdmVudChcInRyYWNrXCIsYSl9KX12YXIgZj1mdW5jdGlvbih0KXt2YXIgcj10aGlzLGE9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2lmKFtcImFkZEV2ZW50TGlzdGVuZXJcIixcInJlbW92ZUV2ZW50TGlzdGVuZXJcIixcImRpc3BhdGNoRXZlbnRcIl0uZm9yRWFjaChmdW5jdGlvbihlKXtyW2VdPWFbZV0uYmluZChhKX0pLHRoaXMuY2FuVHJpY2tsZUljZUNhbmRpZGF0ZXM9bnVsbCx0aGlzLm5lZWROZWdvdGlhdGlvbj0hMSx0aGlzLmxvY2FsU3RyZWFtcz1bXSx0aGlzLnJlbW90ZVN0cmVhbXM9W10sdGhpcy5fbG9jYWxEZXNjcmlwdGlvbj1udWxsLHRoaXMuX3JlbW90ZURlc2NyaXB0aW9uPW51bGwsdGhpcy5zaWduYWxpbmdTdGF0ZT1cInN0YWJsZVwiLHRoaXMuaWNlQ29ubmVjdGlvblN0YXRlPVwibmV3XCIsdGhpcy5jb25uZWN0aW9uU3RhdGU9XCJuZXdcIix0aGlzLmljZUdhdGhlcmluZ1N0YXRlPVwibmV3XCIsdD1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHR8fHt9KSksdGhpcy51c2luZ0J1bmRsZT1cIm1heC1idW5kbGVcIj09PXQuYnVuZGxlUG9saWN5LFwibmVnb3RpYXRlXCI9PT10LnJ0Y3BNdXhQb2xpY3kpdGhyb3cgbyhcIk5vdFN1cHBvcnRlZEVycm9yXCIsXCJydGNwTXV4UG9saWN5ICduZWdvdGlhdGUnIGlzIG5vdCBzdXBwb3J0ZWRcIik7c3dpdGNoKHQucnRjcE11eFBvbGljeXx8KHQucnRjcE11eFBvbGljeT1cInJlcXVpcmVcIiksdC5pY2VUcmFuc3BvcnRQb2xpY3kpe2Nhc2VcImFsbFwiOmNhc2VcInJlbGF5XCI6YnJlYWs7ZGVmYXVsdDp0LmljZVRyYW5zcG9ydFBvbGljeT1cImFsbFwifXN3aXRjaCh0LmJ1bmRsZVBvbGljeSl7Y2FzZVwiYmFsYW5jZWRcIjpjYXNlXCJtYXgtY29tcGF0XCI6Y2FzZVwibWF4LWJ1bmRsZVwiOmJyZWFrO2RlZmF1bHQ6dC5idW5kbGVQb2xpY3k9XCJiYWxhbmNlZFwifWlmKHQuaWNlU2VydmVycz1uKHQuaWNlU2VydmVyc3x8W10sZCksdGhpcy5faWNlR2F0aGVyZXJzPVtdLHQuaWNlQ2FuZGlkYXRlUG9vbFNpemUpZm9yKHZhciBpPXQuaWNlQ2FuZGlkYXRlUG9vbFNpemU7aT4wO2ktLSl0aGlzLl9pY2VHYXRoZXJlcnMucHVzaChuZXcgYy5SVENJY2VHYXRoZXJlcih7aWNlU2VydmVyczp0LmljZVNlcnZlcnMsZ2F0aGVyUG9saWN5OnQuaWNlVHJhbnNwb3J0UG9saWN5fSkpO2Vsc2UgdC5pY2VDYW5kaWRhdGVQb29sU2l6ZT0wO3RoaXMuX2NvbmZpZz10LHRoaXMudHJhbnNjZWl2ZXJzPVtdLHRoaXMuX3NkcFNlc3Npb25JZD1lLmdlbmVyYXRlU2Vzc2lvbklkKCksdGhpcy5fc2RwU2Vzc2lvblZlcnNpb249MCx0aGlzLl9kdGxzUm9sZT12b2lkIDAsdGhpcy5faXNDbG9zZWQ9ITF9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShmLnByb3RvdHlwZSxcImxvY2FsRGVzY3JpcHRpb25cIix7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2NhbERlc2NyaXB0aW9ufX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLnByb3RvdHlwZSxcInJlbW90ZURlc2NyaXB0aW9uXCIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVtb3RlRGVzY3JpcHRpb259fSksZi5wcm90b3R5cGUub25pY2VjYW5kaWRhdGU9bnVsbCxmLnByb3RvdHlwZS5vbmFkZHN0cmVhbT1udWxsLGYucHJvdG90eXBlLm9udHJhY2s9bnVsbCxmLnByb3RvdHlwZS5vbnJlbW92ZXN0cmVhbT1udWxsLGYucHJvdG90eXBlLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2U9bnVsbCxmLnByb3RvdHlwZS5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZT1udWxsLGYucHJvdG90eXBlLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlPW51bGwsZi5wcm90b3R5cGUub25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZT1udWxsLGYucHJvdG90eXBlLm9ubmVnb3RpYXRpb25uZWVkZWQ9bnVsbCxmLnByb3RvdHlwZS5vbmRhdGFjaGFubmVsPW51bGwsZi5wcm90b3R5cGUuX2Rpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24oZSx0KXt0aGlzLl9pc0Nsb3NlZHx8KHRoaXMuZGlzcGF0Y2hFdmVudCh0KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzW1wib25cIitlXSYmdGhpc1tcIm9uXCIrZV0odCkpfSxmLnByb3RvdHlwZS5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IEV2ZW50KFwiaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2VcIik7dGhpcy5fZGlzcGF0Y2hFdmVudChcImljZWdhdGhlcmluZ3N0YXRlY2hhbmdlXCIsZSl9LGYucHJvdG90eXBlLmdldENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29uZmlnfSxmLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2NhbFN0cmVhbXN9LGYucHJvdG90eXBlLmdldFJlbW90ZVN0cmVhbXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW1vdGVTdHJlYW1zfSxmLnByb3RvdHlwZS5fY3JlYXRlVHJhbnNjZWl2ZXI9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLnRyYW5zY2VpdmVycy5sZW5ndGg+MCxuPXt0cmFjazpudWxsLGljZUdhdGhlcmVyOm51bGwsaWNlVHJhbnNwb3J0Om51bGwsZHRsc1RyYW5zcG9ydDpudWxsLGxvY2FsQ2FwYWJpbGl0aWVzOm51bGwscmVtb3RlQ2FwYWJpbGl0aWVzOm51bGwscnRwU2VuZGVyOm51bGwscnRwUmVjZWl2ZXI6bnVsbCxraW5kOmUsbWlkOm51bGwsc2VuZEVuY29kaW5nUGFyYW1ldGVyczpudWxsLHJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM6bnVsbCxzdHJlYW06bnVsbCxhc3NvY2lhdGVkUmVtb3RlTWVkaWFTdHJlYW1zOltdLHdhbnRSZWNlaXZlOiEwfTtpZih0aGlzLnVzaW5nQnVuZGxlJiZyKW4uaWNlVHJhbnNwb3J0PXRoaXMudHJhbnNjZWl2ZXJzWzBdLmljZVRyYW5zcG9ydCxuLmR0bHNUcmFuc3BvcnQ9dGhpcy50cmFuc2NlaXZlcnNbMF0uZHRsc1RyYW5zcG9ydDtlbHNle3ZhciBhPXRoaXMuX2NyZWF0ZUljZUFuZER0bHNUcmFuc3BvcnRzKCk7bi5pY2VUcmFuc3BvcnQ9YS5pY2VUcmFuc3BvcnQsbi5kdGxzVHJhbnNwb3J0PWEuZHRsc1RyYW5zcG9ydH1yZXR1cm4gdHx8dGhpcy50cmFuc2NlaXZlcnMucHVzaChuKSxufSxmLnByb3RvdHlwZS5hZGRUcmFjaz1mdW5jdGlvbihlLHQpe2lmKHRoaXMuX2lzQ2xvc2VkKXRocm93IG8oXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQXR0ZW1wdGVkIHRvIGNhbGwgYWRkVHJhY2sgb24gYSBjbG9zZWQgcGVlcmNvbm5lY3Rpb24uXCIpO3ZhciByO2lmKHRoaXMudHJhbnNjZWl2ZXJzLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJhY2s9PT1lfSkpdGhyb3cgbyhcIkludmFsaWRBY2Nlc3NFcnJvclwiLFwiVHJhY2sgYWxyZWFkeSBleGlzdHMuXCIpO2Zvcih2YXIgbj0wO248dGhpcy50cmFuc2NlaXZlcnMubGVuZ3RoO24rKyl0aGlzLnRyYW5zY2VpdmVyc1tuXS50cmFja3x8dGhpcy50cmFuc2NlaXZlcnNbbl0ua2luZCE9PWUua2luZHx8KHI9dGhpcy50cmFuc2NlaXZlcnNbbl0pO3JldHVybiByfHwocj10aGlzLl9jcmVhdGVUcmFuc2NlaXZlcihlLmtpbmQpKSx0aGlzLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCgpLC0xPT09dGhpcy5sb2NhbFN0cmVhbXMuaW5kZXhPZih0KSYmdGhpcy5sb2NhbFN0cmVhbXMucHVzaCh0KSxyLnRyYWNrPWUsci5zdHJlYW09dCxyLnJ0cFNlbmRlcj1uZXcgYy5SVENSdHBTZW5kZXIoZSxyLmR0bHNUcmFuc3BvcnQpLHIucnRwU2VuZGVyfSxmLnByb3RvdHlwZS5hZGRTdHJlYW09ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZihkPj0xNTAyNSllLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24ocil7dC5hZGRUcmFjayhyLGUpfSk7ZWxzZXt2YXIgcj1lLmNsb25lKCk7ZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7dmFyIG49ci5nZXRUcmFja3MoKVt0XTtlLmFkZEV2ZW50TGlzdGVuZXIoXCJlbmFibGVkXCIsZnVuY3Rpb24oZSl7bi5lbmFibGVkPWUuZW5hYmxlZH0pfSksci5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuYWRkVHJhY2soZSxyKX0pfX0sZi5wcm90b3R5cGUucmVtb3ZlVHJhY2s9ZnVuY3Rpb24oZSl7aWYodGhpcy5faXNDbG9zZWQpdGhyb3cgbyhcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJBdHRlbXB0ZWQgdG8gY2FsbCByZW1vdmVUcmFjayBvbiBhIGNsb3NlZCBwZWVyY29ubmVjdGlvbi5cIik7aWYoIShlIGluc3RhbmNlb2YgYy5SVENSdHBTZW5kZXIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJBcmd1bWVudCAxIG9mIFJUQ1BlZXJDb25uZWN0aW9uLnJlbW92ZVRyYWNrIGRvZXMgbm90IGltcGxlbWVudCBpbnRlcmZhY2UgUlRDUnRwU2VuZGVyLlwiKTt2YXIgdD10aGlzLnRyYW5zY2VpdmVycy5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0LnJ0cFNlbmRlcj09PWV9KTtpZighdCl0aHJvdyBvKFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIsXCJTZW5kZXIgd2FzIG5vdCBjcmVhdGVkIGJ5IHRoaXMgY29ubmVjdGlvbi5cIik7dmFyIHI9dC5zdHJlYW07dC5ydHBTZW5kZXIuc3RvcCgpLHQucnRwU2VuZGVyPW51bGwsdC50cmFjaz1udWxsLHQuc3RyZWFtPW51bGwsLTE9PT10aGlzLnRyYW5zY2VpdmVycy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RyZWFtfSkuaW5kZXhPZihyKSYmdGhpcy5sb2NhbFN0cmVhbXMuaW5kZXhPZihyKT4tMSYmdGhpcy5sb2NhbFN0cmVhbXMuc3BsaWNlKHRoaXMubG9jYWxTdHJlYW1zLmluZGV4T2YociksMSksdGhpcy5fbWF5YmVGaXJlTmVnb3RpYXRpb25OZWVkZWQoKX0sZi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciByPXQuZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJhY2s9PT1lfSk7ciYmdC5yZW1vdmVUcmFjayhyKX0pfSxmLnByb3RvdHlwZS5nZXRTZW5kZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hIWUucnRwU2VuZGVyfSkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnJ0cFNlbmRlcn0pfSxmLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFuc2NlaXZlcnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiEhZS5ydHBSZWNlaXZlcn0pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5ydHBSZWNlaXZlcn0pfSxmLnByb3RvdHlwZS5fY3JlYXRlSWNlR2F0aGVyZXI9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHQmJmU+MClyZXR1cm4gdGhpcy50cmFuc2NlaXZlcnNbMF0uaWNlR2F0aGVyZXI7aWYodGhpcy5faWNlR2F0aGVyZXJzLmxlbmd0aClyZXR1cm4gdGhpcy5faWNlR2F0aGVyZXJzLnNoaWZ0KCk7dmFyIG49bmV3IGMuUlRDSWNlR2F0aGVyZXIoe2ljZVNlcnZlcnM6dGhpcy5fY29uZmlnLmljZVNlcnZlcnMsZ2F0aGVyUG9saWN5OnRoaXMuX2NvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3l9KTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJzdGF0ZVwiLHt2YWx1ZTpcIm5ld1wiLHdyaXRhYmxlOiEwfSksdGhpcy50cmFuc2NlaXZlcnNbZV0uYnVmZmVyZWRDYW5kaWRhdGVFdmVudHM9W10sdGhpcy50cmFuc2NlaXZlcnNbZV0uYnVmZmVyQ2FuZGlkYXRlcz1mdW5jdGlvbih0KXt2YXIgYT0hdC5jYW5kaWRhdGV8fDA9PT1PYmplY3Qua2V5cyh0LmNhbmRpZGF0ZSkubGVuZ3RoO24uc3RhdGU9YT9cImNvbXBsZXRlZFwiOlwiZ2F0aGVyaW5nXCIsbnVsbCE9PXIudHJhbnNjZWl2ZXJzW2VdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzJiZyLnRyYW5zY2VpdmVyc1tlXS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50cy5wdXNoKHQpfSxuLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2NhbGNhbmRpZGF0ZVwiLHRoaXMudHJhbnNjZWl2ZXJzW2VdLmJ1ZmZlckNhbmRpZGF0ZXMpLG59LGYucHJvdG90eXBlLl9nYXRoZXI9ZnVuY3Rpb24odCxyKXt2YXIgbj10aGlzLGE9dGhpcy50cmFuc2NlaXZlcnNbcl0uaWNlR2F0aGVyZXI7aWYoIWEub25sb2NhbGNhbmRpZGF0ZSl7dmFyIGk9dGhpcy50cmFuc2NlaXZlcnNbcl0uYnVmZmVyZWRDYW5kaWRhdGVFdmVudHM7dGhpcy50cmFuc2NlaXZlcnNbcl0uYnVmZmVyZWRDYW5kaWRhdGVFdmVudHM9bnVsbCxhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2NhbGNhbmRpZGF0ZVwiLHRoaXMudHJhbnNjZWl2ZXJzW3JdLmJ1ZmZlckNhbmRpZGF0ZXMpLGEub25sb2NhbGNhbmRpZGF0ZT1mdW5jdGlvbihpKXtpZighKG4udXNpbmdCdW5kbGUmJnI+MCkpe3ZhciBzPW5ldyBFdmVudChcImljZWNhbmRpZGF0ZVwiKTtzLmNhbmRpZGF0ZT17c2RwTWlkOnQsc2RwTUxpbmVJbmRleDpyfTt2YXIgbz1pLmNhbmRpZGF0ZSxjPSFvfHwwPT09T2JqZWN0LmtleXMobykubGVuZ3RoO2lmKGMpXCJuZXdcIiE9PWEuc3RhdGUmJlwiZ2F0aGVyaW5nXCIhPT1hLnN0YXRlfHwoYS5zdGF0ZT1cImNvbXBsZXRlZFwiKTtlbHNle1wibmV3XCI9PT1hLnN0YXRlJiYoYS5zdGF0ZT1cImdhdGhlcmluZ1wiKSxvLmNvbXBvbmVudD0xLG8udWZyYWc9YS5nZXRMb2NhbFBhcmFtZXRlcnMoKS51c2VybmFtZUZyYWdtZW50O3ZhciBkPWUud3JpdGVDYW5kaWRhdGUobyk7cy5jYW5kaWRhdGU9T2JqZWN0LmFzc2lnbihzLmNhbmRpZGF0ZSxlLnBhcnNlQ2FuZGlkYXRlKGQpKSxzLmNhbmRpZGF0ZS5jYW5kaWRhdGU9ZCxzLmNhbmRpZGF0ZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57Y2FuZGlkYXRlOnMuY2FuZGlkYXRlLmNhbmRpZGF0ZSxzZHBNaWQ6cy5jYW5kaWRhdGUuc2RwTWlkLHNkcE1MaW5lSW5kZXg6cy5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleCx1c2VybmFtZUZyYWdtZW50OnMuY2FuZGlkYXRlLnVzZXJuYW1lRnJhZ21lbnR9fX12YXIgcD1lLmdldE1lZGlhU2VjdGlvbnMobi5fbG9jYWxEZXNjcmlwdGlvbi5zZHApO3Bbcy5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleF0rPWM/XCJhPWVuZC1vZi1jYW5kaWRhdGVzXFxyXFxuXCI6XCJhPVwiK3MuY2FuZGlkYXRlLmNhbmRpZGF0ZStcIlxcclxcblwiLG4uX2xvY2FsRGVzY3JpcHRpb24uc2RwPWUuZ2V0RGVzY3JpcHRpb24obi5fbG9jYWxEZXNjcmlwdGlvbi5zZHApK3Auam9pbihcIlwiKTt2YXIgbD1uLnRyYW5zY2VpdmVycy5ldmVyeShmdW5jdGlvbihlKXtyZXR1cm4gZS5pY2VHYXRoZXJlciYmXCJjb21wbGV0ZWRcIj09PWUuaWNlR2F0aGVyZXIuc3RhdGV9KTtcImdhdGhlcmluZ1wiIT09bi5pY2VHYXRoZXJpbmdTdGF0ZSYmKG4uaWNlR2F0aGVyaW5nU3RhdGU9XCJnYXRoZXJpbmdcIixuLl9lbWl0R2F0aGVyaW5nU3RhdGVDaGFuZ2UoKSksY3x8bi5fZGlzcGF0Y2hFdmVudChcImljZWNhbmRpZGF0ZVwiLHMpLGwmJihuLl9kaXNwYXRjaEV2ZW50KFwiaWNlY2FuZGlkYXRlXCIsbmV3IEV2ZW50KFwiaWNlY2FuZGlkYXRlXCIpKSxuLmljZUdhdGhlcmluZ1N0YXRlPVwiY29tcGxldGVcIixuLl9lbWl0R2F0aGVyaW5nU3RhdGVDaGFuZ2UoKSl9fSxjLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLmZvckVhY2goZnVuY3Rpb24oZSl7YS5vbmxvY2FsY2FuZGlkYXRlKGUpfSl9LDApfX0sZi5wcm90b3R5cGUuX2NyZWF0ZUljZUFuZER0bHNUcmFuc3BvcnRzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PW5ldyBjLlJUQ0ljZVRyYW5zcG9ydChudWxsKTt0Lm9uaWNlc3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtlLl91cGRhdGVJY2VDb25uZWN0aW9uU3RhdGUoKSxlLl91cGRhdGVDb25uZWN0aW9uU3RhdGUoKX07dmFyIHI9bmV3IGMuUlRDRHRsc1RyYW5zcG9ydCh0KTtyZXR1cm4gci5vbmR0bHNzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2UuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZSgpfSxyLm9uZXJyb3I9ZnVuY3Rpb24oKXtPYmplY3QuZGVmaW5lUHJvcGVydHkocixcInN0YXRlXCIse3ZhbHVlOlwiZmFpbGVkXCIsd3JpdGFibGU6ITB9KSxlLl91cGRhdGVDb25uZWN0aW9uU3RhdGUoKX0se2ljZVRyYW5zcG9ydDp0LGR0bHNUcmFuc3BvcnQ6cn19LGYucHJvdG90eXBlLl9kaXNwb3NlSWNlQW5kRHRsc1RyYW5zcG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy50cmFuc2NlaXZlcnNbZV0uaWNlR2F0aGVyZXI7dCYmKGRlbGV0ZSB0Lm9ubG9jYWxjYW5kaWRhdGUsZGVsZXRlIHRoaXMudHJhbnNjZWl2ZXJzW2VdLmljZUdhdGhlcmVyKTt2YXIgcj10aGlzLnRyYW5zY2VpdmVyc1tlXS5pY2VUcmFuc3BvcnQ7ciYmKGRlbGV0ZSByLm9uaWNlc3RhdGVjaGFuZ2UsZGVsZXRlIHRoaXMudHJhbnNjZWl2ZXJzW2VdLmljZVRyYW5zcG9ydCk7dmFyIG49dGhpcy50cmFuc2NlaXZlcnNbZV0uZHRsc1RyYW5zcG9ydDtuJiYoZGVsZXRlIG4ub25kdGxzc3RhdGVjaGFuZ2UsZGVsZXRlIG4ub25lcnJvcixkZWxldGUgdGhpcy50cmFuc2NlaXZlcnNbZV0uZHRsc1RyYW5zcG9ydCl9LGYucHJvdG90eXBlLl90cmFuc2NlaXZlPWZ1bmN0aW9uKHQscixuKXt2YXIgaT1hKHQubG9jYWxDYXBhYmlsaXRpZXMsdC5yZW1vdGVDYXBhYmlsaXRpZXMpO3ImJnQucnRwU2VuZGVyJiYoaS5lbmNvZGluZ3M9dC5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzLGkucnRjcD17Y25hbWU6ZS5sb2NhbENOYW1lLGNvbXBvdW5kOnQucnRjcFBhcmFtZXRlcnMuY29tcG91bmR9LHQucmVjdkVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGgmJihpLnJ0Y3Auc3NyYz10LnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyksdC5ydHBTZW5kZXIuc2VuZChpKSksbiYmdC5ydHBSZWNlaXZlciYmaS5jb2RlY3MubGVuZ3RoPjAmJihcInZpZGVvXCI9PT10LmtpbmQmJnQucmVjdkVuY29kaW5nUGFyYW1ldGVycyYmZDwxNTAxOSYmdC5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7ZGVsZXRlIGUucnR4fSksdC5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzLmxlbmd0aD9pLmVuY29kaW5ncz10LnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM6aS5lbmNvZGluZ3M9W3t9XSxpLnJ0Y3A9e2NvbXBvdW5kOnQucnRjcFBhcmFtZXRlcnMuY29tcG91bmR9LHQucnRjcFBhcmFtZXRlcnMuY25hbWUmJihpLnJ0Y3AuY25hbWU9dC5ydGNwUGFyYW1ldGVycy5jbmFtZSksdC5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzLmxlbmd0aCYmKGkucnRjcC5zc3JjPXQuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjKSx0LnJ0cFJlY2VpdmVyLnJlY2VpdmUoaSkpfSxmLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uPWZ1bmN0aW9uKHQpe3ZhciByLG4scz10aGlzO2lmKC0xPT09W1wib2ZmZXJcIixcImFuc3dlclwiXS5pbmRleE9mKHQudHlwZSkpcmV0dXJuIFByb21pc2UucmVqZWN0KG8oXCJUeXBlRXJyb3JcIiwnVW5zdXBwb3J0ZWQgdHlwZSBcIicrdC50eXBlKydcIicpKTtpZighaShcInNldExvY2FsRGVzY3JpcHRpb25cIix0LnR5cGUscy5zaWduYWxpbmdTdGF0ZSl8fHMuX2lzQ2xvc2VkKXJldHVybiBQcm9taXNlLnJlamVjdChvKFwiSW52YWxpZFN0YXRlRXJyb3JcIixcIkNhbiBub3Qgc2V0IGxvY2FsIFwiK3QudHlwZStcIiBpbiBzdGF0ZSBcIitzLnNpZ25hbGluZ1N0YXRlKSk7aWYoXCJvZmZlclwiPT09dC50eXBlKXI9ZS5zcGxpdFNlY3Rpb25zKHQuc2RwKSxuPXIuc2hpZnQoKSxyLmZvckVhY2goZnVuY3Rpb24odCxyKXt2YXIgbj1lLnBhcnNlUnRwUGFyYW1ldGVycyh0KTtzLnRyYW5zY2VpdmVyc1tyXS5sb2NhbENhcGFiaWxpdGllcz1ufSkscy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbihlLHQpe3MuX2dhdGhlcihlLm1pZCx0KX0pO2Vsc2UgaWYoXCJhbnN3ZXJcIj09PXQudHlwZSl7cj1lLnNwbGl0U2VjdGlvbnMocy5fcmVtb3RlRGVzY3JpcHRpb24uc2RwKSxuPXIuc2hpZnQoKTt2YXIgYz1lLm1hdGNoUHJlZml4KG4sXCJhPWljZS1saXRlXCIpLmxlbmd0aD4wO3IuZm9yRWFjaChmdW5jdGlvbih0LHIpe3ZhciBpPXMudHJhbnNjZWl2ZXJzW3JdLG89aS5pY2VHYXRoZXJlcixkPWkuaWNlVHJhbnNwb3J0LHA9aS5kdGxzVHJhbnNwb3J0LGw9aS5sb2NhbENhcGFiaWxpdGllcyxmPWkucmVtb3RlQ2FwYWJpbGl0aWVzO2lmKCEoZS5pc1JlamVjdGVkKHQpJiYwPT09ZS5tYXRjaFByZWZpeCh0LFwiYT1idW5kbGUtb25seVwiKS5sZW5ndGgpJiYhaS5yZWplY3RlZCl7dmFyIHU9ZS5nZXRJY2VQYXJhbWV0ZXJzKHQsbiksdj1lLmdldER0bHNQYXJhbWV0ZXJzKHQsbik7YyYmKHYucm9sZT1cInNlcnZlclwiKSxzLnVzaW5nQnVuZGxlJiYwIT09cnx8KHMuX2dhdGhlcihpLm1pZCxyKSxcIm5ld1wiPT09ZC5zdGF0ZSYmZC5zdGFydChvLHUsYz9cImNvbnRyb2xsaW5nXCI6XCJjb250cm9sbGVkXCIpLFwibmV3XCI9PT1wLnN0YXRlJiZwLnN0YXJ0KHYpKTt2YXIgaD1hKGwsZik7cy5fdHJhbnNjZWl2ZShpLGguY29kZWNzLmxlbmd0aD4wLCExKX19KX1yZXR1cm4gcy5fbG9jYWxEZXNjcmlwdGlvbj17dHlwZTp0LnR5cGUsc2RwOnQuc2RwfSxcIm9mZmVyXCI9PT10LnR5cGU/cy5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoXCJoYXZlLWxvY2FsLW9mZmVyXCIpOnMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKFwic3RhYmxlXCIpLFByb21pc2UucmVzb2x2ZSgpfSxmLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbj1mdW5jdGlvbih0KXt2YXIgcj10aGlzO2lmKC0xPT09W1wib2ZmZXJcIixcImFuc3dlclwiXS5pbmRleE9mKHQudHlwZSkpcmV0dXJuIFByb21pc2UucmVqZWN0KG8oXCJUeXBlRXJyb3JcIiwnVW5zdXBwb3J0ZWQgdHlwZSBcIicrdC50eXBlKydcIicpKTtpZighaShcInNldFJlbW90ZURlc2NyaXB0aW9uXCIsdC50eXBlLHIuc2lnbmFsaW5nU3RhdGUpfHxyLl9pc0Nsb3NlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobyhcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IHNldCByZW1vdGUgXCIrdC50eXBlK1wiIGluIHN0YXRlIFwiK3Iuc2lnbmFsaW5nU3RhdGUpKTt2YXIgbj17fTtyLnJlbW90ZVN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbihlKXtuW2UuaWRdPWV9KTt2YXIgZj1bXSx1PWUuc3BsaXRTZWN0aW9ucyh0LnNkcCksdj11LnNoaWZ0KCksaD1lLm1hdGNoUHJlZml4KHYsXCJhPWljZS1saXRlXCIpLmxlbmd0aD4wLG09ZS5tYXRjaFByZWZpeCh2LFwiYT1ncm91cDpCVU5ETEUgXCIpLmxlbmd0aD4wO3IudXNpbmdCdW5kbGU9bTt2YXIgZz1lLm1hdGNoUHJlZml4KHYsXCJhPWljZS1vcHRpb25zOlwiKVswXTtyZXR1cm4gci5jYW5Ucmlja2xlSWNlQ2FuZGlkYXRlcz0hIWcmJmcuc3Vic3RyKDE0KS5zcGxpdChcIiBcIikuaW5kZXhPZihcInRyaWNrbGVcIik+PTAsdS5mb3JFYWNoKGZ1bmN0aW9uKGksbyl7dmFyIGw9ZS5zcGxpdExpbmVzKGkpLHU9ZS5nZXRLaW5kKGkpLGc9ZS5pc1JlamVjdGVkKGkpJiYwPT09ZS5tYXRjaFByZWZpeChpLFwiYT1idW5kbGUtb25seVwiKS5sZW5ndGgseT1sWzBdLnN1YnN0cigyKS5zcGxpdChcIiBcIilbMl0sUz1lLmdldERpcmVjdGlvbihpLHYpLFQ9ZS5wYXJzZU1zaWQoaSksRT1lLmdldE1pZChpKXx8ZS5nZW5lcmF0ZUlkZW50aWZpZXIoKTtpZihnfHxcImFwcGxpY2F0aW9uXCI9PT11JiYoXCJEVExTL1NDVFBcIj09PXl8fFwiVURQL0RUTFMvU0NUUFwiPT09eSkpci50cmFuc2NlaXZlcnNbb109e21pZDpFLGtpbmQ6dSxwcm90b2NvbDp5LHJlamVjdGVkOiEwfTtlbHNle3ZhciBDLFAsdyxSLF8sayxiLHgsRDshZyYmci50cmFuc2NlaXZlcnNbb10mJnIudHJhbnNjZWl2ZXJzW29dLnJlamVjdGVkJiYoci50cmFuc2NlaXZlcnNbb109ci5fY3JlYXRlVHJhbnNjZWl2ZXIodSwhMCkpO3ZhciBJLEwsTT1lLnBhcnNlUnRwUGFyYW1ldGVycyhpKTtnfHwoST1lLmdldEljZVBhcmFtZXRlcnMoaSx2KSwoTD1lLmdldER0bHNQYXJhbWV0ZXJzKGksdikpLnJvbGU9XCJjbGllbnRcIiksYj1lLnBhcnNlUnRwRW5jb2RpbmdQYXJhbWV0ZXJzKGkpO3ZhciBPPWUucGFyc2VSdGNwUGFyYW1ldGVycyhpKSxHPWUubWF0Y2hQcmVmaXgoaSxcImE9ZW5kLW9mLWNhbmRpZGF0ZXNcIix2KS5sZW5ndGg+MCxqPWUubWF0Y2hQcmVmaXgoaSxcImE9Y2FuZGlkYXRlOlwiKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGUucGFyc2VDYW5kaWRhdGUodCl9KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLmNvbXBvbmVudH0pO2lmKChcIm9mZmVyXCI9PT10LnR5cGV8fFwiYW5zd2VyXCI9PT10LnR5cGUpJiYhZyYmbSYmbz4wJiZyLnRyYW5zY2VpdmVyc1tvXSYmKHIuX2Rpc3Bvc2VJY2VBbmREdGxzVHJhbnNwb3J0cyhvKSxyLnRyYW5zY2VpdmVyc1tvXS5pY2VHYXRoZXJlcj1yLnRyYW5zY2VpdmVyc1swXS5pY2VHYXRoZXJlcixyLnRyYW5zY2VpdmVyc1tvXS5pY2VUcmFuc3BvcnQ9ci50cmFuc2NlaXZlcnNbMF0uaWNlVHJhbnNwb3J0LHIudHJhbnNjZWl2ZXJzW29dLmR0bHNUcmFuc3BvcnQ9ci50cmFuc2NlaXZlcnNbMF0uZHRsc1RyYW5zcG9ydCxyLnRyYW5zY2VpdmVyc1tvXS5ydHBTZW5kZXImJnIudHJhbnNjZWl2ZXJzW29dLnJ0cFNlbmRlci5zZXRUcmFuc3BvcnQoci50cmFuc2NlaXZlcnNbMF0uZHRsc1RyYW5zcG9ydCksci50cmFuc2NlaXZlcnNbb10ucnRwUmVjZWl2ZXImJnIudHJhbnNjZWl2ZXJzW29dLnJ0cFJlY2VpdmVyLnNldFRyYW5zcG9ydChyLnRyYW5zY2VpdmVyc1swXS5kdGxzVHJhbnNwb3J0KSksXCJvZmZlclwiIT09dC50eXBlfHxnKXtpZihcImFuc3dlclwiPT09dC50eXBlJiYhZyl7UD0oQz1yLnRyYW5zY2VpdmVyc1tvXSkuaWNlR2F0aGVyZXIsdz1DLmljZVRyYW5zcG9ydCxSPUMuZHRsc1RyYW5zcG9ydCxfPUMucnRwUmVjZWl2ZXIsaz1DLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnMseD1DLmxvY2FsQ2FwYWJpbGl0aWVzLHIudHJhbnNjZWl2ZXJzW29dLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM9YixyLnRyYW5zY2VpdmVyc1tvXS5yZW1vdGVDYXBhYmlsaXRpZXM9TSxyLnRyYW5zY2VpdmVyc1tvXS5ydGNwUGFyYW1ldGVycz1PLGoubGVuZ3RoJiZcIm5ld1wiPT09dy5zdGF0ZSYmKCFoJiYhR3x8bSYmMCE9PW8/ai5mb3JFYWNoKGZ1bmN0aW9uKGUpe3MoQy5pY2VUcmFuc3BvcnQsZSl9KTp3LnNldFJlbW90ZUNhbmRpZGF0ZXMoaikpLG0mJjAhPT1vfHwoXCJuZXdcIj09PXcuc3RhdGUmJncuc3RhcnQoUCxJLFwiY29udHJvbGxpbmdcIiksXCJuZXdcIj09PVIuc3RhdGUmJlIuc3RhcnQoTCkpLCFhKEMubG9jYWxDYXBhYmlsaXRpZXMsQy5yZW1vdGVDYXBhYmlsaXRpZXMpLmNvZGVjcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJydHhcIj09PWUubmFtZS50b0xvd2VyQ2FzZSgpfSkubGVuZ3RoJiZDLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4JiZkZWxldGUgQy5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCxyLl90cmFuc2NlaXZlKEMsXCJzZW5kcmVjdlwiPT09U3x8XCJyZWN2b25seVwiPT09UyxcInNlbmRyZWN2XCI9PT1TfHxcInNlbmRvbmx5XCI9PT1TKSwhX3x8XCJzZW5kcmVjdlwiIT09UyYmXCJzZW5kb25seVwiIT09Uz9kZWxldGUgQy5ydHBSZWNlaXZlcjooRD1fLnRyYWNrLFQ/KG5bVC5zdHJlYW1dfHwobltULnN0cmVhbV09bmV3IGMuTWVkaWFTdHJlYW0pLHAoRCxuW1Quc3RyZWFtXSksZi5wdXNoKFtELF8sbltULnN0cmVhbV1dKSk6KG4uZGVmYXVsdHx8KG4uZGVmYXVsdD1uZXcgYy5NZWRpYVN0cmVhbSkscChELG4uZGVmYXVsdCksZi5wdXNoKFtELF8sbi5kZWZhdWx0XSkpKX19ZWxzZXsoQz1yLnRyYW5zY2VpdmVyc1tvXXx8ci5fY3JlYXRlVHJhbnNjZWl2ZXIodSkpLm1pZD1FLEMuaWNlR2F0aGVyZXJ8fChDLmljZUdhdGhlcmVyPXIuX2NyZWF0ZUljZUdhdGhlcmVyKG8sbSkpLGoubGVuZ3RoJiZcIm5ld1wiPT09Qy5pY2VUcmFuc3BvcnQuc3RhdGUmJighR3x8bSYmMCE9PW8/ai5mb3JFYWNoKGZ1bmN0aW9uKGUpe3MoQy5pY2VUcmFuc3BvcnQsZSl9KTpDLmljZVRyYW5zcG9ydC5zZXRSZW1vdGVDYW5kaWRhdGVzKGopKSx4PWMuUlRDUnRwUmVjZWl2ZXIuZ2V0Q2FwYWJpbGl0aWVzKHUpLGQ8MTUwMTkmJih4LmNvZGVjcz14LmNvZGVjcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJydHhcIiE9PWUubmFtZX0pKSxrPUMuc2VuZEVuY29kaW5nUGFyYW1ldGVyc3x8W3tzc3JjOjEwMDEqKDIqbysyKX1dO3ZhciBOLEE9ITE7aWYoXCJzZW5kcmVjdlwiPT09U3x8XCJzZW5kb25seVwiPT09Uyl7aWYoQT0hQy5ydHBSZWNlaXZlcixfPUMucnRwUmVjZWl2ZXJ8fG5ldyBjLlJUQ1J0cFJlY2VpdmVyKEMuZHRsc1RyYW5zcG9ydCx1KSxBKUQ9Xy50cmFjayxUJiZcIi1cIj09PVQuc3RyZWFtfHwoVD8obltULnN0cmVhbV18fChuW1Quc3RyZWFtXT1uZXcgYy5NZWRpYVN0cmVhbSxPYmplY3QuZGVmaW5lUHJvcGVydHkobltULnN0cmVhbV0sXCJpZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gVC5zdHJlYW19fSkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShELFwiaWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFQudHJhY2t9fSksTj1uW1Quc3RyZWFtXSk6KG4uZGVmYXVsdHx8KG4uZGVmYXVsdD1uZXcgYy5NZWRpYVN0cmVhbSksTj1uLmRlZmF1bHQpKSxOJiYocChELE4pLEMuYXNzb2NpYXRlZFJlbW90ZU1lZGlhU3RyZWFtcy5wdXNoKE4pKSxmLnB1c2goW0QsXyxOXSl9ZWxzZSBDLnJ0cFJlY2VpdmVyJiZDLnJ0cFJlY2VpdmVyLnRyYWNrJiYoQy5hc3NvY2lhdGVkUmVtb3RlTWVkaWFTdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQscixuPWUuZ2V0VHJhY2tzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm4gZS5pZD09PUMucnRwUmVjZWl2ZXIudHJhY2suaWR9KTtuJiYodD1uLChyPWUpLnJlbW92ZVRyYWNrKHQpLHIuZGlzcGF0Y2hFdmVudChuZXcgYy5NZWRpYVN0cmVhbVRyYWNrRXZlbnQoXCJyZW1vdmV0cmFja1wiLHt0cmFjazp0fSkpKX0pLEMuYXNzb2NpYXRlZFJlbW90ZU1lZGlhU3RyZWFtcz1bXSk7Qy5sb2NhbENhcGFiaWxpdGllcz14LEMucmVtb3RlQ2FwYWJpbGl0aWVzPU0sQy5ydHBSZWNlaXZlcj1fLEMucnRjcFBhcmFtZXRlcnM9TyxDLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnM9ayxDLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM9YixyLl90cmFuc2NlaXZlKHIudHJhbnNjZWl2ZXJzW29dLCExLEEpfX19KSx2b2lkIDA9PT1yLl9kdGxzUm9sZSYmKHIuX2R0bHNSb2xlPVwib2ZmZXJcIj09PXQudHlwZT9cImFjdGl2ZVwiOlwicGFzc2l2ZVwiKSxyLl9yZW1vdGVEZXNjcmlwdGlvbj17dHlwZTp0LnR5cGUsc2RwOnQuc2RwfSxcIm9mZmVyXCI9PT10LnR5cGU/ci5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoXCJoYXZlLXJlbW90ZS1vZmZlclwiKTpyLl91cGRhdGVTaWduYWxpbmdTdGF0ZShcInN0YWJsZVwiKSxPYmplY3Qua2V5cyhuKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07aWYodC5nZXRUcmFja3MoKS5sZW5ndGgpe2lmKC0xPT09ci5yZW1vdGVTdHJlYW1zLmluZGV4T2YodCkpe3IucmVtb3RlU3RyZWFtcy5wdXNoKHQpO3ZhciBhPW5ldyBFdmVudChcImFkZHN0cmVhbVwiKTthLnN0cmVhbT10LGMuc2V0VGltZW91dChmdW5jdGlvbigpe3IuX2Rpc3BhdGNoRXZlbnQoXCJhZGRzdHJlYW1cIixhKX0pfWYuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj1lWzBdLGE9ZVsxXTt0LmlkPT09ZVsyXS5pZCYmbChyLG4sYSxbdF0pfSl9fSksZi5mb3JFYWNoKGZ1bmN0aW9uKGUpe2VbMl18fGwocixlWzBdLGVbMV0sW10pfSksYy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ciYmci50cmFuc2NlaXZlcnMmJnIudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5pY2VUcmFuc3BvcnQmJlwibmV3XCI9PT1lLmljZVRyYW5zcG9ydC5zdGF0ZSYmZS5pY2VUcmFuc3BvcnQuZ2V0UmVtb3RlQ2FuZGlkYXRlcygpLmxlbmd0aD4wJiYoY29uc29sZS53YXJuKFwiVGltZW91dCBmb3IgYWRkUmVtb3RlQ2FuZGlkYXRlLiBDb25zaWRlciBzZW5kaW5nIGFuIGVuZC1vZi1jYW5kaWRhdGVzIG5vdGlmaWNhdGlvblwiKSxlLmljZVRyYW5zcG9ydC5hZGRSZW1vdGVDYW5kaWRhdGUoe30pKX0pfSw0ZTMpLFByb21pc2UucmVzb2x2ZSgpfSxmLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3RoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5pY2VUcmFuc3BvcnQmJmUuaWNlVHJhbnNwb3J0LnN0b3AoKSxlLmR0bHNUcmFuc3BvcnQmJmUuZHRsc1RyYW5zcG9ydC5zdG9wKCksZS5ydHBTZW5kZXImJmUucnRwU2VuZGVyLnN0b3AoKSxlLnJ0cFJlY2VpdmVyJiZlLnJ0cFJlY2VpdmVyLnN0b3AoKX0pLHRoaXMuX2lzQ2xvc2VkPSEwLHRoaXMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKFwiY2xvc2VkXCIpfSxmLnByb3RvdHlwZS5fdXBkYXRlU2lnbmFsaW5nU3RhdGU9ZnVuY3Rpb24oZSl7dGhpcy5zaWduYWxpbmdTdGF0ZT1lO3ZhciB0PW5ldyBFdmVudChcInNpZ25hbGluZ3N0YXRlY2hhbmdlXCIpO3RoaXMuX2Rpc3BhdGNoRXZlbnQoXCJzaWduYWxpbmdzdGF0ZWNoYW5nZVwiLHQpfSxmLnByb3RvdHlwZS5fbWF5YmVGaXJlTmVnb3RpYXRpb25OZWVkZWQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO1wic3RhYmxlXCI9PT10aGlzLnNpZ25hbGluZ1N0YXRlJiYhMCE9PXRoaXMubmVlZE5lZ290aWF0aW9uJiYodGhpcy5uZWVkTmVnb3RpYXRpb249ITAsYy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoZS5uZWVkTmVnb3RpYXRpb24pe2UubmVlZE5lZ290aWF0aW9uPSExO3ZhciB0PW5ldyBFdmVudChcIm5lZ290aWF0aW9ubmVlZGVkXCIpO2UuX2Rpc3BhdGNoRXZlbnQoXCJuZWdvdGlhdGlvbm5lZWRlZFwiLHQpfX0sMCkpfSxmLnByb3RvdHlwZS5fdXBkYXRlSWNlQ29ubmVjdGlvblN0YXRlPWZ1bmN0aW9uKCl7dmFyIGUsdD17bmV3OjAsY2xvc2VkOjAsY2hlY2tpbmc6MCxjb25uZWN0ZWQ6MCxjb21wbGV0ZWQ6MCxkaXNjb25uZWN0ZWQ6MCxmYWlsZWQ6MH07aWYodGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLmljZVRyYW5zcG9ydCYmIWUucmVqZWN0ZWQmJnRbZS5pY2VUcmFuc3BvcnQuc3RhdGVdKyt9KSxlPVwibmV3XCIsdC5mYWlsZWQ+MD9lPVwiZmFpbGVkXCI6dC5jaGVja2luZz4wP2U9XCJjaGVja2luZ1wiOnQuZGlzY29ubmVjdGVkPjA/ZT1cImRpc2Nvbm5lY3RlZFwiOnQubmV3PjA/ZT1cIm5ld1wiOnQuY29ubmVjdGVkPjA/ZT1cImNvbm5lY3RlZFwiOnQuY29tcGxldGVkPjAmJihlPVwiY29tcGxldGVkXCIpLGUhPT10aGlzLmljZUNvbm5lY3Rpb25TdGF0ZSl7dGhpcy5pY2VDb25uZWN0aW9uU3RhdGU9ZTt2YXIgcj1uZXcgRXZlbnQoXCJpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIik7dGhpcy5fZGlzcGF0Y2hFdmVudChcImljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHIpfX0sZi5wcm90b3R5cGUuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZT1mdW5jdGlvbigpe3ZhciBlLHQ9e25ldzowLGNsb3NlZDowLGNvbm5lY3Rpbmc6MCxjb25uZWN0ZWQ6MCxjb21wbGV0ZWQ6MCxkaXNjb25uZWN0ZWQ6MCxmYWlsZWQ6MH07aWYodGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLmljZVRyYW5zcG9ydCYmZS5kdGxzVHJhbnNwb3J0JiYhZS5yZWplY3RlZCYmKHRbZS5pY2VUcmFuc3BvcnQuc3RhdGVdKyssdFtlLmR0bHNUcmFuc3BvcnQuc3RhdGVdKyspfSksdC5jb25uZWN0ZWQrPXQuY29tcGxldGVkLGU9XCJuZXdcIix0LmZhaWxlZD4wP2U9XCJmYWlsZWRcIjp0LmNvbm5lY3Rpbmc+MD9lPVwiY29ubmVjdGluZ1wiOnQuZGlzY29ubmVjdGVkPjA/ZT1cImRpc2Nvbm5lY3RlZFwiOnQubmV3PjA/ZT1cIm5ld1wiOnQuY29ubmVjdGVkPjAmJihlPVwiY29ubmVjdGVkXCIpLGUhPT10aGlzLmNvbm5lY3Rpb25TdGF0ZSl7dGhpcy5jb25uZWN0aW9uU3RhdGU9ZTt2YXIgcj1uZXcgRXZlbnQoXCJjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIik7dGhpcy5fZGlzcGF0Y2hFdmVudChcImNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHIpfX0sZi5wcm90b3R5cGUuY3JlYXRlT2ZmZXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHQuX2lzQ2xvc2VkKXJldHVybiBQcm9taXNlLnJlamVjdChvKFwiSW52YWxpZFN0YXRlRXJyb3JcIixcIkNhbiBub3QgY2FsbCBjcmVhdGVPZmZlciBhZnRlciBjbG9zZVwiKSk7dmFyIG49dC50cmFuc2NlaXZlcnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwiYXVkaW9cIj09PWUua2luZH0pLmxlbmd0aCxhPXQudHJhbnNjZWl2ZXJzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cInZpZGVvXCI9PT1lLmtpbmR9KS5sZW5ndGgsaT1hcmd1bWVudHNbMF07aWYoaSl7aWYoaS5tYW5kYXRvcnl8fGkub3B0aW9uYWwpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkxlZ2FjeSBtYW5kYXRvcnkvb3B0aW9uYWwgY29uc3RyYWludHMgbm90IHN1cHBvcnRlZC5cIik7dm9pZCAwIT09aS5vZmZlclRvUmVjZWl2ZUF1ZGlvJiYobj0hMD09PWkub2ZmZXJUb1JlY2VpdmVBdWRpbz8xOiExPT09aS5vZmZlclRvUmVjZWl2ZUF1ZGlvPzA6aS5vZmZlclRvUmVjZWl2ZUF1ZGlvKSx2b2lkIDAhPT1pLm9mZmVyVG9SZWNlaXZlVmlkZW8mJihhPSEwPT09aS5vZmZlclRvUmVjZWl2ZVZpZGVvPzE6ITE9PT1pLm9mZmVyVG9SZWNlaXZlVmlkZW8/MDppLm9mZmVyVG9SZWNlaXZlVmlkZW8pfWZvcih0LnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe1wiYXVkaW9cIj09PWUua2luZD8tLW48MCYmKGUud2FudFJlY2VpdmU9ITEpOlwidmlkZW9cIj09PWUua2luZCYmLS1hPDAmJihlLndhbnRSZWNlaXZlPSExKX0pO24+MHx8YT4wOyluPjAmJih0Ll9jcmVhdGVUcmFuc2NlaXZlcihcImF1ZGlvXCIpLG4tLSksYT4wJiYodC5fY3JlYXRlVHJhbnNjZWl2ZXIoXCJ2aWRlb1wiKSxhLS0pO3ZhciBzPWUud3JpdGVTZXNzaW9uQm9pbGVycGxhdGUodC5fc2RwU2Vzc2lvbklkLHQuX3NkcFNlc3Npb25WZXJzaW9uKyspO3QudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24ocixuKXt2YXIgYT1yLnRyYWNrLGk9ci5raW5kLHM9ci5taWR8fGUuZ2VuZXJhdGVJZGVudGlmaWVyKCk7ci5taWQ9cyxyLmljZUdhdGhlcmVyfHwoci5pY2VHYXRoZXJlcj10Ll9jcmVhdGVJY2VHYXRoZXJlcihuLHQudXNpbmdCdW5kbGUpKTt2YXIgbz1jLlJUQ1J0cFNlbmRlci5nZXRDYXBhYmlsaXRpZXMoaSk7ZDwxNTAxOSYmKG8uY29kZWNzPW8uY29kZWNzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cInJ0eFwiIT09ZS5uYW1lfSkpLG8uY29kZWNzLmZvckVhY2goZnVuY3Rpb24oZSl7XCJIMjY0XCI9PT1lLm5hbWUmJnZvaWQgMD09PWUucGFyYW1ldGVyc1tcImxldmVsLWFzeW1tZXRyeS1hbGxvd2VkXCJdJiYoZS5wYXJhbWV0ZXJzW1wibGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWRcIl09XCIxXCIpLHIucmVtb3RlQ2FwYWJpbGl0aWVzJiZyLnJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3MmJnIucmVtb3RlQ2FwYWJpbGl0aWVzLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UubmFtZS50b0xvd2VyQ2FzZSgpPT09dC5uYW1lLnRvTG93ZXJDYXNlKCkmJmUuY2xvY2tSYXRlPT09dC5jbG9ja1JhdGUmJihlLnByZWZlcnJlZFBheWxvYWRUeXBlPXQucGF5bG9hZFR5cGUpfSl9KSxvLmhlYWRlckV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbihlKXsoci5yZW1vdGVDYXBhYmlsaXRpZXMmJnIucmVtb3RlQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnN8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UudXJpPT09dC51cmkmJihlLmlkPXQuaWQpfSl9KTt2YXIgcD1yLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnN8fFt7c3NyYzoxMDAxKigyKm4rMSl9XTthJiZkPj0xNTAxOSYmXCJ2aWRlb1wiPT09aSYmIXBbMF0ucnR4JiYocFswXS5ydHg9e3NzcmM6cFswXS5zc3JjKzF9KSxyLndhbnRSZWNlaXZlJiYoci5ydHBSZWNlaXZlcj1uZXcgYy5SVENSdHBSZWNlaXZlcihyLmR0bHNUcmFuc3BvcnQsaSkpLHIubG9jYWxDYXBhYmlsaXRpZXM9byxyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnM9cH0pLFwibWF4LWNvbXBhdFwiIT09dC5fY29uZmlnLmJ1bmRsZVBvbGljeSYmKHMrPVwiYT1ncm91cDpCVU5ETEUgXCIrdC50cmFuc2NlaXZlcnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLm1pZH0pLmpvaW4oXCIgXCIpK1wiXFxyXFxuXCIpLHMrPVwiYT1pY2Utb3B0aW9uczp0cmlja2xlXFxyXFxuXCIsdC50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbihuLGEpe3MrPXIobixuLmxvY2FsQ2FwYWJpbGl0aWVzLFwib2ZmZXJcIixuLnN0cmVhbSx0Ll9kdGxzUm9sZSkscys9XCJhPXJ0Y3AtcnNpemVcXHJcXG5cIiwhbi5pY2VHYXRoZXJlcnx8XCJuZXdcIj09PXQuaWNlR2F0aGVyaW5nU3RhdGV8fDAhPT1hJiZ0LnVzaW5nQnVuZGxlfHwobi5pY2VHYXRoZXJlci5nZXRMb2NhbENhbmRpZGF0ZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuY29tcG9uZW50PTEscys9XCJhPVwiK2Uud3JpdGVDYW5kaWRhdGUodCkrXCJcXHJcXG5cIn0pLFwiY29tcGxldGVkXCI9PT1uLmljZUdhdGhlcmVyLnN0YXRlJiYocys9XCJhPWVuZC1vZi1jYW5kaWRhdGVzXFxyXFxuXCIpKX0pO3ZhciBwPW5ldyBjLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTpcIm9mZmVyXCIsc2RwOnN9KTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHApfSxmLnByb3RvdHlwZS5jcmVhdGVBbnN3ZXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHQuX2lzQ2xvc2VkKXJldHVybiBQcm9taXNlLnJlamVjdChvKFwiSW52YWxpZFN0YXRlRXJyb3JcIixcIkNhbiBub3QgY2FsbCBjcmVhdGVBbnN3ZXIgYWZ0ZXIgY2xvc2VcIikpO2lmKFwiaGF2ZS1yZW1vdGUtb2ZmZXJcIiE9PXQuc2lnbmFsaW5nU3RhdGUmJlwiaGF2ZS1sb2NhbC1wcmFuc3dlclwiIT09dC5zaWduYWxpbmdTdGF0ZSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobyhcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IGNhbGwgY3JlYXRlQW5zd2VyIGluIHNpZ25hbGluZ1N0YXRlIFwiK3Quc2lnbmFsaW5nU3RhdGUpKTt2YXIgbj1lLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlKHQuX3NkcFNlc3Npb25JZCx0Ll9zZHBTZXNzaW9uVmVyc2lvbisrKTt0LnVzaW5nQnVuZGxlJiYobis9XCJhPWdyb3VwOkJVTkRMRSBcIit0LnRyYW5zY2VpdmVycy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUubWlkfSkuam9pbihcIiBcIikrXCJcXHJcXG5cIiksbis9XCJhPWljZS1vcHRpb25zOnRyaWNrbGVcXHJcXG5cIjt2YXIgaT1lLmdldE1lZGlhU2VjdGlvbnModC5fcmVtb3RlRGVzY3JpcHRpb24uc2RwKS5sZW5ndGg7dC50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbihlLHMpe2lmKCEocysxPmkpKXtpZihlLnJlamVjdGVkKXJldHVyblwiYXBwbGljYXRpb25cIj09PWUua2luZD9cIkRUTFMvU0NUUFwiPT09ZS5wcm90b2NvbD9uKz1cIm09YXBwbGljYXRpb24gMCBEVExTL1NDVFAgNTAwMFxcclxcblwiOm4rPVwibT1hcHBsaWNhdGlvbiAwIFwiK2UucHJvdG9jb2wrXCIgd2VicnRjLWRhdGFjaGFubmVsXFxyXFxuXCI6XCJhdWRpb1wiPT09ZS5raW5kP24rPVwibT1hdWRpbyAwIFVEUC9UTFMvUlRQL1NBVlBGIDBcXHJcXG5hPXJ0cG1hcDowIFBDTVUvODAwMFxcclxcblwiOlwidmlkZW9cIj09PWUua2luZCYmKG4rPVwibT12aWRlbyAwIFVEUC9UTFMvUlRQL1NBVlBGIDEyMFxcclxcbmE9cnRwbWFwOjEyMCBWUDgvOTAwMDBcXHJcXG5cIiksdm9pZChuKz1cImM9SU4gSVA0IDAuMC4wLjBcXHJcXG5hPWluYWN0aXZlXFxyXFxuYT1taWQ6XCIrZS5taWQrXCJcXHJcXG5cIik7dmFyIG87aWYoZS5zdHJlYW0pXCJhdWRpb1wiPT09ZS5raW5kP289ZS5zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXTpcInZpZGVvXCI9PT1lLmtpbmQmJihvPWUuc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0pLG8mJmQ+PTE1MDE5JiZcInZpZGVvXCI9PT1lLmtpbmQmJiFlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4JiYoZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eD17c3NyYzplLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYysxfSk7dmFyIGM9YShlLmxvY2FsQ2FwYWJpbGl0aWVzLGUucmVtb3RlQ2FwYWJpbGl0aWVzKTshYy5jb2RlY3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwicnR4XCI9PT1lLm5hbWUudG9Mb3dlckNhc2UoKX0pLmxlbmd0aCYmZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmZGVsZXRlIGUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgsbis9cihlLGMsXCJhbnN3ZXJcIixlLnN0cmVhbSx0Ll9kdGxzUm9sZSksZS5ydGNwUGFyYW1ldGVycyYmZS5ydGNwUGFyYW1ldGVycy5yZWR1Y2VkU2l6ZSYmKG4rPVwiYT1ydGNwLXJzaXplXFxyXFxuXCIpfX0pO3ZhciBzPW5ldyBjLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTpcImFuc3dlclwiLHNkcDpufSk7cmV0dXJuIFByb21pc2UucmVzb2x2ZShzKX0sZi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlPWZ1bmN0aW9uKHQpe3ZhciByLG49dGhpcztyZXR1cm4gdCYmdm9pZCAwPT09dC5zZHBNTGluZUluZGV4JiYhdC5zZHBNaWQ/UHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcihcInNkcE1MaW5lSW5kZXggb3Igc2RwTWlkIHJlcXVpcmVkXCIpKTpuZXcgUHJvbWlzZShmdW5jdGlvbihhLGkpe2lmKCFuLl9yZW1vdGVEZXNjcmlwdGlvbilyZXR1cm4gaShvKFwiSW52YWxpZFN0YXRlRXJyb3JcIixcIkNhbiBub3QgYWRkIElDRSBjYW5kaWRhdGUgd2l0aG91dCBhIHJlbW90ZSBkZXNjcmlwdGlvblwiKSk7aWYodCYmXCJcIiE9PXQuY2FuZGlkYXRlKXt2YXIgYz10LnNkcE1MaW5lSW5kZXg7aWYodC5zZHBNaWQpZm9yKHZhciBkPTA7ZDxuLnRyYW5zY2VpdmVycy5sZW5ndGg7ZCsrKWlmKG4udHJhbnNjZWl2ZXJzW2RdLm1pZD09PXQuc2RwTWlkKXtjPWQ7YnJlYWt9dmFyIHA9bi50cmFuc2NlaXZlcnNbY107aWYoIXApcmV0dXJuIGkobyhcIk9wZXJhdGlvbkVycm9yXCIsXCJDYW4gbm90IGFkZCBJQ0UgY2FuZGlkYXRlXCIpKTtpZihwLnJlamVjdGVkKXJldHVybiBhKCk7dmFyIGw9T2JqZWN0LmtleXModC5jYW5kaWRhdGUpLmxlbmd0aD4wP2UucGFyc2VDYW5kaWRhdGUodC5jYW5kaWRhdGUpOnt9O2lmKFwidGNwXCI9PT1sLnByb3RvY29sJiYoMD09PWwucG9ydHx8OT09PWwucG9ydCkpcmV0dXJuIGEoKTtpZihsLmNvbXBvbmVudCYmMSE9PWwuY29tcG9uZW50KXJldHVybiBhKCk7aWYoKDA9PT1jfHxjPjAmJnAuaWNlVHJhbnNwb3J0IT09bi50cmFuc2NlaXZlcnNbMF0uaWNlVHJhbnNwb3J0KSYmIXMocC5pY2VUcmFuc3BvcnQsbCkpcmV0dXJuIGkobyhcIk9wZXJhdGlvbkVycm9yXCIsXCJDYW4gbm90IGFkZCBJQ0UgY2FuZGlkYXRlXCIpKTt2YXIgZj10LmNhbmRpZGF0ZS50cmltKCk7MD09PWYuaW5kZXhPZihcImE9XCIpJiYoZj1mLnN1YnN0cigyKSksKHI9ZS5nZXRNZWRpYVNlY3Rpb25zKG4uX3JlbW90ZURlc2NyaXB0aW9uLnNkcCkpW2NdKz1cImE9XCIrKGwudHlwZT9mOlwiZW5kLW9mLWNhbmRpZGF0ZXNcIikrXCJcXHJcXG5cIixuLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHA9ZS5nZXREZXNjcmlwdGlvbihuLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHApK3Iuam9pbihcIlwiKX1lbHNlIGZvcih2YXIgdT0wO3U8bi50cmFuc2NlaXZlcnMubGVuZ3RoJiYobi50cmFuc2NlaXZlcnNbdV0ucmVqZWN0ZWR8fChuLnRyYW5zY2VpdmVyc1t1XS5pY2VUcmFuc3BvcnQuYWRkUmVtb3RlQ2FuZGlkYXRlKHt9KSwocj1lLmdldE1lZGlhU2VjdGlvbnMobi5fcmVtb3RlRGVzY3JpcHRpb24uc2RwKSlbdV0rPVwiYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcblwiLG4uX3JlbW90ZURlc2NyaXB0aW9uLnNkcD1lLmdldERlc2NyaXB0aW9uKG4uX3JlbW90ZURlc2NyaXB0aW9uLnNkcCkrci5qb2luKFwiXCIpLCFuLnVzaW5nQnVuZGxlKSk7dSsrKTthKCl9KX0sZi5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oZSl7aWYoZSYmZSBpbnN0YW5jZW9mIGMuTWVkaWFTdHJlYW1UcmFjayl7dmFyIHQ9bnVsbDtpZih0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHIpe3IucnRwU2VuZGVyJiZyLnJ0cFNlbmRlci50cmFjaz09PWU/dD1yLnJ0cFNlbmRlcjpyLnJ0cFJlY2VpdmVyJiZyLnJ0cFJlY2VpdmVyLnRyYWNrPT09ZSYmKHQ9ci5ydHBSZWNlaXZlcil9KSwhdCl0aHJvdyBvKFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIsXCJJbnZhbGlkIHNlbGVjdG9yLlwiKTtyZXR1cm4gdC5nZXRTdGF0cygpfXZhciByPVtdO3JldHVybiB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe1tcInJ0cFNlbmRlclwiLFwicnRwUmVjZWl2ZXJcIixcImljZUdhdGhlcmVyXCIsXCJpY2VUcmFuc3BvcnRcIixcImR0bHNUcmFuc3BvcnRcIl0uZm9yRWFjaChmdW5jdGlvbih0KXtlW3RdJiZyLnB1c2goZVt0XS5nZXRTdGF0cygpKX0pfSksUHJvbWlzZS5hbGwocikudGhlbihmdW5jdGlvbihlKXt2YXIgdD1uZXcgTWFwO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3Quc2V0KGUuaWQsZSl9KX0pLHR9KX07W1wiUlRDUnRwU2VuZGVyXCIsXCJSVENSdHBSZWNlaXZlclwiLFwiUlRDSWNlR2F0aGVyZXJcIixcIlJUQ0ljZVRyYW5zcG9ydFwiLFwiUlRDRHRsc1RyYW5zcG9ydFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciByPWNbZV07aWYociYmci5wcm90b3R5cGUmJnIucHJvdG90eXBlLmdldFN0YXRzKXt2YXIgbj1yLnByb3RvdHlwZS5nZXRTdGF0cztyLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe3JldHVybiBuLmFwcGx5KHRoaXMpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHI9bmV3IE1hcDtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihuKXtlW25dLnR5cGU9dChlW25dKSxyLnNldChuLGVbbl0pfSkscn0pfX19KTt2YXIgdT1bXCJjcmVhdGVPZmZlclwiLFwiY3JlYXRlQW5zd2VyXCJdO3JldHVybiB1LmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9Zi5wcm90b3R5cGVbZV07Zi5wcm90b3R5cGVbZV09ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZVswXXx8XCJmdW5jdGlvblwiPT10eXBlb2YgZVsxXT90LmFwcGx5KHRoaXMsW2FyZ3VtZW50c1syXV0pLnRoZW4oZnVuY3Rpb24odCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZVswXSYmZVswXS5hcHBseShudWxsLFt0XSl9LGZ1bmN0aW9uKHQpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGVbMV0mJmVbMV0uYXBwbHkobnVsbCxbdF0pfSk6dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSksKHU9W1wic2V0TG9jYWxEZXNjcmlwdGlvblwiLFwic2V0UmVtb3RlRGVzY3JpcHRpb25cIixcImFkZEljZUNhbmRpZGF0ZVwiXSkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1mLnByb3RvdHlwZVtlXTtmLnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cztyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzFdfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzJdP3QuYXBwbHkodGhpcyxhcmd1bWVudHMpLnRoZW4oZnVuY3Rpb24oKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzFdJiZlWzFdLmFwcGx5KG51bGwpfSxmdW5jdGlvbih0KXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzJdJiZlWzJdLmFwcGx5KG51bGwsW3RdKX0pOnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pLFtcImdldFN0YXRzXCJdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9Zi5wcm90b3R5cGVbZV07Zi5wcm90b3R5cGVbZV09ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZVsxXT90LmFwcGx5KHRoaXMsYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uKCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZVsxXSYmZVsxXS5hcHBseShudWxsKX0pOnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pLGZ9O1xufSx7XCJzZHBcIjpcIllIdmhcIn1dLFwiWWRLeFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUpe3ZhciByPWUmJmUubmF2aWdhdG9yLHQ9ci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLmJpbmQoci5tZWRpYURldmljZXMpO3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYT1mdW5jdGlvbihlKXtyZXR1cm4gdChlKS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6e1Blcm1pc3Npb25EZW5pZWRFcnJvcjpcIk5vdEFsbG93ZWRFcnJvclwifVtlLm5hbWVdfHxlLm5hbWUsbWVzc2FnZTplLm1lc3NhZ2UsY29uc3RyYWludDplLmNvbnN0cmFpbnQsdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lfX19KGUpKX0pfX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1HZXRVc2VyTWVkaWE9ZTtcbn0se31dLFwiUDNiVlwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUpe1wiZ2V0RGlzcGxheU1lZGlhXCJpbiBlLm5hdmlnYXRvciYmZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiYoZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiZcImdldERpc3BsYXlNZWRpYVwiaW4gZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzfHwoZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYT1lLm5hdmlnYXRvci5nZXREaXNwbGF5TWVkaWEuYmluZChlLm5hdmlnYXRvcikpKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1HZXREaXNwbGF5TWVkaWE9ZTtcbn0se31dLFwiWFJpY1wiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1QZWVyQ29ubmVjdGlvbj1wLGV4cG9ydHMuc2hpbVJlcGxhY2VUcmFjaz1hLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwic2hpbUdldFVzZXJNZWRpYVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuLnNoaW1HZXRVc2VyTWVkaWF9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJzaGltR2V0RGlzcGxheU1lZGlhXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkuc2hpbUdldERpc3BsYXlNZWRpYX19KTt2YXIgZT1zKHJlcXVpcmUoXCIuLi91dGlsc1wiKSksdD1yZXF1aXJlKFwiLi9maWx0ZXJpY2VzZXJ2ZXJzXCIpLHI9byhyZXF1aXJlKFwicnRjcGVlcmNvbm5lY3Rpb24tc2hpbVwiKSksbj1yZXF1aXJlKFwiLi9nZXR1c2VybWVkaWFcIiksaT1yZXF1aXJlKFwiLi9nZXRkaXNwbGF5bWVkaWFcIik7ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gYygpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuIG51bGw7dmFyIGU9bmV3IFdlYWtNYXA7cmV0dXJuIGM9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX1mdW5jdGlvbiBzKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTtpZihudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpcmV0dXJue2RlZmF1bHQ6ZX07dmFyIHQ9YygpO2lmKHQmJnQuaGFzKGUpKXJldHVybiB0LmdldChlKTt2YXIgcj17fSxuPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtmb3IodmFyIGkgaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSl7dmFyIG89bj9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsaSk6bnVsbDtvJiYoby5nZXR8fG8uc2V0KT9PYmplY3QuZGVmaW5lUHJvcGVydHkocixpLG8pOnJbaV09ZVtpXX1yZXR1cm4gci5kZWZhdWx0PWUsdCYmdC5zZXQoZSxyKSxyfWZ1bmN0aW9uIHAobixpKXtpZihuLlJUQ0ljZUdhdGhlcmVyJiYobi5SVENJY2VDYW5kaWRhdGV8fChuLlJUQ0ljZUNhbmRpZGF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gZX0pLG4uUlRDU2Vzc2lvbkRlc2NyaXB0aW9ufHwobi5SVENTZXNzaW9uRGVzY3JpcHRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSxpLnZlcnNpb248MTUwMjUpKXt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4uTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUsXCJlbmFibGVkXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShuLk1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLFwiZW5hYmxlZFwiLHtzZXQ6ZnVuY3Rpb24oZSl7by5zZXQuY2FsbCh0aGlzLGUpO3ZhciB0PW5ldyBFdmVudChcImVuYWJsZWRcIik7dC5lbmFibGVkPWUsdGhpcy5kaXNwYXRjaEV2ZW50KHQpfX0pfSFuLlJUQ1J0cFNlbmRlcnx8XCJkdG1mXCJpbiBuLlJUQ1J0cFNlbmRlci5wcm90b3R5cGV8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUsXCJkdG1mXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLl9kdG1mJiYoXCJhdWRpb1wiPT09dGhpcy50cmFjay5raW5kP3RoaXMuX2R0bWY9bmV3IG4uUlRDRHRtZlNlbmRlcih0aGlzKTpcInZpZGVvXCI9PT10aGlzLnRyYWNrLmtpbmQmJih0aGlzLl9kdG1mPW51bGwpKSx0aGlzLl9kdG1mfX0pLG4uUlRDRHRtZlNlbmRlciYmIW4uUlRDRFRNRlNlbmRlciYmKG4uUlRDRFRNRlNlbmRlcj1uLlJUQ0R0bWZTZW5kZXIpO3ZhciBjPSgwLHIuZGVmYXVsdCkobixpLnZlcnNpb24pO24uUlRDUGVlckNvbm5lY3Rpb249ZnVuY3Rpb24ocil7cmV0dXJuIHImJnIuaWNlU2VydmVycyYmKHIuaWNlU2VydmVycz0oMCx0LmZpbHRlckljZVNlcnZlcnMpKHIuaWNlU2VydmVycyxpLnZlcnNpb24pLGUubG9nKFwiSUNFIHNlcnZlcnMgYWZ0ZXIgZmlsdGVyaW5nOlwiLHIuaWNlU2VydmVycykpLG5ldyBjKHIpfSxuLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZT1jLnByb3RvdHlwZX1mdW5jdGlvbiBhKGUpeyFlLlJUQ1J0cFNlbmRlcnx8XCJyZXBsYWNlVHJhY2tcImluIGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZXx8KGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5yZXBsYWNlVHJhY2s9ZS5SVENSdHBTZW5kZXIucHJvdG90eXBlLnNldFRyYWNrKX1cbn0se1wiLi4vdXRpbHNcIjpcImlTeENcIixcIi4vZmlsdGVyaWNlc2VydmVyc1wiOlwiTloxQ1wiLFwicnRjcGVlcmNvbm5lY3Rpb24tc2hpbVwiOlwiTkoydVwiLFwiLi9nZXR1c2VybWVkaWFcIjpcIllkS3hcIixcIi4vZ2V0ZGlzcGxheW1lZGlhXCI6XCJQM2JWXCJ9XSxcIkd6U3ZcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltR2V0VXNlck1lZGlhPW47dmFyIGU9byhyZXF1aXJlKFwiLi4vdXRpbHNcIikpO2Z1bmN0aW9uIHQoKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciBlPW5ldyBXZWFrTWFwO3JldHVybiB0PWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9ZnVuY3Rpb24gbyhlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXJldHVybntkZWZhdWx0OmV9O3ZhciBvPXQoKTtpZihvJiZvLmhhcyhlKSlyZXR1cm4gby5nZXQoZSk7dmFyIHI9e30sbj1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7Zm9yKHZhciBpIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkpe3ZhciBhPW4/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGkpOm51bGw7YSYmKGEuZ2V0fHxhLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsaSxhKTpyW2ldPWVbaV19cmV0dXJuIHIuZGVmYXVsdD1lLG8mJm8uc2V0KGUscikscn1mdW5jdGlvbiByKGUpe3JldHVybihyPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBuKHQsbyl7dmFyIG49dCYmdC5uYXZpZ2F0b3IsaT10JiZ0Lk1lZGlhU3RyZWFtVHJhY2s7aWYobi5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24odCxvLHIpe2UuZGVwcmVjYXRlZChcIm5hdmlnYXRvci5nZXRVc2VyTWVkaWFcIixcIm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhXCIpLG4ubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh0KS50aGVuKG8scil9LCEoby52ZXJzaW9uPjU1JiZcImF1dG9HYWluQ29udHJvbFwiaW4gbi5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMoKSkpe3ZhciBhPWZ1bmN0aW9uKGUsdCxvKXt0IGluIGUmJiEobyBpbiBlKSYmKGVbb109ZVt0XSxkZWxldGUgZVt0XSl9LHM9bi5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLmJpbmQobi5tZWRpYURldmljZXMpO2lmKG4ubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYT1mdW5jdGlvbihlKXtyZXR1cm5cIm9iamVjdFwiPT09cihlKSYmXCJvYmplY3RcIj09PXIoZS5hdWRpbykmJihlPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpLGEoZS5hdWRpbyxcImF1dG9HYWluQ29udHJvbFwiLFwibW96QXV0b0dhaW5Db250cm9sXCIpLGEoZS5hdWRpbyxcIm5vaXNlU3VwcHJlc3Npb25cIixcIm1vek5vaXNlU3VwcHJlc3Npb25cIikpLHMoZSl9LGkmJmkucHJvdG90eXBlLmdldFNldHRpbmdzKXt2YXIgcD1pLnByb3RvdHlwZS5nZXRTZXR0aW5ncztpLnByb3RvdHlwZS5nZXRTZXR0aW5ncz1mdW5jdGlvbigpe3ZhciBlPXAuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBhKGUsXCJtb3pBdXRvR2FpbkNvbnRyb2xcIixcImF1dG9HYWluQ29udHJvbFwiKSxhKGUsXCJtb3pOb2lzZVN1cHByZXNzaW9uXCIsXCJub2lzZVN1cHByZXNzaW9uXCIpLGV9fWlmKGkmJmkucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludHMpe3ZhciB1PWkucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludHM7aS5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50cz1mdW5jdGlvbihlKXtyZXR1cm5cImF1ZGlvXCI9PT10aGlzLmtpbmQmJlwib2JqZWN0XCI9PT1yKGUpJiYoZT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKSxhKGUsXCJhdXRvR2FpbkNvbnRyb2xcIixcIm1vekF1dG9HYWluQ29udHJvbFwiKSxhKGUsXCJub2lzZVN1cHByZXNzaW9uXCIsXCJtb3pOb2lzZVN1cHByZXNzaW9uXCIpKSx1LmFwcGx5KHRoaXMsW2VdKX19fX1cbn0se1wiLi4vdXRpbHNcIjpcImlTeENcIn1dLFwiVXVHVVwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGUsaSl7ZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiZcImdldERpc3BsYXlNZWRpYVwiaW4gZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzfHxlLm5hdmlnYXRvci5tZWRpYURldmljZXMmJihlLm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhPWZ1bmN0aW9uKGEpe2lmKCFhfHwhYS52aWRlbyl7dmFyIHQ9bmV3IERPTUV4Y2VwdGlvbihcImdldERpc3BsYXlNZWRpYSB3aXRob3V0IHZpZGVvIGNvbnN0cmFpbnRzIGlzIHVuZGVmaW5lZFwiKTtyZXR1cm4gdC5uYW1lPVwiTm90Rm91bmRFcnJvclwiLHQuY29kZT04LFByb21pc2UucmVqZWN0KHQpfXJldHVybiEwPT09YS52aWRlbz9hLnZpZGVvPXttZWRpYVNvdXJjZTppfTphLnZpZGVvLm1lZGlhU291cmNlPWksZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShhKX0pfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuc2hpbUdldERpc3BsYXlNZWRpYT1lO1xufSx7fV0sXCJGemRyXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuc2hpbU9uVHJhY2s9cyxleHBvcnRzLnNoaW1QZWVyQ29ubmVjdGlvbj1jLGV4cG9ydHMuc2hpbVNlbmRlckdldFN0YXRzPXAsZXhwb3J0cy5zaGltUmVjZWl2ZXJHZXRTdGF0cz11LGV4cG9ydHMuc2hpbVJlbW92ZVN0cmVhbT1mLGV4cG9ydHMuc2hpbVJUQ0RhdGFDaGFubmVsPWQsZXhwb3J0cy5zaGltQWRkVHJhbnNjZWl2ZXI9QyxleHBvcnRzLnNoaW1HZXRQYXJhbWV0ZXJzPXksZXhwb3J0cy5zaGltQ3JlYXRlT2ZmZXI9bCxleHBvcnRzLnNoaW1DcmVhdGVBbnN3ZXI9bSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcInNoaW1HZXRVc2VyTWVkaWFcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5zaGltR2V0VXNlck1lZGlhfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwic2hpbUdldERpc3BsYXlNZWRpYVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuLnNoaW1HZXREaXNwbGF5TWVkaWF9fSk7dmFyIGU9byhyZXF1aXJlKFwiLi4vdXRpbHNcIikpLHQ9cmVxdWlyZShcIi4vZ2V0dXNlcm1lZGlhXCIpLG49cmVxdWlyZShcIi4vZ2V0ZGlzcGxheW1lZGlhXCIpO2Z1bmN0aW9uIHIoKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciBlPW5ldyBXZWFrTWFwO3JldHVybiByPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9ZnVuY3Rpb24gbyhlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXJldHVybntkZWZhdWx0OmV9O3ZhciB0PXIoKTtpZih0JiZ0LmhhcyhlKSlyZXR1cm4gdC5nZXQoZSk7dmFyIG49e30sbz1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7Zm9yKHZhciBpIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkpe3ZhciBhPW8/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGkpOm51bGw7YSYmKGEuZ2V0fHxhLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KG4saSxhKTpuW2ldPWVbaV19cmV0dXJuIG4uZGVmYXVsdD1lLHQmJnQuc2V0KGUsbiksbn1mdW5jdGlvbiBpKGUsdCxuKXtyZXR1cm4gdCBpbiBlP09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse3ZhbHVlOm4sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTplW3RdPW4sZX1mdW5jdGlvbiBhKGUpe3JldHVybihhPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBzKGUpe1wib2JqZWN0XCI9PT1hKGUpJiZlLlJUQ1RyYWNrRXZlbnQmJlwicmVjZWl2ZXJcImluIGUuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUmJiEoXCJ0cmFuc2NlaXZlclwiaW4gZS5SVENUcmFja0V2ZW50LnByb3RvdHlwZSkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlLFwidHJhbnNjZWl2ZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJue3JlY2VpdmVyOnRoaXMucmVjZWl2ZXJ9fX0pfWZ1bmN0aW9uIGMoZSx0KXtpZihcIm9iamVjdFwiPT09YShlKSYmKGUuUlRDUGVlckNvbm5lY3Rpb258fGUubW96UlRDUGVlckNvbm5lY3Rpb24pKXshZS5SVENQZWVyQ29ubmVjdGlvbiYmZS5tb3pSVENQZWVyQ29ubmVjdGlvbiYmKGUuUlRDUGVlckNvbm5lY3Rpb249ZS5tb3pSVENQZWVyQ29ubmVjdGlvbiksdC52ZXJzaW9uPDUzJiZbXCJzZXRMb2NhbERlc2NyaXB0aW9uXCIsXCJzZXRSZW1vdGVEZXNjcmlwdGlvblwiLFwiYWRkSWNlQ2FuZGlkYXRlXCJdLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIG49ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbdF0scj1pKHt9LHQsZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzWzBdPW5ldyhcImFkZEljZUNhbmRpZGF0ZVwiPT09dD9lLlJUQ0ljZUNhbmRpZGF0ZTplLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbikoYXJndW1lbnRzWzBdKSxuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW3RdPXJbdF19KTt2YXIgbj17aW5ib3VuZHJ0cDpcImluYm91bmQtcnRwXCIsb3V0Ym91bmRydHA6XCJvdXRib3VuZC1ydHBcIixjYW5kaWRhdGVwYWlyOlwiY2FuZGlkYXRlLXBhaXJcIixsb2NhbGNhbmRpZGF0ZTpcImxvY2FsLWNhbmRpZGF0ZVwiLHJlbW90ZWNhbmRpZGF0ZTpcInJlbW90ZS1jYW5kaWRhdGVcIn0scj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe3ZhcltlLG8saV09YXJndW1lbnRzO3JldHVybiByLmFwcGx5KHRoaXMsW2V8fG51bGxdKS50aGVuKGZ1bmN0aW9uKGUpe2lmKHQudmVyc2lvbjw1MyYmIW8pdHJ5e2UuZm9yRWFjaChmdW5jdGlvbihlKXtlLnR5cGU9bltlLnR5cGVdfHxlLnR5cGV9KX1jYXRjaChyKXtpZihcIlR5cGVFcnJvclwiIT09ci5uYW1lKXRocm93IHI7ZS5mb3JFYWNoKGZ1bmN0aW9uKHQscil7ZS5zZXQocixPYmplY3QuYXNzaWduKHt9LHQse3R5cGU6blt0LnR5cGVdfHx0LnR5cGV9KSl9KX1yZXR1cm4gZX0pLnRoZW4obyxpKX19fWZ1bmN0aW9uIHAoZSl7aWYoXCJvYmplY3RcIj09PWEoZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24mJmUuUlRDUnRwU2VuZGVyJiYhKGUuUlRDUnRwU2VuZGVyJiZcImdldFN0YXRzXCJpbiBlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpKXt2YXIgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzO3QmJihlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxuPXQuYXBwbHkodGhpcyxbXSk7cmV0dXJuIG4uZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdC5fcGM9ZX0pLG59KTt2YXIgbj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztuJiYoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oKXt2YXIgZT1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gZS5fcGM9dGhpcyxlfSksZS5SVENSdHBTZW5kZXIucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhY2s/dGhpcy5fcGMuZ2V0U3RhdHModGhpcy50cmFjayk6UHJvbWlzZS5yZXNvbHZlKG5ldyBNYXApfX19ZnVuY3Rpb24gdSh0KXtpZihcIm9iamVjdFwiPT09YSh0KSYmdC5SVENQZWVyQ29ubmVjdGlvbiYmdC5SVENSdHBTZW5kZXImJiEodC5SVENSdHBTZW5kZXImJlwiZ2V0U3RhdHNcImluIHQuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlKSl7dmFyIG49dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzO24mJih0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bi5hcHBseSh0aGlzLFtdKTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0Ll9wYz1lfSksdH0pLGUud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQodCxcInRyYWNrXCIsZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVjZWl2ZXIuX3BjPWUuc3JjRWxlbWVudCxlfSksdC5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGMuZ2V0U3RhdHModGhpcy50cmFjayl9fX1mdW5jdGlvbiBmKHQpeyF0LlJUQ1BlZXJDb25uZWN0aW9ufHxcInJlbW92ZVN0cmVhbVwiaW4gdC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGV8fCh0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24odCl7dmFyIG49dGhpcztlLmRlcHJlY2F0ZWQoXCJyZW1vdmVTdHJlYW1cIixcInJlbW92ZVRyYWNrXCIpLHRoaXMuZ2V0U2VuZGVycygpLmZvckVhY2goZnVuY3Rpb24oZSl7ZS50cmFjayYmdC5nZXRUcmFja3MoKS5pbmNsdWRlcyhlLnRyYWNrKSYmbi5yZW1vdmVUcmFjayhlKX0pfSl9ZnVuY3Rpb24gZChlKXtlLkRhdGFDaGFubmVsJiYhZS5SVENEYXRhQ2hhbm5lbCYmKGUuUlRDRGF0YUNoYW5uZWw9ZS5EYXRhQ2hhbm5lbCl9ZnVuY3Rpb24gQyhlKXtpZihcIm9iamVjdFwiPT09YShlKSYmZS5SVENQZWVyQ29ubmVjdGlvbil7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhbnNjZWl2ZXI7dCYmKGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYW5zY2VpdmVyPWZ1bmN0aW9uKCl7dGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXM9W107dmFyIGU9YXJndW1lbnRzWzFdLG49ZSYmXCJzZW5kRW5jb2RpbmdzXCJpbiBlO24mJmUuc2VuZEVuY29kaW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKFwicmlkXCJpbiBlKXtpZighL15bYS16MC05XXswLDE2fSQvaS50ZXN0KGUucmlkKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBSSUQgdmFsdWUgcHJvdmlkZWQuXCIpfWlmKFwic2NhbGVSZXNvbHV0aW9uRG93bkJ5XCJpbiBlJiYhKHBhcnNlRmxvYXQoZS5zY2FsZVJlc29sdXRpb25Eb3duQnkpPj0xKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInNjYWxlX3Jlc29sdXRpb25fZG93bl9ieSBtdXN0IGJlID49IDEuMFwiKTtpZihcIm1heEZyYW1lcmF0ZVwiaW4gZSYmIShwYXJzZUZsb2F0KGUubWF4RnJhbWVyYXRlKT49MCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJtYXhfZnJhbWVyYXRlIG11c3QgYmUgPj0gMC4wXCIpfSk7dmFyIHI9dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYobil7dmFye3NlbmRlcjpvfT1yLGk9by5nZXRQYXJhbWV0ZXJzKCk7XCJlbmNvZGluZ3NcImluIGkmJigxIT09aS5lbmNvZGluZ3MubGVuZ3RofHwwIT09T2JqZWN0LmtleXMoaS5lbmNvZGluZ3NbMF0pLmxlbmd0aCl8fChpLmVuY29kaW5ncz1lLnNlbmRFbmNvZGluZ3Msby5zZW5kRW5jb2RpbmdzPWUuc2VuZEVuY29kaW5ncyx0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcy5wdXNoKG8uc2V0UGFyYW1ldGVycyhpKS50aGVuKGZ1bmN0aW9uKCl7ZGVsZXRlIG8uc2VuZEVuY29kaW5nc30pLmNhdGNoKGZ1bmN0aW9uKCl7ZGVsZXRlIG8uc2VuZEVuY29kaW5nc30pKSl9cmV0dXJuIHJ9KX19ZnVuY3Rpb24geShlKXtpZihcIm9iamVjdFwiPT09YShlKSYmZS5SVENSdHBTZW5kZXIpe3ZhciB0PWUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5nZXRQYXJhbWV0ZXJzO3QmJihlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUuZ2V0UGFyYW1ldGVycz1mdW5jdGlvbigpe3ZhciBlPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVyblwiZW5jb2RpbmdzXCJpbiBlfHwoZS5lbmNvZGluZ3M9W10uY29uY2F0KHRoaXMuc2VuZEVuY29kaW5nc3x8W3t9XSkpLGV9KX19ZnVuY3Rpb24gbChlKXtpZihcIm9iamVjdFwiPT09YShlKSYmZS5SVENQZWVyQ29ubmVjdGlvbil7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXI7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXI9ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMsbj10aGlzO3JldHVybiB0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcyYmdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMubGVuZ3RoP1Byb21pc2UuYWxsKHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkobixlKX0pLmZpbmFsbHkoZnVuY3Rpb24oKXtuLnNldFBhcmFtZXRlcnNQcm9taXNlcz1bXX0pOnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19ZnVuY3Rpb24gbShlKXtpZihcIm9iamVjdFwiPT09YShlKSYmZS5SVENQZWVyQ29ubmVjdGlvbil7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlQW5zd2VyO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZUFuc3dlcj1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cyxuPXRoaXM7cmV0dXJuIHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzJiZ0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcy5sZW5ndGg/UHJvbWlzZS5hbGwodGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShuLGUpfSkuZmluYWxseShmdW5jdGlvbigpe24uc2V0UGFyYW1ldGVyc1Byb21pc2VzPVtdfSk6dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX1cbn0se1wiLi4vdXRpbHNcIjpcImlTeENcIixcIi4vZ2V0dXNlcm1lZGlhXCI6XCJHelN2XCIsXCIuL2dldGRpc3BsYXltZWRpYVwiOlwiVXVHVVwifV0sXCJ0MWxMXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuc2hpbUxvY2FsU3RyZWFtc0FQST1uLGV4cG9ydHMuc2hpbVJlbW90ZVN0cmVhbXNBUEk9aSxleHBvcnRzLnNoaW1DYWxsYmFja3NBUEk9YSxleHBvcnRzLnNoaW1HZXRVc2VyTWVkaWE9YyxleHBvcnRzLnNoaW1Db25zdHJhaW50cz1zLGV4cG9ydHMuc2hpbVJUQ0ljZVNlcnZlclVybHM9ZCxleHBvcnRzLnNoaW1UcmFja0V2ZW50VHJhbnNjZWl2ZXI9ZixleHBvcnRzLnNoaW1DcmVhdGVPZmZlckxlZ2FjeT1wLGV4cG9ydHMuc2hpbUF1ZGlvQ29udGV4dD11O3ZhciBlPXIocmVxdWlyZShcIi4uL3V0aWxzXCIpKTtmdW5jdGlvbiB0KCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgV2Vha01hcClyZXR1cm4gbnVsbDt2YXIgZT1uZXcgV2Vha01hcDtyZXR1cm4gdD1mdW5jdGlvbigpe3JldHVybiBlfSxlfWZ1bmN0aW9uIHIoZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO2lmKG51bGw9PT1lfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZSlyZXR1cm57ZGVmYXVsdDplfTt2YXIgcj10KCk7aWYociYmci5oYXMoZSkpcmV0dXJuIHIuZ2V0KGUpO3ZhciBvPXt9LG49T2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2Zvcih2YXIgaSBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpKXt2YXIgYT1uP09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxpKTpudWxsO2EmJihhLmdldHx8YS5zZXQpP09iamVjdC5kZWZpbmVQcm9wZXJ0eShvLGksYSk6b1tpXT1lW2ldfXJldHVybiBvLmRlZmF1bHQ9ZSxyJiZyLnNldChlLG8pLG99ZnVuY3Rpb24gbyhlKXtyZXR1cm4obz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gbihlKXtpZihcIm9iamVjdFwiPT09byhlKSYmZS5SVENQZWVyQ29ubmVjdGlvbil7aWYoXCJnZXRMb2NhbFN0cmVhbXNcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlfHwoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvY2FsU3RyZWFtc3x8KHRoaXMuX2xvY2FsU3RyZWFtcz1bXSksdGhpcy5fbG9jYWxTdHJlYW1zfSksIShcImFkZFN0cmVhbVwiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKXt2YXIgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW09ZnVuY3Rpb24oZSl7dmFyIHI9dGhpczt0aGlzLl9sb2NhbFN0cmVhbXN8fCh0aGlzLl9sb2NhbFN0cmVhbXM9W10pLHRoaXMuX2xvY2FsU3RyZWFtcy5pbmNsdWRlcyhlKXx8dGhpcy5fbG9jYWxTdHJlYW1zLnB1c2goZSksZS5nZXRBdWRpb1RyYWNrcygpLmZvckVhY2goZnVuY3Rpb24obyl7cmV0dXJuIHQuY2FsbChyLG8sZSl9KSxlLmdldFZpZGVvVHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihvKXtyZXR1cm4gdC5jYWxsKHIsbyxlKX0pfSxlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaz1mdW5jdGlvbihlKXtmb3IodmFyIHI9dGhpcyxvPWFyZ3VtZW50cy5sZW5ndGgsbj1uZXcgQXJyYXkobz4xP28tMTowKSxpPTE7aTxvO2krKyluW2ktMV09YXJndW1lbnRzW2ldO3JldHVybiBuJiZuLmZvckVhY2goZnVuY3Rpb24oZSl7ci5fbG9jYWxTdHJlYW1zP3IuX2xvY2FsU3RyZWFtcy5pbmNsdWRlcyhlKXx8ci5fbG9jYWxTdHJlYW1zLnB1c2goZSk6ci5fbG9jYWxTdHJlYW1zPVtlXX0pLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1cInJlbW92ZVN0cmVhbVwiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGV8fChlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9sb2NhbFN0cmVhbXN8fCh0aGlzLl9sb2NhbFN0cmVhbXM9W10pO3ZhciByPXRoaXMuX2xvY2FsU3RyZWFtcy5pbmRleE9mKGUpO2lmKC0xIT09cil7dGhpcy5fbG9jYWxTdHJlYW1zLnNwbGljZShyLDEpO3ZhciBvPWUuZ2V0VHJhY2tzKCk7dGhpcy5nZXRTZW5kZXJzKCkuZm9yRWFjaChmdW5jdGlvbihlKXtvLmluY2x1ZGVzKGUudHJhY2spJiZ0LnJlbW92ZVRyYWNrKGUpfSl9fSl9fWZ1bmN0aW9uIGkoZSl7aWYoXCJvYmplY3RcIj09PW8oZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24mJihcImdldFJlbW90ZVN0cmVhbXNcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlfHwoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVtb3RlU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW1vdGVTdHJlYW1zP3RoaXMuX3JlbW90ZVN0cmVhbXM6W119KSwhKFwib25hZGRzdHJlYW1cImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxcIm9uYWRkc3RyZWFtXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbmFkZHN0cmVhbX0sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fb25hZGRzdHJlYW0mJih0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhZGRzdHJlYW1cIix0aGlzLl9vbmFkZHN0cmVhbSksdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhY2tcIix0aGlzLl9vbmFkZHN0cmVhbXBvbHkpKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJhZGRzdHJlYW1cIix0aGlzLl9vbmFkZHN0cmVhbT1lKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFja1wiLHRoaXMuX29uYWRkc3RyZWFtcG9seT1mdW5jdGlvbihlKXtlLnN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbihlKXtpZih0Ll9yZW1vdGVTdHJlYW1zfHwodC5fcmVtb3RlU3RyZWFtcz1bXSksIXQuX3JlbW90ZVN0cmVhbXMuaW5jbHVkZXMoZSkpe3QuX3JlbW90ZVN0cmVhbXMucHVzaChlKTt2YXIgcj1uZXcgRXZlbnQoXCJhZGRzdHJlYW1cIik7ci5zdHJlYW09ZSx0LmRpc3BhdGNoRXZlbnQocil9fSl9KX19KTt2YXIgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbjtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX29uYWRkc3RyZWFtcG9seXx8dGhpcy5hZGRFdmVudExpc3RlbmVyKFwidHJhY2tcIix0aGlzLl9vbmFkZHN0cmVhbXBvbHk9ZnVuY3Rpb24odCl7dC5zdHJlYW1zLmZvckVhY2goZnVuY3Rpb24odCl7aWYoZS5fcmVtb3RlU3RyZWFtc3x8KGUuX3JlbW90ZVN0cmVhbXM9W10pLCEoZS5fcmVtb3RlU3RyZWFtcy5pbmRleE9mKHQpPj0wKSl7ZS5fcmVtb3RlU3RyZWFtcy5wdXNoKHQpO3ZhciByPW5ldyBFdmVudChcImFkZHN0cmVhbVwiKTtyLnN0cmVhbT10LGUuZGlzcGF0Y2hFdmVudChyKX19KX0pLHQuYXBwbHkoZSxhcmd1bWVudHMpfX19ZnVuY3Rpb24gYShlKXtpZihcIm9iamVjdFwiPT09byhlKSYmZS5SVENQZWVyQ29ubmVjdGlvbil7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUscj10LmNyZWF0ZU9mZmVyLG49dC5jcmVhdGVBbnN3ZXIsaT10LnNldExvY2FsRGVzY3JpcHRpb24sYT10LnNldFJlbW90ZURlc2NyaXB0aW9uLGM9dC5hZGRJY2VDYW5kaWRhdGU7dC5jcmVhdGVPZmZlcj1mdW5jdGlvbihlLHQpe3ZhciBvPWFyZ3VtZW50cy5sZW5ndGg+PTI/YXJndW1lbnRzWzJdOmFyZ3VtZW50c1swXSxuPXIuYXBwbHkodGhpcyxbb10pO3JldHVybiB0PyhuLnRoZW4oZSx0KSxQcm9taXNlLnJlc29sdmUoKSk6bn0sdC5jcmVhdGVBbnN3ZXI9ZnVuY3Rpb24oZSx0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPj0yP2FyZ3VtZW50c1syXTphcmd1bWVudHNbMF0sbz1uLmFwcGx5KHRoaXMsW3JdKTtyZXR1cm4gdD8oby50aGVuKGUsdCksUHJvbWlzZS5yZXNvbHZlKCkpOm99O3ZhciBzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbz1pLmFwcGx5KHRoaXMsW2VdKTtyZXR1cm4gcj8oby50aGVuKHQsciksUHJvbWlzZS5yZXNvbHZlKCkpOm99O3Quc2V0TG9jYWxEZXNjcmlwdGlvbj1zLHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBvPWEuYXBwbHkodGhpcyxbZV0pO3JldHVybiByPyhvLnRoZW4odCxyKSxQcm9taXNlLnJlc29sdmUoKSk6b30sdC5zZXRSZW1vdGVEZXNjcmlwdGlvbj1zLHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBvPWMuYXBwbHkodGhpcyxbZV0pO3JldHVybiByPyhvLnRoZW4odCxyKSxQcm9taXNlLnJlc29sdmUoKSk6b30sdC5hZGRJY2VDYW5kaWRhdGU9c319ZnVuY3Rpb24gYyhlKXt2YXIgdD1lJiZlLm5hdmlnYXRvcjtpZih0Lm1lZGlhRGV2aWNlcyYmdC5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKXt2YXIgcj10Lm1lZGlhRGV2aWNlcyxvPXIuZ2V0VXNlck1lZGlhLmJpbmQocik7dC5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKGUpe3JldHVybiBvKHMoZSkpfX0hdC5nZXRVc2VyTWVkaWEmJnQubWVkaWFEZXZpY2VzJiZ0Lm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEmJih0LmdldFVzZXJNZWRpYT1mdW5jdGlvbihlLHIsbyl7dC5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGUpLnRoZW4ocixvKX0uYmluZCh0KSl9ZnVuY3Rpb24gcyh0KXtyZXR1cm4gdCYmdm9pZCAwIT09dC52aWRlbz9PYmplY3QuYXNzaWduKHt9LHQse3ZpZGVvOmUuY29tcGFjdE9iamVjdCh0LnZpZGVvKX0pOnR9ZnVuY3Rpb24gZCh0KXtpZih0LlJUQ1BlZXJDb25uZWN0aW9uKXt2YXIgcj10LlJUQ1BlZXJDb25uZWN0aW9uO3QuUlRDUGVlckNvbm5lY3Rpb249ZnVuY3Rpb24odCxvKXtpZih0JiZ0LmljZVNlcnZlcnMpe2Zvcih2YXIgbj1bXSxpPTA7aTx0LmljZVNlcnZlcnMubGVuZ3RoO2krKyl7dmFyIGE9dC5pY2VTZXJ2ZXJzW2ldOyFhLmhhc093blByb3BlcnR5KFwidXJsc1wiKSYmYS5oYXNPd25Qcm9wZXJ0eShcInVybFwiKT8oZS5kZXByZWNhdGVkKFwiUlRDSWNlU2VydmVyLnVybFwiLFwiUlRDSWNlU2VydmVyLnVybHNcIiksKGE9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhKSkpLnVybHM9YS51cmwsZGVsZXRlIGEudXJsLG4ucHVzaChhKSk6bi5wdXNoKHQuaWNlU2VydmVyc1tpXSl9dC5pY2VTZXJ2ZXJzPW59cmV0dXJuIG5ldyByKHQsbyl9LHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlPXIucHJvdG90eXBlLFwiZ2VuZXJhdGVDZXJ0aWZpY2F0ZVwiaW4gciYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUlRDUGVlckNvbm5lY3Rpb24sXCJnZW5lcmF0ZUNlcnRpZmljYXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiByLmdlbmVyYXRlQ2VydGlmaWNhdGV9fSl9fWZ1bmN0aW9uIGYoZSl7XCJvYmplY3RcIj09PW8oZSkmJmUuUlRDVHJhY2tFdmVudCYmXCJyZWNlaXZlclwiaW4gZS5SVENUcmFja0V2ZW50LnByb3RvdHlwZSYmIShcInRyYW5zY2VpdmVyXCJpbiBlLlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUsXCJ0cmFuc2NlaXZlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57cmVjZWl2ZXI6dGhpcy5yZWNlaXZlcn19fSl9ZnVuY3Rpb24gcChlKXt2YXIgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlcjtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlcj1mdW5jdGlvbihlKXtpZihlKXt2b2lkIDAhPT1lLm9mZmVyVG9SZWNlaXZlQXVkaW8mJihlLm9mZmVyVG9SZWNlaXZlQXVkaW89ISFlLm9mZmVyVG9SZWNlaXZlQXVkaW8pO3ZhciByPXRoaXMuZ2V0VHJhbnNjZWl2ZXJzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm5cImF1ZGlvXCI9PT1lLnJlY2VpdmVyLnRyYWNrLmtpbmR9KTshMT09PWUub2ZmZXJUb1JlY2VpdmVBdWRpbyYmcj9cInNlbmRyZWN2XCI9PT1yLmRpcmVjdGlvbj9yLnNldERpcmVjdGlvbj9yLnNldERpcmVjdGlvbihcInNlbmRvbmx5XCIpOnIuZGlyZWN0aW9uPVwic2VuZG9ubHlcIjpcInJlY3Zvbmx5XCI9PT1yLmRpcmVjdGlvbiYmKHIuc2V0RGlyZWN0aW9uP3Iuc2V0RGlyZWN0aW9uKFwiaW5hY3RpdmVcIik6ci5kaXJlY3Rpb249XCJpbmFjdGl2ZVwiKTohMCE9PWUub2ZmZXJUb1JlY2VpdmVBdWRpb3x8cnx8dGhpcy5hZGRUcmFuc2NlaXZlcihcImF1ZGlvXCIpLHZvaWQgMCE9PWUub2ZmZXJUb1JlY2VpdmVWaWRlbyYmKGUub2ZmZXJUb1JlY2VpdmVWaWRlbz0hIWUub2ZmZXJUb1JlY2VpdmVWaWRlbyk7dmFyIG89dGhpcy5nZXRUcmFuc2NlaXZlcnMoKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVyblwidmlkZW9cIj09PWUucmVjZWl2ZXIudHJhY2sua2luZH0pOyExPT09ZS5vZmZlclRvUmVjZWl2ZVZpZGVvJiZvP1wic2VuZHJlY3ZcIj09PW8uZGlyZWN0aW9uP28uc2V0RGlyZWN0aW9uP28uc2V0RGlyZWN0aW9uKFwic2VuZG9ubHlcIik6by5kaXJlY3Rpb249XCJzZW5kb25seVwiOlwicmVjdm9ubHlcIj09PW8uZGlyZWN0aW9uJiYoby5zZXREaXJlY3Rpb24/by5zZXREaXJlY3Rpb24oXCJpbmFjdGl2ZVwiKTpvLmRpcmVjdGlvbj1cImluYWN0aXZlXCIpOiEwIT09ZS5vZmZlclRvUmVjZWl2ZVZpZGVvfHxvfHx0aGlzLmFkZFRyYW5zY2VpdmVyKFwidmlkZW9cIil9cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1mdW5jdGlvbiB1KGUpe1wib2JqZWN0XCIhPT1vKGUpfHxlLkF1ZGlvQ29udGV4dHx8KGUuQXVkaW9Db250ZXh0PWUud2Via2l0QXVkaW9Db250ZXh0KX1cbn0se1wiLi4vdXRpbHNcIjpcImlTeENcIn1dLFwiR09RS1wiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1SVENJY2VDYW5kaWRhdGU9YSxleHBvcnRzLnNoaW1NYXhNZXNzYWdlU2l6ZT1jLGV4cG9ydHMuc2hpbVNlbmRUaHJvd1R5cGVFcnJvcj1zLGV4cG9ydHMuc2hpbUNvbm5lY3Rpb25TdGF0ZT1wLGV4cG9ydHMucmVtb3ZlRXh0bWFwQWxsb3dNaXhlZD1kLGV4cG9ydHMuc2hpbUFkZEljZUNhbmRpZGF0ZU51bGxPckVtcHR5PXU7dmFyIGU9cihyZXF1aXJlKFwic2RwXCIpKSx0PW8ocmVxdWlyZShcIi4vdXRpbHNcIikpO2Z1bmN0aW9uIG4oKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciBlPW5ldyBXZWFrTWFwO3JldHVybiBuPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9ZnVuY3Rpb24gbyhlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXJldHVybntkZWZhdWx0OmV9O3ZhciB0PW4oKTtpZih0JiZ0LmhhcyhlKSlyZXR1cm4gdC5nZXQoZSk7dmFyIG89e30scj1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7Zm9yKHZhciBpIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkpe3ZhciBhPXI/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGkpOm51bGw7YSYmKGEuZ2V0fHxhLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KG8saSxhKTpvW2ldPWVbaV19cmV0dXJuIG8uZGVmYXVsdD1lLHQmJnQuc2V0KGUsbyksb31mdW5jdGlvbiByKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBpKGUpe3JldHVybihpPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBhKG4pe2lmKG4uUlRDSWNlQ2FuZGlkYXRlJiYhKG4uUlRDSWNlQ2FuZGlkYXRlJiZcImZvdW5kYXRpb25cImluIG4uUlRDSWNlQ2FuZGlkYXRlLnByb3RvdHlwZSkpe3ZhciBvPW4uUlRDSWNlQ2FuZGlkYXRlO24uUlRDSWNlQ2FuZGlkYXRlPWZ1bmN0aW9uKHQpe2lmKFwib2JqZWN0XCI9PT1pKHQpJiZ0LmNhbmRpZGF0ZSYmMD09PXQuY2FuZGlkYXRlLmluZGV4T2YoXCJhPVwiKSYmKCh0PUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodCkpKS5jYW5kaWRhdGU9dC5jYW5kaWRhdGUuc3Vic3RyKDIpKSx0LmNhbmRpZGF0ZSYmdC5jYW5kaWRhdGUubGVuZ3RoKXt2YXIgbj1uZXcgbyh0KSxyPWUuZGVmYXVsdC5wYXJzZUNhbmRpZGF0ZSh0LmNhbmRpZGF0ZSksYT1PYmplY3QuYXNzaWduKG4scik7cmV0dXJuIGEudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue2NhbmRpZGF0ZTphLmNhbmRpZGF0ZSxzZHBNaWQ6YS5zZHBNaWQsc2RwTUxpbmVJbmRleDphLnNkcE1MaW5lSW5kZXgsdXNlcm5hbWVGcmFnbWVudDphLnVzZXJuYW1lRnJhZ21lbnR9fSxhfXJldHVybiBuZXcgbyh0KX0sbi5SVENJY2VDYW5kaWRhdGUucHJvdG90eXBlPW8ucHJvdG90eXBlLHQud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQobixcImljZWNhbmRpZGF0ZVwiLGZ1bmN0aW9uKGUpe3JldHVybiBlLmNhbmRpZGF0ZSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJjYW5kaWRhdGVcIix7dmFsdWU6bmV3IG4uUlRDSWNlQ2FuZGlkYXRlKGUuY2FuZGlkYXRlKSx3cml0YWJsZTpcImZhbHNlXCJ9KSxlfSl9fWZ1bmN0aW9uIGModCxuKXtpZih0LlJUQ1BlZXJDb25uZWN0aW9uKXtcInNjdHBcImluIHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlfHxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsXCJzY3RwXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLl9zY3RwP251bGw6dGhpcy5fc2N0cH19KTt2YXIgbz10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbjt0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbj1mdW5jdGlvbigpe2lmKHRoaXMuX3NjdHA9bnVsbCxcImNocm9tZVwiPT09bi5icm93c2VyJiZuLnZlcnNpb24+PTc2KXt2YXJ7c2RwU2VtYW50aWNzOnR9PXRoaXMuZ2V0Q29uZmlndXJhdGlvbigpO1wicGxhbi1iXCI9PT10JiZPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInNjdHBcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuX3NjdHA/bnVsbDp0aGlzLl9zY3RwfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfWlmKGZ1bmN0aW9uKHQpe2lmKCF0fHwhdC5zZHApcmV0dXJuITE7dmFyIG49ZS5kZWZhdWx0LnNwbGl0U2VjdGlvbnModC5zZHApO3JldHVybiBuLnNoaWZ0KCksbi5zb21lKGZ1bmN0aW9uKHQpe3ZhciBuPWUuZGVmYXVsdC5wYXJzZU1MaW5lKHQpO3JldHVybiBuJiZcImFwcGxpY2F0aW9uXCI9PT1uLmtpbmQmJi0xIT09bi5wcm90b2NvbC5pbmRleE9mKFwiU0NUUFwiKX0pfShhcmd1bWVudHNbMF0pKXt2YXIgcixpPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc2RwLm1hdGNoKC9tb3ppbGxhLi4uVEhJU19JU19TRFBBUlRBLShcXGQrKS8pO2lmKG51bGw9PT10fHx0Lmxlbmd0aDwyKXJldHVybi0xO3ZhciBuPXBhcnNlSW50KHRbMV0sMTApO3JldHVybiBuIT1uPy0xOm59KGFyZ3VtZW50c1swXSksYT0ocD1pLGQ9NjU1MzYsXCJmaXJlZm94XCI9PT1uLmJyb3dzZXImJihkPW4udmVyc2lvbjw1Nz8tMT09PXA/MTYzODQ6MjE0NzQ4MzYzNzpuLnZlcnNpb248NjA/NTc9PT1uLnZlcnNpb24/NjU1MzU6NjU1MzY6MjE0NzQ4MzYzNyksZCksYz1mdW5jdGlvbih0LG8pe3ZhciByPTY1NTM2O1wiZmlyZWZveFwiPT09bi5icm93c2VyJiY1Nz09PW4udmVyc2lvbiYmKHI9NjU1MzUpO3ZhciBpPWUuZGVmYXVsdC5tYXRjaFByZWZpeCh0LnNkcCxcImE9bWF4LW1lc3NhZ2Utc2l6ZTpcIik7cmV0dXJuIGkubGVuZ3RoPjA/cj1wYXJzZUludChpWzBdLnN1YnN0cigxOSksMTApOlwiZmlyZWZveFwiPT09bi5icm93c2VyJiYtMSE9PW8mJihyPTIxNDc0ODM2MzcpLHJ9KGFyZ3VtZW50c1swXSxpKTtyPTA9PT1hJiYwPT09Yz9OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk6MD09PWF8fDA9PT1jP01hdGgubWF4KGEsYyk6TWF0aC5taW4oYSxjKTt2YXIgcz17fTtPYmplY3QuZGVmaW5lUHJvcGVydHkocyxcIm1heE1lc3NhZ2VTaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiByfX0pLHRoaXMuX3NjdHA9c312YXIgcCxkO3JldHVybiBvLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fWZ1bmN0aW9uIHMoZSl7aWYoZS5SVENQZWVyQ29ubmVjdGlvbiYmXCJjcmVhdGVEYXRhQ2hhbm5lbFwiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpe3ZhciBuPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZURhdGFDaGFubmVsO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZURhdGFDaGFubmVsPWZ1bmN0aW9uKCl7dmFyIGU9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIG8oZSx0aGlzKSxlfSx0LndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KGUsXCJkYXRhY2hhbm5lbFwiLGZ1bmN0aW9uKGUpe3JldHVybiBvKGUuY2hhbm5lbCxlLnRhcmdldCksZX0pfWZ1bmN0aW9uIG8oZSx0KXt2YXIgbj1lLnNlbmQ7ZS5zZW5kPWZ1bmN0aW9uKCl7dmFyIG89YXJndW1lbnRzWzBdLHI9by5sZW5ndGh8fG8uc2l6ZXx8by5ieXRlTGVuZ3RoO2lmKFwib3BlblwiPT09ZS5yZWFkeVN0YXRlJiZ0LnNjdHAmJnI+dC5zY3RwLm1heE1lc3NhZ2VTaXplKXRocm93IG5ldyBUeXBlRXJyb3IoXCJNZXNzYWdlIHRvbyBsYXJnZSAoY2FuIHNlbmQgYSBtYXhpbXVtIG9mIFwiK3Quc2N0cC5tYXhNZXNzYWdlU2l6ZStcIiBieXRlcylcIik7cmV0dXJuIG4uYXBwbHkoZSxhcmd1bWVudHMpfX19ZnVuY3Rpb24gcChlKXtpZihlLlJUQ1BlZXJDb25uZWN0aW9uJiYhKFwiY29ubmVjdGlvblN0YXRlXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpe3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiY29ubmVjdGlvblN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybntjb21wbGV0ZWQ6XCJjb25uZWN0ZWRcIixjaGVja2luZzpcImNvbm5lY3RpbmdcIn1bdGhpcy5pY2VDb25uZWN0aW9uU3RhdGVdfHx0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZXx8bnVsbH0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlJiYodGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIsdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2UpLGRlbGV0ZSB0aGlzLl9vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSksZSYmdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIsdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2U9ZSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksW1wic2V0TG9jYWxEZXNjcmlwdGlvblwiLFwic2V0UmVtb3RlRGVzY3JpcHRpb25cIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj10W2VdO3RbZV09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29ubmVjdGlvbnN0YXRlY2hhbmdlcG9seXx8KHRoaXMuX2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZXBvbHk9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YXJnZXQ7aWYodC5fbGFzdENvbm5lY3Rpb25TdGF0ZSE9PXQuY29ubmVjdGlvblN0YXRlKXt0Ll9sYXN0Q29ubmVjdGlvblN0YXRlPXQuY29ubmVjdGlvblN0YXRlO3ZhciBuPW5ldyBFdmVudChcImNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLGUpO3QuZGlzcGF0Y2hFdmVudChuKX1yZXR1cm4gZX0sdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIsdGhpcy5fY29ubmVjdGlvbnN0YXRlY2hhbmdlcG9seSkpLG4uYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pfX1mdW5jdGlvbiBkKGUsdCl7aWYoZS5SVENQZWVyQ29ubmVjdGlvbiYmIShcImNocm9tZVwiPT09dC5icm93c2VyJiZ0LnZlcnNpb24+PTcxfHxcInNhZmFyaVwiPT09dC5icm93c2VyJiZ0LnZlcnNpb24+PTYwNSkpe3ZhciBuPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uPWZ1bmN0aW9uKHQpe2lmKHQmJnQuc2RwJiYtMSE9PXQuc2RwLmluZGV4T2YoXCJcXG5hPWV4dG1hcC1hbGxvdy1taXhlZFwiKSl7dmFyIG89dC5zZHAuc3BsaXQoXCJcXG5cIikuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwiYT1leHRtYXAtYWxsb3ctbWl4ZWRcIiE9PWUudHJpbSgpfSkuam9pbihcIlxcblwiKTtlLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbiYmdCBpbnN0YW5jZW9mIGUuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uP2FyZ3VtZW50c1swXT1uZXcgZS5SVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6dC50eXBlLHNkcDpvfSk6dC5zZHA9b31yZXR1cm4gbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX1mdW5jdGlvbiB1KGUsdCl7aWYoZS5SVENQZWVyQ29ubmVjdGlvbiYmZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpe3ZhciBuPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZTtuJiYwIT09bi5sZW5ndGgmJihlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzWzBdPyhcImNocm9tZVwiPT09dC5icm93c2VyJiZ0LnZlcnNpb248Nzh8fFwiZmlyZWZveFwiPT09dC5icm93c2VyJiZ0LnZlcnNpb248Njh8fFwic2FmYXJpXCI9PT10LmJyb3dzZXIpJiZhcmd1bWVudHNbMF0mJlwiXCI9PT1hcmd1bWVudHNbMF0uY2FuZGlkYXRlP1Byb21pc2UucmVzb2x2ZSgpOm4uYXBwbHkodGhpcyxhcmd1bWVudHMpOihhcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXS5hcHBseShudWxsKSxQcm9taXNlLnJlc29sdmUoKSl9KX19XG59LHtcInNkcFwiOlwiWUh2aFwiLFwiLi91dGlsc1wiOlwiaVN4Q1wifV0sXCJLdGxHXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuYWRhcHRlckZhY3Rvcnk9bzt2YXIgZT1tKHJlcXVpcmUoXCIuL3V0aWxzXCIpKSxpPW0ocmVxdWlyZShcIi4vY2hyb21lL2Nocm9tZV9zaGltXCIpKSxyPW0ocmVxdWlyZShcIi4vZWRnZS9lZGdlX3NoaW1cIikpLHM9bShyZXF1aXJlKFwiLi9maXJlZm94L2ZpcmVmb3hfc2hpbVwiKSksdD1tKHJlcXVpcmUoXCIuL3NhZmFyaS9zYWZhcmlfc2hpbVwiKSksYT1tKHJlcXVpcmUoXCIuL2NvbW1vbl9zaGltXCIpKTtmdW5jdGlvbiBuKCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgV2Vha01hcClyZXR1cm4gbnVsbDt2YXIgZT1uZXcgV2Vha01hcDtyZXR1cm4gbj1mdW5jdGlvbigpe3JldHVybiBlfSxlfWZ1bmN0aW9uIG0oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO2lmKG51bGw9PT1lfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZSlyZXR1cm57ZGVmYXVsdDplfTt2YXIgaT1uKCk7aWYoaSYmaS5oYXMoZSkpcmV0dXJuIGkuZ2V0KGUpO3ZhciByPXt9LHM9T2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2Zvcih2YXIgdCBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpKXt2YXIgYT1zP09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KTpudWxsO2EmJihhLmdldHx8YS5zZXQpP09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLHQsYSk6clt0XT1lW3RdfXJldHVybiByLmRlZmF1bHQ9ZSxpJiZpLnNldChlLHIpLHJ9ZnVuY3Rpb24gbygpe3Zhcnt3aW5kb3c6bn09YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG09YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOntzaGltQ2hyb21lOiEwLHNoaW1GaXJlZm94OiEwLHNoaW1FZGdlOiEwLHNoaW1TYWZhcmk6ITB9LG89ZS5sb2csaD1lLmRldGVjdEJyb3dzZXIobiksZD17YnJvd3NlckRldGFpbHM6aCxjb21tb25TaGltOmEsZXh0cmFjdFZlcnNpb246ZS5leHRyYWN0VmVyc2lvbixkaXNhYmxlTG9nOmUuZGlzYWJsZUxvZyxkaXNhYmxlV2FybmluZ3M6ZS5kaXNhYmxlV2FybmluZ3N9O3N3aXRjaChoLmJyb3dzZXIpe2Nhc2VcImNocm9tZVwiOmlmKCFpfHwhaS5zaGltUGVlckNvbm5lY3Rpb258fCFtLnNoaW1DaHJvbWUpcmV0dXJuIG8oXCJDaHJvbWUgc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuXCIpLGQ7aWYobnVsbD09PWgudmVyc2lvbilyZXR1cm4gbyhcIkNocm9tZSBzaGltIGNhbiBub3QgZGV0ZXJtaW5lIHZlcnNpb24sIG5vdCBzaGltbWluZy5cIiksZDtvKFwiYWRhcHRlci5qcyBzaGltbWluZyBjaHJvbWUuXCIpLGQuYnJvd3NlclNoaW09aSxhLnNoaW1BZGRJY2VDYW5kaWRhdGVOdWxsT3JFbXB0eShuLGgpLGkuc2hpbUdldFVzZXJNZWRpYShuLGgpLGkuc2hpbU1lZGlhU3RyZWFtKG4saCksaS5zaGltUGVlckNvbm5lY3Rpb24obixoKSxpLnNoaW1PblRyYWNrKG4saCksaS5zaGltQWRkVHJhY2tSZW1vdmVUcmFjayhuLGgpLGkuc2hpbUdldFNlbmRlcnNXaXRoRHRtZihuLGgpLGkuc2hpbUdldFN0YXRzKG4saCksaS5zaGltU2VuZGVyUmVjZWl2ZXJHZXRTdGF0cyhuLGgpLGkuZml4TmVnb3RpYXRpb25OZWVkZWQobixoKSxhLnNoaW1SVENJY2VDYW5kaWRhdGUobixoKSxhLnNoaW1Db25uZWN0aW9uU3RhdGUobixoKSxhLnNoaW1NYXhNZXNzYWdlU2l6ZShuLGgpLGEuc2hpbVNlbmRUaHJvd1R5cGVFcnJvcihuLGgpLGEucmVtb3ZlRXh0bWFwQWxsb3dNaXhlZChuLGgpO2JyZWFrO2Nhc2VcImZpcmVmb3hcIjppZighc3x8IXMuc2hpbVBlZXJDb25uZWN0aW9ufHwhbS5zaGltRmlyZWZveClyZXR1cm4gbyhcIkZpcmVmb3ggc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuXCIpLGQ7byhcImFkYXB0ZXIuanMgc2hpbW1pbmcgZmlyZWZveC5cIiksZC5icm93c2VyU2hpbT1zLGEuc2hpbUFkZEljZUNhbmRpZGF0ZU51bGxPckVtcHR5KG4saCkscy5zaGltR2V0VXNlck1lZGlhKG4saCkscy5zaGltUGVlckNvbm5lY3Rpb24obixoKSxzLnNoaW1PblRyYWNrKG4saCkscy5zaGltUmVtb3ZlU3RyZWFtKG4saCkscy5zaGltU2VuZGVyR2V0U3RhdHMobixoKSxzLnNoaW1SZWNlaXZlckdldFN0YXRzKG4saCkscy5zaGltUlRDRGF0YUNoYW5uZWwobixoKSxzLnNoaW1BZGRUcmFuc2NlaXZlcihuLGgpLHMuc2hpbUdldFBhcmFtZXRlcnMobixoKSxzLnNoaW1DcmVhdGVPZmZlcihuLGgpLHMuc2hpbUNyZWF0ZUFuc3dlcihuLGgpLGEuc2hpbVJUQ0ljZUNhbmRpZGF0ZShuLGgpLGEuc2hpbUNvbm5lY3Rpb25TdGF0ZShuLGgpLGEuc2hpbU1heE1lc3NhZ2VTaXplKG4saCksYS5zaGltU2VuZFRocm93VHlwZUVycm9yKG4saCk7YnJlYWs7Y2FzZVwiZWRnZVwiOmlmKCFyfHwhci5zaGltUGVlckNvbm5lY3Rpb258fCFtLnNoaW1FZGdlKXJldHVybiBvKFwiTVMgZWRnZSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS5cIiksZDtvKFwiYWRhcHRlci5qcyBzaGltbWluZyBlZGdlLlwiKSxkLmJyb3dzZXJTaGltPXIsci5zaGltR2V0VXNlck1lZGlhKG4saCksci5zaGltR2V0RGlzcGxheU1lZGlhKG4saCksci5zaGltUGVlckNvbm5lY3Rpb24obixoKSxyLnNoaW1SZXBsYWNlVHJhY2sobixoKSxhLnNoaW1NYXhNZXNzYWdlU2l6ZShuLGgpLGEuc2hpbVNlbmRUaHJvd1R5cGVFcnJvcihuLGgpO2JyZWFrO2Nhc2VcInNhZmFyaVwiOmlmKCF0fHwhbS5zaGltU2FmYXJpKXJldHVybiBvKFwiU2FmYXJpIHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLlwiKSxkO28oXCJhZGFwdGVyLmpzIHNoaW1taW5nIHNhZmFyaS5cIiksZC5icm93c2VyU2hpbT10LGEuc2hpbUFkZEljZUNhbmRpZGF0ZU51bGxPckVtcHR5KG4saCksdC5zaGltUlRDSWNlU2VydmVyVXJscyhuLGgpLHQuc2hpbUNyZWF0ZU9mZmVyTGVnYWN5KG4saCksdC5zaGltQ2FsbGJhY2tzQVBJKG4saCksdC5zaGltTG9jYWxTdHJlYW1zQVBJKG4saCksdC5zaGltUmVtb3RlU3RyZWFtc0FQSShuLGgpLHQuc2hpbVRyYWNrRXZlbnRUcmFuc2NlaXZlcihuLGgpLHQuc2hpbUdldFVzZXJNZWRpYShuLGgpLHQuc2hpbUF1ZGlvQ29udGV4dChuLGgpLGEuc2hpbVJUQ0ljZUNhbmRpZGF0ZShuLGgpLGEuc2hpbU1heE1lc3NhZ2VTaXplKG4saCksYS5zaGltU2VuZFRocm93VHlwZUVycm9yKG4saCksYS5yZW1vdmVFeHRtYXBBbGxvd01peGVkKG4saCk7YnJlYWs7ZGVmYXVsdDpvKFwiVW5zdXBwb3J0ZWQgYnJvd3NlciFcIil9cmV0dXJuIGR9XG59LHtcIi4vdXRpbHNcIjpcImlTeENcIixcIi4vY2hyb21lL2Nocm9tZV9zaGltXCI6XCJ1STVYXCIsXCIuL2VkZ2UvZWRnZV9zaGltXCI6XCJYUmljXCIsXCIuL2ZpcmVmb3gvZmlyZWZveF9zaGltXCI6XCJGemRyXCIsXCIuL3NhZmFyaS9zYWZhcmlfc2hpbVwiOlwidDFsTFwiLFwiLi9jb21tb25fc2hpbVwiOlwiR09RS1wifV0sXCJ0STFYXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuZGVmYXVsdD12b2lkIDA7dmFyIGU9cmVxdWlyZShcIi4vYWRhcHRlcl9mYWN0b3J5LmpzXCIpLHQ9KDAsZS5hZGFwdGVyRmFjdG9yeSkoe3dpbmRvdzpcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93P3ZvaWQgMDp3aW5kb3d9KSxkPXQ7ZXhwb3J0cy5kZWZhdWx0PWQ7XG59LHtcIi4vYWRhcHRlcl9mYWN0b3J5LmpzXCI6XCJLdGxHXCJ9XSxcInNYdFZcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIGU9dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy53ZWJSVENBZGFwdGVyPXZvaWQgMDt2YXIgdD1lKHJlcXVpcmUoXCJ3ZWJydGMtYWRhcHRlclwiKSk7ZXhwb3J0cy53ZWJSVENBZGFwdGVyPXQuZGVmYXVsdDtcbn0se1wid2VicnRjLWFkYXB0ZXJcIjpcInRJMVhcIn1dLFwiSTMxZlwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLlN1cHBvcnRzPXZvaWQgMDt2YXIgcj1yZXF1aXJlKFwiLi9hZGFwdGVyXCIpO2V4cG9ydHMuU3VwcG9ydHM9bmV3KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuaXNJT1M9W1wiaVBhZFwiLFwiaVBob25lXCIsXCJpUG9kXCJdLmluY2x1ZGVzKG5hdmlnYXRvci5wbGF0Zm9ybSksdGhpcy5zdXBwb3J0ZWRCcm93c2Vycz1bXCJmaXJlZm94XCIsXCJjaHJvbWVcIixcInNhZmFyaVwiXSx0aGlzLm1pbkZpcmVmb3hWZXJzaW9uPTU5LHRoaXMubWluQ2hyb21lVmVyc2lvbj03Mix0aGlzLm1pblNhZmFyaVZlcnNpb249NjA1fXJldHVybiBlLnByb3RvdHlwZS5pc1dlYlJUQ1N1cHBvcnRlZD1mdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBSVENQZWVyQ29ubmVjdGlvbn0sZS5wcm90b3R5cGUuaXNCcm93c2VyU3VwcG9ydGVkPWZ1bmN0aW9uKCl7dmFyIHI9dGhpcy5nZXRCcm93c2VyKCksZT10aGlzLmdldFZlcnNpb24oKTtyZXR1cm4hIXRoaXMuc3VwcG9ydGVkQnJvd3NlcnMuaW5jbHVkZXMocikmJihcImNocm9tZVwiPT09cj9lPj10aGlzLm1pbkNocm9tZVZlcnNpb246XCJmaXJlZm94XCI9PT1yP2U+PXRoaXMubWluRmlyZWZveFZlcnNpb246XCJzYWZhcmlcIj09PXImJighdGhpcy5pc0lPUyYmZT49dGhpcy5taW5TYWZhcmlWZXJzaW9uKSl9LGUucHJvdG90eXBlLmdldEJyb3dzZXI9ZnVuY3Rpb24oKXtyZXR1cm4gci53ZWJSVENBZGFwdGVyLmJyb3dzZXJEZXRhaWxzLmJyb3dzZXJ9LGUucHJvdG90eXBlLmdldFZlcnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gci53ZWJSVENBZGFwdGVyLmJyb3dzZXJEZXRhaWxzLnZlcnNpb258fDB9LGUucHJvdG90eXBlLmlzVW5pZmllZFBsYW5TdXBwb3J0ZWQ9ZnVuY3Rpb24oKXt2YXIgZSxpPXRoaXMuZ2V0QnJvd3NlcigpLHQ9ci53ZWJSVENBZGFwdGVyLmJyb3dzZXJEZXRhaWxzLnZlcnNpb258fDA7aWYoXCJjaHJvbWVcIj09PWkmJnQ8NzIpcmV0dXJuITE7aWYoXCJmaXJlZm94XCI9PT1pJiZ0Pj01OSlyZXR1cm4hMDtpZighKHdpbmRvdy5SVENSdHBUcmFuc2NlaXZlciYmXCJjdXJyZW50RGlyZWN0aW9uXCJpbiBSVENSdHBUcmFuc2NlaXZlci5wcm90b3R5cGUpKXJldHVybiExO3ZhciBvPSExO3RyeXsoZT1uZXcgUlRDUGVlckNvbm5lY3Rpb24pLmFkZFRyYW5zY2VpdmVyKFwiYXVkaW9cIiksbz0hMH1jYXRjaChzKXt9ZmluYWxseXtlJiZlLmNsb3NlKCl9cmV0dXJuIG99LGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJTdXBwb3J0czogXFxuICAgIGJyb3dzZXI6XCIrdGhpcy5nZXRCcm93c2VyKCkrXCIgXFxuICAgIHZlcnNpb246XCIrdGhpcy5nZXRWZXJzaW9uKCkrXCIgXFxuICAgIGlzSU9TOlwiK3RoaXMuaXNJT1MrXCIgXFxuICAgIGlzV2ViUlRDU3VwcG9ydGVkOlwiK3RoaXMuaXNXZWJSVENTdXBwb3J0ZWQoKStcIiBcXG4gICAgaXNCcm93c2VyU3VwcG9ydGVkOlwiK3RoaXMuaXNCcm93c2VyU3VwcG9ydGVkKCkrXCIgXFxuICAgIGlzVW5pZmllZFBsYW5TdXBwb3J0ZWQ6XCIrdGhpcy5pc1VuaWZpZWRQbGFuU3VwcG9ydGVkKCl9LGV9KCkpO1xufSx7XCIuL2FkYXB0ZXJcIjpcInNYdFZcIn1dLFwiQkhYZlwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgZT10aGlzJiZ0aGlzLl9fY3JlYXRlQmluZGluZ3x8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0LHIsbyl7dm9pZCAwPT09byYmKG89ciksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbyx7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdFtyXX19KX06ZnVuY3Rpb24oZSx0LHIsbyl7dm9pZCAwPT09byYmKG89ciksZVtvXT10W3JdfSksdD10aGlzJiZ0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdHx8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcImRlZmF1bHRcIix7ZW51bWVyYWJsZTohMCx2YWx1ZTp0fSl9OmZ1bmN0aW9uKGUsdCl7ZS5kZWZhdWx0PXR9KSxyPXRoaXMmJnRoaXMuX19pbXBvcnRTdGFyfHxmdW5jdGlvbihyKXtpZihyJiZyLl9fZXNNb2R1bGUpcmV0dXJuIHI7dmFyIG89e307aWYobnVsbCE9cilmb3IodmFyIG4gaW4gcilcImRlZmF1bHRcIiE9PW4mJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLG4pJiZlKG8scixuKTtyZXR1cm4gdChvLHIpLG99O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMudXRpbD12b2lkIDA7dmFyIG89cihyZXF1aXJlKFwicGVlcmpzLWpzLWJpbmFyeXBhY2tcIikpLG49cmVxdWlyZShcIi4vc3VwcG9ydHNcIiksaT17aWNlU2VydmVyczpbe3VybHM6XCJzdHVuOnN0dW4ubC5nb29nbGUuY29tOjE5MzAyXCJ9LHt1cmxzOlwidHVybjowLnBlZXJqcy5jb206MzQ3OFwiLHVzZXJuYW1lOlwicGVlcmpzXCIsY3JlZGVudGlhbDpcInBlZXJqc3BcIn1dLHNkcFNlbWFudGljczpcInVuaWZpZWQtcGxhblwifTtleHBvcnRzLnV0aWw9bmV3KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuQ0xPVURfSE9TVD1cIjAucGVlcmpzLmNvbVwiLHRoaXMuQ0xPVURfUE9SVD00NDMsdGhpcy5jaHVua2VkQnJvd3NlcnM9e0Nocm9tZToxLGNocm9tZToxfSx0aGlzLmNodW5rZWRNVFU9MTYzMDAsdGhpcy5kZWZhdWx0Q29uZmlnPWksdGhpcy5icm93c2VyPW4uU3VwcG9ydHMuZ2V0QnJvd3NlcigpLHRoaXMuYnJvd3NlclZlcnNpb249bi5TdXBwb3J0cy5nZXRWZXJzaW9uKCksdGhpcy5zdXBwb3J0cz1mdW5jdGlvbigpe3ZhciBlLHQ9e2Jyb3dzZXI6bi5TdXBwb3J0cy5pc0Jyb3dzZXJTdXBwb3J0ZWQoKSx3ZWJSVEM6bi5TdXBwb3J0cy5pc1dlYlJUQ1N1cHBvcnRlZCgpLGF1ZGlvVmlkZW86ITEsZGF0YTohMSxiaW5hcnlCbG9iOiExLHJlbGlhYmxlOiExfTtpZighdC53ZWJSVEMpcmV0dXJuIHQ7dHJ5e2U9bmV3IFJUQ1BlZXJDb25uZWN0aW9uKGkpLHQuYXVkaW9WaWRlbz0hMDt2YXIgcj12b2lkIDA7dHJ5e3I9ZS5jcmVhdGVEYXRhQ2hhbm5lbChcIl9QRUVSSlNURVNUXCIse29yZGVyZWQ6ITB9KSx0LmRhdGE9ITAsdC5yZWxpYWJsZT0hIXIub3JkZXJlZDt0cnl7ci5iaW5hcnlUeXBlPVwiYmxvYlwiLHQuYmluYXJ5QmxvYj0hbi5TdXBwb3J0cy5pc0lPU31jYXRjaChvKXt9fWNhdGNoKG8pe31maW5hbGx5e3ImJnIuY2xvc2UoKX19Y2F0Y2gobyl7fWZpbmFsbHl7ZSYmZS5jbG9zZSgpfXJldHVybiB0fSgpLHRoaXMucGFjaz1vLnBhY2ssdGhpcy51bnBhY2s9by51bnBhY2ssdGhpcy5fZGF0YUNvdW50PTF9cmV0dXJuIGUucHJvdG90eXBlLm5vb3A9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLnZhbGlkYXRlSWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIWV8fC9eW0EtWmEtejAtOV0rKD86WyBfLV1bQS1aYS16MC05XSspKiQvLnRlc3QoZSl9LGUucHJvdG90eXBlLmNodW5rPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPWUuc2l6ZSxvPU1hdGguY2VpbChyL2V4cG9ydHMudXRpbC5jaHVua2VkTVRVKSxuPTAsaT0wO2k8cjspe3ZhciBhPU1hdGgubWluKHIsaStleHBvcnRzLnV0aWwuY2h1bmtlZE1UVSksdT1lLnNsaWNlKGksYSkscz17X19wZWVyRGF0YTp0aGlzLl9kYXRhQ291bnQsbjpuLGRhdGE6dSx0b3RhbDpvfTt0LnB1c2gocyksaT1hLG4rK31yZXR1cm4gdGhpcy5fZGF0YUNvdW50KyssdH0sZS5wcm90b3R5cGUuYmxvYlRvQXJyYXlCdWZmZXI9ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgRmlsZVJlYWRlcjtyZXR1cm4gci5vbmxvYWQ9ZnVuY3Rpb24oZSl7ZS50YXJnZXQmJnQoZS50YXJnZXQucmVzdWx0KX0sci5yZWFkQXNBcnJheUJ1ZmZlcihlKSxyfSxlLnByb3RvdHlwZS5iaW5hcnlTdHJpbmdUb0FycmF5QnVmZmVyPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1uZXcgVWludDhBcnJheShlLmxlbmd0aCkscj0wO3I8ZS5sZW5ndGg7cisrKXRbcl09MjU1JmUuY2hhckNvZGVBdChyKTtyZXR1cm4gdC5idWZmZXJ9LGUucHJvdG90eXBlLnJhbmRvbVRva2VuPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyKX0sZS5wcm90b3R5cGUuaXNTZWN1cmU9ZnVuY3Rpb24oKXtyZXR1cm5cImh0dHBzOlwiPT09bG9jYXRpb24ucHJvdG9jb2x9LGV9KCkpO1xufSx7XCJwZWVyanMtanMtYmluYXJ5cGFja1wiOlwia2RQcFwiLFwiLi9zdXBwb3J0c1wiOlwiSTMxZlwifV0sXCJKSmxTXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksdD1cIn5cIjtmdW5jdGlvbiBuKCl7fWZ1bmN0aW9uIHIoZSx0LG4pe3RoaXMuZm49ZSx0aGlzLmNvbnRleHQ9dCx0aGlzLm9uY2U9bnx8ITF9ZnVuY3Rpb24gbyhlLG4sbyxzLGkpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG8pdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7dmFyIGM9bmV3IHIobyxzfHxlLGkpLGY9dD90K246bjtyZXR1cm4gZS5fZXZlbnRzW2ZdP2UuX2V2ZW50c1tmXS5mbj9lLl9ldmVudHNbZl09W2UuX2V2ZW50c1tmXSxjXTplLl9ldmVudHNbZl0ucHVzaChjKTooZS5fZXZlbnRzW2ZdPWMsZS5fZXZlbnRzQ291bnQrKyksZX1mdW5jdGlvbiBzKGUsdCl7MD09LS1lLl9ldmVudHNDb3VudD9lLl9ldmVudHM9bmV3IG46ZGVsZXRlIGUuX2V2ZW50c1t0XX1mdW5jdGlvbiBpKCl7dGhpcy5fZXZlbnRzPW5ldyBuLHRoaXMuX2V2ZW50c0NvdW50PTB9T2JqZWN0LmNyZWF0ZSYmKG4ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobnVsbCksKG5ldyBuKS5fX3Byb3RvX198fCh0PSExKSksaS5wcm90b3R5cGUuZXZlbnROYW1lcz1mdW5jdGlvbigpe3ZhciBuLHIsbz1bXTtpZigwPT09dGhpcy5fZXZlbnRzQ291bnQpcmV0dXJuIG87Zm9yKHIgaW4gbj10aGlzLl9ldmVudHMpZS5jYWxsKG4scikmJm8ucHVzaCh0P3Iuc2xpY2UoMSk6cik7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM/by5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhuKSk6b30saS5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciBuPXQ/dCtlOmUscj10aGlzLl9ldmVudHNbbl07aWYoIXIpcmV0dXJuW107aWYoci5mbilyZXR1cm5bci5mbl07Zm9yKHZhciBvPTAscz1yLmxlbmd0aCxpPW5ldyBBcnJheShzKTtvPHM7bysrKWlbb109cltvXS5mbjtyZXR1cm4gaX0saS5wcm90b3R5cGUubGlzdGVuZXJDb3VudD1mdW5jdGlvbihlKXt2YXIgbj10P3QrZTplLHI9dGhpcy5fZXZlbnRzW25dO3JldHVybiByP3IuZm4/MTpyLmxlbmd0aDowfSxpLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGUsbixyLG8scyxpKXt2YXIgYz10P3QrZTplO2lmKCF0aGlzLl9ldmVudHNbY10pcmV0dXJuITE7dmFyIGYsdSxhPXRoaXMuX2V2ZW50c1tjXSxsPWFyZ3VtZW50cy5sZW5ndGg7aWYoYS5mbil7c3dpdGNoKGEub25jZSYmdGhpcy5yZW1vdmVMaXN0ZW5lcihlLGEuZm4sdm9pZCAwLCEwKSxsKXtjYXNlIDE6cmV0dXJuIGEuZm4uY2FsbChhLmNvbnRleHQpLCEwO2Nhc2UgMjpyZXR1cm4gYS5mbi5jYWxsKGEuY29udGV4dCxuKSwhMDtjYXNlIDM6cmV0dXJuIGEuZm4uY2FsbChhLmNvbnRleHQsbixyKSwhMDtjYXNlIDQ6cmV0dXJuIGEuZm4uY2FsbChhLmNvbnRleHQsbixyLG8pLCEwO2Nhc2UgNTpyZXR1cm4gYS5mbi5jYWxsKGEuY29udGV4dCxuLHIsbyxzKSwhMDtjYXNlIDY6cmV0dXJuIGEuZm4uY2FsbChhLmNvbnRleHQsbixyLG8scyxpKSwhMH1mb3IodT0xLGY9bmV3IEFycmF5KGwtMSk7dTxsO3UrKylmW3UtMV09YXJndW1lbnRzW3VdO2EuZm4uYXBwbHkoYS5jb250ZXh0LGYpfWVsc2V7dmFyIHYsaD1hLmxlbmd0aDtmb3IodT0wO3U8aDt1Kyspc3dpdGNoKGFbdV0ub25jZSYmdGhpcy5yZW1vdmVMaXN0ZW5lcihlLGFbdV0uZm4sdm9pZCAwLCEwKSxsKXtjYXNlIDE6YVt1XS5mbi5jYWxsKGFbdV0uY29udGV4dCk7YnJlYWs7Y2FzZSAyOmFbdV0uZm4uY2FsbChhW3VdLmNvbnRleHQsbik7YnJlYWs7Y2FzZSAzOmFbdV0uZm4uY2FsbChhW3VdLmNvbnRleHQsbixyKTticmVhaztjYXNlIDQ6YVt1XS5mbi5jYWxsKGFbdV0uY29udGV4dCxuLHIsbyk7YnJlYWs7ZGVmYXVsdDppZighZilmb3Iodj0xLGY9bmV3IEFycmF5KGwtMSk7djxsO3YrKylmW3YtMV09YXJndW1lbnRzW3ZdO2FbdV0uZm4uYXBwbHkoYVt1XS5jb250ZXh0LGYpfX1yZXR1cm4hMH0saS5wcm90b3R5cGUub249ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBvKHRoaXMsZSx0LG4sITEpfSxpLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbyh0aGlzLGUsdCxuLCEwKX0saS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZSxuLHIsbyl7dmFyIGk9dD90K2U6ZTtpZighdGhpcy5fZXZlbnRzW2ldKXJldHVybiB0aGlzO2lmKCFuKXJldHVybiBzKHRoaXMsaSksdGhpczt2YXIgYz10aGlzLl9ldmVudHNbaV07aWYoYy5mbiljLmZuIT09bnx8byYmIWMub25jZXx8ciYmYy5jb250ZXh0IT09cnx8cyh0aGlzLGkpO2Vsc2V7Zm9yKHZhciBmPTAsdT1bXSxhPWMubGVuZ3RoO2Y8YTtmKyspKGNbZl0uZm4hPT1ufHxvJiYhY1tmXS5vbmNlfHxyJiZjW2ZdLmNvbnRleHQhPT1yKSYmdS5wdXNoKGNbZl0pO3UubGVuZ3RoP3RoaXMuX2V2ZW50c1tpXT0xPT09dS5sZW5ndGg/dVswXTp1OnModGhpcyxpKX1yZXR1cm4gdGhpc30saS5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciByO3JldHVybiBlPyhyPXQ/dCtlOmUsdGhpcy5fZXZlbnRzW3JdJiZzKHRoaXMscikpOih0aGlzLl9ldmVudHM9bmV3IG4sdGhpcy5fZXZlbnRzQ291bnQ9MCksdGhpc30saS5wcm90b3R5cGUub2ZmPWkucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyLGkucHJvdG90eXBlLmFkZExpc3RlbmVyPWkucHJvdG90eXBlLm9uLGkucHJlZml4ZWQ9dCxpLkV2ZW50RW1pdHRlcj1pLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJihtb2R1bGUuZXhwb3J0cz1pKTtcbn0se31dLFwiV09zOVwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgcj10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24ocixlKXt2YXIgbz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJnJbU3ltYm9sLml0ZXJhdG9yXTtpZighbylyZXR1cm4gcjt2YXIgdCxuLGw9by5jYWxsKHIpLGk9W107dHJ5e2Zvcig7KHZvaWQgMD09PWV8fGUtLSA+MCkmJiEodD1sLm5leHQoKSkuZG9uZTspaS5wdXNoKHQudmFsdWUpfWNhdGNoKHMpe249e2Vycm9yOnN9fWZpbmFsbHl7dHJ5e3QmJiF0LmRvbmUmJihvPWwucmV0dXJuKSYmby5jYWxsKGwpfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX1yZXR1cm4gaX0sZT10aGlzJiZ0aGlzLl9fc3ByZWFkQXJyYXl8fGZ1bmN0aW9uKHIsZSl7Zm9yKHZhciBvPTAsdD1lLmxlbmd0aCxuPXIubGVuZ3RoO288dDtvKyssbisrKXJbbl09ZVtvXTtyZXR1cm4gcn07T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5Mb2dMZXZlbD12b2lkIDA7dmFyIG8sdD1cIlBlZXJKUzogXCI7IWZ1bmN0aW9uKHIpe3Jbci5EaXNhYmxlZD0wXT1cIkRpc2FibGVkXCIscltyLkVycm9ycz0xXT1cIkVycm9yc1wiLHJbci5XYXJuaW5ncz0yXT1cIldhcm5pbmdzXCIscltyLkFsbD0zXT1cIkFsbFwifShvPWV4cG9ydHMuTG9nTGV2ZWx8fChleHBvcnRzLkxvZ0xldmVsPXt9KSk7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKCl7dGhpcy5fbG9nTGV2ZWw9by5EaXNhYmxlZH1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwibG9nTGV2ZWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvZ0xldmVsfSxzZXQ6ZnVuY3Rpb24ocil7dGhpcy5fbG9nTGV2ZWw9cn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxuLnByb3RvdHlwZS5sb2c9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuXT1hcmd1bWVudHNbbl07dGhpcy5fbG9nTGV2ZWw+PW8uQWxsJiZ0aGlzLl9wcmludC5hcHBseSh0aGlzLGUoW28uQWxsXSxyKHQpKSl9LG4ucHJvdG90eXBlLndhcm49ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuXT1hcmd1bWVudHNbbl07dGhpcy5fbG9nTGV2ZWw+PW8uV2FybmluZ3MmJnRoaXMuX3ByaW50LmFwcGx5KHRoaXMsZShbby5XYXJuaW5nc10scih0KSkpfSxuLnByb3RvdHlwZS5lcnJvcj1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W25dPWFyZ3VtZW50c1tuXTt0aGlzLl9sb2dMZXZlbD49by5FcnJvcnMmJnRoaXMuX3ByaW50LmFwcGx5KHRoaXMsZShbby5FcnJvcnNdLHIodCkpKX0sbi5wcm90b3R5cGUuc2V0TG9nRnVuY3Rpb249ZnVuY3Rpb24ocil7dGhpcy5fcHJpbnQ9cn0sbi5wcm90b3R5cGUuX3ByaW50PWZ1bmN0aW9uKG4pe2Zvcih2YXIgbD1bXSxpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKylsW2ktMV09YXJndW1lbnRzW2ldO3ZhciBzPWUoW3RdLHIobCkpO2Zvcih2YXIgYSBpbiBzKXNbYV1pbnN0YW5jZW9mIEVycm9yJiYoc1thXT1cIihcIitzW2FdLm5hbWUrXCIpIFwiK3NbYV0ubWVzc2FnZSk7bj49by5BbGw/Y29uc29sZS5sb2cuYXBwbHkoY29uc29sZSxlKFtdLHIocykpKTpuPj1vLldhcm5pbmdzP2NvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLGUoW1wiV0FSTklOR1wiXSxyKHMpKSk6bj49by5FcnJvcnMmJmNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSxlKFtcIkVSUk9SXCJdLHIocykpKX0sbn0oKTtleHBvcnRzLmRlZmF1bHQ9bmV3IG47XG59LHt9XSxcIlpSWWZcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIGUscixvLG4sdCxhLGk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5TZXJ2ZXJNZXNzYWdlVHlwZT1leHBvcnRzLlNvY2tldEV2ZW50VHlwZT1leHBvcnRzLlNlcmlhbGl6YXRpb25UeXBlPWV4cG9ydHMuUGVlckVycm9yVHlwZT1leHBvcnRzLlBlZXJFdmVudFR5cGU9ZXhwb3J0cy5Db25uZWN0aW9uVHlwZT1leHBvcnRzLkNvbm5lY3Rpb25FdmVudFR5cGU9dm9pZCAwLGZ1bmN0aW9uKGUpe2UuT3Blbj1cIm9wZW5cIixlLlN0cmVhbT1cInN0cmVhbVwiLGUuRGF0YT1cImRhdGFcIixlLkNsb3NlPVwiY2xvc2VcIixlLkVycm9yPVwiZXJyb3JcIixlLkljZVN0YXRlQ2hhbmdlZD1cImljZVN0YXRlQ2hhbmdlZFwifShlPWV4cG9ydHMuQ29ubmVjdGlvbkV2ZW50VHlwZXx8KGV4cG9ydHMuQ29ubmVjdGlvbkV2ZW50VHlwZT17fSkpLGZ1bmN0aW9uKGUpe2UuRGF0YT1cImRhdGFcIixlLk1lZGlhPVwibWVkaWFcIn0ocj1leHBvcnRzLkNvbm5lY3Rpb25UeXBlfHwoZXhwb3J0cy5Db25uZWN0aW9uVHlwZT17fSkpLGZ1bmN0aW9uKGUpe2UuT3Blbj1cIm9wZW5cIixlLkNsb3NlPVwiY2xvc2VcIixlLkNvbm5lY3Rpb249XCJjb25uZWN0aW9uXCIsZS5DYWxsPVwiY2FsbFwiLGUuRGlzY29ubmVjdGVkPVwiZGlzY29ubmVjdGVkXCIsZS5FcnJvcj1cImVycm9yXCJ9KG89ZXhwb3J0cy5QZWVyRXZlbnRUeXBlfHwoZXhwb3J0cy5QZWVyRXZlbnRUeXBlPXt9KSksZnVuY3Rpb24oZSl7ZS5Ccm93c2VySW5jb21wYXRpYmxlPVwiYnJvd3Nlci1pbmNvbXBhdGlibGVcIixlLkRpc2Nvbm5lY3RlZD1cImRpc2Nvbm5lY3RlZFwiLGUuSW52YWxpZElEPVwiaW52YWxpZC1pZFwiLGUuSW52YWxpZEtleT1cImludmFsaWQta2V5XCIsZS5OZXR3b3JrPVwibmV0d29ya1wiLGUuUGVlclVuYXZhaWxhYmxlPVwicGVlci11bmF2YWlsYWJsZVwiLGUuU3NsVW5hdmFpbGFibGU9XCJzc2wtdW5hdmFpbGFibGVcIixlLlNlcnZlckVycm9yPVwic2VydmVyLWVycm9yXCIsZS5Tb2NrZXRFcnJvcj1cInNvY2tldC1lcnJvclwiLGUuU29ja2V0Q2xvc2VkPVwic29ja2V0LWNsb3NlZFwiLGUuVW5hdmFpbGFibGVJRD1cInVuYXZhaWxhYmxlLWlkXCIsZS5XZWJSVEM9XCJ3ZWJydGNcIn0obj1leHBvcnRzLlBlZXJFcnJvclR5cGV8fChleHBvcnRzLlBlZXJFcnJvclR5cGU9e30pKSxmdW5jdGlvbihlKXtlLkJpbmFyeT1cImJpbmFyeVwiLGUuQmluYXJ5VVRGOD1cImJpbmFyeS11dGY4XCIsZS5KU09OPVwianNvblwifSh0PWV4cG9ydHMuU2VyaWFsaXphdGlvblR5cGV8fChleHBvcnRzLlNlcmlhbGl6YXRpb25UeXBlPXt9KSksZnVuY3Rpb24oZSl7ZS5NZXNzYWdlPVwibWVzc2FnZVwiLGUuRGlzY29ubmVjdGVkPVwiZGlzY29ubmVjdGVkXCIsZS5FcnJvcj1cImVycm9yXCIsZS5DbG9zZT1cImNsb3NlXCJ9KGE9ZXhwb3J0cy5Tb2NrZXRFdmVudFR5cGV8fChleHBvcnRzLlNvY2tldEV2ZW50VHlwZT17fSkpLGZ1bmN0aW9uKGUpe2UuSGVhcnRiZWF0PVwiSEVBUlRCRUFUXCIsZS5DYW5kaWRhdGU9XCJDQU5ESURBVEVcIixlLk9mZmVyPVwiT0ZGRVJcIixlLkFuc3dlcj1cIkFOU1dFUlwiLGUuT3Blbj1cIk9QRU5cIixlLkVycm9yPVwiRVJST1JcIixlLklkVGFrZW49XCJJRC1UQUtFTlwiLGUuSW52YWxpZEtleT1cIklOVkFMSUQtS0VZXCIsZS5MZWF2ZT1cIkxFQVZFXCIsZS5FeHBpcmU9XCJFWFBJUkVcIn0oaT1leHBvcnRzLlNlcnZlck1lc3NhZ2VUeXBlfHwoZXhwb3J0cy5TZXJ2ZXJNZXNzYWdlVHlwZT17fSkpO1xufSx7fV0sXCJ3Smx2XCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsbil7cmV0dXJuKGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pfSkodCxuKX07cmV0dXJuIGZ1bmN0aW9uKHQsbil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgbiYmbnVsbCE9PW4pdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIrU3RyaW5nKG4pK1wiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7ZnVuY3Rpb24gbygpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsbiksdC5wcm90b3R5cGU9bnVsbD09PW4/T2JqZWN0LmNyZWF0ZShuKTooby5wcm90b3R5cGU9bi5wcm90b3R5cGUsbmV3IG8pfX0oKSx0PXRoaXMmJnRoaXMuX19yZWFkfHxmdW5jdGlvbihlLHQpe3ZhciBuPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCFuKXJldHVybiBlO3ZhciBvLHMscj1uLmNhbGwoZSksaT1bXTt0cnl7Zm9yKDsodm9pZCAwPT09dHx8dC0tID4wKSYmIShvPXIubmV4dCgpKS5kb25lOylpLnB1c2goby52YWx1ZSl9Y2F0Y2goYyl7cz17ZXJyb3I6Y319ZmluYWxseXt0cnl7byYmIW8uZG9uZSYmKG49ci5yZXR1cm4pJiZuLmNhbGwocil9ZmluYWxseXtpZihzKXRocm93IHMuZXJyb3J9fXJldHVybiBpfSxuPXRoaXMmJnRoaXMuX19zcHJlYWRBcnJheXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxvPXQubGVuZ3RoLHM9ZS5sZW5ndGg7bjxvO24rKyxzKyspZVtzXT10W25dO3JldHVybiBlfSxvPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLG49dCYmZVt0XSxvPTA7aWYobilyZXR1cm4gbi5jYWxsKGUpO2lmKGUmJlwibnVtYmVyXCI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZvPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtvKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0P1wiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIjpcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIil9LHM9dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5Tb2NrZXQ9dm9pZCAwO3ZhciByPXJlcXVpcmUoXCJldmVudGVtaXR0ZXIzXCIpLGk9cyhyZXF1aXJlKFwiLi9sb2dnZXJcIikpLGM9cmVxdWlyZShcIi4vZW51bXNcIiksYT1mdW5jdGlvbihzKXtmdW5jdGlvbiByKGUsdCxuLG8scixpKXt2b2lkIDA9PT1pJiYoaT01ZTMpO3ZhciBjPXMuY2FsbCh0aGlzKXx8dGhpcztjLnBpbmdJbnRlcnZhbD1pLGMuX2Rpc2Nvbm5lY3RlZD0hMCxjLl9tZXNzYWdlc1F1ZXVlPVtdO3ZhciBhPWU/XCJ3c3M6Ly9cIjpcIndzOi8vXCI7cmV0dXJuIGMuX2Jhc2VVcmw9YSt0K1wiOlwiK24rbytcInBlZXJqcz9rZXk9XCIrcixjfXJldHVybiBlKHIscyksci5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3RoaXMuX2lkPWU7dmFyIG89dGhpcy5fYmFzZVVybCtcIiZpZD1cIitlK1wiJnRva2VuPVwiK3Q7IXRoaXMuX3NvY2tldCYmdGhpcy5fZGlzY29ubmVjdGVkJiYodGhpcy5fc29ja2V0PW5ldyBXZWJTb2NrZXQobyksdGhpcy5fZGlzY29ubmVjdGVkPSExLHRoaXMuX3NvY2tldC5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ7dHJ5e3Q9SlNPTi5wYXJzZShlLmRhdGEpLGkuZGVmYXVsdC5sb2coXCJTZXJ2ZXIgbWVzc2FnZSByZWNlaXZlZDpcIix0KX1jYXRjaChvKXtyZXR1cm4gdm9pZCBpLmRlZmF1bHQubG9nKFwiSW52YWxpZCBzZXJ2ZXIgbWVzc2FnZVwiLGUuZGF0YSl9bi5lbWl0KGMuU29ja2V0RXZlbnRUeXBlLk1lc3NhZ2UsdCl9LHRoaXMuX3NvY2tldC5vbmNsb3NlPWZ1bmN0aW9uKGUpe24uX2Rpc2Nvbm5lY3RlZHx8KGkuZGVmYXVsdC5sb2coXCJTb2NrZXQgY2xvc2VkLlwiLGUpLG4uX2NsZWFudXAoKSxuLl9kaXNjb25uZWN0ZWQ9ITAsbi5lbWl0KGMuU29ja2V0RXZlbnRUeXBlLkRpc2Nvbm5lY3RlZCkpfSx0aGlzLl9zb2NrZXQub25vcGVuPWZ1bmN0aW9uKCl7bi5fZGlzY29ubmVjdGVkfHwobi5fc2VuZFF1ZXVlZE1lc3NhZ2VzKCksaS5kZWZhdWx0LmxvZyhcIlNvY2tldCBvcGVuXCIpLG4uX3NjaGVkdWxlSGVhcnRiZWF0KCkpfSl9LHIucHJvdG90eXBlLl9zY2hlZHVsZUhlYXJ0YmVhdD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fd3NQaW5nVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe2UuX3NlbmRIZWFydGJlYXQoKX0sdGhpcy5waW5nSW50ZXJ2YWwpfSxyLnByb3RvdHlwZS5fc2VuZEhlYXJ0YmVhdD1mdW5jdGlvbigpe2lmKHRoaXMuX3dzT3BlbigpKXt2YXIgZT1KU09OLnN0cmluZ2lmeSh7dHlwZTpjLlNlcnZlck1lc3NhZ2VUeXBlLkhlYXJ0YmVhdH0pO3RoaXMuX3NvY2tldC5zZW5kKGUpLHRoaXMuX3NjaGVkdWxlSGVhcnRiZWF0KCl9ZWxzZSBpLmRlZmF1bHQubG9nKFwiQ2Fubm90IHNlbmQgaGVhcnRiZWF0LCBiZWNhdXNlIHNvY2tldCBjbG9zZWRcIil9LHIucHJvdG90eXBlLl93c09wZW49ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX3NvY2tldCYmMT09PXRoaXMuX3NvY2tldC5yZWFkeVN0YXRlfSxyLnByb3RvdHlwZS5fc2VuZFF1ZXVlZE1lc3NhZ2VzPWZ1bmN0aW9uKCl7dmFyIGUscyxyPW4oW10sdCh0aGlzLl9tZXNzYWdlc1F1ZXVlKSk7dGhpcy5fbWVzc2FnZXNRdWV1ZT1bXTt0cnl7Zm9yKHZhciBpPW8ociksYz1pLm5leHQoKTshYy5kb25lO2M9aS5uZXh0KCkpe3ZhciBhPWMudmFsdWU7dGhpcy5zZW5kKGEpfX1jYXRjaCh1KXtlPXtlcnJvcjp1fX1maW5hbGx5e3RyeXtjJiYhYy5kb25lJiYocz1pLnJldHVybikmJnMuY2FsbChpKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19fSxyLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLl9kaXNjb25uZWN0ZWQpaWYodGhpcy5faWQpaWYoZS50eXBlKXtpZih0aGlzLl93c09wZW4oKSl7dmFyIHQ9SlNPTi5zdHJpbmdpZnkoZSk7dGhpcy5fc29ja2V0LnNlbmQodCl9fWVsc2UgdGhpcy5lbWl0KGMuU29ja2V0RXZlbnRUeXBlLkVycm9yLFwiSW52YWxpZCBtZXNzYWdlXCIpO2Vsc2UgdGhpcy5fbWVzc2FnZXNRdWV1ZS5wdXNoKGUpfSxyLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3RoaXMuX2Rpc2Nvbm5lY3RlZHx8KHRoaXMuX2NsZWFudXAoKSx0aGlzLl9kaXNjb25uZWN0ZWQ9ITApfSxyLnByb3RvdHlwZS5fY2xlYW51cD1mdW5jdGlvbigpe3RoaXMuX3NvY2tldCYmKHRoaXMuX3NvY2tldC5vbm9wZW49dGhpcy5fc29ja2V0Lm9ubWVzc2FnZT10aGlzLl9zb2NrZXQub25jbG9zZT1udWxsLHRoaXMuX3NvY2tldC5jbG9zZSgpLHRoaXMuX3NvY2tldD12b2lkIDApLGNsZWFyVGltZW91dCh0aGlzLl93c1BpbmdUaW1lcil9LHJ9KHIuRXZlbnRFbWl0dGVyKTtleHBvcnRzLlNvY2tldD1hO1xufSx7XCJldmVudGVtaXR0ZXIzXCI6XCJKSmxTXCIsXCIuL2xvZ2dlclwiOlwiV09zOVwiLFwiLi9lbnVtc1wiOlwiWlJZZlwifV0sXCJIQ2RYXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPXRoaXMmJnRoaXMuX19hc3NpZ258fGZ1bmN0aW9uKCl7cmV0dXJuKGU9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciBuLHQ9MSxvPWFyZ3VtZW50cy5sZW5ndGg7dDxvO3QrKylmb3IodmFyIGkgaW4gbj1hcmd1bWVudHNbdF0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4saSkmJihlW2ldPW5baV0pO3JldHVybiBlfSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxuPXRoaXMmJnRoaXMuX19hd2FpdGVyfHxmdW5jdGlvbihlLG4sdCxvKXtyZXR1cm4gbmV3KHR8fCh0PVByb21pc2UpKShmdW5jdGlvbihpLHIpe2Z1bmN0aW9uIGMoZSl7dHJ5e3Moby5uZXh0KGUpKX1jYXRjaChuKXtyKG4pfX1mdW5jdGlvbiBhKGUpe3RyeXtzKG8udGhyb3coZSkpfWNhdGNoKG4pe3Iobil9fWZ1bmN0aW9uIHMoZSl7dmFyIG47ZS5kb25lP2koZS52YWx1ZSk6KG49ZS52YWx1ZSxuIGluc3RhbmNlb2YgdD9uOm5ldyB0KGZ1bmN0aW9uKGUpe2Uobil9KSkudGhlbihjLGEpfXMoKG89by5hcHBseShlLG58fFtdKSkubmV4dCgpKX0pfSx0PXRoaXMmJnRoaXMuX19nZW5lcmF0b3J8fGZ1bmN0aW9uKGUsbil7dmFyIHQsbyxpLHIsYz17bGFiZWw6MCxzZW50OmZ1bmN0aW9uKCl7aWYoMSZpWzBdKXRocm93IGlbMV07cmV0dXJuIGlbMV19LHRyeXM6W10sb3BzOltdfTtyZXR1cm4gcj17bmV4dDphKDApLHRocm93OmEoMSkscmV0dXJuOmEoMil9LFwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmKHJbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSkscjtmdW5jdGlvbiBhKHIpe3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24ocil7aWYodCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtmb3IoO2M7KXRyeXtpZih0PTEsbyYmKGk9MiZyWzBdP28ucmV0dXJuOnJbMF0/by50aHJvd3x8KChpPW8ucmV0dXJuKSYmaS5jYWxsKG8pLDApOm8ubmV4dCkmJiEoaT1pLmNhbGwobyxyWzFdKSkuZG9uZSlyZXR1cm4gaTtzd2l0Y2gobz0wLGkmJihyPVsyJnJbMF0saS52YWx1ZV0pLHJbMF0pe2Nhc2UgMDpjYXNlIDE6aT1yO2JyZWFrO2Nhc2UgNDpyZXR1cm4gYy5sYWJlbCsrLHt2YWx1ZTpyWzFdLGRvbmU6ITF9O2Nhc2UgNTpjLmxhYmVsKyssbz1yWzFdLHI9WzBdO2NvbnRpbnVlO2Nhc2UgNzpyPWMub3BzLnBvcCgpLGMudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEoaT0oaT1jLnRyeXMpLmxlbmd0aD4wJiZpW2kubGVuZ3RoLTFdKSYmKDY9PT1yWzBdfHwyPT09clswXSkpe2M9MDtjb250aW51ZX1pZigzPT09clswXSYmKCFpfHxyWzFdPmlbMF0mJnJbMV08aVszXSkpe2MubGFiZWw9clsxXTticmVha31pZig2PT09clswXSYmYy5sYWJlbDxpWzFdKXtjLmxhYmVsPWlbMV0saT1yO2JyZWFrfWlmKGkmJmMubGFiZWw8aVsyXSl7Yy5sYWJlbD1pWzJdLGMub3BzLnB1c2gocik7YnJlYWt9aVsyXSYmYy5vcHMucG9wKCksYy50cnlzLnBvcCgpO2NvbnRpbnVlfXI9bi5jYWxsKGUsYyl9Y2F0Y2goYSl7cj1bNixhXSxvPTB9ZmluYWxseXt0PWk9MH1pZig1JnJbMF0pdGhyb3cgclsxXTtyZXR1cm57dmFsdWU6clswXT9yWzFdOnZvaWQgMCxkb25lOiEwfX0oW3IsYV0pfX19LG89dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5OZWdvdGlhdG9yPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwiLi91dGlsXCIpLHI9byhyZXF1aXJlKFwiLi9sb2dnZXJcIikpLGM9cmVxdWlyZShcIi4vZW51bXNcIiksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIG8oZSl7dGhpcy5jb25uZWN0aW9uPWV9cmV0dXJuIG8ucHJvdG90eXBlLnN0YXJ0Q29ubmVjdGlvbj1mdW5jdGlvbihlKXt2YXIgbj10aGlzLl9zdGFydFBlZXJDb25uZWN0aW9uKCk7aWYodGhpcy5jb25uZWN0aW9uLnBlZXJDb25uZWN0aW9uPW4sdGhpcy5jb25uZWN0aW9uLnR5cGU9PT1jLkNvbm5lY3Rpb25UeXBlLk1lZGlhJiZlLl9zdHJlYW0mJnRoaXMuX2FkZFRyYWNrc1RvQ29ubmVjdGlvbihlLl9zdHJlYW0sbiksZS5vcmlnaW5hdG9yKXtpZih0aGlzLmNvbm5lY3Rpb24udHlwZT09PWMuQ29ubmVjdGlvblR5cGUuRGF0YSl7dmFyIHQ9dGhpcy5jb25uZWN0aW9uLG89e29yZGVyZWQ6ISFlLnJlbGlhYmxlfSxpPW4uY3JlYXRlRGF0YUNoYW5uZWwodC5sYWJlbCxvKTt0LmluaXRpYWxpemUoaSl9dGhpcy5fbWFrZU9mZmVyKCl9ZWxzZSB0aGlzLmhhbmRsZVNEUChcIk9GRkVSXCIsZS5zZHApfSxvLnByb3RvdHlwZS5fc3RhcnRQZWVyQ29ubmVjdGlvbj1mdW5jdGlvbigpe3IuZGVmYXVsdC5sb2coXCJDcmVhdGluZyBSVENQZWVyQ29ubmVjdGlvbi5cIik7dmFyIGU9bmV3IFJUQ1BlZXJDb25uZWN0aW9uKHRoaXMuY29ubmVjdGlvbi5wcm92aWRlci5vcHRpb25zLmNvbmZpZyk7cmV0dXJuIHRoaXMuX3NldHVwTGlzdGVuZXJzKGUpLGV9LG8ucHJvdG90eXBlLl9zZXR1cExpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgbj10aGlzLHQ9dGhpcy5jb25uZWN0aW9uLnBlZXIsbz10aGlzLmNvbm5lY3Rpb24uY29ubmVjdGlvbklkLGE9dGhpcy5jb25uZWN0aW9uLnR5cGUscz10aGlzLmNvbm5lY3Rpb24ucHJvdmlkZXI7ci5kZWZhdWx0LmxvZyhcIkxpc3RlbmluZyBmb3IgSUNFIGNhbmRpZGF0ZXMuXCIpLGUub25pY2VjYW5kaWRhdGU9ZnVuY3Rpb24oZSl7ZS5jYW5kaWRhdGUmJmUuY2FuZGlkYXRlLmNhbmRpZGF0ZSYmKHIuZGVmYXVsdC5sb2coXCJSZWNlaXZlZCBJQ0UgY2FuZGlkYXRlcyBmb3IgXCIrdCtcIjpcIixlLmNhbmRpZGF0ZSkscy5zb2NrZXQuc2VuZCh7dHlwZTpjLlNlcnZlck1lc3NhZ2VUeXBlLkNhbmRpZGF0ZSxwYXlsb2FkOntjYW5kaWRhdGU6ZS5jYW5kaWRhdGUsdHlwZTphLGNvbm5lY3Rpb25JZDpvfSxkc3Q6dH0pKX0sZS5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3N3aXRjaChlLmljZUNvbm5lY3Rpb25TdGF0ZSl7Y2FzZVwiZmFpbGVkXCI6ci5kZWZhdWx0LmxvZyhcImljZUNvbm5lY3Rpb25TdGF0ZSBpcyBmYWlsZWQsIGNsb3NpbmcgY29ubmVjdGlvbnMgdG8gXCIrdCksbi5jb25uZWN0aW9uLmVtaXQoYy5Db25uZWN0aW9uRXZlbnRUeXBlLkVycm9yLG5ldyBFcnJvcihcIk5lZ290aWF0aW9uIG9mIGNvbm5lY3Rpb24gdG8gXCIrdCtcIiBmYWlsZWQuXCIpKSxuLmNvbm5lY3Rpb24uY2xvc2UoKTticmVhaztjYXNlXCJjbG9zZWRcIjpyLmRlZmF1bHQubG9nKFwiaWNlQ29ubmVjdGlvblN0YXRlIGlzIGNsb3NlZCwgY2xvc2luZyBjb25uZWN0aW9ucyB0byBcIit0KSxuLmNvbm5lY3Rpb24uZW1pdChjLkNvbm5lY3Rpb25FdmVudFR5cGUuRXJyb3IsbmV3IEVycm9yKFwiQ29ubmVjdGlvbiB0byBcIit0K1wiIGNsb3NlZC5cIikpLG4uY29ubmVjdGlvbi5jbG9zZSgpO2JyZWFrO2Nhc2VcImRpc2Nvbm5lY3RlZFwiOnIuZGVmYXVsdC5sb2coXCJpY2VDb25uZWN0aW9uU3RhdGUgY2hhbmdlZCB0byBkaXNjb25uZWN0ZWQgb24gdGhlIGNvbm5lY3Rpb24gd2l0aCBcIit0KTticmVhaztjYXNlXCJjb21wbGV0ZWRcIjplLm9uaWNlY2FuZGlkYXRlPWkudXRpbC5ub29wfW4uY29ubmVjdGlvbi5lbWl0KGMuQ29ubmVjdGlvbkV2ZW50VHlwZS5JY2VTdGF0ZUNoYW5nZWQsZS5pY2VDb25uZWN0aW9uU3RhdGUpfSxyLmRlZmF1bHQubG9nKFwiTGlzdGVuaW5nIGZvciBkYXRhIGNoYW5uZWxcIiksZS5vbmRhdGFjaGFubmVsPWZ1bmN0aW9uKGUpe3IuZGVmYXVsdC5sb2coXCJSZWNlaXZlZCBkYXRhIGNoYW5uZWxcIik7dmFyIG49ZS5jaGFubmVsO3MuZ2V0Q29ubmVjdGlvbih0LG8pLmluaXRpYWxpemUobil9LHIuZGVmYXVsdC5sb2coXCJMaXN0ZW5pbmcgZm9yIHJlbW90ZSBzdHJlYW1cIiksZS5vbnRyYWNrPWZ1bmN0aW9uKGUpe3IuZGVmYXVsdC5sb2coXCJSZWNlaXZlZCByZW1vdGUgc3RyZWFtXCIpO3ZhciBpPWUuc3RyZWFtc1swXSxhPXMuZ2V0Q29ubmVjdGlvbih0LG8pO2lmKGEudHlwZT09PWMuQ29ubmVjdGlvblR5cGUuTWVkaWEpe3ZhciBkPWE7bi5fYWRkU3RyZWFtVG9NZWRpYUNvbm5lY3Rpb24oaSxkKX19fSxvLnByb3RvdHlwZS5jbGVhbnVwPWZ1bmN0aW9uKCl7ci5kZWZhdWx0LmxvZyhcIkNsZWFuaW5nIHVwIFBlZXJDb25uZWN0aW9uIHRvIFwiK3RoaXMuY29ubmVjdGlvbi5wZWVyKTt2YXIgZT10aGlzLmNvbm5lY3Rpb24ucGVlckNvbm5lY3Rpb247aWYoZSl7dGhpcy5jb25uZWN0aW9uLnBlZXJDb25uZWN0aW9uPW51bGwsZS5vbmljZWNhbmRpZGF0ZT1lLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPWUub25kYXRhY2hhbm5lbD1lLm9udHJhY2s9ZnVuY3Rpb24oKXt9O3ZhciBuPVwiY2xvc2VkXCIhPT1lLnNpZ25hbGluZ1N0YXRlLHQ9ITE7aWYodGhpcy5jb25uZWN0aW9uLnR5cGU9PT1jLkNvbm5lY3Rpb25UeXBlLkRhdGEpe3ZhciBvPXRoaXMuY29ubmVjdGlvbi5kYXRhQ2hhbm5lbDtvJiYodD0hIW8ucmVhZHlTdGF0ZSYmXCJjbG9zZWRcIiE9PW8ucmVhZHlTdGF0ZSl9KG58fHQpJiZlLmNsb3NlKCl9fSxvLnByb3RvdHlwZS5fbWFrZU9mZmVyPWZ1bmN0aW9uKCl7cmV0dXJuIG4odGhpcyx2b2lkIDAsUHJvbWlzZSxmdW5jdGlvbigpe3ZhciBuLG8sYSxzLGQsbCx1O3JldHVybiB0KHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpuPXRoaXMuY29ubmVjdGlvbi5wZWVyQ29ubmVjdGlvbixvPXRoaXMuY29ubmVjdGlvbi5wcm92aWRlcix0LmxhYmVsPTE7Y2FzZSAxOnJldHVybiB0LnRyeXMucHVzaChbMSw3LCw4XSksWzQsbi5jcmVhdGVPZmZlcih0aGlzLmNvbm5lY3Rpb24ub3B0aW9ucy5jb25zdHJhaW50cyldO2Nhc2UgMjphPXQuc2VudCgpLHIuZGVmYXVsdC5sb2coXCJDcmVhdGVkIG9mZmVyLlwiKSx0aGlzLmNvbm5lY3Rpb24ub3B0aW9ucy5zZHBUcmFuc2Zvcm0mJlwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuY29ubmVjdGlvbi5vcHRpb25zLnNkcFRyYW5zZm9ybSYmKGEuc2RwPXRoaXMuY29ubmVjdGlvbi5vcHRpb25zLnNkcFRyYW5zZm9ybShhLnNkcCl8fGEuc2RwKSx0LmxhYmVsPTM7Y2FzZSAzOnJldHVybiB0LnRyeXMucHVzaChbMyw1LCw2XSksWzQsbi5zZXRMb2NhbERlc2NyaXB0aW9uKGEpXTtjYXNlIDQ6cmV0dXJuIHQuc2VudCgpLHIuZGVmYXVsdC5sb2coXCJTZXQgbG9jYWxEZXNjcmlwdGlvbjpcIixhLFwiZm9yOlwiK3RoaXMuY29ubmVjdGlvbi5wZWVyKSxzPXtzZHA6YSx0eXBlOnRoaXMuY29ubmVjdGlvbi50eXBlLGNvbm5lY3Rpb25JZDp0aGlzLmNvbm5lY3Rpb24uY29ubmVjdGlvbklkLG1ldGFkYXRhOnRoaXMuY29ubmVjdGlvbi5tZXRhZGF0YSxicm93c2VyOmkudXRpbC5icm93c2VyfSx0aGlzLmNvbm5lY3Rpb24udHlwZT09PWMuQ29ubmVjdGlvblR5cGUuRGF0YSYmKGQ9dGhpcy5jb25uZWN0aW9uLHM9ZShlKHt9LHMpLHtsYWJlbDpkLmxhYmVsLHJlbGlhYmxlOmQucmVsaWFibGUsc2VyaWFsaXphdGlvbjpkLnNlcmlhbGl6YXRpb259KSksby5zb2NrZXQuc2VuZCh7dHlwZTpjLlNlcnZlck1lc3NhZ2VUeXBlLk9mZmVyLHBheWxvYWQ6cyxkc3Q6dGhpcy5jb25uZWN0aW9uLnBlZXJ9KSxbMyw2XTtjYXNlIDU6cmV0dXJuXCJPcGVyYXRpb25FcnJvcjogRmFpbGVkIHRvIHNldCBsb2NhbCBvZmZlciBzZHA6IENhbGxlZCBpbiB3cm9uZyBzdGF0ZToga0hhdmVSZW1vdGVPZmZlclwiIT0obD10LnNlbnQoKSkmJihvLmVtaXRFcnJvcihjLlBlZXJFcnJvclR5cGUuV2ViUlRDLGwpLHIuZGVmYXVsdC5sb2coXCJGYWlsZWQgdG8gc2V0TG9jYWxEZXNjcmlwdGlvbiwgXCIsbCkpLFszLDZdO2Nhc2UgNjpyZXR1cm5bMyw4XTtjYXNlIDc6cmV0dXJuIHU9dC5zZW50KCksby5lbWl0RXJyb3IoYy5QZWVyRXJyb3JUeXBlLldlYlJUQyx1KSxyLmRlZmF1bHQubG9nKFwiRmFpbGVkIHRvIGNyZWF0ZU9mZmVyLCBcIix1KSxbMyw4XTtjYXNlIDg6cmV0dXJuWzJdfX0pfSl9LG8ucHJvdG90eXBlLl9tYWtlQW5zd2VyPWZ1bmN0aW9uKCl7cmV0dXJuIG4odGhpcyx2b2lkIDAsUHJvbWlzZSxmdW5jdGlvbigpe3ZhciBlLG4sbyxhLHM7cmV0dXJuIHQodGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOmU9dGhpcy5jb25uZWN0aW9uLnBlZXJDb25uZWN0aW9uLG49dGhpcy5jb25uZWN0aW9uLnByb3ZpZGVyLHQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIHQudHJ5cy5wdXNoKFsxLDcsLDhdKSxbNCxlLmNyZWF0ZUFuc3dlcigpXTtjYXNlIDI6bz10LnNlbnQoKSxyLmRlZmF1bHQubG9nKFwiQ3JlYXRlZCBhbnN3ZXIuXCIpLHRoaXMuY29ubmVjdGlvbi5vcHRpb25zLnNkcFRyYW5zZm9ybSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5jb25uZWN0aW9uLm9wdGlvbnMuc2RwVHJhbnNmb3JtJiYoby5zZHA9dGhpcy5jb25uZWN0aW9uLm9wdGlvbnMuc2RwVHJhbnNmb3JtKG8uc2RwKXx8by5zZHApLHQubGFiZWw9MztjYXNlIDM6cmV0dXJuIHQudHJ5cy5wdXNoKFszLDUsLDZdKSxbNCxlLnNldExvY2FsRGVzY3JpcHRpb24obyldO2Nhc2UgNDpyZXR1cm4gdC5zZW50KCksci5kZWZhdWx0LmxvZyhcIlNldCBsb2NhbERlc2NyaXB0aW9uOlwiLG8sXCJmb3I6XCIrdGhpcy5jb25uZWN0aW9uLnBlZXIpLG4uc29ja2V0LnNlbmQoe3R5cGU6Yy5TZXJ2ZXJNZXNzYWdlVHlwZS5BbnN3ZXIscGF5bG9hZDp7c2RwOm8sdHlwZTp0aGlzLmNvbm5lY3Rpb24udHlwZSxjb25uZWN0aW9uSWQ6dGhpcy5jb25uZWN0aW9uLmNvbm5lY3Rpb25JZCxicm93c2VyOmkudXRpbC5icm93c2VyfSxkc3Q6dGhpcy5jb25uZWN0aW9uLnBlZXJ9KSxbMyw2XTtjYXNlIDU6cmV0dXJuIGE9dC5zZW50KCksbi5lbWl0RXJyb3IoYy5QZWVyRXJyb3JUeXBlLldlYlJUQyxhKSxyLmRlZmF1bHQubG9nKFwiRmFpbGVkIHRvIHNldExvY2FsRGVzY3JpcHRpb24sIFwiLGEpLFszLDZdO2Nhc2UgNjpyZXR1cm5bMyw4XTtjYXNlIDc6cmV0dXJuIHM9dC5zZW50KCksbi5lbWl0RXJyb3IoYy5QZWVyRXJyb3JUeXBlLldlYlJUQyxzKSxyLmRlZmF1bHQubG9nKFwiRmFpbGVkIHRvIGNyZWF0ZSBhbnN3ZXIsIFwiLHMpLFszLDhdO2Nhc2UgODpyZXR1cm5bMl19fSl9KX0sby5wcm90b3R5cGUuaGFuZGxlU0RQPWZ1bmN0aW9uKGUsbyl7cmV0dXJuIG4odGhpcyx2b2lkIDAsUHJvbWlzZSxmdW5jdGlvbigpe3ZhciBuLGksYSxzO3JldHVybiB0KHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpvPW5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24obyksbj10aGlzLmNvbm5lY3Rpb24ucGVlckNvbm5lY3Rpb24saT10aGlzLmNvbm5lY3Rpb24ucHJvdmlkZXIsci5kZWZhdWx0LmxvZyhcIlNldHRpbmcgcmVtb3RlIGRlc2NyaXB0aW9uXCIsbyksYT10aGlzLHQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIHQudHJ5cy5wdXNoKFsxLDUsLDZdKSxbNCxuLnNldFJlbW90ZURlc2NyaXB0aW9uKG8pXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLHIuZGVmYXVsdC5sb2coXCJTZXQgcmVtb3RlRGVzY3JpcHRpb246XCIrZStcIiBmb3I6XCIrdGhpcy5jb25uZWN0aW9uLnBlZXIpLFwiT0ZGRVJcIiE9PWU/WzMsNF06WzQsYS5fbWFrZUFuc3dlcigpXTtjYXNlIDM6dC5zZW50KCksdC5sYWJlbD00O2Nhc2UgNDpyZXR1cm5bMyw2XTtjYXNlIDU6cmV0dXJuIHM9dC5zZW50KCksaS5lbWl0RXJyb3IoYy5QZWVyRXJyb3JUeXBlLldlYlJUQyxzKSxyLmRlZmF1bHQubG9nKFwiRmFpbGVkIHRvIHNldFJlbW90ZURlc2NyaXB0aW9uLCBcIixzKSxbMyw2XTtjYXNlIDY6cmV0dXJuWzJdfX0pfSl9LG8ucHJvdG90eXBlLmhhbmRsZUNhbmRpZGF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbih0aGlzLHZvaWQgMCxQcm9taXNlLGZ1bmN0aW9uKCl7dmFyIG4sbyxpLGEscyxkO3JldHVybiB0KHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyLmRlZmF1bHQubG9nKFwiaGFuZGxlQ2FuZGlkYXRlOlwiLGUpLG49ZS5jYW5kaWRhdGUsbz1lLnNkcE1MaW5lSW5kZXgsaT1lLnNkcE1pZCxhPXRoaXMuY29ubmVjdGlvbi5wZWVyQ29ubmVjdGlvbixzPXRoaXMuY29ubmVjdGlvbi5wcm92aWRlcix0LmxhYmVsPTE7Y2FzZSAxOnJldHVybiB0LnRyeXMucHVzaChbMSwzLCw0XSksWzQsYS5hZGRJY2VDYW5kaWRhdGUobmV3IFJUQ0ljZUNhbmRpZGF0ZSh7c2RwTWlkOmksc2RwTUxpbmVJbmRleDpvLGNhbmRpZGF0ZTpufSkpXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLHIuZGVmYXVsdC5sb2coXCJBZGRlZCBJQ0UgY2FuZGlkYXRlIGZvcjpcIit0aGlzLmNvbm5lY3Rpb24ucGVlciksWzMsNF07Y2FzZSAzOnJldHVybiBkPXQuc2VudCgpLHMuZW1pdEVycm9yKGMuUGVlckVycm9yVHlwZS5XZWJSVEMsZCksci5kZWZhdWx0LmxvZyhcIkZhaWxlZCB0byBoYW5kbGVDYW5kaWRhdGUsIFwiLGQpLFszLDRdO2Nhc2UgNDpyZXR1cm5bMl19fSl9KX0sby5wcm90b3R5cGUuX2FkZFRyYWNrc1RvQ29ubmVjdGlvbj1mdW5jdGlvbihlLG4pe2lmKHIuZGVmYXVsdC5sb2coXCJhZGQgdHJhY2tzIGZyb20gc3RyZWFtIFwiK2UuaWQrXCIgdG8gcGVlciBjb25uZWN0aW9uXCIpLCFuLmFkZFRyYWNrKXJldHVybiByLmRlZmF1bHQuZXJyb3IoXCJZb3VyIGJyb3dzZXIgZG9lcyd0IHN1cHBvcnQgUlRDUGVlckNvbm5lY3Rpb24jYWRkVHJhY2suIElnbm9yZWQuXCIpO2UuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0KXtuLmFkZFRyYWNrKHQsZSl9KX0sby5wcm90b3R5cGUuX2FkZFN0cmVhbVRvTWVkaWFDb25uZWN0aW9uPWZ1bmN0aW9uKGUsbil7ci5kZWZhdWx0LmxvZyhcImFkZCBzdHJlYW0gXCIrZS5pZCtcIiB0byBtZWRpYSBjb25uZWN0aW9uIFwiK24uY29ubmVjdGlvbklkKSxuLmFkZFN0cmVhbShlKX0sb30oKTtleHBvcnRzLk5lZ290aWF0b3I9YTtcbn0se1wiLi91dGlsXCI6XCJCSFhmXCIsXCIuL2xvZ2dlclwiOlwiV09zOVwiLFwiLi9lbnVtc1wiOlwiWlJZZlwifV0sXCJ0UUZLXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciB0PXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUsbil7cmV0dXJuKHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbikmJih0W25dPWVbbl0pfSkoZSxuKX07cmV0dXJuIGZ1bmN0aW9uKGUsbil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgbiYmbnVsbCE9PW4pdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIrU3RyaW5nKG4pK1wiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7ZnVuY3Rpb24gbygpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsbiksZS5wcm90b3R5cGU9bnVsbD09PW4/T2JqZWN0LmNyZWF0ZShuKTooby5wcm90b3R5cGU9bi5wcm90b3R5cGUsbmV3IG8pfX0oKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLkJhc2VDb25uZWN0aW9uPXZvaWQgMDt2YXIgZT1yZXF1aXJlKFwiZXZlbnRlbWl0dGVyM1wiKSxuPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG4odCxuLG8pe3ZhciByPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5wZWVyPXQsci5wcm92aWRlcj1uLHIub3B0aW9ucz1vLHIuX29wZW49ITEsci5tZXRhZGF0YT1vLm1ldGFkYXRhLHJ9cmV0dXJuIHQobixlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJvcGVuXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcGVufSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLG59KGUuRXZlbnRFbWl0dGVyKTtleHBvcnRzLkJhc2VDb25uZWN0aW9uPW47XG59LHtcImV2ZW50ZW1pdHRlcjNcIjpcIkpKbFNcIn1dLFwiZGJIUFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgZT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbih0LG8pe3JldHVybihlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbyBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG8pJiYoZVtvXT10W29dKX0pKHQsbyl9O3JldHVybiBmdW5jdGlvbih0LG8pe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG8mJm51bGwhPT1vKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiK1N0cmluZyhvKStcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LG8pLHQucHJvdG90eXBlPW51bGw9PT1vP09iamVjdC5jcmVhdGUobyk6KHIucHJvdG90eXBlPW8ucHJvdG90eXBlLG5ldyByKX19KCksdD10aGlzJiZ0aGlzLl9fYXNzaWdufHxmdW5jdGlvbigpe3JldHVybih0PU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxvPTEscj1hcmd1bWVudHMubGVuZ3RoO288cjtvKyspZm9yKHZhciBuIGluIHQ9YXJndW1lbnRzW29dKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKTtyZXR1cm4gZX0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbz10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixvPXQmJmVbdF0scj0wO2lmKG8pcmV0dXJuIG8uY2FsbChlKTtpZihlJiZcIm51bWJlclwiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmcj49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbcisrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD9cIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCI6XCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpfSxyPXRoaXMmJnRoaXMuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuTWVkaWFDb25uZWN0aW9uPXZvaWQgMDt2YXIgbj1yZXF1aXJlKFwiLi91dGlsXCIpLGk9cihyZXF1aXJlKFwiLi9sb2dnZXJcIikpLGE9cmVxdWlyZShcIi4vbmVnb3RpYXRvclwiKSxzPXJlcXVpcmUoXCIuL2VudW1zXCIpLGw9cmVxdWlyZShcIi4vYmFzZWNvbm5lY3Rpb25cIiksYz1mdW5jdGlvbihyKXtmdW5jdGlvbiBsKGUsdCxvKXt2YXIgaT1yLmNhbGwodGhpcyxlLHQsbyl8fHRoaXM7cmV0dXJuIGkuX2xvY2FsU3RyZWFtPWkub3B0aW9ucy5fc3RyZWFtLGkuY29ubmVjdGlvbklkPWkub3B0aW9ucy5jb25uZWN0aW9uSWR8fGwuSURfUFJFRklYK24udXRpbC5yYW5kb21Ub2tlbigpLGkuX25lZ290aWF0b3I9bmV3IGEuTmVnb3RpYXRvcihpKSxpLl9sb2NhbFN0cmVhbSYmaS5fbmVnb3RpYXRvci5zdGFydENvbm5lY3Rpb24oe19zdHJlYW06aS5fbG9jYWxTdHJlYW0sb3JpZ2luYXRvcjohMH0pLGl9cmV0dXJuIGUobCxyKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobC5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBzLkNvbm5lY3Rpb25UeXBlLk1lZGlhfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZSxcImxvY2FsU3RyZWFtXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2NhbFN0cmVhbX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobC5wcm90b3R5cGUsXCJyZW1vdGVTdHJlYW1cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbW90ZVN0cmVhbX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxsLnByb3RvdHlwZS5hZGRTdHJlYW09ZnVuY3Rpb24oZSl7aS5kZWZhdWx0LmxvZyhcIlJlY2VpdmluZyBzdHJlYW1cIixlKSx0aGlzLl9yZW1vdGVTdHJlYW09ZSxyLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxzLkNvbm5lY3Rpb25FdmVudFR5cGUuU3RyZWFtLGUpfSxsLnByb3RvdHlwZS5oYW5kbGVNZXNzYWdlPWZ1bmN0aW9uKGUpe3ZhciB0PWUudHlwZSxvPWUucGF5bG9hZDtzd2l0Y2goZS50eXBlKXtjYXNlIHMuU2VydmVyTWVzc2FnZVR5cGUuQW5zd2VyOnRoaXMuX25lZ290aWF0b3IuaGFuZGxlU0RQKHQsby5zZHApLHRoaXMuX29wZW49ITA7YnJlYWs7Y2FzZSBzLlNlcnZlck1lc3NhZ2VUeXBlLkNhbmRpZGF0ZTp0aGlzLl9uZWdvdGlhdG9yLmhhbmRsZUNhbmRpZGF0ZShvLmNhbmRpZGF0ZSk7YnJlYWs7ZGVmYXVsdDppLmRlZmF1bHQud2FybihcIlVucmVjb2duaXplZCBtZXNzYWdlIHR5cGU6XCIrdCtcIiBmcm9tIHBlZXI6XCIrdGhpcy5wZWVyKX19LGwucHJvdG90eXBlLmFuc3dlcj1mdW5jdGlvbihlLHIpe3ZhciBuLGE7aWYodm9pZCAwPT09ciYmKHI9e30pLHRoaXMuX2xvY2FsU3RyZWFtKWkuZGVmYXVsdC53YXJuKFwiTG9jYWwgc3RyZWFtIGFscmVhZHkgZXhpc3RzIG9uIHRoaXMgTWVkaWFDb25uZWN0aW9uLiBBcmUgeW91IGFuc3dlcmluZyBhIGNhbGwgdHdpY2U/XCIpO2Vsc2V7dGhpcy5fbG9jYWxTdHJlYW09ZSxyJiZyLnNkcFRyYW5zZm9ybSYmKHRoaXMub3B0aW9ucy5zZHBUcmFuc2Zvcm09ci5zZHBUcmFuc2Zvcm0pLHRoaXMuX25lZ290aWF0b3Iuc3RhcnRDb25uZWN0aW9uKHQodCh7fSx0aGlzLm9wdGlvbnMuX3BheWxvYWQpLHtfc3RyZWFtOmV9KSk7dmFyIHM9dGhpcy5wcm92aWRlci5fZ2V0TWVzc2FnZXModGhpcy5jb25uZWN0aW9uSWQpO3RyeXtmb3IodmFyIGw9byhzKSxjPWwubmV4dCgpOyFjLmRvbmU7Yz1sLm5leHQoKSl7dmFyIHA9Yy52YWx1ZTt0aGlzLmhhbmRsZU1lc3NhZ2UocCl9fWNhdGNoKHUpe249e2Vycm9yOnV9fWZpbmFsbHl7dHJ5e2MmJiFjLmRvbmUmJihhPWwucmV0dXJuKSYmYS5jYWxsKGwpfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX10aGlzLl9vcGVuPSEwfX0sbC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLl9uZWdvdGlhdG9yJiYodGhpcy5fbmVnb3RpYXRvci5jbGVhbnVwKCksdGhpcy5fbmVnb3RpYXRvcj1udWxsKSx0aGlzLl9sb2NhbFN0cmVhbT1udWxsLHRoaXMuX3JlbW90ZVN0cmVhbT1udWxsLHRoaXMucHJvdmlkZXImJih0aGlzLnByb3ZpZGVyLl9yZW1vdmVDb25uZWN0aW9uKHRoaXMpLHRoaXMucHJvdmlkZXI9bnVsbCksdGhpcy5vcHRpb25zJiZ0aGlzLm9wdGlvbnMuX3N0cmVhbSYmKHRoaXMub3B0aW9ucy5fc3RyZWFtPW51bGwpLHRoaXMub3BlbiYmKHRoaXMuX29wZW49ITEsci5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMscy5Db25uZWN0aW9uRXZlbnRUeXBlLkNsb3NlKSl9LGwuSURfUFJFRklYPVwibWNfXCIsbH0obC5CYXNlQ29ubmVjdGlvbik7ZXhwb3J0cy5NZWRpYUNvbm5lY3Rpb249Yztcbn0se1wiLi91dGlsXCI6XCJCSFhmXCIsXCIuL2xvZ2dlclwiOlwiV09zOVwiLFwiLi9uZWdvdGlhdG9yXCI6XCJIQ2RYXCIsXCIuL2VudW1zXCI6XCJaUllmXCIsXCIuL2Jhc2Vjb25uZWN0aW9uXCI6XCJ0UUZLXCJ9XSxcIkdHcDZcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIGU9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24odCxyKXtyZXR1cm4oZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9KSh0LHIpfTtyZXR1cm4gZnVuY3Rpb24odCxyKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiByJiZudWxsIT09cil0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIitTdHJpbmcocikrXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtmdW5jdGlvbiBvKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxyKSx0LnByb3RvdHlwZT1udWxsPT09cj9PYmplY3QuY3JlYXRlKHIpOihvLnByb3RvdHlwZT1yLnByb3RvdHlwZSxuZXcgbyl9fSgpLHQ9dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5FbmNvZGluZ1F1ZXVlPXZvaWQgMDt2YXIgcj1yZXF1aXJlKFwiZXZlbnRlbWl0dGVyM1wiKSxvPXQocmVxdWlyZShcIi4vbG9nZ2VyXCIpKSxuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoKXt2YXIgZT10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGUuZmlsZVJlYWRlcj1uZXcgRmlsZVJlYWRlcixlLl9xdWV1ZT1bXSxlLl9wcm9jZXNzaW5nPSExLGUuZmlsZVJlYWRlci5vbmxvYWQ9ZnVuY3Rpb24odCl7ZS5fcHJvY2Vzc2luZz0hMSx0LnRhcmdldCYmZS5lbWl0KFwiZG9uZVwiLHQudGFyZ2V0LnJlc3VsdCksZS5kb05leHRUYXNrKCl9LGUuZmlsZVJlYWRlci5vbmVycm9yPWZ1bmN0aW9uKHQpe28uZGVmYXVsdC5lcnJvcihcIkVuY29kaW5nUXVldWUgZXJyb3I6XCIsdCksZS5fcHJvY2Vzc2luZz0hMSxlLmRlc3Ryb3koKSxlLmVtaXQoXCJlcnJvclwiLHQpfSxlfXJldHVybiBlKHIsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwicXVldWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3F1ZXVlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVldWUubGVuZ3RofSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInByb2Nlc3NpbmdcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb2Nlc3Npbmd9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksci5wcm90b3R5cGUuZW5xdWU9ZnVuY3Rpb24oZSl7dGhpcy5xdWV1ZS5wdXNoKGUpLHRoaXMucHJvY2Vzc2luZ3x8dGhpcy5kb05leHRUYXNrKCl9LHIucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmZpbGVSZWFkZXIuYWJvcnQoKSx0aGlzLl9xdWV1ZT1bXX0sci5wcm90b3R5cGUuZG9OZXh0VGFzaz1mdW5jdGlvbigpezAhPT10aGlzLnNpemUmJih0aGlzLnByb2Nlc3Npbmd8fCh0aGlzLl9wcm9jZXNzaW5nPSEwLHRoaXMuZmlsZVJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcih0aGlzLnF1ZXVlLnNoaWZ0KCkpKSl9LHJ9KHIuRXZlbnRFbWl0dGVyKTtleHBvcnRzLkVuY29kaW5nUXVldWU9bjtcbn0se1wiZXZlbnRlbWl0dGVyM1wiOlwiSkpsU1wiLFwiLi9sb2dnZXJcIjpcIldPczlcIn1dLFwiR0JUUVwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgZT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbih0LG4pe3JldHVybihlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKX0pKHQsbil9O3JldHVybiBmdW5jdGlvbih0LG4pe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4mJm51bGwhPT1uKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiK1N0cmluZyhuKStcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LG4pLHQucHJvdG90eXBlPW51bGw9PT1uP09iamVjdC5jcmVhdGUobik6KGkucHJvdG90eXBlPW4ucHJvdG90eXBlLG5ldyBpKX19KCksdD10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixuPXQmJmVbdF0saT0wO2lmKG4pcmV0dXJuIG4uY2FsbChlKTtpZihlJiZcIm51bWJlclwiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD9cIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCI6XCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpfSxuPXRoaXMmJnRoaXMuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuRGF0YUNvbm5lY3Rpb249dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCIuL3V0aWxcIiksbz1uKHJlcXVpcmUoXCIuL2xvZ2dlclwiKSkscj1yZXF1aXJlKFwiLi9uZWdvdGlhdG9yXCIpLGE9cmVxdWlyZShcIi4vZW51bXNcIikscz1yZXF1aXJlKFwiLi9iYXNlY29ubmVjdGlvblwiKSx1PXJlcXVpcmUoXCIuL2VuY29kaW5nUXVldWVcIiksbD1mdW5jdGlvbihuKXtmdW5jdGlvbiBzKGUsdCxsKXt2YXIgZj1uLmNhbGwodGhpcyxlLHQsbCl8fHRoaXM7cmV0dXJuIGYuc3RyaW5naWZ5PUpTT04uc3RyaW5naWZ5LGYucGFyc2U9SlNPTi5wYXJzZSxmLl9idWZmZXI9W10sZi5fYnVmZmVyU2l6ZT0wLGYuX2J1ZmZlcmluZz0hMSxmLl9jaHVua2VkRGF0YT17fSxmLl9lbmNvZGluZ1F1ZXVlPW5ldyB1LkVuY29kaW5nUXVldWUsZi5jb25uZWN0aW9uSWQ9Zi5vcHRpb25zLmNvbm5lY3Rpb25JZHx8cy5JRF9QUkVGSVgraS51dGlsLnJhbmRvbVRva2VuKCksZi5sYWJlbD1mLm9wdGlvbnMubGFiZWx8fGYuY29ubmVjdGlvbklkLGYuc2VyaWFsaXphdGlvbj1mLm9wdGlvbnMuc2VyaWFsaXphdGlvbnx8YS5TZXJpYWxpemF0aW9uVHlwZS5CaW5hcnksZi5yZWxpYWJsZT0hIWYub3B0aW9ucy5yZWxpYWJsZSxmLl9lbmNvZGluZ1F1ZXVlLm9uKFwiZG9uZVwiLGZ1bmN0aW9uKGUpe2YuX2J1ZmZlcmVkU2VuZChlKX0pLGYuX2VuY29kaW5nUXVldWUub24oXCJlcnJvclwiLGZ1bmN0aW9uKCl7by5kZWZhdWx0LmVycm9yKFwiREMjXCIrZi5jb25uZWN0aW9uSWQrXCI6IEVycm9yIG9jY3VyZWQgaW4gZW5jb2RpbmcgZnJvbSBibG9iIHRvIGFycmF5YnVmZmVyLCBjbG9zZSBEQ1wiKSxmLmNsb3NlKCl9KSxmLl9uZWdvdGlhdG9yPW5ldyByLk5lZ290aWF0b3IoZiksZi5fbmVnb3RpYXRvci5zdGFydENvbm5lY3Rpb24oZi5vcHRpb25zLl9wYXlsb2FkfHx7b3JpZ2luYXRvcjohMH0pLGZ9cmV0dXJuIGUocyxuKSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBhLkNvbm5lY3Rpb25UeXBlLkRhdGF9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLFwiZGF0YUNoYW5uZWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RjfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSxcImJ1ZmZlclNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlclNpemV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSkscy5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbihlKXt0aGlzLl9kYz1lLHRoaXMuX2NvbmZpZ3VyZURhdGFDaGFubmVsKCl9LHMucHJvdG90eXBlLl9jb25maWd1cmVEYXRhQ2hhbm5lbD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aS51dGlsLnN1cHBvcnRzLmJpbmFyeUJsb2ImJiFpLnV0aWwuc3VwcG9ydHMucmVsaWFibGV8fCh0aGlzLmRhdGFDaGFubmVsLmJpbmFyeVR5cGU9XCJhcnJheWJ1ZmZlclwiKSx0aGlzLmRhdGFDaGFubmVsLm9ub3Blbj1mdW5jdGlvbigpe28uZGVmYXVsdC5sb2coXCJEQyNcIitlLmNvbm5lY3Rpb25JZCtcIiBkYyBjb25uZWN0aW9uIHN1Y2Nlc3NcIiksZS5fb3Blbj0hMCxlLmVtaXQoYS5Db25uZWN0aW9uRXZlbnRUeXBlLk9wZW4pfSx0aGlzLmRhdGFDaGFubmVsLm9ubWVzc2FnZT1mdW5jdGlvbih0KXtvLmRlZmF1bHQubG9nKFwiREMjXCIrZS5jb25uZWN0aW9uSWQrXCIgZGMgb25tZXNzYWdlOlwiLHQuZGF0YSksZS5faGFuZGxlRGF0YU1lc3NhZ2UodCl9LHRoaXMuZGF0YUNoYW5uZWwub25jbG9zZT1mdW5jdGlvbigpe28uZGVmYXVsdC5sb2coXCJEQyNcIitlLmNvbm5lY3Rpb25JZCtcIiBkYyBjbG9zZWQgZm9yOlwiLGUucGVlciksZS5jbG9zZSgpfX0scy5wcm90b3R5cGUuX2hhbmRsZURhdGFNZXNzYWdlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbz1lLmRhdGEscj1vLmNvbnN0cnVjdG9yLHM9bztpZih0aGlzLnNlcmlhbGl6YXRpb249PT1hLlNlcmlhbGl6YXRpb25UeXBlLkJpbmFyeXx8dGhpcy5zZXJpYWxpemF0aW9uPT09YS5TZXJpYWxpemF0aW9uVHlwZS5CaW5hcnlVVEY4KXtpZihyPT09QmxvYilyZXR1cm4gdm9pZCBpLnV0aWwuYmxvYlRvQXJyYXlCdWZmZXIobyxmdW5jdGlvbihlKXt2YXIgbj1pLnV0aWwudW5wYWNrKGUpO3QuZW1pdChhLkNvbm5lY3Rpb25FdmVudFR5cGUuRGF0YSxuKX0pO2lmKHI9PT1BcnJheUJ1ZmZlcilzPWkudXRpbC51bnBhY2sobyk7ZWxzZSBpZihyPT09U3RyaW5nKXt2YXIgdT1pLnV0aWwuYmluYXJ5U3RyaW5nVG9BcnJheUJ1ZmZlcihvKTtzPWkudXRpbC51bnBhY2sodSl9fWVsc2UgdGhpcy5zZXJpYWxpemF0aW9uPT09YS5TZXJpYWxpemF0aW9uVHlwZS5KU09OJiYocz10aGlzLnBhcnNlKG8pKTtzLl9fcGVlckRhdGE/dGhpcy5faGFuZGxlQ2h1bmsocyk6bi5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMsYS5Db25uZWN0aW9uRXZlbnRUeXBlLkRhdGEscyl9LHMucHJvdG90eXBlLl9oYW5kbGVDaHVuaz1mdW5jdGlvbihlKXt2YXIgdD1lLl9fcGVlckRhdGEsbj10aGlzLl9jaHVua2VkRGF0YVt0XXx8e2RhdGE6W10sY291bnQ6MCx0b3RhbDplLnRvdGFsfTtpZihuLmRhdGFbZS5uXT1lLmRhdGEsbi5jb3VudCsrLHRoaXMuX2NodW5rZWREYXRhW3RdPW4sbi50b3RhbD09PW4uY291bnQpe2RlbGV0ZSB0aGlzLl9jaHVua2VkRGF0YVt0XTt2YXIgaT1uZXcgQmxvYihuLmRhdGEpO3RoaXMuX2hhbmRsZURhdGFNZXNzYWdlKHtkYXRhOml9KX19LHMucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5fYnVmZmVyPVtdLHRoaXMuX2J1ZmZlclNpemU9MCx0aGlzLl9jaHVua2VkRGF0YT17fSx0aGlzLl9uZWdvdGlhdG9yJiYodGhpcy5fbmVnb3RpYXRvci5jbGVhbnVwKCksdGhpcy5fbmVnb3RpYXRvcj1udWxsKSx0aGlzLnByb3ZpZGVyJiYodGhpcy5wcm92aWRlci5fcmVtb3ZlQ29ubmVjdGlvbih0aGlzKSx0aGlzLnByb3ZpZGVyPW51bGwpLHRoaXMuZGF0YUNoYW5uZWwmJih0aGlzLmRhdGFDaGFubmVsLm9ub3Blbj1udWxsLHRoaXMuZGF0YUNoYW5uZWwub25tZXNzYWdlPW51bGwsdGhpcy5kYXRhQ2hhbm5lbC5vbmNsb3NlPW51bGwsdGhpcy5fZGM9bnVsbCksdGhpcy5fZW5jb2RpbmdRdWV1ZSYmKHRoaXMuX2VuY29kaW5nUXVldWUuZGVzdHJveSgpLHRoaXMuX2VuY29kaW5nUXVldWUucmVtb3ZlQWxsTGlzdGVuZXJzKCksdGhpcy5fZW5jb2RpbmdRdWV1ZT1udWxsKSx0aGlzLm9wZW4mJih0aGlzLl9vcGVuPSExLG4ucHJvdG90eXBlLmVtaXQuY2FsbCh0aGlzLGEuQ29ubmVjdGlvbkV2ZW50VHlwZS5DbG9zZSkpfSxzLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5vcGVuKWlmKHRoaXMuc2VyaWFsaXphdGlvbj09PWEuU2VyaWFsaXphdGlvblR5cGUuSlNPTil0aGlzLl9idWZmZXJlZFNlbmQodGhpcy5zdHJpbmdpZnkoZSkpO2Vsc2UgaWYodGhpcy5zZXJpYWxpemF0aW9uPT09YS5TZXJpYWxpemF0aW9uVHlwZS5CaW5hcnl8fHRoaXMuc2VyaWFsaXphdGlvbj09PWEuU2VyaWFsaXphdGlvblR5cGUuQmluYXJ5VVRGOCl7dmFyIG89aS51dGlsLnBhY2soZSk7aWYoIXQmJm8uc2l6ZT5pLnV0aWwuY2h1bmtlZE1UVSlyZXR1cm4gdm9pZCB0aGlzLl9zZW5kQ2h1bmtzKG8pO2kudXRpbC5zdXBwb3J0cy5iaW5hcnlCbG9iP3RoaXMuX2J1ZmZlcmVkU2VuZChvKTp0aGlzLl9lbmNvZGluZ1F1ZXVlLmVucXVlKG8pfWVsc2UgdGhpcy5fYnVmZmVyZWRTZW5kKGUpO2Vsc2Ugbi5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMsYS5Db25uZWN0aW9uRXZlbnRUeXBlLkVycm9yLG5ldyBFcnJvcihcIkNvbm5lY3Rpb24gaXMgbm90IG9wZW4uIFlvdSBzaG91bGQgbGlzdGVuIGZvciB0aGUgYG9wZW5gIGV2ZW50IGJlZm9yZSBzZW5kaW5nIG1lc3NhZ2VzLlwiKSl9LHMucHJvdG90eXBlLl9idWZmZXJlZFNlbmQ9ZnVuY3Rpb24oZSl7IXRoaXMuX2J1ZmZlcmluZyYmdGhpcy5fdHJ5U2VuZChlKXx8KHRoaXMuX2J1ZmZlci5wdXNoKGUpLHRoaXMuX2J1ZmZlclNpemU9dGhpcy5fYnVmZmVyLmxlbmd0aCl9LHMucHJvdG90eXBlLl90cnlTZW5kPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIXRoaXMub3BlbilyZXR1cm4hMTtpZih0aGlzLmRhdGFDaGFubmVsLmJ1ZmZlcmVkQW1vdW50PnMuTUFYX0JVRkZFUkVEX0FNT1VOVClyZXR1cm4gdGhpcy5fYnVmZmVyaW5nPSEwLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0Ll9idWZmZXJpbmc9ITEsdC5fdHJ5QnVmZmVyKCl9LDUwKSwhMTt0cnl7dGhpcy5kYXRhQ2hhbm5lbC5zZW5kKGUpfWNhdGNoKG4pe3JldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJEQyM6XCIrdGhpcy5jb25uZWN0aW9uSWQrXCIgRXJyb3Igd2hlbiBzZW5kaW5nOlwiLG4pLHRoaXMuX2J1ZmZlcmluZz0hMCx0aGlzLmNsb3NlKCksITF9cmV0dXJuITB9LHMucHJvdG90eXBlLl90cnlCdWZmZXI9ZnVuY3Rpb24oKXtpZih0aGlzLm9wZW4mJjAhPT10aGlzLl9idWZmZXIubGVuZ3RoKXt2YXIgZT10aGlzLl9idWZmZXJbMF07dGhpcy5fdHJ5U2VuZChlKSYmKHRoaXMuX2J1ZmZlci5zaGlmdCgpLHRoaXMuX2J1ZmZlclNpemU9dGhpcy5fYnVmZmVyLmxlbmd0aCx0aGlzLl90cnlCdWZmZXIoKSl9fSxzLnByb3RvdHlwZS5fc2VuZENodW5rcz1mdW5jdGlvbihlKXt2YXIgbixyLGE9aS51dGlsLmNodW5rKGUpO28uZGVmYXVsdC5sb2coXCJEQyNcIit0aGlzLmNvbm5lY3Rpb25JZCtcIiBUcnkgdG8gc2VuZCBcIithLmxlbmd0aCtcIiBjaHVua3MuLi5cIik7dHJ5e2Zvcih2YXIgcz10KGEpLHU9cy5uZXh0KCk7IXUuZG9uZTt1PXMubmV4dCgpKXt2YXIgbD11LnZhbHVlO3RoaXMuc2VuZChsLCEwKX19Y2F0Y2goZil7bj17ZXJyb3I6Zn19ZmluYWxseXt0cnl7dSYmIXUuZG9uZSYmKHI9cy5yZXR1cm4pJiZyLmNhbGwocyl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fX0scy5wcm90b3R5cGUuaGFuZGxlTWVzc2FnZT1mdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQ7c3dpdGNoKGUudHlwZSl7Y2FzZSBhLlNlcnZlck1lc3NhZ2VUeXBlLkFuc3dlcjp0aGlzLl9uZWdvdGlhdG9yLmhhbmRsZVNEUChlLnR5cGUsdC5zZHApO2JyZWFrO2Nhc2UgYS5TZXJ2ZXJNZXNzYWdlVHlwZS5DYW5kaWRhdGU6dGhpcy5fbmVnb3RpYXRvci5oYW5kbGVDYW5kaWRhdGUodC5jYW5kaWRhdGUpO2JyZWFrO2RlZmF1bHQ6by5kZWZhdWx0Lndhcm4oXCJVbnJlY29nbml6ZWQgbWVzc2FnZSB0eXBlOlwiLGUudHlwZSxcImZyb20gcGVlcjpcIix0aGlzLnBlZXIpfX0scy5JRF9QUkVGSVg9XCJkY19cIixzLk1BWF9CVUZGRVJFRF9BTU9VTlQ9ODM4ODYwOCxzfShzLkJhc2VDb25uZWN0aW9uKTtleHBvcnRzLkRhdGFDb25uZWN0aW9uPWw7XG59LHtcIi4vdXRpbFwiOlwiQkhYZlwiLFwiLi9sb2dnZXJcIjpcIldPczlcIixcIi4vbmVnb3RpYXRvclwiOlwiSENkWFwiLFwiLi9lbnVtc1wiOlwiWlJZZlwiLFwiLi9iYXNlY29ubmVjdGlvblwiOlwidFFGS1wiLFwiLi9lbmNvZGluZ1F1ZXVlXCI6XCJHR3A2XCJ9XSxcImluN0xcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIHQ9dGhpcyYmdGhpcy5fX2F3YWl0ZXJ8fGZ1bmN0aW9uKHQsZSxyLG8pe3JldHVybiBuZXcocnx8KHI9UHJvbWlzZSkpKGZ1bmN0aW9uKG4scyl7ZnVuY3Rpb24gaSh0KXt0cnl7YShvLm5leHQodCkpfWNhdGNoKGUpe3MoZSl9fWZ1bmN0aW9uIHUodCl7dHJ5e2Eoby50aHJvdyh0KSl9Y2F0Y2goZSl7cyhlKX19ZnVuY3Rpb24gYSh0KXt2YXIgZTt0LmRvbmU/bih0LnZhbHVlKTooZT10LnZhbHVlLGUgaW5zdGFuY2VvZiByP2U6bmV3IHIoZnVuY3Rpb24odCl7dChlKX0pKS50aGVuKGksdSl9YSgobz1vLmFwcGx5KHQsZXx8W10pKS5uZXh0KCkpfSl9LGU9dGhpcyYmdGhpcy5fX2dlbmVyYXRvcnx8ZnVuY3Rpb24odCxlKXt2YXIgcixvLG4scyxpPXtsYWJlbDowLHNlbnQ6ZnVuY3Rpb24oKXtpZigxJm5bMF0pdGhyb3cgblsxXTtyZXR1cm4gblsxXX0sdHJ5czpbXSxvcHM6W119O3JldHVybiBzPXtuZXh0OnUoMCksdGhyb3c6dSgxKSxyZXR1cm46dSgyKX0sXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiYoc1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxzO2Z1bmN0aW9uIHUocyl7cmV0dXJuIGZ1bmN0aW9uKHUpe3JldHVybiBmdW5jdGlvbihzKXtpZihyKXRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO2Zvcig7aTspdHJ5e2lmKHI9MSxvJiYobj0yJnNbMF0/by5yZXR1cm46c1swXT9vLnRocm93fHwoKG49by5yZXR1cm4pJiZuLmNhbGwobyksMCk6by5uZXh0KSYmIShuPW4uY2FsbChvLHNbMV0pKS5kb25lKXJldHVybiBuO3N3aXRjaChvPTAsbiYmKHM9WzImc1swXSxuLnZhbHVlXSksc1swXSl7Y2FzZSAwOmNhc2UgMTpuPXM7YnJlYWs7Y2FzZSA0OnJldHVybiBpLmxhYmVsKysse3ZhbHVlOnNbMV0sZG9uZTohMX07Y2FzZSA1OmkubGFiZWwrKyxvPXNbMV0scz1bMF07Y29udGludWU7Y2FzZSA3OnM9aS5vcHMucG9wKCksaS50cnlzLnBvcCgpO2NvbnRpbnVlO2RlZmF1bHQ6aWYoIShuPShuPWkudHJ5cykubGVuZ3RoPjAmJm5bbi5sZW5ndGgtMV0pJiYoNj09PXNbMF18fDI9PT1zWzBdKSl7aT0wO2NvbnRpbnVlfWlmKDM9PT1zWzBdJiYoIW58fHNbMV0+blswXSYmc1sxXTxuWzNdKSl7aS5sYWJlbD1zWzFdO2JyZWFrfWlmKDY9PT1zWzBdJiZpLmxhYmVsPG5bMV0pe2kubGFiZWw9blsxXSxuPXM7YnJlYWt9aWYobiYmaS5sYWJlbDxuWzJdKXtpLmxhYmVsPW5bMl0saS5vcHMucHVzaChzKTticmVha31uWzJdJiZpLm9wcy5wb3AoKSxpLnRyeXMucG9wKCk7Y29udGludWV9cz1lLmNhbGwodCxpKX1jYXRjaCh1KXtzPVs2LHVdLG89MH1maW5hbGx5e3I9bj0wfWlmKDUmc1swXSl0aHJvdyBzWzFdO3JldHVybnt2YWx1ZTpzWzBdP3NbMV06dm9pZCAwLGRvbmU6ITB9fShbcyx1XSl9fX0scj10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLkFQST12b2lkIDA7dmFyIG89cmVxdWlyZShcIi4vdXRpbFwiKSxuPXIocmVxdWlyZShcIi4vbG9nZ2VyXCIpKSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcih0KXt0aGlzLl9vcHRpb25zPXR9cmV0dXJuIHIucHJvdG90eXBlLl9idWlsZFVybD1mdW5jdGlvbih0KXt2YXIgZT0odGhpcy5fb3B0aW9ucy5zZWN1cmU/XCJodHRwczovL1wiOlwiaHR0cDovL1wiKSt0aGlzLl9vcHRpb25zLmhvc3QrXCI6XCIrdGhpcy5fb3B0aW9ucy5wb3J0K3RoaXMuX29wdGlvbnMucGF0aCt0aGlzLl9vcHRpb25zLmtleStcIi9cIit0O3JldHVybiBlKz1cIj90cz1cIisobmV3IERhdGUpLmdldFRpbWUoKStNYXRoLnJhbmRvbSgpfSxyLnByb3RvdHlwZS5yZXRyaWV2ZUlkPWZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcyx2b2lkIDAsUHJvbWlzZSxmdW5jdGlvbigpe3ZhciB0LHIscyxpO3JldHVybiBlKHRoaXMsZnVuY3Rpb24oZSl7c3dpdGNoKGUubGFiZWwpe2Nhc2UgMDp0PXRoaXMuX2J1aWxkVXJsKFwiaWRcIiksZS5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gZS50cnlzLnB1c2goWzEsMywsNF0pLFs0LGZldGNoKHQpXTtjYXNlIDI6aWYoMjAwIT09KHI9ZS5zZW50KCkpLnN0YXR1cyl0aHJvdyBuZXcgRXJyb3IoXCJFcnJvci4gU3RhdHVzOlwiK3Iuc3RhdHVzKTtyZXR1cm5bMixyLnRleHQoKV07Y2FzZSAzOnRocm93IHM9ZS5zZW50KCksbi5kZWZhdWx0LmVycm9yKFwiRXJyb3IgcmV0cmlldmluZyBJRFwiLHMpLGk9XCJcIixcIi9cIj09PXRoaXMuX29wdGlvbnMucGF0aCYmdGhpcy5fb3B0aW9ucy5ob3N0IT09by51dGlsLkNMT1VEX0hPU1QmJihpPVwiIElmIHlvdSBwYXNzZWQgaW4gYSBgcGF0aGAgdG8geW91ciBzZWxmLWhvc3RlZCBQZWVyU2VydmVyLCB5b3UnbGwgYWxzbyBuZWVkIHRvIHBhc3MgaW4gdGhhdCBzYW1lIHBhdGggd2hlbiBjcmVhdGluZyBhIG5ldyBQZWVyLlwiKSxuZXcgRXJyb3IoXCJDb3VsZCBub3QgZ2V0IGFuIElEIGZyb20gdGhlIHNlcnZlci5cIitpKTtjYXNlIDQ6cmV0dXJuWzJdfX0pfSl9LHIucHJvdG90eXBlLmxpc3RBbGxQZWVycz1mdW5jdGlvbigpe3JldHVybiB0KHRoaXMsdm9pZCAwLFByb21pc2UsZnVuY3Rpb24oKXt2YXIgdCxyLHMsaTtyZXR1cm4gZSh0aGlzLGZ1bmN0aW9uKGUpe3N3aXRjaChlLmxhYmVsKXtjYXNlIDA6dD10aGlzLl9idWlsZFVybChcInBlZXJzXCIpLGUubGFiZWw9MTtjYXNlIDE6cmV0dXJuIGUudHJ5cy5wdXNoKFsxLDMsLDRdKSxbNCxmZXRjaCh0KV07Y2FzZSAyOmlmKDIwMCE9PShyPWUuc2VudCgpKS5zdGF0dXMpe2lmKDQwMT09PXIuc3RhdHVzKXRocm93IHM9XCJcIixzPXRoaXMuX29wdGlvbnMuaG9zdD09PW8udXRpbC5DTE9VRF9IT1NUP1wiSXQgbG9va3MgbGlrZSB5b3UncmUgdXNpbmcgdGhlIGNsb3VkIHNlcnZlci4gWW91IGNhbiBlbWFpbCB0ZWFtQHBlZXJqcy5jb20gdG8gZW5hYmxlIHBlZXIgbGlzdGluZyBmb3IgeW91ciBBUEkga2V5LlwiOlwiWW91IG5lZWQgdG8gZW5hYmxlIGBhbGxvd19kaXNjb3ZlcnlgIG9uIHlvdXIgc2VsZi1ob3N0ZWQgUGVlclNlcnZlciB0byB1c2UgdGhpcyBmZWF0dXJlLlwiLG5ldyBFcnJvcihcIkl0IGRvZXNuJ3QgbG9vayBsaWtlIHlvdSBoYXZlIHBlcm1pc3Npb24gdG8gbGlzdCBwZWVycyBJRHMuIFwiK3MpO3Rocm93IG5ldyBFcnJvcihcIkVycm9yLiBTdGF0dXM6XCIrci5zdGF0dXMpfXJldHVyblsyLHIuanNvbigpXTtjYXNlIDM6dGhyb3cgaT1lLnNlbnQoKSxuLmRlZmF1bHQuZXJyb3IoXCJFcnJvciByZXRyaWV2aW5nIGxpc3QgcGVlcnNcIixpKSxuZXcgRXJyb3IoXCJDb3VsZCBub3QgZ2V0IGxpc3QgcGVlcnMgZnJvbSB0aGUgc2VydmVyLlwiK2kpO2Nhc2UgNDpyZXR1cm5bMl19fSl9KX0scn0oKTtleHBvcnRzLkFQST1zO1xufSx7XCIuL3V0aWxcIjpcIkJIWGZcIixcIi4vbG9nZ2VyXCI6XCJXT3M5XCJ9XSxcIkh4cGRcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIGU9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24odCxuKXtyZXR1cm4oZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSl9KSh0LG4pfTtyZXR1cm4gZnVuY3Rpb24odCxuKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBuJiZudWxsIT09bil0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIitTdHJpbmcobikrXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxuKSx0LnByb3RvdHlwZT1udWxsPT09bj9PYmplY3QuY3JlYXRlKG4pOihyLnByb3RvdHlwZT1uLnByb3RvdHlwZSxuZXcgcil9fSgpLHQ9dGhpcyYmdGhpcy5fX2Fzc2lnbnx8ZnVuY3Rpb24oKXtyZXR1cm4odD1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQsbj0xLHI9YXJndW1lbnRzLmxlbmd0aDtuPHI7bisrKWZvcih2YXIgbyBpbiB0PWFyZ3VtZW50c1tuXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxvKSYmKGVbb109dFtvXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG49dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Isbj10JiZlW3RdLHI9MDtpZihuKXJldHVybiBuLmNhbGwoZSk7aWYoZSYmXCJudW1iZXJcIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJnI+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW3IrK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/XCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiOlwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKX0scj10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24oZSx0KXt2YXIgbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXTtpZighbilyZXR1cm4gZTt2YXIgcixvLGk9bi5jYWxsKGUpLHM9W107dHJ5e2Zvcig7KHZvaWQgMD09PXR8fHQtLSA+MCkmJiEocj1pLm5leHQoKSkuZG9uZTspcy5wdXNoKHIudmFsdWUpfWNhdGNoKGEpe289e2Vycm9yOmF9fWZpbmFsbHl7dHJ5e3ImJiFyLmRvbmUmJihuPWkucmV0dXJuKSYmbi5jYWxsKGkpfWZpbmFsbHl7aWYobyl0aHJvdyBvLmVycm9yfX1yZXR1cm4gc30sbz10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLlBlZXI9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJldmVudGVtaXR0ZXIzXCIpLHM9cmVxdWlyZShcIi4vdXRpbFwiKSxhPW8ocmVxdWlyZShcIi4vbG9nZ2VyXCIpKSxjPXJlcXVpcmUoXCIuL3NvY2tldFwiKSxsPXJlcXVpcmUoXCIuL21lZGlhY29ubmVjdGlvblwiKSx1PXJlcXVpcmUoXCIuL2RhdGFjb25uZWN0aW9uXCIpLGQ9cmVxdWlyZShcIi4vZW51bXNcIikscD1yZXF1aXJlKFwiLi9hcGlcIiksaD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe319KCksZj1mdW5jdGlvbihvKXtmdW5jdGlvbiBpKGUsbil7dmFyIHIsYz1vLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGMuX2lkPW51bGwsYy5fbGFzdFNlcnZlcklkPW51bGwsYy5fZGVzdHJveWVkPSExLGMuX2Rpc2Nvbm5lY3RlZD0hMSxjLl9vcGVuPSExLGMuX2Nvbm5lY3Rpb25zPW5ldyBNYXAsYy5fbG9zdE1lc3NhZ2VzPW5ldyBNYXAsZSYmZS5jb25zdHJ1Y3Rvcj09T2JqZWN0P249ZTplJiYocj1lLnRvU3RyaW5nKCkpLG49dCh7ZGVidWc6MCxob3N0OnMudXRpbC5DTE9VRF9IT1NULHBvcnQ6cy51dGlsLkNMT1VEX1BPUlQscGF0aDpcIi9cIixrZXk6aS5ERUZBVUxUX0tFWSx0b2tlbjpzLnV0aWwucmFuZG9tVG9rZW4oKSxjb25maWc6cy51dGlsLmRlZmF1bHRDb25maWd9LG4pLGMuX29wdGlvbnM9bixcIi9cIj09PWMuX29wdGlvbnMuaG9zdCYmKGMuX29wdGlvbnMuaG9zdD13aW5kb3cubG9jYXRpb24uaG9zdG5hbWUpLGMuX29wdGlvbnMucGF0aCYmKFwiL1wiIT09Yy5fb3B0aW9ucy5wYXRoWzBdJiYoYy5fb3B0aW9ucy5wYXRoPVwiL1wiK2MuX29wdGlvbnMucGF0aCksXCIvXCIhPT1jLl9vcHRpb25zLnBhdGhbYy5fb3B0aW9ucy5wYXRoLmxlbmd0aC0xXSYmKGMuX29wdGlvbnMucGF0aCs9XCIvXCIpKSx2b2lkIDA9PT1jLl9vcHRpb25zLnNlY3VyZSYmYy5fb3B0aW9ucy5ob3N0IT09cy51dGlsLkNMT1VEX0hPU1Q/Yy5fb3B0aW9ucy5zZWN1cmU9cy51dGlsLmlzU2VjdXJlKCk6Yy5fb3B0aW9ucy5ob3N0PT1zLnV0aWwuQ0xPVURfSE9TVCYmKGMuX29wdGlvbnMuc2VjdXJlPSEwKSxjLl9vcHRpb25zLmxvZ0Z1bmN0aW9uJiZhLmRlZmF1bHQuc2V0TG9nRnVuY3Rpb24oYy5fb3B0aW9ucy5sb2dGdW5jdGlvbiksYS5kZWZhdWx0LmxvZ0xldmVsPWMuX29wdGlvbnMuZGVidWd8fDAsYy5fYXBpPW5ldyBwLkFQSShuKSxjLl9zb2NrZXQ9Yy5fY3JlYXRlU2VydmVyQ29ubmVjdGlvbigpLHMudXRpbC5zdXBwb3J0cy5hdWRpb1ZpZGVvfHxzLnV0aWwuc3VwcG9ydHMuZGF0YT9yJiYhcy51dGlsLnZhbGlkYXRlSWQocik/KGMuX2RlbGF5ZWRBYm9ydChkLlBlZXJFcnJvclR5cGUuSW52YWxpZElELCdJRCBcIicrcisnXCIgaXMgaW52YWxpZCcpLGMpOihyP2MuX2luaXRpYWxpemUocik6Yy5fYXBpLnJldHJpZXZlSWQoKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBjLl9pbml0aWFsaXplKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIGMuX2Fib3J0KGQuUGVlckVycm9yVHlwZS5TZXJ2ZXJFcnJvcixlKX0pLGMpOihjLl9kZWxheWVkQWJvcnQoZC5QZWVyRXJyb3JUeXBlLkJyb3dzZXJJbmNvbXBhdGlibGUsXCJUaGUgY3VycmVudCBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgV2ViUlRDXCIpLGMpfXJldHVybiBlKGksbyksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiaWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lkfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcIm9wdGlvbnNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29wdGlvbnN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwib3BlblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3Blbn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJzb2NrZXRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvY2tldH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJjb25uZWN0aW9uc1wiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZSx0LG89T2JqZWN0LmNyZWF0ZShudWxsKTt0cnl7Zm9yKHZhciBpPW4odGhpcy5fY29ubmVjdGlvbnMpLHM9aS5uZXh0KCk7IXMuZG9uZTtzPWkubmV4dCgpKXt2YXIgYT1yKHMudmFsdWUsMiksYz1hWzBdLGw9YVsxXTtvW2NdPWx9fWNhdGNoKHUpe2U9e2Vycm9yOnV9fWZpbmFsbHl7dHJ5e3MmJiFzLmRvbmUmJih0PWkucmV0dXJuKSYmdC5jYWxsKGkpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX1yZXR1cm4gb30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJkZXN0cm95ZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rlc3Ryb3llZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJkaXNjb25uZWN0ZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rpc2Nvbm5lY3RlZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxpLnByb3RvdHlwZS5fY3JlYXRlU2VydmVyQ29ubmVjdGlvbj1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgYy5Tb2NrZXQodGhpcy5fb3B0aW9ucy5zZWN1cmUsdGhpcy5fb3B0aW9ucy5ob3N0LHRoaXMuX29wdGlvbnMucG9ydCx0aGlzLl9vcHRpb25zLnBhdGgsdGhpcy5fb3B0aW9ucy5rZXksdGhpcy5fb3B0aW9ucy5waW5nSW50ZXJ2YWwpO3JldHVybiB0Lm9uKGQuU29ja2V0RXZlbnRUeXBlLk1lc3NhZ2UsZnVuY3Rpb24odCl7ZS5faGFuZGxlTWVzc2FnZSh0KX0pLHQub24oZC5Tb2NrZXRFdmVudFR5cGUuRXJyb3IsZnVuY3Rpb24odCl7ZS5fYWJvcnQoZC5QZWVyRXJyb3JUeXBlLlNvY2tldEVycm9yLHQpfSksdC5vbihkLlNvY2tldEV2ZW50VHlwZS5EaXNjb25uZWN0ZWQsZnVuY3Rpb24oKXtlLmRpc2Nvbm5lY3RlZHx8KGUuZW1pdEVycm9yKGQuUGVlckVycm9yVHlwZS5OZXR3b3JrLFwiTG9zdCBjb25uZWN0aW9uIHRvIHNlcnZlci5cIiksZS5kaXNjb25uZWN0KCkpfSksdC5vbihkLlNvY2tldEV2ZW50VHlwZS5DbG9zZSxmdW5jdGlvbigpe2UuZGlzY29ubmVjdGVkfHxlLl9hYm9ydChkLlBlZXJFcnJvclR5cGUuU29ja2V0Q2xvc2VkLFwiVW5kZXJseWluZyBzb2NrZXQgaXMgYWxyZWFkeSBjbG9zZWQuXCIpfSksdH0saS5wcm90b3R5cGUuX2luaXRpYWxpemU9ZnVuY3Rpb24oZSl7dGhpcy5faWQ9ZSx0aGlzLnNvY2tldC5zdGFydChlLHRoaXMuX29wdGlvbnMudG9rZW4pfSxpLnByb3RvdHlwZS5faGFuZGxlTWVzc2FnZT1mdW5jdGlvbihlKXt2YXIgdCxyLG89ZS50eXBlLGk9ZS5wYXlsb2FkLHM9ZS5zcmM7c3dpdGNoKG8pe2Nhc2UgZC5TZXJ2ZXJNZXNzYWdlVHlwZS5PcGVuOnRoaXMuX2xhc3RTZXJ2ZXJJZD10aGlzLmlkLHRoaXMuX29wZW49ITAsdGhpcy5lbWl0KGQuUGVlckV2ZW50VHlwZS5PcGVuLHRoaXMuaWQpO2JyZWFrO2Nhc2UgZC5TZXJ2ZXJNZXNzYWdlVHlwZS5FcnJvcjp0aGlzLl9hYm9ydChkLlBlZXJFcnJvclR5cGUuU2VydmVyRXJyb3IsaS5tc2cpO2JyZWFrO2Nhc2UgZC5TZXJ2ZXJNZXNzYWdlVHlwZS5JZFRha2VuOnRoaXMuX2Fib3J0KGQuUGVlckVycm9yVHlwZS5VbmF2YWlsYWJsZUlELCdJRCBcIicrdGhpcy5pZCsnXCIgaXMgdGFrZW4nKTticmVhaztjYXNlIGQuU2VydmVyTWVzc2FnZVR5cGUuSW52YWxpZEtleTp0aGlzLl9hYm9ydChkLlBlZXJFcnJvclR5cGUuSW52YWxpZEtleSwnQVBJIEtFWSBcIicrdGhpcy5fb3B0aW9ucy5rZXkrJ1wiIGlzIGludmFsaWQnKTticmVhaztjYXNlIGQuU2VydmVyTWVzc2FnZVR5cGUuTGVhdmU6YS5kZWZhdWx0LmxvZyhcIlJlY2VpdmVkIGxlYXZlIG1lc3NhZ2UgZnJvbSBcIitzKSx0aGlzLl9jbGVhbnVwUGVlcihzKSx0aGlzLl9jb25uZWN0aW9ucy5kZWxldGUocyk7YnJlYWs7Y2FzZSBkLlNlcnZlck1lc3NhZ2VUeXBlLkV4cGlyZTp0aGlzLmVtaXRFcnJvcihkLlBlZXJFcnJvclR5cGUuUGVlclVuYXZhaWxhYmxlLFwiQ291bGQgbm90IGNvbm5lY3QgdG8gcGVlciBcIitzKTticmVhaztjYXNlIGQuU2VydmVyTWVzc2FnZVR5cGUuT2ZmZXI6dmFyIGM9aS5jb25uZWN0aW9uSWQ7aWYoKF89dGhpcy5nZXRDb25uZWN0aW9uKHMsYykpJiYoXy5jbG9zZSgpLGEuZGVmYXVsdC53YXJuKFwiT2ZmZXIgcmVjZWl2ZWQgZm9yIGV4aXN0aW5nIENvbm5lY3Rpb24gSUQ6XCIrYykpLGkudHlwZT09PWQuQ29ubmVjdGlvblR5cGUuTWVkaWEpXz1uZXcgbC5NZWRpYUNvbm5lY3Rpb24ocyx0aGlzLHtjb25uZWN0aW9uSWQ6YyxfcGF5bG9hZDppLG1ldGFkYXRhOmkubWV0YWRhdGF9KSx0aGlzLl9hZGRDb25uZWN0aW9uKHMsXyksdGhpcy5lbWl0KGQuUGVlckV2ZW50VHlwZS5DYWxsLF8pO2Vsc2V7aWYoaS50eXBlIT09ZC5Db25uZWN0aW9uVHlwZS5EYXRhKXJldHVybiB2b2lkIGEuZGVmYXVsdC53YXJuKFwiUmVjZWl2ZWQgbWFsZm9ybWVkIGNvbm5lY3Rpb24gdHlwZTpcIitpLnR5cGUpO189bmV3IHUuRGF0YUNvbm5lY3Rpb24ocyx0aGlzLHtjb25uZWN0aW9uSWQ6YyxfcGF5bG9hZDppLG1ldGFkYXRhOmkubWV0YWRhdGEsbGFiZWw6aS5sYWJlbCxzZXJpYWxpemF0aW9uOmkuc2VyaWFsaXphdGlvbixyZWxpYWJsZTppLnJlbGlhYmxlfSksdGhpcy5fYWRkQ29ubmVjdGlvbihzLF8pLHRoaXMuZW1pdChkLlBlZXJFdmVudFR5cGUuQ29ubmVjdGlvbixfKX12YXIgcD10aGlzLl9nZXRNZXNzYWdlcyhjKTt0cnl7Zm9yKHZhciBoPW4ocCksZj1oLm5leHQoKTshZi5kb25lO2Y9aC5uZXh0KCkpe3ZhciB5PWYudmFsdWU7Xy5oYW5kbGVNZXNzYWdlKHkpfX1jYXRjaCh2KXt0PXtlcnJvcjp2fX1maW5hbGx5e3RyeXtmJiYhZi5kb25lJiYocj1oLnJldHVybikmJnIuY2FsbChoKX1maW5hbGx5e2lmKHQpdGhyb3cgdC5lcnJvcn19YnJlYWs7ZGVmYXVsdDppZighaSlyZXR1cm4gdm9pZCBhLmRlZmF1bHQud2FybihcIllvdSByZWNlaXZlZCBhIG1hbGZvcm1lZCBtZXNzYWdlIGZyb20gXCIrcytcIiBvZiB0eXBlIFwiK28pO3ZhciBfO2M9aS5jb25uZWN0aW9uSWQ7KF89dGhpcy5nZXRDb25uZWN0aW9uKHMsYykpJiZfLnBlZXJDb25uZWN0aW9uP18uaGFuZGxlTWVzc2FnZShlKTpjP3RoaXMuX3N0b3JlTWVzc2FnZShjLGUpOmEuZGVmYXVsdC53YXJuKFwiWW91IHJlY2VpdmVkIGFuIHVucmVjb2duaXplZCBtZXNzYWdlOlwiLGUpfX0saS5wcm90b3R5cGUuX3N0b3JlTWVzc2FnZT1mdW5jdGlvbihlLHQpe3RoaXMuX2xvc3RNZXNzYWdlcy5oYXMoZSl8fHRoaXMuX2xvc3RNZXNzYWdlcy5zZXQoZSxbXSksdGhpcy5fbG9zdE1lc3NhZ2VzLmdldChlKS5wdXNoKHQpfSxpLnByb3RvdHlwZS5fZ2V0TWVzc2FnZXM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbG9zdE1lc3NhZ2VzLmdldChlKTtyZXR1cm4gdD8odGhpcy5fbG9zdE1lc3NhZ2VzLmRlbGV0ZShlKSx0KTpbXX0saS5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PXQmJih0PXt9KSx0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4gYS5kZWZhdWx0Lndhcm4oXCJZb3UgY2Fubm90IGNvbm5lY3QgdG8gYSBuZXcgUGVlciBiZWNhdXNlIHlvdSBjYWxsZWQgLmRpc2Nvbm5lY3QoKSBvbiB0aGlzIFBlZXIgYW5kIGVuZGVkIHlvdXIgY29ubmVjdGlvbiB3aXRoIHRoZSBzZXJ2ZXIuIFlvdSBjYW4gY3JlYXRlIGEgbmV3IFBlZXIgdG8gcmVjb25uZWN0LCBvciBjYWxsIHJlY29ubmVjdCBvbiB0aGlzIHBlZXIgaWYgeW91IGJlbGlldmUgaXRzIElEIHRvIHN0aWxsIGJlIGF2YWlsYWJsZS5cIiksdm9pZCB0aGlzLmVtaXRFcnJvcihkLlBlZXJFcnJvclR5cGUuRGlzY29ubmVjdGVkLFwiQ2Fubm90IGNvbm5lY3QgdG8gbmV3IFBlZXIgYWZ0ZXIgZGlzY29ubmVjdGluZyBmcm9tIHNlcnZlci5cIik7dmFyIG49bmV3IHUuRGF0YUNvbm5lY3Rpb24oZSx0aGlzLHQpO3JldHVybiB0aGlzLl9hZGRDb25uZWN0aW9uKGUsbiksbn0saS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQsbil7aWYodm9pZCAwPT09biYmKG49e30pLHRoaXMuZGlzY29ubmVjdGVkKXJldHVybiBhLmRlZmF1bHQud2FybihcIllvdSBjYW5ub3QgY29ubmVjdCB0byBhIG5ldyBQZWVyIGJlY2F1c2UgeW91IGNhbGxlZCAuZGlzY29ubmVjdCgpIG9uIHRoaXMgUGVlciBhbmQgZW5kZWQgeW91ciBjb25uZWN0aW9uIHdpdGggdGhlIHNlcnZlci4gWW91IGNhbiBjcmVhdGUgYSBuZXcgUGVlciB0byByZWNvbm5lY3QuXCIpLHZvaWQgdGhpcy5lbWl0RXJyb3IoZC5QZWVyRXJyb3JUeXBlLkRpc2Nvbm5lY3RlZCxcIkNhbm5vdCBjb25uZWN0IHRvIG5ldyBQZWVyIGFmdGVyIGRpc2Nvbm5lY3RpbmcgZnJvbSBzZXJ2ZXIuXCIpO2lmKHQpe24uX3N0cmVhbT10O3ZhciByPW5ldyBsLk1lZGlhQ29ubmVjdGlvbihlLHRoaXMsbik7cmV0dXJuIHRoaXMuX2FkZENvbm5lY3Rpb24oZSxyKSxyfWEuZGVmYXVsdC5lcnJvcihcIlRvIGNhbGwgYSBwZWVyLCB5b3UgbXVzdCBwcm92aWRlIGEgc3RyZWFtIGZyb20geW91ciBicm93c2VyJ3MgYGdldFVzZXJNZWRpYWAuXCIpfSxpLnByb3RvdHlwZS5fYWRkQ29ubmVjdGlvbj1mdW5jdGlvbihlLHQpe2EuZGVmYXVsdC5sb2coXCJhZGQgY29ubmVjdGlvbiBcIit0LnR5cGUrXCI6XCIrdC5jb25uZWN0aW9uSWQrXCIgdG8gcGVlcklkOlwiK2UpLHRoaXMuX2Nvbm5lY3Rpb25zLmhhcyhlKXx8dGhpcy5fY29ubmVjdGlvbnMuc2V0KGUsW10pLHRoaXMuX2Nvbm5lY3Rpb25zLmdldChlKS5wdXNoKHQpfSxpLnByb3RvdHlwZS5fcmVtb3ZlQ29ubmVjdGlvbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb25uZWN0aW9ucy5nZXQoZS5wZWVyKTtpZih0KXt2YXIgbj10LmluZGV4T2YoZSk7LTEhPT1uJiZ0LnNwbGljZShuLDEpfXRoaXMuX2xvc3RNZXNzYWdlcy5kZWxldGUoZS5jb25uZWN0aW9uSWQpfSxpLnByb3RvdHlwZS5nZXRDb25uZWN0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIHIsbyxpPXRoaXMuX2Nvbm5lY3Rpb25zLmdldChlKTtpZighaSlyZXR1cm4gbnVsbDt0cnl7Zm9yKHZhciBzPW4oaSksYT1zLm5leHQoKTshYS5kb25lO2E9cy5uZXh0KCkpe3ZhciBjPWEudmFsdWU7aWYoYy5jb25uZWN0aW9uSWQ9PT10KXJldHVybiBjfX1jYXRjaChsKXtyPXtlcnJvcjpsfX1maW5hbGx5e3RyeXthJiYhYS5kb25lJiYobz1zLnJldHVybikmJm8uY2FsbChzKX1maW5hbGx5e2lmKHIpdGhyb3cgci5lcnJvcn19cmV0dXJuIG51bGx9LGkucHJvdG90eXBlLl9kZWxheWVkQWJvcnQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtuLl9hYm9ydChlLHQpfSwwKX0saS5wcm90b3R5cGUuX2Fib3J0PWZ1bmN0aW9uKGUsdCl7YS5kZWZhdWx0LmVycm9yKFwiQWJvcnRpbmchXCIpLHRoaXMuZW1pdEVycm9yKGUsdCksdGhpcy5fbGFzdFNlcnZlcklkP3RoaXMuZGlzY29ubmVjdCgpOnRoaXMuZGVzdHJveSgpfSxpLnByb3RvdHlwZS5lbWl0RXJyb3I9ZnVuY3Rpb24oZSx0KXt2YXIgbjthLmRlZmF1bHQuZXJyb3IoXCJFcnJvcjpcIix0KSwobj1cInN0cmluZ1wiPT10eXBlb2YgdD9uZXcgRXJyb3IodCk6dCkudHlwZT1lLHRoaXMuZW1pdChkLlBlZXJFdmVudFR5cGUuRXJyb3Isbil9LGkucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmRlc3Ryb3llZHx8KGEuZGVmYXVsdC5sb2coXCJEZXN0cm95IHBlZXIgd2l0aCBJRDpcIit0aGlzLmlkKSx0aGlzLmRpc2Nvbm5lY3QoKSx0aGlzLl9jbGVhbnVwKCksdGhpcy5fZGVzdHJveWVkPSEwLHRoaXMuZW1pdChkLlBlZXJFdmVudFR5cGUuQ2xvc2UpKX0saS5wcm90b3R5cGUuX2NsZWFudXA9ZnVuY3Rpb24oKXt2YXIgZSx0O3RyeXtmb3IodmFyIHI9bih0aGlzLl9jb25uZWN0aW9ucy5rZXlzKCkpLG89ci5uZXh0KCk7IW8uZG9uZTtvPXIubmV4dCgpKXt2YXIgaT1vLnZhbHVlO3RoaXMuX2NsZWFudXBQZWVyKGkpLHRoaXMuX2Nvbm5lY3Rpb25zLmRlbGV0ZShpKX19Y2F0Y2gocyl7ZT17ZXJyb3I6c319ZmluYWxseXt0cnl7byYmIW8uZG9uZSYmKHQ9ci5yZXR1cm4pJiZ0LmNhbGwocil9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fXRoaXMuc29ja2V0LnJlbW92ZUFsbExpc3RlbmVycygpfSxpLnByb3RvdHlwZS5fY2xlYW51cFBlZXI9ZnVuY3Rpb24oZSl7dmFyIHQscixvPXRoaXMuX2Nvbm5lY3Rpb25zLmdldChlKTtpZihvKXRyeXtmb3IodmFyIGk9bihvKSxzPWkubmV4dCgpOyFzLmRvbmU7cz1pLm5leHQoKSl7cy52YWx1ZS5jbG9zZSgpfX1jYXRjaChhKXt0PXtlcnJvcjphfX1maW5hbGx5e3RyeXtzJiYhcy5kb25lJiYocj1pLnJldHVybikmJnIuY2FsbChpKX1maW5hbGx5e2lmKHQpdGhyb3cgdC5lcnJvcn19fSxpLnByb3RvdHlwZS5kaXNjb25uZWN0PWZ1bmN0aW9uKCl7aWYoIXRoaXMuZGlzY29ubmVjdGVkKXt2YXIgZT10aGlzLmlkO2EuZGVmYXVsdC5sb2coXCJEaXNjb25uZWN0IHBlZXIgd2l0aCBJRDpcIitlKSx0aGlzLl9kaXNjb25uZWN0ZWQ9ITAsdGhpcy5fb3Blbj0hMSx0aGlzLnNvY2tldC5jbG9zZSgpLHRoaXMuX2xhc3RTZXJ2ZXJJZD1lLHRoaXMuX2lkPW51bGwsdGhpcy5lbWl0KGQuUGVlckV2ZW50VHlwZS5EaXNjb25uZWN0ZWQsZSl9fSxpLnByb3RvdHlwZS5yZWNvbm5lY3Q9ZnVuY3Rpb24oKXtpZih0aGlzLmRpc2Nvbm5lY3RlZCYmIXRoaXMuZGVzdHJveWVkKWEuZGVmYXVsdC5sb2coXCJBdHRlbXB0aW5nIHJlY29ubmVjdGlvbiB0byBzZXJ2ZXIgd2l0aCBJRCBcIit0aGlzLl9sYXN0U2VydmVySWQpLHRoaXMuX2Rpc2Nvbm5lY3RlZD0hMSx0aGlzLl9pbml0aWFsaXplKHRoaXMuX2xhc3RTZXJ2ZXJJZCk7ZWxzZXtpZih0aGlzLmRlc3Ryb3llZCl0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIHBlZXIgY2Fubm90IHJlY29ubmVjdCB0byB0aGUgc2VydmVyLiBJdCBoYXMgYWxyZWFkeSBiZWVuIGRlc3Ryb3llZC5cIik7aWYodGhpcy5kaXNjb25uZWN0ZWR8fHRoaXMub3Blbil0aHJvdyBuZXcgRXJyb3IoXCJQZWVyIFwiK3RoaXMuaWQrXCIgY2Fubm90IHJlY29ubmVjdCBiZWNhdXNlIGl0IGlzIG5vdCBkaXNjb25uZWN0ZWQgZnJvbSB0aGUgc2VydmVyIVwiKTthLmRlZmF1bHQuZXJyb3IoXCJJbiBhIGh1cnJ5PyBXZSdyZSBzdGlsbCB0cnlpbmcgdG8gbWFrZSB0aGUgaW5pdGlhbCBjb25uZWN0aW9uIVwiKX19LGkucHJvdG90eXBlLmxpc3RBbGxQZWVycz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3ZvaWQgMD09PWUmJihlPWZ1bmN0aW9uKGUpe30pLHRoaXMuX2FwaS5saXN0QWxsUGVlcnMoKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlKHQpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHQuX2Fib3J0KGQuUGVlckVycm9yVHlwZS5TZXJ2ZXJFcnJvcixlKX0pfSxpLkRFRkFVTFRfS0VZPVwicGVlcmpzXCIsaX0oaS5FdmVudEVtaXR0ZXIpO2V4cG9ydHMuUGVlcj1mO1xufSx7XCJldmVudGVtaXR0ZXIzXCI6XCJKSmxTXCIsXCIuL3V0aWxcIjpcIkJIWGZcIixcIi4vbG9nZ2VyXCI6XCJXT3M5XCIsXCIuL3NvY2tldFwiOlwid0psdlwiLFwiLi9tZWRpYWNvbm5lY3Rpb25cIjpcImRiSFBcIixcIi4vZGF0YWNvbm5lY3Rpb25cIjpcIkdCVFFcIixcIi4vZW51bXNcIjpcIlpSWWZcIixcIi4vYXBpXCI6XCJpbjdMXCJ9XSxcImlUSzZcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5wZWVyanM9dm9pZCAwO3ZhciBlPXJlcXVpcmUoXCIuL3V0aWxcIikscj1yZXF1aXJlKFwiLi9wZWVyXCIpO2V4cG9ydHMucGVlcmpzPXtQZWVyOnIuUGVlcix1dGlsOmUudXRpbH0sZXhwb3J0cy5kZWZhdWx0PXIuUGVlcix3aW5kb3cucGVlcmpzPWV4cG9ydHMucGVlcmpzLHdpbmRvdy5QZWVyPXIuUGVlcjtcbn0se1wiLi91dGlsXCI6XCJCSFhmXCIsXCIuL3BlZXJcIjpcIkh4cGRcIn1dfSx7fSxbXCJpVEs2XCJdLCBudWxsKVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9L3BlZXJqcy5taW4uanMubWFwIiwiaW1wb3J0IHsgc3RyaW5nX2RpY3QgfSBmcm9tIFwibGliL3V0aWxzXCI7XG5pbXBvcnQge1ZlY3RvcixvYmpfc3RhdGUscm9vbV9zdGF0ZX0gZnJvbSBcIi4uL2xpYi9zdGF0ZVwiO1xuaW1wb3J0IHtnYW1lLEdldFZpZXdwb3J0RGltZW5zaW9ucyx2aWV3cG9ydH0gZnJvbSBcIi4uL3ZhblwiO1xuXG5jb25zdCBQVVpaTEVTX1VSTCA9IFwiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1JlZWRLcmF3aWVjL2NoZXNzLXBsZWFzZS9tYXN0ZXIvc3JjL2dhbWUvcHV6emxlcy5jc3ZcIjtcblxubGV0IGNhbnZhc19lbGVtZW50OkhUTUxDYW52YXNFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXJnZXRcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgZ2FtZV9zdGF0ZXtcbiAgcmF0aW5nOm51bWJlcixcbiAgcHV6emxlczogcHV6emxlW10sXG4gIGludmVudG9yeTpzdHJpbmdbXSxcbiAgZmxhZ3M6c3RyaW5nX2RpY3Q8c3RyaW5nPlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIHB1enpsZSB7XG4gIGlkOnN0cmluZ1xuICByYXRpbmc6bnVtYmVyXG4gIGZlbjpzdHJpbmdcbiAgc29sdXRpb246c3RyaW5nW11cbn1cblxuZXhwb3J0IGxldCBnOmdhbWU8Z2FtZV9zdGF0ZT47IFxuZXhwb3J0IGludGVyZmFjZSBpdGVtX2VudHJ5e1xuICBuYW1lOnN0cmluZyxcbiAgb2JqX25hbWU6c3RyaW5nLFxuICBkZXNjcmlwdGlvbjpzdHJpbmdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5leHRQdXp6bGUocHV6emxlczpwdXp6bGVbXSwgdGFyZ2V0X3JhdGluZzpudW1iZXIsIHJhbmdlOm51bWJlcil7XG4gIGxldCBmaWx0ZXJlZCA9IHB1enpsZXMuZmlsdGVyKHAgPT4gcC5yYXRpbmcgPj0gdGFyZ2V0X3JhdGluZyAtIHJhbmdlICYmIHAucmF0aW5nIDw9IHRhcmdldF9yYXRpbmcgKyByYW5nZSk7XG4gIGlmKGZpbHRlcmVkLmxlbmd0aCA9PSAwKXtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gZmlsdGVyZWRbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZmlsdGVyZWQubGVuZ3RoKV07XG59O1xuXG5leHBvcnQgY29uc3QgaXRlbXM6c3RyaW5nX2RpY3Q8aXRlbV9lbnRyeT4gPSB7XG4gIFwidGVzdFwiIDoge1xuICAgIG5hbWU6XCJ0ZXN0XCIsXG4gICAgb2JqX25hbWU6XCJ0ZXN0X2l0ZW1cIixcbiAgICBkZXNjcmlwdGlvbjpgRGVleiBudXRzYFxuICB9LFxuICBcInRlc3QyXCIgOiB7XG4gICAgbmFtZTpcInRlc3QyXCIsXG4gICAgb2JqX25hbWU6XCJ0ZXN0X2l0ZW0yXCIsXG4gICAgZGVzY3JpcHRpb246YFN0cmluZ3MgYXJlIGEgZGVjZXB0aXZlbHkgY29tcGxleCBkYXRhIHN0cnVjdHVyZSB0aGF0IGFyZSBiZXN0IHRob3VnaCBvZmYgYXMgbXVsdGktZGltZW5zaW9uYWwgdmVjdG9ycy4gV29ya2luZyB3aXRoIHN0cmluZ3MgaW4gSmF2YSBpcyBlYXN5LiBEb2luZyB0aGUgc2FtZSBpbiBDIGlzIGhvcnJpYmxlLmBcbiAgfSxcbiAgXCJ0ZXN0X2NoYXJcIiA6IHtcbiAgICBuYW1lOiBcIlRlc3QgQ2hhcmFjdGVyXCIsXG4gICAgb2JqX25hbWU6XCJ0ZXN0X2l0ZW1cIixcbiAgICBkZXNjcmlwdGlvbjpcIkknbSBpbiB5b3VyIGludmVudG9yeSAhISA6b1wiXG4gIH1cbn07XG5cbihhc3luYyBmdW5jdGlvbigpe1xuICBsZXQgcHV6emxlc19yYXcgPSBhd2FpdCBmZXRjaChQVVpaTEVTX1VSTCk7XG4gIGxldCBwdXp6bGVzX2xpbmVzID0gKGF3YWl0IHB1enpsZXNfcmF3LnRleHQoKSkuc3BsaXQoXCJcXG5cIik7XG4gIGxldCBwdXp6bGVzOnB1enpsZVtdID0gcHV6emxlc19saW5lcy5tYXAobGluZSA9PiB7XG4gICAgbGV0IGxpbmVzX3NwbGl0ID0gbGluZS5zcGxpdChcIixcIik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBsaW5lc19zcGxpdFswXSxcbiAgICAgIGZlbjogbGluZXNfc3BsaXRbMV0sXG4gICAgICBzb2x1dGlvbjogbGluZXNfc3BsaXRbMl0gPyBsaW5lc19zcGxpdFsyXS5zcGxpdChcIiBcIikgOiBbXSxcbiAgICAgIHJhdGluZzogcGFyc2VJbnQobGluZXNfc3BsaXRbM10pXG4gICAgfTtcbiAgfSk7XG4gIHB1enpsZXMuc29ydCgoYSxiKSA9PiBhLnJhdGluZyAtIGIucmF0aW5nKTtcbiAgZyA9IG5ldyBnYW1lPGdhbWVfc3RhdGU+KGNhbnZhc19lbGVtZW50LmdldENvbnRleHQoXCIyZFwiKSx7XG4gICAgcmF0aW5nOiAxNjAwLFxuICAgIHB1enpsZXMsXG4gICAgZmxhZ3M6e30sXG4gIGludmVudG9yeTpbXCJ0ZXN0XCIsXCJ0ZXN0MlwiLFwidGVzdFwiLFwidGVzdDJcIixcInRlc3RcIixcInRlc3QyXCIsXCJ0ZXN0XCIsXCJ0ZXN0MlwiLFwidGVzdFwiLFwidGVzdDJcIl1cbiAgfSk7XG4gIGcubG9hZFJvb21TdHJpbmcoXCJ0ZXN0XCIpO1xufSkoKTtcbiIsImltcG9ydCB7IGcsIGl0ZW1fZW50cnkgfSBmcm9tIFwiZ2FtZS9tYWluXCI7XG5pbXBvcnQgeyB0b3BfZG93biB9IGZyb20gXCJnYW1lL3Jvb21zL2Fic3RyYWN0L3RvcF9kb3duXCI7XG5pbXBvcnQgeyBQb2xsX01vdXNlIH0gZnJvbSBcImxpYi9jb250cm9sc1wiO1xuaW1wb3J0IHtvYmp9IGZyb20gXCJsaWIvb2JqZWN0XCI7XG5pbXBvcnQgeyBvYmpfc3RhdGUsIFZlY3RvciB9IGZyb20gXCJsaWIvc3RhdGVcIjtcbmltcG9ydCB7Y29weX0gZnJvbSBcInNyYy92YW5cIjtcblxuZXhwb3J0IGludGVyZmFjZSBpdGVtX3N0YXRlIGV4dGVuZHMgb2JqX3N0YXRle1xuICAgIFxufVxuICAgIFxuZXhwb3J0IGludGVyZmFjZSBpdGVtX3BhcmFtZXRlcnN7XG4gICAgXG59XG4gICAgXG5leHBvcnQgY2xhc3MgaXRlbSBleHRlbmRzIG9iantcbiAgc3ByaXRlX3VybCA9IFwiLi9zcHJpdGVzL0Vycm9yLnBuZ1wiO1xuICBoZWlnaHQgPSAxMDA7XG4gIHdpZHRoID0gMTAwO1xuICBjb2xsaXNpb24gPSB0cnVlO1xuICByZW5kZXIgPSB0cnVlO1xuICBzdGF0ZTppdGVtX3N0YXRlO1xuICBpdGVtOml0ZW1fZW50cnk7XG4gIHRpY2tfc3RhdGUgPSBmYWxzZTtcbiAgcGFyYW1zOml0ZW1fcGFyYW1ldGVycztcbiAgc3RhdGljIGRlZmF1bHRfcGFyYW1zOml0ZW1fcGFyYW1ldGVycyA9IHt9XG4gIGNvbnN0cnVjdG9yKHN0YXRlOm9ial9zdGF0ZSxwYXJhbXM6aXRlbV9wYXJhbWV0ZXJzID0gY29weShpdGVtLmRlZmF1bHRfcGFyYW1zKSl7XG4gICAgc3VwZXIoc3RhdGUscGFyYW1zKTtcbiAgfVxuICBzdGF0ZWYodGltZV9kZWx0YTpudW1iZXIpe1xuICAgIHN1cGVyLnN0YXRlZih0aW1lX2RlbHRhKTtcbiAgICBsZXQgbW91c2UgPSBQb2xsX01vdXNlKGcuZ2V0Um9vbSgpLmNhbWVyYXNbMF0sdHJ1ZSk7XG4gICAgaWYobW91c2Upe1xuICAgICAgaWYobW91c2UgJiYgdGhpcy5jb2xsaWRlc1dpdGhQb2ludChtb3VzZSkpe1xuICAgICAgICBjb25zb2xlLmxvZyhcInRlc3RcIilcbiAgICAgICAgbGV0IHJvb20gPSA8dG9wX2Rvd24+Zy5nZXRSb29tKCk7XG4gICAgICAgIHJvb20uaW52ZW50b3J5X2h1ZC5zZXRIb3ZlcmVkSXRlbSh0aGlzLml0ZW0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZW5kZXJmKHRpbWVfZGVsdGE6bnVtYmVyKXtcbiAgIHJldHVybiBzdXBlci5yZW5kZXJmKHRpbWVfZGVsdGEpOyBcbiAgfVxuICByZWdpc3RlckFuaW1hdGlvbnMoKXtcbiAgICBcbiAgfVxuICByZWdpc3RlckF1ZGlvKCl7XG4gICAgXG4gIH1cbiAgcmVnaXN0ZXJDb250cm9scygpe1xuICAgICAgICBcbiAgfVxufSIsImltcG9ydCB7IGcgfSBmcm9tIFwiZ2FtZS9tYWluXCI7XG5pbXBvcnQgeyBib2FyZFZpZXcgfSBmcm9tIFwiZ2FtZS9yb29tcy9ib2FyZFZpZXdcIjtcbmltcG9ydCB7IGV4ZWNfdHlwZSwgUG9sbF9Nb3VzZSB9IGZyb20gXCJsaWIvY29udHJvbHNcIjtcbmltcG9ydCB7b2JqfSBmcm9tIFwibGliL29iamVjdFwiO1xuaW1wb3J0IHsgb2JqX3N0YXRlLCBWZWN0b3IgfSBmcm9tIFwibGliL3N0YXRlXCI7XG5pbXBvcnQge2NvcHl9IGZyb20gXCJzcmMvdmFuXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgcGllY2Vfc3RhdGUgZXh0ZW5kcyBvYmpfc3RhdGV7XG4gICAgXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgcGllY2VfcGFyYW1ldGVyc3tcbiAgdHlwZTogc3RyaW5nLFxuICBzcXVhcmU6IHN0cmluZ1xufVxuICAgIFxuZXhwb3J0IGNsYXNzIHBpZWNlIGV4dGVuZHMgb2Jqe1xuICBzcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvRXJyb3IucG5nXCI7XG4gIGNvbGxpc2lvbiA9IGZhbHNlO1xuICByZW5kZXIgPSB0cnVlO1xuICBzdGF0ZTpwaWVjZV9zdGF0ZTtcbiAgc3RhdGljID0gdHJ1ZTtcbiAgcGFyYW1zOnBpZWNlX3BhcmFtZXRlcnM7XG4gIHN0YXRpYyBkZWZhdWx0X3BhcmFtczpwaWVjZV9wYXJhbWV0ZXJzID0ge1xuICAgIHR5cGU6IFwiUFwiLFxuICAgIHNxdWFyZTogXCJhMVwiXG4gIH1cbiAgY29uc3RydWN0b3Ioc3RhdGU6b2JqX3N0YXRlLHBhcmFtczpwaWVjZV9wYXJhbWV0ZXJzID0gY29weShwaWVjZS5kZWZhdWx0X3BhcmFtcykpe1xuICAgIHN1cGVyKHN0YXRlLHBhcmFtcyk7XG4gICAgdGhpcy50YWdzLmFkZChcInBpZWNlXCIpO1xuICAgIHN3aXRjaChwYXJhbXMudHlwZSl7XG4gICAgICBjYXNlIFwiUFwiOlxuICAgICAgICB0aGlzLnNwcml0ZV91cmwgPSBcIi4vc3ByaXRlcy9jaGVzcy93aGl0ZV9wYXduLnBuZ1wiO1xuICAgICAgICB0aGlzLndpZHRoID0gMTI7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMTY7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInBcIjpcbiAgICAgICAgdGhpcy5zcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvY2hlc3MvYmxhY2tfcGF3bi5wbmdcIjtcbiAgICAgICAgdGhpcy53aWR0aCA9IDEyO1xuICAgICAgICB0aGlzLmhlaWdodCA9IDE2O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJLXCI6XG4gICAgICAgIHRoaXMuc3ByaXRlX3VybCA9IFwiLi9zcHJpdGVzL2NoZXNzL3doaXRlX2tpbmcucG5nXCI7XG4gICAgICAgIHRoaXMud2lkdGggPSAyMDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAyMDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwia1wiOlxuICAgICAgICB0aGlzLnNwcml0ZV91cmwgPSBcIi4vc3ByaXRlcy9jaGVzcy9ibGFja19raW5nLnBuZ1wiO1xuICAgICAgICB0aGlzLndpZHRoID0gMjA7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMjA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIkJcIjpcbiAgICAgICAgdGhpcy5zcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvY2hlc3Mvd2hpdGVfYmlzaG9wLnBuZ1wiO1xuICAgICAgICB0aGlzLndpZHRoID0gMTY7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMjA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImJcIjpcbiAgICAgICAgdGhpcy5zcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvY2hlc3MvYmxhY2tfYmlzaG9wLnBuZ1wiO1xuICAgICAgICB0aGlzLndpZHRoID0gMTY7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMjA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIk5cIjpcbiAgICAgICAgdGhpcy5zcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvY2hlc3Mvd2hpdGVfa25pZ2h0LnBuZ1wiO1xuICAgICAgICB0aGlzLndpZHRoID0gMjA7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMjA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIm5cIjpcbiAgICAgICAgdGhpcy5zcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvY2hlc3MvYmxhY2tfa25pZ2h0LnBuZ1wiO1xuICAgICAgICB0aGlzLndpZHRoID0gMjA7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMjA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIlJcIjpcbiAgICAgICAgdGhpcy5zcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvY2hlc3Mvd2hpdGVfcm9vay5wbmdcIjtcbiAgICAgICAgdGhpcy53aWR0aCA9IDE2O1xuICAgICAgICB0aGlzLmhlaWdodCA9IDIwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJyXCI6XG4gICAgICAgIHRoaXMuc3ByaXRlX3VybCA9IFwiLi9zcHJpdGVzL2NoZXNzL2JsYWNrX3Jvb2sucG5nXCI7XG4gICAgICAgIHRoaXMud2lkdGggPSAxNDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAxODtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiUVwiOlxuICAgICAgICB0aGlzLnNwcml0ZV91cmwgPSBcIi4vc3ByaXRlcy9jaGVzcy93aGl0ZV9xdWVlbi5wbmdcIjtcbiAgICAgICAgdGhpcy53aWR0aCA9IDE4O1xuICAgICAgICB0aGlzLmhlaWdodCA9IDIwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJxXCI6XG4gICAgICAgIHRoaXMuc3ByaXRlX3VybCA9IFwiLi9zcHJpdGVzL2NoZXNzL2JsYWNrX3F1ZWVuLnBuZ1wiO1xuICAgICAgICB0aGlzLndpZHRoID0gMTg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMjA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBzdGF0ZWYodGltZV9kZWx0YTpudW1iZXIpe1xuICAgIHN1cGVyLnN0YXRlZih0aW1lX2RlbHRhKTtcbiAgfVxuICByZW5kZXJmKHRpbWVfZGVsdGE6bnVtYmVyKXtcbiAgIHJldHVybiBzdXBlci5yZW5kZXJmKHRpbWVfZGVsdGEpOyBcbiAgfVxuICByZWdpc3RlckFuaW1hdGlvbnMoKXtcbiAgICBcbiAgfVxuICByZWdpc3RlckF1ZGlvKCl7XG4gICAgXG4gIH1cbiAgcmVnaXN0ZXJDb250cm9scygpe1xuICAgIHRoaXMuYmluZENvbnRyb2woXCJtb3VzZTBkb3duXCIsZXhlY190eXBlLm9uY2UsICgpPT57XG4gICAgICBsZXQgbW91c2UgPSBQb2xsX01vdXNlKHRoaXMuZ2V0Um9vbTxib2FyZFZpZXc+KCkuY2FtZXJhc1swXSk7XG4gICAgICBpZih0aGlzLmNvbGxpZGVzV2l0aEJveCh7eDptb3VzZS54LHk6bW91c2UueSx3aWR0aDoyMCxoZWlnaHQ6MjB9KSl7XG4gICAgICAgIHRoaXMuZ2V0Um9vbTxib2FyZFZpZXc+KCkuc3RhdGUuZHJhZ2dpbmcgPSB0aGlzO1xuICAgICAgICB0aGlzLmdldFJvb208Ym9hcmRWaWV3PigpLnN0YXRlLnN0YXJ0X2RyYWcgPSB0aGlzLnN0YXRlLnBvc2l0aW9uO1xuICAgICAgICB0aGlzLmxheWVyID0gMjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSIsImltcG9ydCB7b2JqfSBmcm9tIFwibGliL29iamVjdFwiO1xuaW1wb3J0IHsgcmVuZGVyX3R5cGUsIHNjYWxlX3R5cGUgfSBmcm9tIFwibGliL3JlbmRlclwiO1xuaW1wb3J0IHsgb2JqX3N0YXRlLCBWZWN0b3IgfSBmcm9tIFwibGliL3N0YXRlXCI7XG5pbXBvcnQge2NvcHl9IGZyb20gXCJzcmMvdmFuXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2Ugd29vZF9mbG9vcl9zdGF0ZSBleHRlbmRzIG9ial9zdGF0ZXtcbiAgICBcbn1cbiAgICBcbmV4cG9ydCBpbnRlcmZhY2Ugd29vZF9mbG9vcl9wYXJhbWV0ZXJze1xuICAgIFxufVxuICAgIFxuZXhwb3J0IGNsYXNzIGZsb29yIGV4dGVuZHMgb2Jqe1xuICBzcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvRXJyb3IucG5nXCI7XG4gIGhlaWdodCA9IDEwMDtcbiAgd2lkdGggPSAxMDA7XG4gIGNvbGxpc2lvbiA9IGZhbHNlO1xuICByZW5kZXIgPSB0cnVlO1xuICBzdGF0aWMgPSB0cnVlO1xuICBzY2FsZV90eXBlID0gc2NhbGVfdHlwZS5yZXBlYXQ7XG4gIHN0YXRlOndvb2RfZmxvb3Jfc3RhdGU7XG4gIHBhcmFtczp3b29kX2Zsb29yX3BhcmFtZXRlcnM7XG4gIHN0YXRpYyBkZWZhdWx0X3BhcmFtczp3b29kX2Zsb29yX3BhcmFtZXRlcnMgPSB7fVxuICBjb25zdHJ1Y3RvcihzdGF0ZTpvYmpfc3RhdGUscGFyYW1zOndvb2RfZmxvb3JfcGFyYW1ldGVycyA9IGNvcHkoZmxvb3IuZGVmYXVsdF9wYXJhbXMpKXtcbiAgICBzdXBlcihzdGF0ZSxwYXJhbXMpO1xuICAgIHRoaXMudGFncy5hZGQoXCJmbG9vclwiKTtcbiAgfVxuICBzdGF0ZWYodGltZV9kZWx0YTpudW1iZXIpe1xuICAgIHN1cGVyLnN0YXRlZih0aW1lX2RlbHRhKTtcbiAgfVxuICByZW5kZXJmKHRpbWVfZGVsdGE6bnVtYmVyKXtcbiAgIHJldHVybiBzdXBlci5yZW5kZXJmKHRpbWVfZGVsdGEpOyBcbiAgfVxuICByZWdpc3RlckFuaW1hdGlvbnMoKXtcbiAgICBcbiAgfVxuICByZWdpc3RlckF1ZGlvKCl7XG4gICAgXG4gIH1cbiAgcmVnaXN0ZXJDb250cm9scygpe1xuICB9XG59IiwiaW1wb3J0IHtvYmp9IGZyb20gXCJsaWIvb2JqZWN0XCI7XG5pbXBvcnQgeyBzY2FsZV90eXBlIH0gZnJvbSBcImxpYi9yZW5kZXJcIjtcbmltcG9ydCB7IG9ial9zdGF0ZSwgVmVjdG9yIH0gZnJvbSBcImxpYi9zdGF0ZVwiO1xuaW1wb3J0IHtjb3B5fSBmcm9tIFwic3JjL3ZhblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIGJsYWNrX2JhY2tncm91bmRfc3RhdGUgZXh0ZW5kcyBvYmpfc3RhdGV7XG4gICAgXG59XG4gICAgXG5leHBvcnQgaW50ZXJmYWNlIGJsYWNrX2JhY2tncm91bmRfcGFyYW1ldGVyc3tcbiAgICBcbn1cbiAgICBcbmV4cG9ydCBjbGFzcyBibGFja19iYWNrZ3JvdW5kIGV4dGVuZHMgb2Jqe1xuICBzcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvYmxhY2sucG5nXCI7XG4gIGhlaWdodCA9IDE7XG4gIHdpZHRoID0gMTtcbiAgY29sbGlzaW9uID0gZmFsc2U7XG4gIHJlbmRlciA9IHRydWU7XG4gIHNjYWxlX3R5cGU6IHNjYWxlX3R5cGUuZ3JvdztcbiAgdGlja19zdGF0ZTogZmFsc2U7XG4gIGxheWVyID0gLTE7ICBcbn0iLCJpbXBvcnQge29ian0gZnJvbSBcImxpYi9vYmplY3RcIjtcbmltcG9ydCB7IG9ial9zdGF0ZSwgVmVjdG9yIH0gZnJvbSBcImxpYi9zdGF0ZVwiO1xuaW1wb3J0IHtjb3B5fSBmcm9tIFwic3JjL3ZhblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIGJvYXJkX3N0YXRlIGV4dGVuZHMgb2JqX3N0YXRle1xuICAgIFxufVxuICAgIFxuZXhwb3J0IGludGVyZmFjZSBib2FyZF9wYXJhbWV0ZXJze1xuICAgIFxufVxuICAgIFxuZXhwb3J0IGNsYXNzIGJvYXJkIGV4dGVuZHMgb2Jqe1xuICBzcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvY2hlc3MvYm9hcmQucG5nXCI7XG4gIGhlaWdodCA9IDE4MDtcbiAgd2lkdGggPSAxODA7XG4gIGNvbGxpc2lvbiA9IHRydWU7XG4gIHJlbmRlciA9IHRydWU7XG4gIGxheWVyOiBudW1iZXIgPSAwO1xuICBzdGF0aWMgPSB0cnVlO1xuICBzdGF0ZTpib2FyZF9zdGF0ZTtcbiAgcGFyYW1zOmJvYXJkX3BhcmFtZXRlcnM7XG4gIHN0YXRpYyBkZWZhdWx0X3BhcmFtczpib2FyZF9wYXJhbWV0ZXJzID0ge31cbiAgY29uc3RydWN0b3Ioc3RhdGU6b2JqX3N0YXRlLHBhcmFtczpib2FyZF9wYXJhbWV0ZXJzID0gY29weShib2FyZC5kZWZhdWx0X3BhcmFtcykpe1xuICAgIHN1cGVyKHN0YXRlLHBhcmFtcyk7XG4gICAgdGhpcy50YWdzLmFkZChcImJvYXJkXCIpO1xuICB9XG4gIHN0YXRlZih0aW1lX2RlbHRhOm51bWJlcil7XG4gICAgc3VwZXIuc3RhdGVmKHRpbWVfZGVsdGEpO1xuICB9XG4gIHJlbmRlcmYodGltZV9kZWx0YTpudW1iZXIpe1xuICAgcmV0dXJuIHN1cGVyLnJlbmRlcmYodGltZV9kZWx0YSk7IFxuICB9XG4gIHJlZ2lzdGVyQW5pbWF0aW9ucygpe1xuICAgIFxuICB9XG4gIHJlZ2lzdGVyQXVkaW8oKXtcbiAgICBcbiAgfVxuICByZWdpc3RlckNvbnRyb2xzKCl7XG4gICAgICAgIFxuICB9XG59IiwiXG5pbXBvcnQge29ian0gZnJvbSBcImxpYi9vYmplY3RcIjtcbmltcG9ydCB7IG9ial9zdGF0ZSwgVmVjdG9yIH0gZnJvbSBcImxpYi9zdGF0ZVwiO1xuXG5pbnRlcmZhY2UgZXhhbXBsZV9zdGF0ZSBleHRlbmRzIG9ial9zdGF0ZXtcbiAgICBcbn1cbiAgICBcbmludGVyZmFjZSBleGFtcGxlX3BhcmFtZXRlcnN7XG4gICAgXG59XG4gICAgXG5leHBvcnQgY2xhc3MgZXhhbXBsZSBleHRlbmRzIG9iantcbiAgc3ByaXRlX3VybCA9IFwiLi9zcHJpdGVzL0Vycm9yLnBuZ1wiO1xuICBoZWlnaHQgPSAxMDA7XG4gIHdpZHRoID0gMTAwO1xuICB0YWdzOkFycmF5PHN0cmluZz47XG4gIGNvbGxpc2lvbiA9IHRydWU7XG4gIHJlbmRlciA9IHRydWU7XG4gIHN0YXRlOmV4YW1wbGVfc3RhdGU7XG4gIHBhcmFtczpleGFtcGxlX3BhcmFtZXRlcnM7XG4gIHN0YXRpYyBkZWZhdWx0X3BhcmFtczpleGFtcGxlX3BhcmFtZXRlcnMgPSB7fVxuICBjb25zdHJ1Y3RvcihzdGF0ZTpvYmpfc3RhdGUscGFyYW1zOmV4YW1wbGVfcGFyYW1ldGVycyA9IGV4YW1wbGUuZGVmYXVsdF9wYXJhbXMpe1xuICAgIHN1cGVyKHN0YXRlLHBhcmFtcyk7XG4gIH1cbiAgc3RhdGVmKHRpbWVfZGVsdGE6bnVtYmVyKXtcbiAgICBzdXBlci5zdGF0ZWYodGltZV9kZWx0YSk7XG4gIH1cbiAgcmVuZGVyZih0aW1lX2RlbHRhOm51bWJlcil7XG4gICByZXR1cm4gc3VwZXIucmVuZGVyZih0aW1lX2RlbHRhKTsgXG4gIH1cbiAgcmVnaXN0ZXJfYW5pbWF0aW9ucygpe1xuICAgIFxuICB9XG4gIHJlZ2lzdGVyX2F1ZGlvKCl7XG4gICAgXG4gIH1cbiAgcmVnaXN0ZXJfY29udHJvbHMoKXtcbiAgICAgICAgXG4gIH1cbn1cbiAgICAiLCJpbXBvcnQgeyBnIH0gZnJvbSBcImdhbWUvbWFpblwiO1xuaW1wb3J0IHsgdG9wX2Rvd24gfSBmcm9tIFwiZ2FtZS9yb29tcy9hYnN0cmFjdC90b3BfZG93blwiO1xuaW1wb3J0IHsgZXhlY190eXBlIH0gZnJvbSBcImxpYi9jb250cm9sc1wiO1xuaW1wb3J0IHtvYmp9IGZyb20gXCJsaWIvb2JqZWN0XCI7XG5pbXBvcnQgeyBvYmpfc3RhdGUsIFZlY3RvciB9IGZyb20gXCJsaWIvc3RhdGVcIjtcbmltcG9ydCB7Y29weX0gZnJvbSBcInNyYy92YW5cIjtcblxuZXhwb3J0IGludGVyZmFjZSBpbnZfaWNvbl9zdGF0ZSBleHRlbmRzIG9ial9zdGF0ZXtcbiAgICBcbn1cbiAgICBcbmV4cG9ydCBpbnRlcmZhY2UgaW52X2ljb25fcGFyYW1ldGVyc3tcbiAgICBcbn1cbiAgICBcbmV4cG9ydCBjbGFzcyBpbnZfaWNvbiBleHRlbmRzIG9iantcbiAgc3ByaXRlX3VybCA9IFwiLi9zcHJpdGVzL2ludmljb24ucG5nXCI7XG4gIGhlaWdodCA9IDMwMDtcbiAgd2lkdGggPSAzMDA7XG4gIGNvbGxpc2lvbiA9IHRydWU7XG4gIHJlbmRlciA9IHRydWU7XG4gIHN0YXRlOmludl9pY29uX3N0YXRlO1xuICB0aWNrX3N0YXRlID0gZmFsc2U7XG4gIGh1ZF9jbGlja2FibGUgPSB0cnVlO1xuICBwYXJhbXM6aW52X2ljb25fcGFyYW1ldGVycztcbiAgc3RhdGljIGRlZmF1bHRfcGFyYW1zOmludl9pY29uX3BhcmFtZXRlcnMgPSB7fVxuICBjb25zdHJ1Y3RvcihzdGF0ZTpvYmpfc3RhdGUscGFyYW1zOmludl9pY29uX3BhcmFtZXRlcnMgPSBjb3B5KGludl9pY29uLmRlZmF1bHRfcGFyYW1zKSl7XG4gICAgc3VwZXIoc3RhdGUscGFyYW1zKTtcbiAgfVxuICBzdGF0ZWYodGltZV9kZWx0YTpudW1iZXIpe1xuICAgIHN1cGVyLnN0YXRlZih0aW1lX2RlbHRhKTtcbiAgfVxuICByZW5kZXJmKHRpbWVfZGVsdGE6bnVtYmVyKXtcbiAgIHJldHVybiBzdXBlci5yZW5kZXJmKHRpbWVfZGVsdGEpOyBcbiAgfVxuICByZWdpc3RlckFuaW1hdGlvbnMoKXtcbiAgICBcbiAgfVxuICByZWdpc3RlckF1ZGlvKCl7XG4gICAgXG4gIH1cbiAgcmVnaXN0ZXJDb250cm9scygpe1xuICAgIHRoaXMuYmluZENvbnRyb2woXCJtb3VzZTBkb3duXCIsZXhlY190eXBlLm9uY2UsKCk9PntcbiAgICAgIGxldCByb29tID0gKDx0b3BfZG93bj5nLmdldFJvb20oKSk7XG4gICAgICByb29tLmNhbWVyYXNbMF0uc2V0SHVkKHJvb20uaW52ZW50b3J5X2h1ZCk7XG4gICAgICByb29tLnN0YXRlLm1vdmFibGUgPSBmYWxzZTtcbiAgICB9KVxuICB9XG59IiwiaW1wb3J0IHsgZyB9IGZyb20gXCJnYW1lL21haW5cIjtcbmltcG9ydCB7IG1haW5faHVkLCB0b3BfZG93biB9IGZyb20gXCJnYW1lL3Jvb21zL2Fic3RyYWN0L3RvcF9kb3duXCI7XG5pbXBvcnQgeyBleGVjX3R5cGUsIFBvbGxfTW91c2UgfSBmcm9tIFwibGliL2NvbnRyb2xzXCI7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSBcImxpYi9odWRcIjtcbmltcG9ydCB7IFZlYyB9IGZyb20gXCJsaWIvbWF0aFwiO1xuaW1wb3J0IHtvYmp9IGZyb20gXCJsaWIvb2JqZWN0XCI7XG5pbXBvcnQgeyBvYmpfc3RhdGUsIFZlY3RvciB9IGZyb20gXCJsaWIvc3RhdGVcIjtcbmltcG9ydCB7Y29weSwgdmlld3BvcnR9IGZyb20gXCJzcmMvdmFuXCI7XG5pbXBvcnQge3ZpZXdzLGludmVudG9yeV9odWR9IGZyb20gXCJnYW1lL3Jvb21zL2Fic3RyYWN0L3RvcF9kb3duXCI7XG5pbXBvcnQgeyBjb2xsaXNpb25fYm94LCBwb2ludENvbGxpZGVzV2l0aEJveCB9IGZyb20gXCJsaWIvY29sbGlzaW9uXCI7XG5leHBvcnQgaW50ZXJmYWNlIGludmVudG9yeV9iYWNrX2J1dHRvbl9zdGF0ZSBleHRlbmRzIG9ial9zdGF0ZXtcbiAgc2hvd19sZWZ0OmJvb2xlYW4sXG4gIHNob3dfcmlnaHQ6Ym9vbGVhblxufVxuICAgIFxuZXhwb3J0IGludGVyZmFjZSBpbnZlbnRvcnlfYmFja19idXR0b25fcGFyYW1ldGVyc3tcbiAgICBcbn1cblxuZXhwb3J0IGNsYXNzIGludmVudG9yeV9jbGlja3MgZXh0ZW5kcyBvYmp7XG4gIHNwcml0ZV91cmwgPSBcIi4vc3ByaXRlcy9FcnJvci5wbmdcIjtcbiAgaGVpZ2h0ID0gMDtcbiAgd2lkdGggPSAwO1xuICBjb2xsaXNpb24gPSB0cnVlO1xuICBoaXRib3ggPSB7XG4gICAgd2lkdGg6MTAwLFxuICAgIGhlaWdodDoxMDAsXG4gICAgeF9vZmZzZXQ6MCxcbiAgICB5X29mZnNldDowXG4gIH1cbiAgcmVuZGVyID0gdHJ1ZTtcbiAgbGF5ZXIgPSAzO1xuICBzdGF0ZTppbnZlbnRvcnlfYmFja19idXR0b25fc3RhdGU7XG4gIGNvbnN0cnVjdG9yKHN0YXRlOm9ial9zdGF0ZSxwYXJhbXM6aW52ZW50b3J5X2JhY2tfYnV0dG9uX3BhcmFtZXRlcnMgPSBjb3B5KGludmVudG9yeV9jbGlja3MuZGVmYXVsdF9wYXJhbXMpKXtcbiAgICBzdXBlcihzdGF0ZSxwYXJhbXMpO1xuICAgIE9iamVjdC5hc3NpZ24odGhpcy5zdGF0ZSwge1xuICAgICAgc2hvd19sZWZ0OmZhbHNlLFxuICAgICAgc2hvd19yaWdodDpmYWxzZVxuICAgIH0pO1xuICAgIHRoaXMudGV4dF9ub2Rlcy5wdXNoKG5ldyBUZXh0KHtcbiAgICAgIHBvc2l0aW9uOnRoaXMuc3RhdGUucG9zaXRpb24sXG4gICAgICBzaXplOjQwLFxuICAgICAgc2NhbGluZzoxLFxuICAgICAgZm9udDpcIlZUMzIzXCIsXG4gICAgICBjb2xvcjpcIndoaXRlXCJcbiAgICB9LCgpPT5cIkJhY2tcIikpO1xuICAgIHRoaXMudGV4dF9ub2Rlcy5wdXNoKG5ldyBUZXh0KHtcbiAgICAgIHBvc2l0aW9uOlZlYy5jcmVhdGUoNTAsdmlld3BvcnQuaGVpZ2h0LzIpLFxuICAgICAgc2l6ZTo0MCxcbiAgICAgIHNjYWxpbmc6MSxcbiAgICAgIGZvbnQ6XCJWVDMyM1wiLFxuICAgICAgY29sb3I6XCJ3aGl0ZVwiXG4gICAgfSwoKT0+dGhpcy5zdGF0ZS5zaG93X2xlZnQgPyBcIjxcIiA6IFwiXCIpKTtcbiAgICB0aGlzLnRleHRfbm9kZXMucHVzaChuZXcgVGV4dCh7XG4gICAgICBwb3NpdGlvbjpWZWMuY3JlYXRlKHZpZXdwb3J0LndpZHRoIC0gNTAsdmlld3BvcnQuaGVpZ2h0LzIpLFxuICAgICAgc2l6ZTo0MCxcbiAgICAgIHNjYWxpbmc6MSxcbiAgICAgIGZvbnQ6XCJWVDMyM1wiLFxuICAgICAgY29sb3I6XCJ3aGl0ZVwiXG4gICAgfSwoKT0+dGhpcy5zdGF0ZS5zaG93X3JpZ2h0ID8gXCI+XCIgOiBcIlwiKSk7XG4gICAgdGhpcy5zdGF0ZS5zaG93X3JpZ2h0ID0gZy5zdGF0ZS5nbG9iYWxzLmludmVudG9yeS5sZW5ndGggPiA4O1xuICAgIHRoaXMudGFncy5hZGQoXCJtYW5hZ2VyXCIpO1xuICB9XG4gIHN0YXRlZih0aW1lOm51bWJlcil7XG4gICAgc3VwZXIuc3RhdGVmKHRpbWUpO1xuICAgIGxldCBodWQgPSBnLmdldFJvb20oKS5jYW1lcmFzWzBdLmh1ZCBhcyBpbnZlbnRvcnlfaHVkO1xuICAgIGNvbnNvbGUubG9nKGh1ZC5zdGF0ZS5jdXJyZW50X3BhZ2UpO1xuICB9XG4gIHJlZ2lzdGVyQ29udHJvbHMoKXtcbiAgICB0aGlzLmJpbmRDb250cm9sKFwibW91c2UwXCIsZXhlY190eXBlLm9uY2UsKCk9PntcbiAgICAgIGNvbnN0IGNsaWNrX3JlZ2lvbnM6e1xuICAgICAgICBbaW5kZXg6c3RyaW5nXTpjb2xsaXNpb25fYm94XG4gICAgICB9ID0ge1xuICAgICAgICBcImJhY2tcIjp7XG4gICAgICAgICAgeDo1MCxcbiAgICAgICAgICB5OjUwLFxuICAgICAgICAgIGhlaWdodDoxMDAsXG4gICAgICAgICAgd2lkdGg6MTAwXG4gICAgICAgIH0sXG4gICAgICAgIFwibGVmdFwiOntcbiAgICAgICAgICB4OjUwLFxuICAgICAgICAgIHk6dmlld3BvcnQuaGVpZ2h0LzIsXG4gICAgICAgICAgaGVpZ2h0OjEwMCxcbiAgICAgICAgICB3aWR0aDoxMDBcbiAgICAgICAgfSxcbiAgICAgICAgXCJyaWdodFwiOntcbiAgICAgICAgICB4OnZpZXdwb3J0LndpZHRoIC0gNTAsXG4gICAgICAgICAgeTp2aWV3cG9ydC5oZWlnaHQvMixcbiAgICAgICAgICBoZWlnaHQ6MTAwLFxuICAgICAgICAgIHdpZHRoOjEwMFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgcm9vbSA9IDx0b3BfZG93bj5nLmdldFJvb20oKTtcbiAgICAgIGxldCBtb3VzZSA9IFBvbGxfTW91c2Uocm9vbS5jYW1lcmFzWzBdLHRydWUpO1xuXG4gICAgICBpZihwb2ludENvbGxpZGVzV2l0aEJveChtb3VzZSxjbGlja19yZWdpb25zW1wiYmFja1wiXSkpe1xuICAgICAgICByb29tLmNhbWVyYXNbMF0uc2V0SHVkKG5ldyBtYWluX2h1ZCgpKTtcbiAgICAgICAgcm9vbS5zdGF0ZS5jdXJyZW50X3ZpZXcgPSB2aWV3cy5tYWluO1xuICAgICAgICByb29tLnN0YXRlLm1vdmFibGUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYocG9pbnRDb2xsaWRlc1dpdGhCb3gobW91c2UsY2xpY2tfcmVnaW9uc1tcImxlZnRcIl0pKXtcbiAgICAgICAgbGV0IGh1ZCA9IHJvb20uY2FtZXJhc1swXS5odWQgYXMgaW52ZW50b3J5X2h1ZDtcbiAgICAgICAgY29uc29sZS5sb2coaHVkLnN0YXRlLmN1cnJlbnRfcGFnZSlcbiAgICAgICAgaWYoaHVkLnN0YXRlLmN1cnJlbnRfcGFnZSA+IDApe1xuICAgICAgICAgIFxuICAgICAgICAgIGh1ZC5yZW5kZXJQYWdlKGh1ZC5zdGF0ZS5jdXJyZW50X3BhZ2UgLSAxKTtcbiAgICAgICAgICBpZihodWQuc3RhdGUuY3VycmVudF9wYWdlIC0gMSA+IDApe1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zaG93X2xlZnQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zaG93X2xlZnQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5zdGF0ZS5zaG93X3JpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYocG9pbnRDb2xsaWRlc1dpdGhCb3gobW91c2UsY2xpY2tfcmVnaW9uc1tcInJpZ2h0XCJdKSl7XG4gICAgICAgIGxldCBodWQgPSByb29tLmNhbWVyYXNbMF0uaHVkIGFzIGludmVudG9yeV9odWQ7XG4gICAgICAgIGlmKChodWQuc3RhdGUuY3VycmVudF9wYWdlICsgMSkgKiA4IDwgZy5zdGF0ZS5nbG9iYWxzLmludmVudG9yeS5sZW5ndGgpe1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVuZGVyaW5nXCIgKyBodWQuc3RhdGUuY3VycmVudF9wYWdlKVxuICAgICAgICAgIGh1ZC5yZW5kZXJQYWdlKGh1ZC5zdGF0ZS5jdXJyZW50X3BhZ2UgKyAxKTtcbiAgICAgICAgICBpZigoaHVkLnN0YXRlLmN1cnJlbnRfcGFnZSArIDEpICogOCA8IGcuc3RhdGUuZ2xvYmFscy5pbnZlbnRvcnkubGVuZ3RoKXtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuc2hvd19yaWdodCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNob3dfcmlnaHQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5zdGF0ZS5zaG93X2xlZnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxufSIsImltcG9ydCB7IGcgfSBmcm9tIFwiZ2FtZS9tYWluXCI7XG5pbXBvcnQgeyB0b3BfZG93biB9IGZyb20gXCJnYW1lL3Jvb21zL2Fic3RyYWN0L3RvcF9kb3duXCI7XG5pbXBvcnQgeyBleGVjX3R5cGUgfSBmcm9tIFwibGliL2NvbnRyb2xzXCI7XG5pbXBvcnQge29ian0gZnJvbSBcImxpYi9vYmplY3RcIjtcbmltcG9ydCB7IHBvc2l0aW9uZWRfc3ByaXRlLCBzcHJpdGVfZ2VuIH0gZnJvbSBcImxpYi9zcHJpdGVcIjtcbmltcG9ydCB7IG9ial9zdGF0ZSwgVmVjdG9yIH0gZnJvbSBcImxpYi9zdGF0ZVwiO1xuaW1wb3J0IHtjb3B5fSBmcm9tIFwic3JjL3ZhblwiO1xuaW50ZXJmYWNlIG1haW5fY2hhcmFjdGVyX3N0YXRlIGV4dGVuZHMgb2JqX3N0YXRle1xuICAgIFxufVxuICAgIFxuaW50ZXJmYWNlIG1haW5fY2hhcmFjdGVyX3BhcmFtZXRlcnN7XG4gICAgXG59XG4gICAgXG5leHBvcnQgY2xhc3MgbWFpbl9jaGFyYWN0ZXIgZXh0ZW5kcyBvYmp7XG4gIHNwcml0ZV91cmwgPSBcIi4vc3ByaXRlcy9tYWluX2NoYXJfd2Fsay5wbmdcIjtcbiAgaGVpZ2h0ID0gMzgwO1xuICB3aWR0aCA9IDI1NDtcbiAgY29sbGlzaW9uID0gdHJ1ZTtcbiAgc3RhdGljID0gZmFsc2U7XG4gIHJlbmRlciA9IHRydWU7XG4gIHN0YXRlOm1haW5fY2hhcmFjdGVyX3N0YXRlO1xuICBwYXJhbXM6bWFpbl9jaGFyYWN0ZXJfcGFyYW1ldGVycztcbiAgc3RhdGljIGRlZmF1bHRfcGFyYW1zOm1haW5fY2hhcmFjdGVyX3BhcmFtZXRlcnMgPSB7fVxuICBjb25zdHJ1Y3RvcihzdGF0ZTpvYmpfc3RhdGUscGFyYW1zOm1haW5fY2hhcmFjdGVyX3BhcmFtZXRlcnMgPSBjb3B5KG1haW5fY2hhcmFjdGVyLmRlZmF1bHRfcGFyYW1zKSl7XG4gICAgc3VwZXIoc3RhdGUscGFyYW1zKTtcbiAgICB0aGlzLnRhZ3MuYWRkKFwicGxheWVyXCIpO1xuICB9XG4gIHN0YXRlZih0aW1lX2RlbHRhOm51bWJlcil7XG4gICAgc3VwZXIuc3RhdGVmKHRpbWVfZGVsdGEpO1xuICB9XG4gIHJlbmRlcmYodGltZV9kZWx0YTpudW1iZXIpe1xuICAgIC8qXG4gICAgbGV0IHBvc2l0aW9uZWQgPSBzdXBlci5yZW5kZXJmKHRpbWVfZGVsdGEpIGFzIHBvc2l0aW9uZWRfc3ByaXRlO1xuICAgIGlmKHRoaXMudGFncy5oYXMoXCJkYXJrXCIpKXtcbiAgICAgIHBvc2l0aW9uZWQuc3ByaXRlID0gc3ByaXRlc1swXVsxXTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIHBvc2l0aW9uZWQuc3ByaXRlID0gc3ByaXRlc1swXVswXTtcbiAgICB9XG4gICAgcmV0dXJuIHBvc2l0aW9uZWQ7XG4gICAgKi9cbiAgIHJldHVybiBzdXBlci5yZW5kZXJmKHRpbWVfZGVsdGEpO1xuICB9XG4gIHJlZ2lzdGVyQW5pbWF0aW9ucygpe1xuICAgIGxldCBzcHJpdGVzID0gc3ByaXRlX2dlbih0aGlzLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpO1xuICAgIHRoaXMuYW5pbWF0aW9ucy5hZGQoXCJ3YWxrX3JcIiwgW1xuICAgICAgWzAsIHNwcml0ZXNbMF1bMF1dLFxuICAgICAgWzEwMCwgc3ByaXRlc1swXVsxXV0sXG4gICAgICBbMjAwLCBzcHJpdGVzWzBdWzJdXSxcbiAgICAgIFszMDAsIHNwcml0ZXNbMF1bM11dLFxuICAgICAgWzQwMCwgc3ByaXRlc1swXVs0XV0sXG4gICAgICBbNTAwLCBzcHJpdGVzWzBdWzVdXSxcbiAgICAgIFs2MDAsIHNwcml0ZXNbMF1bNl1dLFxuICAgICAgWzcwMCwgc3ByaXRlc1swXVs3XV0sXG4gICAgICBbODAwLCBzcHJpdGVzWzBdWzhdXSxcbiAgICBdLCA5MDApXG4gICAgdGhpcy5hbmltYXRpb25zLmFkZChcIndhbGtfbFwiLCBbXG4gICAgICBbMCwgc3ByaXRlc1sxXVs4XV0sXG4gICAgICBbMTAwLCBzcHJpdGVzWzFdWzddXSxcbiAgICAgIFsyMDAsIHNwcml0ZXNbMV1bNl1dLFxuICAgICAgWzMwMCwgc3ByaXRlc1sxXVs1XV0sXG4gICAgICBbNDAwLCBzcHJpdGVzWzFdWzRdXSxcbiAgICAgIFs1MDAsIHNwcml0ZXNbMV1bM11dLFxuICAgICAgWzYwMCwgc3ByaXRlc1sxXVsyXV0sXG4gICAgICBbNzAwLCBzcHJpdGVzWzFdWzFdXSxcbiAgICAgIFs4MDAsIHNwcml0ZXNbMV1bMF1dLFxuICAgIF0sIDkwMClcbiAgfVxuICByZWdpc3RlckF1ZGlvKCl7XG4gICAgXG4gIH1cbiAgcmVnaXN0ZXJDb250cm9scygpe1xuICAgIGNvbnN0IHNwZWVkID0gODtcbiAgICB0aGlzLmJpbmRDb250cm9sKFwiS2V5V1wiLCBleGVjX3R5cGUub25jZSwgKCk9PiB7XG4gICAgICBsZXQgcm9vbSA9IGcuZ2V0Um9vbSgpIGFzIHRvcF9kb3duXG4gICAgICBpZihyb29tLnN0YXRlLm1vdmFibGUpXG4gICAgICAgIHRoaXMuc3RhdGUudmVsb2NpdHkueSA9IHNwZWVkO1xuICAgIH0pO1xuICAgIHRoaXMuYmluZENvbnRyb2woXCJLZXlXdXBcIixleGVjX3R5cGUub25jZSwgKCkgPT4ge1xuICAgICAgdGhpcy5zdGF0ZS52ZWxvY2l0eS55ID0gMDtcbiAgICB9KVxuICAgIHRoaXMuYmluZENvbnRyb2woXCJLZXlTXCIsIGV4ZWNfdHlwZS5vbmNlLCAoKT0+IHtcbiAgICAgIGxldCByb29tID0gZy5nZXRSb29tKCkgYXMgdG9wX2Rvd25cbiAgICAgIGlmKHJvb20uc3RhdGUubW92YWJsZSlcbiAgICAgICAgdGhpcy5zdGF0ZS52ZWxvY2l0eS55ID0gLXNwZWVkO1xuICAgIH0pO1xuICAgIHRoaXMuYmluZENvbnRyb2woXCJLZXlTdXBcIixleGVjX3R5cGUub25jZSwgKCkgPT4ge1xuICAgICAgdGhpcy5zdGF0ZS52ZWxvY2l0eS55ID0gMDtcbiAgICB9KVxuICAgIHRoaXMuYmluZENvbnRyb2woXCJLZXlBXCIsIGV4ZWNfdHlwZS5vbmNlLCAoKT0+IHtcbiAgICAgIGxldCByb29tID0gZy5nZXRSb29tKCkgYXMgdG9wX2Rvd25cbiAgICAgIGlmKHJvb20uc3RhdGUubW92YWJsZSAmJiB0aGlzLnN0YXRlLnZlbG9jaXR5LnggPiAtc3BlZWQpe1xuICAgICAgICBjb25zb2xlLmxvZyhcImxlZnRcIik7XG4gICAgICAgIHRoaXMuc3RhdGUudmVsb2NpdHkueCA9IC1zcGVlZDtcbiAgICAgICAgdGhpcy5hbmltYXRpb25zLnBsYXkoXCJ3YWxrX2xcIik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5iaW5kQ29udHJvbChcIktleUF1cFwiLGV4ZWNfdHlwZS5vbmNlLCAoKSA9PiB7XG4gICAgICB0aGlzLnN0YXRlLnZlbG9jaXR5LnggPSAwO1xuICAgIH0pXG4gICAgdGhpcy5iaW5kQ29udHJvbChcIktleURcIiwgZXhlY190eXBlLm9uY2UsICgpPT4ge1xuICAgICAgbGV0IHJvb20gPSBnLmdldFJvb20oKSBhcyB0b3BfZG93blxuICAgICAgaWYocm9vbS5zdGF0ZS5tb3ZhYmxlICYmIHRoaXMuc3RhdGUudmVsb2NpdHkueCA8IHNwZWVkKXtcbiAgICAgICAgdGhpcy5zdGF0ZS52ZWxvY2l0eS54ID0gc3BlZWQ7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5wbGF5KFwid2Fsa19yXCIpO1xuICAgICAgfVxuICAgIH0sMSk7XG4gICAgdGhpcy5iaW5kQ29udHJvbChcIktleUR1cFwiLGV4ZWNfdHlwZS5vbmNlLCAoKSA9PiB7XG4gICAgICB0aGlzLnN0YXRlLnZlbG9jaXR5LnggPSAwO1xuICAgIH0pXG4gIH1cbn0iLCJpbXBvcnQge29ian0gZnJvbSBcImxpYi9vYmplY3RcIjtcbmltcG9ydCB7IG9ial9zdGF0ZSwgVmVjdG9yIH0gZnJvbSBcImxpYi9zdGF0ZVwiO1xuaW1wb3J0IHtjb3B5fSBmcm9tIFwic3JjL3ZhblwiO1xuaW1wb3J0IHsgcGllY2UsIHBpZWNlX3BhcmFtZXRlcnMgfSBmcm9tIFwiLi9hYnN0cmFjdC9waWVjZVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIHBhd25fc3RhdGUgZXh0ZW5kcyBvYmpfc3RhdGV7XG4gICAgXG59XG4gICAgXG5leHBvcnQgaW50ZXJmYWNlIHBhd25fcGFyYW1ldGVyc3tcbiAgICBcbn1cbiAgICBcbmV4cG9ydCBjbGFzcyBwYXduIGV4dGVuZHMgcGllY2V7XG4gIGNvbnN0cnVjdG9yKHN0YXRlOm9ial9zdGF0ZSxwYXJhbXM6cGllY2VfcGFyYW1ldGVycyA9IGNvcHkocGllY2UuZGVmYXVsdF9wYXJhbXMpKXtcbiAgICBzdXBlcihzdGF0ZSxwYXJhbXMpO1xuICAgIHRoaXMuc3RhdGUuc2NhbGluZyA9IHtcbiAgICAgIGhlaWdodDogOCxcbiAgICAgIHdpZHRoOiA4XG4gICAgfVxuICB9XG4gIHN0YXRlZih0aW1lX2RlbHRhOm51bWJlcil7XG4gICAgc3VwZXIuc3RhdGVmKHRpbWVfZGVsdGEpO1xuICB9XG4gIHJlbmRlcmYodGltZV9kZWx0YTpudW1iZXIpe1xuICAgcmV0dXJuIHN1cGVyLnJlbmRlcmYodGltZV9kZWx0YSk7IFxuICB9XG4gIHJlZ2lzdGVyQW5pbWF0aW9ucygpe1xuICAgIFxuICB9XG4gIHJlZ2lzdGVyQXVkaW8oKXtcbiAgICBcbiAgfVxufSIsIlxuaW50ZXJmYWNlIHByZWZhYnMge1xuICBbaW5kZXg6c3RyaW5nXTphbnlcbn1cbmltcG9ydCB7YmxhY2tfYmFja2dyb3VuZH0gZnJvbSBcIi4vYmxhY2tfYmFja2dyb3VuZFwiO1xuaW1wb3J0IHtib2FyZH0gZnJvbSBcIi4vYm9hcmRcIjtcbmltcG9ydCB7ZXhhbXBsZX0gZnJvbSBcIi4vZXhhbXBsZVwiO1xuaW1wb3J0IHtpbnZfaWNvbn0gZnJvbSBcIi4vaW52X2ljb25cIjtcbmltcG9ydCB7aW52ZW50b3J5X2NsaWNrc30gZnJvbSBcIi4vaW52ZW50b3J5X2NsaWNrc1wiO1xuaW1wb3J0IHttYWluX2NoYXJhY3Rlcn0gZnJvbSBcIi4vbWFpbl9jaGFyYWN0ZXJcIjtcbmltcG9ydCB7cGF3bn0gZnJvbSBcIi4vcGF3blwiO1xuaW1wb3J0IHt0ZXN0X2NoYXJ9IGZyb20gXCIuL3Rlc3RfY2hhclwiO1xuaW1wb3J0IHt0ZXN0X2l0ZW19IGZyb20gXCIuL3Rlc3RfaXRlbVwiO1xuaW1wb3J0IHt0ZXN0X2l0ZW0yfSBmcm9tIFwiLi90ZXN0X2l0ZW0yXCI7XG5pbXBvcnQge3RleHRfYmFja2dyb3VuZH0gZnJvbSBcIi4vdGV4dF9iYWNrZ3JvdW5kXCI7XG5pbXBvcnQge3dvb2RfZmxvb3J9IGZyb20gXCIuL3dvb2RfZmxvb3JcIjtcbmV4cG9ydCBsZXQgcHJlZmFiczpwcmVmYWJzID0ge1xuXHRibGFja19iYWNrZ3JvdW5kOmJsYWNrX2JhY2tncm91bmQsXG5cdGJvYXJkOmJvYXJkLFxuXHRleGFtcGxlOmV4YW1wbGUsXG5cdGludl9pY29uOmludl9pY29uLFxuXHRpbnZlbnRvcnlfY2xpY2tzOmludmVudG9yeV9jbGlja3MsXG5cdG1haW5fY2hhcmFjdGVyOm1haW5fY2hhcmFjdGVyLFxuXHRwYXduOnBhd24sXG5cdHRlc3RfY2hhcjp0ZXN0X2NoYXIsXG5cdHRlc3RfaXRlbTp0ZXN0X2l0ZW0sXG5cdHRlc3RfaXRlbTI6dGVzdF9pdGVtMixcblx0dGV4dF9iYWNrZ3JvdW5kOnRleHRfYmFja2dyb3VuZCxcblx0d29vZF9mbG9vcjp3b29kX2Zsb29yLFxufSIsImltcG9ydCB7IGcgfSBmcm9tIFwiZ2FtZS9tYWluXCI7XG5pbXBvcnQgeyB0b3BfZG93biB9IGZyb20gXCJnYW1lL3Jvb21zL2Fic3RyYWN0L3RvcF9kb3duXCI7XG5pbXBvcnQge29ian0gZnJvbSBcImxpYi9vYmplY3RcIjtcbmltcG9ydCB7IHBvc2l0aW9uZWRfc3ByaXRlLCBzcHJpdGVfZ2VuIH0gZnJvbSBcImxpYi9zcHJpdGVcIjtcbmltcG9ydCB7IG9ial9zdGF0ZSwgVmVjdG9yIH0gZnJvbSBcImxpYi9zdGF0ZVwiO1xuaW1wb3J0IHsgcm9vbV90ZW1wbGF0ZSB9IGZyb20gXCJsaWIvdGVtcGxhdGVzL3Jvb21fdGVtcGxhdGVcIjtcbmltcG9ydCB7Y29weX0gZnJvbSBcInNyYy92YW5cIjtcblxuZXhwb3J0IGludGVyZmFjZSB0ZXN0X2NoYXJfc3RhdGUgZXh0ZW5kcyBvYmpfc3RhdGV7XG4gICAgXG59XG4gICAgXG5leHBvcnQgaW50ZXJmYWNlIHRlc3RfY2hhcl9wYXJhbWV0ZXJze1xuICAgIFxufVxuICAgIFxuZXhwb3J0IGNsYXNzIHRlc3RfY2hhciBleHRlbmRzIG9iantcbiAgc3ByaXRlX3VybCA9IFwiLi9zcHJpdGVzL3Rlc3RfY2hhci5wbmdcIjtcbiAgaGVpZ2h0ID0gNTAwO1xuICB3aWR0aCA9IDUwMDtcbiAgY29sbGlzaW9uID0gdHJ1ZTtcbiAgcmVuZGVyID0gdHJ1ZTtcbiAgc3RhdGU6dGVzdF9jaGFyX3N0YXRlO1xuICBwYXJhbXM6dGVzdF9jaGFyX3BhcmFtZXRlcnM7XG4gIHN0YXRpYyBkZWZhdWx0X3BhcmFtczp0ZXN0X2NoYXJfcGFyYW1ldGVycyA9IHt9XG4gIGNvbnN0cnVjdG9yKHN0YXRlOm9ial9zdGF0ZSxwYXJhbXM6dGVzdF9jaGFyX3BhcmFtZXRlcnMgPSBjb3B5KHRlc3RfY2hhci5kZWZhdWx0X3BhcmFtcykpe1xuICAgIHN1cGVyKHN0YXRlLHBhcmFtcyk7XG4gIH1cbiAgc3RhdGVmKHRpbWVfZGVsdGE6bnVtYmVyKXtcbiAgICBzdXBlci5zdGF0ZWYodGltZV9kZWx0YSk7XG4gIH1cbiAgcmVuZGVyZih0aW1lX2RlbHRhOm51bWJlcil7XG4gICAgbGV0IHNwcml0ZXMgPSBzcHJpdGVfZ2VuKHRoaXMsNTAwLDUwMCk7XG4gICAgbGV0IHBvc2l0aW9uZWQgPSBzdXBlci5yZW5kZXJmKHRpbWVfZGVsdGEpIGFzIHBvc2l0aW9uZWRfc3ByaXRlO1xuICAgIGlmKHRoaXMudGFncy5oYXMoXCJkYXJrXCIpKXtcbiAgICAgIHBvc2l0aW9uZWQuc3ByaXRlID0gc3ByaXRlc1swXVsxXTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIHBvc2l0aW9uZWQuc3ByaXRlID0gc3ByaXRlc1swXVswXTtcbiAgICB9XG4gICAgcmV0dXJuIHBvc2l0aW9uZWQ7IFxuICB9XG4gIHJlZ2lzdGVyRXZlbnRzKCl7XG4gICAgdGhpcy5hZGRFdmVudEhhbmRsZXIoXCJjbGlja1wiLCgpPT57XG4gICAgICBjb25zb2xlLmxvZyhcImNsaWNrZWRcIik7XG4gICAgICBsZXQgcm9vbSA9IGcuc3RhdGUuY3VycmVudF9yb29tIGFzIHRvcF9kb3duO1xuICAgICAgcm9vbS5zZXRDb252KFt7XG4gICAgICAgIG5hbWU6XCJKb2huXCIsXG4gICAgICAgIGxlZnQ6XCJtYWluX2NoYXJhY3RlclwiLFxuICAgICAgICByaWdodDpcInRlc3RfY2hhclwiLFxuICAgICAgICBkYXJrOlwicmlnaHRcIixcbiAgICAgICAgZnVsbF90ZXh0OlwicGxheSBtZSBpbiBjaGVzcyAqKioqKlwiXG4gICAgICB9LHtcbiAgICAgICAgbmFtZTpcIlNtaXRoXCIsXG4gICAgICAgIGxlZnQ6XCJtYWluX2NoYXJhY3RlclwiLFxuICAgICAgICByaWdodDpcInRlc3RfY2hhclwiLFxuICAgICAgICBkYXJrOlwibGVmdFwiLFxuICAgICAgICBmdWxsX3RleHQ6XCJpIHdpbGwga2lsbCB1XCJcbiAgICAgIH1dLCgpID0+IHtcbiAgICAgICAgdGhpcy5nYW1lLmxvYWRSb29tU3RyaW5nKFwiYm9hcmRWaWV3XCIpOyBcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuICByZWdpc3RlckFuaW1hdGlvbnMoKXtcbiAgICBcbiAgfVxuICByZWdpc3RlckF1ZGlvKCl7XG4gICAgXG4gIH1cbiAgcmVnaXN0ZXJDb250cm9scygpe1xuICAgICAgICBcbiAgfVxufSIsImltcG9ydCB7b2JqfSBmcm9tIFwibGliL29iamVjdFwiO1xuaW1wb3J0IHsgb2JqX3N0YXRlLCBWZWN0b3IgfSBmcm9tIFwibGliL3N0YXRlXCI7XG5pbXBvcnQge2NvcHl9IGZyb20gXCJzcmMvdmFuXCI7XG5pbXBvcnQge2l0ZW19IGZyb20gXCJnYW1lL29iamVjdHMvYWJzdHJhY3QvaXRlbVwiO1xuaW1wb3J0IHsgaXRlbXMgfSBmcm9tIFwiZ2FtZS9tYWluXCI7XG5leHBvcnQgaW50ZXJmYWNlIHRlc3RfaXRlbV9zdGF0ZSBleHRlbmRzIG9ial9zdGF0ZXtcbiAgICBcbn1cbiAgICBcbmV4cG9ydCBpbnRlcmZhY2UgdGVzdF9pdGVtX3BhcmFtZXRlcnN7XG4gICAgXG59XG4gICAgXG5leHBvcnQgY2xhc3MgdGVzdF9pdGVtIGV4dGVuZHMgaXRlbXtcbiAgc3ByaXRlX3VybCA9IFwiLi9zcHJpdGVzL0Vycm9yLnBuZ1wiO1xuICBoZWlnaHQgPSAxMDA7XG4gIHdpZHRoID0gMTAwO1xuICByZW5kZXIgPSB0cnVlO1xuICBpdGVtID0gaXRlbXNbXCJ0ZXN0XCJdO1xufSIsImltcG9ydCB7b2JqfSBmcm9tIFwibGliL29iamVjdFwiO1xuaW1wb3J0IHsgb2JqX3N0YXRlLCBWZWN0b3IgfSBmcm9tIFwibGliL3N0YXRlXCI7XG5pbXBvcnQge2NvcHl9IGZyb20gXCJzcmMvdmFuXCI7XG5pbXBvcnQge2l0ZW19IGZyb20gXCJnYW1lL29iamVjdHMvYWJzdHJhY3QvaXRlbVwiO1xuaW1wb3J0IHsgaXRlbXMgfSBmcm9tIFwiZ2FtZS9tYWluXCI7XG5leHBvcnQgaW50ZXJmYWNlIHRlc3RfaXRlbTJfc3RhdGUgZXh0ZW5kcyBvYmpfc3RhdGV7XG4gICAgXG59XG4gICAgXG5leHBvcnQgaW50ZXJmYWNlIHRlc3RfaXRlbTJfcGFyYW1ldGVyc3tcbiAgICBcbn1cbiAgICBcbmV4cG9ydCBjbGFzcyB0ZXN0X2l0ZW0yIGV4dGVuZHMgaXRlbXtcbiAgc3ByaXRlX3VybCA9IFwiLi9zcHJpdGVzL0Vycm9yLnBuZ1wiO1xuICBoZWlnaHQgPSAxMDA7XG4gIHdpZHRoID0gMTAwO1xuICByZW5kZXIgPSB0cnVlO1xuICBpdGVtID0gaXRlbXNbXCJ0ZXN0MlwiXTtcbn0iLCJpbXBvcnQge29ian0gZnJvbSBcImxpYi9vYmplY3RcIjtcbmltcG9ydCB7IHNjYWxlX3R5cGUgfSBmcm9tIFwibGliL3JlbmRlclwiO1xuaW1wb3J0IHsgb2JqX3N0YXRlLCBWZWN0b3IgfSBmcm9tIFwibGliL3N0YXRlXCI7XG5pbXBvcnQge2NvcHl9IGZyb20gXCJzcmMvdmFuXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgdGV4dF9iYWNrZ3JvdW5kX3N0YXRlIGV4dGVuZHMgb2JqX3N0YXRle1xuICAgIFxufVxuICAgIFxuZXhwb3J0IGludGVyZmFjZSB0ZXh0X2JhY2tncm91bmRfcGFyYW1ldGVyc3tcbiAgICBcbn1cbiAgICBcbmV4cG9ydCBjbGFzcyB0ZXh0X2JhY2tncm91bmQgZXh0ZW5kcyBvYmp7XG4gIHNwcml0ZV91cmwgPSBcIi4vc3ByaXRlcy9kYXJrZ3JheS5wbmdcIjtcbiAgaGVpZ2h0ID0gMTtcbiAgd2lkdGggPSAxO1xuICBjb2xsaXNpb24gPSB0cnVlO1xuICByZW5kZXIgPSB0cnVlO1xuICBzdGF0ZTp0ZXh0X2JhY2tncm91bmRfc3RhdGU7XG4gIHNjYWxlX3R5cGU6IHNjYWxlX3R5cGUuZ3JvdztcbiAgdGlja19zdGF0ZTogZmFsc2U7XG4gIGxheWVyID0gMztcbiAgcGFyYW1zOnRleHRfYmFja2dyb3VuZF9wYXJhbWV0ZXJzO1xuICBzdGF0aWMgZGVmYXVsdF9wYXJhbXM6dGV4dF9iYWNrZ3JvdW5kX3BhcmFtZXRlcnMgPSB7fVxuICBjb25zdHJ1Y3RvcihzdGF0ZTpvYmpfc3RhdGUscGFyYW1zOnRleHRfYmFja2dyb3VuZF9wYXJhbWV0ZXJzID0gY29weSh0ZXh0X2JhY2tncm91bmQuZGVmYXVsdF9wYXJhbXMpKXtcbiAgICBzdXBlcihzdGF0ZSxwYXJhbXMpO1xuICB9XG4gIHN0YXRlZih0aW1lX2RlbHRhOm51bWJlcil7XG4gICAgc3VwZXIuc3RhdGVmKHRpbWVfZGVsdGEpO1xuICB9XG4gIHJlbmRlcmYodGltZV9kZWx0YTpudW1iZXIpe1xuICAgcmV0dXJuIHN1cGVyLnJlbmRlcmYodGltZV9kZWx0YSk7IFxuICB9XG4gIHJlZ2lzdGVyX2FuaW1hdGlvbnMoKXtcbiAgICBcbiAgfVxuICByZWdpc3Rlcl9hdWRpbygpe1xuICAgIFxuICB9XG4gIHJlZ2lzdGVyX2NvbnRyb2xzKCl7XG4gICAgICAgIFxuICB9XG59IiwiaW1wb3J0IHsgZyB9IGZyb20gXCJnYW1lL21haW5cIjtcbmltcG9ydCB7IGNvbnZlcnNhdGlvbl9odWQgfSBmcm9tIFwiZ2FtZS9yb29tcy9hYnN0cmFjdC90b3BfZG93blwiO1xuaW1wb3J0IHsgZXhlY190eXBlLCBQb2xsX01vdXNlIH0gZnJvbSBcImxpYi9jb250cm9sc1wiO1xuaW1wb3J0IHtvYmp9IGZyb20gXCJsaWIvb2JqZWN0XCI7XG5pbXBvcnQgeyBvYmpfc3RhdGUsIFZlY3RvciB9IGZyb20gXCJsaWIvc3RhdGVcIjtcbmltcG9ydCB7Y29weX0gZnJvbSBcInNyYy92YW5cIjtcbmltcG9ydCB7IGZsb29yIH0gZnJvbSBcIi4vYWJzdHJhY3Qvd29vZF9mbG9vclwiO1xuaW1wb3J0IHsgZXhhbXBsZSB9IGZyb20gXCIuL2V4YW1wbGVcIjtcbmltcG9ydCB7IG1haW5fY2hhcmFjdGVyIH0gZnJvbSBcIi4vbWFpbl9jaGFyYWN0ZXJcIjtcblxuZXhwb3J0IGludGVyZmFjZSB3b29kX2Zsb29yX3N0YXRlIGV4dGVuZHMgb2JqX3N0YXRle1xuICAgIFxufVxuICAgIFxuZXhwb3J0IGludGVyZmFjZSB3b29kX2Zsb29yX3BhcmFtZXRlcnN7XG4gICAgXG59XG4gICAgXG5leHBvcnQgY2xhc3Mgd29vZF9mbG9vciBleHRlbmRzIGZsb29ye1xuICBzcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvd29vZF9mbG9vci5qcGdcIjtcbiAgaGVpZ2h0ID0gNDAwO1xuICB3aWR0aCA9IDQwMDtcbiAgcmVnaXN0ZXJFdmVudHMoKXtcbiAgICB0aGlzLmFkZEV2ZW50SGFuZGxlcihcImNsaWNrXCIsKCk9PntcbiAgICAgIGNvbnNvbGUubG9nKFwidGVzdFwiKTtcbiAgICB9KVxuICB9XG4gIHJlZ2lzdGVyQ29udHJvbHMoKXtcblxuICB9XG59IiwiXG5cbmltcG9ydCB7IHJvb20gfSBmcm9tIFwiLi4vLi4vLi4vbGliL3Jvb21cIjtcbmltcG9ydCB7IERFQlVHLCBnYW1lLCByZW5kZXJfZmlsbGVkX2JveCB9IGZyb20gXCIuLi8uLi8uLi92YW5cIjtcbmltcG9ydCB7IHN0YXRlX2NvbmZpZyB9IGZyb20gXCIuLi8uLi8uLi9saWIvcm9vbVwiO1xuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4uLy4uLy4uL2xpYi9zdGF0ZVwiO1xuaW1wb3J0IHsgb2JqIH0gZnJvbSBcIi4uLy4uLy4uL2xpYi9vYmplY3RcIjtcbmltcG9ydCB7IGNvbGxpc2lvbl9ib3gsIGdldEVuY29tcGFzc2luZ0JveCB9IGZyb20gXCIuLi8uLi8uLi9saWIvY29sbGlzaW9uXCI7XG5pbXBvcnQgeyBkZWJ1Z19zdGF0ZSB9IGZyb20gXCJsaWIvZGVidWdcIjtcblxuZnVuY3Rpb24gb25lX2FycihoZWlnaHQ6IG51bWJlciwgd2lkdGg6IG51bWJlcik6IG51bWJlcltdW10ge1xuICBsZXQgbWVzaDogbnVtYmVyW11bXSA9IFtdO1xuICBmb3IgKGxldCBhID0gMDsgYSA8IGhlaWdodDsgYSsrKSB7XG4gICAgbWVzaFthXSA9IFtdO1xuICAgIGZvciAobGV0IGIgPSAwOyBiIDwgd2lkdGg7IGIrKykge1xuICAgICAgbWVzaFthXVtiXSA9IDE7XG4gICAgfVxuICB9XG4gIHJldHVybiBtZXNoO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIG5hdl9tZXNoIHtcbiAgYm94OiBjb2xsaXNpb25fYm94LFxuICBncmlkOiBudW1iZXJbXVtdLFxuICBvYmplY3RzOiBvYmpbXVxufVxuXG5leHBvcnQgY2xhc3MgUGF0aGluZ19Sb29tPFQ+IGV4dGVuZHMgcm9vbTxUPntcbiAgbmF2X25vZGVfZGlhbWV0ZXIgPSAxMDA7XG4gIG5hdl9wYWRkaW5nID0gMDtcbiAgbmF2X21lc2g6IG5hdl9tZXNoO1xuICBuYXZfcmVjYWxjdWxhdGlvbl9pbnRlcnZhbCA9IDUwMDA7XG4gIGZsb29yX3RhZzogc3RyaW5nO1xuICBwcml2YXRlIHBhdGhmaW5kX2NvdW50ZXIgPSAwO1xuICBjYXJ2ZU5hdk1lc2gobmF2X21lc2g6IG5hdl9tZXNoLCBvYmo6IG9iaiwgZmlsbDogbnVtYmVyKSB7XG4gICAgbGV0IGJvdW5kcyA9IG9iai5nZXRCb3VuZGluZ0JveCgpO1xuICAgIGxldCBtZXNoID0gbmF2X21lc2guZ3JpZDtcbiAgICBcbiAgICBsZXQgYl9sID0gdGhpcy5wb3NUb0NvcmQobmF2X21lc2gsIGJvdW5kcy5ib3R0b21fbGVmdCk7XG4gICAgbGV0IHRfciA9IHRoaXMucG9zVG9Db3JkKG5hdl9tZXNoLCBib3VuZHMudG9wX3JpZ2h0KTtcbiAgICBsZXQgeV9taW4gPSBNYXRoLm1heCgwLCBiX2wueSk7XG4gICAgbGV0IHlfbWF4ID0gTWF0aC5taW4obWVzaC5sZW5ndGggLSAxLCB0X3IueSk7XG4gICAgbGV0IHhfbWluID0gTWF0aC5tYXgoMCwgYl9sLngpO1xuICAgIGxldCB4X21heCA9IE1hdGgubWluKG1lc2hbMF0ubGVuZ3RoIC0gMSwgdF9yLngpO1xuICAgIGZvciAobGV0IGEgPSB4X21pbjsgYSA8PSB4X21heDsgYSsrKSB7XG4gICAgICBmb3IgKGxldCBiID0geV9taW47IGIgPD0geV9tYXg7IGIrKykge1xuICAgICAgICBtZXNoW2JdW2FdID0gZmlsbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY29tcHV0ZU5hdk1lc2goZmxvb3JfdGFnOiBzdHJpbmcsIG9iamVjdF9pZDogc3RyaW5nKSB7XG4gICAgbGV0IHJvb20gPSB0aGlzLmdhbWUuZ2V0Um9vbSgpO1xuICAgIGxldCBmbG9vcnMgPSByb29tLmdldE9iakJ5VGFnKGZsb29yX3RhZyk7XG4gICAgbGV0IGNvbGxfYm94ID0gZ2V0RW5jb21wYXNzaW5nQm94KGZsb29ycyk7XG4gICAgbGV0IHdpZHRoID0gY29sbF9ib3gud2lkdGggLyB0aGlzLm5hdl9ub2RlX2RpYW1ldGVyO1xuICAgIGxldCBoZWlnaHQgPSBjb2xsX2JveC5oZWlnaHQgLyB0aGlzLm5hdl9ub2RlX2RpYW1ldGVyO1xuICAgIGxldCBjb2xsaWRlcnMgPSByb29tLmNoZWNrQ29sbGlzaW9ucyhjb2xsX2JveCwgW2Zsb29yX3RhZ10pLmZpbHRlcigobykgPT4gby5pZCAhPSBvYmplY3RfaWQpO1xuICAgIGxldCBib3RfbGVmdDogVmVjdG9yID0ge1xuICAgICAgeDogY29sbF9ib3gueCAtIGNvbGxfYm94LndpZHRoIC8gMixcbiAgICAgIHk6IGNvbGxfYm94LnkgLSBjb2xsX2JveC5oZWlnaHQgLyAyXG4gICAgfVxuICAgIGxldCB0b3BfcmlnaHQ6IFZlY3RvciA9IHtcbiAgICAgIHg6IGNvbGxfYm94LnggKyBjb2xsX2JveC53aWR0aCAvIDIsXG4gICAgICB5OiBjb2xsX2JveC55ICsgY29sbF9ib3guaGVpZ2h0IC8gMlxuICAgIH1cblxuICAgIGxldCBtZXNoOiBudW1iZXJbXVtdID0gb25lX2FycihoZWlnaHQsIHdpZHRoKTtcbiAgICBcbiAgICBsZXQgbmF2X21lc2g6IG5hdl9tZXNoID0ge1xuICAgICAgZ3JpZDogbWVzaCxcbiAgICAgIGJveDogY29sbF9ib3gsXG4gICAgICBvYmplY3RzOiBmbG9vcnNcbiAgICB9O1xuICAgIHRoaXMubmF2X21lc2ggPSBuYXZfbWVzaDtcbiAgICBmb3IgKGxldCBmbG9vciBvZiBmbG9vcnMpIHtcbiAgICAgIGxldCBvbGRfaGJveCA9IGZsb29yLmhpdGJveDtcbiAgICAgIGxldCBuZXdfd2lkdGggPSAoZmxvb3Iud2lkdGggKiBmbG9vci5zdGF0ZS5zY2FsaW5nLndpZHRoIC0gMiAqIHRoaXMubmF2X3BhZGRpbmcpIC8gZmxvb3Iuc3RhdGUuc2NhbGluZy53aWR0aFxuICAgICAgbGV0IG5ld19oZWlnaHQgPSAoZmxvb3IuaGVpZ2h0ICogZmxvb3Iuc3RhdGUuc2NhbGluZy5oZWlnaHQgLSAyICogdGhpcy5uYXZfcGFkZGluZykgLyBmbG9vci5zdGF0ZS5zY2FsaW5nLmhlaWdodFxuICAgICAgZmxvb3IuaGl0Ym94ID0ge1xuICAgICAgICB4X29mZnNldDogMCxcbiAgICAgICAgeV9vZmZzZXQ6IDAsXG4gICAgICAgIHdpZHRoOiBuZXdfd2lkdGggPiAwID8gbmV3X3dpZHRoIDogMCxcbiAgICAgICAgaGVpZ2h0OiBuZXdfaGVpZ2h0ID4gMCA/IG5ld19oZWlnaHQgOiAwXG4gICAgICB9XG4gICAgICB0aGlzLmNhcnZlTmF2TWVzaChuYXZfbWVzaCwgZmxvb3IsIDApO1xuICAgICAgZmxvb3IuaGl0Ym94ID0gb2xkX2hib3g7XG4gICAgfVxuICAgIGZvciAobGV0IG9iaiBvZiBjb2xsaWRlcnMpIHtcbiAgICAgIHRoaXMuY2FydmVOYXZNZXNoKG5hdl9tZXNoLCBvYmosIDEpO1xuICAgIH1cbiAgICByZXR1cm4gbmF2X21lc2g7XG4gIH1cbiAgcG9zVG9Db3JkKG5hdl9tZXNoOiBuYXZfbWVzaCwgcG9zOiBWZWN0b3IpOiBWZWN0b3Ige1xuICAgIGxldCByb29tID0gdGhpcy5nYW1lLmdldFJvb20oKSBhcyBQYXRoaW5nX1Jvb208dW5rbm93bj47XG4gICAgbGV0IHggPSBNYXRoLmZsb29yKChwb3MueCAtIG5hdl9tZXNoLmJveC54ICsgbmF2X21lc2guYm94LndpZHRoIC8gMikgLyBuYXZfbWVzaC5ib3gud2lkdGggKiAobmF2X21lc2guYm94LndpZHRoIC8gcm9vbS5uYXZfbm9kZV9kaWFtZXRlcikpO1xuICAgIGxldCB5ID0gTWF0aC5mbG9vcigocG9zLnkgLSBuYXZfbWVzaC5ib3gueSArIG5hdl9tZXNoLmJveC5oZWlnaHQgLyAyKSAvIG5hdl9tZXNoLmJveC5oZWlnaHQgKiAobmF2X21lc2guYm94LmhlaWdodCAvIHJvb20ubmF2X25vZGVfZGlhbWV0ZXIpKTtcbiAgICByZXR1cm4geyB4LCB5IH07XG4gIH1cbiAgc3RhdGVmKHRpbWU6IG51bWJlcikge1xuICAgIFxuXG4gICAgc3VwZXIuc3RhdGVmKHRpbWUpO1xuICB9XG5cbn1cblxuIiwiaW1wb3J0IHsgcm9vbSB9IGZyb20gXCJsaWIvcm9vbVwiO1xuaW1wb3J0IHsgY3JlYXRlSXRlbVN0cmluZywgZ2FtZSwgdmlld3BvcnQgfSBmcm9tIFwic3JjL3ZhblwiO1xuaW1wb3J0IHtDYW1lcmF9IGZyb20gXCJsaWIvcmVuZGVyXCI7XG5pbXBvcnQgeyBzdGF0ZV9jb25maWcgfSBmcm9tIFwibGliL3Jvb21cIjtcbmltcG9ydCAqIGFzIGNvbmZpZyBmcm9tIFwiLi90b3BfZG93bi5qc29uXCI7XG5pbXBvcnQgeyBvYmogfSBmcm9tIFwibGliL29iamVjdFwiO1xuaW1wb3J0IHsgUGF0aGluZ19Sb29tIH0gZnJvbSBcIi4vUGF0aGluZ19Sb29tXCI7XG5pbXBvcnQge3RleHRfYmFja2dyb3VuZH0gZnJvbSBcImdhbWUvb2JqZWN0cy90ZXh0X2JhY2tncm91bmRcIlxuaW1wb3J0IHtibGFja19iYWNrZ3JvdW5kfSBmcm9tIFwiZ2FtZS9vYmplY3RzL2JsYWNrX2JhY2tncm91bmRcIjtcbmltcG9ydCB7IEhVRCwgVGV4dCB9IGZyb20gXCJsaWIvaHVkXCI7XG5pbXBvcnQgeyBWZWMgfSBmcm9tIFwibGliL21hdGhcIjtcbmltcG9ydCB7IHJhbmdlIH0gZnJvbSBcImxpYi91dGlsc1wiO1xuaW1wb3J0IHsgZXhlY190eXBlLCBQb2xsX01vdXNlIH0gZnJvbSBcImxpYi9jb250cm9sc1wiO1xuaW1wb3J0IHsgbWFpbl9jaGFyYWN0ZXIgfSBmcm9tIFwiZ2FtZS9vYmplY3RzL21haW5fY2hhcmFjdGVyXCI7XG5pbXBvcnQgeyBnLCBpdGVtX2VudHJ5LCBpdGVtcywgc2V0RmxhZyB9IGZyb20gXCJnYW1lL21haW5cIjtcbmltcG9ydCB7IGludl9pY29uIH0gZnJvbSBcImdhbWUvb2JqZWN0cy9pbnZfaWNvblwiO1xuaW1wb3J0IHsgaW52ZW50b3J5X2NsaWNrcyB9IGZyb20gXCJnYW1lL29iamVjdHMvaW52ZW50b3J5X2NsaWNrc1wiO1xuXG5sZXQgY2ZpZyA9IGNvbmZpZyBhcyB1bmtub3duIGFzIHN0YXRlX2NvbmZpZztcblxuZXhwb3J0IGVudW0gdmlld3N7XG4gIG1haW4sXG4gIGludmVudG9yeSxcbiAgdGV4dFxufVxuXG5pbnRlcmZhY2UgdG9wX2Rvd25fc3RhdGUge1xuICBjdXJyZW50X3ZpZXc6dmlld3MsXG4gIGNvbnY6IHtcbiAgICBjdXJyZW50X2NvbnY6IGNvbnZfZW50cnlbXSxcbiAgICBjYWxsYmFjazogKCgpID0+IHZvaWQpLFxuICB9XG4gIG1vdmFibGU6Ym9vbGVhblxufVxuZnVuY3Rpb24gZ2V0TGluZXModGV4dDpzdHJpbmcsIG1heFdpZHRoOm51bWJlcixmb250X25hbWU6c3RyaW5nLCBmb250X3NpemU6bnVtYmVyKSB7XG4gIHZhciB3b3JkcyA9IHRleHQuc3BsaXQoXCIgXCIpO1xuICB2YXIgbGluZXMgPSBbXTtcbiAgdmFyIGN1cnJlbnRMaW5lID0gd29yZHNbMF07XG4gIGxldCBjdHggPSAoPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikpLmdldENvbnRleHQoXCIyZFwiKTtcbiAgY3R4LmZvbnQgPSBgJHtmb250X3NpemV9cHggJHtmb250X25hbWV9YDtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCB3b3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHdvcmQgPSB3b3Jkc1tpXTtcbiAgICAgIHZhciB3aWR0aCA9IGN0eC5tZWFzdXJlVGV4dChjdXJyZW50TGluZSArIFwiIFwiICsgd29yZCkud2lkdGg7XG4gICAgICBpZiAod2lkdGggPCBtYXhXaWR0aCkge1xuICAgICAgICAgIGN1cnJlbnRMaW5lICs9IFwiIFwiICsgd29yZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGluZXMucHVzaChjdXJyZW50TGluZSk7XG4gICAgICAgICAgY3VycmVudExpbmUgPSB3b3JkO1xuICAgICAgfVxuICB9XG4gIGxpbmVzLnB1c2goY3VycmVudExpbmUpO1xuICByZXR1cm4gbGluZXM7XG59XG5cbmludGVyZmFjZSBjb252X2VudHJ5e1xuICBuYW1lOnN0cmluZyxcbiAgZnVsbF90ZXh0OnN0cmluZyxcbiAgbGVmdD86c3RyaW5nLFxuICByaWdodD86c3RyaW5nLFxuICBkYXJrOiBcImxlZnRcIiB8IFwicmlnaHRcIixcbiAgZmxhZ3M/OntcbiAgICBbaW5kZXg6c3RyaW5nXTpzdHJpbmdcbiAgfSxcbiAgaXRlbXM/OkFycmF5PHtcbiAgICBhY3Rpb246XCJhZGRcIiB8IFwicmVtb3ZlXCIsXG4gICAgbmFtZTpzdHJpbmdcbiAgfT5cbn1cblxuZXhwb3J0IGNsYXNzIG1haW5faHVkIGV4dGVuZHMgSFVEe1xuICBhc3luYyBsb2FkKCl7XG4gICAgcmV0dXJuIHN1cGVyLmxvYWQoKVxuICB9XG4gIHNldEdyYXBoaWNFbGVtZW50cygpOm9ialtde1xuICAgIHJldHVybiBbLypuZXcgaW52X2ljb24oe1xuICAgICAgcG9zaXRpb246VmVjLmNyZWF0ZSgzICogdmlld3BvcnQud2lkdGgvMjAsMyAqIHZpZXdwb3J0LmhlaWdodC8yMCksXG4gICAgICBzY2FsaW5nOnt3aWR0aDouNSxoZWlnaHQ6LjV9XG4gICAgfSkqL11cbiAgfVxuICBzdGF0ZWYodGltZTpudW1iZXIpe1xuICAgIHN1cGVyLnN0YXRlZih0aW1lKTtcbiAgfVxufVxuXG5jb25zdCB0ZXh0X3NwZWVkID0gMjA7XG5leHBvcnQgY2xhc3MgaW52ZW50b3J5X2h1ZCBleHRlbmRzIEhVRHtcbiAgc3RhdGUgPSB7XG4gICAgbGluZV90ZXh0czpbXCJcIixcIlwiLFwiXCIsXCJcIl0sXG4gICAgbmFtZTpcIlwiLFxuICAgIGN1cnJlbnRfcGFnZTowXG4gIH1cbiAgc2V0R3JhcGhpY0VsZW1lbnRzKCk6b2JqW117XG4gICAgbGV0IGJfYmFja2dyb3VuZCA9IG5ldyBibGFja19iYWNrZ3JvdW5kKHtcbiAgICAgIHBvc2l0aW9uOlZlYy5jcmVhdGUodmlld3BvcnQud2lkdGgvMix2aWV3cG9ydC5oZWlnaHQvMiksXG4gICAgICBzY2FsaW5nOnt3aWR0aDp2aWV3cG9ydC53aWR0aCxoZWlnaHQ6dmlld3BvcnQuaGVpZ2h0fVxuICAgIH0pXG4gICAgYl9iYWNrZ3JvdW5kLm9wYWNpdHkgPSAwLjk7XG4gICAgcmV0dXJuIFtiX2JhY2tncm91bmQsbmV3IGludmVudG9yeV9jbGlja3Moe1xuICAgICAgcG9zaXRpb246VmVjLmNyZWF0ZSg1MCwyMCksXG4gICAgICBzY2FsaW5nOnt3aWR0aDoxLGhlaWdodDoxfVxuICAgIH0pLF1cbiAgfVxuICBzZXRUZXh0RWxlbWVudHMoKTpUZXh0W117XG4gICAgbGV0IG5vZGVzID0gW107XG4gICAgZm9yKGxldCBhIG9mIHJhbmdlKDQpKXtcbiAgICAgIG5vZGVzLnB1c2gobmV3IFRleHQoe1xuICAgICAgICBwb3NpdGlvbjpWZWMuY3JlYXRlKDEwMCw4ICogdmlld3BvcnQuaGVpZ2h0LzMyIC0gKHZpZXdwb3J0LndpZHRoLzMwICsgNSkgKiBhKSxcbiAgICAgICAgc2l6ZTp2aWV3cG9ydC53aWR0aC8zMCxcbiAgICAgICAgc2NhbGluZzoxLFxuICAgICAgICBmb250OlwiVlQzMjNcIixcbiAgICAgICAgY29sb3I6XCJ3aGl0ZVwiLFxuICAgICAgICBhbGlnbjpcImxlZnRcIlxuICAgICAgfSwoKT0+IHRoaXMuc3RhdGUubGluZV90ZXh0c1thXSkgIClcbiAgICB9XG4gICAgbm9kZXMucHVzaChuZXcgVGV4dCh7XG4gICAgICBwb3NpdGlvbjpWZWMuY3JlYXRlKDEwMCwxMiAqIHZpZXdwb3J0LmhlaWdodC8zMiksXG4gICAgICBzaXplOnZpZXdwb3J0LndpZHRoLzIwLFxuICAgICAgc2NhbGluZzoxLFxuICAgICAgZm9udDpcIlZUMzIzXCIsXG4gICAgICBjb2xvcjpcIndoaXRlXCIsXG4gICAgICBhbGlnbjpcImxlZnRcIlxuICAgIH0sKCk9PnRoaXMuc3RhdGUubmFtZSkpO1xuICAgIHJldHVybiBub2Rlc1xuICB9XG4gIHNldEhvdmVyZWRJdGVtKGl0ZW06aXRlbV9lbnRyeSl7XG4gICAgbGV0IGxpbmVzID0gZ2V0TGluZXMoaXRlbS5kZXNjcmlwdGlvbix2aWV3cG9ydC53aWR0aCAtIDEwMCxcIlZUMzIzXCIsdmlld3BvcnQud2lkdGgvMzApXG4gICAgbGluZXMgPSBsaW5lcy5zbGljZSgwLDMpO1xuICAgIHRoaXMuc3RhdGUubGluZV90ZXh0cyA9IFtcIlwiLFwiXCIsXCJcIixcIlwiXTtcbiAgICBmb3IobGV0IFtpbmRleCxsaW5lXSBvZiBsaW5lcy5lbnRyaWVzKCkpe1xuICAgICAgdGhpcy5zdGF0ZS5saW5lX3RleHRzW2luZGV4XSA9IGxpbmU7XG4gICAgfVxuICAgIHRoaXMuc3RhdGUubmFtZSA9IGl0ZW0ubmFtZVxuICB9XG4gIHJlbmRlclBhZ2UocGFnZV9pbmRleDpudW1iZXIpe1xuICAgIHRoaXMuZ3JhcGhpY19lbGVtZW50cyA9IHRoaXMuZ3JhcGhpY19lbGVtZW50cy5maWx0ZXIoKGUpPT4hZS50YWdzLmhhcyhcIml0ZW1cIikpXG4gICAgbGV0IGludiA9IGcuc3RhdGUuZ2xvYmFscy5pbnZlbnRvcnk7XG4gICAgbGV0IGludl9jbGlja3MgPSB0aGlzLmdyYXBoaWNfZWxlbWVudHMuZmlsdGVyKChlKT0+ZS50YWdzLmhhcyhcIm1hbmFnZXJcIikpWzBdIGFzIGludmVudG9yeV9jbGlja3M7XG4gICAgaWYocGFnZV9pbmRleCA9PSAwKXtcbiAgICAgIGludl9jbGlja3Muc3RhdGUuc2hvd19sZWZ0ID0gZmFsc2U7XG4gICAgICBpbnZfY2xpY2tzLnN0YXRlLnNob3dfcmlnaHQgPSB0cnVlO1xuICAgICAgdGhpcy5zdGF0ZS5saW5lX3RleHRzID0gW1wiXCIsXCJcIixcIlwiLFwiXCJdO1xuICAgICAgdGhpcy5zdGF0ZS5uYW1lID0gXCJcIjtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5jdXJyZW50X3BhZ2UgPSBwYWdlX2luZGV4O1xuICAgIGxldCBuYW1lcyA9IGludi5zbGljZShwYWdlX2luZGV4ICogOCwgKHBhZ2VfaW5kZXggKyAxKSAqIDgpO1xuICAgIGZvcihsZXQgW2luZGV4LGl0ZW1fbmFtZV0gb2YgbmFtZXMuZW50cmllcygpKXtcbiAgICAgIGxldCBlbnRyeSA9IGl0ZW1zW2l0ZW1fbmFtZV07XG4gICAgICBsZXQgb2JqX3dpZHRoID0gdmlld3BvcnQud2lkdGgvOTYwO1xuICAgICAgaWYoaW5kZXggPiAzKXtcbiAgICAgICAgbGV0IG9iaiA9IGNyZWF0ZUl0ZW1TdHJpbmcoZW50cnkub2JqX25hbWUse1xuICAgICAgICAgIHBvc2l0aW9uOlZlYy5jcmVhdGUoICgxICsgaW5kZXggJSA0KSAqICh2aWV3cG9ydC53aWR0aC81KSwxLzQgKiB2aWV3cG9ydC5oZWlnaHQvMiArIHZpZXdwb3J0LmhlaWdodC8yKSxcbiAgICAgICAgICBzY2FsaW5nOntoZWlnaHQ6b2JqX3dpZHRoLCB3aWR0aDpvYmpfd2lkdGh9XG4gICAgICAgIH0pXG4gICAgICAgIG9iai5VbmJpbmRBbGwoKTtcbiAgICAgICAgb2JqLnJlbW92ZUFsbEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgb2JqLnRhZ3MuYWRkKFwiaXRlbVwiKTtcbiAgICAgICAgdGhpcy5hZGRHcmFwaGljKG9iaik7XG4gICAgICB9XG4gICAgICBlbHNle1xuICAgICAgICBsZXQgb2JqID0gY3JlYXRlSXRlbVN0cmluZyhlbnRyeS5vYmpfbmFtZSx7XG4gICAgICAgICAgcG9zaXRpb246VmVjLmNyZWF0ZSgoMSArIGluZGV4ICUgNCkgKiAodmlld3BvcnQud2lkdGgvNSksMy80ICogdmlld3BvcnQuaGVpZ2h0LzIgKyB2aWV3cG9ydC5oZWlnaHQvMiksXG4gICAgICAgICAgc2NhbGluZzp7aGVpZ2h0Om9ial93aWR0aCwgd2lkdGg6b2JqX3dpZHRofVxuICAgICAgICB9KTtcbiAgICAgICAgb2JqLlVuYmluZEFsbCgpO1xuICAgICAgICBvYmoucmVtb3ZlQWxsRXZlbnRIYW5kbGVycygpO1xuICAgICAgICBvYmoudGFncy5hZGQoXCJpdGVtXCIpO1xuICAgICAgICB0aGlzLmFkZEdyYXBoaWMob2JqKTtcbiAgICAgIH1cbiAgICAgIGlmKGluZGV4ID09PSBpbnYubGVuZ3RoIC0gMSkgYnJlYWs7XG4gICAgfVxuICB9XG4gIGFzeW5jIHNldEFjdGl2ZSgpe1xuICAgIHRoaXMucmVuZGVyUGFnZSgwKVxuICB9XG59XG5leHBvcnQgY2xhc3MgY29udmVyc2F0aW9uX2h1ZCBleHRlbmRzIEhVRHtcbiAgbWF4X2NoYXJhY3RlcnM6bnVtYmVyID0gMTU7XG4gIHRleHRfc3BlZWQgPSB0ZXh0X3NwZWVkO1xuICBzdGF0ZTp7XG4gICAgdGV4dF9hY3RpdmU6Ym9vbGVhbixcbiAgICBmdWxsX3RleHQ6c3RyaW5nW10sXG4gICAgbGluZV90ZXh0OnN0cmluZ1tdIFxuICAgIGN1cnJlbnRfbGluZTpudW1iZXIsXG4gICAgY3VycmVudF90ZXh0X2xpbmU6bnVtYmVyLFxuICAgIGluZGV4Om51bWJlcixcbiAgICB0aW1lcjpudW1iZXIsXG4gICAgYmxvY2tlZDpib29sZWFuLFxuICAgIHRleHRfZmluaXNoZWQ6Ym9vbGVhbixcbiAgICBuYW1lOnN0cmluZ1xuICB9XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdGV4dF9hY3RpdmU6ZmFsc2UsXG4gICAgICBmdWxsX3RleHQ6W10sXG4gICAgICBpbmRleDowLCAgXG4gICAgICB0aW1lcjowLFxuICAgICAgY3VycmVudF9saW5lOjAsXG4gICAgICBjdXJyZW50X3RleHRfbGluZTowLFxuICAgICAgbGluZV90ZXh0OltcIlwiLFwiXCIsXCJcIixcIlwiXSxcbiAgICAgIGJsb2NrZWQ6ZmFsc2UsXG4gICAgICB0ZXh0X2ZpbmlzaGVkOmZhbHNlLFxuICAgICAgbmFtZTpcIlwiXG4gICAgfVxuICB9XG4gIHByb2dyZXNzKCl7XG4gICAgaWYodGhpcy5zdGF0ZS50ZXh0X2ZpbmlzaGVkKXtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZighdGhpcy5zdGF0ZS50ZXh0X2ZpbmlzaGVkICYmIHRoaXMuc3RhdGUuYmxvY2tlZCl7XG4gICAgICB0aGlzLnN0YXRlLmJsb2NrZWQgPSBmYWxzZSBcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudF9saW5lID0gMDtcbiAgICAgIHRoaXMuY2xlYXJMaW5lcygpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY2xlYXJDaGFyYWN0ZXJQb3J0cmFpbihzaWRlOlwibGVmdFwiIHwgXCJyaWdodFwiKXtcbiAgICBpZihzaWRlID09IFwibGVmdFwiKXtcbiAgICAgIHRoaXMuZ3JhcGhpY19lbGVtZW50cyA9IHRoaXMuZ3JhcGhpY19lbGVtZW50cy5maWx0ZXIoKG9iaikgPT4gIW9iai50YWdzLmhhcyhcInRleHRfbGVmdFwiKSk7XG4gICAgfVxuICAgIGlmKHNpZGUgPT0gXCJyaWdodFwiKXtcbiAgICAgIHRoaXMuZ3JhcGhpY19lbGVtZW50cyA9IHRoaXMuZ3JhcGhpY19lbGVtZW50cy5maWx0ZXIoKG9iaikgPT4gIW9iai50YWdzLmhhcyhcInRleHRfcmlnaHRcIikpO1xuICAgIH1cbiAgfVxuICBhc3luYyBjaGFuZ2VDaGFyYWN0ZXJQb3J0cmFpdChzaWRlOlwibGVmdFwiIHwgXCJyaWdodFwiLCBvYmo6b2JqLCBkYXJrOmJvb2xlYW4pe1xuICAgIG9iai5sYXllciA9IDI7XG4gICAgb2JqLnN0YXRlLnNjYWxpbmcgPSB7d2lkdGg6dmlld3BvcnQud2lkdGgvNDgwLGhlaWdodDp2aWV3cG9ydC53aWR0aC80ODB9O1xuICAgIGlmKGRhcmspIG9iai50YWdzLmFkZChcImRhcmtcIik7XG4gICAgaWYoc2lkZSA9PSBcImxlZnRcIil7XG4gICAgICBvYmoudGFncy5hZGQoXCJ0ZXh0X2xlZnRcIik7XG4gICAgICBvYmouc3RhdGUucG9zaXRpb24gPSBWZWMuY3JlYXRlKHZpZXdwb3J0LndpZHRoLzYsdmlld3BvcnQuaGVpZ2h0LzQpO1xuICAgICAgdGhpcy5ncmFwaGljX2VsZW1lbnRzID0gdGhpcy5ncmFwaGljX2VsZW1lbnRzLmZpbHRlcigob2JqKSA9PiAhb2JqLnRhZ3MuaGFzKFwidGV4dF9sZWZ0XCIpKTtcbiAgICB9XG4gICAgaWYoc2lkZSA9PSBcInJpZ2h0XCIpe1xuICAgICAgb2JqLnRhZ3MuYWRkKFwidGV4dF9yaWdodFwiKTtcbiAgICAgIG9iai5zdGF0ZS5wb3NpdGlvbiA9IFZlYy5jcmVhdGUoNSAqIHZpZXdwb3J0LndpZHRoLzYsdmlld3BvcnQuaGVpZ2h0LzQpO1xuICAgICAgdGhpcy5ncmFwaGljX2VsZW1lbnRzID0gdGhpcy5ncmFwaGljX2VsZW1lbnRzLmZpbHRlcigob2JqKSA9PiAhb2JqLnRhZ3MuaGFzKFwidGV4dF9yaWdodFwiKSk7XG4gICAgfVxuICAgIG9iai5VbmJpbmRBbGwoKTtcbiAgICBvYmoucmVtb3ZlQWxsRXZlbnRIYW5kbGVycygpO1xuICAgIHRoaXMuYWRkR3JhcGhpYyhvYmopO1xuICB9XG4gIHN0YXRlZih0aW1lOm51bWJlcil7XG4gICAgc3VwZXIuc3RhdGVmKHRpbWUpO1xuICAgIGlmKHRoaXMuc3RhdGUudGV4dF9hY3RpdmUpe1xuICAgICAgaWYodGhpcy5zdGF0ZS50aW1lciA+IHRoaXMudGV4dF9zcGVlZCl7XG4gICAgICAgIGlmKCF0aGlzLnN0YXRlLmJsb2NrZWQpe1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5saW5lX3RleHRbdGhpcy5zdGF0ZS5jdXJyZW50X2xpbmVdICs9IHRoaXMuc3RhdGUuZnVsbF90ZXh0W3RoaXMuc3RhdGUuY3VycmVudF90ZXh0X2xpbmVdW3RoaXMuc3RhdGUuaW5kZXhdO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5pbmRleCsrO1xuICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5pbmRleCA9PT0gdGhpcy5zdGF0ZS5mdWxsX3RleHRbdGhpcy5zdGF0ZS5jdXJyZW50X3RleHRfbGluZV0ubGVuZ3RoKXtcbiAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50X2xpbmUrKztcbiAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50X3RleHRfbGluZSsrO1xuICAgICAgICAgICAgICB0aGlzLnN0YXRlLmluZGV4ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHRoaXMuc3RhdGUuY3VycmVudF9saW5lID09PSA0KXtcbiAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5ibG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgICBpZih0aGlzLnN0YXRlLmN1cnJlbnRfdGV4dF9saW5lID09PSB0aGlzLnN0YXRlLmZ1bGxfdGV4dC5sZW5ndGgpe1xuICAgICAgICAgICAgICB0aGlzLnN0YXRlLmJsb2NrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICB0aGlzLnN0YXRlLnRleHRfZmluaXNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdGF0ZS50aW1lciA9IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhdGUudGltZXIgKz0gdGltZTtcbiAgICB9XG4gIH1cbiAgY2xlYXJMaW5lcygpe1xuICAgIHRoaXMuc3RhdGUubGluZV90ZXh0ID0gcmFuZ2UoNCkubWFwKCgpPT5cIlwiKTtcbiAgfVxuICBzZXRHcmFwaGljRWxlbWVudHMoKTpvYmpbXXtcbiAgICBsZXQgYl9iYWNrZ3JvdW5kID0gbmV3IGJsYWNrX2JhY2tncm91bmQoe1xuICAgICAgcG9zaXRpb246VmVjLmNyZWF0ZSh2aWV3cG9ydC53aWR0aC8yLHZpZXdwb3J0LmhlaWdodC8yKSxcbiAgICAgIHNjYWxpbmc6e3dpZHRoOnZpZXdwb3J0LndpZHRoLGhlaWdodDp2aWV3cG9ydC5oZWlnaHR9XG4gICAgfSlcbiAgICBiX2JhY2tncm91bmQub3BhY2l0eSA9IDAuOTtcbiAgICByZXR1cm4gW1xuICAgICAgbmV3IHRleHRfYmFja2dyb3VuZCh7XG4gICAgICAgIHBvc2l0aW9uOlZlYy5jcmVhdGUodmlld3BvcnQud2lkdGgvMix2aWV3cG9ydC5oZWlnaHQvNiksXG4gICAgICAgIHNjYWxpbmc6e3dpZHRoOnZpZXdwb3J0LndpZHRoLGhlaWdodDp2aWV3cG9ydC5oZWlnaHQvM31cbiAgICB9KSwgYl9iYWNrZ3JvdW5kXVxuICB9XG4gIHNldFRleHRFbGVtZW50cygpOlRleHRbXXtcbiAgICBsZXQgbm9kZXMgPSBbXTtcbiAgICBmb3IobGV0IGEgb2YgcmFuZ2UoNCkpe1xuICAgICAgbm9kZXMucHVzaChuZXcgVGV4dCh7XG4gICAgICAgIHBvc2l0aW9uOlZlYy5jcmVhdGUoMTAwLDYgKiB2aWV3cG9ydC5oZWlnaHQvMzIgLSAodmlld3BvcnQud2lkdGgvNTAgKyA1KSAqIGEpLFxuICAgICAgICBzaXplOnZpZXdwb3J0LndpZHRoLzUwLFxuICAgICAgICBzY2FsaW5nOjEsXG4gICAgICAgIGZvbnQ6XCJWVDMyM1wiLFxuICAgICAgICBjb2xvcjpcIndoaXRlXCIsXG4gICAgICAgIGFsaWduOlwibGVmdFwiXG4gICAgICB9LCgpPT57IHJldHVybiB0aGlzLnN0YXRlLmxpbmVfdGV4dFthXX0pICApXG4gICAgfVxuICAgIG5vZGVzLnB1c2gobmV3IFRleHQoe1xuICAgICAgcG9zaXRpb246VmVjLmNyZWF0ZSg4MCw4ICogdmlld3BvcnQuaGVpZ2h0LzMyKSxcbiAgICAgIHNpemU6dmlld3BvcnQud2lkdGgvNDAsXG4gICAgICBzY2FsaW5nOjEsXG4gICAgICBmb250OlwiVlQzMjNcIixcbiAgICAgIGNvbG9yOlwid2hpdGVcIixcbiAgICAgIGFsaWduOlwibGVmdFwiXG4gICAgfSwoKT0+dGhpcy5zdGF0ZS5uYW1lKSlcbiAgICByZXR1cm4gbm9kZXM7XG4gIH1cbiAgc2V0VGV4dCh0ZXh0OnN0cmluZyl7XG4gICAgdGhpcy5zdGF0ZS50ZXh0X2FjdGl2ZSA9IHRydWU7XG4gICAgdGhpcy5zdGF0ZS5jdXJyZW50X3RleHRfbGluZSA9IDA7XG4gICAgdGhpcy5zdGF0ZS5jdXJyZW50X2xpbmUgPSAwO1xuICAgIHRoaXMuc3RhdGUuYmxvY2tlZCA9IGZhbHNlO1xuICAgIHRoaXMuY2xlYXJMaW5lcygpO1xuICAgIHRoaXMuc3RhdGUudGV4dF9maW5pc2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuc3RhdGUuZnVsbF90ZXh0ID0gZ2V0TGluZXModGV4dCx2aWV3cG9ydC53aWR0aCAtIDEwMCxcIkFyaWFsXCIsdmlld3BvcnQud2lkdGgvNTApO1xuICAgIHRoaXMucHJvZ3Jlc3MoKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgdG9wX2Rvd24gZXh0ZW5kcyBQYXRoaW5nX1Jvb208dG9wX2Rvd25fc3RhdGU+e1xuICBiYWNrZ3JvdW5kX3VybCA9IFwiLi9zcHJpdGVzL0Vycm9yLnBuZ1wiO1xuICByZW5kZXIgPSB0cnVlO1xuICBmbG9vcl90YWcgPSBcImZsb29yXCI7XG4gIG5hdl9wYWRkaW5nID0gMTAwO1xuICB0ZXh0X2h1ZCA9IG5ldyBjb252ZXJzYXRpb25faHVkKCk7XG4gIG1haW5faHVkID0gbmV3IG1haW5faHVkKCk7XG4gIGludmVudG9yeV9odWQgPSBuZXcgaW52ZW50b3J5X2h1ZCgpO1xuICBuYXZfbm9kZV9kaWFtZXRlciA9IDIwMDtcbiAgY29uc3RydWN0b3IoZ2FtZTogZ2FtZTx1bmtub3duPixjZmlnOnN0YXRlX2NvbmZpZykge1xuICAgIHN1cGVyKGdhbWUsIGNmaWcpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBjdXJyZW50X3ZpZXc6dmlld3MubWFpbixcbiAgICAgIG1vdmFibGU6dHJ1ZSxcbiAgICAgIGNvbnY6IHVuZGVmaW5lZFxuICAgIH1cbiAgICB0aGlzLmNhbWVyYXMucHVzaChcbiAgICAgIG5ldyBDYW1lcmEoe1xuICAgICAgICB4OjAsXG4gICAgICAgIHk6MCxcbiAgICAgICAgZGltZW5zaW9uczp2aWV3cG9ydCxcbiAgICAgICAgc2NhbGluZzowLjZcbiAgICAgIH0se1xuICAgICAgICB4OjAsXG4gICAgICAgIHk6MCxcbiAgICAgICAgd2lkdGg6MSxcbiAgICAgICAgaGVpZ2h0OjFcbiAgICAgIH0sdGhpcy5tYWluX2h1ZFxuICAgICkpO1xuICAgIGNvbnNvbGUubG9nKFwidjFcIik7XG4gIH1cbiAgYXN5bmMgbG9hZCgpe1xuICAgIGF3YWl0IHRoaXMuaW52ZW50b3J5X2h1ZC5sb2FkKCk7XG4gICAgYXdhaXQgdGhpcy5tYWluX2h1ZC5sb2FkKCk7XG4gICAgYXdhaXQgdGhpcy50ZXh0X2h1ZC5sb2FkKCk7XG4gICAgcmV0dXJuIHN1cGVyLmxvYWQoKVxuICB9XG4gIHNldENvbnYoc2NyaXB0OmNvbnZfZW50cnlbXSwgYWZ0ZXJfY29udj86KCk9PnZvaWQpe1xuICAgIHRoaXMuc3RhdGUuY3VycmVudF92aWV3ID0gdmlld3MudGV4dDtcbiAgICB0aGlzLmNhbWVyYXNbMF0uc2V0SHVkKHRoaXMudGV4dF9odWQpOyAgXG4gICAgdGhpcy5zdGF0ZS5jb252ID0ge1xuICAgICAgY3VycmVudF9jb252OiBzY3JpcHQsXG4gICAgICBjYWxsYmFjazogYWZ0ZXJfY29udlxuICAgIH07XG4gICAgdGhpcy5wcm9ncmVzc0NvbnYoc2NyaXB0WzBdKTtcbiAgICB0aGlzLnN0YXRlLm1vdmFibGUgPSBmYWxzZTtcbiAgfVxuICBwcm9ncmVzc0NvbnYoc2NyaXB0OmNvbnZfZW50cnkpe1xuICAgIHRoaXMudGV4dF9odWQuc2V0VGV4dChzY3JpcHQuZnVsbF90ZXh0KTtcbiAgICB0aGlzLnRleHRfaHVkLnN0YXRlLm5hbWUgPSBzY3JpcHQubmFtZTtcbiAgICBpZihzY3JpcHQubGVmdCAhPT0gdW5kZWZpbmVkKXtcbiAgICAgIHRoaXMudGV4dF9odWQuY2hhbmdlQ2hhcmFjdGVyUG9ydHJhaXQoXCJsZWZ0XCIsdGhpcy5jcmVhdGVJdGVtU3RyaW5nKHNjcmlwdC5sZWZ0LHtwb3NpdGlvbjpWZWMuY3JlYXRlKDAsMCl9LHt9KSxzY3JpcHQuZGFyayA9PT0gXCJsZWZ0XCIpO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgdGhpcy50ZXh0X2h1ZC5jbGVhckNoYXJhY3RlclBvcnRyYWluKFwibGVmdFwiKTtcbiAgICB9XG4gICAgaWYoc2NyaXB0LnJpZ2h0ICE9PSB1bmRlZmluZWQpe1xuICAgICAgdGhpcy50ZXh0X2h1ZC5jaGFuZ2VDaGFyYWN0ZXJQb3J0cmFpdChcInJpZ2h0XCIsdGhpcy5jcmVhdGVJdGVtU3RyaW5nKHNjcmlwdC5yaWdodCx7cG9zaXRpb246VmVjLmNyZWF0ZSgwLDApfSx7fSksc2NyaXB0LmRhcmsgPT09IFwicmlnaHRcIik7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICB0aGlzLnRleHRfaHVkLmNsZWFyQ2hhcmFjdGVyUG9ydHJhaW4oXCJyaWdodFwiKTtcbiAgICB9XG4gIH1cbiAgbmV4dENvbnZlcnNhdGlvbkVudHJ5KCl7XG4gICAgbGV0IGZsYWdfdmFsdWVzID0gdGhpcy5zdGF0ZS5jb252LmN1cnJlbnRfY29udlswXS5mbGFncztcbiAgICBsZXQgaXRlbXMgPSB0aGlzLnN0YXRlLmNvbnYuY3VycmVudF9jb252WzBdLml0ZW1zO1xuICAgIGlmKGl0ZW1zKXtcbiAgICAgIGZvcihsZXQgaXRlbSBvZiBpdGVtcyl7XG4gICAgICAgIGlmKGl0ZW0uYWN0aW9uID0gXCJhZGRcIil7XG4gICAgICAgICAgZy5zdGF0ZS5nbG9iYWxzLmludmVudG9yeS5wdXNoKGl0ZW0ubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICBsZXQgaW5kZXggPSBnLnN0YXRlLmdsb2JhbHMuaW52ZW50b3J5LmluZGV4T2YoaXRlbS5uYW1lKTtcbiAgICAgICAgICBpZihpbmRleCA+IC0xKXtcbiAgICAgICAgICAgIGcuc3RhdGUuZ2xvYmFscy5pbnZlbnRvcnkuc3BsaWNlKGluZGV4LDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZihmbGFnX3ZhbHVlcyl7XG4gICAgICBmb3IobGV0IGZsYWcgb2YgT2JqZWN0LmtleXMoZmxhZ192YWx1ZXMpKXtcbiAgICAgICAgc2V0RmxhZyhmbGFnLGZsYWdfdmFsdWVzW2ZsYWddKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYodGhpcy5zdGF0ZS5jb252LmN1cnJlbnRfY29udi5sZW5ndGggPiAxKXtcbiAgICAgIHRoaXMuc3RhdGUuY29udi5jdXJyZW50X2NvbnYuc3BsaWNlKDAsMSk7XG4gICAgICB0aGlzLnByb2dyZXNzQ29udih0aGlzLnN0YXRlLmNvbnYuY3VycmVudF9jb252WzBdKTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIHRoaXMudGV4dF9odWQuY2xlYXJMaW5lcygpO1xuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50X3ZpZXcgPSB2aWV3cy5tYWluO1xuICAgICAgdGhpcy5jYW1lcmFzWzBdLnNldEh1ZChuZXcgbWFpbl9odWQoKSk7ICBcbiAgICAgIHRoaXMuc3RhdGUubW92YWJsZSA9IHRydWU7XG4gICAgICB0aGlzLnN0YXRlLmNvbnYuY2FsbGJhY2soKTtcbiAgICB9IFxuICB9XG4gIHJlZ2lzdGVyQ29udHJvbHMoKSB7XG4gICAgdGhpcy5iaW5kQ29udHJvbChcIm1vdXNlMGRvd25cIixleGVjX3R5cGUub25jZSwoKT0+e1xuICAgICAgaWYodGhpcy5jYW1lcmFzWzBdLmh1ZCA9PT0gdGhpcy50ZXh0X2h1ZCl7XG4gICAgICAgIGlmKHRoaXMudGV4dF9odWQuc3RhdGUudGV4dF9maW5pc2hlZCl7XG4gICAgICAgICAgdGhpcy5uZXh0Q29udmVyc2F0aW9uRW50cnkoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgIHRoaXMudGV4dF9odWQucHJvZ3Jlc3MoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuYmluZENvbnRyb2woXCJTcGFjZWRvd25cIixleGVjX3R5cGUub25jZSwoKT0+e1xuICAgICAgaWYodGhpcy5zdGF0ZS5jdXJyZW50X3ZpZXcgID09PSB2aWV3cy50ZXh0KXtcbiAgICAgICAgdGhpcy50ZXh0X2h1ZC50ZXh0X3NwZWVkID0gdGV4dF9zcGVlZC8yOyBcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLmJpbmRDb250cm9sKFwiU3BhY2V1cFwiLGV4ZWNfdHlwZS5vbmNlLCgpPT57XG4gICAgICAgIHRoaXMudGV4dF9odWQudGV4dF9zcGVlZCA9IHRleHRfc3BlZWQ7XG4gICAgfSlcbiAgICB0aGlzLmJpbmRDb250cm9sKFwiS2V5WFwiLGV4ZWNfdHlwZS5vbmNlLCgpPT57XG4gICAgICBpZighKHRoaXMuc3RhdGUuY3VycmVudF92aWV3ID09PSB2aWV3cy50ZXh0KSl7XG4gICAgICAgIHRoaXMuc2V0Q29udihbe1xuICAgICAgICAgIGxlZnQ6XCJtYWluX2NoYXJhY3RlclwiLFxuICAgICAgICAgIHJpZ2h0OlwibWFpbl9jaGFyYWN0ZXJcIixcbiAgICAgICAgICBuYW1lOlwiSm9obiBTbWl0aFwiLFxuICAgICAgICAgIGRhcms6XCJsZWZ0XCIsXG4gICAgICAgICAgZnVsbF90ZXh0OmBJbiBjYXNlIG9mIGFuIGVycm9yLCB0aGUgcHJvbWlzZSBiZWNvbWVzIHJlamVjdGVkLCBhbmQgdGhlIGV4ZWN1dGlvbiBzaG91bGQganVtcCB0byB0aGUgY2xvc2VzdCByZWplY3Rpb24gaGFuZGxlci4gQnV0IHRoZXJlIGlzIG5vbmUuIFNvIHRoZSBlcnJvciBnZXRzIOKAnHN0dWNr4oCdLiBUaGVyZeKAmXMgbm8gY29kZSB0byBoYW5kbGUgaXQuYCxcbiAgICAgICAgICBmbGFnczp7XG4gICAgICAgICAgICB0ZXN0Olwib25lXCJcbiAgICAgICAgICB9XG4gICAgICAgIH0se1xuICAgICAgICAgIHJpZ2h0OlwiZXhhbXBsZVwiLFxuICAgICAgICAgIG5hbWU6XCJ0ZXN0XCIsXG4gICAgICAgICAgZGFyazpcImxlZnRcIixcbiAgICAgICAgICBmdWxsX3RleHQ6YFRlc3QgVGVzdFRlc3RUZXN0VGVzdFRlc3RUZXN0VGVzdFRlc3RUZXN0VGVzdFRlc3RUZXN0VGVzdFRlc3RUZXN0VGVzdFRlc3RUZXN0VGVzdFRlc3RUZXN0VGVzdFRlc3QuYCxcbiAgICAgICAgICBmbGFnczp7XG4gICAgICAgICAgICB0ZXN0MjpcInllcFwiXG4gICAgICAgICAgfVxuICAgICAgICB9LHtcbiAgICAgICAgICBuYW1lOlwiXCIsXG4gICAgICAgICAgZGFyazpcImxlZnRcIixcbiAgICAgICAgICBmdWxsX3RleHQ6YEJ1dCB3aHk/Li4uYCxcbiAgICAgICAgICBmbGFnczp7XG4gICAgICAgICAgICB0ZXN0OlwidHdwXCJcbiAgICAgICAgICB9XG4gICAgICAgIH1dKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbiAgcmVnaXN0ZXJQYXJ0aWNsZXMoKSB7XG5cbiAgfVxuICBzdGF0ZWYoZGVsdGFfdGltZTogbnVtYmVyKSB7XG4gICAgc3VwZXIuc3RhdGVmKGRlbHRhX3RpbWUpO1xuICAgIGxldCBwbGF5ZXIgPSA8b2JqPnRoaXMuY2FjaGUoXCJwbGF5ZXJcIix0aGlzLmdldE9iakJ5VGFnKFwicGxheWVyXCIpWzBdKTtcbiAgICB0aGlzLmNhbWVyYXNbMF0uc3RhdGUucG9zaXRpb24gPSBwbGF5ZXIuc3RhdGUucG9zaXRpb247XG4gICAgaWYoIXRoaXMuc3RhdGUubW92YWJsZSl7XG4gICAgICBwbGF5ZXIuc3RhdGUudmVsb2NpdHkgPSBWZWMuY3JlYXRlKDAsMCk7XG4gICAgfVxuICB9XG5cbn0iLCJpbXBvcnQgeyBwcm94aW1pdHlfbWF0cml4LCByb29tIH0gZnJvbSBcImxpYi9yb29tXCI7XG5pbXBvcnQgeyBnYW1lLCB2aWV3cG9ydCB9IGZyb20gXCJzcmMvdmFuXCI7XG5pbXBvcnQgeyBzdGF0ZV9jb25maWcgfSBmcm9tIFwibGliL3Jvb21cIjtcbmltcG9ydCAqIGFzIGNvbmZpZyBmcm9tIFwiLi9ib2FyZFZpZXcuanNvblwiO1xuaW1wb3J0IHsgZXhlY190eXBlLCBQb2xsX01vdXNlIH0gZnJvbSBcImxpYi9jb250cm9sc1wiO1xuaW1wb3J0IHsgZywgZ2V0TmV4dFB1enpsZSwgcHV6emxlIH0gZnJvbSBcImdhbWUvbWFpblwiO1xuaW1wb3J0IHsgQ2FtZXJhIH0gZnJvbSBcImxpYi9yZW5kZXJcIjtcbmltcG9ydCB7IHBpZWNlIH0gZnJvbSBcImdhbWUvb2JqZWN0cy9hYnN0cmFjdC9waWVjZVwiO1xuaW1wb3J0IHtDaGVzc30gZnJvbSBcImNoZXNzLmpzXCI7XG5pbXBvcnQgeyBjbGFtcCwgVmVjIH0gZnJvbSBcImxpYi9tYXRoXCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwibGliL3N0YXRlXCI7XG5pbXBvcnQgeyBIVUQsIFRleHQgfSBmcm9tIFwibGliL2h1ZFwiO1xubGV0IGNmaWcgPSBjb25maWcgYXMgdW5rbm93biBhcyBzdGF0ZV9jb25maWc7XG5pbnRlcmZhY2Ugdmlld1N0YXRlIHtcbiAgZHJhZ2dpbmc6IHBpZWNlLFxuICBzdGFydF9kcmFnOiBWZWN0b3IsXG4gIHBlcnNwZWN0aXZlOiBcIndcIiB8IFwiYlwiLFxuICBwdXp6bGU6IHB1enpsZSxcbiAgbnVtYmVyX2NvcnJlY3Q6IG51bWJlclxufVxuXG5jbGFzcyBib2FyZEh1ZCBleHRlbmRzIEhVRCB7XG4gIHNldFRleHRFbGVtZW50cygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgbmV3IFRleHQoe1xuICAgICAgICBwb3NpdGlvbjogVmVjLmNyZWF0ZSg0OSAqIHZpZXdwb3J0LndpZHRoIC8gNTAsIDIgKiB2aWV3cG9ydC5oZWlnaHQgLyAyMCksXG4gICAgICAgIHNpemU6IDQwLFxuICAgICAgICBzY2FsaW5nOiAxLFxuICAgICAgICBmb250OiBcIlZUMzIzXCIsXG4gICAgICAgIGNvbG9yOiBcIndoaXRlXCIsXG4gICAgICAgIGFsaWduOiBcInJpZ2h0XCJcbiAgICAgIH0sICgpID0+IGAke2cuc3RhdGUuZ2xvYmFscy5yYXRpbmd9YCksXG4gICAgXVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBib2FyZFZpZXcgZXh0ZW5kcyByb29tPHZpZXdTdGF0ZT57XG4gIGJhY2tncm91bmRfdXJsID0gXCIuL3Nwcml0ZXMvRXJyb3IucG5nXCI7XG4gIHJlbmRlciA9IHRydWU7XG4gIHByb3hpbWl0eV9tYXA6cHJveGltaXR5X21hdHJpeCA9IG5ldyBwcm94aW1pdHlfbWF0cml4KDIwMDAsMSk7XG4gIGNvbnN0cnVjdG9yKGdhbWU6IGdhbWU8dW5rbm93bj4pIHtcbiAgICBzdXBlcihnYW1lLCBjZmlnKTtcbiAgICB0aGlzLmNhbWVyYXMucHVzaChcbiAgICAgIG5ldyBDYW1lcmEoe1xuICAgICAgICB4OjAsXG4gICAgICAgIHk6MCxcbiAgICAgICAgZGltZW5zaW9uczp2aWV3cG9ydCxcbiAgICAgICAgc2NhbGluZzowLjNcbiAgICAgIH0se1xuICAgICAgICB4OjAsXG4gICAgICAgIHk6MCxcbiAgICAgICAgd2lkdGg6MSxcbiAgICAgICAgaGVpZ2h0OjFcbiAgICAgIH0sXG4gICAgICBuZXcgYm9hcmRIdWQoKVxuICAgICkpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBkcmFnZ2luZzogbnVsbCxcbiAgICAgIHN0YXJ0X2RyYWc6IG51bGwsXG4gICAgICBwZXJzcGVjdGl2ZTogbnVsbCxcbiAgICAgIHB1enpsZTogbnVsbCxcbiAgICAgIG51bWJlcl9jb3JyZWN0OiAwXG4gICAgfVxuICB9XG4gIHJlZ2lzdGVyQ29udHJvbHMoKSB7XG4gICAgc3VwZXIucmVnaXN0ZXJDb250cm9scygpO1xuICAgIHRoaXMuYmluZENvbnRyb2woXCJLZXlDXCIsIGV4ZWNfdHlwZS5vbmNlLCAoKSA9PiB7XG4gICAgICB0aGlzLmdldE9iakJ5VGFnKFwicGllY2VcIikuZm9yRWFjaCgocGllY2UpID0+IHBpZWNlLmRlbGV0ZSgpKTtcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMub2JqZWN0cyk7XG4gICAgfSk7XG4gICAgdGhpcy5iaW5kQ29udHJvbChcIm1vdXNlMGRvd25cIiwgZXhlY190eXBlLm9uY2UsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMub2JqZWN0cyk7XG4gICAgfSk7XG4gICAgdGhpcy5iaW5kQ29udHJvbChcIm1vdXNlMHVwXCIsZXhlY190eXBlLm9uY2UsKCkgPT4ge1xuICAgICAgaWYodGhpcy5zdGF0ZS5kcmFnZ2luZyl7XG4gICAgICAgIGxldCBtb3VzZSA9IFBvbGxfTW91c2UodGhpcy5jYW1lcmFzWzBdKTtcbiAgICAgICAgdGhpcy5zdGF0ZS5kcmFnZ2luZy5sYXllciA9IDE7XG4gICAgICAgIGlmKG1vdXNlLnggPiA3MDAgfHwgbW91c2UueSA+IDcwMCB8fCBtb3VzZS54IDwgLTcwMCB8fCBtb3VzZS55IDwgLTcwMCl7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5kcmFnZ2luZy5zdGF0ZS5wb3NpdGlvbiA9IHRoaXMuc3RhdGUuc3RhcnRfZHJhZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgcm93cyA9IFtcImFcIixcImJcIixcImNcIixcImRcIixcImVcIixcImZcIixcImdcIixcImhcIl07XG4gICAgICAgICAgbGV0IGNvbHMgPSBbXCIxXCIsXCIyXCIsXCIzXCIsXCI0XCIsXCI1XCIsXCI2XCIsXCI3XCIsXCI4XCJdO1xuICAgICAgICAgIGlmKHRoaXMuc3RhdGUucGVyc3BlY3RpdmUgPT0gXCJ3XCIpe1xuICAgICAgICAgICAgcm93cyA9IHJvd3MucmV2ZXJzZSgpO1xuICAgICAgICAgICAgY29scyA9IGNvbHMucmV2ZXJzZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgbW9kX3ggPSBNYXRoLmZsb29yKG1vdXNlLnggLyAxNzguNTcxNDI5KSArIDQ7XG4gICAgICAgICAgbGV0IG1vZF95ID0gTWF0aC5mbG9vcihtb3VzZS55IC8gMTc4LjU3MTQyOSkgKyA0O1xuICAgICAgICAgIGxldCBzcXVhcmUgPSBgJHtyb3dzW21vZF94XX0ke2NvbHNbbW9kX3ldfWA7XG4gICAgICAgICAgbGV0IGZ1bGxfbW92ZSA9IHRoaXMuc3RhdGUuZHJhZ2dpbmcucGFyYW1zLnNxdWFyZSArIHNxdWFyZTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhmdWxsX21vdmUgKyBcIiBcIiArIHRoaXMuc3RhdGUucHV6emxlLnNvbHV0aW9uWzBdKTtcbiAgICAgICAgICBpZihmdWxsX21vdmUgPT0gdGhpcy5zdGF0ZS5wdXp6bGUuc29sdXRpb25bMF0pe1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjb3JyZWN0XCIpO1xuICAgICAgICAgICAgbGV0IHggPSAtNjI1ICsgMTc4LjU3MTQyOSAqIChtb2RfeCk7XG4gICAgICAgICAgICBsZXQgeSA9IC02MjUgKyAxNzguNTcxNDI5ICogKG1vZF95KTtcbiAgICAgICAgICAgIGxldCBjb2xsaXNpb24gPSB0aGlzLmNoZWNrT2JqZWN0c1BvaW50SW5jbHVzaXZlKG1vdXNlLFtcInBpZWNlXCJdKS5maWx0ZXIoKG9iaikgPT4gb2JqICE9IHRoaXMuc3RhdGUuZHJhZ2dpbmcpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5wdXp6bGUuc29sdXRpb24uc2hpZnQoKTtcbiAgICAgICAgICAgIGlmKGNvbGxpc2lvbi5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgY29sbGlzaW9uWzBdLmRlbGV0ZSgpO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImRlbGV0ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3RhdGUuZHJhZ2dpbmcuc3RhdGUucG9zaXRpb24ueCA9IHg7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLmRyYWdnaW5nLnN0YXRlLnBvc2l0aW9uLnkgPSB5O1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5kcmFnZ2luZy5wYXJhbXMuc3F1YXJlID0gc3F1YXJlO1xuICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5wdXp6bGUuc29sdXRpb24ubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICAgIGxldCBuZXh0X21vdmUgPSB0aGlzLnN0YXRlLnB1enpsZS5zb2x1dGlvbi5zaGlmdCgpO1xuICAgICAgICAgICAgICB0aGlzLm90aGVyUGxheWVyTW92ZShuZXh0X21vdmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuc2hvd05leHRQdXp6bGUoKTtcbiAgICAgICAgICAgICAgZy5zdGF0ZS5nbG9iYWxzLnJhdGluZyArPSAyNTtcbiAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5udW1iZXJfY29ycmVjdCArPSAxO1xuICAgICAgICAgICAgICBpZih0aGlzLnN0YXRlLm51bWJlcl9jb3JyZWN0ID09IDUpe1xuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZS5sb2FkUm9vbVN0cmluZyhcInRlc3RcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImluY29ycmVjdFwiKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuZHJhZ2dpbmcuc3RhdGUucG9zaXRpb24ueCA9IHRoaXMuc3RhdGUuc3RhcnRfZHJhZy54O1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5kcmFnZ2luZy5zdGF0ZS5wb3NpdGlvbi55ID0gdGhpcy5zdGF0ZS5zdGFydF9kcmFnLnk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUuZHJhZ2dpbmcgPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXRlLnN0YXJ0X2RyYWcgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuYmluZENvbnRyb2woXCJLZXlYXCIsIGV4ZWNfdHlwZS5vbmNlLCBhc3luYyAoKSA9PiB7XG4gICAgICBcbiAgICB9KTtcbiAgfVxuICBhc3luYyBzaG93TmV4dFB1enpsZSgpe1xuICAgIGxldCBwdXp6bGVzID0gZy5zdGF0ZS5nbG9iYWxzLnB1enpsZXM7XG4gICAgICBsZXQgcmF0aW5nID0gZy5zdGF0ZS5nbG9iYWxzLnJhdGluZztcbiAgICAgIGxldCBuZXh0X3B1enpsZTpwdXp6bGU7XG4gICAgICBkbyB7XG4gICAgICAgIG5leHRfcHV6emxlID0gZ2V0TmV4dFB1enpsZShwdXp6bGVzLCByYXRpbmcsIDUwKTtcbiAgICAgIH0gd2hpbGUgKG5leHRfcHV6emxlLnNvbHV0aW9uLmxlbmd0aCA8PSAyKTtcbiAgICAgIGxldCBjaGVzcyA9IG5ldyBDaGVzcyhuZXh0X3B1enpsZS5mZW4pO1xuICAgICAgbGV0IGJvYXJkID0gY2hlc3MuYm9hcmQoKTtcbiAgICAgIGNvbnNvbGUubG9nKGNoZXNzLmFzY2lpKCkpO1xuICAgICAgY29uc29sZS5sb2coY2hlc3MuZmVuKCkpO1xuICAgICAgdGhpcy5nZXRPYmpCeVRhZyhcInBpZWNlXCIpLmZvckVhY2gocCA9PiBwLmRlbGV0ZSgpKTtcbiAgICAgIHRoaXMuc3RhdGUucGVyc3BlY3RpdmUgPSBjaGVzcy50dXJuKCk7XG4gICAgICB0aGlzLnN0YXRlLnB1enpsZSA9IG5leHRfcHV6emxlO1xuICAgICAgaWYoY2hlc3MudHVybigpID09PSBcImJcIil7XG4gICAgICAgIGJvYXJkLnJldmVyc2UoKTtcbiAgICAgICAgLy9ib2FyZCA9IGJvYXJkLm1hcChyb3cgPT4gcm93LnJldmVyc2UoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBib2FyZCA9IGJvYXJkLm1hcChyb3cgPT4gcm93LnJldmVyc2UoKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKG5leHRfcHV6emxlLnNvbHV0aW9uKTtcbiAgICAgIGZvcihsZXQgeSA9IDA7IHkgPCA4OyB5Kyspe1xuICAgICAgICBmb3IobGV0IHggPSAwOyB4IDwgODsgeCsrKXtcbiAgICAgICAgICBpZihib2FyZFt5XVt4XSl7XG4gICAgICAgICAgICBsZXQgdHlwZTpzdHJpbmcgPSBib2FyZFt5XVt4XS50eXBlO1xuICAgICAgICAgICAgaWYoYm9hcmRbeV1beF0uY29sb3IgPT09IFwid1wiKXtcbiAgICAgICAgICAgICAgdHlwZSA9IHR5cGUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkSXRlbShuZXcgcGllY2Uoe1xuICAgICAgICAgICAgICBwb3NpdGlvbjogVmVjLmNyZWF0ZSgoeCAtIDQpICogMTc4LjU3MTQyOSArIDkwLCh5IC0gNCkgKiAxNzguNTcxNDI5ICsgOTApLFxuICAgICAgICAgICAgICBzY2FsaW5nOiB7XG4gICAgICAgICAgICAgICAgd2lkdGg6OCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6OFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LHtcbiAgICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgICAgc3F1YXJlOiAoPGFueT5ib2FyZFt5XVt4XSkuc3F1YXJlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgbmV4dF9tb3ZlID0gdGhpcy5zdGF0ZS5wdXp6bGUuc29sdXRpb24uc2hpZnQoKTtcbiAgICAgIHRoaXMub3RoZXJQbGF5ZXJNb3ZlKG5leHRfbW92ZSk7XG4gIH1cbiAgc3F1YXJlVG9Qb3NpdGlvbihzcXVhcmU6IHN0cmluZyl7XG4gICAgbGV0IHJvd3MgPSBbXCJhXCIsXCJiXCIsXCJjXCIsXCJkXCIsXCJlXCIsXCJmXCIsXCJnXCIsXCJoXCJdO1xuICAgIGxldCBjb2xzID0gW1wiMVwiLFwiMlwiLFwiM1wiLFwiNFwiLFwiNVwiLFwiNlwiLFwiN1wiLFwiOFwiXTtcbiAgICBpZiAodGhpcy5zdGF0ZS5wZXJzcGVjdGl2ZSA9PSBcIndcIil7XG4gICAgICByb3dzID0gcm93cy5yZXZlcnNlKCk7XG4gICAgICBjb2xzID0gY29scy5yZXZlcnNlKCk7XG4gICAgfVxuICAgIGxldCB4ID0gcm93cy5pbmRleE9mKHNxdWFyZVswXSk7XG4gICAgbGV0IHkgPSBjb2xzLmluZGV4T2Yoc3F1YXJlWzFdKTtcbiAgICByZXR1cm4gVmVjLmNyZWF0ZSgoeCAtIDQpICogMTc4LjU3MTQyOSArIDkwLCh5IC0gNCkgKiAxNzguNTcxNDI5ICsgOTApO1xuICB9XG4gIG90aGVyUGxheWVyTW92ZShtb3ZlOnN0cmluZyl7XG4gICAgbGV0IHN0YXJ0ID0gdGhpcy5zcXVhcmVUb1Bvc2l0aW9uKG1vdmUuc3Vic3RyaW5nKDAsMikpO1xuICAgIGxldCBlbmQgPSB0aGlzLnNxdWFyZVRvUG9zaXRpb24obW92ZS5zdWJzdHJpbmcoMiw0KSk7XG4gICAgbGV0IGFpX3BpZWNlID0gdGhpcy5jaGVja09iamVjdHNQb2ludEluY2x1c2l2ZShzdGFydCxbXCJwaWVjZVwiXSlbMF0gYXMgcGllY2U7XG4gICAgbGV0IHRha2VuX3BpZWNlID0gdGhpcy5jaGVja09iamVjdHNQb2ludEluY2x1c2l2ZShlbmQsW1wicGllY2VcIl0pO1xuICAgIGlmKHRha2VuX3BpZWNlLmxlbmd0aCA+IDApe1xuICAgICAgdGFrZW5fcGllY2VbMF0uZGVsZXRlKCk7XG4gICAgfVxuICAgIHRoaXMubW92ZVBpZWNlKGFpX3BpZWNlLGVuZCk7IFxuICB9XG4gIG1vdmVQaWVjZShwaWVjZTogcGllY2UsIHRhcmdldDogVmVjdG9yKXtcbiAgICBsZXQgY291bnRlciA9IDA7XG4gICAgbGV0IGRpZmYgPSBWZWMuc3ViKHRhcmdldCxwaWVjZS5zdGF0ZS5wb3NpdGlvbik7XG4gICAgY29uc29sZS5sb2coZGlmZik7XG4gICAgbGV0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgbGV0IG9mZnNldCA9IFZlYy5mdW5jKGRpZmYsICh2KSA9PiB2IC8gNjApO1xuICAgICAgcGllY2Uuc3RhdGUucG9zaXRpb24gPSBWZWMuYWRkKHBpZWNlLnN0YXRlLnBvc2l0aW9uLCBvZmZzZXQpO1xuICAgICAgY291bnRlcisrO1xuICAgICAgbGV0IGN1cnJlbnRfZGlmZiA9IFZlYy5kaXN0YW5jZShwaWVjZS5zdGF0ZS5wb3NpdGlvbix0YXJnZXQpO1xuICAgICAgaWYoY3VycmVudF9kaWZmIDwgNSl7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgfVxuICAgIH0sIDgwLzYwKTtcbiAgfVxuICByZWdpc3RlclBhcnRpY2xlcygpIHtcblxuICB9XG4gIHJlZ2lzdGVyQXVkaW8oKXtcbiAgICB0aGlzLmF1ZGlvLmFkZChcInJ1c3NpYW5cIixcIi4vc291bmRzL1J1c3NpYW4ubXBnYVwiKTtcbiAgfVxuICBhc3luYyBpbml0aWFsaXplKCl7XG4gICAgYXdhaXQgdGhpcy5zaG93TmV4dFB1enpsZSgpO1xuICAgIHRoaXMuYXVkaW8ucGxheShcInJ1c3NpYW5cIiwxKTtcbiAgICBzZXRJbnRlcnZhbCgoKT0+e1xuICAgICAgaWYodGhpcy52YWxpZCl7XG4gICAgICAgIHRoaXMuYXVkaW8ucGxheShcInJ1c3NpYW5cIiwxKTtcbiAgICAgIH1cbiAgICB9LHRoaXMuYXVkaW8uZ2V0KFwicnVzc2lhblwiKS5kdXJhdGlvbiAqIDEwMDApO1xuICB9XG4gIHN0YXRlZihkZWx0YV90aW1lOiBudW1iZXIpIHtcbiAgICBzdXBlci5zdGF0ZWYoZGVsdGFfdGltZSk7XG4gICAgaWYodGhpcy5zdGF0ZS5kcmFnZ2luZyl7XG4gICAgICBsZXQgbW91c2UgPSBQb2xsX01vdXNlKHRoaXMuY2FtZXJhc1swXSk7XG4gICAgICB0aGlzLnN0YXRlLmRyYWdnaW5nLnN0YXRlLnBvc2l0aW9uID0gbW91c2U7XG4gICAgfVxuICB9XG5cbn0iLCJcbmludGVyZmFjZSByb29tX2RpciB7XG4gIFtpbmRleDpzdHJpbmddOmFueVxufVxuaW1wb3J0IHtib2FyZFZpZXd9IGZyb20gXCIuL2JvYXJkVmlld1wiO1xuaW1wb3J0IHt0ZXN0fSBmcm9tIFwiLi90ZXN0XCI7XG5leHBvcnQgbGV0IHJvb21zOnJvb21fZGlyID0ge1xuXHRib2FyZFZpZXc6Ym9hcmRWaWV3LFxuXHR0ZXN0OnRlc3QsXG59IiwiaW1wb3J0IHsgcHJveGltaXR5X21hdHJpeCwgcm9vbSB9IGZyb20gXCJsaWIvcm9vbVwiO1xuaW1wb3J0IHsgZ2FtZSB9IGZyb20gXCJzcmMvdmFuXCI7XG5pbXBvcnQgeyBzdGF0ZV9jb25maWcgfSBmcm9tIFwibGliL3Jvb21cIjtcbmltcG9ydCAqIGFzIGNvbmZpZyBmcm9tIFwiLi90ZXN0Lmpzb25cIjtcbmltcG9ydCB7dG9wX2Rvd259IGZyb20gXCJnYW1lL3Jvb21zL2Fic3RyYWN0L3RvcF9kb3duXCI7XG5pbXBvcnQgeyBQb2xsX01vdXNlIH0gZnJvbSBcImxpYi9jb250cm9sc1wiO1xuaW1wb3J0IHsgZyB9IGZyb20gXCJnYW1lL21haW5cIjtcbmxldCBjZmlnID0gY29uZmlnIGFzIHVua25vd24gYXMgc3RhdGVfY29uZmlnO1xuaW50ZXJmYWNlIHRlc3Rfc3RhdGUge1xuXG59XG5cbmV4cG9ydCBjbGFzcyB0ZXN0IGV4dGVuZHMgdG9wX2Rvd257XG4gIGJhY2tncm91bmRfdXJsID0gXCIuL3Nwcml0ZXMvRXJyb3IucG5nXCI7XG4gIHJlbmRlciA9IHRydWU7XG4gIHByb3hpbWl0eV9tYXA6cHJveGltaXR5X21hdHJpeCA9IG5ldyBwcm94aW1pdHlfbWF0cml4KDQwMDAsOSk7XG4gIGNvbnN0cnVjdG9yKGdhbWU6IGdhbWU8dW5rbm93bj4pIHtcbiAgICBzdXBlcihnYW1lLCBjZmlnKTtcbiAgfVxuICByZWdpc3RlckNvbnRyb2xzKCkge1xuICAgIHN1cGVyLnJlZ2lzdGVyQ29udHJvbHMoKTtcbiAgfVxuICByZWdpc3RlclBhcnRpY2xlcygpIHtcblxuICB9XG4gIHN0YXRlZihkZWx0YV90aW1lOiBudW1iZXIpIHtcbiAgICBzdXBlci5zdGF0ZWYoZGVsdGFfdGltZSk7XG4gIH1cblxufSIsImltcG9ydCB7IHJvb3RfcGF0aCwgcGF0aCB9IGZyb20gXCIuL2RlYnVnXCI7XG5pbXBvcnQgeyBERUJVRyB9IGZyb20gXCIuLi92YW5cIjtcblxuaW50ZXJmYWNlIHNvdW5kX3N0b3JhZ2Uge1xuICBbaW5kZXg6IHN0cmluZ106IEhUTUxBdWRpb0VsZW1lbnRcbn1cblxuZXhwb3J0IGNsYXNzIGF1ZGlvIHtcbiAgc291bmRzOiBzb3VuZF9zdG9yYWdlID0ge307XG4gIGFkZChuYW1lOiBzdHJpbmcsIHVybDogc3RyaW5nKSB7XG4gICAgbGV0IHAgPSB1cmw7XG4gICAgaWYgKERFQlVHKSB7XG4gICAgICBwID0gcGF0aC5qb2luKHJvb3RfcGF0aCwgdXJsKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2cocCk7XG4gICAgdGhpcy5zb3VuZHNbbmFtZV0gPSBuZXcgQXVkaW8ocCk7XG4gICAgY29uc29sZS5sb2codGhpcy5zb3VuZHNbbmFtZV0pO1xuICB9XG4gIGFzeW5jIGxvYWQoKSB7XG4gICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLnNvdW5kcyk7XG4gICAgbGV0IHByb21pc2VzID0ga2V5cy5tYXAoKGtleSkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgdGhpcy5zb3VuZHNba2V5XS5hZGRFdmVudExpc3RlbmVyKFwiY2FucGxheXRocm91Z2hcIiwgKGUpID0+IHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICB9KVxuICAgIHRyeSB7XG4gICAgICBsZXQgeCA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICAgIHJldHVybiAoeCk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICB9XG4gIH1cbiAgc3RvcChuYW1lOiBzdHJpbmcpIHtcbiAgICB0aGlzLnNvdW5kc1tuYW1lXS5wYXVzZSgpO1xuICAgIHRoaXMuc291bmRzW25hbWVdLmN1cnJlbnRUaW1lID0gMDtcbiAgfVxuICBjbGVhbnVwKCl7XG4gICAgZm9yKGxldCBrZXkgb2YgT2JqZWN0LmtleXModGhpcy5zb3VuZHMpKXtcbiAgICAgIHRoaXMuc3RvcChrZXkpO1xuICAgIH1cbiAgfVxuICBwYXVzZShuYW1lOiBzdHJpbmcpIHtcbiAgICB0aGlzLnNvdW5kc1tuYW1lXS5wYXVzZSgpO1xuICB9XG4gIGdldChuYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5zb3VuZHNbbmFtZV07XG4gIH1cbiAgcGxheShuYW1lOiBzdHJpbmcsIHZvbHVtZTogbnVtYmVyKSB7XG4gICAgbGV0IGEgPSB0aGlzLnNvdW5kc1tuYW1lXTtcbiAgICBjb25zb2xlLmxvZyhhLmR1cmF0aW9uKVxuICAgIGEucGF1c2UoKVxuICAgIGEuY3VycmVudFRpbWUgPSAwO1xuICAgIGEudm9sdW1lID0gdm9sdW1lO1xuICAgIGEucGxheSgpO1xuXG4gIH1cbn0iLCJpbXBvcnQgeyBvYmosIGdldElkIH0gZnJvbSBcIi4uL2xpYi9vYmplY3RcIjtcbmltcG9ydCB7IG9ial9zdGF0ZSwgVmVjdG9yIH0gZnJvbSBcIi4uL2xpYi9zdGF0ZVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIGNvbGxpc2lvbl9ib3gge1xuICB4OiBudW1iZXI7XG4gIHk6IG51bWJlcjtcbiAgd2lkdGg6IG51bWJlcjtcbiAgaGVpZ2h0OiBudW1iZXI7XG59XG5cbmVudW0gZGlyZWN0aW9uIHtcbiAgbGVmdCxcbiAgcmlnaHQsXG4gIHVwLFxuICBkb3duXG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHBvaW50Q29sbGlkZXNXaXRoQm94KHBvaW50OlZlY3Rvcixib3g6Y29sbGlzaW9uX2JveCl7XG4gIHJldHVybiBib3hDb2xsaWRlc1dpdGhCb3goe3g6cG9pbnQueCx5OnBvaW50Lnksd2lkdGg6MCxoZWlnaHQ6MH0sYm94KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBib3hDb2xsaWRlc1dpdGhCb3goYm94MTogY29sbGlzaW9uX2JveCwgYm94MjogY29sbGlzaW9uX2JveCkge1xuICBsZXQgY29sbGlkZXNfaG9ycml6b250YWxseSA9IGZhbHNlLCBjb2xsaWRlc192ZXJ0aWNhbGx5ID0gZmFsc2U7XG4gIGxldCBvYmplY3RfYm91bmRzID0ge1xuICAgIGxlZnQ6IGJveDEueCAtIGJveDEud2lkdGgvMixcbiAgICByaWdodDogYm94MS54ICsgYm94MS53aWR0aC8yLFxuICAgIHRvcDogYm94MS55ICsgYm94MS5oZWlnaHQvMixcbiAgICBib3R0b206IGJveDEueSAtIGJveDEuaGVpZ2h0LzJcbiAgfVxuXG4gIGxldCBvdGhlcl9vYmplY3RfYm91bmRzID0ge1xuICAgIGxlZnQ6IGJveDIueCAtIGJveDIud2lkdGgvMixcbiAgICByaWdodDogYm94Mi54ICsgYm94Mi53aWR0aC8yLFxuICAgIHRvcDogYm94Mi55ICsgYm94Mi5oZWlnaHQvMixcbiAgICBib3R0b206IGJveDIueSAtIGJveDIuaGVpZ2h0LzJcbiAgfVxuXG4gIC8vV2UgY2FuIGNvbXBhcmUgdGhlIHNpZGVzIG9mIHRoZSBib3hlcyB0byBzZWUgaWYgdGhleSBvdmVybGFwXG4gIC8vV2UgY2hlY2sgb25jZSBmb3IgaG9pem9udGFsIG92ZXJsYXAsIHRoZW4gdmVydGljYWwuXG4gIGlmICgob2JqZWN0X2JvdW5kcy5sZWZ0ID49IG90aGVyX29iamVjdF9ib3VuZHMubGVmdCAmJiBvYmplY3RfYm91bmRzLmxlZnQgPCBvdGhlcl9vYmplY3RfYm91bmRzLnJpZ2h0KSB8fCAob3RoZXJfb2JqZWN0X2JvdW5kcy5sZWZ0ID4gb2JqZWN0X2JvdW5kcy5sZWZ0ICYmIG90aGVyX29iamVjdF9ib3VuZHMubGVmdCA8IG9iamVjdF9ib3VuZHMucmlnaHQpKSB7XG4gICAgY29sbGlkZXNfaG9ycml6b250YWxseSA9IHRydWU7XG4gIH1cbiAgZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICgob2JqZWN0X2JvdW5kcy5ib3R0b20gPj0gb3RoZXJfb2JqZWN0X2JvdW5kcy5ib3R0b20gJiYgb2JqZWN0X2JvdW5kcy5ib3R0b20gPCBvdGhlcl9vYmplY3RfYm91bmRzLnRvcCkgfHwgKG90aGVyX29iamVjdF9ib3VuZHMuYm90dG9tID4gb2JqZWN0X2JvdW5kcy5ib3R0b20gJiYgb3RoZXJfb2JqZWN0X2JvdW5kcy5ib3R0b20gPCBvYmplY3RfYm91bmRzLnRvcCkpIHtcbiAgICBjb2xsaWRlc192ZXJ0aWNhbGx5ID0gdHJ1ZTtcbiAgfVxuICBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGNvbGxpZGVzX2hvcnJpem9udGFsbHkgJiYgY29sbGlkZXNfdmVydGljYWxseTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEVuY29tcGFzc2luZ0JveChvYmplY3RzOiBvYmpbXSk6IGNvbGxpc2lvbl9ib3gge1xuICBsZXQgZmlyc3Rfb2JqZWN0ID0gb2JqZWN0c1swXS5nZXRCb3VuZGluZ0JveCgpO1xuICBsZXQgbWF4X3kgPSBmaXJzdF9vYmplY3QudG9wX3JpZ2h0Lnk7XG4gIGxldCBtYXhfeCA9IGZpcnN0X29iamVjdC50b3BfcmlnaHQueDtcbiAgbGV0IG1pbl95ID0gZmlyc3Rfb2JqZWN0LmJvdHRvbV9sZWZ0Lnk7XG4gIGxldCBtaW5feCA9IGZpcnN0X29iamVjdC5ib3R0b21fbGVmdC54O1xuICBmb3IgKGxldCBhID0gMTsgYSA8IG9iamVjdHMubGVuZ3RoOyBhKyspIHtcbiAgICBsZXQgb2JqZWN0ID0gb2JqZWN0c1thXS5nZXRCb3VuZGluZ0JveCgpO1xuICAgIGlmIChvYmplY3QudG9wX3JpZ2h0LnkgPiBtYXhfeSlcbiAgICAgIG1heF95ID0gb2JqZWN0LnRvcF9yaWdodC55O1xuICAgIGlmIChvYmplY3QudG9wX3JpZ2h0LnggPiBtYXhfeClcbiAgICAgIG1heF94ID0gb2JqZWN0LnRvcF9yaWdodC54O1xuICAgIGlmIChvYmplY3QuYm90dG9tX2xlZnQueSA8IG1pbl95KVxuICAgICAgbWluX3kgPSBvYmplY3QuYm90dG9tX2xlZnQueTtcbiAgICBpZiAob2JqZWN0LmJvdHRvbV9sZWZ0LnggPCBtaW5feClcbiAgICAgIG1pbl94ID0gb2JqZWN0LmJvdHRvbV9sZWZ0Lng7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB4OiBtaW5feCArIChtYXhfeCAtIG1pbl94KSAvIDIsXG4gICAgeTogbWluX3kgKyAobWF4X3kgLSBtaW5feSkgLyAyLFxuICAgIGhlaWdodDogbWF4X3kgLSBtaW5feSxcbiAgICB3aWR0aDogbWF4X3ggLSBtaW5feFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja19hbGxfb2JqZWN0cyhjOiBjb2xsaXNpb25fYm94LCBvYmpzOiBvYmpbXSwgZXhlbXB0aW9uOiBzdHJpbmdbXSA9IFtdKTogb2JqW10ge1xuICByZXR1cm4gb2Jqcy5maWx0ZXIoKGEpID0+ICghZXhlbXB0aW9uLnNvbWUoKGIpID0+IGEudGFncy5oYXMoYikpICYmIGEuY29sbGlkZXNXaXRoQm94KGMpKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja19hbGxfY29sbGlzaW9ucyhjOiBjb2xsaXNpb25fYm94LCBvYmpzOiBvYmpbXSwgZXhlbXB0aW9uOiBzdHJpbmdbXSA9IFtdKTogQXJyYXk8b2JqPiB7XG4gIGxldCBtYXRjaGVkID0gW107XG4gIGZvciAobGV0IGEgb2Ygb2Jqcykge1xuICAgIGlmICghZXhlbXB0aW9uLnNvbWUoKGIpID0+IGEudGFncy5oYXMoYikpICYmIGEuY29sbGlzaW9uICYmIGEuY29sbGlkZXNXaXRoQm94KGMpKSB7XG4gICAgICBtYXRjaGVkLnB1c2goYSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBtYXRjaGVkXG59XG4vL0NoZWNrcyB1cCB0byB0aGUgZmlyc3QgY29sbGlzaW9uXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tfY29sbGlzaW9ucyhjOiBjb2xsaXNpb25fYm94LCBvYmpzOiBvYmpbXSwgZXhlbXB0aW9uOiBzdHJpbmcpIHtcbiAgZm9yIChsZXQgYSBvZiBvYmpzKSB7XG4gICAgaWYgKGEuaWQgIT09IGV4ZW1wdGlvbiAmJiBhLmNvbGxpc2lvbiAmJiBhLmNvbGxpZGVzV2l0aEJveChjKSkge1xuICAgICAgcmV0dXJuIGE7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiB2ZWxvY2l0eV9tYXgodmVsb2NpdHk6IG51bWJlciwgYm94OiBjb2xsaXNpb25fYm94LCBvYmpzOiBvYmpbXSwgZXhlbXB0aW9uOiBzdHJpbmcsIGRpcjogZGlyZWN0aW9uKSB7XG4gIGxldCBjb2xsaXNpb24gPSBjaGVja19jb2xsaXNpb25zKGJveCwgb2JqcywgZXhlbXB0aW9uKTtcbiAgaWYgKGNvbGxpc2lvbiA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHZlbG9jaXR5O1xuICB9XG4gIGVsc2Uge1xuICAgIGxldCBjb2xsaWRlciA9IGNvbGxpc2lvbjtcbiAgICBsZXQgb3JpZ2luID0gZ2V0SWQob2JqcywgZXhlbXB0aW9uKTtcbiAgICBsZXQgb3JpZ19zdCA9IG9yaWdpbi5zdGF0ZSBhcyBvYmpfc3RhdGU7XG4gICAgbGV0IGNvbGxpZGVyX3N0ID0gY29sbGlkZXIuc3RhdGUgYXMgb2JqX3N0YXRlO1xuICAgIGxldCBvcmlnX2NvbCA9IG9yaWdpbi5nZXRGdWxsQ29sbGlzaW9uQm94KCk7XG4gICAgbGV0IGNvbGxpZGVyX2NvbCA9IGNvbGxpZGVyLmdldEZ1bGxDb2xsaXNpb25Cb3goKTtcbiAgICBpZiAoZGlyID09IGRpcmVjdGlvbi5sZWZ0KSB7XG4gICAgICByZXR1cm4gKG9yaWdfY29sLnggLSBvcmlnX2NvbC53aWR0aCAvIDIpIC0gKGNvbGxpZGVyX2NvbC54ICsgY29sbGlkZXJfY29sLndpZHRoIC8gMik7XG4gICAgfVxuICAgIGVsc2UgaWYgKGRpciA9PSBkaXJlY3Rpb24ucmlnaHQpIHtcbiAgICAgIHJldHVybiAoY29sbGlkZXJfY29sLnggLSBjb2xsaWRlcl9jb2wud2lkdGggLyAyKSAtIChvcmlnX2NvbC54ICsgb3JpZ19jb2wud2lkdGggLyAyKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGlyID09IGRpcmVjdGlvbi5kb3duKSB7XG4gICAgICByZXR1cm4gKG9yaWdfY29sLnkgLSBvcmlnX2NvbC5oZWlnaHQgLyAyKSAtIChjb2xsaWRlcl9jb2wueSArIGNvbGxpZGVyX2NvbC5oZWlnaHQgLyAyKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGlyID09IGRpcmVjdGlvbi51cCkge1xuICAgICAgcmV0dXJuIChjb2xsaWRlcl9jb2wueSAtIGNvbGxpZGVyX2NvbC5oZWlnaHQgLyAyKSAtIChvcmlnX2NvbC55ICsgb3JpZ19jb2wuaGVpZ2h0IC8gMik7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2ZWxvY2l0eUNvbGxpc2lvbkNoZWNrKG9iamVjdDogb2JqLCBsaXN0OiBvYmpbXSkge1xuICBsaXN0ID0gWy4uLmxpc3RdO1xuICBsZXQgb2IgPSBvYmplY3Q7XG4gIGxldCBzdCA9IG9iamVjdC5zdGF0ZSBhcyBvYmpfc3RhdGU7XG4gIGxldCB4X3ZlbCA9IHN0LnZlbG9jaXR5Lng7XG4gIGxldCB5X3ZlbCA9IHN0LnZlbG9jaXR5Lnk7XG4gIGlmICh4X3ZlbCA9PSAwICYmIHlfdmVsID09IDApIHJldHVybjtcbiAgaWYgKCFvYi5jb2xsaXNpb24pIHtcbiAgICAoPG9ial9zdGF0ZT5vYi5zdGF0ZSkucG9zaXRpb24ueCArPSAoPG9ial9zdGF0ZT5vYi5zdGF0ZSkudmVsb2NpdHkueDtcbiAgICAoPG9ial9zdGF0ZT5vYi5zdGF0ZSkucG9zaXRpb24ueSArPSAoPG9ial9zdGF0ZT5vYi5zdGF0ZSkudmVsb2NpdHkueTtcbiAgICByZXR1cm47XG4gIH1cbiAgbGV0IGNvbF9ib3ggPSBvYi5nZXRGdWxsQ29sbGlzaW9uQm94KCk7XG4gIGlmICh4X3ZlbCA+IDApIHtcbiAgICBsZXQgYm94ID0ge1xuICAgICAgeDogY29sX2JveC54ICsgY29sX2JveC53aWR0aCAvIDIgKyB4X3ZlbCAvIDIsXG4gICAgICB5OiBjb2xfYm94LnksXG4gICAgICB3aWR0aDogeF92ZWwsXG4gICAgICBoZWlnaHQ6IGNvbF9ib3guaGVpZ2h0XG4gICAgfTtcbiAgICBsZXQgdmVsID0gdmVsb2NpdHlfbWF4KHN0LnZlbG9jaXR5LngsIGJveCwgbGlzdCwgb2IuaWQsIGRpcmVjdGlvbi5yaWdodCk7XG4gICAgaWYgKHZlbCA+IDApIHtcbiAgICAgIHN0LnBvc2l0aW9uLnggPSBzdC5wb3NpdGlvbi54ICsgdmVsXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgc3QudmVsb2NpdHkueCA9IDA7XG4gICAgfVxuICB9XG4gIGVsc2UgaWYgKHhfdmVsIDwgMCkge1xuICAgIGxldCBib3ggPSB7XG4gICAgICB4OiB4X3ZlbCAvIDIgKyBjb2xfYm94LnggLSBjb2xfYm94LndpZHRoIC8gMixcbiAgICAgIHk6IGNvbF9ib3gueSxcbiAgICAgIHdpZHRoOiAtMSAqIHhfdmVsLFxuICAgICAgaGVpZ2h0OiBjb2xfYm94LmhlaWdodFxuICAgIH1cbiAgICBsZXQgdmVsID0gdmVsb2NpdHlfbWF4KHN0LnZlbG9jaXR5LngsIGJveCwgbGlzdCwgb2IuaWQsIGRpcmVjdGlvbi5sZWZ0KTtcbiAgICBpZiAodmVsIDwgMCkge1xuICAgICAgc3QucG9zaXRpb24ueCA9IHN0LnBvc2l0aW9uLnggKyB2ZWxcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzdC52ZWxvY2l0eS54ID0gMDtcbiAgICB9XG4gIH1cbiAgaWYgKHlfdmVsID4gMCkge1xuICAgIGxldCBib3ggPSB7XG4gICAgICB4OiBjb2xfYm94LngsXG4gICAgICB5OiBjb2xfYm94LnkgKyBjb2xfYm94LmhlaWdodCAvIDIgKyB5X3ZlbCAvIDIsXG4gICAgICB3aWR0aDogY29sX2JveC53aWR0aCxcbiAgICAgIGhlaWdodDogeV92ZWxcbiAgICB9XG4gICAgbGV0IHZlbCA9IHZlbG9jaXR5X21heChzdC52ZWxvY2l0eS55LCBib3gsIGxpc3QsIG9iLmlkLCBkaXJlY3Rpb24udXApO1xuICAgIGlmICh2ZWwgPiAwKSB7XG4gICAgICBzdC5wb3NpdGlvbi55ID0gc3QucG9zaXRpb24ueSArIHZlbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzdC52ZWxvY2l0eS55ID0gMDtcbiAgICB9XG4gIH1cbiAgZWxzZSBpZiAoeV92ZWwgPCAwKSB7XG4gICAgbGV0IGJveCA9IHtcbiAgICAgIHg6IGNvbF9ib3gueCxcbiAgICAgIHk6IHlfdmVsIC8gMiArIGNvbF9ib3gueSAtIGNvbF9ib3guaGVpZ2h0IC8gMixcbiAgICAgIHdpZHRoOiBjb2xfYm94LndpZHRoLFxuICAgICAgaGVpZ2h0OiAtMSAqIHlfdmVsXG4gICAgfVxuICAgIGxldCB2ZWwgPSB2ZWxvY2l0eV9tYXgoc3QudmVsb2NpdHkueSwgYm94LCBsaXN0LCBvYi5pZCwgZGlyZWN0aW9uLmRvd24pO1xuICAgIGlmICh2ZWwgPCAwKSB7XG4gICAgICBzdC5wb3NpdGlvbi55ID0gc3QucG9zaXRpb24ueSArIHZlbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzdC52ZWxvY2l0eS55ID0gMDtcbiAgICB9XG4gIH1cbn0iLCJpbXBvcnQgeyBnIH0gZnJvbSBcIi4uL2dhbWUvbWFpblwiO1xuaW1wb3J0IHsgZ2FtZSwgUEFVU0VELCBERUJVRywgR2V0U2NyZWVuRGltZW5zaW9ucywgR2V0Vmlld3BvcnREaW1lbnNpb25zLCB2aWV3cG9ydCB9IGZyb20gXCIuLi92YW5cIjtcbmltcG9ydCB7IGNvbGxpc2lvbl9ib3ggfSBmcm9tIFwiLi9jb2xsaXNpb25cIjtcbmltcG9ydCB7IG9iaiB9IGZyb20gXCIuL29iamVjdFwiO1xuaW1wb3J0IHsgQ2FtZXJhIH0gZnJvbSBcIi4vcmVuZGVyXCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi9zdGF0ZVwiO1xuaW1wb3J0IHsgZGVidWdfc3RhdGUgfSBmcm9tIFwiLi9kZWJ1Z1wiO1xuXG5pbnRlcmZhY2UgbW91c2VQb3Mge1xuICB4OiBudW1iZXIsXG4gIHk6IG51bWJlcixcbiAgbGFzdDoge1xuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXJcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIGNvbnRyb2xfZnVuYyB7XG4gIChhPzogbnVtYmVyLCBiPzogbnVtYmVyKTogdm9pZFxufVxuXG5pbnRlcmZhY2UgbW91c2VCaW5kcyB7XG4gIFtrZXk6IHN0cmluZ106IEFycmF5PFtjb250cm9sX2Z1bmMsIG9ial0+XG59XG5cbmludGVyZmFjZSBrZXlCaW5kcyB7XG4gIFtrZXk6IHN0cmluZ106IEFycmF5PGNvbnRyb2xfZnVuYz5cbn1cblxuZXhwb3J0IGVudW0gYnR5cGUge1xuICBtb3VzZSxcbiAga2V5Ym9hcmQsXG4gIGdhbWVwYWRcbn1cblxuaW50ZXJmYWNlIGJpbmQge1xuICBrZXk6IHN0cmluZyxcbiAgdHlwZTogYnR5cGUsXG4gIGlkOiBudW1iZXIsXG4gIGZ1bmN0aW9uOiBjb250cm9sX2Z1bmMsXG4gIGV4ZWN1dGU6IGV4ZWNfdHlwZSxcbiAgcmVwZWF0X3RpbWVyPzogcmVwZWF0X2JpbmQsXG4gIG9iaj86IG9iaixcbiAgZXhlY3V0ZWQ/OiBib29sZWFuLFxuICBpbnRlcnZhbD86IG51bWJlcixcbiAgY2FtZXJhPzogQ2FtZXJhLFxuICBkZWJ1ZzogYm9vbGVhblxufVxuXG5pbnRlcmZhY2UgcmVwZWF0X2JpbmQge1xuICBiaW5kOiBiaW5kLFxuICB0aW1lcjogbnVtYmVyLFxuICBpbnRlcnZhbDogbnVtYmVyLFxuICBhY3RpdmU6IGJvb2xlYW5cbn1cblxuZXhwb3J0IGVudW0gZXhlY190eXBlIHtcbiAgb25jZSxcbiAgcmVwZWF0XG59XG5cbmxldCBpZCA9IDA7XG5cbmxldCB4ID0gMDtcbmxldCB5ID0gMDtcbmxldCBsYXN0X3ggPSAwO1xubGV0IGxhc3RfeSA9IDA7XG5sZXQgYmluZHM6IGtleUJpbmRzID0ge307XG5leHBvcnQgbGV0IGRlYnVnX2JpbmRzOiBiaW5kW10gPSBbXTtcbmxldCBtb3VzZUJpbmRzOiBtb3VzZUJpbmRzID0ge307XG5sZXQgYmluZF9jb3VudCA9IDA7XG5cbmxldCBhbGxfYmluZHM6IEFycmF5PGJpbmQ+ID0gW11cblxubGV0IHJlcGVhdF9iaW5kczogQXJyYXk8cmVwZWF0X2JpbmQ+ID0gW107XG5cbmxldCB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhcmdldFwiKTtcbi8qXG5leHBvcnQgZnVuY3Rpb24gaW5pdF9jbGlja19oYW5kbGVyKGdhbWU6Z2FtZTx1bmtub3duPil7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoZSk9PntcbiAgICBcbiAgICBsZXQgbW91c2UgPSBQb2xsX01vdXNlKGdhbWUuc3RhdGUuY2FtZXJhc1swXSk7XG4gICAgaWYoIW1vdXNlKXtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBsZXQgYm94OmNvbGxpc2lvbl9ib3ggPSB7XG4gICAgICB4Om1vdXNlLngsXG4gICAgICB5Om1vdXNlLnksXG4gICAgICBoZWlnaHQ6MSxcbiAgICAgIHdpZHRoOjFcbiAgICB9O1xuICAgIFxuICBsZXQgZDpiaW5kW107XG4gIGlmKERFQlVHKXtcbiAgICBpZihkZWJ1Z19zdGF0ZS5sYXN0X2NsaWNrZWQgJiYgZGVidWdfc3RhdGUubGFzdF9jbGlja2VkLmlkID09IFwiZGVidWdfdGFyZ2V0XCIpe1xuICAgICAgZCA9IFsuLi5kZWJ1Z19iaW5kc107XG4gICAgfVxuICAgIGVsc2UgaWYoIVBBVVNFRCAmJiBkZWJ1Z19zdGF0ZS5sYXN0X2NsaWNrZWQgJiYgZGVidWdfc3RhdGUubGFzdF9jbGlja2VkLmlkID09IFwidGFyZ2V0XCIpe1xuICAgICAgZD0gWy4uLmFsbF9iaW5kc11cbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGQgPSBbXTtcbiAgICB9XG4gIH1cbiAgZWxzZXtcbiAgICBkID0gWy4uLmFsbF9iaW5kc107XG4gIH1cbiAgICBmb3IobGV0IGEgPSAwO2EgPCBkLmxlbmd0aDthKyspe1xuICAgICAgbGV0IHNlbGVjdGVkID0gZFthXTtcbiAgICAgIGlmKHNlbGVjdGVkLnR5cGUgPT09IGJ0eXBlLm1vdXNlICYmIHNlbGVjdGVkLmtleSA9PT0gXCJtb3VzZTFcIiAmJiBzZWxlY3RlZC5leGVjdXRlID09IGV4ZWNfdHlwZS5vbmNlKXtcbiAgICAgICAgaWYoc2VsZWN0ZWQub2JqICE9PSB1bmRlZmluZWQpe1xuICAgICAgICAgIGlmKHNlbGVjdGVkLm9iai5jb2xsaWRlc1dpdGhCb3goYm94KSl7XG4gICAgICAgICAgICBzZWxlY3RlZC5mdW5jdGlvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgIHNlbGVjdGVkLmZ1bmN0aW9uKCk7ICAgICAgICBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gIFxuICB9KVxufVxuKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhpbl9DYW52YXMoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICBsZXQgd3JhdGlvID0gcGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjYW52YXMpLndpZHRoKSAvIEdldFZpZXdwb3J0RGltZW5zaW9ucygpLndpZHRoO1xuICBsZXQgdnJhdGlvID0gcGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjYW52YXMpLmhlaWdodCkgLyBHZXRWaWV3cG9ydERpbWVuc2lvbnMoKS5oZWlnaHQ7XG4gIGxldCBib3VuZHMgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGlmICh4ID4gYm91bmRzLmxlZnQgJiYgeCA8IGJvdW5kcy5yaWdodCAmJiB5IDwgYm91bmRzLmJvdHRvbSAmJiB5ID4gYm91bmRzLnRvcCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxubGV0IGJpbmRpbmdfbWFwOiB7XG4gIFtpbmRleDogc3RyaW5nXTogYmluZFtdXG59ID0ge307XG5cbmxldCBwcmVzc0JpbmQgPSAoa2V5OiBzdHJpbmcsaHVkX2xheWVyID0gZmFsc2UpID0+IHtcbiAgbGV0IG9uX25hbWVzO1xuICBsZXQgb2ZmX25hbWVzO1xuICBsZXQgYmFzZTtcbiAgbGV0IHNlbGVjdGVkX2JpbmRfbWFwO1xuICBpZiAoa2V5LnNsaWNlKC00KSA9PT0gXCJkb3duXCIpIHtcbiAgICBiYXNlID0ga2V5LnN1YnN0cmluZygwLCBrZXkubGVuZ3RoIC0gNCk7XG4gICAgb25fbmFtZXMgPSBbYmFzZSwga2V5XTtcbiAgICBvZmZfbmFtZXMgPSBbYCR7YmFzZX11cGBdO1xuICB9XG4gIGVsc2UgaWYgKGtleS5zbGljZSgtMikgPT09IFwidXBcIikge1xuICAgIGJhc2UgPSBrZXkuc3Vic3RyaW5nKDAsIGtleS5sZW5ndGggLSAyKTtcbiAgICBvbl9uYW1lcyA9IFtrZXldO1xuICAgIG9mZl9uYW1lcyA9IFtgJHtiYXNlfWRvd25gLCBiYXNlXTtcbiAgfVxuICBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gYWN0aXZhdGUgaW52YWxpZCBiaW5kLlwiKTtcbiAgfVxuICBjb25zdCBjbGlja2VkX29uID0gKHRhcmdldDpzdHJpbmcpID0+IChkZWJ1Z19zdGF0ZS5sYXN0X2NsaWNrZWQgJiYgZGVidWdfc3RhdGUubGFzdF9jbGlja2VkLmlkID09IHRhcmdldClcbiAgY29uc3QgdmFsaWRfbW91c2VfY2xpY2sgPSAoYmluZDpiaW5kLGluZGV4Om51bWJlcikgPT4ge1xuICAgIHJldHVybiBiaW5kLnR5cGUgIT0gYnR5cGUubW91c2UgfHwgKHdpdGhpbl9DYW52YXMoZy5zdGF0ZS5jYW52YXNlc1tpbmRleF0pICYmIChiaW5kLm9iaiA9PSB1bmRlZmluZWQgfHwgKGJpbmQub2JqICYmIGJpbmQub2JqLmluZm8ub25faHVkX2xheWVyID09IGh1ZF9sYXllcikpKVxuICB9O1xuICBmb3IgKGxldCBrZXluYW1lIG9mIG9uX25hbWVzKSB7XG4gICAgaWYgKGtleW5hbWUgPT0gYmFzZSkge1xuICAgICAgaGVsZF9rZXlzW2tleW5hbWVdID0gdHJ1ZTtcbiAgICB9XG4gICAgbGV0IHNlbGVjdGVkX2JpbmRzID0gYmluZGluZ19tYXBba2V5bmFtZV07XG4gICAgaWYgKHNlbGVjdGVkX2JpbmRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGZvciAobGV0IGJpbmQgb2Ygc2VsZWN0ZWRfYmluZHMpIHtcbiAgICAgICAgaWYoXG4gICAgICAgICAgKERFQlVHICYmIGJpbmQuZGVidWcgJiYgY2xpY2tlZF9vbihcImRlYnVnX3RhcmdldFwiKSAmJiB2YWxpZF9tb3VzZV9jbGljayhiaW5kLDEpKVxuICAgICAgICAgIHx8XG4gICAgICAgICAgKERFQlVHICYmICghUEFVU0VEICYmIGNsaWNrZWRfb24oXCJ0YXJnZXRcIikgJiYgdmFsaWRfbW91c2VfY2xpY2soYmluZCwwKSkpXG4gICAgICAgICAgfHxcbiAgICAgICAgICAhREVCVUcgJiYgdmFsaWRfbW91c2VfY2xpY2soYmluZCwwKVxuICAgICAgICApe1xuICAgICAgICAgIGJpbmQuZXhlY3V0ZWQgPSB0cnVlO1xuICAgICAgICAgIGlmIChiaW5kLmV4ZWN1dGUgPT0gZXhlY190eXBlLnJlcGVhdCkge1xuICAgICAgICAgICAgYmluZC5yZXBlYXRfdGltZXIuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBiaW5kLmZ1bmN0aW9uKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGZvciAobGV0IGtleW5hbWUgb2Ygb2ZmX25hbWVzKSB7XG4gICAgaWYgKGtleW5hbWUgPT0gYmFzZSkge1xuICAgICAgaGVsZF9rZXlzW2tleW5hbWVdID0gZmFsc2U7XG4gICAgfVxuICAgIGxldCBzZWxlY3RlZF9iaW5kcyA9IGJpbmRpbmdfbWFwW2tleW5hbWVdO1xuICAgIGlmIChzZWxlY3RlZF9iaW5kcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBmb3IgKGxldCBiaW5kIG9mIHNlbGVjdGVkX2JpbmRzKSB7XG4gICAgICAgIGJpbmQuZXhlY3V0ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKGJpbmQuZXhlY3V0ZSA9PSBleGVjX3R5cGUucmVwZWF0KSB7XG4gICAgICAgICAgYmluZC5yZXBlYXRfdGltZXIuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIGZvciAobGV0IHJlcGVhdF9iaW5kIG9mIHJlcGVhdF9iaW5kcykge1xuICAgIGxldCBiaW5kID0gcmVwZWF0X2JpbmQuYmluZDtcbiAgICBpZiAob25fbmFtZXMuaW5jbHVkZXMocmVwZWF0X2JpbmQuYmluZC5rZXkpKSB7XG4gICAgICBpZihcbiAgICAgICAgKERFQlVHICYmIGJpbmQuZGVidWcgJiYgY2xpY2tlZF9vbihcImRlYnVnX3RhcmdldFwiKSAmJiB2YWxpZF9tb3VzZV9jbGljayhiaW5kLDEpKVxuICAgICAgICB8fFxuICAgICAgICAoREVCVUcgJiYgKCFQQVVTRUQgJiYgY2xpY2tlZF9vbihcInRhcmdldFwiKSAmJiB2YWxpZF9tb3VzZV9jbGljayhiaW5kLDApKSlcbiAgICAgICAgfHxcbiAgICAgICAgIURFQlVHICYmIHZhbGlkX21vdXNlX2NsaWNrKGJpbmQsMClcbiAgICAgICl7XG4gICAgICAgIHJlcGVhdF9iaW5kLmFjdGl2ZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG9mZl9uYW1lcy5pbmNsdWRlcyhyZXBlYXRfYmluZC5iaW5kLmtleSkpIHtcbiAgICAgIHJlcGVhdF9iaW5kLmFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxufVxuXG5cbmxldCB4Ym94X2tleSA9IFtcIkFcIiwgXCJCXCIsIFwiWFwiLCBcIllcIiwgXCJMQlwiLCBcIlJCXCIsIFwiTFRcIiwgXCJSVFwiLCBcIkJhY2tcIiwgXCJTZWxlY3RcIiwgXCJUaHVtYkxlZnREb3duXCIsIFwiVGh1bWJSaWdodERvd25cIiwgXCJQYWRVcFwiLCBcIlBhZERvd25cIiwgXCJQYWRMZWZ0XCIsIFwiUGFkUmlnaHRcIiwgXCJTdGFydFwiXTtcbmxldCB4Ym94X2tleXNfc3RhdGU6IEFycmF5PHtcbiAga2V5OiBzdHJpbmcsXG4gIGxhc3Rfc3RhdGU6IG51bWJlclxufT4gPSBbXVxueGJveF9rZXkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gIHhib3hfa2V5c19zdGF0ZS5wdXNoKHtcbiAgICBrZXksXG4gICAgbGFzdF9zdGF0ZTogMFxuICB9KVxufSlcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVHYW1lcGFkKGdhbWVwYWQ6IEdhbWVwYWQpIHtcbiAgaWYoYmluZGluZ19tYXBbXCJHYW1lcGFkTGVmdFRodW1iXCJdICE9IHVuZGVmaW5lZCl7XG4gICAgZm9yKGxldCBiaW5kIG9mIGJpbmRpbmdfbWFwW1wiR2FtZXBhZExlZnRUaHVtYlwiXSl7XG4gICAgICBiaW5kLmZ1bmN0aW9uKGdhbWVwYWQuYXhlc1swXSwgZ2FtZXBhZC5heGVzWzFdICogLTEpXG4gICAgfVxuICB9XG4gIGlmKGJpbmRpbmdfbWFwW1wiR2FtZXBhZFJpZ2h0VGh1bWJcIl0gIT0gdW5kZWZpbmVkKXtcbiAgICBmb3IobGV0IGJpbmQgb2YgYmluZGluZ19tYXBbXCJHYW1lcGFkUmlnaHRUaHVtYlwiXSl7XG4gICAgICBiaW5kLmZ1bmN0aW9uKGdhbWVwYWQuYXhlc1syXSwgZ2FtZXBhZC5heGVzWzNdICogLTEpXG4gICAgfVxuICB9XG4gIGZvciAobGV0IFtpLCBidXR0b25dIG9mIGdhbWVwYWQuYnV0dG9ucy5lbnRyaWVzKCkpIHtcbiAgICBsZXQgYnV0dG9uX2VudHJ5ID0geGJveF9rZXlzX3N0YXRlW2ldO1xuICAgIGlmIChidXR0b24udmFsdWUgPiAwICYmIGJ1dHRvbl9lbnRyeS5sYXN0X3N0YXRlID09IDApIHtcbiAgICAgIC8vQnV0dG9uIERvd25cbiAgICAgIHByZXNzQmluZChgR2FtZXBhZCR7YnV0dG9uX2VudHJ5LmtleX1kb3duYCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGJ1dHRvbi52YWx1ZSA9PSAwICYmIHhib3hfa2V5c19zdGF0ZVtpXS5sYXN0X3N0YXRlID4gMCkge1xuICAgICAgcHJlc3NCaW5kKGBHYW1lcGFkJHtidXR0b25fZW50cnkua2V5fXVwYCk7XG4gICAgfVxuICAgIGJ1dHRvbl9lbnRyeS5sYXN0X3N0YXRlID0gYnV0dG9uLnZhbHVlO1xuICB9XG59XG5cbmxldCB3YXNfdmFsaWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGUpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBsZXQgaHVkX2NsaWNrZWQgPSBmYWxzZTtcbiAgZm9yKGxldCBjYW1lcmEgb2YgZy5nZXRSb29tKCkuY2FtZXJhcyl7XG4gICAgbGV0IG1vdXNlID0gUG9sbF9Nb3VzZShjYW1lcmEsdHJ1ZSk7XG4gICAgaWYobW91c2UgJiYgY2FtZXJhLmh1ZCl7XG4gICAgICBmb3IobGV0IG9iaiBvZiBjYW1lcmEuaHVkLmdyYXBoaWNfZWxlbWVudHMuZmlsdGVyKChvYmopPT5vYmouaHVkX2NsaWNrYWJsZSkpe1xuICAgICAgICBpZihvYmouY29sbGlkZXNXaXRoQm94KHt4Om1vdXNlLngseTptb3VzZS55LHdpZHRoOjAsaGVpZ2h0OjB9KSl7XG4gICAgICAgICAgcHJlc3NCaW5kKFwibW91c2VcIiArIGUuYnV0dG9uICsgXCJkb3duXCIsdHJ1ZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHByZXNzQmluZChcIm1vdXNlXCIgKyBlLmJ1dHRvbiArIFwiZG93blwiKTtcbn0pXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIHByZXNzQmluZChgbW91c2Uke2UuYnV0dG9ufXVwYClcbn0pXG5cbmludGVyZmFjZSBoZWxkX2tleXMge1xuICBbaW5kZXg6IHN0cmluZ106IGJvb2xlYW5cbn1cblxuZXhwb3J0IGxldCBoZWxkX2tleXM6IGhlbGRfa2V5cyA9IHt9O1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIChlKSA9PiB7XG4gIGxldCBjb2RlOiBzdHJpbmc7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgaWYgKGUuZGVsdGFZIDwgMCkge1xuICAgIGNvZGUgPSBcInNjcm9sbHVwXCI7XG4gIH1cbiAgZWxzZSBpZiAoZS5kZWx0YVkgPiAwKSB7XG4gICAgY29kZSA9IFwic2Nyb2xsZG93blwiO1xuICB9XG4gIHByZXNzQmluZChjb2RlKTtcbn0pXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuXG4gIGlmIChlLmNvZGUgPT0gXCJUYWJcIikge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfVxuICBwcmVzc0JpbmQoYCR7ZS5jb2RlfWRvd25gKTtcblxufSlcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgKGUpID0+IHtcbiAgcHJlc3NCaW5kKGAke2UuY29kZX11cGApO1xufSlcbmxldCB0cmFja2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXJnZXRcIik7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCAoZSkgPT4ge1xuICB2YXIgcmVjdCA9IChlLnRhcmdldCBhcyBIVE1MQ2FudmFzRWxlbWVudCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIC8vY29uc29sZS5sb2coZS50YXJnZXQpXG4gIGxhc3RfeCA9IHg7XG4gIGxhc3RfeSA9IHk7XG4gIHggPSBlLmNsaWVudFg7IC8veCBwb3NpdGlvbiB3aXRoaW4gdGhlIGVsZW1lbnQuXG4gIHkgPSBlLmNsaWVudFk7ICAvL3kgcG9zaXRpb24gd2l0aGluIHRoZSBlbGVtZW50LlxuXG59KVxuXG5leHBvcnQgZnVuY3Rpb24gUG9sbF9Nb3VzZShjYW1lcmE6IENhbWVyYSwgaHVkX2xheWVyOmJvb2xlYW4gPSBmYWxzZSwgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCA9IGcuc3RhdGUuY2FudmFzZXNbMF0pOiBWZWN0b3Ige1xuICBsZXQgaGVpZ2h0ID0gR2V0Vmlld3BvcnREaW1lbnNpb25zKCkuaGVpZ2h0O1xuICBsZXQgd3JhdGlvID0gcGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjYW52YXMpLndpZHRoKSAvIEdldFZpZXdwb3J0RGltZW5zaW9ucygpLndpZHRoO1xuICBsZXQgdnJhdGlvID0gcGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjYW52YXMpLmhlaWdodCkgLyBHZXRWaWV3cG9ydERpbWVuc2lvbnMoKS5oZWlnaHQ7XG4gIGxldCBib3VuZHMgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGlmICh4ID4gYm91bmRzLmxlZnQgJiYgeCA8IGJvdW5kcy5yaWdodCAmJiB5IDwgYm91bmRzLmJvdHRvbSAmJiB5ID4gYm91bmRzLnRvcCkge1xuICAgIFxuICAgIGlmKGh1ZF9sYXllcil7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB4OiAoeCAtIGJvdW5kcy5sZWZ0KSAvIHdyYXRpbyxcbiAgICAgICAgeTogKChoZWlnaHQgLSAoeSAtIGJvdW5kcy50b3ApIC8gdnJhdGlvKSAtIGNhbWVyYS5zdGF0ZS52aWV3cG9ydC55KVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gKHtcbiAgICAgIHg6ICgoeCAtIGJvdW5kcy5sZWZ0IC0gY2FtZXJhLnN0YXRlLnZpZXdwb3J0LngpIC8gd3JhdGlvIC8gY2FtZXJhLnN0YXRlLnNjYWxpbmcgKyBjYW1lcmEuc3RhdGUucG9zaXRpb24ueCAtIGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLndpZHRoIC8gY2FtZXJhLnN0YXRlLnNjYWxpbmcgLyAyKSxcbiAgICAgIHk6ICgoaGVpZ2h0IC0gKHkgLSBib3VuZHMudG9wKSAvIHZyYXRpbykgLyBjYW1lcmEuc3RhdGUuc2NhbGluZyArIGNhbWVyYS5zdGF0ZS5wb3NpdGlvbi55IC0gY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMuaGVpZ2h0IC8gY2FtZXJhLnN0YXRlLnNjYWxpbmcgLyAyIC0gY2FtZXJhLnN0YXRlLnZpZXdwb3J0LnkpXG4gICAgfSlcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRXhlY3V0ZVJlcGVhdEJpbmRzKGI6IG51bWJlcikge1xuICBmb3IgKGxldCBhIG9mIHJlcGVhdF9iaW5kcykge1xuICAgIGlmIChhLmJpbmQuZXhlY3V0ZSA9PT0gZXhlY190eXBlLnJlcGVhdCAmJiBhLnRpbWVyID09IDAgJiYgYS5hY3RpdmUpIHtcbiAgICAgIGEuYmluZC5mdW5jdGlvbigpO1xuICAgIH1cbiAgICBpZiAoYS5hY3RpdmUgfHwgKCFhLmFjdGl2ZSAmJiBhLnRpbWVyICE9IDApKVxuICAgICAgYS50aW1lciArPSBiO1xuICAgIGlmIChhLnRpbWVyID4gYS5pbnRlcnZhbCkge1xuICAgICAgYS50aW1lciA9IDA7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBVbmJpbmQoYmluZF9pZDogbnVtYmVyKSB7XG4gIGZvcihsZXQga2V5IG9mIE9iamVjdC5rZXlzKGJpbmRpbmdfbWFwKSl7XG4gICAgZm9yKGxldCBhID0gMDsgYSA8IGJpbmRpbmdfbWFwW2tleV0ubGVuZ3RoOyBhKyspe1xuICAgICAgaWYoYmluZGluZ19tYXBba2V5XVthXS5pZCA9PSBiaW5kX2lkKXtcbiAgICAgICAgYmluZGluZ19tYXBba2V5XS5zcGxpY2UoYSwxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGZvciAobGV0IGEgPSAwOyBhIDwgcmVwZWF0X2JpbmRzLmxlbmd0aDsgYSsrKSB7XG4gICAgaWYgKHJlcGVhdF9iaW5kc1thXS5iaW5kLmlkID09IGJpbmRfaWQpIHtcbiAgICAgIHJlcGVhdF9iaW5kcy5zcGxpY2UoYSwgMSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEJpbmQoa2V5bmFtZTogc3RyaW5nLCBmdW5jOiBjb250cm9sX2Z1bmMsIHR5cGU6IGV4ZWNfdHlwZSwgaW50ZXJ2YWw6IG51bWJlciwgZGVidWc6IGJvb2xlYW4sIG9iaj86IG9iaik6IG51bWJlciB7XG4gIGxldCBiaW5kX3R5cGUgPSBidHlwZS5rZXlib2FyZDtcbiAgaWYgKGtleW5hbWUuc2xpY2UoMCwgNSkgPT09IFwibW91c2VcIiB8fCBrZXluYW1lLnNsaWNlKDAsIDYpID09PSBcInNjcm9sbFwiKSB7XG4gICAgYmluZF90eXBlID0gYnR5cGUubW91c2VcbiAgfVxuICBlbHNlIGlmIChrZXluYW1lLnNsaWNlKDAsIDcpID09IFwiR2FtZXBhZFwiKSB7XG4gICAgYmluZF90eXBlID0gYnR5cGUuZ2FtZXBhZDtcbiAgfVxuICBsZXQgYjogYmluZCA9IHtcbiAgICBrZXk6IGtleW5hbWUsXG4gICAgdHlwZTogYmluZF90eXBlLFxuICAgIGRlYnVnLFxuICAgIGlkLFxuICAgIGZ1bmN0aW9uOiBmdW5jLFxuICAgIGV4ZWN1dGU6IHR5cGUsXG4gICAgZXhlY3V0ZWQ6IGZhbHNlLFxuICAgIGludGVydmFsLFxuICAgIG9iaiBcbiAgfVxuICBpZiAodHlwZSA9PSBleGVjX3R5cGUucmVwZWF0KSB7XG4gICAgYi5yZXBlYXRfdGltZXIgPSB7XG4gICAgICBiaW5kOiBiLFxuICAgICAgdGltZXI6IDAsXG4gICAgICBpbnRlcnZhbCxcbiAgICAgIGFjdGl2ZTogZmFsc2VcbiAgICB9XG4gICAgcmVwZWF0X2JpbmRzLnB1c2goYi5yZXBlYXRfdGltZXIpO1xuICB9XG4gIGlmIChiaW5kaW5nX21hcFtrZXluYW1lXSA9PSB1bmRlZmluZWQpIHtcbiAgICBiaW5kaW5nX21hcFtrZXluYW1lXSA9IFtdO1xuICAgIFxuICB9XG4gIGJpbmRpbmdfbWFwW2tleW5hbWVdLnB1c2goYik7XG4gIGlkKys7XG4gIHJldHVybiBpZCAtIDE7XG59IiwiaW1wb3J0IHsgREVCVUcsIFBBVVNFRCwgc2V0UGF1c2VkLCB2aWV3cG9ydCB9IGZyb20gXCIuLi92YW5cIjtcbmV4cG9ydCBsZXQgcGF0aDphbnk7IFxubGV0IGZzOmFueTtcbmxldCBpcGNSZW5kZXJlcjphbnk7XG5pbXBvcnQgeyBwcmVmYWJzIH0gZnJvbSBcIi4uL2dhbWUvb2JqZWN0cy9wcmVmYWJzXCI7XG5leHBvcnQgbGV0IHByb2plY3RfcGF0aCA9IFwiXCI7XG5leHBvcnQgbGV0IHJvb3RfcGF0aCA9IFwiXCI7XG5leHBvcnQgbGV0IHJlbmRlcmVyX3BhdGggPSBcIi4vcmVuZGVyZXIuanNcIjtcbmlmKERFQlVHKXtcbiBwYXRoID0gIHdpbmRvdy5yZXF1aXJlKFwicGF0aFwiKTtcbiBmcyA9IHdpbmRvdy5yZXF1aXJlKFwiZnNcIik7XG4gaXBjUmVuZGVyZXIgID0gd2luZG93LnJlcXVpcmUoXCJlbGVjdHJvblwiKS5pcGNSZW5kZXJlcjtcbiBwcm9qZWN0X3BhdGggPSBpcGNSZW5kZXJlci5zZW5kU3luYygncGF0aC1yZXF1ZXN0JywgJ3BpbmcnKVswXVxuIHJvb3RfcGF0aCA9IHBhdGguam9pbihwcm9qZWN0X3BhdGgsXCIuLlwiKVxuIHJlbmRlcmVyX3BhdGggPSBwYXRoLmpvaW4ocm9vdF9wYXRoLFwiLi4vLi4vdGFyZ2V0L3JlbmRlcmVyLmpzXCIpO1xuXG59XG5pbXBvcnQgeyBvYmosIHBhcmFtcyB9IGZyb20gXCIuL29iamVjdFwiO1xuaW1wb3J0IHsgb2JqX3N0YXRlIH0gZnJvbSBcIi4vc3RhdGVcIjtcbmltcG9ydCB7b2JqZWN0X3RlbXBsYXRlfSBmcm9tIFwiLi90ZW1wbGF0ZXMvb2JqZWN0X3RlbXBsYXRlXCI7XG5pbXBvcnQge3Jvb21fdGVtcGxhdGV9IGZyb20gXCIuL3RlbXBsYXRlcy9yb29tX3RlbXBsYXRlXCI7XG5pbXBvcnQgeyBnIH0gZnJvbSBcIi4uL2dhbWUvbWFpblwiO1xuaW1wb3J0IHsgcm9vbXMgYXMgcm9vbV9saXN0IH0gZnJvbSBcIi4uL2dhbWUvcm9vbXMvcm9vbXNcIjtcbmltcG9ydCB7IEJpbmQsIGJ0eXBlLCBQb2xsX01vdXNlLCBleGVjX3R5cGUsIGhlbGRfa2V5cywgZGVidWdfYmluZHMgfSBmcm9tIFwiLi4vbGliL2NvbnRyb2xzXCI7XG5pbXBvcnQgeyBIVUQsIFRleHQgfSBmcm9tIFwiLi4vbGliL2h1ZFwiO1xuaW1wb3J0IHsgQ2FtZXJhIH0gZnJvbSBcIi4uL2xpYi9yZW5kZXJcIjtcbmltcG9ydCB7IFZlY3RvciwgZGltZW5zaW9uc30gZnJvbSBcIi4uL2xpYi9zdGF0ZVwiO1xuXG5leHBvcnQgY2xhc3MgRGVidWdfaHVkIGV4dGVuZHMgSFVEIHtcbiAgc2V0VGV4dEVsZW1lbnRzKCkge1xuICAgIHJldHVybiBbXG4gICAgICBuZXcgVGV4dCh7XG4gICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgeDogMTAsXG4gICAgICAgICAgeTogdmlld3BvcnQuaGVpZ2h0IC0gMjRcbiAgICAgICAgfSxcbiAgICAgICAgc2l6ZTogMjIsXG4gICAgICAgIGZvbnQ6IFwiQWxhdGFcIixcbiAgICAgICAgY29sb3I6IFwid2hpdGVcIixcbiAgICAgICAgYWxpZ246IFwibGVmdFwiLFxuICAgICAgICBzY2FsaW5nOiAxXG4gICAgICB9LCAoKSA9PiBkZWJ1Z19zdGF0ZS5yZW5kZXJfZGVsdGFfdGltZSA+IDAgPyBNYXRoLnJvdW5kKDEwMDAvZGVidWdfc3RhdGUucmVuZGVyX2RlbHRhX3RpbWUpICsgXCJcIiA6IFwiXCIpLFxuICAgICAgbmV3IFRleHQoe1xuICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgeDogMTAsXG4gICAgICAgIHk6IDEwXG4gICAgICB9LFxuICAgICAgc2l6ZTogMjIsXG4gICAgICBmb250OiBcIkFsYXRhXCIsXG4gICAgICBjb2xvcjogXCJ3aGl0ZVwiLFxuICAgICAgYWxpZ246IFwibGVmdFwiLFxuICAgICAgc2NhbGluZzogMVxuICAgIH0sICgpID0+IGBYOiR7ZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnBvc2l0aW9uLngudG9GaXhlZCgwKX1gKSxcbiAgICBuZXcgVGV4dCh7XG4gICAgICBwb3NpdGlvbjoge1xuICAgICAgICB4OiAxMCxcbiAgICAgICAgeTogMzJcbiAgICAgIH0sXG4gICAgICBzaXplOiAyMixcbiAgICAgIGZvbnQ6IFwiQWxhdGFcIixcbiAgICAgIGNvbG9yOiBcIndoaXRlXCIsXG4gICAgICBhbGlnbjogXCJsZWZ0XCIsXG4gICAgICBzY2FsaW5nOiAxXG4gICAgfSwgKCkgPT4gYFk6JHtkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUucG9zaXRpb24ueS50b0ZpeGVkKDApfWApLFxuICAgIG5ldyBUZXh0KHtcbiAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgIHg6IHZpZXdwb3J0LndpZHRoIC0gMTAsXG4gICAgICAgIHk6IDMyXG4gICAgICB9LFxuICAgICAgc2l6ZTogMjIsXG4gICAgICBmb250OiBcIkFsYXRhXCIsXG4gICAgICBjb2xvcjogXCJ3aGl0ZVwiLFxuICAgICAgYWxpZ246IFwicmlnaHRcIixcbiAgICAgIHNjYWxpbmc6IDFcbiAgICB9LCAoKSA9PiB7XG4gICAgICBsZXQgbW91c2UgPSBQb2xsX01vdXNlKGRlYnVnX3N0YXRlLmNhbWVyYSxmYWxzZSxkZWJ1Z19zdGF0ZS50YXJnZXQpO1xuICAgICAgaWYobW91c2Upe1xuICAgICAgICByZXR1cm4gYCR7bW91c2UueC50b0ZpeGVkKDApfTpYYFxuICAgICAgfVxuICAgICAgcmV0dXJuIGA6WGBcbiAgICB9KSxcbiAgICBuZXcgVGV4dCh7XG4gICAgICBwb3NpdGlvbjoge1xuICAgICAgICB4OiB2aWV3cG9ydC53aWR0aCAtIDEwLFxuICAgICAgICB5OiAxMFxuICAgICAgfSxcbiAgICAgIHNpemU6IDIyLFxuICAgICAgZm9udDogXCJBbGF0YVwiLFxuICAgICAgY29sb3I6IFwid2hpdGVcIixcbiAgICAgIGFsaWduOiBcInJpZ2h0XCIsXG4gICAgICBzY2FsaW5nOiAxXG4gICAgfSwgKCkgPT4ge1xuICAgICAgbGV0IG1vdXNlID0gUG9sbF9Nb3VzZShkZWJ1Z19zdGF0ZS5jYW1lcmEsZmFsc2UsZGVidWdfc3RhdGUudGFyZ2V0KTtcbiAgICAgIGlmKG1vdXNlKXtcbiAgICAgICAgcmV0dXJuIGAke21vdXNlLnkudG9GaXhlZCgwKX06WWBcbiAgICAgIH1cbiAgICAgIHJldHVybiBgOllgXG4gICAgfSksXG4gICAgbmV3IFRleHQoe1xuICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgeDogdmlld3BvcnQud2lkdGggLSAxMCxcbiAgICAgICAgeTogdmlld3BvcnQuaGVpZ2h0IC0gMjRcbiAgICAgIH0sXG4gICAgICBzaXplOiAyMixcbiAgICAgIGZvbnQ6IFwiQWxhdGFcIixcbiAgICAgIGNvbG9yOiBcIndoaXRlXCIsXG4gICAgICBhbGlnbjogXCJyaWdodFwiLFxuICAgICAgc2NhbGluZzogMVxuICAgIH0sICgpID0+IHtcbiAgICAgIHJldHVybiBgJHtnLnN0YXRlLmN1cnJlbnRfcm9vbS5jb25zdHJ1Y3Rvci5uYW1lfS50c2BcbiAgICB9KVxuICAgIF07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYnVnX3N0YXRlZih0OiBudW1iZXIpIHtcbiAgbGV0IG1vdXNlID0gUG9sbF9Nb3VzZShkZWJ1Z19zdGF0ZS5jYW1lcmEsIGZhbHNlLCBkZWJ1Z19zdGF0ZS50YXJnZXQpO1xuICBpZiAoZGVidWdfc3RhdGUuY2FtZXJhLmh1ZCkge1xuICAgIGRlYnVnX3N0YXRlLmNhbWVyYS5odWQuc3RhdGVmKHQpO1xuICB9XG4gIGlmICghUEFVU0VEKSB7XG4gICAgZGVidWdfdXBkYXRlX3Byb3BlcnRpZXNfZWxlbWVudCgpO1xuICB9XG4gIGlmKG1vdXNlKXtcbiAgICBpZiAoZGVidWdfc3RhdGUuc2VsZWN0ZWRfZWxlbWVudCkge1xuICAgICAgaWYgKFBBVVNFRCAmJiBoZWxkX2tleXNbXCJDb250cm9sTGVmdFwiXSAmJiBkZWJ1Z19zdGF0ZS5jdXJyZW50X2FjdGlvbi5wcm9wZXJ0eSA9PSBcInNjYWxpbmdcIikge1xuICAgICAgICBsZXQgZGlzdCA9IHtcbiAgICAgICAgICB4OiBNYXRoLmFicyhtb3VzZS54IC0gZGVidWdfc3RhdGUuc2VsZWN0ZWRfZWxlbWVudC5zdGF0ZS5wb3NpdGlvbi54KSxcbiAgICAgICAgICB5OiBNYXRoLmFicyhtb3VzZS55IC0gZGVidWdfc3RhdGUuc2VsZWN0ZWRfZWxlbWVudC5zdGF0ZS5wb3NpdGlvbi55KVxuICAgICAgICB9XG4gICAgICAgIGRlYnVnX3N0YXRlLnNlbGVjdGVkX2VsZW1lbnQuc3RhdGUuc2NhbGluZy53aWR0aCA9ICgyICogZGlzdC54KSAvIGRlYnVnX3N0YXRlLnNlbGVjdGVkX2VsZW1lbnQud2lkdGg7XG4gICAgICAgIGRlYnVnX3N0YXRlLnNlbGVjdGVkX2VsZW1lbnQuc3RhdGUuc2NhbGluZy5oZWlnaHQgPSAoMiAqIGRpc3QueSkgLyBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9lbGVtZW50LmhlaWdodDtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBsZXQgc3QgPSBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9lbGVtZW50LnN0YXRlO1xuICAgICAgICBzdC5wb3NpdGlvbi54ID0gbW91c2UueCAtIGRlYnVnX3N0YXRlLnNlbGVjdGVkX2VsZW1lbnRfb2Zmc2V0LngsXG4gICAgICAgIHN0LnBvc2l0aW9uLnkgPSBtb3VzZS55IC0gZGVidWdfc3RhdGUuc2VsZWN0ZWRfZWxlbWVudF9vZmZzZXQueVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoUEFVU0VEICYmIGRlYnVnX3N0YXRlLnJvdGF0aW9uX2VsZW1lbnQpIHtcbiAgICAgIGRlYnVnX3N0YXRlLnJvdGF0aW9uX2VsZW1lbnQuc3RhdGUucm90YXRpb24gPSBkZWJ1Z19zdGF0ZS5yb3RhdGlvbl9lbGVtZW50LmFuZ2xlVG93YXJkc1BvaW50KG1vdXNlKTtcbiAgICB9XG4gICAgaWYgKGRlYnVnX3N0YXRlLm1pZGRsZV9wb3NpdGlvbikge1xuICAgICAgbGV0IGRpZmZfeSA9IG1vdXNlLnkgLSBkZWJ1Z19zdGF0ZS5taWRkbGVfcG9zaXRpb24ueTtcbiAgICAgIGxldCBkaWZmX3ggPSBtb3VzZS54IC0gZGVidWdfc3RhdGUubWlkZGxlX3Bvc2l0aW9uLng7XG4gICAgICBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUucG9zaXRpb24ueCA9IGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5wb3NpdGlvbi54ICsgLTEgKiBkaWZmX3g7XG4gICAgICBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUucG9zaXRpb24ueSA9IGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5wb3NpdGlvbi55ICsgLTEgKiBkaWZmX3k7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWJ1Z191cGRhdGVfcm9vbV9saXN0KCkge1xuICBsZXQgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicm9vbV9saXN0XCIpO1xuICBsaXN0LnRleHRDb250ZW50ID0gJyc7XG4gIGZvciAobGV0IHJvb21fbmFtZSBvZiBPYmplY3Qua2V5cyhyb29tX2xpc3QpKSB7XG4gICAgbGV0IHBhcmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICBwYXJhLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHJvb21fbmFtZSkpO1xuICAgIHBhcmEuY2xhc3NMaXN0LmFkZChcInJvb21fbGlzdF9pdGVtXCIpO1xuICAgIHBhcmEuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBnLmxvYWRSb29tU3RyaW5nKHJvb21fbmFtZSk7XG4gICAgfSlcbiAgICBsaXN0LmFwcGVuZENoaWxkKHBhcmEpO1xuICB9XG59XG5cbmludGVyZmFjZSBwcm9wZXJ0aWVzX2VsZW1lbnQge1xuICBwb3NfeDogSFRNTElucHV0RWxlbWVudCxcbiAgcG9zX3k6IEhUTUxJbnB1dEVsZW1lbnQsXG4gIHZlbF94OiBIVE1MSW5wdXRFbGVtZW50LFxuICB2ZWxfeTogSFRNTElucHV0RWxlbWVudCxcbiAgcm90OiBIVE1MSW5wdXRFbGVtZW50LFxuICBzY2FfeDogSFRNTElucHV0RWxlbWVudCxcbiAgc2NhX3k6IEhUTUxJbnB1dEVsZW1lbnQsXG4gIHJlbmRlcjogSFRNTElucHV0RWxlbWVudCxcbiAgY29sbGlzaW9uOiBIVE1MSW5wdXRFbGVtZW50LFxuICB0YWdzOkhUTUxJbnB1dEVsZW1lbnQsXG4gIGxheWVyOkhUTUxJbnB1dEVsZW1lbnRcbn1cbmxldCBwcm9wZXJ0aWVzX2VsZW1lbnRzOiBwcm9wZXJ0aWVzX2VsZW1lbnQgPSB1bmRlZmluZWQ7XG5pZiAoREVCVUcpIHtcbiAgcHJvcGVydGllc19lbGVtZW50cyA9IHtcbiAgICBwb3NfeDogKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9zX3hcIikpLFxuICAgIHBvc195OiAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3NfeVwiKSksXG4gICAgdmVsX3g6ICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZlbF94XCIpKSxcbiAgICB2ZWxfeTogKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmVsX3lcIikpLFxuICAgIHJvdDogKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicm90XCIpKSxcbiAgICBzY2FfeDogKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2NhX3hcIikpLFxuICAgIHNjYV95OiAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzY2FfeVwiKSksXG4gICAgcmVuZGVyOiAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZW5kZXJcIikpLFxuICAgIGNvbGxpc2lvbjogKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29sbGlzaW9uXCIpKSxcbiAgICB0YWdzOiAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YWdzXCIpKSxcbiAgICBsYXllcjooPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsYXllclwiKSlcbiAgfVxuXG4gIGxldCBpbnB1dHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpO1xuICBmb3IgKGxldCBhID0gMDsgYSA8IGlucHV0cy5sZW5ndGg7IGErKykge1xuICAgIGlucHV0c1thXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICg8SFRNTEVsZW1lbnQ+aW5wdXRzW2FdKS5mb2N1cygpO1xuICAgIH0pXG4gIH1cbiAgbGV0IGZvY3VzZWQ7XG4gIGxldCBkZWJ1Z190YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlYnVnX3RhcmdldFwiKVxuICBkZWJ1Z190YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgZm9yIChsZXQgYSA9IDA7IGEgPCBpbnB1dHMubGVuZ3RoOyBhKyspIHtcbiAgICAgIGlucHV0c1thXS5ibHVyKCk7XG4gICAgfVxuICB9KVxuICBsZXQgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXJnZXRcIik7XG4gIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBmb3IgKGxldCBhID0gMDsgYSA8IGlucHV0cy5sZW5ndGg7IGErKykge1xuICAgICAgaW5wdXRzW2FdLmJsdXIoKTtcbiAgICB9XG4gIH0pXG4gIHByb3BlcnRpZXNfZWxlbWVudHMucG9zX3guYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG5cbiAgICBsZXQgZWxlID0gZGVidWdfc3RhdGUuc2VsZWN0ZWRfcHJvcGVydGllc19lbGVtZW50O1xuICAgIGxldCBuZXdfdmFsID0gcGFyc2VGbG9hdChwcm9wZXJ0aWVzX2VsZW1lbnRzLnBvc194LnZhbHVlKSB8fCAwO1xuICAgIGRlYnVnX3N0YXRlLmFjdGlvbnNfc3RhY2sucHVzaCh7XG4gICAgICBwcm9wZXJ0eTogXCJwb3NpdGlvblwiLFxuICAgICAgZWxlbWVudDogZWxlLFxuICAgICAgbmV3OiBKU09OLnN0cmluZ2lmeSh7IHg6IG5ld192YWwsIHk6IGVsZS5zdGF0ZS5wb3NpdGlvbi55IH0pLFxuICAgICAgb2xkOiBKU09OLnN0cmluZ2lmeShlbGUuc3RhdGUucG9zaXRpb24pXG4gICAgfSlcbiAgICBlbGUuc3RhdGUucG9zaXRpb24ueCA9IG5ld192YWw7XG4gIH0pXG4gIHByb3BlcnRpZXNfZWxlbWVudHMucG9zX3kuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgbGV0IGVsZSA9IGRlYnVnX3N0YXRlLnNlbGVjdGVkX3Byb3BlcnRpZXNfZWxlbWVudDtcbiAgICBsZXQgbmV3X3ZhbCA9IHBhcnNlRmxvYXQocHJvcGVydGllc19lbGVtZW50cy5wb3NfeS52YWx1ZSkgfHwgMDtcbiAgICBkZWJ1Z19zdGF0ZS5hY3Rpb25zX3N0YWNrLnB1c2goe1xuICAgICAgcHJvcGVydHk6IFwicG9zaXRpb25cIixcbiAgICAgIGVsZW1lbnQ6IGVsZSxcbiAgICAgIG5ldzogSlNPTi5zdHJpbmdpZnkoeyB4OiBlbGUuc3RhdGUucG9zaXRpb24ueCwgeTogbmV3X3ZhbCB9KSxcbiAgICAgIG9sZDogSlNPTi5zdHJpbmdpZnkoZWxlLnN0YXRlLnBvc2l0aW9uKVxuICAgIH0pXG4gICAgZWxlLnN0YXRlLnBvc2l0aW9uLnkgPSBuZXdfdmFsO1xuICB9KVxuICBwcm9wZXJ0aWVzX2VsZW1lbnRzLnZlbF94LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgIGxldCBlbGUgPSBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9wcm9wZXJ0aWVzX2VsZW1lbnQ7XG4gICAgZWxlLnN0YXRlLnZlbG9jaXR5LnggPSBwYXJzZUZsb2F0KHByb3BlcnRpZXNfZWxlbWVudHMudmVsX3gudmFsdWUpIHx8IDA7XG4gIH0pXG4gIHByb3BlcnRpZXNfZWxlbWVudHMudmVsX3kuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgbGV0IGVsZSA9IGRlYnVnX3N0YXRlLnNlbGVjdGVkX3Byb3BlcnRpZXNfZWxlbWVudDtcbiAgICBlbGUuc3RhdGUudmVsb2NpdHkueSA9IHBhcnNlRmxvYXQocHJvcGVydGllc19lbGVtZW50cy52ZWxfeS52YWx1ZSkgfHwgMDtcbiAgfSlcbiAgcHJvcGVydGllc19lbGVtZW50cy5yb3QuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgbGV0IGVsZSA9IGRlYnVnX3N0YXRlLnNlbGVjdGVkX3Byb3BlcnRpZXNfZWxlbWVudDtcbiAgICBsZXQgbmV3X3ZhbCA9IHBhcnNlRmxvYXQocHJvcGVydGllc19lbGVtZW50cy5yb3QudmFsdWUpIHx8IDA7XG4gICAgZGVidWdfc3RhdGUuYWN0aW9uc19zdGFjay5wdXNoKHtcbiAgICAgIHByb3BlcnR5OiBcInJvdGF0aW9uXCIsXG4gICAgICBlbGVtZW50OiBlbGUsXG4gICAgICBuZXc6IEpTT04uc3RyaW5naWZ5KG5ld192YWwpLFxuICAgICAgb2xkOiBKU09OLnN0cmluZ2lmeShlbGUuc3RhdGUucm90YXRpb24pXG4gICAgfSlcbiAgICBlbGUuc3RhdGUucm90YXRpb24gPSBuZXdfdmFsO1xuICB9KVxuICBwcm9wZXJ0aWVzX2VsZW1lbnRzLnNjYV94LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgIGxldCBlbGUgPSBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9wcm9wZXJ0aWVzX2VsZW1lbnQ7XG4gICAgbGV0IG5ld192YWwgPSBwYXJzZUZsb2F0KHByb3BlcnRpZXNfZWxlbWVudHMuc2NhX3gudmFsdWUpIHx8IDA7XG4gICAgZGVidWdfc3RhdGUuYWN0aW9uc19zdGFjay5wdXNoKHtcbiAgICAgIHByb3BlcnR5OiBcInNjYWxpbmdcIixcbiAgICAgIGVsZW1lbnQ6IGVsZSxcbiAgICAgIG5ldzogSlNPTi5zdHJpbmdpZnkoeyB3aWR0aDogbmV3X3ZhbCwgaGVpZ2h0OiBlbGUuc3RhdGUuc2NhbGluZy5oZWlnaHQgfSksXG4gICAgICBvbGQ6IEpTT04uc3RyaW5naWZ5KGVsZS5zdGF0ZS5zY2FsaW5nKVxuICAgIH0pXG4gICAgZWxlLnN0YXRlLnNjYWxpbmcud2lkdGggPSBuZXdfdmFsO1xuICB9KVxuICBwcm9wZXJ0aWVzX2VsZW1lbnRzLnNjYV95LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgIGxldCBlbGUgPSBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9wcm9wZXJ0aWVzX2VsZW1lbnQ7XG4gICAgbGV0IG5ld192YWwgPSBwYXJzZUZsb2F0KHByb3BlcnRpZXNfZWxlbWVudHMuc2NhX3kudmFsdWUpIHx8IDA7XG4gICAgZGVidWdfc3RhdGUuYWN0aW9uc19zdGFjay5wdXNoKHtcbiAgICAgIHByb3BlcnR5OiBcInNjYWxpbmdcIixcbiAgICAgIGVsZW1lbnQ6IGVsZSxcbiAgICAgIG5ldzogSlNPTi5zdHJpbmdpZnkoeyB3aWR0aDogZWxlLnN0YXRlLnNjYWxpbmcud2lkdGgsIGhlaWdodDogbmV3X3ZhbCB9KSxcbiAgICAgIG9sZDogSlNPTi5zdHJpbmdpZnkoZWxlLnN0YXRlLnNjYWxpbmcpXG4gICAgfSlcbiAgICBlbGUuc3RhdGUuc2NhbGluZy5oZWlnaHQgPSBuZXdfdmFsO1xuICB9KVxuICBwcm9wZXJ0aWVzX2VsZW1lbnRzLnJlbmRlci5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICBsZXQgZWxlID0gZGVidWdfc3RhdGUuc2VsZWN0ZWRfcHJvcGVydGllc19lbGVtZW50O1xuICAgIGVsZS5yZW5kZXIgPSBwcm9wZXJ0aWVzX2VsZW1lbnRzLnJlbmRlci5jaGVja2VkO1xuICB9KVxuICBwcm9wZXJ0aWVzX2VsZW1lbnRzLmNvbGxpc2lvbi5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICBsZXQgZWxlID0gZGVidWdfc3RhdGUuc2VsZWN0ZWRfcHJvcGVydGllc19lbGVtZW50O1xuICAgIGVsZS5jb2xsaXNpb24gPSBwcm9wZXJ0aWVzX2VsZW1lbnRzLmNvbGxpc2lvbi5jaGVja2VkO1xuICB9KVxuICBwcm9wZXJ0aWVzX2VsZW1lbnRzLnRhZ3MuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgbGV0IGVsZSA9IGRlYnVnX3N0YXRlLnNlbGVjdGVkX3Byb3BlcnRpZXNfZWxlbWVudDtcbiAgICBlbGUudGFncyA9IG5ldyBTZXQocHJvcGVydGllc19lbGVtZW50cy50YWdzLnZhbHVlLnNwbGl0KFwiLFwiKSk7XG4gIH0pXG4gIHByb3BlcnRpZXNfZWxlbWVudHMubGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgbGV0IGVsZSA9IGRlYnVnX3N0YXRlLnNlbGVjdGVkX3Byb3BlcnRpZXNfZWxlbWVudDtcbiAgICBlbGUubGF5ZXIgPSBwYXJzZUludChwcm9wZXJ0aWVzX2VsZW1lbnRzLmxheWVyLnZhbHVlKTtcbiAgfSlcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZWxldGVfZWxlbWVudFwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBsZXQgZWxlID0gZGVidWdfc3RhdGUuc2VsZWN0ZWRfcHJvcGVydGllc19lbGVtZW50O1xuICAgIGVsZS5kZWxldGUoKTtcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYnVnX3VwZGF0ZV9wcm9wZXJ0aWVzX2VsZW1lbnQoKSB7XG4gIGlmIChkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9wcm9wZXJ0aWVzX2VsZW1lbnQpIHtcbiAgICBsZXQgZWxlID0gZGVidWdfc3RhdGUuc2VsZWN0ZWRfcHJvcGVydGllc19lbGVtZW50O1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib2JqX25hbWVcIikuaW5uZXJIVE1MID0gZWxlLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgcHJvcGVydGllc19lbGVtZW50cy5wb3NfeC52YWx1ZSA9IFwiXCIgKyBlbGUuc3RhdGUucG9zaXRpb24ueC50b0ZpeGVkKDIpO1xuICAgIHByb3BlcnRpZXNfZWxlbWVudHMucG9zX3kudmFsdWUgPSBcIlwiICsgZWxlLnN0YXRlLnBvc2l0aW9uLnkudG9GaXhlZCgyKTtcbiAgICBwcm9wZXJ0aWVzX2VsZW1lbnRzLnZlbF94LnZhbHVlID0gXCJcIiArIGVsZS5zdGF0ZS52ZWxvY2l0eS54LnRvRml4ZWQoMik7XG4gICAgcHJvcGVydGllc19lbGVtZW50cy52ZWxfeS52YWx1ZSA9IFwiXCIgKyBlbGUuc3RhdGUudmVsb2NpdHkueS50b0ZpeGVkKDIpO1xuICAgIHByb3BlcnRpZXNfZWxlbWVudHMucm90LnZhbHVlID0gXCJcIiArIGVsZS5zdGF0ZS5yb3RhdGlvbi50b0ZpeGVkKDIpO1xuICAgIHByb3BlcnRpZXNfZWxlbWVudHMuc2NhX3gudmFsdWUgPSBcIlwiICsgZWxlLnN0YXRlLnNjYWxpbmcud2lkdGgudG9GaXhlZCgyKTtcbiAgICBwcm9wZXJ0aWVzX2VsZW1lbnRzLnNjYV95LnZhbHVlID0gXCJcIiArIGVsZS5zdGF0ZS5zY2FsaW5nLmhlaWdodC50b0ZpeGVkKDIpO1xuICAgIHByb3BlcnRpZXNfZWxlbWVudHMudGFncy52YWx1ZSA9IFwiXCIgKyBBcnJheS5mcm9tKGVsZS50YWdzKS5qb2luKFwiLFwiKTtcbiAgICBwcm9wZXJ0aWVzX2VsZW1lbnRzLnJlbmRlci5jaGVja2VkID0gZWxlLnJlbmRlcjtcbiAgICBwcm9wZXJ0aWVzX2VsZW1lbnRzLmNvbGxpc2lvbi5jaGVja2VkID0gZWxlLmNvbGxpc2lvbjtcbiAgICBwcm9wZXJ0aWVzX2VsZW1lbnRzLmxheWVyLnZhbHVlID0gXCJcIiArIGVsZS5sYXllcjtcbiAgICBsZXQgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFyYW1zX2xpc3RcIik7XG4gICAgbGlzdC50ZXh0Q29udGVudCA9ICcnO1xuICAgIGZvciAobGV0IGsgb2YgT2JqZWN0LmtleXMoZWxlLnBhcmFtcykpIHtcblxuICAgICAgbGV0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgIGxldCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICBzcGFuLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGspKTtcbiAgICAgIGxldCBpbnB1dDogSFRNTElucHV0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgIGlmICh0eXBlb2YgKDxwYXJhbXM+ZWxlLnBhcmFtcylba10gPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJjaGVja2JveFwiKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHR5cGVvZiAoPHBhcmFtcz5lbGUucGFyYW1zKVtrXSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwibnVtYmVyXCIpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAodHlwZW9mICg8cGFyYW1zPmVsZS5wYXJhbXMpW2tdID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgICAgfVxuXG4gICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBrKVxuICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgKEpTT04uc3RyaW5naWZ5KCg8cGFyYW1zPmVsZS5wYXJhbXMpW2tdKSkpO1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgICB9KVxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgICAgIGxldCBlbGUgPSBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9wcm9wZXJ0aWVzX2VsZW1lbnQ7XG4gICAgICAgIGxldCB2YWw6IHN0cmluZyA9IGlucHV0LnZhbHVlO1xuICAgICAgICBpZiAoIWlzTmFOKHZhbCBhcyB1bmtub3duIGFzIG51bWJlcikpIHtcbiAgICAgICAgICAoPHBhcmFtcz5lbGUucGFyYW1zKVtrXSA9IHBhcnNlRmxvYXQodmFsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWwgPT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAoPHBhcmFtcz5lbGUucGFyYW1zKVtrXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsID09IFwiZmFsc2VcIikge1xuICAgICAgICAgICg8cGFyYW1zPmVsZS5wYXJhbXMpW2tdID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgbGV0IHBhcnNlZCA9IEpTT04ucGFyc2UodmFsKTtcbiAgICAgICAgICAgICg8cGFyYW1zPmVsZS5wYXJhbXMpW2tdID0gSlNPTi5wYXJzZSh2YWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXRjaChlKXtcbiAgICAgICAgICAgIFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHAuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgICBwLmFwcGVuZChpbnB1dCk7XG4gICAgICBsaXN0LmFwcGVuZChwKTtcbiAgICB9XG4gIH1cblxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVidWdfdXBkYXRlX29ial9saXN0KCkge1xuICBsZXQgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib2JqZWN0c19saXN0XCIpO1xuICBsaXN0LnRleHRDb250ZW50ID0gJyc7XG4gIGlmIChnLmdldFJvb20oKSkge1xuICAgIGZvciAobGV0IG9iaiBvZiBnLmdldFJvb20oKS5vYmplY3RzLnNsaWNlKCkucmV2ZXJzZSgpKSB7XG4gICAgICBsZXQgcGFyYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgcGFyYS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShvYmouY29uc3RydWN0b3IubmFtZSkpO1xuICAgICAgcGFyYS5jbGFzc0xpc3QuYWRkKFwib2JqZWN0X2xpc3RfaXRlbVwiKTtcbiAgICAgIHBhcmEuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgIGlmIChkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9wcm9wZXJ0aWVzX2VsZW1lbnQgPT0gPG9iaj5vYmopIHtcbiAgICAgICAgICBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUucG9zaXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCAoPG9iaj5vYmopLnN0YXRlLnBvc2l0aW9uKVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGRlYnVnX3N0YXRlLnNlbGVjdGVkX3Byb3BlcnRpZXNfZWxlbWVudCA9IDxvYmo+b2JqO1xuICAgICAgICAgIGRlYnVnX3VwZGF0ZV9wcm9wZXJ0aWVzX2VsZW1lbnQoKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgbGlzdC5hcHBlbmRDaGlsZChwYXJhKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlYnVnX3VwZGF0ZV9wcmVmYWJzKCkge1xuICBsZXQgcHJlcyA9IE9iamVjdC5rZXlzKHByZWZhYnMpLm1hcChhc3luYyAobzogc3RyaW5nKSA9PiB7XG4gICAgbGV0IGEgPSA8b2JqPihuZXcgcHJlZmFic1tvXSh7XG4gICAgICBwb3NpdGlvbjogeyB4OiAwLCB5OiAwIH0sXG4gICAgICB2ZWxvY2l0eTogeyB4OiAwLCB5OiAwIH0sXG4gICAgICByb3RhdGlvbjogMCxcbiAgICAgIHNjYWxpbmc6IHsgd2lkdGg6IDEsIGhlaWdodDogMSB9XG4gICAgfSkpO1xuICAgIGF3YWl0IGEubG9hZCgpO1xuICAgIGEucmVuZGVyID0gdHJ1ZTtcbiAgICBsZXQgb2JqcyA9IGEuY29tYmluZWRPYmplY3RzKCk7XG4gICAgZm9yIChsZXQgb2JqIG9mIG9ianMpIHtcbiAgICAgIG9iai5VbmJpbmRBbGwoKTtcbiAgICB9XG4gICAgbGV0IHIgPSBhLnJlbmRlcmYoMCk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHByZWZhYjogcHJlZmFic1tvXSxcbiAgICAgIG5hbWU6IGEuY29uc3RydWN0b3IubmFtZSxcbiAgICAgIHJlbmRlcmVkOnIgXG4gICAgfTtcblxuICB9KVxuICBsZXQgYSA9IGF3YWl0IFByb21pc2UuYWxsKHByZXMpO1xuXG4gIGxldCB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByZWZhYl90YXJnZXRcIik7XG4gIHRhcmdldC50ZXh0Q29udGVudCA9ICcnO1xuICBmb3IgKGxldCBwcmVmYWIgb2YgYSkge1xuXG4gICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbGV0IHBhcmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICBwYXJhLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHByZWZhYi5uYW1lKSk7XG4gICAgZGl2LmFwcGVuZENoaWxkKHBhcmEpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHByZWZhYi5yZW5kZXJlZCkpIHtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBkaXYuYXBwZW5kKHByZWZhYi5yZW5kZXJlZC5zcHJpdGUuc3ByaXRlX3NoZWV0KTtcbiAgICB9XG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoXCJwcmVmYWJfYm94XCIpO1xuICAgIGRpdi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCB2YWwgPSB7XG4gICAgICAgIHBvc2l0aW9uOiB7IHg6IGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5wb3NpdGlvbi54LCB5OiBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUucG9zaXRpb24ueSB9LFxuICAgICAgICB2ZWxvY2l0eTogeyB4OiAwLCB5OiAwIH0sXG4gICAgICAgIHJvdGF0aW9uOiAwLFxuICAgICAgICBzY2FsaW5nOiB7IHdpZHRoOiAxLCBoZWlnaHQ6IDEgfVxuICAgICAgfTtcbiAgICAgIGxldCBvYmogPSA8b2JqPihuZXcgcHJlZmFiLnByZWZhYih2YWwpKTtcbiAgICAgIGF3YWl0IGcuc3RhdGUuY3VycmVudF9yb29tLmFkZEl0ZW1zKG9iai5jb21iaW5lZE9iamVjdHMoKSk7XG4gICAgfSk7XG4gICAgdGFyZ2V0LmFwcGVuZChkaXYpO1xuICB9XG59XG5cbmludGVyZmFjZSBkZWJ1Z19hY3Rpb24ge1xuICBwcm9wZXJ0eTogc3RyaW5nLFxuICBvbGQ6IHN0cmluZyxcbiAgbmV3OiBzdHJpbmcsXG4gIGVsZW1lbnQ6IG9ialxufVxuXG5pbnRlcmZhY2UgcmVuZGVyX3RvZ2dsZV9lbnRyeXtcbiAgW2luZGV4OnN0cmluZ106Ym9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIGRlYnVnX3ZhcnMge1xuICB0YXJnZXQ6IEhUTUxDYW52YXNFbGVtZW50LFxuICBjYW1lcmE6IENhbWVyYSxcbiAgbGFzdF9jbGlja2VkOiBIVE1MRWxlbWVudCxcbiAgc2VsZWN0ZWRfZWxlbWVudF9pbml0aWFsX3NjYWxpbmc6IGRpbWVuc2lvbnMsXG4gIHNlbGVjdGVkX2VsZW1lbnQ6IG9iaixcbiAgc2VsZWN0ZWRfZWxlbWVudF9vZmZzZXQ6IFZlY3RvcixcbiAgcm90YXRpb25fZWxlbWVudDogb2JqLFxuICBzZWxlY3RlZF9wcm9wZXJ0aWVzX2VsZW1lbnQ6IG9iaixcbiAgbWlkZGxlX3Bvc2l0aW9uOiBWZWN0b3IsXG4gIGNsaWNrX3Bvc2l0aW9uOiBWZWN0b3IsXG4gIGFjdGlvbnNfc3RhY2s6IGRlYnVnX2FjdGlvbltdLFxuICBjdXJyZW50X2FjdGlvbjogZGVidWdfYWN0aW9uLFxuICByZW5kZXJfZGVsdGFfdGltZTpudW1iZXIsXG4gIHJlbmRlcl90b2dnbGVzOnJlbmRlcl90b2dnbGVfZW50cnlcbn1cblxuZXhwb3J0IGxldCBkZWJ1Z19zdGF0ZTogZGVidWdfdmFycztcblxuZXhwb3J0IGxldCBkZWJ1Z19zZXR1cCA9ICgpID0+IHtcbiAgZGVidWdfc3RhdGUgPSB7XG4gICAgdGFyZ2V0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlYnVnX3RhcmdldFwiKSBhcyBIVE1MQ2FudmFzRWxlbWVudCxcbiAgICBjYW1lcmE6IG5ldyBDYW1lcmEoe1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICBkaW1lbnNpb25zOiB7XG4gICAgICAgIGhlaWdodDogdmlld3BvcnQuaGVpZ2h0LFxuICAgICAgICB3aWR0aDogdmlld3BvcnQud2lkdGhcbiAgICAgIH0sXG4gICAgICBzY2FsaW5nOiAxLFxuICAgICAgZGVidWc6IHRydWVcbiAgICB9XG4gICAgICAsIHtcbiAgICAgICAgeDogMSxcbiAgICAgICAgeTogMCxcbiAgICAgICAgd2lkdGg6IDEsXG4gICAgICAgIGhlaWdodDogMVxuICAgICAgfSksXG4gICAgbGFzdF9jbGlja2VkOiB1bmRlZmluZWQsXG4gICAgc2VsZWN0ZWRfZWxlbWVudDogdW5kZWZpbmVkLFxuICAgIHNlbGVjdGVkX2VsZW1lbnRfb2Zmc2V0OiB1bmRlZmluZWQsXG4gICAgcm90YXRpb25fZWxlbWVudDogdW5kZWZpbmVkLFxuICAgIG1pZGRsZV9wb3NpdGlvbjogdW5kZWZpbmVkLFxuICAgIGNsaWNrX3Bvc2l0aW9uOiB1bmRlZmluZWQsXG4gICAgc2VsZWN0ZWRfcHJvcGVydGllc19lbGVtZW50OiB1bmRlZmluZWQsXG4gICAgc2VsZWN0ZWRfZWxlbWVudF9pbml0aWFsX3NjYWxpbmc6IHsgd2lkdGg6IDEsIGhlaWdodDogMSB9LFxuICAgIGFjdGlvbnNfc3RhY2s6IFtdLFxuICAgIHJlbmRlcl9kZWx0YV90aW1lOjAsXG4gICAgY3VycmVudF9hY3Rpb246IHVuZGVmaW5lZCxcbiAgICByZW5kZXJfdG9nZ2xlczp7XG4gICAgICBcInByb3hpbWl0eV9ib3hcIjpmYWxzZSxcbiAgICAgIFwicGF0aF9maW5kaW5nXCI6ZmFsc2UsXG4gICAgICBcImNvbGxpc2lvbl9ib3hcIjpmYWxzZSxcbiAgICAgIFwiYm91bmRpbmdfYm94XCI6ZmFsc2VcbiAgICB9XG4gIH1cbiAgZGVidWdfc3RhdGUuY2FtZXJhLmh1ZCA9IG5ldyBEZWJ1Z19odWQoKTtcbiAgQmluZChcIm1vdXNlMGRvd25cIiwoKSA9PiB7XG4gICAgaWYgKGRlYnVnX3N0YXRlLnNlbGVjdGVkX2VsZW1lbnQpIHtcbiAgICAgIGRlYnVnX3N0YXRlLnNlbGVjdGVkX2VsZW1lbnQgPSBudWxsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGxldCBtb3VzZSA9IFBvbGxfTW91c2UoZGVidWdfc3RhdGUuY2FtZXJhLCBmYWxzZSwgZGVidWdfc3RhdGUudGFyZ2V0KTtcbiAgICAgIGlmKCFtb3VzZSl7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgZGVidWdfc3RhdGUuY2xpY2tfcG9zaXRpb24gPSBtb3VzZTtcbiAgICAgIGxldCBhbGxfY2xpY2tlZCA9IGcuZ2V0Um9vbSgpLmNoZWNrT2JqZWN0c1BvaW50KG1vdXNlKTtcbiAgICAgIGxldCBjbGlja2VkO1xuICAgICAgbGV0IGZpbHRlcmVkID0gYWxsX2NsaWNrZWQuZmlsdGVyKChlbGUpID0+IGVsZSA9PSBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9wcm9wZXJ0aWVzX2VsZW1lbnQpXG4gICAgICBpZiAoZmlsdGVyZWQubGVuZ3RoID4gMCkge1xuICAgICAgICBjbGlja2VkID0gZmlsdGVyZWRbMF1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjbGlja2VkID0gYWxsX2NsaWNrZWQuc29ydCgoYSwgYikgPT4gKGIubGF5ZXIgLSBhLmxheWVyKSlbMF07XG4gICAgICB9XG4gICAgICBpZiAoY2xpY2tlZCkge1xuICAgICAgICBpZiAoaGVsZF9rZXlzW1wiQ29udHJvbExlZnRcIl0pIHtcbiAgICAgICAgICBkZWJ1Z19zdGF0ZS5jdXJyZW50X2FjdGlvbiA9IHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGNsaWNrZWQsXG4gICAgICAgICAgICBwcm9wZXJ0eTogXCJzY2FsaW5nXCIsXG4gICAgICAgICAgICBvbGQ6IEpTT04uc3RyaW5naWZ5KGNsaWNrZWQuc3RhdGUuc2NhbGluZyksXG4gICAgICAgICAgICBuZXc6IHVuZGVmaW5lZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkZWJ1Z19zdGF0ZS5jdXJyZW50X2FjdGlvbiA9IHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGNsaWNrZWQsXG4gICAgICAgICAgICBwcm9wZXJ0eTogXCJwb3NpdGlvblwiLFxuICAgICAgICAgICAgb2xkOiBKU09OLnN0cmluZ2lmeShjbGlja2VkLnN0YXRlLnBvc2l0aW9uKSxcbiAgICAgICAgICAgIG5ldzogdW5kZWZpbmVkXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRlYnVnX3N0YXRlLnNlbGVjdGVkX3Byb3BlcnRpZXNfZWxlbWVudCA9IGNsaWNrZWQ7XG4gICAgICAgIGRlYnVnX3VwZGF0ZV9wcm9wZXJ0aWVzX2VsZW1lbnQoKVxuICAgICAgICBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9lbGVtZW50ID0gY2xpY2tlZDtcbiAgICAgICAgZGVidWdfc3RhdGUuc2VsZWN0ZWRfZWxlbWVudF9pbml0aWFsX3NjYWxpbmcgPSBjbGlja2VkLnN0YXRlLnNjYWxpbmc7XG4gICAgICAgIGRlYnVnX3N0YXRlLnNlbGVjdGVkX2VsZW1lbnRfb2Zmc2V0ID0ge1xuICAgICAgICAgIHg6IG1vdXNlLnggLSBjbGlja2VkLnN0YXRlLnBvc2l0aW9uLngsXG4gICAgICAgICAgeTogbW91c2UueSAtIGNsaWNrZWQuc3RhdGUucG9zaXRpb24ueVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LGV4ZWNfdHlwZS5vbmNlLDEsdHJ1ZSlcbiAgQmluZChcIm1vdXNlMXVwXCIsKCkgPT4ge1xuICAgIGRlYnVnX3N0YXRlLm1pZGRsZV9wb3NpdGlvbiA9IHVuZGVmaW5lZDtcbiAgfSxleGVjX3R5cGUub25jZSwxLHRydWUpO1xuICBCaW5kKFwibW91c2UxZG93blwiLCgpID0+IHtcbiAgICBsZXQgbW91c2UgPSBQb2xsX01vdXNlKGRlYnVnX3N0YXRlLmNhbWVyYSwgZmFsc2UsIGRlYnVnX3N0YXRlLnRhcmdldCk7XG4gICAgaWYoIW1vdXNlKXtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBkZWJ1Z19zdGF0ZS5taWRkbGVfcG9zaXRpb24gPSBtb3VzZTtcbiAgfSwgZXhlY190eXBlLm9uY2UsIDEsIHRydWUpO1xuICBCaW5kKFwibW91c2UwdXBcIiwgKCkgPT4ge1xuICAgIGlmIChkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9lbGVtZW50KSB7XG4gICAgICBpZiAoZGVidWdfc3RhdGUuY3VycmVudF9hY3Rpb24ucHJvcGVydHkgPT0gXCJzY2FsaW5nXCIpIHtcbiAgICAgICAgZGVidWdfc3RhdGUuY3VycmVudF9hY3Rpb24ubmV3ID0gSlNPTi5zdHJpbmdpZnkoZGVidWdfc3RhdGUuc2VsZWN0ZWRfZWxlbWVudC5zdGF0ZS5zY2FsaW5nKVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZGVidWdfc3RhdGUuY3VycmVudF9hY3Rpb24ucHJvcGVydHkgPT0gXCJwb3NpdGlvblwiKSB7XG4gICAgICAgIGRlYnVnX3N0YXRlLmN1cnJlbnRfYWN0aW9uLm5ldyA9IEpTT04uc3RyaW5naWZ5KCg8b2JqX3N0YXRlPmRlYnVnX3N0YXRlLnNlbGVjdGVkX2VsZW1lbnQuc3RhdGUpLnBvc2l0aW9uKVxuICAgICAgfVxuICAgICAgZGVidWdfc3RhdGUuYWN0aW9uc19zdGFjay5wdXNoKGRlYnVnX3N0YXRlLmN1cnJlbnRfYWN0aW9uKTtcbiAgICAgIGRlYnVnX3N0YXRlLnNlbGVjdGVkX2VsZW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9LCBleGVjX3R5cGUub25jZSwgMSwgdHJ1ZSk7XG4gIEJpbmQoXCJtb3VzZTJkb3duXCIsKCkgPT4ge1xuICAgIGlmIChkZWJ1Z19zdGF0ZS5yb3RhdGlvbl9lbGVtZW50KSB7XG4gICAgICBkZWJ1Z19zdGF0ZS5yb3RhdGlvbl9lbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBsZXQgbW91c2UgPSBQb2xsX01vdXNlKGRlYnVnX3N0YXRlLmNhbWVyYSwgZmFsc2UsIGRlYnVnX3N0YXRlLnRhcmdldCk7XG4gICAgICBpZighbW91c2Upe1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGxldCBjbGlja2VkID0gZy5nZXRSb29tKCkuY2hlY2tPYmplY3RzUG9pbnQobW91c2UpWzBdXG4gICAgICBpZiAoY2xpY2tlZCkge1xuICAgICAgICBkZWJ1Z19zdGF0ZS5yb3RhdGlvbl9lbGVtZW50ID0gY2xpY2tlZDtcbiAgICAgICAgZGVidWdfc3RhdGUuY3VycmVudF9hY3Rpb24gPSB7XG4gICAgICAgICAgZWxlbWVudDogZGVidWdfc3RhdGUucm90YXRpb25fZWxlbWVudCxcbiAgICAgICAgICBwcm9wZXJ0eTogXCJyb3RhdGlvblwiLFxuICAgICAgICAgIG9sZDogSlNPTi5zdHJpbmdpZnkoZGVidWdfc3RhdGUucm90YXRpb25fZWxlbWVudC5zdGF0ZS5yb3RhdGlvbiksXG4gICAgICAgICAgbmV3OiB1bmRlZmluZWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxleGVjX3R5cGUub25jZSwxLHRydWUpO1xuICBCaW5kKFwibW91c2UydXBcIiwoKSA9PiB7XG4gICAgZGVidWdfc3RhdGUuY3VycmVudF9hY3Rpb24ubmV3ID0gSlNPTi5zdHJpbmdpZnkoZGVidWdfc3RhdGUucm90YXRpb25fZWxlbWVudC5zdGF0ZS5yb3RhdGlvbilcbiAgICBkZWJ1Z19zdGF0ZS5hY3Rpb25zX3N0YWNrLnB1c2goZGVidWdfc3RhdGUuY3VycmVudF9hY3Rpb24pO1xuICAgIGRlYnVnX3N0YXRlLnJvdGF0aW9uX2VsZW1lbnQgPSB1bmRlZmluZWQ7XG4gIH0sZXhlY190eXBlLm9uY2UsMSx0cnVlKTtcbiAgbGV0IGxlZnRfZnVuYyA9ICgpID0+IHtcbiAgICBsZXQgc2hpZnRfaGVsZCA9IGhlbGRfa2V5c1tcIlNoaWZ0TGVmdFwiXSA/IDEgOiAwO1xuICAgIGlmIChkZWJ1Z19zdGF0ZS5sYXN0X2NsaWNrZWQuaWQgPT0gXCJkZWJ1Z190YXJnZXRcIilcbiAgICAgIGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5wb3NpdGlvbi54ID0gZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnggLSAoKDUgKyBzaGlmdF9oZWxkICogNSkgKiAoMSAvIGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5zY2FsaW5nKSk7XG4gIH07XG4gIGxldCByaWdodF9mdW5jID0gKCkgPT4ge1xuICAgIGxldCBzaGlmdF9oZWxkID0gaGVsZF9rZXlzW1wiU2hpZnRMZWZ0XCJdID8gMSA6IDA7XG4gICAgaWYgKGRlYnVnX3N0YXRlLmxhc3RfY2xpY2tlZC5pZCA9PSBcImRlYnVnX3RhcmdldFwiKVxuICAgICAgZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnggPSBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUucG9zaXRpb24ueCArICgoNSArIHNoaWZ0X2hlbGQgKiA1KSAqICgxIC8gZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnNjYWxpbmcpKTtcbiAgfTtcbiAgbGV0IGRvd25fZnVuYyA9ICgpID0+IHtcbiAgICBsZXQgc2hpZnRfaGVsZCA9IGhlbGRfa2V5c1tcIlNoaWZ0TGVmdFwiXSA/IDEgOiAwO1xuXG4gICAgaWYgKCFoZWxkX2tleXNbXCJDb250cm9sTGVmdFwiXSAmJiBkZWJ1Z19zdGF0ZS5sYXN0X2NsaWNrZWQuaWQgPT0gXCJkZWJ1Z190YXJnZXRcIilcbiAgICAgIGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5wb3NpdGlvbi55ID0gZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnkgLSAoKDUgKyBzaGlmdF9oZWxkICogNSkgKiAoMSAvIGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5zY2FsaW5nKSk7XG4gIH07XG4gIGxldCB1cF9mdW5jID0gKCkgPT4ge1xuICAgIGxldCBzaGlmdF9oZWxkID0gaGVsZF9rZXlzW1wiU2hpZnRMZWZ0XCJdID8gMSA6IDA7XG4gICAgaWYgKGRlYnVnX3N0YXRlLmxhc3RfY2xpY2tlZC5pZCA9PSBcImRlYnVnX3RhcmdldFwiKVxuICAgICAgZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnkgPSBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUucG9zaXRpb24ueSArICgoNSArIHNoaWZ0X2hlbGQgKiA1KSAqICgxIC8gZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnNjYWxpbmcpKTtcbiAgfTtcbiAgbGV0IHNjcm9sbF91cCA9ICgpID0+IHtcbiAgICBpZiAoZGVidWdfc3RhdGUubGFzdF9jbGlja2VkLmlkID09IFwiZGVidWdfdGFyZ2V0XCIgJiYgZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnNjYWxpbmcgPCAwLjA1KVxuICAgICAgZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnNjYWxpbmcgPSBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUuc2NhbGluZyArIDAuMDE7XG4gICAgZWxzZSBpZihkZWJ1Z19zdGF0ZS5sYXN0X2NsaWNrZWQuaWQgPT0gXCJkZWJ1Z190YXJnZXRcIilcbiAgICAgIGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5zY2FsaW5nID0gZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnNjYWxpbmcgKyAwLjA1O1xuICB9XG4gIGxldCBzYXZlX2Z1bmMgPSAoKSA9PiB7XG4gICAgbGV0IGN0cmxfaGVsZCA9IGhlbGRfa2V5c1tcIkNvbnRyb2xMZWZ0XCJdO1xuICAgIGlmIChjdHJsX2hlbGQgJiYgUEFVU0VEKSB7XG4gICAgICBsZXQgbmFtZSA9IGcuZ2V0Um9vbSgpLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICBsZXQgYSA9IHBhdGguam9pbihgJHtwcm9qZWN0X3BhdGh9YCwgYC4uL3Jvb21zLyR7bmFtZX0uanNvbmApO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZnMud3JpdGVGaWxlU3luYyhhLCBKU09OLnN0cmluZ2lmeShnLmdldFJvb20oKS5leHBvcnRTdGF0ZUNvbmZpZygpKSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIFdSSVRJTkcgUk9PTSBJTkZPIEZJTEUuXCIpO1xuICAgICAgICBhbGVydChcIkVycm9yXCIpO1xuICAgICAgfVxuICAgICAgYWxlcnQoXCJTYXZlZFwiKTtcblxuICAgIH1cbiAgICBlbHNlIGlmIChjdHJsX2hlbGQgJiYgIVBBVVNFRCkge1xuICAgICAgYWxlcnQoXCJwYXVzZSB0byBlbmFibGUgc2F2aW5nLlwiKVxuICAgIH1cbiAgfVxuICBsZXQgc2Nyb2xsX2Rvd24gPSAoKSA9PiB7XG4gICAgaWYgKGRlYnVnX3N0YXRlLmxhc3RfY2xpY2tlZC5pZCA9PSBcImRlYnVnX3RhcmdldFwiICYmIGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5zY2FsaW5nID4gMC4wNSlcbiAgICAgIGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5zY2FsaW5nID0gZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnNjYWxpbmcgLSAwLjA1O1xuICAgIGVsc2UgaWYgKGRlYnVnX3N0YXRlLmxhc3RfY2xpY2tlZC5pZCA9PSBcImRlYnVnX3RhcmdldFwiICYmIGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5zY2FsaW5nID4gMC4wMSlcbiAgICAgIGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5zY2FsaW5nID0gZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnNjYWxpbmcgLSAwLjAxO1xuICB9XG4gIGxldCB1bmRvX2Z1bmMgPSAoKSA9PiB7XG4gICAgaWYgKGhlbGRfa2V5c1tcIkNvbnRyb2xMZWZ0XCJdKSB7XG4gICAgICBsZXQgY3VycjogZGVidWdfYWN0aW9uID0gZGVidWdfc3RhdGUuYWN0aW9uc19zdGFjay5wb3AoKTtcbiAgICAgIGlmIChjdXJyKSB7XG4gICAgICAgIGlmIChjdXJyLnByb3BlcnR5ID09IFwicG9zaXRpb25cIikge1xuICAgICAgICAgIGN1cnIuZWxlbWVudC5zdGF0ZS5wb3NpdGlvbiA9IEpTT04ucGFyc2UoY3Vyci5vbGQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGN1cnIucHJvcGVydHkgPT09IFwicm90YXRpb25cIikge1xuICAgICAgICAgIGN1cnIuZWxlbWVudC5zdGF0ZS5yb3RhdGlvbiA9IEpTT04ucGFyc2UoY3Vyci5vbGQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGN1cnIucHJvcGVydHkgPT09IFwic2NhbGluZ1wiKSB7XG4gICAgICAgICAgY3Vyci5lbGVtZW50LnN0YXRlLnNjYWxpbmcgPSBKU09OLnBhcnNlKGN1cnIub2xkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBCaW5kKFwiS2V5QVwiLGxlZnRfZnVuYyxleGVjX3R5cGUucmVwZWF0LDEsdHJ1ZSk7XG4gIEJpbmQoXCJLZXlEXCIscmlnaHRfZnVuYyxleGVjX3R5cGUucmVwZWF0LDEsdHJ1ZSk7XG4gIEJpbmQoXCJLZXlXXCIsdXBfZnVuYyxleGVjX3R5cGUucmVwZWF0LDEsdHJ1ZSk7XG4gIEJpbmQoXCJLZXlTXCIsZG93bl9mdW5jLGV4ZWNfdHlwZS5yZXBlYXQsMSx0cnVlKTtcbiAgQmluZChcInNjcm9sbHVwXCIsc2Nyb2xsX3VwLGV4ZWNfdHlwZS5vbmNlLDEsdHJ1ZSk7XG4gIEJpbmQoXCJzY3JvbGxkb3duXCIsc2Nyb2xsX2Rvd24sZXhlY190eXBlLm9uY2UsMSx0cnVlKTtcbiAgQmluZChcIktleVNcIixzYXZlX2Z1bmMsZXhlY190eXBlLm9uY2UsMSx0cnVlKTtcbiAgQmluZChcIktleVpcIix1bmRvX2Z1bmMsZXhlY190eXBlLm9uY2UsMSx0cnVlKTtcbiAgQmluZChcIktleVFcIiwoKT0+e1xuICAgIGRlYnVnX3N0YXRlLnJlbmRlcl90b2dnbGVzW1wicGF0aF9maW5kaW5nXCJdID0gIWRlYnVnX3N0YXRlLnJlbmRlcl90b2dnbGVzW1wicGF0aF9maW5kaW5nXCJdXG4gIH0sZXhlY190eXBlLm9uY2UsMSx0cnVlKTtcbiAgQmluZChcIktleUVcIiwoKT0+e1xuICAgIGRlYnVnX3N0YXRlLnJlbmRlcl90b2dnbGVzW1wicHJveGltaXR5X2JveFwiXSA9ICFkZWJ1Z19zdGF0ZS5yZW5kZXJfdG9nZ2xlc1tcInByb3hpbWl0eV9ib3hcIl1cbiAgfSxleGVjX3R5cGUub25jZSwxLHRydWUpO1xuICBCaW5kKFwiS2V5UlwiLCgpPT57XG4gICAgZGVidWdfc3RhdGUucmVuZGVyX3RvZ2dsZXNbXCJjb2xsaXNpb25fYm94XCJdID0gIWRlYnVnX3N0YXRlLnJlbmRlcl90b2dnbGVzW1wiY29sbGlzaW9uX2JveFwiXVxuICB9LGV4ZWNfdHlwZS5vbmNlLDEsdHJ1ZSk7XG4gIEJpbmQoXCJLZXlUXCIsKCk9PntcbiAgICBkZWJ1Z19zdGF0ZS5yZW5kZXJfdG9nZ2xlc1tcImJvdW5kaW5nX2JveFwiXSA9ICFkZWJ1Z19zdGF0ZS5yZW5kZXJfdG9nZ2xlc1tcImJvdW5kaW5nX2JveFwiXVxuICB9LGV4ZWNfdHlwZS5vbmNlLDEsdHJ1ZSk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgZGVidWdfc3RhdGUubGFzdF9jbGlja2VkID0gZS50YXJnZXQ7XG4gICAgfVxuICB9KVxuICBsZXQgcGF1c2VfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXVzZV9idXR0b25cIilcbiAgcGF1c2VfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIHNldFBhdXNlZCghUEFVU0VEKTtcbiAgICBpZiAoUEFVU0VEKSB7XG4gICAgICBwYXVzZV9idXR0b24uaW5uZXJIVE1MID0gXCJVTlBBVVNFXCI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcGF1c2VfYnV0dG9uLmlubmVySFRNTCA9IFwiUEFVU0VcIjtcbiAgICB9XG4gIH0pO1xuICBsZXQgb2JqX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3X29iamVjdF9idXR0b25cIik7XG4gIGxldCByb29tX2J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3X3Jvb21fYnV0dG9uXCIpO1xuICByb29tX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBsZXQgZmlsZV9wYXRoID0gaXBjUmVuZGVyZXIuc2VuZFN5bmMoJ29iamVjdC1wYXRoLXJlcXVlc3QnLCBcInJvb21zXCIpO1xuICAgIGlmIChmaWxlX3BhdGgpIHtcbiAgICAgIGxldCBmdWxsX25hbWUgPSBwYXRoLnBhcnNlKGZpbGVfcGF0aCkuYmFzZTtcbiAgICAgIGxldCBuZXdfbmFtZSA9IGZ1bGxfbmFtZS5zdWJzdHIoMCwgZnVsbF9uYW1lLmxlbmd0aCAtIDMpO1xuICAgICAgbGV0IHBhdGhfdG9fd3JpdGUgPSBwYXRoLmpvaW4oYCR7ZmlsZV9wYXRofWAsIFwiLi5cIiwgbmV3X25hbWUgKyBcIi50c1wiKTtcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMocGF0aF90b193cml0ZSwgcm9vbV90ZW1wbGF0ZS5zcGxpdChcInRlbXBsYXRlXCIpLmpvaW4obmV3X25hbWUpKTtcblxuICAgICAgcGF0aF90b193cml0ZSA9IHBhdGguam9pbihgJHtmaWxlX3BhdGh9YCwgXCIuLlwiLCBuZXdfbmFtZSArIFwiLmpzb25cIik7XG5cbiAgICAgIGZzLndyaXRlRmlsZVN5bmMocGF0aF90b193cml0ZSwgYFxuICAgIHtcbiAgICAgIFwib2JqZWN0c1wiOltdXG4gICAgfVxuICAgIGApXG4gICAgfVxuICB9KVxuICBvYmpfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGxldCBmaWxlX3BhdGggPSBpcGNSZW5kZXJlci5zZW5kU3luYygnb2JqZWN0LXBhdGgtcmVxdWVzdCcsIFwib2JqZWN0c1wiKTtcbiAgICBpZiAoZmlsZV9wYXRoKSB7XG4gICAgICBsZXQgZnVsbF9uYW1lID0gcGF0aC5wYXJzZShmaWxlX3BhdGgpLmJhc2U7XG4gICAgICBsZXQgbmV3X25hbWUgPSBmdWxsX25hbWUuc3Vic3RyKDAsIGZ1bGxfbmFtZS5sZW5ndGggLSAzKTtcbiAgICAgIGxldCBwYXRoX3RvX3dyaXRlID0gcGF0aC5qb2luKGAke2ZpbGVfcGF0aH1gLCBcIi4uXCIsIG5ld19uYW1lICsgXCIudHNcIik7XG4gICAgICBmcy53cml0ZUZpbGVTeW5jKHBhdGhfdG9fd3JpdGUsb2JqZWN0X3RlbXBsYXRlLnNwbGl0KFwidGVtcGxhdGVcIikuam9pbihuZXdfbmFtZSkpO1xuICAgIH1cbiAgfSlcblxufSIsImltcG9ydCB7b2JqfSBmcm9tIFwiLi9vYmplY3RcIjtcbmltcG9ydCB7VmVjdG9yfSBmcm9tIFwibGliL3N0YXRlXCI7XG5pbXBvcnQgeyBjb3B5IH0gZnJvbSBcInNyYy92YW5cIjtcbmludGVyZmFjZSBIdWRUZXh0R2V0RnVuY3tcbiAgKCk6c3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dFNldHRpbmd7XG4gIHg6bnVtYmVyLFxuICB5Om51bWJlcixcbiAgZm9udDpGb250XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRm9udHtcbiAgbWF4X3dpZHRoPzpudW1iZXIsXG4gIHNpemU6bnVtYmVyLFxuICBmb250OnN0cmluZyxcbiAgY29sb3I6c3RyaW5nLFxuICB0ZXh0OnN0cmluZyxcbiAgYWxpZ246Q2FudmFzVGV4dEFsaWduXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dF9Ob2Rle1xuICBtYXhfd2lkdGg/Om51bWJlcixcbiAgcG9zaXRpb246VmVjdG9yXG4gIHNpemU6bnVtYmVyO1xuICBzY2FsaW5nOm51bWJlcjtcbiAgZm9udDpzdHJpbmc7XG4gIGNvbG9yOnN0cmluZztcbiAgdGV4dD86c3RyaW5nO1xuICBhbGlnbj86Q2FudmFzVGV4dEFsaWduO1xufVxuZXhwb3J0IGNsYXNzIEhVRHtcbiAgZ3JhcGhpY19lbGVtZW50czpvYmpbXSA9IFtdO1xuICB0ZXh0X2VsZW1lbnRzOkFycmF5PFRleHQ+ID0gW107XG4gIHJlbmRlcmluZzpib29sZWFuID0gZmFsc2U7XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgdGhpcy50ZXh0X2VsZW1lbnRzLnB1c2goLi4udGhpcy5zZXRUZXh0RWxlbWVudHMoKSk7XG4gICAgZm9yKGxldCBnIG9mIHRoaXMuc2V0R3JhcGhpY0VsZW1lbnRzKCkpe1xuICAgICAgdGhpcy5hZGRHcmFwaGljKGcpO1xuICAgIH1cbiAgfVxuICBhc3luYyBhZGRHcmFwaGljKG86b2JqKXtcbiAgICBhd2FpdCBvLmxvYWQoKTtcbiAgICBvLmluZm8ub25faHVkX2xheWVyID0gdHJ1ZTtcbiAgICB0aGlzLmdyYXBoaWNfZWxlbWVudHMucHVzaChvKTtcblxuICB9XG4gIGFzeW5jIGFkZEdyYXBoaWNzKG86b2JqW10pe1xuICAgIGZvcihsZXQgb2JqIG9mIG8gKXtcbiAgICAgIHRoaXMuYWRkR3JhcGhpYyhvYmopO1xuICAgIH1cbiAgfVxuICBzdGF0ZWYoYTpudW1iZXIpe1xuICAgIGZvcihsZXQgeCBvZiB0aGlzLmdyYXBoaWNfZWxlbWVudHMpe1xuICAgICAgeC5zdGF0ZWYoYSk7XG4gICAgfVxuICAgIGZvcihsZXQgeCBvZiB0aGlzLnRleHRfZWxlbWVudHMpe1xuICAgICAgeC5zdGF0ZWYoYSk7XG4gICAgfVxuICB9XG4gIGFzeW5jIHNldEFjdGl2ZSgpe1xuXG4gIH1cbiAgbG9hZCgpe1xuICAgIHJldHVybiBQcm9taXNlLmFsbCh0aGlzLmdyYXBoaWNfZWxlbWVudHMubWFwKChhKT0+YS5sb2FkKCkpKVxuICB9XG4gIHNldFRleHRFbGVtZW50cygpOlRleHRbXXtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgc2V0R3JhcGhpY0VsZW1lbnRzKCk6b2JqW117XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUZXh0e1xuICBnZXRGdW5jOkh1ZFRleHRHZXRGdW5jO1xuICBzdGF0ZTpUZXh0X05vZGU7XG4gIGNvbnN0cnVjdG9yKG5vZGU6VGV4dF9Ob2RlLGdldEZ1bmM6SHVkVGV4dEdldEZ1bmMpe1xuICAgIGlmKCFub2RlLmFsaWduKXtcbiAgICAgIG5vZGUuYWxpZ24gPSBcImNlbnRlclwiO1xuICAgIH1cbiAgICB0aGlzLnN0YXRlID0gbm9kZTtcbiAgICBpZighdGhpcy5zdGF0ZS50ZXh0KXtcbiAgICAgIHRoaXMuc3RhdGUudGV4dCA9IFwiXCI7XG4gICAgfVxuICAgIHRoaXMuZ2V0RnVuYyA9IGdldEZ1bmM7XG4gIH1cbiAgc3RhdGVmKGE6bnVtYmVyKXtcbiAgIHRoaXMuc3RhdGUudGV4dCA9IHRoaXMuZ2V0RnVuYygpO1xuICB9XG4gIHJlbmRlcmYoYTpudW1iZXIpOkZvbnR7XG4gICAgbGV0IHtzaXplLGNvbG9yLGZvbnQsdGV4dCxtYXhfd2lkdGgsYWxpZ259ID0gdGhpcy5zdGF0ZTtcbiAgICByZXR1cm4ge1xuICAgICAgc2l6ZSxcbiAgICAgIGNvbG9yLFxuICAgICAgZm9udCxcbiAgICAgIHRleHQsXG4gICAgICBtYXhfd2lkdGgsXG4gICAgICBhbGlnblxuICAgIH07XG4gIH1cbn0iLCJpbXBvcnQge1ZlY3Rvcn0gZnJvbSBcIi4vc3RhdGVcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRJbnQobWluOm51bWJlciwgbWF4Om51bWJlcikge1xuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKSArIG1pbjtcbn1cblxuaW50ZXJmYWNlIFZlY19mdW5je1xuICAoYTpudW1iZXIpOm51bWJlclxufVxuXG5leHBvcnQgZnVuY3Rpb24gYW5nbGVfdG93YXJkcyh0YXJnZXQxOlZlY3Rvcix0YXJnZXQyOlZlY3Rvcik6bnVtYmVye1xuICByZXR1cm4gOTAgLSBNYXRoLmF0YW4yKCh0YXJnZXQxLnkgLSB0YXJnZXQyLnkpLCh0YXJnZXQxLnggLSB0YXJnZXQyLngpKSAqIDE4MC9NYXRoLlBJO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAodmFsdWU6bnVtYmVyLG1pbjpudW1iZXIsbWF4Om51bWJlcil7XG4gIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh2YWx1ZSxtaW4pLG1heCk7XG59XG5cbi8vRmluZHMgdGhlIHNpZGUgbGVuZ3RocyBvZiBhIHRyaWFuZ2xlIGlmIGdpdmVuIHRoZSAgYW5nbGUgKGluIGRlZ3JlZXMpXG4vL2Fsb25nIHdpdGggdGhlIGxlbmd0aCBvZiB0aGUgaHlwb3RlbnVzZVxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0aW9uX2xlbmd0aChsZW5ndGg6IG51bWJlciwgZGVncmVlOiBudW1iZXIpIHtcbiAgbGV0IGFfbGVuID0gbGVuZ3RoICogTWF0aC5zaW4oZGVncmVlICogTWF0aC5QSSAvIDE4MCk7XG4gIGxldCBiX2xlbiA9IGxlbmd0aCAqIE1hdGguY29zKGRlZ3JlZSAqIE1hdGguUEkgLyAxODApO1xuICByZXR1cm4ge1xuICAgIHg6IGFfbGVuLFxuICAgIHk6IGJfbGVuXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFZlY3tcbiAgc3RhdGljIGZyb20oYTpWZWN0b3Ipe1xuICAgIHJldHVybiBWZWMuY3JlYXRlKGEueCxhLnkpO1xuICB9XG4gIHN0YXRpYyBhZGQoYTpWZWN0b3IsYjpWZWN0b3IpOlZlY3RvcntcbiAgICByZXR1cm4ge3g6YS54K2IueCx5OmEueStiLnl9O1xuICB9XG4gIHN0YXRpYyBzdWIoYTpWZWN0b3IsYjpWZWN0b3IpOlZlY3RvcntcbiAgICByZXR1cm4ge3g6YS54IC0gYi54LHk6YS55IC0gYi55fVxuICB9XG4gIHN0YXRpYyBzY2FsYXJfZGl2aWRlKGE6VmVjdG9yLGI6bnVtYmVyKXtcbiAgICByZXR1cm4ge3g6YS54L2IseTphLnkvYn07XG4gIH1cbiAgc3RhdGljIHNjYWxhcl9hZGQoYTpWZWN0b3IsYjpudW1iZXIpe1xuICAgIHJldHVybiB7eDphLnggKyBiLHk6YS55ICsgYn07XG4gIH1cbiAgc3RhdGljIHNjYWxhcl9zdWIoYTpWZWN0b3IsYjpudW1iZXIpe1xuICAgIHJldHVybiB7eDphLnggLSBiLCB5OmEueSAtIGJ9O1xuICB9XG4gIHN0YXRpYyBzY2FsYXJfbW9kKGE6VmVjdG9yLGI6bnVtYmVyKXtcbiAgICByZXR1cm4ge3g6YS54ICUgYiwgeTogYS55ICUgYn07XG4gIH1cbiAgc3RhdGljIHNjYWxhcl9tdWx0KGE6VmVjdG9yLGI6bnVtYmVyKXtcbiAgICByZXR1cm4ge3g6YS54ICogYix5OmEueSAqIGJ9O1xuICB9XG4gIHN0YXRpYyBmdW5jKGE6VmVjdG9yLGI6VmVjX2Z1bmMpOlZlY3RvcntcbiAgICBsZXQgYXJyID0gW2EueCxhLnldLm1hcChiKTtcbiAgICByZXR1cm4gVmVjLmNyZWF0ZShhcnJbMF0sYXJyWzFdKTtcbiAgfVxuICBzdGF0aWMgZGlzdGFuY2UoYTpWZWN0b3IsYjpWZWN0b3Ipe1xuICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coYS54IC0gYi54LDIpICsgTWF0aC5wb3coYS55IC0gYi55LDIpKTtcbiAgfVxuICBzdGF0aWMgY3JlYXRlKHg6bnVtYmVyLHk6bnVtYmVyKXtcbiAgICByZXR1cm4ge3gseX07XG4gIH1cbn0iLCJpbXBvcnQgeyBwZWVyX2Nvbm5lY3Rpb24sIHBlZXJfdG9fcGVlcl9nYW1lIH0gZnJvbSBcInNyYy92YW5cIjtcbmltcG9ydCB7IGdldFJhbmRJbnQgfSBmcm9tIFwibGliL21hdGhcIjtcbmltcG9ydCBQZWVyIGZyb20gJ3BlZXJqcyc7XG5pbXBvcnQgeyBwMnBfcm9vbSB9IGZyb20gXCIuL3Jvb21cIjtcbmltcG9ydCB7IGcgfSBmcm9tIFwiZ2FtZS9tYWluXCI7XG5cbmV4cG9ydCBlbnVtIG5ldF90eXBlIHtcbiAgICBzaW5nbGVfcGxheWVyLFxuICAgIHdlYixcbiAgICBzaW5nbGVfaG9zdFxufVxuXG5leHBvcnQgZW51bSBvYmpfbmV0X3R5cGUge1xuICAgIGxvY2FsLFxuICAgIHN5bmMsXG4gICAgaG9zdFxufVxuXG5pbnRlcmZhY2UgcGVlcntcbiAgICBjb25uZWN0aW9uOlBlZXIuRGF0YUNvbm5lY3Rpb24sXG4gICAgYXV0aGVudGljYXRlZDpib29sZWFuLFxuICAgIGxvY2FsX2lkOnN0cmluZyxcbiAgICBwZWVyX2lkOnN0cmluZ1xufVxuXG5cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIE5ldHdvcmsge1xuICAgIHR5cGU6IG5ldF90eXBlO1xuICAgIGdhbWU6IHBlZXJfdG9fcGVlcl9nYW1lPHVua25vd24+O1xuICAgIHBlZXJfY29ubmVjdGlvbnM6IHBlZXJbXSA9IFtdO1xuICAgIGlkID0gZ2V0UmFuZEludCgwLCA5OTk5OTkpO1xuICAgIGxvY2FsX2Nvbm5lY3Rpb246IFBlZXI7XG4gICAgbWF4X3BsYXllcnM6bnVtYmVyID0gODtcbiAgICBjdXJyZW50X3BsYXllcnM6bnVtYmVyID0gMDtcbiAgICBpZF9jb3VudGVyID0gMTtcbiAgICBwYXNzd29yZDpzdHJpbmcgPSBcIlwiO1xuICAgIGxvY2FsX2lkOnN0cmluZyA9IFwiMFwiO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmxvY2FsX2Nvbm5lY3Rpb24gPSBuZXcgUGVlcih0aGlzLmlkICsgXCJcIiwge1xuICAgICAgICAgICAgaG9zdDogJ2xvY2FsaG9zdCcsXG4gICAgICAgICAgICBwb3J0OiA5MDAwLFxuICAgICAgICAgICAgcGF0aDogJy8nXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxvY2FsX2Nvbm5lY3Rpb24ub24oXCJlcnJvclwiLChlcnIpPT57XG4gICAgICAgICAgICB0aGlzLmVycm9yKGVycik7XG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMubG9jYWxfY29ubmVjdGlvbi5vbihcImNvbm5lY3Rpb25cIiwoY29ubmVjdGlvbik9PntcbiAgICAgICAgICAgIHRoaXMucmVjaWV2ZV9jb25uZWN0KGNvbm5lY3Rpb24pO1xuICAgICAgICB9KVxuICAgIH1cbiAgICBpbml0KCl7XG4gICAgICAgIFxuICAgIH1cbiAgICBzZW5kKHR5cGU6c3RyaW5nLGRhdGE6YW55KSB7XG5cbiAgICB9XG4gICAgcmVjaWV2ZSh0eXBlOnN0cmluZywgZGF0YTogYW55LCBsb2NhbF9pZDpzdHJpbmcpIHtcbiAgICAgICAgbGV0IHJvb20gPSB0aGlzLmdhbWUuc3RhdGUuY3VycmVudF9yb29tIGFzIHAycF9yb29tPHVua25vd24+O1xuICAgICAgICBzd2l0Y2godHlwZSl7XG4gICAgICAgICAgICBjYXNlIFwidXBkYXRlX2l0ZW1cIjp7XG4gICAgICAgICAgICAgIGxldCB7aWQsc3RhdGV9ID0gZGF0YTtcbiAgICAgICAgICAgICAgbGV0IG9iaiA9IHJvb20uZ2V0T2JqKGlkKTtcbiAgICAgICAgICAgICAgZm9yKGxldCBrZXkgb2YgT2JqZWN0LmtleXMoc3RhdGUpKXtcbiAgICAgICAgICAgICAgICAoPGFueT5vYmouc3RhdGUpW2tleV0gPSBKU09OLnBhcnNlKHN0YXRlW2tleV0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSAgICAgICBcbiAgICAgICAgICAgIGNhc2UgXCJhZGRfaXRlbVwiOntcbiAgICAgICAgICAgICAgbGV0IHtzdGF0ZV9jb25maWcsaWR9ID0gZGF0YTtcbiAgICAgICAgICAgICAgcm9vbS5hZGRJdGVtU3RhdGVDb25maWcoc3RhdGVfY29uZmlnLGlkKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiY29ubmVjdGlvblwiOntcbiAgICAgICAgICAgICAgICBsZXQge2FkZHJlc3MsbG9jYWxfaWR9ID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgICAgICAgICBpZihhZGRyZXNzID09IHRoaXMuaWQpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsX2lkID0gbG9jYWxfaWQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKHRoaXMuY3VycmVudF9wbGF5ZXJzIDwgdGhpcy5tYXhfcGxheWVycyAmJiAhdGhpcy5wZWVyX2Nvbm5lY3Rpb25zLm1hcChlbnQgPT4gZW50LnBlZXJfaWQpLmluY2x1ZGVzKGFkZHJlc3MpKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0KGFkZHJlc3MsdGhpcy5wYXNzd29yZCxsb2NhbF9pZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWF4X3BsYXllcnMrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJvb20ucGFyc2VfcGFja2V0KHR5cGUsZGF0YSxsb2NhbF9pZCk7XG4gICAgfVxuICAgIGFzeW5jIGNvbm5lY3QoYWRkcmVzczogc3RyaW5nLCBwYXNzd29yZCA9IFwiXCIsIGxvY2FsX2lkOnN0cmluZyA9IHVuZGVmaW5lZCk6UHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVjaWV2ZV9jb25uZWN0KHBlZXI6UGVlci5EYXRhQ29ubmVjdGlvbikge1xuXG4gICAgfVxuICAgIGVycm9yKGVycm9yOmFueSl7XG5cbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTaW5nbGVfUGxheWVyIGV4dGVuZHMgTmV0d29yayB7XG4gICAgdHlwZSA9IG5ldF90eXBlLnNpbmdsZV9wbGF5ZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBXZWIgZXh0ZW5kcyBOZXR3b3JrIHtcbiAgICB0eXBlID0gbmV0X3R5cGUud2ViO1xuICAgIGFzeW5jIGNvbm5lY3QoYWRkcmVzczogc3RyaW5nLHBhc3N3b3JkID0gXCJcIiwgbG9jYWxfaWQ6c3RyaW5nID0gXCIwXCIpOlByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8Ym9vbGVhbj4oKHJlc29sdmUscmVqZWN0KT0+e1xuICAgICAgICAgICAgbGV0IHBlZXIgPSB0aGlzLmxvY2FsX2Nvbm5lY3Rpb24uY29ubmVjdChhZGRyZXNzKTtcbiAgICAgICAgICAgIHBlZXIub24oXCJvcGVuXCIsKCk9PntcbiAgICAgICAgICAgICAgICBsZXQgZW50cnk6cGVlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRlZDpmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbjpwZWVyLFxuICAgICAgICAgICAgICAgICAgICBwZWVyX2lkOmFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsX2lkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGVlcl9jb25uZWN0aW9ucy5wdXNoKGVudHJ5KTtcbiAgICAgICAgICAgICAgICBwZWVyLnNlbmQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOlwicGFzc3dvcmRcIixcbiAgICAgICAgICAgICAgICAgICAgZGF0YTpwYXNzd29yZFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBwZWVyLm9uKFwiZGF0YVwiLChkKT0+e1xuICAgICAgICAgICAgICAgICAgICBsZXQge3R5cGUsZGF0YX0gPSBKU09OLnBhcnNlKGQpO1xuICAgICAgICAgICAgICAgICAgICBpZih0eXBlID09IFwiYXV0aFwiICYmIGRhdGEucmVzdWx0ID09IFwic3VjY2Vzc1wiICYmICFlbnRyeS5hdXRoZW50aWNhdGVkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LmF1dGhlbnRpY2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVlci5vbihcImRhdGFcIiwgKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQge3R5cGUsZGF0YSxpZH0gPSBKU09OLnBhcnNlKGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVjaWV2ZSh0eXBlLGRhdGEsZW50cnkubG9jYWxfaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cbiAgICBzZW5kKHR5cGU6c3RyaW5nLGRhdGE6YW55KXtcbiAgICAgICAgZm9yKGxldCBwZWVyIG9mIHRoaXMucGVlcl9jb25uZWN0aW9ucyl7XG4gICAgICAgICAgICBwZWVyLmNvbm5lY3Rpb24uc2VuZChKU09OLnN0cmluZ2lmeSh7dHlwZSxkYXRhLGlkOnRoaXMubG9jYWxfaWR9KSlcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWNpZXZlX2Nvbm5lY3QocGVlcjpQZWVyLkRhdGFDb25uZWN0aW9uKXtcbiAgICAgICAgbGV0IGVudHJ5OnBlZXIgPSB7XG4gICAgICAgICAgICBjb25uZWN0aW9uOnBlZXIsXG4gICAgICAgICAgICBhdXRoZW50aWNhdGVkOmZhbHNlLFxuICAgICAgICAgICAgcGVlcl9pZDpwZWVyLnBlZXIsXG4gICAgICAgICAgICBsb2NhbF9pZDp1bmRlZmluZWRcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBlZXJfY29ubmVjdGlvbnMucHVzaChlbnRyeSk7XG4gICAgICAgIHBlZXIub24oXCJkYXRhXCIsKGQpPT57XG4gICAgICAgICAgICBsZXQge3R5cGUsZGF0YX0gPSBKU09OLnBhcnNlKGQpO1xuICAgICAgICAgICAgaWYodHlwZSA9PSBcInBhc3N3b3JkXCIgJiYgZGF0YSA9PSB0aGlzLnBhc3N3b3JkICYmICFlbnRyeS5hdXRoZW50aWNhdGVkKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInBhc3N3b3JkIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgZW50cnkuYXV0aGVudGljYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZW50cnkubG9jYWxfaWQgPSBgJHt0aGlzLmlkX2NvdW50ZXIrK31gXG4gICAgICAgICAgICAgICAgcGVlci5zZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTpcImF1dGhcIixcbiAgICAgICAgICAgICAgICAgICAgZGF0YTp7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6XCJzdWNjZXNzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ25lZF9pZDplbnRyeS5sb2NhbF9pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kKFwiY29ubmVjdGlvblwiLEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzczpwZWVyLnBlZXIsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsX2lkOmVudHJ5LmxvY2FsX2lkXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIGVudHJ5LmF1dGhlbnRpY2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHBlZXIub24oXCJkYXRhXCIsKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHt0eXBlLGRhdGF9ID0gSlNPTi5wYXJzZShkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWNpZXZlKHR5cGUsZGF0YSxlbnRyeS5sb2NhbF9pZCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYodHlwZSA9PSBcInBhc3N3b3JkXCIgJiYgZGF0YSAhPSB0aGlzLnBhc3N3b3JkKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInBhc3N3b3JkIHdyb25nXCIpXG4gICAgICAgICAgICAgICAgcGVlci5zZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTpcImF1dGhcIixcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogXCJmYWlsdXJlXCJcbiAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59IiwiaW1wb3J0IHsgc3RhdGVfZnVuYywgb2JqX3N0YXRlLCBWZWN0b3IsIGRpbWVuc2lvbnMgfSBmcm9tIFwiLi9zdGF0ZVwiO1xuaW1wb3J0IHsgcmVuZGVyX2Z1bmMsIHJlbmRlcl90eXBlICxzY2FsZV90eXBlfSBmcm9tIFwiLi9yZW5kZXJcIjtcbmltcG9ydCB7IFBhcnRpY2xlLCBwb3NpdGlvbmVkX3Nwcml0ZSwgc3ByaXRlLCBzcHJpdGVfZ2VuIH0gZnJvbSBcIi4vc3ByaXRlXCI7XG5pbXBvcnQgeyBjb2xsaXNpb25fYm94IH0gZnJvbSBcIi4vY29sbGlzaW9uXCI7XG5pbXBvcnQgeyBVbmJpbmQsIEJpbmQsIGNvbnRyb2xfZnVuYywgZXhlY190eXBlIH0gZnJvbSBcIi4vY29udHJvbHNcIjtcbmltcG9ydCB7YXVkaW99IGZyb20gXCIuL2F1ZGlvXCI7XG5pbXBvcnQge0RFQlVHLCBjb3B5LCBnYW1lfSBmcm9tIFwiLi4vdmFuXCI7XG5pbXBvcnQgeyBWZWMscm90YXRpb25fbGVuZ3RoLGFuZ2xlX3Rvd2FyZHMgfSBmcm9tIFwiLi9tYXRoXCI7XG5pbXBvcnQge3Jvb3RfcGF0aCxwYXRofSBmcm9tIFwiLi4vbGliL2RlYnVnXCI7IFxuaW1wb3J0IHtUZXh0fSBmcm9tIFwiLi9odWRcIjtcbmltcG9ydCB7ZGlmZiwgc3RyaW5nX2RpY3R9IGZyb20gXCJsaWIvdXRpbHNcIjtcblxuaW50ZXJmYWNlIG9ial9pPFQ+IHtcbiAgc3RhdGVmOiBzdGF0ZV9mdW5jPFQ+LFxuICByZW5kZXJmOiByZW5kZXJfZnVuY1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SWQoYTogb2JqW10sIGlkOiBzdHJpbmcpOiBvYmoge1xuICBmb3IgKGxldCBiID0gMDsgYiA8IGEubGVuZ3RoOyBiKyspIHtcbiAgICBpZiAoYVtiXS5pZCA9PSBpZCkge1xuICAgICAgcmV0dXJuIGFbYl07XG4gICAgfVxuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cblxuXG4vL1RoaXMgY291bnRlciB0cmFja3MgdGhlIGdsb2JhbCBudW1iZXIgb2Ygb2JqZWN0cyBjcmVhdGVkIHNvIGZhclxuLy9hbiBvYmplY3QncyBpZCAoaWYgbm90IG92ZXJ3cml0dGVuKSB3aWxsIGJlIGEgdW5pcXVlIGludGVnZXIsIHdoaWNoXG4vL3VzZXMgdGhpcyBjb3VudGVyLlxubGV0IGNvdW50ZXIgPSAwO1xuXG5pbnRlcmZhY2UgYW5pbV9zdG9yYWdlIHtcbiAgW2luZGV4OiBzdHJpbmddOiBbQXJyYXk8W251bWJlciwgc3ByaXRlXT4sIG51bWJlcl1cbn1cblxuaW50ZXJmYWNlIHZvaWRfZnVuYyB7XG4gICgpOiB2b2lkXG59XG5cbmNsYXNzIGFuaW1hdGlvbnMge1xuICBhbmltYXRpb25zOiBhbmltX3N0b3JhZ2UgPSB7fTtcbiAgLy9UcmFja3MgdGhlIHRpbWUgcGFzc2VkIHNpbmNlIHRoZSBjdXJyZW50IGFuaW1hdGlvblxuICAvL2hhcyBzdGFydGVkIHBsYXlpbmdcbiAgYW5pbWF0aW9uX3RyYWNrZXIgPSAwO1xuICBjdXJyZW50OiBzdHJpbmc7XG4gIGNhbGxiYWNrOiB2b2lkX2Z1bmM7XG4gIGFuaW1hdGluZzpib29sZWFuID0gZmFsc2U7XG4gIC8vZGVmaW5lcyBhbiBhbmltYXRpb24gdGhhdCBjYW4gYmUgcGxheWVkIHVzaW5nIHRoZSBwbGF5IG1ldGhvZFxuICAvL3RoZSBrZXlmcmFtZXMgYXJlIGFuIGFycmF5IG9mIHR1cGxlcyBpbiB0aGUgXG4gIC8vZm9ybWF0IG9mIFsodGltZSBmb3IgdGhpcyBzcHJpdGUgdG8gc2hvdyksIHNwcml0ZV1cbiAgYWRkKG5hbWU6IHN0cmluZywga2V5ZnJhbWVzOiBBcnJheTxbbnVtYmVyLCBzcHJpdGVdPiwgbGVuZ3RoOiBudW1iZXIpIHtcbiAgICB0aGlzLmFuaW1hdGlvbnNbbmFtZV0gPSBba2V5ZnJhbWVzLCBsZW5ndGhdO1xuICB9XG4gIHBsYXkobmFtZTogc3RyaW5nLCBjYWxsYmFjaz86IHZvaWRfZnVuYykge1xuICAgIHRoaXMuY3VycmVudCA9IG5hbWU7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMuYW5pbWF0aW9uX3RyYWNrZXIgPSAwO1xuICB9XG4gIHJlbmRlcmYodDogbnVtYmVyKTogc3ByaXRlIHtcbiAgICBsZXQgY3Vycl9hbmltYXRpb24gPSB0aGlzLmFuaW1hdGlvbnNbdGhpcy5jdXJyZW50XVswXTtcbiAgICBsZXQgbGVuZ3RoOiBudW1iZXIgPSB0aGlzLmFuaW1hdGlvbnNbdGhpcy5jdXJyZW50XVsxXTtcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIGZvciAoOyBpbmRleCA8IGN1cnJfYW5pbWF0aW9uLmxlbmd0aCAtIDE7IGluZGV4KyspIHtcbiAgICAgIGxldCBrZXlmcmFtZV90aW1lID0gY3Vycl9hbmltYXRpb25baW5kZXhdWzBdO1xuICAgICAgbGV0IG5leHRfa2V5ZnJhbWVfdGltZSA9IGN1cnJfYW5pbWF0aW9uW2luZGV4ICsgMV1bMF07XG4gICAgICBpZiAodGhpcy5hbmltYXRpb25fdHJhY2tlciA+PSBrZXlmcmFtZV90aW1lICYmIHRoaXMuYW5pbWF0aW9uX3RyYWNrZXIgPCBuZXh0X2tleWZyYW1lX3RpbWUpIHtcbiAgICAgICAgdGhpcy5hbmltYXRpb25fdHJhY2tlciA9IHRoaXMuYW5pbWF0aW9uX3RyYWNrZXIgKyB0O1xuICAgICAgICB0aGlzLmFuaW1hdGluZyA9IHRydWU7XG4gICAgICAgIC8vUmV0dXJucyB0aGUgcmF3IHNwcml0ZSB0aGF0J3MgY29ycmVjdCB0byBzaG93IGF0IHRoaXMgdGltZVxuICAgICAgICByZXR1cm4gY3Vycl9hbmltYXRpb25baW5kZXhdWzFdO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5hbmltYXRpb25fdHJhY2tlciA+PSBsZW5ndGgpIHtcbiAgICAgIHRoaXMuYW5pbWF0aW9uX3RyYWNrZXIgPSAwO1xuICAgICAgdGhpcy5hbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgIGlmICh0aGlzLmNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLmFuaW1hdGlvbl90cmFja2VyICs9IHQ7XG4gICAgfVxuICAgIC8vUmV0dXJucyB0aGUgbGFzdCBhcHByb3ByaWF0ZSBmcmFtZSB1bnRpbCB0aGUgYW5pbWF0aW9uIGlzIG92ZXIuXG4gICAgcmV0dXJuIGN1cnJfYW5pbWF0aW9uW2luZGV4XVsxXTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgaGl0Ym94e1xuICB3aWR0aDpudW1iZXIsXG4gIGhlaWdodDpudW1iZXIsXG4gIHhfb2Zmc2V0Om51bWJlcixcbiAgeV9vZmZzZXQ6bnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgcGFyYW1ze1xuICBbaW5kZXg6c3RyaW5nXTpib29sZWFufHN0cmluZ3xudW1iZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBib3VuZGluZ19ib3h7XG4gIGJvdHRvbV9sZWZ0OlZlY3RvcixcbiAgdG9wX3JpZ2h0OlZlY3RvclxufVxuXG5pbnRlcmZhY2UgY2FjaGVfZW50cmllc3tcbiAgW2luZGV4OnN0cmluZ106YW55XG59XG5cbmludGVyZmFjZSBzdHJpbmdfbWFwPFQ+e1xuICBbaW5kZXg6c3RyaW5nXTpUXG59XG5cbmludGVyZmFjZSBldmVudF9oYW5kbGVye1xuICB0eXBlOnN0cmluZyxcbiAgaW5kZXg6bnVtYmVyXG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBvYmp7XG4gIC8vVXJsIHRvIHRoZSBvYmplY3QncyBpbmRpdmlkdWFsIHNwcml0ZSwgb3IgYWxsIG9mIGl0cyBzcHJpdGVzXG4gIC8vYnVuZGxlZCBpbnRvIGEgc3ByaXRlc2hlZXRcbiAgc3ByaXRlX3VybCA9IFwiLi9zcHJpdGVzL0Vycm9yLnBuZ1wiO1xuICAvL1RoaXMgaXMgdGhlIGxvYWRlZCBzcHJpdGUvc3ByaXRlc2hlZXQgb2YgdGhlIG9iamVjdFxuICAvL3doaWNoIGlzIGZldGNoZWQgZnJvbSB0aGUgdXJsIGFib3ZlXG4gIHNwcml0ZV9zaGVldDogSFRNTEltYWdlRWxlbWVudDtcbiAgc3ByaXRlX3NoZWV0X2Jhc2U2NDpzdHJpbmc7XG4gIHN0YXRlOiBvYmpfc3RhdGU7XG4gIHJlbmRlcl90eXBlID0gcmVuZGVyX3R5cGUuc3ByaXRlO1xuICAvL1RoZXNlIHNob3VsZCBjb3JyZXNwb25kIHRvIHRoZSBhY3R1YWwgb2JqZWN0J3Mgc3ByaXRlIGhlaWdodCBhbmQgd2lkdGhcbiAgLy9JZiB1c2luZyBhIHNwcml0ZSBzaGVldCwgdGhlc2UgYmUgb25lIHNwcml0ZSdzIGhlaWdodCBhbmQgd2lkdGguXG4gIGhlaWdodDogbnVtYmVyO1xuICB3aWR0aDogbnVtYmVyO1xuICBcbiAgY29sbGlzaW9uOiBib29sZWFuID0gZmFsc2U7XG4gIGhpdGJveDogaGl0Ym94XG4gIGlkOiBzdHJpbmc7XG4gIC8vQXJyYXkgb2YgYmluZCBpZHNcbiAgLy9CaW5kcyBhcmUgaW5kZW50aWZpZWQgYnkgYSB1bmlxdWUgbnVtYmVyIHRoYXQgaXMgcmV0dXJuIHdoZW5cbiAgLy9UaGUgYmluZCBpcyBjcmVhdGVkLiBXZSBtdXN0IHN0b3JlIHRoZXNlIGlkcyBpbiBvcmRlciB0byBcbiAgLy9kZWxldGUgdGhlIGJpbmRzIHdoZW4gdGhleSBhcmUgbWFudWFsbHkgdW5ib3VuZCwgb3IgdGhlIG9iamVjdCBpcyBkZWxldGVkLlxuICBiaW5kczogQXJyYXk8bnVtYmVyPjtcbiAgdGFnczpTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgLy90YWdzIGFyZSB1c2VkIHRvIGV4Y2x1ZGUgb3IgaW5jbHVkZSBvYmplY3RzIHdoZW4gY2hlY2tpbmcgZm9yIGNvbGxpc2lvbnMsXG4gIC8vYW5kIGZvciBvYmplY3QgaWRlbnRpZmljYXRpb24gLyBjbGFzc2lmaWNhdGlvbiBpbiBzY3JpcHRzXG4gIHJlbmRlciA9IHRydWU7XG4gIGFuaW1hdGlvbnMgPSBuZXcgYW5pbWF0aW9ucygpO1xuICBhdWRpbyA9IG5ldyBhdWRpbygpO1xuICAvL0xhc3QgcmVuZGVyIHRpbWUsIHVzZWQgdG8gY2FsY3VsYXRlIGRlbHRhX3RpbWVcbiAgbGFzdF9yZW5kZXI6bnVtYmVyID0gMDtcbiAgZ2FtZTpnYW1lPHVua25vd24+O1xuICBwYXJlbnQ6Y29tcG9zaXRlX29iajtcbiAgLy9QYXJhbXMgYXJlIG9wdGlvbnMgZm9yIHRoZSBvYmplY3QsIHRoYXQgZG8gbm90IHJlbHkgb24gc3RhdGVcbiAgLy8gRm9yIGV4YW1wbGUsIHRoZSBzaWRlIG9mIGEgcGllY2UgaW4gY2hlc3MuXG4gIHBhcmFtczp1bmtub3duID0ge307XG4gIHN0YXRpYyA9IGZhbHNlO1xuICBsYXllcjpudW1iZXIgPSAxO1xuICBzYXZlX3RvX2ZpbGU6Ym9vbGVhbiA9IHRydWU7XG4gIHRpY2tfc3RhdGUgPSB0cnVlO1xuICBzY2FsZV90eXBlID0gc2NhbGVfdHlwZS5ncm93O1xuICBzdGF0aWMgZGVmYXVsdF9wYXJhbXM6dW5rbm93biA9IHt9O1xuICBwcm94aW1pdHlfYm94ZXM6U2V0PFZlY3Rvcj4gPSBuZXcgU2V0KCk7XG4gIG9wYWNpdHk6bnVtYmVyO1xuICBodWRfY2xpY2thYmxlOmJvb2xlYW4gPSB0cnVlO1xuICBpbmZvOnN0cmluZ19tYXA8YW55PiA9IHt9XG4gIHRleHRfbm9kZXM6VGV4dFtdID0gW107XG4gIGNhY2hlX2VudHJpZXM6c3RyaW5nX21hcDxhbnk+ID0ge307XG4gIGludGVybmFsX2NhY2hlOnN0cmluZ19tYXA8YW55PiA9IHt9O1xuICBzdGF0ZV9wcm9wZXJ0aWVzX3RvX3N5bmM6c3RyaW5nW10gPSBbXTtcbiAgcGFzdF9zdGF0ZTpzdHJpbmdfbWFwPHN0cmluZz4gPSB7fTtcbiAgZGlmZl9zdGF0ZTpzdHJpbmdfbWFwPHN0cmluZz4gPSB7fTtcbiAgZXZlbnRfaGFuZGxlcnM6c3RyaW5nX21hcDx2b2lkX2Z1bmNbXT4gPSB7fTtcbiAgZ2V0U3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gIH1cbiAgLy9BbmltYXRpb25zIHNob3VsZCBiZSByZWdpc3RlcmVkIHVzaW5nIHRoaXMuYW5pbWF0aW9ucy5hZGQgaW4gdGhpcyBtZXRob2RcbiAgcmVnaXN0ZXJBbmltYXRpb25zKCkge1xuXG4gIH1cbiAgLy9Tb3VuZHMgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgdXNpbmcgdGhpcy5hdWRpby5hZGQgaW4gdGhpcyBtZXRob2QuXG4gIHJlZ2lzdGVyQXVkaW8oKSB7XG5cbiAgfVxuICByZWdpc3RlckV2ZW50cygpe1xuXG4gIH1cbiAgcmVtb3ZlQWxsRXZlbnRIYW5kbGVycygpe1xuICAgIHRoaXMuZXZlbnRfaGFuZGxlcnMgPSB7fTtcbiAgfVxuICByZW1vdmVFdmVudEhhbmRsZXIoZXZlbnQ6ZXZlbnRfaGFuZGxlcil7XG4gICAgdGhpcy5ldmVudF9oYW5kbGVyc1tldmVudC50eXBlXS5zcGxpY2UoZXZlbnQuaW5kZXgsMSk7XG4gIH1cbiAgYWRkRXZlbnRIYW5kbGVyKGV2ZW50OnN0cmluZyxmdW5jOnZvaWRfZnVuYyk6ZXZlbnRfaGFuZGxlcntcbiAgICBpZighdGhpcy5ldmVudF9oYW5kbGVyc1tldmVudF0pe1xuICAgICAgdGhpcy5ldmVudF9oYW5kbGVyc1tldmVudF0gPSBbXTtcbiAgICB9XG4gICAgdGhpcy5ldmVudF9oYW5kbGVyc1tldmVudF0ucHVzaChmdW5jKTtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTpldmVudCxcbiAgICAgIGluZGV4OnRoaXMuZXZlbnRfaGFuZGxlcnNbZXZlbnRdLmluZGV4T2YoZnVuYylcbiAgICB9XG4gIH1cbiAgZXZlbnQoZXZlbnQ6c3RyaW5nKXtcbiAgICBpZih0aGlzLmV2ZW50X2hhbmRsZXJzW2V2ZW50XSl7XG4gICAgICBmb3IobGV0IGZ1bmMgb2YgdGhpcy5ldmVudF9oYW5kbGVyc1tldmVudF0pe1xuICAgICAgICBmdW5jKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGRlZmF1bHRQYXJhbXMoKTp1bmtub3due1xuICAgIHJldHVybiBjb3B5KHRoaXMuZGVmYXVsdFBhcmFtcyk7XG4gIH1cbiAgeF9wcm94eSh2YWw6bnVtYmVyKXtcbiAgICByZXR1cm4gdmFsO1xuICB9XG4gIHlfcHJveHkodmFsOm51bWJlcil7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuICByZWNhbGN1bGF0ZVByb3hCb3hlcygpe1xuICAgIGxldCBib3VuZHMgPSB0aGlzLmdldEJvdW5kaW5nQm94KCk7XG4gICAgICAgICAgXG4gICAgbGV0IHByb3hfbWFwID0gdGhpcy5nYW1lLmdldFJvb20oKS5wcm94aW1pdHlfbWFwO1xuICAgIGxldCBib3hlcyA9IHByb3hfbWFwLmdldEJveExvY2F0aW9ucyh0aGlzKTtcbiAgICBmb3IgKGxldCBjb3JkIG9mIHRoaXMucHJveGltaXR5X2JveGVzKSB7XG4gICAgICBwcm94X21hcC5yZW1vdmUoY29yZCwgdGhpcyk7XG4gICAgfVxuICAgIGZvciAobGV0IGNvcmQgb2YgYm94ZXMpIHtcbiAgICAgIHByb3hfbWFwLmFkZChjb3JkLCB0aGlzKTtcbiAgICB9ICBcbiAgfVxuICBjb25zdHJ1Y3RvcihzdGF0ZTpvYmpfc3RhdGUscGFyYW1zID0gb2JqLmRlZmF1bHRfcGFyYW1zKSB7XG5cbiAgICB0aGlzLmlkID0gXCJcIiArIGNvdW50ZXI7XG4gICAgdGhpcy5iaW5kcyA9IFtdO1xuICAgIGNvdW50ZXIrKztcbiAgICB0aGlzLnBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30scGFyYW1zKTtcbiAgICB0aGlzLnJlZ2lzdGVyQ29udHJvbHMoKTtcbiAgICB0aGlzLnJlZ2lzdGVyQXVkaW8oKTtcbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnRzKCk7XG4gICAgbGV0IHBvc2l0aW9uX3Byb3h5ID0gKHBvczpWZWN0b3IpID0+IG5ldyBQcm94eShwb3MsIHtcbiAgICAgIFwic2V0XCI6ICh0YXJnZXQsIHByb3AsIHJlY2lldmVyOiBudW1iZXIpID0+IHtcblxuICAgICAgICBpZiAocHJvcCA9PSBcInlcIiB8fCBwcm9wID09IFwieFwiKSB7XG4gICAgICAgICAgaWYgKHRhcmdldFtwcm9wXSA9PSByZWNpZXZlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCByb29tID0gdGhpcy5nYW1lLmdldFJvb20oKTtcbiAgICAgICAgICBsZXQgb2Zmc2V0ID0gMFxuICAgICAgICAgIGlmIChwcm9wID09IFwieVwiKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSB0aGlzLmdldEZ1bGxDb2xsaXNpb25Cb3goKS5oZWlnaHQgLyAyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChwcm9wID09IFwieFwiKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSB0aGlzLmdldEZ1bGxDb2xsaXNpb25Cb3goKS53aWR0aCAvIDI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChyZWNpZXZlciA+IDApIHtcbiAgICAgICAgICAgIG9mZnNldCA9IC1vZmZzZXQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChyZWNpZXZlciA+IHJvb20ucHJveGltaXR5X21hcC5sZW5ndGggLyAyICsgb2Zmc2V0KSB7XG4gICAgICAgICAgICByZWNpZXZlciA9IHJvb20ucHJveGltaXR5X21hcC5sZW5ndGggLyAyICsgb2Zmc2V0O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocmVjaWV2ZXIgPCAtcm9vbS5wcm94aW1pdHlfbWFwLmxlbmd0aCAvIDIgKyBvZmZzZXQpIHtcbiAgICAgICAgICAgIHJlY2lldmVyID0gLXJvb20ucHJveGltaXR5X21hcC5sZW5ndGggLyAyICsgb2Zmc2V0XG4gICAgICAgICAgfVxuICAgICAgICAgIHRhcmdldFtwcm9wXSA9IHRoaXMueF9wcm94eShyZWNpZXZlcik7XG4gICAgICAgICAgdGhpcy5yZWNhbGN1bGF0ZVByb3hCb3hlcygpO1xuICAgICAgICAgIGlmKHRoaXMuc3RhdGljKXtcbiAgICAgICAgICAgIGxldCBjb2xfYm94ID0gdGhpcy5nZXRGdWxsQ29sbGlzaW9uQm94KCk7XG4gICAgICAgICAgICBjb2xfYm94LmhlaWdodCA9IGNvbF9ib3guaGVpZ2h0ICsgMiAqIHRoaXMuZ2FtZS5nZXRSb29tKCkucHJveGltaXR5X21hcC5zcXVhcmVfbGVuZ3RoO1xuICAgICAgICAgICAgY29sX2JveC53aWR0aCA9IGNvbF9ib3gud2lkdGggKyAyICogdGhpcy5nYW1lLmdldFJvb20oKS5wcm94aW1pdHlfbWFwLnNxdWFyZV9sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLmdhbWUudXBkYXRlU3RhdGljc0luQ29sbGlzaW9uKGNvbF9ib3gpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsZXQgc2NhbGluZ19wcm94eSA9IChhOmRpbWVuc2lvbnMpID0+IG5ldyBQcm94eShhLHtcbiAgICAgIFwic2V0XCIgOiAodGFyZ2V0LHByb3AscmVjaWV2ZXI6bnVtYmVyKSA9PiB7XG4gICAgICAgIGlmKHByb3AgPT0gXCJ3aWR0aFwiIHx8IHByb3AgPT0gXCJoZWlnaHRcIil7XG4gICAgICAgICAgdGFyZ2V0W3Byb3BdID0gcmVjaWV2ZXI7XG4gICAgICAgICAgdGhpcy5yZWNhbGN1bGF0ZVByb3hCb3hlcygpO1xuICAgICAgICAgIGlmKHRoaXMuc3RhdGljKXtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS51cGRhdGVTdGF0aWNzSW5Db2xsaXNpb24odGhpcy5nZXRGdWxsQ29sbGlzaW9uQm94KCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICAvL0NyZWF0ZXMgYSBjb3B5IG9mIHRoZSBwYXNzZWQgaW4gaW5pdGlhbCBzdGF0ZSB0byBhdm9pZCBcbiAgICAvL1VwZGF0aW5nIHRoZSBzYXZlZCBzdGF0ZSBvZiB0aGUgcm9vbVxuICAgIHRoaXMuc3RhdGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHN0YXRlKSk7XG4gICAgdGhpcy5pbmZvID0ge1xuICAgICAgb25faHVkX2xheWVyOmZhbHNlXG4gICAgfVxuICAgIGlmKCFzdGF0ZS52ZWxvY2l0eSl7XG4gICAgICB0aGlzLnN0YXRlLnZlbG9jaXR5ID0gVmVjLmNyZWF0ZSgwLDApO1xuICAgIH1cbiAgICBpZighc3RhdGUuc2NhbGluZyl7XG4gICAgICB0aGlzLnN0YXRlLnNjYWxpbmcgPSB7aGVpZ2h0OjEsd2lkdGg6MX07XG4gICAgfVxuICAgIGlmKCFzdGF0ZS5yb3RhdGlvbil7XG4gICAgICB0aGlzLnN0YXRlLnJvdGF0aW9uID0gMDtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZSA9IG5ldyBQcm94eSh0aGlzLnN0YXRlLHtcbiAgICAgIFwic2V0XCI6ICh0YXJnZXQsIHByb3AsIHJlY2lldmVyOiB1bmtub3duKSA9PiB7XG4gICAgICAgIGlmIChwcm9wID09IFwicG9zaXRpb25cIikge1xuICAgICAgICAgIGxldCByZXMgPSByZWNpZXZlciBhcyBWZWN0b3I7XG4gICAgICAgICAgbGV0IHZlYyA9IFZlYy5jcmVhdGUocmVzLngscmVzLnkpO1xuICAgICAgICAgIHRhcmdldFtwcm9wXSA9IHBvc2l0aW9uX3Byb3h5KHZlYyk7XG4gICAgICAgICAgaWYodGhpcy5nYW1lICYmIHRoaXMuZ2FtZS5nZXRSb29tKCkpe1xuICAgICAgICAgICAgdGhpcy5yZWNhbGN1bGF0ZVByb3hCb3hlcygpO1xuICAgICAgICAgICAgaWYodGhpcy5zdGF0aWMpe1xuICAgICAgICAgICAgICB0aGlzLmdhbWUudXBkYXRlU3RhdGljc0luQ29sbGlzaW9uKHRoaXMuZ2V0RnVsbENvbGxpc2lvbkJveCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZihwcm9wID09IFwic2NhbGluZ1wiKXtcbiAgICAgICAgICBsZXQgcmVzID0gcmVjaWV2ZXIgYXMgZGltZW5zaW9ucztcbiAgICAgICAgICBsZXQgZGltID0ge3dpZHRoOnJlcy53aWR0aCxoZWlnaHQ6cmVzLmhlaWdodH07XG4gICAgICAgICAgdGFyZ2V0W3Byb3BdID0gc2NhbGluZ19wcm94eShkaW0pO1xuICAgICAgICAgIGlmKHRoaXMuZ2FtZSAmJiB0aGlzLmdhbWUuZ2V0Um9vbSgpKXtcbiAgICAgICAgICAgIHRoaXMucmVjYWxjdWxhdGVQcm94Qm94ZXMoKTtcbiAgICAgICAgICAgIGlmKHRoaXMuc3RhdGljKXtcbiAgICAgICAgICAgICAgdGhpcy5nYW1lLnVwZGF0ZVN0YXRpY3NJbkNvbGxpc2lvbih0aGlzLmdldEZ1bGxDb2xsaXNpb25Cb3goKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgKHRhcmdldCBhcyBhbnkpW3Byb3BdID0gcmVjaWV2ZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5zdGF0ZS5wb3NpdGlvbiA9IHBvc2l0aW9uX3Byb3h5KHRoaXMuc3RhdGUucG9zaXRpb24pOyBcbiAgICB0aGlzLnN0YXRlLnNjYWxpbmcgPSBzY2FsaW5nX3Byb3h5KHRoaXMuc3RhdGUuc2NhbGluZyk7XG4gICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gIH1cbiAgbXV0YXRlKGtleTpzdHJpbmcsdmFsdWU6YW55KXtcbiAgICAoPGFueT50aGlzKVtrZXldID0gdmFsdWU7XG4gIH1cbiAgZ2V0Um9vbTxUPigpOlR7XG4gICAgcmV0dXJuIHRoaXMuZ2FtZS5nZXRSb29tKCkgYXMgdW5rbm93biBhcyBUO1xuICB9XG5cbiAgbG9hZCgpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgIGxldCB1cmwgPSB0aGlzLnNwcml0ZV91cmw7XG4gICAgICBpZihERUJVRyl7XG4gICAgICAgIHVybCA9IHBhdGguam9pbihyb290X3BhdGgsdGhpcy5zcHJpdGVfdXJsKTtcbiAgICAgIH1cbiAgICAgIGltYWdlLnNyYyA9IHVybDtcbiAgICAgIGltYWdlLm9ubG9hZCA9IChhc3luYyAoKSA9PiB7XG4gICAgICAgIF90aGlzLnNwcml0ZV9zaGVldCA9IGltYWdlO1xuICAgICAgICBfdGhpcy5yZWdpc3RlckFuaW1hdGlvbnMoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5hdWRpby5sb2FkKCk7XG4gICAgICAgIC8qd29ya2VyX3Bvb2wuc2VuZF9hbGwoXCJzcHJpdGVfc2hlZXRfY2FjaGVcIix7XG4gICAgICAgICAgbmFtZTp0aGlzLmNvbnN0cnVjdG9yLm5hbWUsXG4gICAgICAgICAgZW5jb2RlZFxuICAgICAgICB9KTtcbiAgICAgICAgKi9cbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgfSlcbiAgfVxuICAvL1dpdGhpbiBub3JtYWwgb2JqZWN0cywgdGhpcyBqdXN0IHJldHVybnMgYW4gYXJyYXkgdGhhdCBjb250YWlucyB0aGUgb2JqZWN0LlxuICAvL1RoaXMgbWV0aG9kIGlzIG92ZXJ3cml0dGVuIGJ5IGNvbXBvc2l0ZSBvYmplY3RzLCB3aGljaCByZXR1cm5zIGV2ZXJ5IG9iamVjdFxuICAvL3RoYXQgdGhlIGNvbXBvc2l0ZSBvYmplY3QgY29udGFpbnMuIFRoaXMgc2ltcGxpZmllcyB0aGUgYmFja2VuZCB3b3JrLCBhcyBlYWNoXG4gIC8vb2JqZWN0IHJldHVybnMgYW4gYXJyYXkgb2YgYXRsZWFzdCBvbmUgb2JqZWN0LlxuICBjb21iaW5lZE9iamVjdHMoKTpvYmpbXXtcbiAgICByZXR1cm4gW3RoaXNdO1xuICB9XG4gIGdldEJvdW5kaW5nQm94KCk6Ym91bmRpbmdfYm94e1xuICAgIGxldCBjb2xsX2JveCA9IHRoaXMuZ2V0RnVsbENvbGxpc2lvbkJveCgpO1xuICAgIHJldHVybiB7XG4gICAgICB0b3BfcmlnaHQ6e1xuICAgICAgICB4OmNvbGxfYm94LnggKyBjb2xsX2JveC53aWR0aC8yLFxuICAgICAgICB5OmNvbGxfYm94LnkgKyBjb2xsX2JveC5oZWlnaHQvMlxuICAgICAgfSxcbiAgICAgIGJvdHRvbV9sZWZ0OntcbiAgICAgICAgeDpjb2xsX2JveC54IC0gY29sbF9ib3gud2lkdGgvMixcbiAgICAgICAgeTpjb2xsX2JveC55IC0gY29sbF9ib3guaGVpZ2h0LzJcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy9EaXN0YW5jZSBmcm9tIG9uZSBvYmplY3QgdG8gYW5vdGhlci5cbiAgZGlzdGFuY2UodGFyZ2V0Om9iaik6bnVtYmVye1xuICAgIHJldHVybiBWZWMuZGlzdGFuY2UodGhpcy5zdGF0ZS5wb3NpdGlvbix0YXJnZXQuc3RhdGUucG9zaXRpb24pO1xuICB9XG4gIGFwcGx5Rm9yY2UodmVsOlZlY3Rvcil7XG4gICAgdGhpcy5zdGF0ZS52ZWxvY2l0eS54ICs9IHZlbC54O1xuICAgIHRoaXMuc3RhdGUudmVsb2NpdHkueSArPSB2ZWwueTtcbiAgfVxuICBhbmdsZVRvd2FyZHMoYTogb2JqKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5hbmdsZVRvd2FyZHNQb2ludChhLnN0YXRlLnBvc2l0aW9uKTtcbiAgfVxuICBhbmdsZVRvd2FyZHNQb2ludCh0YXJnZXQ6VmVjdG9yKTpudW1iZXJ7XG4gICAgcmV0dXJuIDkwIC0gTWF0aC5hdGFuMigodGFyZ2V0LnkgLSB0aGlzLnN0YXRlLnBvc2l0aW9uLnkpLCh0YXJnZXQueCAtIHRoaXMuc3RhdGUucG9zaXRpb24ueCkpICogMTgwL01hdGguUEk7XG4gIH1cbiAgYmluZENvbnRyb2woa2V5OiBzdHJpbmcsIHg6IGV4ZWNfdHlwZSwgZnVuYzogY29udHJvbF9mdW5jLCBpbnRlcnZhbCA9IDEpIHtcbiAgICB0aGlzLmJpbmRzLnB1c2goQmluZChrZXksIGZ1bmMsIHgsIGludGVydmFsLCBmYWxzZSwgdGhpcykpO1xuICB9XG4gIC8vVGhpcyBtZXRob2QgaXMgd2hlcmUgY29udHJvbHMgYW5kIGtleWJpbmRzIHNob3VsZFxuICAvL2JlIGRlZmluZWQgdXNpbmcgYmluZENvbnRyb2xcbiAgcmVnaXN0ZXJDb250cm9scygpe1xuXG4gIH1cbiAgc3RhdGVmKHRpbWU6bnVtYmVyKXtcbiAgICBmb3IobGV0IG5vZGUgb2YgdGhpcy50ZXh0X25vZGVzKXtcbiAgICAgIG5vZGUuc3RhdGVmKHRpbWUpO1xuICAgIH1cbiAgICBpZih0aGlzLnN0YXRlX3Byb3BlcnRpZXNfdG9fc3luYy5sZW5ndGggPiAwKXtcbiAgICAgIGxldCBuZXR3b3JrX3Byb3BlcnRpZXM6c3RyaW5nX2RpY3Q8c3RyaW5nPiA9IHt9XG4gICAgICBsZXQgc3RhdGUgPSB0aGlzLnN0YXRlIGFzIGFueTtcbiAgICAgIGlmKHRoaXMuc3RhdGVfcHJvcGVydGllc190b19zeW5jKXtcbiAgICAgICAgZm9yKGxldCBrZXkgb2YgdGhpcy5zdGF0ZV9wcm9wZXJ0aWVzX3RvX3N5bmMpe1xuICAgICAgICAgIG5ldHdvcmtfcHJvcGVydGllc1trZXldID0gSlNPTi5zdHJpbmdpZnkoc3RhdGVba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuZGlmZl9zdGF0ZSA9IGRpZmYodGhpcy5wYXN0X3N0YXRlLG5ldHdvcmtfcHJvcGVydGllcylcbiAgICAgIHRoaXMucGFzdF9zdGF0ZSA9IG5ldHdvcmtfcHJvcGVydGllcztcbiAgICB9XG4gIH1cbiAgZGVsZXRlKCkge1xuICAgIGZvciAobGV0IGEgb2YgdGhpcy5iaW5kcykge1xuICAgICAgVW5iaW5kKGEpO1xuICAgIH1cbiAgICBmb3IgKGxldCBjb3JkIG9mIHRoaXMucHJveGltaXR5X2JveGVzKXtcbiAgICAgIHRoaXMuZ2FtZS5nZXRSb29tKCkucHJveGltaXR5X21hcC5yZW1vdmUoY29yZCx0aGlzKTtcbiAgICB9XG4gICAgdGhpcy5nYW1lLmdldFJvb20oKS5kZWxldGVJdGVtKHRoaXMuaWQpO1xuICAgIGlmKHRoaXMuc3RhdGljKXtcbiAgICAgIHRoaXMuZ2FtZS51cGRhdGVTdGF0aWNzSW5Db2xsaXNpb24odGhpcy5nZXRGdWxsQ29sbGlzaW9uQm94KCkpO1xuICAgIH1cbiAgfVxuICBVbmJpbmRBbGwoKXtcbiAgICBmb3IgKGxldCBhIG9mIHRoaXMuYmluZHMpIHtcbiAgICAgIFVuYmluZChhKTtcbiAgICB9XG4gIH1cbiAgLy9SZXR1cm5zIHRoZSBjb2xsaXNpb24gYm94IG9mIHRoZSBvYmplY3RcbiAgLy9Eb2VzIG5vdCBoYXZlIHRvIGNvcnJlc3BvbmQgdG8gdGhlIG9iamVjdCdzIHNwcml0ZSdzIHNpemUgXG4gIC8vQSBjb21wb3NpdGUgb2JqZWN0IGluc3RlYWQgcmV0dXJucyB0aGUgYm91bmRpbmcgYm94IHRoYXQgXG4gIC8vY29udGFpbnMgZXZlcnkgb25lIG9mIGl0cyBjb250YWluZWQgb2JqZWN0c1xuICBnZXRGdWxsQ29sbGlzaW9uQm94KCk6Y29sbGlzaW9uX2JveHtcbiAgICAvL0lmIGEgZGV2ZWxvcGVyIGRlZmluZWQgaGl0Ym94IGV4aXN0cywgdXNlIHRoYXQsIG90aGVyd2lzZVxuICAgIC8vZ2VuZXJhdGUgaXQgdXNpbmcgdGhlIHNwcml0ZSB3aWR0aCAvIGhlaWdodFxuICAgIGlmKHRoaXMuaGl0Ym94KXtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHg6dGhpcy5zdGF0ZS5wb3NpdGlvbi54LFxuICAgICAgICB5OnRoaXMuc3RhdGUucG9zaXRpb24ueSxcbiAgICAgICAgd2lkdGg6dGhpcy5oaXRib3gud2lkdGggKiB0aGlzLnN0YXRlLnNjYWxpbmcud2lkdGgsXG4gICAgICAgIGhlaWdodDp0aGlzLmhpdGJveC5oZWlnaHQgKiB0aGlzLnN0YXRlLnNjYWxpbmcuaGVpZ2h0XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB4OnRoaXMuc3RhdGUucG9zaXRpb24ueCxcbiAgICAgICAgeTp0aGlzLnN0YXRlLnBvc2l0aW9uLnksXG4gICAgICAgIHdpZHRoOnRoaXMud2lkdGggKiB0aGlzLnN0YXRlLnNjYWxpbmcud2lkdGgsXG4gICAgICAgIGhlaWdodDp0aGlzLmhlaWdodCAqIHRoaXMuc3RhdGUuc2NhbGluZy5oZWlnaHRcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy9UaGlzIGlzIGFub3RoZXIgbWV0aG9kcywgc2ltaWxhciB0byBnZXRDb21iaW5lZFxuICAvL0p1c3QgcmV0dXJucyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBvYmplY3QncyBjb2xsaXNpb24gYm94XG4gIC8vT3ZlcndyaXR0ZW4gaW4gY29tcG9zaXRlIG9iamVjdHMgdG8gcmV0dXJuIGV2ZXJ5IG9iamVjdCdzIGNvbGxpc2lvbiBib3hcbiAgLy93aXRoaW4gdGhlIGNvbXBvc2l0ZSBvYmVjdC5cbiAgZ2V0QWxsQ29sbGlzaW9uQm94ZXMoKTpjb2xsaXNpb25fYm94W117XG4gICAgcmV0dXJuIFt0aGlzLmdldEZ1bGxDb2xsaXNpb25Cb3goKV1cbiAgfVxuICBjYWNoZShrZXk6c3RyaW5nLHZhbHVlPzphbnksKXtcbiAgICBpZighdGhpcy5jYWNoZV9lbnRyaWVzW2tleV0pe1xuICAgICAgdGhpcy5jYWNoZV9lbnRyaWVzW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2FjaGVfZW50cmllc1trZXldO1xuICB9XG4gIGNvbGxpZGVzV2l0aFBvaW50KHBvaW50OlZlY3Rvcik6Ym9vbGVhbntcbiAgICByZXR1cm4gdGhpcy5jb2xsaWRlc1dpdGhCb3goe3g6cG9pbnQueCx5OnBvaW50LnksaGVpZ2h0OjAsd2lkdGg6MH0pO1xuICB9XG4gIC8vQ2hlY2tzIHRvIHNlZSBpZiBhbiBvYmplY3QgYWN0dWFsbHkgY29sbGlkZXMgd2l0aCB0aGUgcHJvdmlkZWQgYm94LlxuICAvL0EgYm94IHJlcHJlc2VudHMgYW4gYXJlYSB3aXRoaW4gdGhlIGdhbWUgc3BhY2VcbiAgLy9DaGVja2luZyBmb3IgY29sbGlzaW9ucyBpcyB0cml2aWFsIGN1cnJlbnRseSwgYXMgYWxsIGhpdGJveGVzIGFyZSBheGlzIGFsaWduZWRcbiAgLy9CdXQgaW1wbGVtZW50aW5nIGEgbW9yZSBjb21wbGljYXRlZCBwaHlzaWNzIGVuZ2luZSB3b3VsZCBtYWtlIHRoaXMgbWV0aG9kJ3MgaW1wbC5cbiAgLy9zaWduaWZpY2F0bHkgbW9yZSBjb21wbGV4LlxuICBjb2xsaWRlc1dpdGhCb3gob3RoZXJfb2JqZWN0OiBjb2xsaXNpb25fYm94KTogYm9vbGVhbiB7XG4gICAgbGV0IGNvbGxpZGVzX2hvcnJpem9udGFsbHkgPSBmYWxzZSwgY29sbGlkZXNfdmVydGljYWxseSA9IGZhbHNlO1xuICAgIGxldCBoYm94ID0gdGhpcy5oaXRib3g7XG4gICAgaWYoIXRoaXMuaGl0Ym94KXtcbiAgICAgIGhib3ggPSB7XG4gICAgICAgIHhfb2Zmc2V0OjAsXG4gICAgICAgIHlfb2Zmc2V0OjAsXG4gICAgICAgIHdpZHRoOnRoaXMud2lkdGgsXG4gICAgICAgIGhlaWdodDp0aGlzLmhlaWdodFxuICAgICAgfVxuICAgIH1cbiAgICBsZXQgb2JqZWN0X2JvdW5kcyA9IHtcbiAgICAgIGxlZnQ6ICh0aGlzLnN0YXRlLnBvc2l0aW9uLnggKyBoYm94Lnhfb2Zmc2V0IC0gaGJveC53aWR0aCAqIHRoaXMuc3RhdGUuc2NhbGluZy53aWR0aCAvIDIpLFxuICAgICAgcmlnaHQ6ICh0aGlzLnN0YXRlLnBvc2l0aW9uLnggKyBoYm94Lnhfb2Zmc2V0ICsgaGJveC53aWR0aCAqIHRoaXMuc3RhdGUuc2NhbGluZy53aWR0aCAvIDIpLFxuICAgICAgdG9wOiAodGhpcy5zdGF0ZS5wb3NpdGlvbi55ICsgaGJveC55X29mZnNldCArIGhib3guaGVpZ2h0ICogdGhpcy5zdGF0ZS5zY2FsaW5nLmhlaWdodCAvIDIpLFxuICAgICAgYm90dG9tOiAodGhpcy5zdGF0ZS5wb3NpdGlvbi55ICsgaGJveC55X29mZnNldCAtIGhib3guaGVpZ2h0ICogdGhpcy5zdGF0ZS5zY2FsaW5nLmhlaWdodCAvIDIpXG4gICAgfVxuXG4gICAgbGV0IG90aGVyX29iamVjdF9ib3VuZHMgPSB7XG4gICAgICBsZWZ0OiAob3RoZXJfb2JqZWN0LnggLSBvdGhlcl9vYmplY3Qud2lkdGggLyAyKSxcbiAgICAgIHJpZ2h0OiAob3RoZXJfb2JqZWN0LnggKyBvdGhlcl9vYmplY3Qud2lkdGggLyAyKSxcbiAgICAgIHRvcDogKG90aGVyX29iamVjdC55ICsgb3RoZXJfb2JqZWN0LmhlaWdodCAvIDIpLFxuICAgICAgYm90dG9tOiAob3RoZXJfb2JqZWN0LnkgLSBvdGhlcl9vYmplY3QuaGVpZ2h0IC8gMilcbiAgICB9XG5cbiAgICAvL1dlIGNhbiBjb21wYXJlIHRoZSBzaWRlcyBvZiB0aGUgYm94ZXMgdG8gc2VlIGlmIHRoZXkgb3ZlcmxhcFxuICAgIC8vV2UgY2hlY2sgb25jZSBmb3IgaG9pem9udGFsIG92ZXJsYXAsIHRoZW4gdmVydGljYWwuXG4gICAgaWYgKChvYmplY3RfYm91bmRzLmxlZnQgPj0gb3RoZXJfb2JqZWN0X2JvdW5kcy5sZWZ0ICYmIG9iamVjdF9ib3VuZHMubGVmdCA8IG90aGVyX29iamVjdF9ib3VuZHMucmlnaHQpIHx8IChvdGhlcl9vYmplY3RfYm91bmRzLmxlZnQgPiBvYmplY3RfYm91bmRzLmxlZnQgJiYgb3RoZXJfb2JqZWN0X2JvdW5kcy5sZWZ0IDwgb2JqZWN0X2JvdW5kcy5yaWdodCkpIHtcbiAgICAgIGNvbGxpZGVzX2hvcnJpem9udGFsbHkgPSB0cnVlO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoKG9iamVjdF9ib3VuZHMuYm90dG9tID49IG90aGVyX29iamVjdF9ib3VuZHMuYm90dG9tICYmIG9iamVjdF9ib3VuZHMuYm90dG9tIDwgb3RoZXJfb2JqZWN0X2JvdW5kcy50b3ApIHx8IChvdGhlcl9vYmplY3RfYm91bmRzLmJvdHRvbSA+IG9iamVjdF9ib3VuZHMuYm90dG9tICYmIG90aGVyX29iamVjdF9ib3VuZHMuYm90dG9tIDwgb2JqZWN0X2JvdW5kcy50b3ApKXtcbiAgICAgIGNvbGxpZGVzX3ZlcnRpY2FsbHkgPSB0cnVlO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gY29sbGlkZXNfaG9ycml6b250YWxseSAmJiBjb2xsaWRlc192ZXJ0aWNhbGx5O1xuICB9XG4gIC8vVGhlIHBhcnRpY2xlIG11c3QgYmUgcmVnaXN0ZXJlZCBpbiB0aGUgcm9vbSdzIHJlZ2lzdGVyUGFydGljbGVzIG1ldGhvZCBcbiAgLy9UaGUgbmFtZSBwYXJhbWV0ZXIgc2hvdWxkIGNvcnJlc3BvbmQgdG8gdGhlIGtleSBvZiBhIHBhcnRpY2xlXG4gIGVtaXRQYXJ0aWNsZShuYW1lOnN0cmluZyxvZmZzZXQ6VmVjdG9yLGxpZmV0aW1lOm51bWJlcixyYW5nZTpudW1iZXIpe1xuICAgIGxldCByb29tID0gdGhpcy5nYW1lLmdldFJvb20oKTtcbiAgICBsZXQgc3QgPSB0aGlzLnN0YXRlIGFzIHVua25vd24gYXMgb2JqX3N0YXRlO1xuICAgIGxldCBmaW5hbF9wb3NpdGlvbjpWZWN0b3IgPSB7XG4gICAgICB4OnN0LnBvc2l0aW9uLnggKyBvZmZzZXQueCxcbiAgICAgIHk6c3QucG9zaXRpb24ueSArIG9mZnNldC55XG4gICAgfVxuICAgIHJvb20uZW1pdFBhcnRpY2xlKG5hbWUsZmluYWxfcG9zaXRpb24sbGlmZXRpbWUscmFuZ2UpXG4gIH1cbiAgLy9JbnRlcm5hbCBtZXRob2QgdGhhdCBrZWVwcyBjYWxjdWxhdGVzIHRoZSBkZWx0YV90aW1lXG4gIC8vQWxzbyBjb252ZXJ0cyBpbmRpdmlkdWFsIHNwcml0ZXMgaW50byBhcnJheXMgb2Ygb25lIHNwcml0ZS5cbiAgcmVuZGVyVHJhY2sodGltZTpudW1iZXIpOiBwb3NpdGlvbmVkX3Nwcml0ZVtdIHtcbiAgICBsZXQgcmVuZGVyZWQgPSB0aGlzLnJlbmRlcmYodGltZSAtIHRoaXMubGFzdF9yZW5kZXIpO1xuICAgIGxldCBmaW5hbDpwb3NpdGlvbmVkX3Nwcml0ZVtdO1xuICAgIHRoaXMubGFzdF9yZW5kZXIgPSB0aW1lO1xuICAgIGlmKEFycmF5LmlzQXJyYXkocmVuZGVyZWQpKVxuICAgICAgZmluYWwgPSByZW5kZXJlZFxuICAgIGVsc2V7XG4gICAgICBmaW5hbCA9IFtyZW5kZXJlZF1cbiAgICB9XG4gICAgcmV0dXJuIGZpbmFsO1xuICB9XG4gIC8vTW9zdCBvYmplY3RzIHNob3VsZCBub3QgYmUgb3ZlcndyaXR0aW5nIHRoZSByZW5kZXJmIG1ldGhvZFxuICAvL1JldHVybnMgdGhlIGFwcHJvcHJpYXRlIHNwcml0ZSBmb3IgdGhlIG9iamVjdFxuICByZW5kZXJmKHRpbWU6IG51bWJlcik6IHBvc2l0aW9uZWRfc3ByaXRlW10gfCBwb3NpdGlvbmVkX3Nwcml0ZXtcbiAgICAvL0lmIHRoZSBvYmplY3QgZG9lc24ndCBoYXZlIHJlZ2lzdGVyZWQgYW5pbWF0aW9ucywgb3IgaXNuJ3QgcGxheWluZyBvbmVcbiAgICAvL1dlIGhhdmUgdG8gY3JlYXRlIHRoZSBzcHJpdGUgaGVyZS5cbiAgICBpZiAoT2JqZWN0LmtleXModGhpcy5hbmltYXRpb25zLmFuaW1hdGlvbnMpLmxlbmd0aCA9PSAwIHx8ICF0aGlzLmFuaW1hdGlvbnMuY3VycmVudCkge1xuICAgICAgaWYoIXRoaXMuc3ByaXRlX3NoZWV0KXtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzcHJpdGU6dW5kZWZpbmVkLFxuICAgICAgICAgIHg6dGhpcy5zdGF0ZS5wb3NpdGlvbi54LFxuICAgICAgICAgIHk6dGhpcy5zdGF0ZS5wb3NpdGlvbi55XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxldCBzcHJpdGVfaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgICBsZXQgc3ByaXRlX3dpZHRoID0gdGhpcy53aWR0aDtcbiAgICAgIC8vVGVjaG5pY2FsbHkgd2UgZG9uJ3QgbmVlZCB0byBkZWZpbmUgYW4gb2JqZWN0IGhlaWdodCBhbmQgd2lkdGhcbiAgICAgIC8vSWYgdGhlIHNwcml0ZV91cmwgcG9pbnRzIHRvIGEgc2luZ2xlIHN0YXRpYyBzcHJpdGUsIGFzIHdlIGNhbiBqdXN0IHB1bGxcbiAgICAgIC8vdGhlIGRpbWVuc2lvbnMgZnJvbSB0aGUgaW1hZ2VcbiAgICAgIGlmICh0aGlzLmhlaWdodCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc3ByaXRlX2hlaWdodCA9IHRoaXMuc3ByaXRlX3NoZWV0LmhlaWdodDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLndpZHRoID09IHVuZGVmaW5lZCkge1xuICAgICAgICBzcHJpdGVfd2lkdGggPSB0aGlzLnNwcml0ZV9zaGVldC53aWR0aDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNwcml0ZToge1xuICAgICAgICAgIHNwcml0ZV9zaGVldDogdGhpcy5zcHJpdGVfc2hlZXQsXG4gICAgICAgICAgbmFtZTp0aGlzLmNvbnN0cnVjdG9yLm5hbWUsXG4gICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgc3ByaXRlX3dpZHRoOiBzcHJpdGVfd2lkdGgsXG4gICAgICAgICAgc3ByaXRlX2hlaWdodDogc3ByaXRlX2hlaWdodCxcbiAgICAgICAgICBvcGFjaXR5OnRoaXMub3BhY2l0eSB8fCAxXG4gICAgICAgIH0sXG4gICAgICAgIHg6IHRoaXMuc3RhdGUucG9zaXRpb24ueCxcbiAgICAgICAgeTogdGhpcy5zdGF0ZS5wb3NpdGlvbi55XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgc3ByaXRlOnRoaXMuYW5pbWF0aW9ucy5yZW5kZXJmKHRpbWUpLFxuICAgICAgeDogdGhpcy5zdGF0ZS5wb3NpdGlvbi54LFxuICAgICAgeTogdGhpcy5zdGF0ZS5wb3NpdGlvbi55XG4gICAgfTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgY29tcG9zaXRlX3N0YXRpY3tcbiAgeDpudW1iZXIsXG4gIHk6bnVtYmVyLFxuICBvYmo6b2JqXG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBjb21wb3NpdGVfb2JqIGV4dGVuZHMgb2Jqe1xuICBvYmplY3RzOm9ialtdID0gW107XG4gIHJlbmRlciA9IGZhbHNlO1xuICByZWdpc3RlcmVkID0gZmFsc2U7XG4gIGNvbGxpc2lvbiA9IGZhbHNlO1xuICBzdGF0aWNzOmNvbXBvc2l0ZV9zdGF0aWNbXSA9IFtdO1xuICBjb25zdHJ1Y3Rvcihwb3M6b2JqX3N0YXRlLHBhcmFtczp1bmtub3duKXtcbiAgICBzdXBlcihwb3MscGFyYW1zKTtcbiAgfVxuICBhc3luYyBsb2FkKCl7XG4gICAgYXdhaXQgc3VwZXIubG9hZCgpO1xuICAgIGF3YWl0IFByb21pc2UuYWxsKFsuLi50aGlzLm9iamVjdHMubWFwKChhKT0+YS5sb2FkKCkpLC4uLnRoaXMuc3RhdGljcy5tYXAoYT0+YS5vYmoubG9hZCgpKV0pO1xuICB9XG4gIGNvbWJpbmVkT2JqZWN0cygpOm9ialtde1xuICAgIGxldCBjb21iaW5lZCA9IFsuLi50aGlzLm9iamVjdHMsLi4udGhpcy5zdGF0aWNzLm1hcChhPT5hLm9iaildO1xuICAgIHJldHVybiBbLi4uY29tYmluZWQsdGhpc107XG4gIH1cbiAgZ2V0SXRlbXNCeVRhZyh0YWc6c3RyaW5nKXtcbiAgICByZXR1cm4gdGhpcy5jb21iaW5lZE9iamVjdHMoKS5maWx0ZXIoKGEpPT5hLnRhZ3MuaGFzKHRhZykpO1xuICB9XG4gIGFkZEl0ZW0oYTpvYmosbGlzdD10aGlzLm9iamVjdHMpe1xuICAgIGEucGFyZW50ID0gdGhpcztcbiAgICBsaXN0LnB1c2goLi4uYS5jb21iaW5lZE9iamVjdHMoKSk7XG4gIH1cbiAgYWRkSXRlbXMoYTpvYmpbXSxsaXN0PXRoaXMub2JqZWN0cyl7XG4gICAgZm9yKGxldCBvIG9mIGEpe1xuICAgICAgdGhpcy5hZGRJdGVtKG8sbGlzdCk7XG4gICAgfVxuICB9XG4gIGdldEFsbENvbGxpc2lvbkJveGVzKCk6Y29sbGlzaW9uX2JveFtde1xuICAgIGxldCBhcnI6Y29sbGlzaW9uX2JveFtdID0gW107XG4gICAgZm9yKGxldCBvYmogb2YgWy4uLnRoaXMuc3RhdGljcy5tYXAoYT0+YS5vYmopLC4uLnRoaXMub2JqZWN0c10pe1xuICAgICAgbGV0IGNyZWF0ZWRfYm94ID0gb2JqLmdldEFsbENvbGxpc2lvbkJveGVzKCk7XG4gICAgICBpZihBcnJheS5pc0FycmF5KGNyZWF0ZWRfYm94KSl7XG4gICAgICAgIGFyci5wdXNoKC4uLmNyZWF0ZWRfYm94KTtcbiAgICAgIH1cbiAgICAgIGVsc2V7XG4gICAgICAgIGFyci5wdXNoKGNyZWF0ZWRfYm94KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuICBkZWxldGUoKXtcbiAgICBmb3IobGV0IGEgb2YgdGhpcy5vYmplY3RzKXtcbiAgICAgIGEuZGVsZXRlKCk7XG4gICAgfVxuICAgIGZvcihsZXQgYSBvZiB0aGlzLnN0YXRpY3Mpe1xuICAgICAgYS5vYmouZGVsZXRlKCk7XG4gICAgfVxuICAgIHN1cGVyLmRlbGV0ZSgpO1xuICB9XG4gIGNvbGxpZGVzV2l0aEJveChhOiBjb2xsaXNpb25fYm94KTpib29sZWFue1xuICAgIGZvcihsZXQgb2JqIG9mIHRoaXMub2JqZWN0cyl7XG4gICAgICBpZihvYmouY29sbGlkZXNXaXRoQm94KGEpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZm9yKGxldCBvIG9mIHRoaXMuc3RhdGljcyl7XG4gICAgICBpZihvLm9iai5jb2xsaWRlc1dpdGhCb3goYSkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gIFxufVxuXG5cbmV4cG9ydCBjbGFzcyBzdGF0aWNfb2JqIHtcbiAgc3ByaXRlX3VybCA9IFwiXCI7XG4gIHNwcml0ZTogSFRNTEltYWdlRWxlbWVudDtcbn1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIGdyYXZpdHlfb2JqIGV4dGVuZHMgb2Jqe1xuICBncmF2aXR5ID0gdHJ1ZVxufSIsImltcG9ydCB7IHNwcml0ZSB9IGZyb20gXCIuL3Nwcml0ZVwiO1xuaW1wb3J0IHsgR2V0Vmlld3BvcnREaW1lbnNpb25zIH0gZnJvbSBcIi4uL3ZhblwiO1xuaW1wb3J0IHsgb2JqIH0gZnJvbSBcIi4vb2JqZWN0XCI7XG5pbXBvcnQgeyBkaW1lbnNpb25zLCBvYmpfc3RhdGUsIFZlY3RvciB9IGZyb20gXCIuL3N0YXRlXCI7XG5pbXBvcnQgeyBUZXh0X05vZGUsIFRleHRTZXR0aW5nLEhVRCxUZXh0IH0gZnJvbSBcIi4vaHVkXCI7XG5pbXBvcnQge3Bvc2l0aW9uZWRfc3ByaXRlfSBmcm9tIFwiLi9zcHJpdGVcIlxuaW1wb3J0IHsgVmVjLHJvdGF0aW9uX2xlbmd0aCxhbmdsZV90b3dhcmRzIH0gZnJvbSBcIi4vbWF0aFwiO1xuXG5pbnRlcmZhY2UgY2FtZXJhX3N0YXRlIHtcbiAgc2NhbGluZzogbnVtYmVyLFxuICBwb3NpdGlvbjoge1xuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXJcbiAgfVxuICBkaW1lbnNpb25zOiB7XG4gICAgd2lkdGg6IG51bWJlcixcbiAgICBoZWlnaHQ6IG51bWJlclxuICB9LFxuICB2aWV3cG9ydDogdmlld3BvcnQsXG4gIGRlYnVnOmJvb2xlYW4sXG4gIGh1ZDpIVUQsXG4gIHRhcmdldF9wb3M6VmVjdG9yLFxuICBzdGFydF9wb3M6VmVjdG9yLFxuICBlYXNpbmdfdGltZTpudW1iZXIsXG4gIGN1cnJlbnRfdGltZTpudW1iZXIsXG4gIHNwZWVkOm51bWJlclxufVxuXG5pbnRlcmZhY2Ugdmlld3BvcnQge1xuICB4OiBudW1iZXIsXG4gIHk6IG51bWJlcixcbiAgd2lkdGg6IG51bWJlcixcbiAgaGVpZ2h0OiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIGNhbWVyYV9wcm9wZXJ0aWVzIHtcbiAgeDpudW1iZXIsXG4gIHk6bnVtYmVyLFxuICBkaW1lbnNpb25zOntcbiAgICBoZWlnaHQ6bnVtYmVyLFxuICAgIHdpZHRoOm51bWJlclxuICB9XG4gIHNjYWxpbmc6bnVtYmVyLFxuICBcbiAgZGVidWc/OmJvb2xlYW5cbn1cblxuZXhwb3J0IGNsYXNzIENhbWVyYSB7XG4gIHN0YXRlOiBjYW1lcmFfc3RhdGU7XG4gIGh1ZDogSFVEO1xuICBjb25zdHJ1Y3Rvcihwcm9wczpjYW1lcmFfcHJvcGVydGllcywgdjogdmlld3BvcnQsIGh1ZDpIVUQgPSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgc2NhbGluZzpwcm9wcy5zY2FsaW5nLFxuICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgeDogcHJvcHMueCxcbiAgICAgICAgeTogcHJvcHMueVxuICAgICAgfSxcbiAgICAgIGRpbWVuc2lvbnM6IHByb3BzLmRpbWVuc2lvbnMsXG4gICAgICB2aWV3cG9ydDoge1xuICAgICAgICB4OnYueCxcbiAgICAgICAgeTp2LnkgLFxuICAgICAgICB3aWR0aDogdi53aWR0aCAqIHByb3BzLmRpbWVuc2lvbnMud2lkdGgsXG4gICAgICAgIGhlaWdodDogdi5oZWlnaHQgKiBwcm9wcy5kaW1lbnNpb25zLmhlaWdodFxuICAgICAgfSxcbiAgICAgIGRlYnVnOnByb3BzLmRlYnVnLFxuICAgICAgaHVkLFxuICAgICAgdGFyZ2V0X3Bvczp1bmRlZmluZWQsXG4gICAgICBzdGFydF9wb3M6dW5kZWZpbmVkLFxuICAgICAgZWFzaW5nX3RpbWU6MCxcbiAgICAgIGN1cnJlbnRfdGltZTowLFxuICAgICAgc3BlZWQ6MFxuICAgIH1cbiAgICBpZihodWQpe1xuICAgICAgaHVkLmdyYXBoaWNfZWxlbWVudHMuZm9yRWFjaChlPT57XG4gICAgICAgIGUuVW5iaW5kQWxsKCk7XG4gICAgICB9KVxuICAgIH1cbiAgICB0aGlzLnNldEh1ZChodWQpO1xuICB9XG4gIHN0YXRlZihkZWx0YV90aW1lOm51bWJlcil7XG4gICAgXG4gICAgaWYodGhpcy5zdGF0ZS50YXJnZXRfcG9zKXtcbiAgICAgIGxldCB0ID0gdGhpcy5zdGF0ZS5jdXJyZW50X3RpbWUvdGhpcy5zdGF0ZS5lYXNpbmdfdGltZTtcbiAgICAgIGxldCBkaXN0YW5jZSA9IFZlYy5kaXN0YW5jZSh0aGlzLnN0YXRlLnBvc2l0aW9uLHRoaXMuc3RhdGUudGFyZ2V0X3Bvcyk7XG4gICAgICBsZXQgY29lZmY7XG4gICAgICBpZih0IDw9IDAuNSl7XG4gICAgICAgIGNvZWZmID0gMiAqIHQgKiB0O1xuICAgICAgfVxuICAgICAgZWxzZXtcbiAgICAgICAgdCAtPSAwLjU7XG4gICAgICAgIGNvZWZmID0gMiAqIHQgKiAoMSAtIHQpICsgMC41O1xuICAgICAgfSBcbiAgICAgIGxldCBhbmdsZSA9IGFuZ2xlX3Rvd2FyZHModGhpcy5zdGF0ZS50YXJnZXRfcG9zLHRoaXMuc3RhdGUucG9zaXRpb24pO1xuICAgICAgbGV0IHZlbG9jaXR5ID0gcm90YXRpb25fbGVuZ3RoKDIgKiB0aGlzLnN0YXRlLnNwZWVkICogZGVsdGFfdGltZSxhbmdsZSk7XG4gICAgICB2ZWxvY2l0eSA9IFZlYy5zY2FsYXJfbXVsdCh2ZWxvY2l0eSxjb2VmZik7XG4gICAgICB0aGlzLnN0YXRlLnBvc2l0aW9uID0gVmVjLmFkZCh0aGlzLnN0YXRlLnBvc2l0aW9uLHZlbG9jaXR5KTtcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudF90aW1lICs9IGRlbHRhX3RpbWU7XG4gICAgICBpZih0aGlzLnN0YXRlLmN1cnJlbnRfdGltZSA+IHRoaXMuc3RhdGUuZWFzaW5nX3RpbWUpe1xuICAgICAgICB0aGlzLnN0YXRlLnBvc2l0aW9uID0gVmVjLmZyb20odGhpcy5zdGF0ZS50YXJnZXRfcG9zKTtcbiAgICAgICAgdGhpcy5zdGF0ZS50YXJnZXRfcG9zID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBzZXQgeCh4OiBudW1iZXIpIHtcbiAgICB0aGlzLnN0YXRlLnBvc2l0aW9uLnggPSB4O1xuICB9XG4gIHNldCB5KHk6IG51bWJlcikge1xuICAgIHRoaXMuc3RhdGUucG9zaXRpb24ueSA9IHlcbiAgfVxuICBnZXQgeCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5wb3NpdGlvbi54O1xuICB9XG4gIGdldCB5KCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLnBvc2l0aW9uLnk7XG4gIH1cbiAgc2V0SHVkKGh1ZDpIVUQgPSB1bmRlZmluZWQpe1xuICAgIGlmKHRoaXMuaHVkKXtcbiAgICAgIHRoaXMuaHVkLnJlbmRlcmluZyA9IGZhbHNlO1xuICAgICAgZm9yKGxldCBvIG9mIHRoaXMuaHVkLmdyYXBoaWNfZWxlbWVudHMpe1xuICAgICAgICBvLlVuYmluZEFsbCgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZihodWQgJiYgaHVkICE9IHRoaXMuaHVkKXtcbiAgICAgIGh1ZC5yZW5kZXJpbmcgPSB0cnVlO1xuICAgICAgZm9yKGxldCBvIG9mIGh1ZC5ncmFwaGljX2VsZW1lbnRzKXtcbiAgICAgICAgby5yZWdpc3RlckNvbnRyb2xzKCk7XG4gICAgICB9XG4gICAgICBodWQuc2V0QWN0aXZlKCk7ICBcblxuICAgIH1cbiAgICB0aGlzLmh1ZCA9IGh1ZDtcbiAgfVxuICBtb3ZlVG8ocG9zOlZlY3Rvcix0aW1lOm51bWJlcil7XG4gICAgXG4gICAgdGhpcy5zdGF0ZS5zcGVlZCA9IFZlYy5kaXN0YW5jZSh0aGlzLnN0YXRlLnBvc2l0aW9uLHBvcykvdGltZTtcbiAgICB0aGlzLnN0YXRlLnRhcmdldF9wb3MgPSBwb3M7XG4gICAgdGhpcy5zdGF0ZS5zdGFydF9wb3MgPSBWZWMuZnJvbSh0aGlzLnN0YXRlLnBvc2l0aW9uKTtcbiAgICB0aGlzLnN0YXRlLmVhc2luZ190aW1lID0gdGltZTtcbiAgICB0aGlzLnN0YXRlLmN1cnJlbnRfdGltZSA9IDA7XG4gIH1cblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIHJlbmRlcl9mdW5jIHtcbiAgKHg6IG51bWJlciwgeTogbnVtYmVyLCBzY2FsaW5nOiBudW1iZXIpOiB2b2lkXG59XG5cbmludGVyZmFjZSByZWN0YW5nbGUge1xuICB3aWR0aDogbnVtYmVyLFxuICBoZWlnaHQ6IG51bWJlclxufVxuXG5pbnRlcmZhY2Ugc3ByaXRlX2FyZ3Mge1xuICBzcHJpdGU6IHNwcml0ZSxcbiAgeDogbnVtYmVyLFxuICB5OiBudW1iZXIsXG4gIHJvdGF0aW9uOiBudW1iZXIsXG4gIHNjYWxlOmRpbWVuc2lvbnMsXG4gIHNjYWxlX3R5cGU6c2NhbGVfdHlwZVxufVxuXG5pbnRlcmZhY2UgcmVuZGVyZXJfYXJncyB7XG4gIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgY2FtZXJhOiBDYW1lcmFcbn1cblxuZXhwb3J0IGVudW0gcmVuZGVyX3R5cGUge1xuICB0ZXh0LFxuICBzcHJpdGUsXG4gIHJlY3QsXG4gIHN0cm9rZV9yZWN0XG59XG5cbmV4cG9ydCBlbnVtIHNjYWxlX3R5cGV7XG4gIGdyb3csXG4gIHJlcGVhdFxufVxuXG5leHBvcnQgY29uc3QgaHVkX3RleHRfcmVuZGVyZXIgPSAocjogcmVuZGVyZXJfYXJncywgczogVGV4dFNldHRpbmcpID0+IHtcbiAgbGV0IHZoZWlnaHQgPSBHZXRWaWV3cG9ydERpbWVuc2lvbnMoKS5oZWlnaHQ7XG4gIHIuY29udGV4dC5mb250ID0gYCR7cy5mb250LnNpemV9cHggJHtzLmZvbnQuZm9udH1gO1xuICByLmNvbnRleHQuZmlsbFN0eWxlID0gcy5mb250LmNvbG9yO1xuICByLmNvbnRleHQudGV4dEFsaWduID0gcy5mb250LmFsaWduO1xuICBpZiAocy5mb250Lm1heF93aWR0aCkge1xuICAgIHIuY29udGV4dC5maWxsVGV4dChzLmZvbnQudGV4dCwgcy54LCB2aGVpZ2h0IC0gcy55LCBzLmZvbnQubWF4X3dpZHRoKTtcbiAgfVxuICBlbHNlIHtcbiAgICByLmNvbnRleHQuZmlsbFRleHQocy5mb250LnRleHQsIHMueCwgdmhlaWdodCAtIHMueSk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHRleHRfcmVuZGVyZXIgPSAocjpyZW5kZXJlcl9hcmdzLHM6VGV4dFNldHRpbmcpID0+IHtcbiAgbGV0IGNhbWVyYSA9IHIuY2FtZXJhO1xuICBsZXQgdmhlaWdodCA9IHIuY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMuaGVpZ2h0O1xuICBsZXQgZmluYWxfeCA9ICgocy54IC0gY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnggKyBjYW1lcmEuc3RhdGUuZGltZW5zaW9ucy53aWR0aCAqICgxL3IuY2FtZXJhLnN0YXRlLnNjYWxpbmcpIC8gMikgKiByLmNhbWVyYS5zdGF0ZS5zY2FsaW5nKTtcbiAgbGV0IGZpbmFsX3kgPSAoKHZoZWlnaHQgLSBzLnkgKiBjYW1lcmEuc3RhdGUuc2NhbGluZyAtIGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLmhlaWdodC8yICsgY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnkgKiBjYW1lcmEuc3RhdGUuc2NhbGluZykpO1xuICByLmNvbnRleHQuZm9udCA9IGAke3MuZm9udC5zaXplICogci5jYW1lcmEuc3RhdGUuc2NhbGluZ31weCAke3MuZm9udC5mb250fWA7XG4gIHIuY29udGV4dC5maWxsU3R5bGUgPSBzLmZvbnQuY29sb3I7XG4gIHIuY29udGV4dC50ZXh0QWxpZ24gPSBzLmZvbnQuYWxpZ25cbiAgci5jb250ZXh0LnNhdmUoKTtcbiAgci5jb250ZXh0LnRyYW5zbGF0ZShmaW5hbF94LCBmaW5hbF95KTtcbiAgaWYgKHMuZm9udC5tYXhfd2lkdGgpIHtcbiAgICByLmNvbnRleHQuZmlsbFRleHQocy5mb250LnRleHQsIDAsIDAsIHMuZm9udC5tYXhfd2lkdGgpO1xuICB9XG4gIGVsc2Uge1xuICAgIHIuY29udGV4dC5maWxsVGV4dChzLmZvbnQudGV4dCwgMCwgMCk7XG4gIH1cbiAgci5jb250ZXh0LnJlc3RvcmUoKTtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgY2FudmFzX2FyZ3N7XG4gIGNhbnZhczpIVE1MQ2FudmFzRWxlbWVudCxcbiAgd2lkdGg6bnVtYmVyO1xuICBoZWlnaHQ6bnVtYmVyLFxuICB4Om51bWJlcixcbiAgeTpudW1iZXIsXG4gIHNjYWxlOmRpbWVuc2lvbnNcbn1cbmV4cG9ydCBjb25zdCBjYW52YXNfcmVuZGVyZXIgPSAocjpyZW5kZXJlcl9hcmdzLGE6Y2FudmFzX2FyZ3MpID0+IHtcbiAgbGV0IGNhbWVyYSA9IHIuY2FtZXJhO1xuICBsZXQgdmhlaWdodCA9IHIuY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMuaGVpZ2h0IC8gci5jYW1lcmEuc3RhdGUuc2NhbGluZztcbiAgbGV0IGZpbmFsX3ggPSAoKGEueCAtIGNhbWVyYS5zdGF0ZS5wb3NpdGlvbi54ICsgY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMud2lkdGggKiAoMS9yLmNhbWVyYS5zdGF0ZS5zY2FsaW5nKSAvIDIgLSBhLndpZHRoICogYS5zY2FsZS53aWR0aCAvIDIpICogci5jYW1lcmEuc3RhdGUuc2NhbGluZyk7XG4gIGxldCBmaW5hbF95ID0gKCh2aGVpZ2h0IC0gYS55IC0gY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMuaGVpZ2h0ICogKDEvci5jYW1lcmEuc3RhdGUuc2NhbGluZykgLyAyIC0gYS5oZWlnaHQgKiBhLnNjYWxlLmhlaWdodCAvIDIgKyBjYW1lcmEuc3RhdGUucG9zaXRpb24ueSkgKiByLmNhbWVyYS5zdGF0ZS5zY2FsaW5nKTtcbiAgbGV0IGhlaWdodCA9IGEuaGVpZ2h0ICogci5jYW1lcmEuc3RhdGUuc2NhbGluZyAqIGEuc2NhbGUuaGVpZ2h0O1xuICBsZXQgd2lkdGggPSBhLndpZHRoICogci5jYW1lcmEuc3RhdGUuc2NhbGluZyAqIGEuc2NhbGUud2lkdGg7XG4gIHIuY29udGV4dC5zYXZlKCk7XG4gIHIuY29udGV4dC50cmFuc2xhdGUoZmluYWxfeCAgKyAod2lkdGgpIC8gMiwgZmluYWxfeSArIGhlaWdodCAvIDIpO1xuICByLmNvbnRleHQuZHJhd0ltYWdlKFxuICAgIGEuY2FudmFzLFxuICAgIC0od2lkdGggKSAvIDIsXG4gICAgLWhlaWdodCAvIDIsXG4gICAgd2lkdGgsXG4gICAgaGVpZ2h0XG4gIClcbiAgci5jb250ZXh0LnJlc3RvcmUoKTtcbn1cblxuZXhwb3J0IGNvbnN0IGh1ZF9zcHJpdGVfcmVuZGVyZXIgPSAocjpyZW5kZXJlcl9hcmdzLCBzOnNwcml0ZV9hcmdzKSA9PiB7XG4gIGxldCBjYW1lcmEgPSByLmNhbWVyYTtcbiAgbGV0IHZoZWlnaHQgPSByLmNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLmhlaWdodDtcbiAgbGV0IGZpbmFsX3ggPSAocy54IC0gcy5zcHJpdGUuc3ByaXRlX3dpZHRoICogcy5zY2FsZS53aWR0aCAvIDIpO1xuICBsZXQgZmluYWxfeSA9ICh2aGVpZ2h0IC0gcy55IC0gcy5zcHJpdGUuc3ByaXRlX2hlaWdodCAqIHMuc2NhbGUuaGVpZ2h0IC8gMikgO1xuICBsZXQgaGVpZ2h0ID0gcy5zcHJpdGUuc3ByaXRlX2hlaWdodCAqIHMuc2NhbGUuaGVpZ2h0O1xuICBsZXQgd2lkdGggPSBzLnNwcml0ZS5zcHJpdGVfd2lkdGggKiBzLnNjYWxlLndpZHRoO1xuICByLmNvbnRleHQuc2F2ZSgpO1xuICByLmNvbnRleHQuZ2xvYmFsQWxwaGEgPSBzLnNwcml0ZS5vcGFjaXR5O1xuICByLmNvbnRleHQudHJhbnNsYXRlKGZpbmFsX3ggICsgKHdpZHRoKSAvIDIsIGZpbmFsX3kgKyBoZWlnaHQgLyAyKTtcbiAgbGV0IHJhZGlhbnMgPSBzLnJvdGF0aW9uICogKE1hdGguUEkgLyAxODApO1xuICByLmNvbnRleHQucm90YXRlKHJhZGlhbnMpO1xuICBpZihzLnNjYWxlX3R5cGUgPT0gc2NhbGVfdHlwZS5ncm93KXtcbiAgICBpZih0eXBlb2Ygcy5zcHJpdGUuc3ByaXRlX3NoZWV0ID09IFwic3RyaW5nXCIpe1xuICAgICAgbGV0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICBpbWFnZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgIHIuY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAgICAgaW1hZ2UsXG4gICAgICAgICAgcy5zcHJpdGUubGVmdCxcbiAgICAgICAgICBzLnNwcml0ZS50b3AsXG4gICAgICAgICAgcy5zcHJpdGUuc3ByaXRlX3dpZHRoLFxuICAgICAgICAgIHMuc3ByaXRlLnNwcml0ZV9oZWlnaHQsXG4gICAgICAgICAgLSh3aWR0aCApIC8gMixcbiAgICAgICAgICAtaGVpZ2h0IC8gMixcbiAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICBoZWlnaHRcbiAgICAgICAgKVxuICAgICAgICByLmNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgfVxuICAgICAgaW1hZ2Uuc3JjID0gcy5zcHJpdGUuc3ByaXRlX3NoZWV0O1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgci5jb250ZXh0LmRyYXdJbWFnZShcbiAgICAgICAgcy5zcHJpdGUuc3ByaXRlX3NoZWV0LFxuICAgICAgICBzLnNwcml0ZS5sZWZ0LFxuICAgICAgICBzLnNwcml0ZS50b3AsXG4gICAgICAgIHMuc3ByaXRlLnNwcml0ZV93aWR0aCxcbiAgICAgICAgcy5zcHJpdGUuc3ByaXRlX2hlaWdodCxcbiAgICAgICAgLSh3aWR0aCApIC8gMixcbiAgICAgICAgLWhlaWdodCAvIDIsXG4gICAgICAgIHdpZHRoLFxuICAgICAgICBoZWlnaHRcbiAgICAgIClcbiAgICAgIHIuY29udGV4dC5yZXN0b3JlKCk7ICAgICBcbiAgICB9XG4gIH1cbiAgZWxzZSBpZihzLnNjYWxlX3R5cGUgPT0gc2NhbGVfdHlwZS5yZXBlYXQpe1xuICAgIGxldCBvbmVfd2lkdGggPSBzLnNwcml0ZS5zcHJpdGVfd2lkdGggKiByLmNhbWVyYS5zdGF0ZS5zY2FsaW5nO1xuICAgIGxldCBvbmVfaGVpZ2h0ID0gcy5zcHJpdGUuc3ByaXRlX2hlaWdodCAqIHIuY2FtZXJhLnN0YXRlLnNjYWxpbmc7XG4gICAgbGV0IHRvdGFsX2hvcl9zcHJpdGVzID0gd2lkdGgvb25lX3dpZHRoXG4gICAgbGV0IHRvdGFsX3Zlcl9zcHJpdGVzID0gaGVpZ2h0L29uZV9oZWlnaHQ7XG4gICBmb3IobGV0IGEgPSAwO2EgPCB0b3RhbF9ob3Jfc3ByaXRlczthICs9IDEpe1xuICAgICBmb3IobGV0IGIgPSAwO2IgPCB0b3RhbF92ZXJfc3ByaXRlcztiICs9IDEpe1xuICAgICAgIGxldCBuZXdfd2lkdGggPSBvbmVfd2lkdGg7XG4gICAgICAgbGV0IG5ld19oZWlnaHQgPSBvbmVfaGVpZ2h0O1xuICAgICAgIGlmKChhICsgMSkgKiBvbmVfd2lkdGggLSB3aWR0aCA+IDApe1xuICAgICAgICAgbmV3X3dpZHRoID0gd2lkdGggJSBvbmVfd2lkdGg7XG4gICAgICAgfVxuICAgICAgIGlmKChiICsgMSkgKiBvbmVfaGVpZ2h0IC0gaGVpZ2h0ID4gMCl7XG4gICAgICAgICBuZXdfaGVpZ2h0ID0gaGVpZ2h0ICUgb25lX2hlaWdodDtcbiAgICAgICB9XG4gICAgICAgaWYodHlwZW9mIHMuc3ByaXRlLnNwcml0ZV9zaGVldCA9PSBcInN0cmluZ1wiKXtcbiAgICAgICAgbGV0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICByLmNvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgICAgICAgaW1hZ2UsXG4gICAgICAgICAgICBzLnNwcml0ZS5sZWZ0LFxuICAgICAgICAgICAgcy5zcHJpdGUudG9wLFxuICAgICAgICAgICAgbmV3X3dpZHRoIC8gKHIuY2FtZXJhLnN0YXRlLnNjYWxpbmcpLFxuICAgICAgICAgICAgbmV3X2hlaWdodCAvIChyLmNhbWVyYS5zdGF0ZS5zY2FsaW5nKSxcbiAgICAgICAgICAgIC13aWR0aC8yICsgYSAqIG9uZV93aWR0aCxcbiAgICAgICAgICAgIC1oZWlnaHQvMiArIGIgKiBvbmVfaGVpZ2h0LFxuICAgICAgICAgICAgbmV3X3dpZHRoLFxuICAgICAgICAgICAgbmV3X2hlaWdodFxuICAgICAgICAgIClcbiAgICAgICAgICByLmNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgICAgIGltYWdlLnNyYyA9IHMuc3ByaXRlLnNwcml0ZV9zaGVldDtcbiAgICAgICB9XG4gICAgICAgZWxzZXtcbiAgICAgICAgci5jb250ZXh0LmRyYXdJbWFnZShcbiAgICAgICAgICBzLnNwcml0ZS5zcHJpdGVfc2hlZXQsXG4gICAgICAgICAgcy5zcHJpdGUubGVmdCxcbiAgICAgICAgICBzLnNwcml0ZS50b3AsXG4gICAgICAgICAgbmV3X3dpZHRoIC8gKHIuY2FtZXJhLnN0YXRlLnNjYWxpbmcpLFxuICAgICAgICAgIG5ld19oZWlnaHQgLyAoci5jYW1lcmEuc3RhdGUuc2NhbGluZyksXG4gICAgICAgICAgLXdpZHRoLzIgKyBhICogb25lX3dpZHRoLFxuICAgICAgICAgIC1oZWlnaHQvMiArIGIgKiBvbmVfaGVpZ2h0LFxuICAgICAgICAgIG5ld193aWR0aCxcbiAgICAgICAgICBuZXdfaGVpZ2h0XG4gICAgICAgICApXG4gICAgICAgICByLmNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgIH1cblxuICAgICB9XG5cbiAgIH0gXG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSB3b3JrZXJfc3ByaXRle1xuICB0cmFuc2xhdGU6VmVjdG9yLFxuICBzcHJpdGU6e1xuICAgIG5hbWU6c3RyaW5nLFxuICAgIGxlZnQ6bnVtYmVyLFxuICAgIHRvcDpudW1iZXIsXG4gICAgc3ByaXRlX3dpZHRoOm51bWJlcixcbiAgICBzcHJpdGVfaGVpZ2h0Om51bWJlclxuICB9XG4gIHdpZHRoOm51bWJlcixcbiAgaGVpZ2h0Om51bWJlclxufVxuXG5leHBvcnQgY29uc3Qgc3ByaXRlX3JlbmRlcmVyID0gKHI6IHJlbmRlcmVyX2FyZ3MsIHM6IHNwcml0ZV9hcmdzKSA9PiB7XG4gIGxldCBjYW1lcmEgPSByLmNhbWVyYTtcbiAgbGV0IHZoZWlnaHQgPSByLmNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLmhlaWdodCAvIHIuY2FtZXJhLnN0YXRlLnNjYWxpbmc7XG4gIGxldCBmaW5hbF94ID0gKChzLnggLSBjYW1lcmEuc3RhdGUucG9zaXRpb24ueCArIGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLndpZHRoICogKDEvci5jYW1lcmEuc3RhdGUuc2NhbGluZykgLyAyIC0gcy5zcHJpdGUuc3ByaXRlX3dpZHRoICogcy5zY2FsZS53aWR0aCAvIDIpICogci5jYW1lcmEuc3RhdGUuc2NhbGluZyk7XG4gIGxldCBmaW5hbF95ID0gKCh2aGVpZ2h0IC0gcy55IC0gY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMuaGVpZ2h0ICogKDEvci5jYW1lcmEuc3RhdGUuc2NhbGluZykgLyAyIC0gcy5zcHJpdGUuc3ByaXRlX2hlaWdodCAqIHMuc2NhbGUuaGVpZ2h0IC8gMiArIGNhbWVyYS5zdGF0ZS5wb3NpdGlvbi55KSAqIHIuY2FtZXJhLnN0YXRlLnNjYWxpbmcpO1xuICBsZXQgaGVpZ2h0ID0gcy5zcHJpdGUuc3ByaXRlX2hlaWdodCAqIHIuY2FtZXJhLnN0YXRlLnNjYWxpbmcgKiBzLnNjYWxlLmhlaWdodDtcbiAgbGV0IHdpZHRoID0gcy5zcHJpdGUuc3ByaXRlX3dpZHRoICogci5jYW1lcmEuc3RhdGUuc2NhbGluZyAqIHMuc2NhbGUud2lkdGg7XG4gIHIuY29udGV4dC5zYXZlKCk7XG4gIHIuY29udGV4dC5nbG9iYWxBbHBoYSA9IHMuc3ByaXRlLm9wYWNpdHk7XG4gIHIuY29udGV4dC50cmFuc2xhdGUoZmluYWxfeCAgKyAod2lkdGgpIC8gMiwgZmluYWxfeSArIGhlaWdodCAvIDIpO1xuICBsZXQgcmFkaWFucyA9IHMucm90YXRpb24gKiAoTWF0aC5QSSAvIDE4MCk7XG4gIHIuY29udGV4dC5yb3RhdGUocmFkaWFucyk7XG4gIGlmKHMuc2NhbGVfdHlwZSA9PSBzY2FsZV90eXBlLmdyb3cpe1xuICAgIGlmKHR5cGVvZiBzLnNwcml0ZS5zcHJpdGVfc2hlZXQgPT0gXCJzdHJpbmdcIil7XG4gICAgICBcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIHIuY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAgIHMuc3ByaXRlLnNwcml0ZV9zaGVldCxcbiAgICAgICAgcy5zcHJpdGUubGVmdCxcbiAgICAgICAgcy5zcHJpdGUudG9wLFxuICAgICAgICBzLnNwcml0ZS5zcHJpdGVfd2lkdGgsXG4gICAgICAgIHMuc3ByaXRlLnNwcml0ZV9oZWlnaHQsXG4gICAgICAgIC0od2lkdGggKSAvIDIsXG4gICAgICAgIC1oZWlnaHQgLyAyLFxuICAgICAgICB3aWR0aCxcbiAgICAgICAgaGVpZ2h0XG4gICAgICApXG4gICAgICByLmNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgLypcbiAgICAgIHJldHVybiB3b3JrZXJfcG9vbC5zZW5kKFwiZHJhd19zcHJpdGVcIix7XG4gICAgICAgIHRyYW5zbGF0ZTp7eDpmaW5hbF94ICArICh3aWR0aCkgLyAyLHk6IGZpbmFsX3kgKyBoZWlnaHQgLyAyfSxcbiAgICAgICAgc3ByaXRlOntcbiAgICAgICAgICBuYW1lOnMuc3ByaXRlLm5hbWUsXG4gICAgICAgICAgbGVmdDpzLnNwcml0ZS5sZWZ0LFxuICAgICAgICAgIHRvcDpzLnNwcml0ZS50b3AsXG4gICAgICAgICAgc3ByaXRlX3dpZHRoOnMuc3ByaXRlLnNwcml0ZV93aWR0aCxcbiAgICAgICAgICBzcHJpdGVfaGVpZ2h0OnMuc3ByaXRlLnNwcml0ZV9oZWlnaHRcbiAgICAgICAgfSxcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGhlaWdodFxuICAgICAgfSlcbiAgICAgICovXG4gICAgfVxuICB9XG4gIGVsc2UgaWYocy5zY2FsZV90eXBlID09IHNjYWxlX3R5cGUucmVwZWF0KXtcbiAgICBsZXQgb25lX3dpZHRoID0gcy5zcHJpdGUuc3ByaXRlX3dpZHRoICogci5jYW1lcmEuc3RhdGUuc2NhbGluZztcbiAgICBsZXQgb25lX2hlaWdodCA9IHMuc3ByaXRlLnNwcml0ZV9oZWlnaHQgKiByLmNhbWVyYS5zdGF0ZS5zY2FsaW5nO1xuICAgIGxldCB0b3RhbF9ob3Jfc3ByaXRlcyA9IHdpZHRoL29uZV93aWR0aFxuICAgIGxldCB0b3RhbF92ZXJfc3ByaXRlcyA9IGhlaWdodC9vbmVfaGVpZ2h0O1xuICAgZm9yKGxldCBhID0gMDthIDwgdG90YWxfaG9yX3Nwcml0ZXM7YSArPSAxKXtcbiAgICAgZm9yKGxldCBiID0gMDtiIDwgdG90YWxfdmVyX3Nwcml0ZXM7YiArPSAxKXtcbiAgICAgICBsZXQgbmV3X3dpZHRoID0gb25lX3dpZHRoO1xuICAgICAgIGxldCBuZXdfaGVpZ2h0ID0gb25lX2hlaWdodDtcbiAgICAgICBpZigoYSArIDEpICogb25lX3dpZHRoIC0gd2lkdGggPiAwKXtcbiAgICAgICAgIG5ld193aWR0aCA9IHdpZHRoICUgb25lX3dpZHRoO1xuICAgICAgIH1cbiAgICAgICBpZigoYiArIDEpICogb25lX2hlaWdodCAtIGhlaWdodCA+IDApe1xuICAgICAgICAgbmV3X2hlaWdodCA9IGhlaWdodCAlIG9uZV9oZWlnaHQ7XG4gICAgICAgfVxuICAgICAgIHIuY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAgIHMuc3ByaXRlLnNwcml0ZV9zaGVldCxcbiAgICAgICAgcy5zcHJpdGUubGVmdCxcbiAgICAgICAgcy5zcHJpdGUudG9wLFxuICAgICAgICBuZXdfd2lkdGggLyAoci5jYW1lcmEuc3RhdGUuc2NhbGluZyksXG4gICAgICAgIG5ld19oZWlnaHQgLyAoci5jYW1lcmEuc3RhdGUuc2NhbGluZyksXG4gICAgICAgIC13aWR0aC8yICsgYSAqIG9uZV93aWR0aCxcbiAgICAgICAgLWhlaWdodC8yICsgYiAqIG9uZV9oZWlnaHQsXG4gICAgICAgIG5ld193aWR0aCxcbiAgICAgICAgbmV3X2hlaWdodFxuICAgICAgIClcbiAgICAgfVxuXG4gICB9IFxuICB9XG4gIFxuICBcbiAgci5jb250ZXh0LnJlc3RvcmUoKTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBsaW5le1xuICBzdGFydDpWZWN0b3IsXG4gIGVuZDpWZWN0b3Jcbn1cblxuZXhwb3J0IGNvbnN0IGxpbmVfcmVuZGVyZXIgPSAoY29udGV4dDpDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsbGluZTpsaW5lLGNvbG9yOnN0cmluZyxsaW5lV2lkdGg6bnVtYmVyLGNhbWVyYTpDYW1lcmEpID0+IHtcbiAgbGV0IHZoZWlnaHQgPSBjYW1lcmEuc3RhdGUuZGltZW5zaW9ucy5oZWlnaHQgLyBjYW1lcmEuc3RhdGUuc2NhbGluZztcbiAgbGV0IHN0YXJ0X3ggPSAoKGxpbmUuc3RhcnQueCAtIGNhbWVyYS5zdGF0ZS5wb3NpdGlvbi54ICsgY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMud2lkdGggKiAoMS9jYW1lcmEuc3RhdGUuc2NhbGluZykgLyAyKSAqIGNhbWVyYS5zdGF0ZS5zY2FsaW5nKTtcbiAgbGV0IHN0YXJ0X3kgPSAoKHZoZWlnaHQgLSBsaW5lLnN0YXJ0LnkgKyBjYW1lcmEuc3RhdGUucG9zaXRpb24ueSAtIGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLmhlaWdodCAqICgxL2NhbWVyYS5zdGF0ZS5zY2FsaW5nKSAvIDIpICogY2FtZXJhLnN0YXRlLnNjYWxpbmcpO1xuXG4gIGxldCBlbmRfeCA9ICgobGluZS5lbmQueCAtIGNhbWVyYS5zdGF0ZS5wb3NpdGlvbi54ICsgY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMud2lkdGggKiAoMS9jYW1lcmEuc3RhdGUuc2NhbGluZykgLyAyKSAqIGNhbWVyYS5zdGF0ZS5zY2FsaW5nKTtcbiAgbGV0IGVuZF95ID0gKCh2aGVpZ2h0IC0gbGluZS5lbmQueSArIGNhbWVyYS5zdGF0ZS5wb3NpdGlvbi55IC0gY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMuaGVpZ2h0ICogKDEvY2FtZXJhLnN0YXRlLnNjYWxpbmcpIC8gMikgKiBjYW1lcmEuc3RhdGUuc2NhbGluZyk7XG4gIFxuICBcbiAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgY29udGV4dC5zdHJva2VTdHlsZSA9IGNvbG9yO1xuICBjb250ZXh0LmxpbmVXaWR0aCA9IGxpbmVXaWR0aCAqIGNhbWVyYS5zdGF0ZS5zY2FsaW5nO1xuICBjb250ZXh0Lm1vdmVUbyhzdGFydF94LHN0YXJ0X3kpO1xuICBjb250ZXh0LmxpbmVUbyhlbmRfeCxlbmRfeSk7XG4gIGNvbnRleHQuc3Ryb2tlKCk7IFxufVxuXG5leHBvcnQgY29uc3Qgc3Ryb2tlZF9yZWN0X3JlbmRlcmVyID0gKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgcmVjdDogcmVjdGFuZ2xlLCB4OiBudW1iZXIsIHk6IG51bWJlciwgY29sb3I6IHN0cmluZywgbGluZVdpZHRoOm51bWJlciwgY2FtZXJhOiBDYW1lcmEpID0+IHtcbiAgbGV0IHZoZWlnaHQgPSBjYW1lcmEuc3RhdGUuZGltZW5zaW9ucy5oZWlnaHQgLyBjYW1lcmEuc3RhdGUuc2NhbGluZztcbiAgbGV0IGZpbmFsX3ggPSAoKHggLSBjYW1lcmEuc3RhdGUucG9zaXRpb24ueCArIGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLndpZHRoICogKDEvY2FtZXJhLnN0YXRlLnNjYWxpbmcpIC8gMiAtIHJlY3Qud2lkdGggLyAyKSAqIGNhbWVyYS5zdGF0ZS5zY2FsaW5nKTtcbiAgbGV0IGZpbmFsX3kgPSAoKHZoZWlnaHQgLSB5ICsgY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnkgLSBjYW1lcmEuc3RhdGUuZGltZW5zaW9ucy5oZWlnaHQgKiAoMS9jYW1lcmEuc3RhdGUuc2NhbGluZykgLyAyIC0gcmVjdC5oZWlnaHQgLyAyICkgKiBjYW1lcmEuc3RhdGUuc2NhbGluZyk7XG4gIGxldCBoZWlnaHQgPSByZWN0LmhlaWdodCAqIGNhbWVyYS5zdGF0ZS5zY2FsaW5nO1xuICBsZXQgd2lkdGggPSByZWN0LndpZHRoICogY2FtZXJhLnN0YXRlLnNjYWxpbmc7XG4gIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb2xvcjtcbiAgY29udGV4dC5saW5lV2lkdGggPSBsaW5lV2lkdGggKiBjYW1lcmEuc3RhdGUuc2NhbGluZztcbiAgY29udGV4dC5zdHJva2VSZWN0KGZpbmFsX3gsIGZpbmFsX3ksIHdpZHRoLCBoZWlnaHQpO1xufVxuXG5leHBvcnQgY29uc3QgcmVjdF9yZW5kZXJlciA9IChjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHJlY3Q6IHJlY3RhbmdsZSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIGNvbG9yOiBzdHJpbmcsIGNhbWVyYTogQ2FtZXJhLG9wYWNpdHk6bnVtYmVyID0gMSkgPT4ge1xuICBsZXQgdmhlaWdodCA9IGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLmhlaWdodCAvIGNhbWVyYS5zdGF0ZS5zY2FsaW5nO1xuICBsZXQgZmluYWxfeCA9ICgoeCAtIGNhbWVyYS5zdGF0ZS5wb3NpdGlvbi54ICsgY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMud2lkdGggKiAoMS9jYW1lcmEuc3RhdGUuc2NhbGluZykgLyAyIC0gcmVjdC53aWR0aCAvIDIpICogY2FtZXJhLnN0YXRlLnNjYWxpbmcpO1xuICBsZXQgZmluYWxfeSA9ICgodmhlaWdodCAtIHkgLSByZWN0LmhlaWdodCAvIDIgLSBjYW1lcmEuc3RhdGUuZGltZW5zaW9ucy5oZWlnaHQgKiAoMS9jYW1lcmEuc3RhdGUuc2NhbGluZykgLyAyICsgY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnkpICogY2FtZXJhLnN0YXRlLnNjYWxpbmcpO1xuICBsZXQgaGVpZ2h0ID0gcmVjdC5oZWlnaHQgKiBjYW1lcmEuc3RhdGUuc2NhbGluZztcbiAgbGV0IHdpZHRoID0gcmVjdC53aWR0aCAqIGNhbWVyYS5zdGF0ZS5zY2FsaW5nO1xuICBjb250ZXh0LnNhdmUoKTtcbiAgY29udGV4dC50cmFuc2xhdGUoZmluYWxfeCxmaW5hbF95KTtcbiAgY29udGV4dC5nbG9iYWxBbHBoYSA9IG9wYWNpdHk7XG4gIGNvbnRleHQuZmlsbFN0eWxlID0gY29sb3I7XG4gIGNvbnRleHQuZmlsbFJlY3QoLXdpZHRoLzIsIC1oZWlnaHQvMiwgd2lkdGgsIGhlaWdodCk7XG4gIGNvbnRleHQucmVzdG9yZSgpO1xufSIsImltcG9ydCB7IGJvdW5kaW5nX2JveCwgZ3Jhdml0eV9vYmosb2JqIH0gZnJvbSBcIi4vb2JqZWN0XCI7XG5pbXBvcnQgeyBQYXJ0aWNsZSwgc3ByaXRlIH0gZnJvbSBcIi4vc3ByaXRlXCI7XG5pbXBvcnQgeyBkaW1lbnNpb25zLCBvYmpfc3RhdGUsIFZlY3RvciB9IGZyb20gXCIuL3N0YXRlXCI7XG5pbXBvcnQgeyB2ZWxvY2l0eUNvbGxpc2lvbkNoZWNrLGNoZWNrX2NvbGxpc2lvbnMsY29sbGlzaW9uX2JveCxjaGVja19hbGxfY29sbGlzaW9ucyxjaGVja19hbGxfb2JqZWN0c30gZnJvbSBcIi4vY29sbGlzaW9uXCI7XG5pbXBvcnQge3JlbmRlcl9jb2xsaXNpb25fYm94LERFQlVHLCBQQVVTRUQsIHBlZXJfY29ubmVjdGlvbiwgY3JlYXRlSXRlbVN0cmluZ30gZnJvbSBcIi4uL3ZhblwiO1xuaW1wb3J0IHtCaW5kLGNvbnRyb2xfZnVuYywgZXhlY190eXBlLCBQb2xsX01vdXNlfSBmcm9tIFwiLi9jb250cm9sc1wiO1xuaW1wb3J0IHtIVUQsVGV4dCwgVGV4dF9Ob2RlfSBmcm9tIFwiLi9odWRcIjtcbmltcG9ydCB7YXVkaW99IGZyb20gXCIuL2F1ZGlvXCJcbmltcG9ydCB7Z2FtZSxwZWVyX3RvX3BlZXJfZ2FtZX0gZnJvbSBcIi4uL3ZhblwiO1xuaW1wb3J0IHtkZWJ1Z191cGRhdGVfb2JqX2xpc3Qscm9vdF9wYXRoLHBhdGgsIGRlYnVnX3N0YXRlfSBmcm9tIFwiLi4vbGliL2RlYnVnXCI7XG5pbXBvcnQge3ByZWZhYnN9IGZyb20gXCIuLi9nYW1lL29iamVjdHMvcHJlZmFic1wiO1xuaW1wb3J0IHtWZWMsZ2V0UmFuZEludH0gZnJvbSBcImxpYi9tYXRoXCI7XG5pbXBvcnQgeyBDYW1lcmEgfSBmcm9tIFwiLi9yZW5kZXJcIjtcbmltcG9ydCB7bmV0X3R5cGUsIFdlYiwgTmV0d29ya30gZnJvbSBcIi4vbmV0d29ya1wiO1xuXG5pbnRlcmZhY2UgcG9zaXRpb257XG4gIHg6bnVtYmVyLFxuICB5Om51bWJlclxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlHcmF2aXR5KG9iOmdyYXZpdHlfb2JqLGdyYXZfY29uc3Q6bnVtYmVyLCBncmF2X21heDpudW1iZXIpe1xuICBpZihvYi5ncmF2aXR5ICYmIG9iLnN0YXRlLnZlbG9jaXR5LnkgPiBncmF2X21heCl7XG4gICAgb2Iuc3RhdGUudmVsb2NpdHkueSArPSBncmF2X2NvbnN0O1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgcGFydGljbGVfZW50cnl7XG4gIHNwcml0ZTpzdHJpbmcsXG4gIGhlaWdodDpudW1iZXIsXG4gIHdpZHRoOm51bWJlclxufVxuXG5pbnRlcmZhY2UgcGFydGljbGVze1xuICBbaW5kZXg6c3RyaW5nXTpwYXJ0aWNsZV9lbnRyeVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIHJvb21faTxUPntcbiAgYmFja2dyb3VuZF91cmw6c3RyaW5nLFxuICBvYmplY3RzOm9ialtdXG4gIHN0YXRlOlRcbn1cblxuZXhwb3J0IGludGVyZmFjZSBvYmplY3Rfc3RhdGVfY29uZmlnIHtcbiAgdHlwZTpzdHJpbmcsXG4gIHN0YXRlOm9ial9zdGF0ZSxcbiAgcGFyYW1ldGVycz86IHVua25vd25cbn1cblxuZXhwb3J0IGludGVyZmFjZSBzdGF0ZV9jb25maWd7XG4gIG9iamVjdHM6b2JqZWN0X3N0YXRlX2NvbmZpZ1tdXG59XG5cbmludGVyZmFjZSBpbnRlcm5hbF9tYXB7XG4gIFtpbmRleDpudW1iZXJdOntcbiAgICBbaW5kZXg6bnVtYmVyXTpNYXA8c3RyaW5nLG9iaj5cbiAgfVxufVxuXG5pbnRlcmZhY2UgY2FjaGVfZW50cmllc3tcbiAgW2luZGV4OnN0cmluZ106YW55XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgcDJwe1xuICBwYXJzZV9wYWNrZXQodHlwZTpzdHJpbmcsZGF0YTp1bmtub3duLGlkOnN0cmluZyk6dm9pZFxufVxuXG5cbmV4cG9ydCBjbGFzcyBwcm94aW1pdHlfbWF0cml4e1xuICBsZW5ndGg6bnVtYmVyO1xuICBzcXVhcmVfbGVuZ3RoOm51bWJlcjtcbiAgaW50ZXJuYWxfbWFwOmludGVybmFsX21hcCA9IHt9O1xuICBjb25zdHJ1Y3RvcihmdWxsX2xlbmd0aDpudW1iZXIsZGltZW5zaW9uOm51bWJlcil7XG4gICAgdGhpcy5sZW5ndGggPSBmdWxsX2xlbmd0aDtcbiAgICB0aGlzLnNxdWFyZV9sZW5ndGggPSB0aGlzLmxlbmd0aC9kaW1lbnNpb247XG4gICAgaWYoZGltZW5zaW9uICUgMiAhPSAxKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb3hpbWl0eSBtYXAgbWF0aXggZGltZW5zaW9uIG11c3QgYmUgb2RkLiBHb3Q6XCIgKyBkaW1lbnNpb24pXG4gICAgfVxuICB9XG4gIHByaXZhdGUgZW5zdXJlKGE6VmVjdG9yKXtcbiAgICBpZighdGhpcy5pbnRlcm5hbF9tYXBbYS55XSl7XG4gICAgICB0aGlzLmludGVybmFsX21hcFthLnldID0ge31cbiAgICB9XG4gICAgaWYoIXRoaXMuaW50ZXJuYWxfbWFwW2EueV1bYS54XSl7XG4gICAgICB0aGlzLmludGVybmFsX21hcFthLnldW2EueF0gPSBuZXcgTWFwPHN0cmluZyxvYmo+KCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmludGVybmFsX21hcFthLnldW2EueF07XG4gIH1cbiAgZ2V0KGE6VmVjdG9yKXtcbiAgICByZXR1cm4gdGhpcy5lbnN1cmUoYSk7XG4gIH1cbiAgYWRkKGE6VmVjdG9yLG86b2JqKXtcbiAgICBsZXQgZW50cnkgPSB0aGlzLmVuc3VyZShhKTtcbiAgICBlbnRyeS5zZXQoby5pZCxvKTtcbiAgICBvLnByb3hpbWl0eV9ib3hlcy5hZGQoYSk7XG4gIH1cbiAgZXhpc3RzKGE6VmVjdG9yKXtcbiAgICBpZighdGhpcy5pbnRlcm5hbF9tYXBbYS55XSB8fCAhdGhpcy5pbnRlcm5hbF9tYXBbYS55XVthLnhdKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJlbW92ZShhOlZlY3RvcixvOm9iail7XG4gICAgbGV0IGVudHJ5ID0gdGhpcy5pbnRlcm5hbF9tYXBbYS55XVthLnhdO1xuICAgIGVudHJ5LmRlbGV0ZShvLmlkKTtcbiAgICBvLnByb3hpbWl0eV9ib3hlcy5kZWxldGUoYSk7XG4gIH1cbiAgZ2V0T2JqZWN0c0Zyb21Cb3goYTpjb2xsaXNpb25fYm94KTpvYmpbXXtcbiAgICByZXR1cm4gdGhpcy5nZXRPYmplY3RzRnJvbUNvcmRzKHRoaXMuZ2V0Q29yZHNGcm9tQm94KGEpKTtcbiAgfVxuICBnZXRPYmplY3RzRnJvbUNvcmRzKGlucHV0OlZlY3RvcltdKTpvYmpbXXtcbiAgICBsZXQgb2JqZWN0X3NldCA9IG5ldyBTZXQ8b2JqPigpO1xuICAgIGZvcihsZXQgY29yZCBvZiBpbnB1dCl7XG4gICAgICBpZih0aGlzLmV4aXN0cyhjb3JkKSl7XG4gICAgICAgIGxldCBrZXlzID0gdGhpcy5pbnRlcm5hbF9tYXBbY29yZC55XVtjb3JkLnhdLmtleXMoKTtcbiAgICAgICAgZm9yKGxldCBrIG9mIGtleXMpe1xuICAgICAgICAgIGxldCBqID0gdGhpcy5pbnRlcm5hbF9tYXBbY29yZC55XVtjb3JkLnhdLmdldChrKTtcbiAgICAgICAgICBvYmplY3Rfc2V0LmFkZChqKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gQXJyYXkuZnJvbShvYmplY3Rfc2V0KTtcbiAgfVxuICBnZXRDb3Jkc0Zyb21Cb3goYTpjb2xsaXNpb25fYm94KXtcbiAgICBsZXQgYm90dG9tX2xlZnQgPSBWZWMuY3JlYXRlKGEueCAtIGEud2lkdGgvMixhLnkgLSBhLmhlaWdodC8yKTtcbiAgICBsZXQgdG9wX3JpZ2h0ID0gVmVjLmNyZWF0ZShhLnggKyBhLndpZHRoLzIsYS55ICsgYS5oZWlnaHQvMik7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q29yZHNGcm9tQm91bmRpbmdCb3goe2JvdHRvbV9sZWZ0LHRvcF9yaWdodH0pXG4gIH1cbiAgZ2V0Q29yZHNGcm9tQm91bmRpbmdCb3goYTpib3VuZGluZ19ib3gpe1xuICAgIGxldCBib3ggPSBhO1xuICAgIGxldCBib3RfbGVmdCA9IFZlYy5zY2FsYXJfZGl2aWRlKFZlYy5zY2FsYXJfYWRkKGJveC5ib3R0b21fbGVmdCx0aGlzLmxlbmd0aC8yKSx0aGlzLnNxdWFyZV9sZW5ndGgpO1xuICAgIGxldCB0b3BfcmlnaHQgPSBWZWMuc2NhbGFyX2RpdmlkZShWZWMuc2NhbGFyX2FkZChib3gudG9wX3JpZ2h0LHRoaXMubGVuZ3RoLzIpLHRoaXMuc3F1YXJlX2xlbmd0aCk7XG4gICAgYm90X2xlZnQgPSBWZWMuZnVuYyhib3RfbGVmdCwoYSk9Pk1hdGgubWF4KDAsYSkpO1xuICAgIHRvcF9yaWdodCA9IFZlYy5mdW5jKHRvcF9yaWdodCwoYSk9Pk1hdGgubWluKHRoaXMubGVuZ3RoL3RoaXMuc3F1YXJlX2xlbmd0aCxhKSk7XG4gICAgbGV0IG1pbiA9IFZlYy5mdW5jKGJvdF9sZWZ0LChhKT0+TWF0aC5mbG9vcihhKSk7XG4gICAgbGV0IG1heCA9IFZlYy5mdW5jKHRvcF9yaWdodCwoYSk9Pk1hdGguY2VpbChhKSk7XG4gICAgbGV0IGRpbWVuc2lvbnNfaW5fYm94ZXMgPSBWZWMuc3ViKG1heCxtaW4pO1xuICAgIFxuICAgIGxldCBhbGxfYm94ZXMgPSBbXTtcbiAgICBsZXQgY29yZCA9IFZlYy5mdW5jKFxuICAgICAgVmVjLnNjYWxhcl9kaXZpZGUoXG4gICAgICAgIFZlYy5zY2FsYXJfYWRkKFxuICAgICAgICAgIFZlYy5mdW5jKGJveC5ib3R0b21fbGVmdCwoYSk9Pk1hdGgubWF4KGEsLXRoaXMubGVuZ3RoLzIpKSxcbiAgICAgICAgICB0aGlzLmxlbmd0aC8yKSxcbiAgICAgICAgdGhpcy5zcXVhcmVfbGVuZ3RoKSxcbiAgICAgIChhKT0+TWF0aC5mbG9vcihhKVxuICAgICk7XG4gICAgZm9yKGxldCBhID0gMDthPGRpbWVuc2lvbnNfaW5fYm94ZXMueTthKyspe1xuICAgICAgZm9yKGxldCBiID0gMDtiPGRpbWVuc2lvbnNfaW5fYm94ZXMueDtiKyspe1xuICAgICAgICBsZXQgbmV3X3ZlYyA9IFZlYy5hZGQoVmVjLmNyZWF0ZShiLGEpLGNvcmQpO1xuICAgICAgICBuZXdfdmVjID0gVmVjLmZ1bmMobmV3X3ZlYywoYSk9Pk1hdGguZmxvb3IoYSkpO1xuICAgICAgICBhbGxfYm94ZXMucHVzaChuZXdfdmVjKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFsbF9ib3hlcztcbiAgfVxuICBcbiAgZ2V0Qm94TG9jYXRpb25zKG86b2JqKXtcbiAgICBsZXQgYm94ID0gby5nZXRCb3VuZGluZ0JveCgpO1xuICAgIGxldCBjb3JkcyA9IHRoaXMuZ2V0Q29yZHNGcm9tQm91bmRpbmdCb3goYm94KTtcbiAgICByZXR1cm4gY29yZHM7XG4gIH1cblxufVxuXG5leHBvcnQgY2xhc3Mgcm9vbTxUPntcbiAgLy9VcmwgdG8gYW4gaW1hZ2UgdG8gYmUgdXNlZCBmb3IgdGhlIHJvb20gYmFja2dyb3VuZFxuICBiYWNrZ3JvdW5kX3VybDogc3RyaW5nO1xuICBiYWNrZ3JvdW5kOiBIVE1MSW1hZ2VFbGVtZW50O1xuICBvYmplY3RzOiBvYmpbXSA9IFtdO1xuICAvL1RoaXMgb2JqZWN0IGNvbnRhaW5zIHBhcnRpY2xlIGRlZmluaXRpb25zXG4gIHBhcnRpY2xlczpwYXJ0aWNsZXMgPSB7fTtcbiAgLy9UaGlzIGFycmF5IGlzIHdoYXQgYWN0dWFsbHkgY29udGFpbnMgdGhlIHBhcnRpY2xlc1xuICAvL3RoYXQgZXhpc3RzIHdpdGhpbiB0aGUgcm9vbS5cbiAgcGFydGljbGVzX2Fycjogb2JqW10gPSBbXTtcbiAgc3RhdGU6IFQ7XG4gIGJpbmRzOm51bWJlcltdID0gW107XG4gIGdhbWU6Z2FtZTx1bmtub3duPjtcbiAgaHVkOkhVRDtcbiAgdmFsaWQ6Ym9vbGVhbiA9IHRydWU7XG4gIGF1ZGlvID0gbmV3IGF1ZGlvKCk7XG4gIC8vVGhlc2UgdGV4dCBub2RlcyBleGlzdHMgaW4gdGhlIGFjdHVhbCByb29tIHNwYWNlLCByYXRoZXIgdGhhblxuICAvL29uIHRoZSBodWQgbGF5ZXIuXG4gIHJlbmRlcjpib29sZWFuID0gdHJ1ZTtcbiAgdGV4dF9ub2RlczpUZXh0W10gPSBbXTtcbiAgY29uZmlnOnN0YXRlX2NvbmZpZztcbiAgcHJveGltaXR5X21hcDpwcm94aW1pdHlfbWF0cml4ID0gbmV3IHByb3hpbWl0eV9tYXRyaXgoMTAwMDAsNSk7XG4gIGNhbWVyYXM6Q2FtZXJhW10gPSBbXTtcbiAgY2FjaGVfZW50cmllczpjYWNoZV9lbnRyaWVzID0ge307XG4gIGNvbnN0cnVjdG9yKGdhbWU6Z2FtZTx1bmtub3duPixjb25maWc6c3RhdGVfY29uZmlnKXtcbiAgICB0aGlzLmdhbWUgPSBnYW1lO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuYmluZENvbnRyb2woXCJtb3VzZTBcIixleGVjX3R5cGUub25jZSwoKT0+e1xuICAgICAgbGV0IGh1ZF9jbGlja2VkID0gZmFsc2U7XG4gICAgICBmb3IobGV0IGNhbSBvZiB0aGlzLmNhbWVyYXMpe1xuICAgICAgICBpZihjYW0uaHVkKXtcbiAgICAgICAgICBsZXQgbW91c2VfaHVkID0gUG9sbF9Nb3VzZShjYW0sdHJ1ZSk7XG4gICAgICAgICAgZm9yKGxldCBvYmogb2YgY2FtLmh1ZC5ncmFwaGljX2VsZW1lbnRzKXtcbiAgICAgICAgICAgIGlmKG9iai5jb2xsaWRlc1dpdGhQb2ludChtb3VzZV9odWQpKXtcbiAgICAgICAgICAgICAgaHVkX2NsaWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICBvYmouZXZlbnQoXCJjbGlja1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmKCFodWRfY2xpY2tlZCl7XG4gICAgICAgIGZvcihsZXQgY2FtIG9mIHRoaXMuY2FtZXJhcyl7XG4gICAgICAgICAgbGV0IG1vdXNlID0gUG9sbF9Nb3VzZShjYW0pXG4gICAgICAgICAgbGV0IGNvbGxpZGVycyA9IHRoaXMuY2hlY2tPYmplY3RzUG9pbnQobW91c2UpO1xuICAgICAgICAgIGZvcihsZXQgb2JqIG9mIGNvbGxpZGVycyl7XG4gICAgICAgICAgICBvYmouZXZlbnQoXCJjbGlja1wiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG4gIFxuICBleHBvcnRTdGF0ZUNvbmZpZygpe1xuICAgIGxldCBjb25maWc6c3RhdGVfY29uZmlnID0ge29iamVjdHM6W119O1xuICAgIGxldCBmaWx0ZXJlZCA9IHRoaXMub2JqZWN0cy5maWx0ZXIoKG9iaik9Pm9iai5zYXZlX3RvX2ZpbGUgJiYgIW9iai5wYXJlbnQpXG4gICAgZm9yKGxldCBvIG9mIGZpbHRlcmVkKXtcbiAgICAgIC8vSWYgYW4gb2JqZWN0IGhhcyBhIHBhcmVudCBvYmplY3QsIGl0J3MgYSBkZXNjZW5kZW50IG9mIGEgY29tcG9zaXRlIG9iamVjdFxuICAgICAgLy9UaGUgcGFyZW50IHdpbGwgc3Bhd24gdGhpcyBvYmplY3Qgd2hlbiBpdCdzIGluc3RhbnRpYXRlZCwgc28gd2UgZG9cbiAgICAgIC8vbm90IGhhdmUgdG8gc2F2ZSB0aGlzIGluc3RhbmNlLlxuICAgICAgICBsZXQgc3RhdGU6b2JqX3N0YXRlID0ge1xuICAgICAgICAgIHBvc2l0aW9uOlZlYy5mcm9tKG8uc3RhdGUucG9zaXRpb24pXG4gICAgICAgIH1cbiAgICAgICAgaWYoby5zdGF0ZS52ZWxvY2l0eS54ICE9IDAgfHwgby5zdGF0ZS52ZWxvY2l0eS55ICE9MCl7XG4gICAgICAgICAgc3RhdGUudmVsb2NpdHkgPSBWZWMuZnJvbShvLnN0YXRlLnZlbG9jaXR5KVxuICAgICAgICB9XG4gICAgICAgIGlmKG8uc3RhdGUucm90YXRpb24gIT0gMCl7XG4gICAgICAgICAgc3RhdGUucm90YXRpb24gPSBvLnN0YXRlLnJvdGF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmKG8uc3RhdGUuc2NhbGluZy53aWR0aCAhPSAxIHx8IG8uc3RhdGUuc2NhbGluZy5oZWlnaHQgIT0gMSl7XG4gICAgICAgICAgc3RhdGUuc2NhbGluZyA9IG8uc3RhdGUuc2NhbGluZztcbiAgICAgICAgfVxuICAgICAgICBpZihPYmplY3Qua2V5cyhvLnBhcmFtcykubGVuZ3RoID4gMCl7XG4gICAgICAgICAgY29uZmlnLm9iamVjdHMucHVzaCh7XG4gICAgICAgICAgICB0eXBlOm8uY29uc3RydWN0b3IubmFtZSxcbiAgICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgICAgcGFyYW1ldGVyczpvLnBhcmFtc1xuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uZmlnLm9iamVjdHMucHVzaCh7XG4gICAgICAgICAgICB0eXBlOm8uY29uc3RydWN0b3IubmFtZSxcbiAgICAgICAgICAgIHN0YXRlXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29uZmlnO1xuICB9XG4gIC8vVGhpcyBoYW5kbGVzIHRoZSBsb2FkaW5nIG9mIGFsbCByb29tIHNwcml0ZXMsIGFuZFxuICAvL2FueSBvYmplY3RzIGl0IGNvbnRhaW5zLlxuICBsb2FkKCkge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBiYWNrZ3JvdW5kID0gbmV3IEltYWdlKCk7XG4gICAgICBsZXQgb2JqZWN0X3Byb21pc2VfYXJyYXkgPSB0aGlzLm9iamVjdHMubWFwKChhKSA9PiBhLmxvYWQoKSk7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChvYmplY3RfcHJvbWlzZV9hcnJheSk7XG4gICAgICBsZXQgYmFja2dyb3VuZF91cmwgPSB0aGlzLmJhY2tncm91bmRfdXJsO1xuICAgICAgaWYoREVCVUcpe1xuICAgICAgICBiYWNrZ3JvdW5kX3VybCA9IHBhdGguam9pbihyb290X3BhdGgsdGhpcy5iYWNrZ3JvdW5kX3VybCk7XG4gICAgICB9XG4gICAgICBiYWNrZ3JvdW5kLnNyYyA9IGJhY2tncm91bmRfdXJsO1xuICAgICAgYmFja2dyb3VuZC5vbmVycm9yID0gKCgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTG9hZGluZyBFcnJvcjpcIiArIHRoaXMuYmFja2dyb3VuZF91cmwpO1xuICAgICAgfSlcbiAgICAgIGJhY2tncm91bmQub25sb2FkID0gKGFzeW5jKCkgPT4ge1xuICAgICAgICBfdGhpcy5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZDtcbiAgICAgICAgYXdhaXQgdGhpcy5hdWRpby5sb2FkKCk7XG4gICAgICAgIGZvcihsZXQgY2FtIG9mIHRoaXMuY2FtZXJhcyl7XG4gICAgICAgICAgaWYoY2FtLmh1ZCl7XG4gICAgICAgICAgICBhd2FpdCBjYW0uaHVkLmxvYWQoKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICB9KVxuICB9XG4gIGluaXRpYWxpemUoKXtcblxuICB9XG4gIC8vVGhpcyBpcyB1c2VkIHdoaWxlIGxvYWRpbmcgb2JqZWN0cyBmcm9tIGZpbGUsIGl0J3MgdXNlZCB0byBkeW5hbWljYWxseSBsb2FkXG4gIC8vb2JqZWN0cyBmcm9tIHRoZSByb29tJ3MganNvbi4gSWYgYWRkaW5nIGl0ZW1zIHdpdGhpbiBjb2RlLCBpdCdzIGJldHRlciB0byBjcmVhdGVcbiAgLy9uZXcgaW5zdGFuY2VzIG9mIG9iamVjdHMgdGhyb3VnaCBhZGRJdGVtXG4gIGNyZWF0ZUl0ZW1TdHJpbmcobmFtZTpzdHJpbmcsc3RhdGVfY29uZmlnOm9ial9zdGF0ZSxwYXJhbWV0ZXJzOmFueSk6b2Jqe1xuICAgIHJldHVybiBjcmVhdGVJdGVtU3RyaW5nKG5hbWUsc3RhdGVfY29uZmlnLHBhcmFtZXRlcnMpO1xuICB9XG4gIGFzeW5jIGFkZEl0ZW1TdGF0ZUNvbmZpZyhjb25maWc6b2JqZWN0X3N0YXRlX2NvbmZpZyxpZD86c3RyaW5nKXtcbiAgICBpZihwcmVmYWJzW2NvbmZpZy50eXBlXSl7XG4gICAgICBsZXQgcGFyYW1zID0gY29uZmlnLnBhcmFtZXRlcnMgfHwge31cbiAgICAgIGxldCBuZXdfb2JqID0gPG9iaj4obmV3IHByZWZhYnNbY29uZmlnLnR5cGVdKE9iamVjdC5hc3NpZ24oe30sY29uZmlnLnN0YXRlKSxwYXJhbXMpKTtcbiAgICAgIGlmKGlkKSBuZXdfb2JqLmlkID0gaWQ7XG4gICAgICBhd2FpdCB0aGlzLmFkZEl0ZW1zKG5ld19vYmouY29tYmluZWRPYmplY3RzKCkpO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgY29uc29sZS5sb2coXCJVTktOT1dOIFRZUEUgQVRURU1QVEVEIFRPIExPQUQ6IFwiICsgY29uZmlnLnR5cGUpXG4gICAgfVxuICB9XG4gIC8vQWRkcyB0aGUgcGFzc2VkIGl0ZW0gdG8gdGhlIHJvb20uXG4gIGFzeW5jIGFkZEl0ZW0obzpvYmosIGxpc3QgPSB0aGlzLm9iamVjdHMpe1xuICAgIGF3YWl0IHRoaXMuYWRkSXRlbXMoWy4uLm8uY29tYmluZWRPYmplY3RzKCldLGxpc3QpO1xuICB9XG4gIC8vQWRkcyBldmVyeSBpdGVtIGluIHRoZSBwYXNzZWQgYXJyYXkgdG8gdGhlIHJvb20uXG4gIGFzeW5jIGFkZEl0ZW1zKG86b2JqW10sIGxpc3QgPSB0aGlzLm9iamVjdHMpe1xuICAgIGZvcihsZXQgb2Igb2Ygbyl7XG4gICAgICBvYi5nYW1lID0gdGhpcy5nYW1lO1xuICAgIH1cbiAgICBhd2FpdCBQcm9taXNlLmFsbChvLm1hcCgoYSk9PmEubG9hZCgpKSk7XG4gICAgaWYobGlzdCA9PSB0aGlzLm9iamVjdHMpe1xuICAgICAgZm9yKGxldCBvYiBvZiBvKXtcbiAgICAgICAgbGV0IGNvcmRzID0gdGhpcy5wcm94aW1pdHlfbWFwLmdldEJveExvY2F0aW9ucyhvYik7XG4gICAgICAgIGZvcihsZXQgY29yZCBvZiBjb3Jkcyl7XG4gICAgICAgICAgdGhpcy5wcm94aW1pdHlfbWFwLmFkZChjb3JkLG9iKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBsaXN0LnB1c2goLi4ubyk7XG4gICAgaWYodGhpcy5nYW1lLnN0YXRlLmN1cnJlbnRfcm9vbSAmJiBvLnNvbWUoKG8pPT5vLnN0YXRpYykpe1xuICAgICAgdGhpcy5nYW1lLmRyYXdBbGxTdGF0aWNzKCk7XG4gICAgfVxuICAgIGlmKERFQlVHICYmIGxpc3QgPT09IHRoaXMub2JqZWN0cyl7XG4gICAgICBkZWJ1Z191cGRhdGVfb2JqX2xpc3QoKTtcbiAgICB9XG4gIH1cbiAgLy9EZWxldGVzIHRoZSBpdGVtIGFuZCByZW1vdmVzIGl0IGZyb20gdGhlIHJvb20ncyBvYmplY3QgbGlzdFxuICBkZWxldGVJdGVtKGlkOnN0cmluZywgbGlzdCA9IHRoaXMub2JqZWN0cyl7XG4gICAgZm9yKGxldCBhID0gMDthIDwgbGlzdC5sZW5ndGg7YSsrKXtcbiAgICAgIGlmKGxpc3RbYV0uaWQgPT09IGlkKXtcbiAgICAgICAgbGlzdC5zcGxpY2UoYSwxKVxuICAgICAgICBhLS07XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmKERFQlVHICYmIGxpc3QgPT09IHRoaXMub2JqZWN0cyl7XG4gICAgICBkZWJ1Z191cGRhdGVfb2JqX2xpc3QoKTtcbiAgICB9XG4gIH1cbiAgLy9BbnkgcGFydGljbGVzIHRoYXQgYXJlIG5lZWRlZCBpbiB0aGUgcm9vbSBzaG91bGQgYmUgYWRkZWQgdG8gdGhlIHBhcnRpY2xlIGFycmF5IGhlcmUuXG4gIHJlZ2lzdGVyUGFydGljbGVzKCl7XG5cbiAgfVxuICAvL0FkZHMgYSBiaW5kIHRoYXQgaXMgZXhlY3V0ZWQgd2hlbiB0aGUgcGFzc2VkIGtleSBpcyBhY3RpdmF0ZWRcbiAgLy9rZXkgZXhhbXBsZXM6IG1vdXNlMGRvd24gS2V5QWRvd24gS2V5THVwXG4gIGJpbmRDb250cm9sKGtleTpzdHJpbmcseDpleGVjX3R5cGUsZnVuYzpjb250cm9sX2Z1bmMsaW50ZXJ2YWw6bnVtYmVyID0gMSl7XG4gICAgdGhpcy5iaW5kcy5wdXNoKEJpbmQoa2V5LGZ1bmMseCxpbnRlcnZhbCxmYWxzZSkpOyBcbiAgfVxuICAvL0NoZWNrcyBmb3Igb2JqZWN0cyB0aGF0IGhhdmUgY29sbGlzaW9uIGF0IHRoZSBwYXNzZWQgcG9pbnRcbiAgY2hlY2tDb2xsaXNpb25zUG9pbnQocG9zOlZlY3RvcixleGVtcHQ/OnN0cmluZ1tdLGxpc3QgPSB0aGlzLm9iamVjdHMpOm9ialtde1xuICAgIHJldHVybiB0aGlzLmNoZWNrQ29sbGlzaW9ucyh7eDpwb3MueCx5OnBvcy55LGhlaWdodDowLHdpZHRoOjB9LGV4ZW1wdCxsaXN0KTtcbiAgfVxuICAvL0NoZWNrcyBmb3IgYW55IG9iamVjdHMgYXQgdGhlIHBhc3NlZCBwb2ludFxuICBjaGVja09iamVjdHNQb2ludChwb3M6VmVjdG9yLGV4ZW1wdD86c3RyaW5nW10sbGlzdCA9IHRoaXMub2JqZWN0cyk6b2JqW117XG4gICAgcmV0dXJuIHRoaXMuY2hlY2tPYmplY3RzKHt4OnBvcy54LHk6cG9zLnksaGVpZ2h0OjAsd2lkdGg6MH0sZXhlbXB0LGxpc3QpO1xuICB9XG4gIC8vQ2hlY2tzIGZvciBjb2xsaXNpb25zIGF0IHRoZSBwb2ludCB0aGF0IGNvbnRhaW4gZXZlcnkgdGFnIHdpdGhpbiB0aGUgc2Vjb25kIGFyZ3VtZW50XG4gIGNoZWNrQ29sbGlzaW9uc1BvaW50SW5jbHVzaXZlKHBvczpWZWN0b3IsdGFncz86c3RyaW5nW10sbGlzdCA9IHRoaXMub2JqZWN0cyk6b2JqW117XG4gICAgcmV0dXJuIHRoaXMuY2hlY2tDb2xsaXNpb25zSW5jbHVzaXZlKHt4OnBvcy54LHk6cG9zLnksaGVpZ2h0OjAsd2lkdGg6MH0sdGFncyxsaXN0KTtcbiAgfVxuICAvL0NoZWNrcyBmb3IgYW55IG9iamVjdHMgdGhhdCBjb250YWluIGV2ZXJ5IHRhZyB3aXRoaW4gdGhlIHNlY29uZCBhcmd1bWVudFxuICBjaGVja09iamVjdHNQb2ludEluY2x1c2l2ZShwb3M6VmVjdG9yLHRhZ3M/OnN0cmluZ1tdLGxpc3QgPSB0aGlzLm9iamVjdHMpOm9ialtde1xuICAgIHJldHVybiB0aGlzLmNoZWNrT2JqZWN0c0luY2x1c2l2ZSh7eDpwb3MueCx5OnBvcy55LGhlaWdodDowLHdpZHRoOjB9LHRhZ3MsbGlzdCk7XG4gIH1cbiAgLy9DaGVja3MgZm9yIGNvbGxpc2lvbnMgaW4gdGhlIGJveCB0aGF0IGNvbnRhaW4gdGhlIHRhZ3MgaW4gdGhlIHNlY29uZCBhcmd1bWVudFxuICBjaGVja0NvbGxpc2lvbnNJbmNsdXNpdmUoYm94OmNvbGxpc2lvbl9ib3gsdGFnczpzdHJpbmdbXSxsaXN0PXRoaXMub2JqZWN0cyk6b2JqW117XG4gICAgaWYoREVCVUcpe1xuICAgICAgcmVuZGVyX2NvbGxpc2lvbl9ib3goYm94KTtcbiAgICB9XG4gICAgaWYobGlzdCA9PSB0aGlzLm9iamVjdHMpe1xuICAgICAgbGlzdCA9IHRoaXMucHJveGltaXR5X21hcC5nZXRPYmplY3RzRnJvbUJveChib3gpO1xuICAgIH1cbiAgICByZXR1cm4gbGlzdC5maWx0ZXIob2JqPT5vYmouY29sbGlzaW9uICYmIG9iai5jb2xsaWRlc1dpdGhCb3goYm94KSAmJiB0YWdzLmV2ZXJ5KCh2YWwpPT5vYmoudGFncy5oYXModmFsKSkpO1xuICAgIFxuICB9XG4gIC8vQ2hlY2tzIGZvciBhbnkgb2JqZWN0cyBpbiB0aGUgYm94IHRoYXQgY29udGFpbiBhbGwgdGFncyBpbiB0aGUgc2Vjb25kIGFyZ3VtZW50XG4gIGNoZWNrT2JqZWN0c0luY2x1c2l2ZShib3g6Y29sbGlzaW9uX2JveCx0YWdzOnN0cmluZ1tdLGxpc3Q9dGhpcy5vYmplY3RzKTpvYmpbXXtcbiAgICBpZihERUJVRyAmJiBkZWJ1Z19zdGF0ZS5yZW5kZXJfdG9nZ2xlc1tcImNvbGxpc2lvbl9ib3hcIl0pe1xuICAgICAgcmVuZGVyX2NvbGxpc2lvbl9ib3goYm94KTtcbiAgICB9XG4gICAgaWYobGlzdCA9PSB0aGlzLm9iamVjdHMpe1xuICAgICAgbGlzdCA9IHRoaXMucHJveGltaXR5X21hcC5nZXRPYmplY3RzRnJvbUJveChib3gpO1xuICAgIH1cbiAgICByZXR1cm4gbGlzdC5maWx0ZXIoKG9iaik9Pm9iai5jb2xsaWRlc1dpdGhCb3goYm94KSAmJiB0YWdzLmV2ZXJ5KCh2YWwpPT5vYmoudGFncy5oYXModmFsKSkpO1xuICAgIFxuICB9XG4gIC8vY2hlY2tzIGZvciBvYmplY3RzIHdpdGggY29sbGlzaW9uIGluIHRoZSBib3ggdGhhdCBkbyBub3QgY29udGFpbiB0aGUgdGFncyBpbiB0aGUgc2Vjb25kIGFyZ3VtZW50XG4gIGNoZWNrQ29sbGlzaW9ucyhib3g6Y29sbGlzaW9uX2JveCxleGVtcHQ6c3RyaW5nW10gPSBbXSxsaXN0PXRoaXMub2JqZWN0cyk6b2JqW117XG4gICAgaWYoREVCVUcgJiYgZGVidWdfc3RhdGUucmVuZGVyX3RvZ2dsZXNbXCJjb2xsaXNpb25fYm94XCJdKXtcbiAgICAgIHJlbmRlcl9jb2xsaXNpb25fYm94KGJveCk7XG4gICAgfVxuICAgIGlmKGxpc3QgPT0gdGhpcy5vYmplY3RzKXtcbiAgICAgIGxpc3QgPSB0aGlzLnByb3hpbWl0eV9tYXAuZ2V0T2JqZWN0c0Zyb21Cb3goYm94KTtcbiAgICB9XG4gICAgcmV0dXJuIGxpc3QuZmlsdGVyKG9iaj0+b2JqLmNvbGxpc2lvbiAmJiBvYmouY29sbGlkZXNXaXRoQm94KGJveCkgJiYgZXhlbXB0LmV2ZXJ5KCh2YWwpPT4hb2JqLnRhZ3MuaGFzKHZhbCkpKTtcbiAgfVxuICAvL2NoZWNrcyBmb3IgIGFueSBvYmplY3RzIGluIHRoZSBib3ggdGhhdCBkbyBub3QgY29udGFpbiB0aGUgdGFncyBpbiB0aGUgc2Vjb25kIGFyZ3VtZW50XG4gIGNoZWNrT2JqZWN0cyhib3g6Y29sbGlzaW9uX2JveCxleGVtcHQ6c3RyaW5nW10gPSBbXSxsaXN0PXRoaXMub2JqZWN0cyk6b2JqW117XG4gICAgaWYoREVCVUcgJiYgZGVidWdfc3RhdGUucmVuZGVyX3RvZ2dsZXNbXCJjb2xsaXNpb25fYm94XCJdKXtcbiAgICAgIHJlbmRlcl9jb2xsaXNpb25fYm94KGJveCk7XG4gICAgfVxuICAgIGlmKGxpc3QgPT0gdGhpcy5vYmplY3RzKXtcbiAgICAgIGxpc3QgPSB0aGlzLnByb3hpbWl0eV9tYXAuZ2V0T2JqZWN0c0Zyb21Cb3goYm94KTtcbiAgICB9XG4gICAgcmV0dXJuIGxpc3QuZmlsdGVyKG9iaj0+b2JqLmNvbGxpZGVzV2l0aEJveChib3gpICYmIGV4ZW1wdC5ldmVyeSgodmFsKT0+IW9iai50YWdzLmhhcyh2YWwpKSk7XG4gIH1cbiAgLy9UaGlzIG1ldGhvZCBzaG91bGQgYmUgdXNlZCB0byBjYWxsIGJpbmRDb250cm9sIGFuZCBjcmVhdGUgYW55IG5lZWRlZCBrZXlCaW5kaW5nc1xuICByZWdpc3RlckNvbnRyb2xzKCl7XG5cbiAgfVxuICByZWdpc3RlckF1ZGlvKCl7XG5cbiAgfVxuICBjbGVhbnVwKCl7XG5cbiAgfVxuICBjYWNoZShrZXk6c3RyaW5nLHZhbHVlPzphbnkpe1xuICAgIGlmKCF0aGlzLmNhY2hlX2VudHJpZXNba2V5XSl7XG4gICAgICB0aGlzLmNhY2hlX2VudHJpZXNba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jYWNoZV9lbnRyaWVzW2tleV07XG4gIH1cbiAgLy9UaGUgcm9vbSdzIHN0YXRlIHVwZGF0aW5nIGZ1bmN0aW9uLlxuICBzdGF0ZWYodGltZTogbnVtYmVyKSB7XG4gICAgZm9yKGxldCBwYXJ0aWNsZSBvZiB0aGlzLnBhcnRpY2xlc19hcnIpe1xuICAgICAgcGFydGljbGUuc3RhdGVmKHRpbWUpO1xuICAgIH1cbiAgICBmb3IobGV0IHRleHRfbm9kZSBvZiB0aGlzLnRleHRfbm9kZXMpe1xuICAgICAgdGV4dF9ub2RlLnN0YXRlZih0aW1lKTtcbiAgICB9XG4gICAgbGV0IHRpY2tpbmdfb2JqZWN0cyA9IHRoaXMub2JqZWN0cy5maWx0ZXIoKG8pPT5vLnRpY2tfc3RhdGUpO1xuICAgIGZvciAobGV0IGEgPSAwOyBhIDwgdGlja2luZ19vYmplY3RzLmxlbmd0aDsgYSsrKSB7XG4gICAgICAvL1RoaXMgZnVuY3Rpb24gY2hlY2tzIHRoZSB2ZWxvY2l0eSBvZiBldmVyeSBvYmplY3QsIGFuZCBtb3ZlcyBpdCBpbnRvIGl0J3MgbmV4dCBsb2NhdGlvblxuICAgICAgLy9wcm92aWRlZCB0aGF0IGl0IGNhbiBmaXQgdGhlcmUuXG4gICAgICB2ZWxvY2l0eUNvbGxpc2lvbkNoZWNrKHRpY2tpbmdfb2JqZWN0c1thXSwgdGhpcy5vYmplY3RzKTtcbiAgICAgIHRpY2tpbmdfb2JqZWN0c1thXS5zdGF0ZWYodGltZSk7XG4gICAgfVxuICAgIGZvcihsZXQgY2FtIG9mIHRoaXMuY2FtZXJhcyl7XG4gICAgICBpZihjYW0uaHVkKXtcbiAgICAgICAgY2FtLmh1ZC5zdGF0ZWYodGltZSk7XG4gICAgICB9XG4gICAgICBjYW0uc3RhdGVmKHRpbWUpO1xuICAgIH1cbiAgfVxuICBlbWl0UGFydGljbGUobmFtZTpzdHJpbmcscG9zOnBvc2l0aW9uLGxpZmV0aW1lOm51bWJlcixwb3NfcmFuZ2U6bnVtYmVyKXtcbiAgICBsZXQgc3RhdGUgPSB7XG4gICAgICBwb3NpdGlvbjpWZWMuZnVuYyhwb3MsKGEpID0+IGEgKyBnZXRSYW5kSW50KC1wb3NfcmFuZ2UscG9zX3JhbmdlKSksXG4gICAgICB2ZWxvY2l0eTp7eDowLHk6MH0sXG4gICAgICByb3RhdGlvbjowLFxuICAgICAgc2NhbGluZzp7d2lkdGg6MSxoZWlnaHQ6MX1cbiAgICB9XG4gICAgdGhpcy5hZGRJdGVtKG5ldyBQYXJ0aWNsZSh0aGlzLnBhcnRpY2xlc1tuYW1lXSxzdGF0ZSxsaWZldGltZSksdGhpcy5wYXJ0aWNsZXNfYXJyKTtcbiAgfVxuICBnZXRPYmooaWQ6c3RyaW5nKXtcbiAgICBmb3IobGV0IGEgPSAwOyBhIDwgdGhpcy5vYmplY3RzLmxlbmd0aDsgYSsrKXtcbiAgICAgIGlmKHRoaXMub2JqZWN0c1thXS5pZCA9PSBpZCl7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RzW2FdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICAvL0dldHMgYW55IG9iamVjdHMgdGhhdCBoYXZlIHRoZSBwYXNzZWQgdGFnXG4gIGdldE9iakJ5VGFnKHRhZzpzdHJpbmcpOm9ialtde1xuICAgIHJldHVybiB0aGlzLm9iamVjdHMuZmlsdGVyKChhKT0+YS50YWdzLmhhcyh0YWcpKTtcbiAgfVxuICAvL3JlbmRlcnMgdGhlIHJvb20ncyBzcHJpdGVcbiAgcmVuZGVyZih0aW1lOiBudW1iZXIpOiBzcHJpdGUge1xuICAgIHJldHVybiB7XG4gICAgICBzcHJpdGVfc2hlZXQ6IHRoaXMuYmFja2dyb3VuZCxcbiAgICAgIG5hbWU6dGhpcy5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgICAgbGVmdDogMCxcbiAgICAgIHRvcDogMCxcbiAgICAgIHNwcml0ZV9oZWlnaHQ6IHRoaXMuYmFja2dyb3VuZC5oZWlnaHQsXG4gICAgICBzcHJpdGVfd2lkdGg6IHRoaXMuYmFja2dyb3VuZC53aWR0aCxcbiAgICAgIG9wYWNpdHk6MVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgcDJwX3Jvb208VD4gZXh0ZW5kcyByb29tPFQ+IGltcGxlbWVudHMgcDJwe1xuICBuZXR3b3JrOk5ldHdvcms7XG4gIG5ldF90eXBlOm5ldF90eXBlO1xuICBnYW1lOnBlZXJfdG9fcGVlcl9nYW1lPHVua25vd24+O1xuICBjb25zdHJ1Y3RvcihnYW1lOnBlZXJfdG9fcGVlcl9nYW1lPHVua25vd24+LGNvbmZpZzpzdGF0ZV9jb25maWcpe1xuICAgIHN1cGVyKGdhbWUsY29uZmlnKTtcbiAgICB0aGlzLmdhbWUgPSBnYW1lO1xuICAgIHRoaXMubmV0d29yayA9IGdhbWUubmV0d29yaztcbiAgICB0aGlzLm5ldF90eXBlID0gZ2FtZS5uZXRfdHlwZTtcbiAgfVxuICBwYXJzZV9wYWNrZXQodHlwZTpzdHJpbmcsZGF0YTp1bmtub3duLGlkOnN0cmluZyl7XG4gICAgXG4gIH1cbiAgc2VuZF9wYWNrZXQodHlwZTpzdHJpbmcsZGF0YTphbnkscGVlcl9pZD86bnVtYmVyKXtcbiAgICB0aGlzLm5ldHdvcmsuc2VuZCh0eXBlLGRhdGEpO1xuICB9XG4gIGFzeW5jIGFkZEl0ZW1OZXR3b3JrKHR5cGU6c3RyaW5nLHN0YXRlOmFueSxwYXJhbWV0ZXJzOmFueSl7XG4gICAgbGV0IGlkID0gZ2V0UmFuZEludCgxMDAwMDAsOTk5OTk5KVxuICAgIGxldCBzdGF0ZV9jb25maWcgPSB7XG4gICAgICB0eXBlLFxuICAgICAgc3RhdGUsXG4gICAgICBwYXJhbWV0ZXJzXG4gICAgfVxuICAgIHRoaXMuc2VuZF9wYWNrZXQoXCJhZGRfaXRlbVwiLHtcbiAgICAgIGlkLFxuICAgICAgc3RhdGVfY29uZmlnXG4gICAgfSk7XG4gICAgYXdhaXQgdGhpcy5hZGRJdGVtU3RhdGVDb25maWcoc3RhdGVfY29uZmlnLGlkLnRvU3RyaW5nKCkpO1xuICB9XG4gIHJlY2lldmVfcGFja2V0KGlkOm51bWJlcix0eXBlOnN0cmluZyxkYXRhOnN0cmluZyl7XG5cbiAgfVxuICBzdGF0ZWYodGltZTpudW1iZXIpe1xuICAgIHN1cGVyLnN0YXRlZih0aW1lKTtcbiAgICBsZXQgbmV0d29ya19pdGVtcyA9IHRoaXMub2JqZWN0cy5maWx0ZXIoKG8pPT5vLnN0YXRlX3Byb3BlcnRpZXNfdG9fc3luYy5sZW5ndGggPiAwICYmIE9iamVjdC5rZXlzKG8uZGlmZl9zdGF0ZSkubGVuZ3RoID4gMCk7XG4gICAgZm9yKGxldCBpdGVtIG9mIG5ldHdvcmtfaXRlbXMpe1xuICAgICAgdGhpcy5zZW5kX3BhY2tldChcInVwZGF0ZV9pdGVtXCIse1xuICAgICAgICBpZDppdGVtLmlkLFxuICAgICAgICBzdGF0ZTppdGVtLmRpZmZfc3RhdGVcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBvYmogfSBmcm9tIFwiLi9vYmplY3RcIjtcbmltcG9ydCB7IG9ial9zdGF0ZSwgVmVjdG9yLCBkaW1lbnNpb25zfSBmcm9tIFwiLi9zdGF0ZVwiO1xuaW1wb3J0IHtnZXRSYW5kSW50LFZlY30gZnJvbSBcIi4vbWF0aFwiO1xuaW1wb3J0IHtwYXJ0aWNsZV9lbnRyeX0gZnJvbSBcIi4vcm9vbVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIHNwcml0ZXtcbiAgc3ByaXRlX3NoZWV0OkNhbnZhc0ltYWdlU291cmNlIHwgSW1hZ2VEYXRhLFxuICBzcHJpdGVfc2hlZXRfYnVmZmVyPzpBcnJheUJ1ZmZlcixcbiAgbmFtZTpzdHJpbmcsXG4gIGxlZnQ6bnVtYmVyLFxuICB0b3A6bnVtYmVyLFxuICBzcHJpdGVfd2lkdGg6bnVtYmVyLFxuICBzcHJpdGVfaGVpZ2h0Om51bWJlcixcbiAgb3BhY2l0eTpudW1iZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBwYXNzZWRfc3ByaXRle1xuICBsZWZ0Om51bWJlcixcbiAgdG9wOm51bWJlcixcbiAgc3ByaXRlX3dpZHRoOm51bWJlcixcbiAgc3ByaXRlX2hlaWdodDpudW1iZXIsXG4gIG9wYWNpdHk6bnVtYmVyXG4gIG5hbWU6c3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgcG9zaXRpb25lZF9zcHJpdGV7XG4gIHNwcml0ZTpzcHJpdGUsXG4gIHg6bnVtYmVyLFxuICB5Om51bWJlclxufVxuXG5pbnRlcmZhY2UgUGFydGljbGVfaSBleHRlbmRzIG9ial9zdGF0ZXtcbiAgbGlmZXRpbWU6bnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgUGFydGljbGUgZXh0ZW5kcyBvYmoge1xuICBjb2xsaXNpb24gPSBmYWxzZTtcbiAgcmFuZG9tX3JhbmdlOm51bWJlcjtcbiAgbWF4X2xpZmV0aW1lOm51bWJlcjtcbiAgc3RhdGU6UGFydGljbGVfaTtcbiAgc2VsZWN0ZWRfc3ByaXRlOnNwcml0ZTtcbiAgY29uc3RydWN0b3IocGFydDpwYXJ0aWNsZV9lbnRyeSxzdGF0ZTpvYmpfc3RhdGUsbGlmZXRpbWU6bnVtYmVyKSB7XG4gICAgc3VwZXIoc3RhdGUpO1xuICAgIHRoaXMuc3RhdGUucG9zaXRpb24gPSBWZWMuY3JlYXRlKHRoaXMuc3RhdGUucG9zaXRpb24ueCx0aGlzLnN0YXRlLnBvc2l0aW9uLnkpO1xuICAgIHRoaXMuc3RhdGUubGlmZXRpbWUgPSAwO1xuICAgIHRoaXMuc3ByaXRlX3VybCA9IHBhcnQuc3ByaXRlO1xuICAgIHRoaXMuaGVpZ2h0ID0gcGFydC5oZWlnaHQ7XG4gICAgdGhpcy53aWR0aCA9IHBhcnQud2lkdGg7XG4gICAgdGhpcy5tYXhfbGlmZXRpbWUgPSBsaWZldGltZTtcbiAgfVxuICBzdGF0ZWYodGltZTpudW1iZXIpIHtcbiAgICB0aGlzLnN0YXRlLmxpZmV0aW1lICs9IHRpbWU7XG4gICAgaWYgKHRoaXMuc3RhdGUubGlmZXRpbWUgPiB0aGlzLm1heF9saWZldGltZSkge1xuICAgICAgdGhpcy5kZWxldGUoKTtcbiAgICB9XG4gIH1cbiAgZGVsZXRlKCkge1xuICAgIGxldCByb29tID0gdGhpcy5nYW1lLmdldFJvb20oKTtcbiAgICByb29tLmRlbGV0ZUl0ZW0odGhpcy5pZCxyb29tLnBhcnRpY2xlc19hcnIpO1xuICB9XG4gIHJlbmRlcmYodGltZTpudW1iZXIpOnBvc2l0aW9uZWRfc3ByaXRlIHtcbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWRfc3ByaXRlKSB7XG4gICAgICBsZXQgc3ByaXRlcyA9IHNwcml0ZV9nZW4odGhpcyx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KTtcbiAgICAgIGxldCByYW5kb21fcm93ID0gZ2V0UmFuZEludCgwLHNwcml0ZXMubGVuZ3RoKTtcbiAgICAgIGxldCByYW5kb21fY29sID0gZ2V0UmFuZEludCgwLHNwcml0ZXNbcmFuZG9tX3Jvd10ubGVuZ3RoKTtcbiAgICAgIHRoaXMuc2VsZWN0ZWRfc3ByaXRlID0gc3ByaXRlc1tyYW5kb21fcm93XVtyYW5kb21fY29sXTtcbiAgICB9XG4gICAgdGhpcy5zZWxlY3RlZF9zcHJpdGUub3BhY2l0eSA9IDEgLSB0aGlzLnN0YXRlLmxpZmV0aW1lL3RoaXMubWF4X2xpZmV0aW1lO1xuICAgIHJldHVybiB7XG4gICAgICB4OnRoaXMuc3RhdGUucG9zaXRpb24ueCxcbiAgICAgIHk6dGhpcy5zdGF0ZS5wb3NpdGlvbi55LFxuICAgICAgc3ByaXRlOnRoaXMuc2VsZWN0ZWRfc3ByaXRlIFxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNwcml0ZV9nZW4ob2JqOm9iaixzcHJpdGVfd2lkdGg6bnVtYmVyLHNwcml0ZV9oZWlnaHQ6bnVtYmVyKTpBcnJheTxBcnJheTxzcHJpdGU+PiB7XG4gIGxldCB3aWR0aCA9IG9iai5zcHJpdGVfc2hlZXQud2lkdGg7XG4gIGxldCBoZWlnaHQgPSBvYmouc3ByaXRlX3NoZWV0LmhlaWdodDtcbiAgbGV0IHNwcml0ZXM6QXJyYXk8QXJyYXk8c3ByaXRlPj4gPSBbXTtcbiAgZm9yIChsZXQgYiA9IDA7IGIgPCBoZWlnaHQ7IGIgKz0gc3ByaXRlX2hlaWdodCkge1xuICAgIHNwcml0ZXMucHVzaChbXSk7XG4gICAgZm9yIChsZXQgYSA9IDA7IGEgPCB3aWR0aDsgYSArPSBzcHJpdGVfd2lkdGgpIHtcbiAgICAgIHNwcml0ZXNbYi9zcHJpdGVfaGVpZ2h0XS5wdXNoKHtcbiAgICAgICAgc3ByaXRlX3NoZWV0Om9iai5zcHJpdGVfc2hlZXQsXG4gICAgICAgIHNwcml0ZV9zaGVldF9idWZmZXI6b2JqLnNwcml0ZV9zaGVldF9idWZmZXIsXG4gICAgICAgIG5hbWU6b2JqLmNvbnN0cnVjdG9yLm5hbWUsXG4gICAgICAgIGxlZnQ6YSxcbiAgICAgICAgdG9wOmIsXG4gICAgICAgIHNwcml0ZV9oZWlnaHQsXG4gICAgICAgIHNwcml0ZV93aWR0aCxcbiAgICAgICAgb3BhY2l0eToxXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNwcml0ZXM7XG59XG5cbiIsImV4cG9ydCBsZXQgb2JqZWN0X3RlbXBsYXRlID0gXG5gaW1wb3J0IHtvYmp9IGZyb20gXCJsaWIvb2JqZWN0XCI7XG5pbXBvcnQgeyBvYmpfc3RhdGUsIFZlY3RvciB9IGZyb20gXCJsaWIvc3RhdGVcIjtcbmltcG9ydCB7Y29weX0gZnJvbSBcInNyYy92YW5cIjtcblxuZXhwb3J0IGludGVyZmFjZSB0ZW1wbGF0ZV9zdGF0ZSBleHRlbmRzIG9ial9zdGF0ZXtcbiAgICBcbn1cbiAgICBcbmV4cG9ydCBpbnRlcmZhY2UgdGVtcGxhdGVfcGFyYW1ldGVyc3tcbiAgICBcbn1cbiAgICBcbmV4cG9ydCBjbGFzcyB0ZW1wbGF0ZSBleHRlbmRzIG9iantcbiAgc3ByaXRlX3VybCA9IFwiLi9zcHJpdGVzL0Vycm9yLnBuZ1wiO1xuICBoZWlnaHQgPSAxMDA7XG4gIHdpZHRoID0gMTAwO1xuICB0YWdzOkFycmF5PHN0cmluZz47XG4gIGNvbGxpc2lvbiA9IHRydWU7XG4gIHJlbmRlciA9IHRydWU7XG4gIHN0YXRlOnRlbXBsYXRlX3N0YXRlO1xuICBwYXJhbXM6dGVtcGxhdGVfcGFyYW1ldGVycztcbiAgc3RhdGljIGRlZmF1bHRfcGFyYW1zOnRlbXBsYXRlX3BhcmFtZXRlcnMgPSB7fVxuICBjb25zdHJ1Y3RvcihzdGF0ZTpvYmpfc3RhdGUscGFyYW1zOnRlbXBsYXRlX3BhcmFtZXRlcnMgPSBjb3B5KHRlbXBsYXRlLmRlZmF1bHRfcGFyYW1zKSl7XG4gICAgc3VwZXIoc3RhdGUscGFyYW1zKTtcbiAgfVxuICBzdGF0ZWYodGltZV9kZWx0YTpudW1iZXIpe1xuICAgIHN1cGVyLnN0YXRlZih0aW1lX2RlbHRhKTtcbiAgfVxuICByZW5kZXJmKHRpbWVfZGVsdGE6bnVtYmVyKXtcbiAgIHJldHVybiBzdXBlci5yZW5kZXJmKHRpbWVfZGVsdGEpOyBcbiAgfVxuICByZWdpc3RlckFuaW1hdGlvbnMoKXtcbiAgICBcbiAgfVxuICByZWdpc3RlckF1ZGlvKCl7XG4gICAgXG4gIH1cbiAgcmVnaXN0ZXJDb250cm9scygpe1xuICAgICAgICBcbiAgfVxufWA7ICAgICIsImV4cG9ydCBsZXQgcm9vbV90ZW1wbGF0ZSA9IFxuYGltcG9ydCB7IHJvb20gfSBmcm9tIFwibGliL3Jvb21cIjtcbmltcG9ydCB7IGdhbWUgfSBmcm9tIFwic3JjL3ZhblwiO1xuaW1wb3J0IHsgc3RhdGVfY29uZmlnIH0gZnJvbSBcImxpYi9yb29tXCI7XG5pbXBvcnQgKiBhcyBjb25maWcgZnJvbSBcIi4vdGVtcGxhdGUuanNvblwiO1xubGV0IGNmaWcgPSBjb25maWcgYXMgdW5rbm93biBhcyBzdGF0ZV9jb25maWc7XG5pbnRlcmZhY2UgdGVtcGxhdGVfc3RhdGUge1xuXG59XG5cbmV4cG9ydCBjbGFzcyB0ZW1wbGF0ZSBleHRlbmRzIHJvb208dGVtcGxhdGVfc3RhdGU+e1xuICBiYWNrZ3JvdW5kX3VybCA9IFwiLi9zcHJpdGVzL0Vycm9yLnBuZ1wiO1xuICByZW5kZXIgPSB0cnVlO1xuICBjb25zdHJ1Y3RvcihnYW1lOiBnYW1lPHVua25vd24+KSB7XG4gICAgc3VwZXIoZ2FtZSwgY2ZpZyk7XG4gIH1cbiAgcmVnaXN0ZXJDb250cm9scygpIHtcblxuICB9XG4gIHJlZ2lzdGVyUGFydGljbGVzKCkge1xuXG4gIH1cbiAgc3RhdGVmKGRlbHRhX3RpbWU6IG51bWJlcikge1xuICAgIHN1cGVyLnN0YXRlZihkZWx0YV90aW1lKTtcbiAgfVxuXG59YDsiLCJcbmV4cG9ydCBpbnRlcmZhY2Ugc3RyaW5nX2RpY3Q8VD4ge1xuICAgIFtpbmRleDpzdHJpbmddOlRcbn1cblxuXG5leHBvcnQgbGV0IGRpZmYgPSBmdW5jdGlvbihwcmV2X3N0YXRlOnN0cmluZ19kaWN0PHN0cmluZz4sbmV3X3N0YXRlOnN0cmluZ19kaWN0PHN0cmluZz4pOnN0cmluZ19kaWN0PHN0cmluZz57XG4gICAgbGV0IGRlbHRhX3N0YXRlOnN0cmluZ19kaWN0PHN0cmluZz4gPSB7fTtcbiAgICBsZXQga2V5cyA9IE9iamVjdC5rZXlzKG5ld19zdGF0ZSk7XG5cbiAgICBmb3IobGV0IGtleSBvZiBrZXlzKXtcbiAgICAgICAgaWYoIXByZXZfc3RhdGUgfHwgbmV3X3N0YXRlW2tleV0gIT0gcHJldl9zdGF0ZVtrZXldKXtcbiAgICAgICAgICAgIGRlbHRhX3N0YXRlW2tleV0gPSBuZXdfc3RhdGVba2V5XVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkZWx0YV9zdGF0ZTtcbn1cblxuZXhwb3J0IGNvbnN0IHJhbmdlID0gZnVuY3Rpb24oZmlyc3Q6bnVtYmVyLHNlY29uZD86bnVtYmVyKXtcbiAgICBsZXQgc3RhcnQ7XG4gICAgbGV0IGVuZDtcbiAgICBpZihzZWNvbmQpe1xuICAgICAgICBzdGFydCA9IGZpcnN0O1xuICAgICAgICBlbmQgPSBzZWNvbmQ7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICAgIHN0YXJ0ID0gMDtcbiAgICAgICAgZW5kID0gZmlyc3Q7XG4gICAgfVxuICAgIGxldCB0b19yZXR1cm4gPSBbXTtcbiAgICBmb3IobGV0IGEgPSBzdGFydDsgYSA8IGVuZDsgYSsrKXtcbiAgICAgICAgdG9fcmV0dXJuLnB1c2goYSk7XG4gICAgfVxuICAgIHJldHVybiB0b19yZXR1cm47XG59IiwiZXhwb3J0IGxldCBERUJVRyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2JztcbmV4cG9ydCBsZXQgUEFVU0VEID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXYnO1xuaW1wb3J0IHsgb2JqIH0gZnJvbSBcIi4vbGliL29iamVjdFwiO1xuaW1wb3J0IHsgcDJwLCByb29tLHAycF9yb29tIH0gZnJvbSBcIi4vbGliL3Jvb21cIjtcbmltcG9ydCB7IGNvbGxpc2lvbl9ib3ggfSBmcm9tIFwiLi9saWIvY29sbGlzaW9uXCI7XG5pbXBvcnQgeyBzcHJpdGVfcmVuZGVyZXIsIHJlY3RfcmVuZGVyZXIsIHN0cm9rZWRfcmVjdF9yZW5kZXJlciwgaHVkX3Nwcml0ZV9yZW5kZXJlciwgaHVkX3RleHRfcmVuZGVyZXIsIENhbWVyYSwgdGV4dF9yZW5kZXJlciwgc2NhbGVfdHlwZSwgbGluZSwgbGluZV9yZW5kZXJlciwgY2FudmFzX3JlbmRlcmVyIH0gZnJvbSBcIi4vbGliL3JlbmRlclwiO1xuaW1wb3J0IHsgRXhlY3V0ZVJlcGVhdEJpbmRzLCBVbmJpbmQsIGhhbmRsZUdhbWVwYWQgfSBmcm9tIFwiLi9saWIvY29udHJvbHNcIjtcbmltcG9ydCB7IGRlYnVnX3N0YXRlLHJlbmRlcmVyX3BhdGgsIGRlYnVnX3VwZGF0ZV9yb29tX2xpc3QsIGRlYnVnX3VwZGF0ZV9vYmpfbGlzdCwgZGVidWdfdXBkYXRlX3ByZWZhYnMsIGRlYnVnX3N0YXRlZiwgZGVidWdfc2V0dXAgfSBmcm9tIFwiLi9saWIvZGVidWdcIjtcbmltcG9ydCB7IHBvc2l0aW9uZWRfc3ByaXRlIH0gZnJvbSBcImxpYi9zcHJpdGVcIjtcbmltcG9ydCB7IHJvb21zIGFzIHJvb21fbGlzdCB9IGZyb20gXCIuL2dhbWUvcm9vbXMvcm9vbXNcIjtcbmltcG9ydCB7IGdldFJhbmRJbnQsIFZlYyB9IGZyb20gXCJsaWIvbWF0aFwiO1xuaW1wb3J0IHtQYXRoaW5nX1Jvb219IGZyb20gXCJnYW1lL3Jvb21zL2Fic3RyYWN0L1BhdGhpbmdfUm9vbVwiO1xuaW1wb3J0IFBlZXIgZnJvbSAncGVlcmpzJztcbmltcG9ydCB7IG5ldF90eXBlLE5ldHdvcmssIFdlYn0gZnJvbSBcImxpYi9uZXR3b3JrXCI7XG5pbXBvcnQgeyBXb3JrZXJQb29sIH0gZnJvbSBcImxpYi93b3JrZXJzXCI7XG5pbXBvcnQgeyBvYmpfc3RhdGUgfSBmcm9tIFwibGliL3N0YXRlXCI7XG5pbXBvcnQgeyBwcmVmYWJzIH0gZnJvbSBcImdhbWUvb2JqZWN0cy9wcmVmYWJzXCI7XG5pbXBvcnQgeyBnIH0gZnJvbSBcImdhbWUvbWFpblwiO1xuXG5cblxubGV0IGNhbnZhc19lbGVtZW50OiBIVE1MQ2FudmFzRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFyZ2V0XCIpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xubGV0IGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCA9IGNhbnZhc19lbGVtZW50LmdldENvbnRleHQoXCIyZFwiKTtcblxuXG5sZXQgc2NyZWVuX3dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG5sZXQgc2NyZWVuX2hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxuXG4vL0hvdyBvZnRlbiB0aGUgZ2FtZSBsb2dpYyBsb29wIHNob3VsZCBydW4sIGluIG1pbGxpc2Vjb25kc1xubGV0IGxvZ2ljX2xvb3BfaW50ZXJ2YWw6IG51bWJlciA9IDEwMDAgLyA2MDtcblxubGV0IGxhc3RfdGltZSA9IG5ldyBEYXRlKCk7XG5cbmxldCBsYXN0X3JlbmRlcl90aW1lID0gMDtcblxuaW50ZXJmYWNlIGRpbWVuc2lvbnMge1xuICBoZWlnaHQ6IG51bWJlcixcbiAgd2lkdGg6IG51bWJlclxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBHZXRTY3JlZW5EaW1lbnNpb25zKCk6IGRpbWVuc2lvbnMge1xuICByZXR1cm4gKHtcbiAgICB3aWR0aDogc2NyZWVuX3dpZHRoLFxuICAgIGhlaWdodDogc2NyZWVuX2hlaWdodFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gR2V0Vmlld3BvcnREaW1lbnNpb25zKCk6IGRpbWVuc2lvbnMge1xuICByZXR1cm4gKHtcbiAgICBoZWlnaHQ6IGNhbnZhc19lbGVtZW50LmhlaWdodCxcbiAgICB3aWR0aDogY2FudmFzX2VsZW1lbnQud2lkdGhcbiAgfSlcbn1cblxuZXhwb3J0IGxldCB2aWV3cG9ydCA9IHtcbiAgaGVpZ2h0OiBHZXRWaWV3cG9ydERpbWVuc2lvbnMoKS5oZWlnaHQsXG4gIHdpZHRoOiBHZXRWaWV3cG9ydERpbWVuc2lvbnMoKS53aWR0aFxufVxuXG53aW5kb3cub25yZXNpemUgPSAoKSA9PiB7XG4gIHZpZXdwb3J0LmhlaWdodCA9IEdldFZpZXdwb3J0RGltZW5zaW9ucygpLmhlaWdodFxuICB2aWV3cG9ydC53aWR0aCA9IEdldFZpZXdwb3J0RGltZW5zaW9ucygpLndpZHRoXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXREZWJ1Zyh4OiBib29sZWFuKSB7XG4gIERFQlVHID0geDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFBhdXNlZCh4OiBib29sZWFuKSB7XG4gIFBBVVNFRCA9IHg7XG4gIGlmKHgpe1xuICAgIGxldCByb29tID0gZy5nZXRSb29tKCk7XG4gICAgcm9vbS5hdWRpby5jbGVhbnVwKCk7XG4gICAgcm9vbS5vYmplY3RzLmZvckVhY2goIHggPT4geC5hdWRpby5jbGVhbnVwKCkpO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCByZW5kZXJfY29sbGlzaW9uX2JveCA9IChib3g6IGNvbGxpc2lvbl9ib3gsY29sb3I6c3RyaW5nID0gXCJyZWRcIikgPT4ge1xuICBib3hlcy5wdXNoKHtcbiAgICBib3gsXG4gICAgY29sb3JcbiAgfSk7XG59XG5cbmV4cG9ydCBjb25zdCByZW5kZXJfZmlsbGVkX2JveCA9IChib3g6Y29sbGlzaW9uX2JveCxjb2xvcjpzdHJpbmcgPSBcInJlZFwiLCBvcGFjaXR5Om51bWJlciA9IDEpID0+IHtcbiAgZmlsbGVkX2JveGVzLnB1c2goe1xuICAgIGJveCxcbiAgICBjb2xvcixcbiAgICBvcGFjaXR5XG4gIH0pXG59XG5cbmxldCBsaW5lczogbGluZVtdID0gW107XG5cbmV4cG9ydCBjb25zdCByZW5kZXJfbGluZSA9IChhOiBsaW5lKSA9PiB7XG4gIGxpbmVzLnB1c2goYSk7XG59XG5cblxuXG5sZXQgYm94ZXM6IEFycmF5PHtcbiAgY29sb3I6c3RyaW5nLFxuICBib3g6Y29sbGlzaW9uX2JveFxufT4gPSBbXTtcblxubGV0IGZpbGxlZF9ib3hlczpBcnJheTx7XG4gIGNvbG9yOnN0cmluZyxcbiAgYm94OmNvbGxpc2lvbl9ib3gsXG4gIG9wYWNpdHk6bnVtYmVyXG59PiA9IFtdO1xuXG5leHBvcnQgbGV0IGNvcHkgPSAoYTogYW55KSA9PiB7XG4gIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGEpKTtcbn1cblxuaW50ZXJmYWNlIGdhbWVfc3RhdGU8VD4ge1xuICBsb2dpYzogbnVtYmVyLFxuICBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gIGN1cnJlbnRfcm9vbTogcm9vbTx1bmtub3duPixcbiAgY2FtZXJhczogQXJyYXk8Q2FtZXJhPixcbiAgY2FudmFzZXM6IEhUTUxDYW52YXNFbGVtZW50W10sXG4gIGdsb2JhbHM6IFRcbn1cblxuZXhwb3J0IGxldCByb29tczogYW55W10gPSBbXTtcbmV4cG9ydCBsZXQgb2JqZWN0czogYW55W107XG5cbi8vZXhwb3J0IGxldCB3b3JrZXJfcG9vbCA9IG5ldyBXb3JrZXJQb29sKHJlbmRlcmVyX3BhdGgsMSk7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVJdGVtU3RyaW5nID0gKG5hbWU6c3RyaW5nLHN0YXRlX2NvbmZpZzpvYmpfc3RhdGUscGFyYW1ldGVycz86YW55KTpvYmogPT4ge1xuICBpZihwcmVmYWJzW25hbWVdKXtcbiAgICBsZXQgbmV3X29iaiA9IDxvYmo+KG5ldyBwcmVmYWJzW25hbWVdKE9iamVjdC5hc3NpZ24oe30sc3RhdGVfY29uZmlnKSxwYXJhbWV0ZXJzKSk7XG4gICAgcmV0dXJuIG5ld19vYmo7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gY3JlYXRlIHVua25vd24gb2JqIHR5cGUgPCR7bmFtZX0+YClcbn1cblxuZXhwb3J0IGNsYXNzIGdhbWU8VD57XG4gIHN0YXRlOiBnYW1lX3N0YXRlPFQ+O1xuICBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gIC8vVGhlIG9mZnNjcmVlbiBjYW52YXMgYW5kIGNvbnRleHQgYXJlIHVzZWQgaW4gcmVuZGVyaW5nIG11bHRpcGxlIENhbWVyYXNcbiAgLy9UaGUgY29udGVudHMgYXJlIHJlbmRlcmVkIHRvIHRoZSBvZmZzY3JlZW4gY2FudmFzLCB0aGVuIGNvcGllZCB0byB0aGUgXG4gIC8vb25zY3JlZW4gY2FudmFzLCBpbiB0aGUgcHJvcGVyIHBvc2l0aW9uIGluIHRoZSB2aWV3cG9ydFxuICBvZmZzY3JlZW5fY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgb2Zmc2NyZWVuX2NvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgc3RhdGljX2NhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gIHN0YXRpY19jb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gIHByb3RvdHlwZXM6IEFycmF5PG9iaj4gPSBbXTtcbiAgcm9vbXM6IEFycmF5PGFueT4gPSBbXTtcbiAgdGVzdF9jYW52YXM6SFRNTENhbnZhc0VsZW1lbnQ7XG4gIGlzUmVuZGVyaW5nID0gZmFsc2U7XG4gIGNvbnN0cnVjdG9yKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBpbml0X3N0YXRlOiBUKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGNhbnZhc2VzOiBbY2FudmFzX2VsZW1lbnRdLFxuICAgICAgbG9naWM6IHVuZGVmaW5lZCxcbiAgICAgIGNvbnRleHQ6IGN0eCxcbiAgICAgIGNhbWVyYXM6IFtcbiAgICAgIF0sXG4gICAgICBjdXJyZW50X3Jvb206IHVuZGVmaW5lZCxcbiAgICAgIGdsb2JhbHM6IGluaXRfc3RhdGVcbiAgICB9XG4gICAgdGhpcy5vZmZzY3JlZW5fY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcblxuICAvKiAgICBcbiAgICB0aGlzLnRlc3RfY2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGVzdFwiKTtcbiAgICB0aGlzLnRlc3RfY2FudmFzLmhlaWdodCA9IHZpZXdwb3J0LmhlaWdodDtcbiAgICB0aGlzLnRlc3RfY2FudmFzLndpZHRoID0gdmlld3BvcnQud2lkdGg7XG4gICAgbGV0IG9mZnNjcmVlbiA9IHRoaXMudGVzdF9jYW52YXMudHJhbnNmZXJDb250cm9sVG9PZmZzY3JlZW4oKTtcbiAgICAvL3dvcmtlcl9wb29sLnNlbmRfYWxsKFwiY2FudmFzX3Bhc3NcIix7Y2FudmFzOm9mZnNjcmVlbix2aWV3cG9ydH0sW29mZnNjcmVlbl0pXG4gICAgKi9cbiAgICB0aGlzLm9mZnNjcmVlbl9jb250ZXh0ID0gdGhpcy5vZmZzY3JlZW5fY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICB0aGlzLnN0YXRpY19jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgIHRoaXMuc3RhdGljX2NvbnRleHQgPSB0aGlzLnN0YXRpY19jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIC8vd29ya2VyX3Bvb2wuc2VuZF9hbGwoXCJjYW52YXNfcGFzc1wiLHtjYW52YXM6b2Zmc2NyZWVuLHZpZXdwb3J0fSxbb2Zmc2NyZWVuXSlcbiAgICAvL0RFQlVHIGRldGVybWluZXMgd2hldGhlciB0aGUgZ2FtZSBpcyBydW5uaW5nIHdpdGhpbiB0aGUgZWRpdG9yXG4gICAgaWYgKERFQlVHKSB7XG5cbiAgICAgIC8vU2V0cyB1cCBzb21lIGdsb2JhbCBkZWJ1ZyBzdGF0ZSBhbmQgdGhlIGVkaXRvciBrZXliaW5kaW5nc1xuICAgICAgZGVidWdfc2V0dXAoKTtcbiAgICAgIHRoaXMuc3RhdGUuY2FudmFzZXMucHVzaChkZWJ1Z19zdGF0ZS50YXJnZXQpO1xuICAgICAgLy9Jbml0aWFsaXplcyBhIHNlcGFyYXRlIGxvZ2ljIGxvb3Agc29sZWx5IGZvciB0aGUgZWRpdG9yXG4gICAgICAvL1RoaXMgc2VwYXJhdGlvbiBhbGxvd3MgZm9yIHRoZSBlZGl0b3IgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgZW52aXJvbm1lbnQgd2hpbGVcbiAgICAgIC8vdGhlIGFjdHVhbCByb29tJ3Mgc3RhdGUgbG9vcCBpcyBwYXVzZWQuXG4gICAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmdldFJvb20oKSkge1xuICAgICAgICAgIC8vVGhpcyBmdW5jdGlvbnMgaGFuZGxlcyB0aGUgZWRpdG9yIGludGVyYWN0aW9ucyB3aXRoIHRoZSBnYW1lIGVudmlyb25tZW50XG4gICAgICAgICAgZGVidWdfc3RhdGVmKDE2LjY2KTtcbiAgICAgICAgfVxuICAgICAgfSwgMTYuNjYpXG4gICAgfVxuICAgIC8vQ3JlYXRlcyBhIG9uY2xpY2sgZnVuY3Rpb24gb24gdGhlIHdpbmRvdyB0aGF0IGhhbmRsZXMgZWxlbWVudCBvbmNsaWNrIGZ1bmN0aW9uc1xuICAgIC8vaW5pdF9jbGlja19oYW5kbGVyKHRoaXMpO1xuICB9XG4gIGFzeW5jIHJlbmRlcih0OiBudW1iZXIpIHtcbiAgICAvL3QgaXMgY3VycmVudCByZW5kZXIgdGltZVxuICAgIGxldCBkZWx0YV90aW1lID0gdCAtIGxhc3RfcmVuZGVyX3RpbWVcbiAgICBsYXN0X3JlbmRlcl90aW1lID0gdDtcbiAgICBsZXQgYWxsX2NhbWVyYXMgPSBbLi4udGhpcy5zdGF0ZS5jYW1lcmFzLC4uLnRoaXMuc3RhdGUuY3VycmVudF9yb29tLmNhbWVyYXNdO1xuICAgIGxldCBlZGl0b3JfY2FtZXJhX2luZGV4ID0gLTE7XG4gICAgaWYgKERFQlVHKSB7XG4gICAgICBkZWJ1Z19zdGF0ZS5yZW5kZXJfZGVsdGFfdGltZSA9IGRlbHRhX3RpbWU7XG4gICAgICBhbGxfY2FtZXJhcyA9IFsuLi5hbGxfY2FtZXJhcywgZGVidWdfc3RhdGUuY2FtZXJhXVxuICAgICAgZWRpdG9yX2NhbWVyYV9pbmRleCA9IGFsbF9jYW1lcmFzLmxlbmd0aCAtIDE7XG4gICAgICBpZiAoYWxsX2NhbWVyYXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuY29udGV4dC5maWxsU3R5bGUgPSBcIndoaXRlXCJcbiAgICAgICAgdGhpcy5zdGF0ZS5jb250ZXh0LmZvbnQgPSBcIjUwcHggQXJpYWxcIlxuICAgICAgICB0aGlzLnN0YXRlLmNvbnRleHQudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICAgICAgdGhpcy5zdGF0ZS5jb250ZXh0LmZpbGxUZXh0KFwiTk8gQ0FNRVJBXCIsIHZpZXdwb3J0LndpZHRoIC8gMiwgdmlld3BvcnQuaGVpZ2h0IC8gMik7XG4gICAgICB9XG4gICAgICAvL1RoZSBlZGl0b3IgY2FtZXJhIGlzIGFsd2F5cyB0aGUgbGFzdCBjYW1lcmEgaW5zaWRlIHRoZSBjYW1lcmFzIGFycmF5XG4gICAgICAvL3RoZSBlZGl0b3IgY2FtZXJhIGlzIHJlbmRlcmVkIHRvIGEgZGlmZmVyZW50IGNhbnZhcyB0aGFuIHRoZSBtYWluIGdhbWUgY2FudmFzXG4gICAgICAvL3NvIHdlIHVzZSB0aGUgY2FtZXJhJ3MgaW5kZXggdG8gY2hlY2sgd2hhdCBjYW52YXMgdG8gcmVuZGVyIHRvXG4gICAgfVxuICAgIGZvciAobGV0IGEgPSAwOyBhIDwgYWxsX2NhbWVyYXMubGVuZ3RoOyBhKyspIHtcbiAgICAgIGxldCBjYW1lcmEgPSBhbGxfY2FtZXJhc1thXTtcbiAgICAgIC8vV2UgcmVuZGVyIHRoZSBjYW1lcmFzIGNvbnRlbnRzIHRvIGFuIG9mZnNjcmVlbiBjYW52YXMsIHRoZW4gY29weSBpdHMgY29udGVudHNcbiAgICAgIC8vdG8gdGhlIG1haW4gY2FudmFzLlxuICAgICAgLy9UaGlzIGFsbG93cyB1cyB0byBhdm9pZCBhbnkgbWF0aCBuZWVkZWQgdG8gZGV0ZXJtaW5lIHNwcml0ZXMgdGhhdCBhcmUgcGFydGlhbGx5IG9mZnNjcmVlblxuICAgICAgLy9hcyBhbnkgb2Zmc2NyZWVuIHNlY3Rpb25zIG9mIHRoZSBzcHJpdGVzIHdpbGwgbm90IGJlIGNvcGllZCBvdmVyLCByYXRoZXIgdGhhbiBleHBsaWNpdGx5IFxuICAgICAgLy9jYWxjdWxhdGluZyB0aGUgY3V0b2Zmc1xuXG4gICAgICB0aGlzLm9mZnNjcmVlbl9jYW52YXMuaGVpZ2h0ID0gY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMuaGVpZ2h0O1xuICAgICAgdGhpcy5vZmZzY3JlZW5fY2FudmFzLndpZHRoID0gY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMud2lkdGg7XG4gICAgICB0aGlzLm9mZnNjcmVlbl9jb250ZXh0LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcbiAgICAgIC8vbGV0IG9mZnNjcmVlbiA9IG5ldyBPZmZzY3JlZW5DYW52YXMoY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMud2lkdGgsY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMuaGVpZ2h0KTtcbiAgICAgIC8vYXdhaXQgd29ya2VyX3Bvb2wuc2VuZChcImNsZWFyX2NhbnZhc1wiKVxuICAgICAgdGhpcy5vZmZzY3JlZW5fY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW1lcmEuc3RhdGUuZGltZW5zaW9ucy53aWR0aCwgY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMuaGVpZ2h0KVxuICAgICAgLy9UaGlzIGNvbGxpc2lvbiBib3ggcmVwcmVzZW50cyB0aGUgY2FtZXJhJ3MgZmllbGQgb2YgdmlldyBpbiB0aGUgZ2FtZSBzcGFjZVxuICAgICAgLy9XZSB1c2UgdGhlIHJvb20ncyBjaGVja09iamVjdHMgZnVuY3Rpb24gdG8gZmluZCBhbnkgb2JqZWN0IHRoYXQgZXhpc3RzIHdpdGhpbiB0aGlzIGFyZWFcbiAgICAgIC8vVGhlc2Ugb2JqZWN0cyBhcmUgdGhlIG9iamVjdHMgdGhhdCBuZWVkIHRvIGJlIHJlbmRlcmVkIGZvciB0aGlzIGNhbWVyYVxuICAgICAgbGV0IGNhbWVyYV9ib3ggPSB7XG4gICAgICAgIHg6IGNhbWVyYS5zdGF0ZS5wb3NpdGlvbi54LFxuICAgICAgICB5OiBjYW1lcmEuc3RhdGUucG9zaXRpb24ueSxcbiAgICAgICAgd2lkdGg6IGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLndpZHRoICogKDEgLyBjYW1lcmEuc3RhdGUuc2NhbGluZyksXG4gICAgICAgIGhlaWdodDogY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMuaGVpZ2h0ICogKDEgLyBjYW1lcmEuc3RhdGUuc2NhbGluZylcbiAgICAgIH07XG4gICAgICBsZXQgcm9vbSA9IHRoaXMuc3RhdGUuY3VycmVudF9yb29tO1xuICAgICAgLy9MaXN0IG9mIGFsbCBwYXJ0aWNsZXMgd2l0aGluIHRoZSBjYW1lcmEncyBmb3ZcbiAgICAgIGxldCBjb3JkcyA9IHJvb20ucHJveGltaXR5X21hcC5nZXRDb3Jkc0Zyb21Cb3goY2FtZXJhX2JveCk7XG4gICAgICBsZXQgdG9fY2hlY2sgPSByb29tLnByb3hpbWl0eV9tYXAuZ2V0T2JqZWN0c0Zyb21Db3Jkcyhjb3Jkcyk7XG4gICAgICBsZXQgcGFydGljbGVfY29sbGlkZXMgPSB0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS5jaGVja09iamVjdHMoY2FtZXJhX2JveCwgW10sIHRoaXMuc3RhdGUuY3VycmVudF9yb29tLnBhcnRpY2xlc19hcnIpO1xuICAgICAgLy9MaXN0IG9mIGFsbCBvYmplY3RzIHdpdGhpbiB0aGUgY2FtZXJhJ3MgZm92XG4gICAgICBsZXQgY2FtZXJhX2NvbGxpZGVycyA9IFsuLi50aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS5jaGVja09iamVjdHMoY2FtZXJhX2JveCwgW10sIHRvX2NoZWNrKSwgLi4ucGFydGljbGVfY29sbGlkZXNdO1xuICAgICAgbGV0IHJlbmRlcl9hcmdzID0ge1xuICAgICAgICBjb250ZXh0OiB0aGlzLm9mZnNjcmVlbl9jb250ZXh0LFxuICAgICAgICBjYW1lcmE6IGNhbWVyYSxcbiAgICAgIH07XG4gICAgICAvL1JlbmRlcnMgdGhlIHJvb20ncyBiYWNrZ3JvdW5kLlxuICAgICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudF9yb29tLnJlbmRlcikge1xuICAgICAgICBzcHJpdGVfcmVuZGVyZXIocmVuZGVyX2FyZ3MsIHtcbiAgICAgICAgICBzcHJpdGU6IHRoaXMuc3RhdGUuY3VycmVudF9yb29tLnJlbmRlcmYoZGVsdGFfdGltZSksXG4gICAgICAgICAgeDogMCxcbiAgICAgICAgICB5OiAwLFxuICAgICAgICAgIHJvdGF0aW9uOiAwLFxuICAgICAgICAgIHNjYWxlOiB7XG4gICAgICAgICAgICB3aWR0aDogMSxcbiAgICAgICAgICAgIGhlaWdodDogMVxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2NhbGVfdHlwZTogc2NhbGVfdHlwZS5ncm93XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY2FudmFzX3JlbmRlcmVyKHJlbmRlcl9hcmdzLCB7XG4gICAgICAgIGNhbnZhczogdGhpcy5zdGF0aWNfY2FudmFzLFxuICAgICAgICB3aWR0aDogdGhpcy5zdGF0ZS5jdXJyZW50X3Jvb20ucHJveGltaXR5X21hcC5sZW5ndGgsXG4gICAgICAgIGhlaWdodDogdGhpcy5zdGF0ZS5jdXJyZW50X3Jvb20ucHJveGltaXR5X21hcC5sZW5ndGgsXG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDAsXG4gICAgICAgIHNjYWxlOiB7IHdpZHRoOiAxLCBoZWlnaHQ6IDEgfVxuICAgICAgfSlcbiAgICAgIC8vQXJyYXkgb2YgaGl0Ym94ZXMgZm9yIGVhY2ggaXRlbSBpbiB0aGUgcm9vbVxuICAgICAgbGV0IGhpdGJveGVzOiBjb2xsaXNpb25fYm94W10gPSBbXTtcbiAgICAgIGxldCByZW5kZXJfdG9nZ2xlcyA9IGRlYnVnX3N0YXRlID8gZGVidWdfc3RhdGUucmVuZGVyX3RvZ2dsZXMgOiB1bmRlZmluZWQ7XG4gICAgICBjYW1lcmFfY29sbGlkZXJzID0gY2FtZXJhX2NvbGxpZGVycy5maWx0ZXIoKGIpID0+IGIucmVuZGVyICYmICFiLnN0YXRpYykuc29ydCgoYSwgYikgPT4gKGEubGF5ZXIgLSBiLmxheWVyKSlcbiAgICAgIGxldCBwcm9taXNlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgYSBvZiBjYW1lcmFfY29sbGlkZXJzKSB7XG4gICAgICAgIGxldCByZW5kZXJlZCA9IGEucmVuZGVyVHJhY2sodCk7XG4gICAgICAgIFxuICAgICAgICAvL09iamVjdHMgY2FuIHJldHVybiBlaXRoZXIgYSBzcHJpdGUsIG9yIGFuIGFycmF5IG9mIHNwcml0ZXMgdG8gc2ltcGxpZnkgdGhlIEFQSVxuICAgICAgICAvL0ZvciB0aGUgdXNlciwgYW5kIGZvciB1c2UgaW4gY29tcG9zaXRlIG9iamVjdHMob2JqZWN0IHRoYXQgYnVuZGxlcyBvdGhlciBvYmplY3RzIHRvZ2V0aGVyKVxuICAgICAgICAvL0ludGVybmFsbHksIHdlIGNvbnZlcnQgYW55IHNpbmdsZSBzcHJpdGUgaW50byBhbiBhcnJheSBvZiBvbmUgc3ByaXRlLlxuXG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBwb3NpdGlvbmVkX3Nwcml0ZSBvZiByZW5kZXJlZCkge1xuICAgICAgICAgIC8vd29ya2VyLnBvc3RNZXNzYWdlKHBvc2l0aW9uZWRfc3ByaXRlLnNwcml0ZS5zcHJpdGVfYmFzZTY0KTtcbiAgICAgICAgICBhd2FpdCBzcHJpdGVfcmVuZGVyZXIocmVuZGVyX2FyZ3MsIHtcbiAgICAgICAgICAgIHNwcml0ZTogcG9zaXRpb25lZF9zcHJpdGUuc3ByaXRlLFxuICAgICAgICAgICAgeDogcG9zaXRpb25lZF9zcHJpdGUueCxcbiAgICAgICAgICAgIHk6IHBvc2l0aW9uZWRfc3ByaXRlLnksXG4gICAgICAgICAgICByb3RhdGlvbjogYS5zdGF0ZS5yb3RhdGlvbixcbiAgICAgICAgICAgIHNjYWxlOiBhLnN0YXRlLnNjYWxpbmcsXG4gICAgICAgICAgICBzY2FsZV90eXBlOiBhLnNjYWxlX3R5cGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgbm9kZSBvZiBhLnRleHRfbm9kZXMpIHtcbiAgICAgICAgICB0ZXh0X3JlbmRlcmVyKHJlbmRlcl9hcmdzLCB7XG4gICAgICAgICAgICB4OiBub2RlLnN0YXRlLnBvc2l0aW9uLngsXG4gICAgICAgICAgICB5OiBub2RlLnN0YXRlLnBvc2l0aW9uLnksXG4gICAgICAgICAgICBmb250OiBub2RlLnJlbmRlcmYodClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgLy9IaXRib3hlcyBhcmUgcmVuZGVyZWQgbGF0ZSBpbiB0aGUgcmVuZGVyIGxvb3AsIHRvIGVuc3VyZSBvYmplY3RzIGRvbid0IG92ZXJsYXAgdGhlbVxuICAgICAgICAvL0FzIHdlIHJlbmRlciBvYmplY3RzLCB3ZSBhZGQgdGhlaXIgaGl0Ym94ZXMgdG8gdGhpcyBsaXN0XG4gICAgICAgIGlmIChERUJVRyAmJiBhLmNvbGxpc2lvbiAmJiByZW5kZXJfdG9nZ2xlc1tcImJvdW5kaW5nX2JveFwiXSkge1xuICAgICAgICAgIGhpdGJveGVzLnB1c2goLi4uYS5nZXRBbGxDb2xsaXNpb25Cb3hlcygpKTtcbiAgICAgICAgfVxuICBcbiAgICAgIH1cbiAgICAgIC8vVGhpcyBpcyBhIHNwZWNpYWwgY2xhc3Mgb2Ygb2JqZWN0IHRoYXQgZXhpc3RzIGluIHRoZSBnYW1lIHdvcmxkXG4gICAgICBmb3IgKGxldCBub2RlIG9mIHRoaXMuc3RhdGUuY3VycmVudF9yb29tLnRleHRfbm9kZXMpIHtcbiAgICAgICAgdGV4dF9yZW5kZXJlcihyZW5kZXJfYXJncywge1xuICAgICAgICAgIHg6IG5vZGUuc3RhdGUucG9zaXRpb24ueCxcbiAgICAgICAgICB5OiBub2RlLnN0YXRlLnBvc2l0aW9uLnksXG4gICAgICAgICAgZm9udDogbm9kZS5yZW5kZXJmKHQpXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChjYW1lcmEuaHVkKSB7XG4gICAgICAgIGxldCBncmFwaGljcyA9IGNhbWVyYS5odWQuZ3JhcGhpY19lbGVtZW50cztcbiAgICAgICAgbGV0IHRleHRfZWxlbWVudHMgPSBjYW1lcmEuaHVkLnRleHRfZWxlbWVudHM7XG4gICAgICAgIC8vUmVuZGVycyBzdGF0aWMgZ3JhcGhpY3MgdGhhdCBhcmUgYSBwYXJ0IG9mIHRoZSBodWRcbiAgICAgICAgZm9yIChsZXQgZ3JhcGhpYyBvZiBncmFwaGljcy5maWx0ZXIoKGIpID0+IGIucmVuZGVyICYmICFiLnN0YXRpYykuc29ydCgoYSwgYikgPT4gKGEubGF5ZXIgLSBiLmxheWVyKSkpIHtcbiAgICAgICAgICBsZXQgcmVuZGVyZWQgPSBncmFwaGljLnJlbmRlclRyYWNrKHQpO1xuICAgICAgICAgIGlmIChncmFwaGljLnJlbmRlcikge1xuICAgICAgICAgICAgZm9yIChsZXQgcG9zaXRpb25lZF9zcHJpdGUgb2YgcmVuZGVyZWQpIHtcbiAgICAgICAgICAgICAgaHVkX3Nwcml0ZV9yZW5kZXJlcihyZW5kZXJfYXJncywge1xuICAgICAgICAgICAgICAgIHNwcml0ZTogcG9zaXRpb25lZF9zcHJpdGUuc3ByaXRlLFxuICAgICAgICAgICAgICAgIHg6IHBvc2l0aW9uZWRfc3ByaXRlLngsXG4gICAgICAgICAgICAgICAgeTogcG9zaXRpb25lZF9zcHJpdGUueSxcbiAgICAgICAgICAgICAgICByb3RhdGlvbjogZ3JhcGhpYy5zdGF0ZS5yb3RhdGlvbixcbiAgICAgICAgICAgICAgICBzY2FsZTogZ3JhcGhpYy5zdGF0ZS5zY2FsaW5nLFxuICAgICAgICAgICAgICAgIHNjYWxlX3R5cGU6IGdyYXBoaWMuc2NhbGVfdHlwZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IG5vZGUgb2YgZ3JhcGhpYy50ZXh0X25vZGVzKSB7XG4gICAgICAgICAgICAgIGh1ZF90ZXh0X3JlbmRlcmVyKHJlbmRlcl9hcmdzLCB7XG4gICAgICAgICAgICAgICAgeDogbm9kZS5zdGF0ZS5wb3NpdGlvbi54LFxuICAgICAgICAgICAgICAgIHk6IG5vZGUuc3RhdGUucG9zaXRpb24ueSxcbiAgICAgICAgICAgICAgICBmb250OiBub2RlLnJlbmRlcmYodClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgdGV4dCBvZiB0ZXh0X2VsZW1lbnRzKSB7XG4gICAgICAgICAgaHVkX3RleHRfcmVuZGVyZXIocmVuZGVyX2FyZ3MsIHtcbiAgICAgICAgICAgIHg6IHRleHQuc3RhdGUucG9zaXRpb24ueCxcbiAgICAgICAgICAgIHk6IHRleHQuc3RhdGUucG9zaXRpb24ueSxcbiAgICAgICAgICAgIGZvbnQ6IHRleHQucmVuZGVyZih0KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vSWYgYSBjYW1lcmEgaXMgbWFya2VkIGFzIGEgZGVidWcgY2FtZXJhLCB3ZSByZW5kZXIgdGhlXG4gICAgICAvLyAgaGl0Ym94ZXMsIGFuZCBwb3RlbnRpYWxseSB1cGRhdGUgdGhlIGVkaXRvclxuICAgICAgaWYgKGNhbWVyYS5zdGF0ZS5kZWJ1Zykge1xuICAgICAgICBcblxuICAgICAgICBpZihyZW5kZXJfdG9nZ2xlc1tcInByb3hpbWl0eV9ib3hcIl0pe1xuICAgICAgICAgIGxldCByb29tID0gdGhpcy5zdGF0ZS5jdXJyZW50X3Jvb207XG4gICAgICAgICAgXG4gICAgICAgICAgbGV0IHJvb21fbGVuZ3RoID0gcm9vbS5wcm94aW1pdHlfbWFwLmxlbmd0aDtcbiAgICAgICAgICBsZXQgc3F1YXJlX2xlbmd0aCA9IHJvb20ucHJveGltaXR5X21hcC5zcXVhcmVfbGVuZ3RoO1xuICAgICAgICAgIGxldCBkaW1lbnNpb24gPSByb29tX2xlbmd0aC9zcXVhcmVfbGVuZ3RoO1xuICAgICAgICAgIGZvcihsZXQgeCA9IDA7IHggPCBkaW1lbnNpb247IHgrKyl7XG4gICAgICAgICAgICBmb3IobGV0IHkgPSAwOyB5IDwgZGltZW5zaW9uO3krKyl7XG4gICAgICAgICAgICAgIHJlbmRlcl9jb2xsaXNpb25fYm94KHtcbiAgICAgICAgICAgICAgICB4OnggKiBzcXVhcmVfbGVuZ3RoICsgc3F1YXJlX2xlbmd0aC8yIC0gcm9vbV9sZW5ndGgvMixcbiAgICAgICAgICAgICAgICB5OnkgKiBzcXVhcmVfbGVuZ3RoICsgc3F1YXJlX2xlbmd0aC8yIC0gcm9vbV9sZW5ndGgvMixcbiAgICAgICAgICAgICAgICB3aWR0aDpzcXVhcmVfbGVuZ3RoLFxuICAgICAgICAgICAgICAgIGhlaWdodDpzcXVhcmVfbGVuZ3RoXG4gICAgICAgICAgICAgIH0sXCJwdXJwbGVcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmKHJlbmRlcl90b2dnbGVzW1wiYm91bmRpbmdfYm94XCJdKXtcbiAgICAgICAgICBmb3IobGV0IG9iaiBvZiBjYW1lcmFfY29sbGlkZXJzKXtcbiAgICAgICAgICAgIHJlbmRlcl9jb2xsaXNpb25fYm94KG9iai5nZXRGdWxsQ29sbGlzaW9uQm94KCksXCJvcmFuZ2VcIilcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYoREVCVUcgJiYgZGVidWdfc3RhdGUucmVuZGVyX3RvZ2dsZXNbXCJwYXRoX2ZpbmRpbmdcIl0pe1xuICAgICAgICAgIGxldCByb29tID0gdGhpcy5zdGF0ZS5jdXJyZW50X3Jvb20gYXMgUGF0aGluZ19Sb29tPHVua25vd24+O1xuICAgICAgICAgIGlmKHJvb20uY29tcHV0ZU5hdk1lc2gpe1xuICAgICAgICAgICAgbGV0IG1lc2ggPSByb29tLmNvbXB1dGVOYXZNZXNoKHJvb20uZmxvb3JfdGFnLFwiXCIpO1xuICAgICAgICAgICAgZm9yKGxldCB5ID0gMCA7IHkgPCBtZXNoLmdyaWQubGVuZ3RoOyB5Kyspe1xuICAgICAgICAgICAgICBmb3IobGV0IHggPSAwOyB4IDwgIG1lc2guZ3JpZFt5XS5sZW5ndGg7IHgrKyl7XG4gICAgICAgICAgICAgICAgbGV0IGZpbmFsX3kgPSB5KnJvb20ubmF2X25vZGVfZGlhbWV0ZXIgKyAobWVzaC5ib3gueSAtIG1lc2guYm94LmhlaWdodC8yKSArIHJvb20ubmF2X25vZGVfZGlhbWV0ZXIvMjtcbiAgICAgICAgICAgICAgICBsZXQgZmluYWxfeCA9IHgqcm9vbS5uYXZfbm9kZV9kaWFtZXRlciArIChtZXNoLmJveC54IC0gbWVzaC5ib3gud2lkdGgvMikgKyByb29tLm5hdl9ub2RlX2RpYW1ldGVyLzI7XG4gICAgICAgICAgICAgICAgcmVuZGVyX2ZpbGxlZF9ib3goe1xuICAgICAgICAgICAgICAgICAgeDpmaW5hbF94LFxuICAgICAgICAgICAgICAgICAgeTpmaW5hbF95LFxuICAgICAgICAgICAgICAgICAgd2lkdGg6cm9vbS5uYXZfbm9kZV9kaWFtZXRlcixcbiAgICAgICAgICAgICAgICAgIGhlaWdodDpyb29tLm5hdl9ub2RlX2RpYW1ldGVyXG4gICAgICAgICAgICAgICAgfSxtZXNoLmdyaWRbeV1beF0gPT0gMCA/IFwiZ3JlZW5cIiA6IFwicmVkXCIsMC40KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBsZXQgYm94OiBjb2xsaXNpb25fYm94O1xuICAgICAgICBsZXQgYm94ZXNfY29weSA9IFsuLi5ib3hlc107XG4gICAgICAgIGxldCBsaW5lc19jb3B5ID0gWy4uLmxpbmVzXTtcbiAgICAgICAgd2hpbGUgKGxpbmVzX2NvcHkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGxldCBsaW5lID0gbGluZXNfY29weS5wb3AoKTtcbiAgICAgICAgICBsaW5lX3JlbmRlcmVyKHRoaXMub2Zmc2NyZWVuX2NvbnRleHQsIGxpbmUsIFwib3JhbmdlXCIsIDEwLCBjYW1lcmEpO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChib3hlc19jb3B5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBsZXQgYm94X2VudHJ5ID0gYm94ZXNfY29weS5wb3AoKTtcbiAgICAgICAgICBsZXQgcmVjdCA9IHtcbiAgICAgICAgICAgIHdpZHRoOiBib3hfZW50cnkuYm94LndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBib3hfZW50cnkuYm94LmhlaWdodFxuICAgICAgICAgIH1cbiAgICAgICAgICBzdHJva2VkX3JlY3RfcmVuZGVyZXIodGhpcy5vZmZzY3JlZW5fY29udGV4dCwgcmVjdCwgYm94X2VudHJ5LmJveC54LCBib3hfZW50cnkuYm94LnksIGJveF9lbnRyeS5jb2xvciwgMSwgY2FtZXJhKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoaGl0Ym94ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGxldCBib3ggPSBoaXRib3hlcy5wb3AoKTtcbiAgICAgICAgICBsZXQgcmVjdCA9IHtcbiAgICAgICAgICAgIHdpZHRoOiBib3gud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGJveC5oZWlnaHRcbiAgICAgICAgICB9XG4gICAgICAgICAgc3Ryb2tlZF9yZWN0X3JlbmRlcmVyKHRoaXMub2Zmc2NyZWVuX2NvbnRleHQsIHJlY3QsIGJveC54LCBib3gueSwgXCIjMDA4MDAwXCIsIDEsIGNhbWVyYSk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGZpbGxlZF9ib3hlcy5sZW5ndGggPiAwKXtcbiAgICAgICAgICBsZXQgYm94ID0gZmlsbGVkX2JveGVzLnBvcCgpO1xuICAgICAgICAgIGxldCByZWN0ID0ge1xuICAgICAgICAgICAgd2lkdGg6Ym94LmJveC53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDpib3guYm94LmhlaWdodFxuICAgICAgICAgIH1cbiAgICAgICAgICByZWN0X3JlbmRlcmVyKHRoaXMub2Zmc2NyZWVuX2NvbnRleHQsIHJlY3QsIGJveC5ib3gueCxib3guYm94LnksYm94LmNvbG9yLGNhbWVyYSxib3gub3BhY2l0eSk7XG4gICAgICAgIH1cbiAgICAgICAgLy9EcmF3cyBhIHNwZWNpYWwgYm94IGFyb3VuZCB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGVsZW1lbnRcbiAgICAgICAgLy9pbnNpZGUgdGhlIGVkaXRvciBVSVxuICAgICAgICBpZiAoREVCVUcgJiYgZGVidWdfc3RhdGUuc2VsZWN0ZWRfcHJvcGVydGllc19lbGVtZW50KSB7XG4gICAgICAgICAgbGV0IGNvbGwgPSBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9wcm9wZXJ0aWVzX2VsZW1lbnQuZ2V0RnVsbENvbGxpc2lvbkJveCgpO1xuICAgICAgICAgIHJlY3RfcmVuZGVyZXIodGhpcy5vZmZzY3JlZW5fY29udGV4dCwgeyB3aWR0aDogNSwgaGVpZ2h0OiA1IH0sIGNvbGwueCwgY29sbC55LCBcInNreWJsdWVcIiwgY2FtZXJhKTtcbiAgICAgICAgICBzdHJva2VkX3JlY3RfcmVuZGVyZXIodGhpcy5vZmZzY3JlZW5fY29udGV4dCwgY29sbCwgY29sbC54LCBjb2xsLnksIFwiYmx1ZVwiLCAxLCBjYW1lcmEpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3Ryb2tlZF9yZWN0X3JlbmRlcmVyKHRoaXMub2Zmc2NyZWVuX2NvbnRleHQsIHsgd2lkdGg6IHRoaXMuc3RhdGUuY3VycmVudF9yb29tLnByb3hpbWl0eV9tYXAubGVuZ3RoLCBoZWlnaHQ6IHRoaXMuc3RhdGUuY3VycmVudF9yb29tLnByb3hpbWl0eV9tYXAubGVuZ3RoIH0sIDAsIDAsIFwicHVycGxlXCIsIDEwLCBjYW1lcmEpO1xuICAgICAgfVxuICAgICAgLy9TZXBhcmF0ZSBjYW52YXMgZm9yIHRoZSBlZGl0b3IgY2FtZXJhXG4gICAgICBpZiAoYSAhPT0gZWRpdG9yX2NhbWVyYV9pbmRleCkge1xuICAgICAgICAvL3RoaXMuc3RhdGUuY29udGV4dC5kcmF3SW1hZ2UodGhpcy50ZXN0X2NhbnZhcywgY2FtZXJhLnN0YXRlLnZpZXdwb3J0LngsIGNhbWVyYS5zdGF0ZS52aWV3cG9ydC55KTtcbiAgICAgICAgdGhpcy5zdGF0ZS5jb250ZXh0LmRyYXdJbWFnZSh0aGlzLm9mZnNjcmVlbl9jYW52YXMsIGNhbWVyYS5zdGF0ZS52aWV3cG9ydC54LCBjYW1lcmEuc3RhdGUudmlld3BvcnQueSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgLy9kZWJ1Z19zdGF0ZS50YXJnZXQuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZSh0aGlzLnRlc3RfY2FudmFzLCBjYW1lcmEuc3RhdGUudmlld3BvcnQueCwgY2FtZXJhLnN0YXRlLnZpZXdwb3J0LnkpOyAgXG4gICAgICAgIGRlYnVnX3N0YXRlLnRhcmdldC5nZXRDb250ZXh0KFwiMmRcIikuZHJhd0ltYWdlKHRoaXMub2Zmc2NyZWVuX2NhbnZhcywgY2FtZXJhLnN0YXRlLnZpZXdwb3J0LngsIGNhbWVyYS5zdGF0ZS52aWV3cG9ydC55KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKERFQlVHKSB7XG4gICAgICBib3hlcyA9IFtdO1xuICAgICAgZmlsbGVkX2JveGVzID0gW107XG4gICAgICBsaW5lcyA9IFtdO1xuICAgIH1cbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYXN5bmMgKGEpID0+IHtcbiAgICAgIGlmICh0aGlzLmlzUmVuZGVyaW5nKXtcbiAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXIoYSlcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBzdGFydF9sb2dpYyhhOiBudW1iZXIpIHtcbiAgICAvL3RoaXMgaXMgdGhlIHJvb20ncyBzdGF0ZSBsb29wXG4gICAgcmV0dXJuIHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBsZXQgbmV3X3RpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgaWYgKCFQQVVTRUQpIHtcblxuICAgICAgICBsZXQgdGltZV9zaW5jZSA9IG5ld190aW1lLmdldFRpbWUoKSAtIGxhc3RfdGltZS5nZXRUaW1lKCk7XG4gICAgICAgIGxldCByb29tID0gdGhpcy5zdGF0ZS5jdXJyZW50X3Jvb207XG4gICAgICAgIGlmIChyb29tKSB7XG4gICAgICAgICAgcm9vbS5zdGF0ZWYodGltZV9zaW5jZSk7XG4gICAgICAgICAgaWYodGhpcy5zdGF0ZS5jYW1lcmFzKXtcbiAgICAgICAgICAgIGZvcihsZXQgY2FtZXJhcyBvZiB0aGlzLnN0YXRlLmNhbWVyYXMpe1xuICAgICAgICAgICAgICBpZihjYW1lcmFzLmh1ZCl7XG4gICAgICAgICAgICAgICAgY2FtZXJhcy5odWQuc3RhdGVmKHRpbWVfc2luY2UpO1xuICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgfSBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxhc3RfdGltZSA9IG5ld190aW1lO1xuICAgICAgLy9UaGlzIGZ1bmN0aW9ucyBoYW5kbGVzIGJpbmRzIHRoYXQgb2NjdXIgb24gYW4gaW50ZXJ2YWxcbiAgICAgIEV4ZWN1dGVSZXBlYXRCaW5kcyhhKTtcbiAgICAgIHZhciBnYW1lcGFkcyA9IFsuLi5uYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKV07XG4gICAgICBmb3IobGV0IGdhbWVwYWQgb2YgZ2FtZXBhZHMuZmlsdGVyKHBhZCA9PiBwYWQgIT0gbnVsbCkpe1xuICAgICAgICBoYW5kbGVHYW1lcGFkKGdhbWVwYWQpO1xuICAgICAgfVxuICAgIH0sIGEpO1xuICB9XG4gIGdldFJvb20oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuY3VycmVudF9yb29tO1xuICB9XG4gIGFzeW5jIGxvYWRSb29tU3RyaW5nKHg6IHN0cmluZykge1xuICAgIC8vcm9vbSBsaXN0IGlzIGEgb2JqZWN0IHRoYXQgY29udGFpbnMgZWFjaCByb29tJ3MgY2xhc3MsXG4gICAgLy93aXRoIHRoZSByb29tJ3MgbmFtZSBhcyB0aGUga2V5IGZvciBjbGFzc1xuICAgIC8vVGhpcyBvYmplY3QgaXMgcG9wdWxhdGVkIGF0IGNvbXBpbGUgdGltZVxuICAgIGxldCBsb2FkZWRfcm9vbSA9IGZhbHNlO1xuICAgIGZvciAobGV0IGEgb2YgT2JqZWN0LmtleXMocm9vbV9saXN0KSkge1xuICAgICAgaWYgKGEgPT0geCkge1xuICAgICAgICAvL3RoaXMgaXNuJ3QgcGFydGljdWxhcmx5IHR5cGUtc2FmZS5cbiAgICAgICAgbGV0IG5ld19yb29tID0gPHJvb208e30+Pm5ldyByb29tX2xpc3RbYV0odGhpcylcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkUm9vbShuZXdfcm9vbSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQXR0ZW1wdGVkIHRvIGxvYWQgbm9uLWV4aXN0aW5nIHJvb20uXCIpO1xuICB9XG4gIC8vUmVkcmF3cyBhbnkgc3RhdGljIG9iamVjdHMgY29udGFpbmVkIHdpdGhpbiB0aGUgbGlzdFxuICBkcmF3U3RhdGljT2JqZWN0cyhpbnB1dDpvYmpbXSl7XG4gICAgbGV0IHJvb21fbGVuZ3RoID0gdGhpcy5zdGF0ZS5jdXJyZW50X3Jvb20ucHJveGltaXR5X21hcC5sZW5ndGg7XG4gICAgbGV0IHN0YXRpY3MgPSBpbnB1dC5maWx0ZXIodSA9PiB1LnN0YXRpYyk7XG4gICAgLypUaGlzIGNhbWVyYSBzcGFucyB0aGUgZW50aXJlIHdvcmxkIHNwYWNlLCB3aGljaCB3ZSB1c2UgdG8gY2FwdHVyZVxuICAgIEEgcmVuZGVyIG9mIGV2ZXJ5IHN0YXRpYyBvYmplY3RzLCB3aGljaCB3ZSBjYWNoZS4gSW5zdGVhZCBvZiByZW5kZXJpbmcgXG4gICAgZXZlcnkgc3RhdGljIG9iamVjdCBldmVyeSBmcmFtZSwgd2UgcmVuZGVyIHRoZSBjYWNoZWQgaW1hZ2UuICovXG4gICAgbGV0IHN0YXRpY19jYW0gPSBuZXcgQ2FtZXJhKHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwLFxuICAgICAgZGltZW5zaW9uczogeyBoZWlnaHQ6IHJvb21fbGVuZ3RoLCB3aWR0aDogcm9vbV9sZW5ndGggfSxcbiAgICAgIHNjYWxpbmc6IDEsXG4gICAgICBkZWJ1ZzogZmFsc2VcbiAgICB9LCB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIHdpZHRoOiAxLFxuICAgICAgaGVpZ2h0OiAxXG4gICAgfSlcbiAgICBzdGF0aWNzLmZvckVhY2goKHUpID0+IHtcbiAgICAgIGxldCByZW5kZXJlZCA9IHUucmVuZGVyVHJhY2sodS5sYXN0X3JlbmRlcik7XG4gICAgICBmb3IgKGxldCByIG9mIHJlbmRlcmVkKSB7XG4gICAgICAgIHNwcml0ZV9yZW5kZXJlcih7XG4gICAgICAgICAgY29udGV4dDogdGhpcy5zdGF0aWNfY29udGV4dCxcbiAgICAgICAgICBjYW1lcmE6IHN0YXRpY19jYW1cbiAgICAgICAgfSwge1xuICAgICAgICAgIHNwcml0ZTogci5zcHJpdGUsXG4gICAgICAgICAgeDogci54LFxuICAgICAgICAgIHk6IHIueSxcbiAgICAgICAgICByb3RhdGlvbjogdS5zdGF0ZS5yb3RhdGlvbixcbiAgICAgICAgICBzY2FsZTogdS5zdGF0ZS5zY2FsaW5nLFxuICAgICAgICAgIHNjYWxlX3R5cGU6IHUuc2NhbGVfdHlwZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KVxuICB9XG4gIC8vUmVkcmF3cyB0aGUgc3RhdGljcyB0aGF0IGFyZSBjb250YWluZWQgd2l0aGluIHRoZSBpbnB1dCBjb2xsaXNpb24gYm94LlxuICB1cGRhdGVTdGF0aWNzSW5Db2xsaXNpb24oaW5wdXQ6Y29sbGlzaW9uX2JveCl7XG4gICAgbGV0IHByb3hfYm94ZXMgPSB0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS5wcm94aW1pdHlfbWFwLmdldENvcmRzRnJvbUJveChpbnB1dCk7XG4gICAgbGV0IHNxdWFyZV9sZW5ndGggPSB0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS5wcm94aW1pdHlfbWFwLnNxdWFyZV9sZW5ndGg7XG4gICAgbGV0IHJvb21fbGVuZ3RoID0gdGhpcy5zdGF0ZS5jdXJyZW50X3Jvb20ucHJveGltaXR5X21hcC5sZW5ndGg7XG4gICAgZm9yKGxldCBib3ggb2YgcHJveF9ib3hlcyl7XG4gICAgICB0aGlzLnN0YXRpY19jb250ZXh0LmNsZWFyUmVjdChib3gueCAqIHNxdWFyZV9sZW5ndGgscm9vbV9sZW5ndGggLSAoYm94LnkgKiBzcXVhcmVfbGVuZ3RoICsgc3F1YXJlX2xlbmd0aCksc3F1YXJlX2xlbmd0aCxzcXVhcmVfbGVuZ3RoKTtcbiAgICB9XG4gICAgbGV0IHN0YXRpY3MgPSB0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS5wcm94aW1pdHlfbWFwLmdldE9iamVjdHNGcm9tQ29yZHMocHJveF9ib3hlcyk7XG4gICAgdGhpcy5kcmF3U3RhdGljT2JqZWN0cyhzdGF0aWNzKTtcbiAgfVxuICAvL0NyZWF0ZXMgdGhlIGluaXRhbCBjYWNoZWQgcmVuZGVyIG9mIHRoZSBzdGF0aWMgb2JqZWN0cy5cbiAgZHJhd0FsbFN0YXRpY3MoKSB7XG4gICAgbGV0IHJvb21fbGVuZ3RoID0gdGhpcy5zdGF0ZS5jdXJyZW50X3Jvb20ucHJveGltaXR5X21hcC5sZW5ndGg7XG4gICAgdGhpcy5zdGF0aWNfY2FudmFzLndpZHRoID0gcm9vbV9sZW5ndGg7XG4gICAgdGhpcy5zdGF0aWNfY2FudmFzLmhlaWdodCA9IHJvb21fbGVuZ3RoO1xuICAgIHRoaXMuc3RhdGljX2NvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHJvb21fbGVuZ3RoLCByb29tX2xlbmd0aCk7XG4gICAgdGhpcy5kcmF3U3RhdGljT2JqZWN0cyh0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS5vYmplY3RzKVxuICB9XG4gIGFzeW5jIGxvYWRSb29tKHg6IHJvb208dW5rbm93bj4pIHtcbiAgICAvL0NsZWFycyB0aGUgcm9vbSdzIGxvZ2ljIGxvb3AgaWYgb25lXG4gICAgLy9XYXMgYWxyZWFkeSBydW5uaW5nXG4gICAgdGhpcy5pc1JlbmRlcmluZyA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnN0YXRlLmxvZ2ljKSB7XG4gICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnN0YXRlLmxvZ2ljKTtcbiAgICB9XG4gICAgLy9UaGlzIHJlZmVyZW5jZSBpcyB1c2VkIGR1cmluZyBpbml0aWFsaXphdGlvblxuICAgIHguZ2FtZSA9IHRoaXM7XG5cbiAgICAvL0RlbGV0ZXMgZWFjaCBvYmplY3QgaW4gdGhlIHJvb20gKHdoaWNoIGFsc28gdW5iaW5kcyB0aGVpciBiaW5kcyksXG4gICAgLy9hbmQgdW5iaW5kcyB0aGUgcm9vbSdzIGJpbmRpbmdzLlxuICAgIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS5hdWRpby5jbGVhbnVwKCk7XG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS52YWxpZCA9IGZhbHNlO1xuICAgICAgd2hpbGUgKHRoaXMuc3RhdGUuY3VycmVudF9yb29tLm9iamVjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS5vYmplY3RzWzBdLmF1ZGlvLmNsZWFudXAoKTsgIFxuICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS5vYmplY3RzWzBdLmRlbGV0ZSgpO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgaWQgb2YgdGhpcy5zdGF0ZS5jdXJyZW50X3Jvb20uYmluZHMpIHtcbiAgICAgICAgVW5iaW5kKGlkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgeC5sb2FkKCk7XG4gICAgZm9yIChsZXQgYyBvZiB4LmNvbmZpZy5vYmplY3RzKSB7XG4gICAgICAvL1RoaXMgaGFuZGxlcyBsb2FkaW5nIG9iamVjdHMgZnJvbSB0aGUgc2F2ZWQganNvbiBmaWxlIGFzc29jaWF0ZWQgd2l0aCBlYWNoIHJvb20uXG4gICAgICBhd2FpdCB4LmFkZEl0ZW1TdGF0ZUNvbmZpZyhjKVxuICAgIH1cbiAgICB4LnJlZ2lzdGVyQ29udHJvbHMoKTtcbiAgICB4LnJlZ2lzdGVyUGFydGljbGVzKCk7XG4gICAgeC5yZWdpc3RlckF1ZGlvKCk7XG4gICAgdGhpcy5zdGF0ZS5jdXJyZW50X3Jvb20gPSB4O1xuICAgIGF3YWl0IHRoaXMuc3RhdGUuY3VycmVudF9yb29tLmluaXRpYWxpemUoKTtcbiAgICB0aGlzLmRyYXdBbGxTdGF0aWNzKCk7XG4gICAgdGhpcy5zdGF0ZS5sb2dpYyA9IHRoaXMuc3RhcnRfbG9naWMobG9naWNfbG9vcF9pbnRlcnZhbClcblxuICAgIGlmIChERUJVRykge1xuICAgICAgZGVidWdfdXBkYXRlX3Jvb21fbGlzdCgpO1xuICAgICAgZGVidWdfdXBkYXRlX3ByZWZhYnMoKTtcbiAgICAgIGRlYnVnX3VwZGF0ZV9vYmpfbGlzdCgpO1xuICAgIH1cblxuXG4gICAgaWYgKCF0aGlzLmlzUmVuZGVyaW5nKSB7XG4gICAgICB0aGlzLmlzUmVuZGVyaW5nID0gdHJ1ZTtcbiAgICAgIC8vVGhpcyBzdGFydHMgdGhlIHJlbmRlciBsb29wIGZvciB0aGUgcm9vbVxuICAgICAgdGhpcy5yZW5kZXIoMCk7XG5cblxuICAgIH1cblxuICB9XG59XG5cbmV4cG9ydCBlbnVtIHBlZXJfY29ubmVjdGlvbntcbiAgY2hpbGQsXG4gIGhvc3Rcbn1cblxuZXhwb3J0IGNsYXNzIHBlZXJfdG9fcGVlcl9nYW1lPFQ+IGV4dGVuZHMgZ2FtZTxUPntcbiAgbmV0X3R5cGU6bmV0X3R5cGUgPSBuZXRfdHlwZS53ZWI7XG4gIG5ldHdvcms6TmV0d29yayA9IG5ldyBXZWIoKTtcbiAgY29uc3RydWN0b3IoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGluaXRfc3RhdGU6IFQpIHtcbiAgICBzdXBlcihjdHgsaW5pdF9zdGF0ZSk7XG4gICAgdGhpcy5uZXR3b3JrLmdhbWUgPSB0aGlzO1xuICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==
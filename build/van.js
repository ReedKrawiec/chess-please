/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/game/main.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/chess.js/chess.js":
/*!****************************************!*\
  !*** ./node_modules/chess.js/chess.js ***!
  \****************************************/
/*! exports provided: BLACK, WHITE, EMPTY, PAWN, KNIGHT, BISHOP, ROOK, QUEEN, KING, SQUARES, FLAGS, Chess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BLACK", function() { return BLACK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WHITE", function() { return WHITE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EMPTY", function() { return EMPTY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PAWN", function() { return PAWN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KNIGHT", function() { return KNIGHT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BISHOP", function() { return BISHOP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ROOK", function() { return ROOK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QUEEN", function() { return QUEEN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KING", function() { return KING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SQUARES", function() { return SQUARES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FLAGS", function() { return FLAGS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Chess", function() { return Chess; });
/*
 * Copyright (c) 2022, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 *
 *----------------------------------------------------------------------------*/

const SYMBOLS = 'pnbrqkPNBRQK'

const DEFAULT_POSITION =
  'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1'

const TERMINATION_MARKERS = ['1-0', '0-1', '1/2-1/2', '*']

const PAWN_OFFSETS = {
  b: [16, 32, 17, 15],
  w: [-16, -32, -17, -15],
}

const PIECE_OFFSETS = {
  n: [-18, -33, -31, -14, 18, 33, 31, 14],
  b: [-17, -15, 17, 15],
  r: [-16, 1, 16, -1],
  q: [-17, -16, -15, 1, 17, 16, 15, -1],
  k: [-17, -16, -15, 1, 17, 16, 15, -1],
}

// prettier-ignore
const ATTACKS = [
  20, 0, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0, 0,20, 0,
   0,20, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0,20, 0, 0,
   0, 0,20, 0, 0, 0, 0, 24,  0, 0, 0, 0,20, 0, 0, 0,
   0, 0, 0,20, 0, 0, 0, 24,  0, 0, 0,20, 0, 0, 0, 0,
   0, 0, 0, 0,20, 0, 0, 24,  0, 0,20, 0, 0, 0, 0, 0,
   0, 0, 0, 0, 0,20, 2, 24,  2,20, 0, 0, 0, 0, 0, 0,
   0, 0, 0, 0, 0, 2,53, 56, 53, 2, 0, 0, 0, 0, 0, 0,
  24,24,24,24,24,24,56,  0, 56,24,24,24,24,24,24, 0,
   0, 0, 0, 0, 0, 2,53, 56, 53, 2, 0, 0, 0, 0, 0, 0,
   0, 0, 0, 0, 0,20, 2, 24,  2,20, 0, 0, 0, 0, 0, 0,
   0, 0, 0, 0,20, 0, 0, 24,  0, 0,20, 0, 0, 0, 0, 0,
   0, 0, 0,20, 0, 0, 0, 24,  0, 0, 0,20, 0, 0, 0, 0,
   0, 0,20, 0, 0, 0, 0, 24,  0, 0, 0, 0,20, 0, 0, 0,
   0,20, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0,20, 0, 0,
  20, 0, 0, 0, 0, 0, 0, 24,  0, 0, 0, 0, 0, 0,20
];

// prettier-ignore
const RAYS = [
   17,  0,  0,  0,  0,  0,  0, 16,  0,  0,  0,  0,  0,  0, 15, 0,
    0, 17,  0,  0,  0,  0,  0, 16,  0,  0,  0,  0,  0, 15,  0, 0,
    0,  0, 17,  0,  0,  0,  0, 16,  0,  0,  0,  0, 15,  0,  0, 0,
    0,  0,  0, 17,  0,  0,  0, 16,  0,  0,  0, 15,  0,  0,  0, 0,
    0,  0,  0,  0, 17,  0,  0, 16,  0,  0, 15,  0,  0,  0,  0, 0,
    0,  0,  0,  0,  0, 17,  0, 16,  0, 15,  0,  0,  0,  0,  0, 0,
    0,  0,  0,  0,  0,  0, 17, 16, 15,  0,  0,  0,  0,  0,  0, 0,
    1,  1,  1,  1,  1,  1,  1,  0, -1, -1,  -1,-1, -1, -1, -1, 0,
    0,  0,  0,  0,  0,  0,-15,-16,-17,  0,  0,  0,  0,  0,  0, 0,
    0,  0,  0,  0,  0,-15,  0,-16,  0,-17,  0,  0,  0,  0,  0, 0,
    0,  0,  0,  0,-15,  0,  0,-16,  0,  0,-17,  0,  0,  0,  0, 0,
    0,  0,  0,-15,  0,  0,  0,-16,  0,  0,  0,-17,  0,  0,  0, 0,
    0,  0,-15,  0,  0,  0,  0,-16,  0,  0,  0,  0,-17,  0,  0, 0,
    0,-15,  0,  0,  0,  0,  0,-16,  0,  0,  0,  0,  0,-17,  0, 0,
  -15,  0,  0,  0,  0,  0,  0,-16,  0,  0,  0,  0,  0,  0,-17
];

const SHIFTS = { p: 0, n: 1, b: 2, r: 3, q: 4, k: 5 }

const BITS = {
  NORMAL: 1,
  CAPTURE: 2,
  BIG_PAWN: 4,
  EP_CAPTURE: 8,
  PROMOTION: 16,
  KSIDE_CASTLE: 32,
  QSIDE_CASTLE: 64,
}

const RANK_1 = 7
const RANK_2 = 6
const RANK_3 = 5
const RANK_4 = 4
const RANK_5 = 3
const RANK_6 = 2
const RANK_7 = 1
const RANK_8 = 0

// prettier-ignore
const SQUARE_MAP = {
  a8:   0, b8:   1, c8:   2, d8:   3, e8:   4, f8:   5, g8:   6, h8:   7,
  a7:  16, b7:  17, c7:  18, d7:  19, e7:  20, f7:  21, g7:  22, h7:  23,
  a6:  32, b6:  33, c6:  34, d6:  35, e6:  36, f6:  37, g6:  38, h6:  39,
  a5:  48, b5:  49, c5:  50, d5:  51, e5:  52, f5:  53, g5:  54, h5:  55,
  a4:  64, b4:  65, c4:  66, d4:  67, e4:  68, f4:  69, g4:  70, h4:  71,
  a3:  80, b3:  81, c3:  82, d3:  83, e3:  84, f3:  85, g3:  86, h3:  87,
  a2:  96, b2:  97, c2:  98, d2:  99, e2: 100, f2: 101, g2: 102, h2: 103,
  a1: 112, b1: 113, c1: 114, d1: 115, e1: 116, f1: 117, g1: 118, h1: 119
};

const ROOKS = {
  w: [
    { square: SQUARE_MAP.a1, flag: BITS.QSIDE_CASTLE },
    { square: SQUARE_MAP.h1, flag: BITS.KSIDE_CASTLE },
  ],
  b: [
    { square: SQUARE_MAP.a8, flag: BITS.QSIDE_CASTLE },
    { square: SQUARE_MAP.h8, flag: BITS.KSIDE_CASTLE },
  ],
}

const PARSER_STRICT = 0
const PARSER_SLOPPY = 1

/* this function is used to uniquely identify ambiguous moves */
function get_disambiguator(move, moves) {
  var from = move.from
  var to = move.to
  var piece = move.piece

  var ambiguities = 0
  var same_rank = 0
  var same_file = 0

  for (var i = 0, len = moves.length; i < len; i++) {
    var ambig_from = moves[i].from
    var ambig_to = moves[i].to
    var ambig_piece = moves[i].piece

    /* if a move of the same piece type ends on the same to square, we'll
     * need to add a disambiguator to the algebraic notation
     */
    if (piece === ambig_piece && from !== ambig_from && to === ambig_to) {
      ambiguities++

      if (rank(from) === rank(ambig_from)) {
        same_rank++
      }

      if (file(from) === file(ambig_from)) {
        same_file++
      }
    }
  }

  if (ambiguities > 0) {
    /* if there exists a similar moving piece on the same rank and file as
     * the move in question, use the square as the disambiguator
     */
    if (same_rank > 0 && same_file > 0) {
      return algebraic(from)
    } else if (same_file > 0) {
      /* if the moving piece rests on the same file, use the rank symbol as the
       * disambiguator
       */
      return algebraic(from).charAt(1)
    } else {
      /* else use the file symbol */
      return algebraic(from).charAt(0)
    }
  }

  return ''
}

function infer_piece_type(san) {
  var piece_type = san.charAt(0)
  if (piece_type >= 'a' && piece_type <= 'h') {
    var matches = san.match(/[a-h]\d.*[a-h]\d/)
    if (matches) {
      return undefined
    }
    return PAWN
  }
  piece_type = piece_type.toLowerCase()
  if (piece_type === 'o') {
    return KING
  }
  return piece_type
}

// parses all of the decorators out of a SAN string
function stripped_san(move) {
  return move.replace(/=/, '').replace(/[+#]?[?!]*$/, '')
}

/*****************************************************************************
 * UTILITY FUNCTIONS
 ****************************************************************************/
function rank(i) {
  return i >> 4
}

function file(i) {
  return i & 15
}

function algebraic(i) {
  var f = file(i),
    r = rank(i)
  return 'abcdefgh'.substring(f, f + 1) + '87654321'.substring(r, r + 1)
}

function swap_color(c) {
  return c === WHITE ? BLACK : WHITE
}

function is_digit(c) {
  return '0123456789'.indexOf(c) !== -1
}

function clone(obj) {
  var dupe = obj instanceof Array ? [] : {}

  for (var property in obj) {
    if (typeof property === 'object') {
      dupe[property] = clone(obj[property])
    } else {
      dupe[property] = obj[property]
    }
  }

  return dupe
}

function trim(str) {
  return str.replace(/^\s+|\s+$/g, '')
}

/***************************************************************************
 * PUBLIC CONSTANTS
 **************************************************************************/

const BLACK = 'b'
const WHITE = 'w'

const EMPTY = -1

const PAWN = 'p'
const KNIGHT = 'n'
const BISHOP = 'b'
const ROOK = 'r'
const QUEEN = 'q'
const KING = 'k'

const SQUARES = (function () {
  /* from the ECMA-262 spec (section 12.6.4):
   * "The mechanics of enumerating the properties ... is
   * implementation dependent"
   * so: for (var sq in SQUARES) { keys.push(sq); } might not be
   * ordered correctly
   */
  var keys = []
  for (var i = SQUARE_MAP.a8; i <= SQUARE_MAP.h1; i++) {
    if (i & 0x88) {
      i += 7
      continue
    }
    keys.push(algebraic(i))
  }
  return keys
})()

const FLAGS = {
  NORMAL: 'n',
  CAPTURE: 'c',
  BIG_PAWN: 'b',
  EP_CAPTURE: 'e',
  PROMOTION: 'p',
  KSIDE_CASTLE: 'k',
  QSIDE_CASTLE: 'q',
}

const Chess = function (fen) {
  var board = new Array(128)
  var kings = { w: EMPTY, b: EMPTY }
  var turn = WHITE
  var castling = { w: 0, b: 0 }
  var ep_square = EMPTY
  var half_moves = 0
  var move_number = 1
  var history = []
  var header = {}
  var comments = {}

  /* if the user passes in a fen string, load it, else default to
   * starting position
   */
  if (typeof fen === 'undefined') {
    load(DEFAULT_POSITION)
  } else {
    load(fen)
  }

  function clear(keep_headers) {
    if (typeof keep_headers === 'undefined') {
      keep_headers = false
    }

    board = new Array(128)
    kings = { w: EMPTY, b: EMPTY }
    turn = WHITE
    castling = { w: 0, b: 0 }
    ep_square = EMPTY
    half_moves = 0
    move_number = 1
    history = []
    if (!keep_headers) header = {}
    comments = {}
    update_setup(generate_fen())
  }

  function prune_comments() {
    var reversed_history = []
    var current_comments = {}
    var copy_comment = function (fen) {
      if (fen in comments) {
        current_comments[fen] = comments[fen]
      }
    }
    while (history.length > 0) {
      reversed_history.push(undo_move())
    }
    copy_comment(generate_fen())
    while (reversed_history.length > 0) {
      make_move(reversed_history.pop())
      copy_comment(generate_fen())
    }
    comments = current_comments
  }

  function reset() {
    load(DEFAULT_POSITION)
  }

  function load(fen, keep_headers) {
    if (typeof keep_headers === 'undefined') {
      keep_headers = false
    }

    var tokens = fen.split(/\s+/)
    var position = tokens[0]
    var square = 0

    if (!validate_fen(fen).valid) {
      return false
    }

    clear(keep_headers)

    for (var i = 0; i < position.length; i++) {
      var piece = position.charAt(i)

      if (piece === '/') {
        square += 8
      } else if (is_digit(piece)) {
        square += parseInt(piece, 10)
      } else {
        var color = piece < 'a' ? WHITE : BLACK
        put({ type: piece.toLowerCase(), color: color }, algebraic(square))
        square++
      }
    }

    turn = tokens[1]

    if (tokens[2].indexOf('K') > -1) {
      castling.w |= BITS.KSIDE_CASTLE
    }
    if (tokens[2].indexOf('Q') > -1) {
      castling.w |= BITS.QSIDE_CASTLE
    }
    if (tokens[2].indexOf('k') > -1) {
      castling.b |= BITS.KSIDE_CASTLE
    }
    if (tokens[2].indexOf('q') > -1) {
      castling.b |= BITS.QSIDE_CASTLE
    }

    ep_square = tokens[3] === '-' ? EMPTY : SQUARE_MAP[tokens[3]]
    half_moves = parseInt(tokens[4], 10)
    move_number = parseInt(tokens[5], 10)

    update_setup(generate_fen())

    return true
  }

  /* TODO: this function is pretty much crap - it validates structure but
   * completely ignores content (e.g. doesn't verify that each side has a king)
   * ... we should rewrite this, and ditch the silly error_number field while
   * we're at it
   */
  function validate_fen(fen) {
    var errors = {
      0: 'No errors.',
      1: 'FEN string must contain six space-delimited fields.',
      2: '6th field (move number) must be a positive integer.',
      3: '5th field (half move counter) must be a non-negative integer.',
      4: '4th field (en-passant square) is invalid.',
      5: '3rd field (castling availability) is invalid.',
      6: '2nd field (side to move) is invalid.',
      7: "1st field (piece positions) does not contain 8 '/'-delimited rows.",
      8: '1st field (piece positions) is invalid [consecutive numbers].',
      9: '1st field (piece positions) is invalid [invalid piece].',
      10: '1st field (piece positions) is invalid [row too large].',
      11: 'Illegal en-passant square',
    }

    /* 1st criterion: 6 space-seperated fields? */
    var tokens = fen.split(/\s+/)
    if (tokens.length !== 6) {
      return { valid: false, error_number: 1, error: errors[1] }
    }

    /* 2nd criterion: move number field is a integer value > 0? */
    if (isNaN(tokens[5]) || parseInt(tokens[5], 10) <= 0) {
      return { valid: false, error_number: 2, error: errors[2] }
    }

    /* 3rd criterion: half move counter is an integer >= 0? */
    if (isNaN(tokens[4]) || parseInt(tokens[4], 10) < 0) {
      return { valid: false, error_number: 3, error: errors[3] }
    }

    /* 4th criterion: 4th field is a valid e.p.-string? */
    if (!/^(-|[abcdefgh][36])$/.test(tokens[3])) {
      return { valid: false, error_number: 4, error: errors[4] }
    }

    /* 5th criterion: 3th field is a valid castle-string? */
    if (!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(tokens[2])) {
      return { valid: false, error_number: 5, error: errors[5] }
    }

    /* 6th criterion: 2nd field is "w" (white) or "b" (black)? */
    if (!/^(w|b)$/.test(tokens[1])) {
      return { valid: false, error_number: 6, error: errors[6] }
    }

    /* 7th criterion: 1st field contains 8 rows? */
    var rows = tokens[0].split('/')
    if (rows.length !== 8) {
      return { valid: false, error_number: 7, error: errors[7] }
    }

    /* 8th criterion: every row is valid? */
    for (var i = 0; i < rows.length; i++) {
      /* check for right sum of fields AND not two numbers in succession */
      var sum_fields = 0
      var previous_was_number = false

      for (var k = 0; k < rows[i].length; k++) {
        if (!isNaN(rows[i][k])) {
          if (previous_was_number) {
            return { valid: false, error_number: 8, error: errors[8] }
          }
          sum_fields += parseInt(rows[i][k], 10)
          previous_was_number = true
        } else {
          if (!/^[prnbqkPRNBQK]$/.test(rows[i][k])) {
            return { valid: false, error_number: 9, error: errors[9] }
          }
          sum_fields += 1
          previous_was_number = false
        }
      }
      if (sum_fields !== 8) {
        return { valid: false, error_number: 10, error: errors[10] }
      }
    }

    if (
      (tokens[3][1] == '3' && tokens[1] == 'w') ||
      (tokens[3][1] == '6' && tokens[1] == 'b')
    ) {
      return { valid: false, error_number: 11, error: errors[11] }
    }

    /* everything's okay! */
    return { valid: true, error_number: 0, error: errors[0] }
  }

  function generate_fen() {
    var empty = 0
    var fen = ''

    for (var i = SQUARE_MAP.a8; i <= SQUARE_MAP.h1; i++) {
      if (board[i] == null) {
        empty++
      } else {
        if (empty > 0) {
          fen += empty
          empty = 0
        }
        var color = board[i].color
        var piece = board[i].type

        fen += color === WHITE ? piece.toUpperCase() : piece.toLowerCase()
      }

      if ((i + 1) & 0x88) {
        if (empty > 0) {
          fen += empty
        }

        if (i !== SQUARE_MAP.h1) {
          fen += '/'
        }

        empty = 0
        i += 8
      }
    }

    var cflags = ''
    if (castling[WHITE] & BITS.KSIDE_CASTLE) {
      cflags += 'K'
    }
    if (castling[WHITE] & BITS.QSIDE_CASTLE) {
      cflags += 'Q'
    }
    if (castling[BLACK] & BITS.KSIDE_CASTLE) {
      cflags += 'k'
    }
    if (castling[BLACK] & BITS.QSIDE_CASTLE) {
      cflags += 'q'
    }

    /* do we have an empty castling flag? */
    cflags = cflags || '-'
    var epflags = ep_square === EMPTY ? '-' : algebraic(ep_square)

    return [fen, turn, cflags, epflags, half_moves, move_number].join(' ')
  }

  function set_header(args) {
    for (var i = 0; i < args.length; i += 2) {
      if (typeof args[i] === 'string' && typeof args[i + 1] === 'string') {
        header[args[i]] = args[i + 1]
      }
    }
    return header
  }

  /* called when the initial board setup is changed with put() or remove().
   * modifies the SetUp and FEN properties of the header object.  if the FEN is
   * equal to the default position, the SetUp and FEN are deleted
   * the setup is only updated if history.length is zero, ie moves haven't been
   * made.
   */
  function update_setup(fen) {
    if (history.length > 0) return

    if (fen !== DEFAULT_POSITION) {
      header['SetUp'] = '1'
      header['FEN'] = fen
    } else {
      delete header['SetUp']
      delete header['FEN']
    }
  }

  function get(square) {
    var piece = board[SQUARE_MAP[square]]
    return piece ? { type: piece.type, color: piece.color } : null
  }

  function put(piece, square) {
    /* check for valid piece object */
    if (!('type' in piece && 'color' in piece)) {
      return false
    }

    /* check for piece */
    if (SYMBOLS.indexOf(piece.type.toLowerCase()) === -1) {
      return false
    }

    /* check for valid square */
    if (!(square in SQUARE_MAP)) {
      return false
    }

    var sq = SQUARE_MAP[square]

    /* don't let the user place more than one king */
    if (
      piece.type == KING &&
      !(kings[piece.color] == EMPTY || kings[piece.color] == sq)
    ) {
      return false
    }

    board[sq] = { type: piece.type, color: piece.color }
    if (piece.type === KING) {
      kings[piece.color] = sq
    }

    update_setup(generate_fen())

    return true
  }

  function remove(square) {
    var piece = get(square)
    board[SQUARE_MAP[square]] = null
    if (piece && piece.type === KING) {
      kings[piece.color] = EMPTY
    }

    update_setup(generate_fen())

    return piece
  }

  function build_move(board, from, to, flags, promotion) {
    var move = {
      color: turn,
      from: from,
      to: to,
      flags: flags,
      piece: board[from].type,
    }

    if (promotion) {
      move.flags |= BITS.PROMOTION
      move.promotion = promotion
    }

    if (board[to]) {
      move.captured = board[to].type
    } else if (flags & BITS.EP_CAPTURE) {
      move.captured = PAWN
    }
    return move
  }

  function generate_moves(options) {
    function add_move(board, moves, from, to, flags) {
      /* if pawn promotion */
      if (
        board[from].type === PAWN &&
        (rank(to) === RANK_8 || rank(to) === RANK_1)
      ) {
        var pieces = [QUEEN, ROOK, BISHOP, KNIGHT]
        for (var i = 0, len = pieces.length; i < len; i++) {
          moves.push(build_move(board, from, to, flags, pieces[i]))
        }
      } else {
        moves.push(build_move(board, from, to, flags))
      }
    }

    var moves = []
    var us = turn
    var them = swap_color(us)
    var second_rank = { b: RANK_7, w: RANK_2 }

    var first_sq = SQUARE_MAP.a8
    var last_sq = SQUARE_MAP.h1
    var single_square = false

    /* do we want legal moves? */
    var legal =
      typeof options !== 'undefined' && 'legal' in options
        ? options.legal
        : true

    var piece_type =
      typeof options !== 'undefined' &&
      'piece' in options &&
      typeof options.piece === 'string'
        ? options.piece.toLowerCase()
        : true

    /* are we generating moves for a single square? */
    if (typeof options !== 'undefined' && 'square' in options) {
      if (options.square in SQUARE_MAP) {
        first_sq = last_sq = SQUARE_MAP[options.square]
        single_square = true
      } else {
        /* invalid square */
        return []
      }
    }

    for (var i = first_sq; i <= last_sq; i++) {
      /* did we run off the end of the board */
      if (i & 0x88) {
        i += 7
        continue
      }

      var piece = board[i]
      if (piece == null || piece.color !== us) {
        continue
      }

      if (piece.type === PAWN && (piece_type === true || piece_type === PAWN)) {
        /* single square, non-capturing */
        var square = i + PAWN_OFFSETS[us][0]
        if (board[square] == null) {
          add_move(board, moves, i, square, BITS.NORMAL)

          /* double square */
          var square = i + PAWN_OFFSETS[us][1]
          if (second_rank[us] === rank(i) && board[square] == null) {
            add_move(board, moves, i, square, BITS.BIG_PAWN)
          }
        }

        /* pawn captures */
        for (j = 2; j < 4; j++) {
          var square = i + PAWN_OFFSETS[us][j]
          if (square & 0x88) continue

          if (board[square] != null && board[square].color === them) {
            add_move(board, moves, i, square, BITS.CAPTURE)
          } else if (square === ep_square) {
            add_move(board, moves, i, ep_square, BITS.EP_CAPTURE)
          }
        }
      } else if (piece_type === true || piece_type === piece.type) {
        for (var j = 0, len = PIECE_OFFSETS[piece.type].length; j < len; j++) {
          var offset = PIECE_OFFSETS[piece.type][j]
          var square = i

          while (true) {
            square += offset
            if (square & 0x88) break

            if (board[square] == null) {
              add_move(board, moves, i, square, BITS.NORMAL)
            } else {
              if (board[square].color === us) break
              add_move(board, moves, i, square, BITS.CAPTURE)
              break
            }

            /* break, if knight or king */
            if (piece.type === 'n' || piece.type === 'k') break
          }
        }
      }
    }

    /* check for castling if: a) we're generating all moves, or b) we're doing
     * single square move generation on the king's square
     */
    if (piece_type === true || piece_type === KING) {
      if (!single_square || last_sq === kings[us]) {
        /* king-side castling */
        if (castling[us] & BITS.KSIDE_CASTLE) {
          var castling_from = kings[us]
          var castling_to = castling_from + 2

          if (
            board[castling_from + 1] == null &&
            board[castling_to] == null &&
            !attacked(them, kings[us]) &&
            !attacked(them, castling_from + 1) &&
            !attacked(them, castling_to)
          ) {
            add_move(board, moves, kings[us], castling_to, BITS.KSIDE_CASTLE)
          }
        }

        /* queen-side castling */
        if (castling[us] & BITS.QSIDE_CASTLE) {
          var castling_from = kings[us]
          var castling_to = castling_from - 2

          if (
            board[castling_from - 1] == null &&
            board[castling_from - 2] == null &&
            board[castling_from - 3] == null &&
            !attacked(them, kings[us]) &&
            !attacked(them, castling_from - 1) &&
            !attacked(them, castling_to)
          ) {
            add_move(board, moves, kings[us], castling_to, BITS.QSIDE_CASTLE)
          }
        }
      }
    }

    /* return all pseudo-legal moves (this includes moves that allow the king
     * to be captured)
     */
    if (!legal) {
      return moves
    }

    /* filter out illegal moves */
    var legal_moves = []
    for (var i = 0, len = moves.length; i < len; i++) {
      make_move(moves[i])
      if (!king_attacked(us)) {
        legal_moves.push(moves[i])
      }
      undo_move()
    }

    return legal_moves
  }

  /* convert a move from 0x88 coordinates to Standard Algebraic Notation
   * (SAN)
   *
   * @param {boolean} sloppy Use the sloppy SAN generator to work around over
   * disambiguation bugs in Fritz and Chessbase.  See below:
   *
   * r1bqkbnr/ppp2ppp/2n5/1B1pP3/4P3/8/PPPP2PP/RNBQK1NR b KQkq - 2 4
   * 4. ... Nge7 is overly disambiguated because the knight on c6 is pinned
   * 4. ... Ne7 is technically the valid SAN
   */
  function move_to_san(move, moves) {
    var output = ''

    if (move.flags & BITS.KSIDE_CASTLE) {
      output = 'O-O'
    } else if (move.flags & BITS.QSIDE_CASTLE) {
      output = 'O-O-O'
    } else {
      if (move.piece !== PAWN) {
        var disambiguator = get_disambiguator(move, moves)
        output += move.piece.toUpperCase() + disambiguator
      }

      if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {
        if (move.piece === PAWN) {
          output += algebraic(move.from)[0]
        }
        output += 'x'
      }

      output += algebraic(move.to)

      if (move.flags & BITS.PROMOTION) {
        output += '=' + move.promotion.toUpperCase()
      }
    }

    make_move(move)
    if (in_check()) {
      if (in_checkmate()) {
        output += '#'
      } else {
        output += '+'
      }
    }
    undo_move()

    return output
  }

  function attacked(color, square) {
    for (var i = SQUARE_MAP.a8; i <= SQUARE_MAP.h1; i++) {
      /* did we run off the end of the board */
      if (i & 0x88) {
        i += 7
        continue
      }

      /* if empty square or wrong color */
      if (board[i] == null || board[i].color !== color) continue

      var piece = board[i]
      var difference = i - square
      var index = difference + 119

      if (ATTACKS[index] & (1 << SHIFTS[piece.type])) {
        if (piece.type === PAWN) {
          if (difference > 0) {
            if (piece.color === WHITE) return true
          } else {
            if (piece.color === BLACK) return true
          }
          continue
        }

        /* if the piece is a knight or a king */
        if (piece.type === 'n' || piece.type === 'k') return true

        var offset = RAYS[index]
        var j = i + offset

        var blocked = false
        while (j !== square) {
          if (board[j] != null) {
            blocked = true
            break
          }
          j += offset
        }

        if (!blocked) return true
      }
    }

    return false
  }

  function king_attacked(color) {
    return attacked(swap_color(color), kings[color])
  }

  function in_check() {
    return king_attacked(turn)
  }

  function in_checkmate() {
    return in_check() && generate_moves().length === 0
  }

  function in_stalemate() {
    return !in_check() && generate_moves().length === 0
  }

  function insufficient_material() {
    var pieces = {}
    var bishops = []
    var num_pieces = 0
    var sq_color = 0

    for (var i = SQUARE_MAP.a8; i <= SQUARE_MAP.h1; i++) {
      sq_color = (sq_color + 1) % 2
      if (i & 0x88) {
        i += 7
        continue
      }

      var piece = board[i]
      if (piece) {
        pieces[piece.type] = piece.type in pieces ? pieces[piece.type] + 1 : 1
        if (piece.type === BISHOP) {
          bishops.push(sq_color)
        }
        num_pieces++
      }
    }

    /* k vs. k */
    if (num_pieces === 2) {
      return true
    } else if (
      /* k vs. kn .... or .... k vs. kb */
      num_pieces === 3 &&
      (pieces[BISHOP] === 1 || pieces[KNIGHT] === 1)
    ) {
      return true
    } else if (num_pieces === pieces[BISHOP] + 2) {
      /* kb vs. kb where any number of bishops are all on the same color */
      var sum = 0
      var len = bishops.length
      for (var i = 0; i < len; i++) {
        sum += bishops[i]
      }
      if (sum === 0 || sum === len) {
        return true
      }
    }

    return false
  }

  function in_threefold_repetition() {
    /* TODO: while this function is fine for casual use, a better
     * implementation would use a Zobrist key (instead of FEN). the
     * Zobrist key would be maintained in the make_move/undo_move functions,
     * avoiding the costly that we do below.
     */
    var moves = []
    var positions = {}
    var repetition = false

    while (true) {
      var move = undo_move()
      if (!move) break
      moves.push(move)
    }

    while (true) {
      /* remove the last two fields in the FEN string, they're not needed
       * when checking for draw by rep */
      var fen = generate_fen().split(' ').slice(0, 4).join(' ')

      /* has the position occurred three or move times */
      positions[fen] = fen in positions ? positions[fen] + 1 : 1
      if (positions[fen] >= 3) {
        repetition = true
      }

      if (!moves.length) {
        break
      }
      make_move(moves.pop())
    }

    return repetition
  }

  function push(move) {
    history.push({
      move: move,
      kings: { b: kings.b, w: kings.w },
      turn: turn,
      castling: { b: castling.b, w: castling.w },
      ep_square: ep_square,
      half_moves: half_moves,
      move_number: move_number,
    })
  }

  function make_move(move) {
    var us = turn
    var them = swap_color(us)
    push(move)

    board[move.to] = board[move.from]
    board[move.from] = null

    /* if ep capture, remove the captured pawn */
    if (move.flags & BITS.EP_CAPTURE) {
      if (turn === BLACK) {
        board[move.to - 16] = null
      } else {
        board[move.to + 16] = null
      }
    }

    /* if pawn promotion, replace with new piece */
    if (move.flags & BITS.PROMOTION) {
      board[move.to] = { type: move.promotion, color: us }
    }

    /* if we moved the king */
    if (board[move.to].type === KING) {
      kings[board[move.to].color] = move.to

      /* if we castled, move the rook next to the king */
      if (move.flags & BITS.KSIDE_CASTLE) {
        var castling_to = move.to - 1
        var castling_from = move.to + 1
        board[castling_to] = board[castling_from]
        board[castling_from] = null
      } else if (move.flags & BITS.QSIDE_CASTLE) {
        var castling_to = move.to + 1
        var castling_from = move.to - 2
        board[castling_to] = board[castling_from]
        board[castling_from] = null
      }

      /* turn off castling */
      castling[us] = ''
    }

    /* turn off castling if we move a rook */
    if (castling[us]) {
      for (var i = 0, len = ROOKS[us].length; i < len; i++) {
        if (
          move.from === ROOKS[us][i].square &&
          castling[us] & ROOKS[us][i].flag
        ) {
          castling[us] ^= ROOKS[us][i].flag
          break
        }
      }
    }

    /* turn off castling if we capture a rook */
    if (castling[them]) {
      for (var i = 0, len = ROOKS[them].length; i < len; i++) {
        if (
          move.to === ROOKS[them][i].square &&
          castling[them] & ROOKS[them][i].flag
        ) {
          castling[them] ^= ROOKS[them][i].flag
          break
        }
      }
    }

    /* if big pawn move, update the en passant square */
    if (move.flags & BITS.BIG_PAWN) {
      if (turn === 'b') {
        ep_square = move.to - 16
      } else {
        ep_square = move.to + 16
      }
    } else {
      ep_square = EMPTY
    }

    /* reset the 50 move counter if a pawn is moved or a piece is captured */
    if (move.piece === PAWN) {
      half_moves = 0
    } else if (move.flags & (BITS.CAPTURE | BITS.EP_CAPTURE)) {
      half_moves = 0
    } else {
      half_moves++
    }

    if (turn === BLACK) {
      move_number++
    }
    turn = swap_color(turn)
  }

  function undo_move() {
    var old = history.pop()
    if (old == null) {
      return null
    }

    var move = old.move
    kings = old.kings
    turn = old.turn
    castling = old.castling
    ep_square = old.ep_square
    half_moves = old.half_moves
    move_number = old.move_number

    var us = turn
    var them = swap_color(turn)

    board[move.from] = board[move.to]
    board[move.from].type = move.piece // to undo any promotions
    board[move.to] = null

    if (move.flags & BITS.CAPTURE) {
      board[move.to] = { type: move.captured, color: them }
    } else if (move.flags & BITS.EP_CAPTURE) {
      var index
      if (us === BLACK) {
        index = move.to - 16
      } else {
        index = move.to + 16
      }
      board[index] = { type: PAWN, color: them }
    }

    if (move.flags & (BITS.KSIDE_CASTLE | BITS.QSIDE_CASTLE)) {
      var castling_to, castling_from
      if (move.flags & BITS.KSIDE_CASTLE) {
        castling_to = move.to + 1
        castling_from = move.to - 1
      } else if (move.flags & BITS.QSIDE_CASTLE) {
        castling_to = move.to - 2
        castling_from = move.to + 1
      }

      board[castling_to] = board[castling_from]
      board[castling_from] = null
    }

    return move
  }

  // convert a move from Standard Algebraic Notation (SAN) to 0x88 coordinates
  function move_from_san(move, sloppy) {
    // strip off any move decorations: e.g Nf3+?! becomes Nf3
    var clean_move = stripped_san(move)

    // the move parsers is a 2-step state
    for (var parser = 0; parser < 2; parser++) {
      if (parser == PARSER_SLOPPY) {
        // only run the sloppy parse if explicitly requested
        if (!sloppy) {
          return null
        }

        // The sloppy parser allows the user to parse non-standard chess
        // notations. This parser is opt-in (by specifying the
        // '{ sloppy: true }' setting) and is only run after the Standard
        // Algebraic Notation (SAN) parser has failed.
        //
        // When running the sloppy parser, we'll run a regex to grab the piece,
        // the to/from square, and an optional promotion piece. This regex will
        // parse common non-standard notation like: Pe2-e4, Rc1c4, Qf3xf7,
        // f7f8q, b1c3

        // NOTE: Some positions and moves may be ambiguous when using the
        // sloppy parser. For example, in this position:
        // 6k1/8/8/B7/8/8/8/BN4K1 w - - 0 1, the move b1c3 may be interpreted
        // as Nc3 or B1c3 (a disambiguated bishop move). In these cases, the
        // sloppy parser will default to the most most basic interpretation
        // (which is b1c3 parsing to Nc3).

        // FIXME: these var's are hoisted into function scope, this will need
        // to change when switching to const/let

        var overly_disambiguated = false

        var matches = clean_move.match(
          /([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/
        )
        if (matches) {
          var piece = matches[1]
          var from = matches[2]
          var to = matches[3]
          var promotion = matches[4]

          if (from.length == 1) {
            overly_disambiguated = true
          }
        } else {
          // The [a-h]?[1-8]? portion of the regex below handles moves that may
          // be overly disambiguated (e.g. Nge7 is unnecessary and non-standard
          // when there is one legal knight move to e7). In this case, the value
          // of 'from' variable will be a rank or file, not a square.
          var matches = clean_move.match(
            /([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/
          )

          if (matches) {
            var piece = matches[1]
            var from = matches[2]
            var to = matches[3]
            var promotion = matches[4]

            if (from.length == 1) {
              var overly_disambiguated = true
            }
          }
        }
      }

      var piece_type = infer_piece_type(clean_move)
      var moves = generate_moves({
        legal: true,
        piece: piece ? piece : piece_type,
      })

      for (var i = 0, len = moves.length; i < len; i++) {
        switch (parser) {
          case PARSER_STRICT: {
            if (clean_move === stripped_san(move_to_san(moves[i], moves))) {
              return moves[i]
            }
            break
          }
          case PARSER_SLOPPY: {
            if (matches) {
              // hand-compare move properties with the results from our sloppy
              // regex
              if (
                (!piece || piece.toLowerCase() == moves[i].piece) &&
                SQUARE_MAP[from] == moves[i].from &&
                SQUARE_MAP[to] == moves[i].to &&
                (!promotion || promotion.toLowerCase() == moves[i].promotion)
              ) {
                return moves[i]
              } else if (overly_disambiguated) {
                // SPECIAL CASE: we parsed a move string that may have an
                // unneeded rank/file disambiguator (e.g. Nge7).  The 'from'
                // variable will
                var square = algebraic(moves[i].from)
                if (
                  (!piece || piece.toLowerCase() == moves[i].piece) &&
                  SQUARE_MAP[to] == moves[i].to &&
                  (from == square[0] || from == square[1]) &&
                  (!promotion || promotion.toLowerCase() == moves[i].promotion)
                ) {
                  return moves[i]
                }
              }
            }
          }
        }
      }
    }

    return null
  }

  /* pretty = external move object */
  function make_pretty(ugly_move) {
    var move = clone(ugly_move)
    move.san = move_to_san(move, generate_moves({ legal: true }))
    move.to = algebraic(move.to)
    move.from = algebraic(move.from)

    var flags = ''

    for (var flag in BITS) {
      if (BITS[flag] & move.flags) {
        flags += FLAGS[flag]
      }
    }
    move.flags = flags

    return move
  }

  /*****************************************************************************
   * DEBUGGING UTILITIES
   ****************************************************************************/
  function perft(depth) {
    var moves = generate_moves({ legal: false })
    var nodes = 0
    var color = turn

    for (var i = 0, len = moves.length; i < len; i++) {
      make_move(moves[i])
      if (!king_attacked(color)) {
        if (depth - 1 > 0) {
          var child_nodes = perft(depth - 1)
          nodes += child_nodes
        } else {
          nodes++
        }
      }
      undo_move()
    }

    return nodes
  }

  return {
    /***************************************************************************
     * PUBLIC API
     **************************************************************************/
    load: function (fen) {
      return load(fen)
    },

    reset: function () {
      return reset()
    },

    moves: function (options) {
      /* The internal representation of a chess move is in 0x88 format, and
       * not meant to be human-readable.  The code below converts the 0x88
       * square coordinates to algebraic coordinates.  It also prunes an
       * unnecessary move keys resulting from a verbose call.
       */

      var ugly_moves = generate_moves(options)
      var moves = []

      for (var i = 0, len = ugly_moves.length; i < len; i++) {
        /* does the user want a full move object (most likely not), or just
         * SAN
         */
        if (
          typeof options !== 'undefined' &&
          'verbose' in options &&
          options.verbose
        ) {
          moves.push(make_pretty(ugly_moves[i]))
        } else {
          moves.push(
            move_to_san(ugly_moves[i], generate_moves({ legal: true }))
          )
        }
      }

      return moves
    },

    in_check: function () {
      return in_check()
    },

    in_checkmate: function () {
      return in_checkmate()
    },

    in_stalemate: function () {
      return in_stalemate()
    },

    in_draw: function () {
      return (
        half_moves >= 100 ||
        in_stalemate() ||
        insufficient_material() ||
        in_threefold_repetition()
      )
    },

    insufficient_material: function () {
      return insufficient_material()
    },

    in_threefold_repetition: function () {
      return in_threefold_repetition()
    },

    game_over: function () {
      return (
        half_moves >= 100 ||
        in_checkmate() ||
        in_stalemate() ||
        insufficient_material() ||
        in_threefold_repetition()
      )
    },

    validate_fen: function (fen) {
      return validate_fen(fen)
    },

    fen: function () {
      return generate_fen()
    },

    board: function () {
      var output = [],
        row = []

      for (var i = SQUARE_MAP.a8; i <= SQUARE_MAP.h1; i++) {
        if (board[i] == null) {
          row.push(null)
        } else {
          row.push({
            square: algebraic(i),
            type: board[i].type,
            color: board[i].color,
          })
        }
        if ((i + 1) & 0x88) {
          output.push(row)
          row = []
          i += 8
        }
      }

      return output
    },

    pgn: function (options) {
      /* using the specification from http://www.chessclub.com/help/PGN-spec
       * example for html usage: .pgn({ max_width: 72, newline_char: "<br />" })
       */
      var newline =
        typeof options === 'object' && typeof options.newline_char === 'string'
          ? options.newline_char
          : '\n'
      var max_width =
        typeof options === 'object' && typeof options.max_width === 'number'
          ? options.max_width
          : 0
      var result = []
      var header_exists = false

      /* add the PGN header headerrmation */
      for (var i in header) {
        /* TODO: order of enumerated properties in header object is not
         * guaranteed, see ECMA-262 spec (section 12.6.4)
         */
        result.push('[' + i + ' "' + header[i] + '"]' + newline)
        header_exists = true
      }

      if (header_exists && history.length) {
        result.push(newline)
      }

      var append_comment = function (move_string) {
        var comment = comments[generate_fen()]
        if (typeof comment !== 'undefined') {
          var delimiter = move_string.length > 0 ? ' ' : ''
          move_string = `${move_string}${delimiter}{${comment}}`
        }
        return move_string
      }

      /* pop all of history onto reversed_history */
      var reversed_history = []
      while (history.length > 0) {
        reversed_history.push(undo_move())
      }

      var moves = []
      var move_string = ''

      /* special case of a commented starting position with no moves */
      if (reversed_history.length === 0) {
        moves.push(append_comment(''))
      }

      /* build the list of moves.  a move_string looks like: "3. e3 e6" */
      while (reversed_history.length > 0) {
        move_string = append_comment(move_string)
        var move = reversed_history.pop()

        /* if the position started with black to move, start PGN with 1. ... */
        if (!history.length && move.color === 'b') {
          move_string = move_number + '. ...'
        } else if (move.color === 'w') {
          /* store the previous generated move_string if we have one */
          if (move_string.length) {
            moves.push(move_string)
          }
          move_string = move_number + '.'
        }

        move_string =
          move_string + ' ' + move_to_san(move, generate_moves({ legal: true }))
        make_move(move)
      }

      /* are there any other leftover moves? */
      if (move_string.length) {
        moves.push(append_comment(move_string))
      }

      /* is there a result? */
      if (typeof header.Result !== 'undefined') {
        moves.push(header.Result)
      }

      /* history should be back to what it was before we started generating PGN,
       * so join together moves
       */
      if (max_width === 0) {
        return result.join('') + moves.join(' ')
      }

      var strip = function () {
        if (result.length > 0 && result[result.length - 1] === ' ') {
          result.pop()
          return true
        }
        return false
      }

      /* NB: this does not preserve comment whitespace. */
      var wrap_comment = function (width, move) {
        for (var token of move.split(' ')) {
          if (!token) {
            continue
          }
          if (width + token.length > max_width) {
            while (strip()) {
              width--
            }
            result.push(newline)
            width = 0
          }
          result.push(token)
          width += token.length
          result.push(' ')
          width++
        }
        if (strip()) {
          width--
        }
        return width
      }

      /* wrap the PGN output at max_width */
      var current_width = 0
      for (var i = 0; i < moves.length; i++) {
        if (current_width + moves[i].length > max_width) {
          if (moves[i].includes('{')) {
            current_width = wrap_comment(current_width, moves[i])
            continue
          }
        }
        /* if the current move will push past max_width */
        if (current_width + moves[i].length > max_width && i !== 0) {
          /* don't end the line with whitespace */
          if (result[result.length - 1] === ' ') {
            result.pop()
          }

          result.push(newline)
          current_width = 0
        } else if (i !== 0) {
          result.push(' ')
          current_width++
        }
        result.push(moves[i])
        current_width += moves[i].length
      }

      return result.join('')
    },

    load_pgn: function (pgn, options) {
      // allow the user to specify the sloppy move parser to work around over
      // disambiguation bugs in Fritz and Chessbase
      var sloppy =
        typeof options !== 'undefined' && 'sloppy' in options
          ? options.sloppy
          : false

      function mask(str) {
        return str.replace(/\\/g, '\\')
      }

      function has_keys(object) {
        for (var key in object) {
          return true
        }
        return false
      }

      function parse_pgn_header(header, options) {
        var newline_char =
          typeof options === 'object' &&
          typeof options.newline_char === 'string'
            ? options.newline_char
            : '\r?\n'
        var header_obj = {}
        var headers = header.split(new RegExp(mask(newline_char)))
        var key = ''
        var value = ''

        for (var i = 0; i < headers.length; i++) {
          key = headers[i].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/, '$1')
          value = headers[i].replace(/^\[[A-Za-z]+\s"(.*)"\ *\]$/, '$1')
          if (trim(key).length > 0) {
            header_obj[key] = value
          }
        }

        return header_obj
      }

      var newline_char =
        typeof options === 'object' && typeof options.newline_char === 'string'
          ? options.newline_char
          : '\r?\n'

      // RegExp to split header. Takes advantage of the fact that header and movetext
      // will always have a blank line between them (ie, two newline_char's).
      // With default newline_char, will equal: /^(\[((?:\r?\n)|.)*\])(?:\r?\n){2}/
      var header_regex = new RegExp(
        '^(\\[((?:' +
          mask(newline_char) +
          ')|.)*\\])' +
          '(?:' +
          mask(newline_char) +
          '){2}'
      )

      // If no header given, begin with moves.
      var header_string = header_regex.test(pgn)
        ? header_regex.exec(pgn)[1]
        : ''

      // Put the board in the starting position
      reset()

      /* parse PGN header */
      var headers = parse_pgn_header(header_string, options)
      for (var key in headers) {
        set_header([key, headers[key]])
      }

      /* load the starting position indicated by [Setup '1'] and
       * [FEN position] */
      if (headers['SetUp'] === '1') {
        if (!('FEN' in headers && load(headers['FEN'], true))) {
          // second argument to load: don't clear the headers
          return false
        }
      }

      /* NB: the regexes below that delete move numbers, recursive
       * annotations, and numeric annotation glyphs may also match
       * text in comments. To prevent this, we transform comments
       * by hex-encoding them in place and decoding them again after
       * the other tokens have been deleted.
       *
       * While the spec states that PGN files should be ASCII encoded,
       * we use {en,de}codeURIComponent here to support arbitrary UTF8
       * as a convenience for modern users */

      var to_hex = function (string) {
        return Array.from(string)
          .map(function (c) {
            /* encodeURI doesn't transform most ASCII characters,
             * so we handle these ourselves */
            return c.charCodeAt(0) < 128
              ? c.charCodeAt(0).toString(16)
              : encodeURIComponent(c).replace(/\%/g, '').toLowerCase()
          })
          .join('')
      }

      var from_hex = function (string) {
        return string.length == 0
          ? ''
          : decodeURIComponent('%' + string.match(/.{1,2}/g).join('%'))
      }

      var encode_comment = function (string) {
        string = string.replace(new RegExp(mask(newline_char), 'g'), ' ')
        return `{${to_hex(string.slice(1, string.length - 1))}}`
      }

      var decode_comment = function (string) {
        if (string.startsWith('{') && string.endsWith('}')) {
          return from_hex(string.slice(1, string.length - 1))
        }
      }

      /* delete header to get the moves */
      var ms = pgn
        .replace(header_string, '')
        .replace(
          /* encode comments so they don't get deleted below */
          new RegExp(`(\{[^}]*\})+?|;([^${mask(newline_char)}]*)`, 'g'),
          function (match, bracket, semicolon) {
            return bracket !== undefined
              ? encode_comment(bracket)
              : ' ' + encode_comment(`{${semicolon.slice(1)}}`)
          }
        )
        .replace(new RegExp(mask(newline_char), 'g'), ' ')

      /* delete recursive annotation variations */
      var rav_regex = /(\([^\(\)]+\))+?/g
      while (rav_regex.test(ms)) {
        ms = ms.replace(rav_regex, '')
      }

      /* delete move numbers */
      ms = ms.replace(/\d+\.(\.\.)?/g, '')

      /* delete ... indicating black to move */
      ms = ms.replace(/\.\.\./g, '')

      /* delete numeric annotation glyphs */
      ms = ms.replace(/\$\d+/g, '')

      /* trim and get array of moves */
      var moves = trim(ms).split(new RegExp(/\s+/))

      /* delete empty entries */
      moves = moves.join(',').replace(/,,+/g, ',').split(',')
      var move = ''

      var result = ''

      for (var half_move = 0; half_move < moves.length; half_move++) {
        var comment = decode_comment(moves[half_move])
        if (comment !== undefined) {
          comments[generate_fen()] = comment
          continue
        }

        move = move_from_san(moves[half_move], sloppy)

        /* invalid move */
        if (move == null) {
          /* was the move an end of game marker */
          if (TERMINATION_MARKERS.indexOf(moves[half_move]) > -1) {
            result = moves[half_move]
          } else {
            return false
          }
        } else {
          /* reset the end of game marker if making a valid move */
          result = ''
          make_move(move)
        }
      }

      /* Per section 8.2.6 of the PGN spec, the Result tag pair must match
       * match the termination marker. Only do this when headers are present,
       * but the result tag is missing
       */
      if (result && Object.keys(header).length && !header['Result']) {
        set_header(['Result', result])
      }

      return true
    },

    header: function () {
      return set_header(arguments)
    },

    turn: function () {
      return turn
    },

    move: function (move, options) {
      /* The move function can be called with in the following parameters:
       *
       * .move('Nxb7')      <- where 'move' is a case-sensitive SAN string
       *
       * .move({ from: 'h7', <- where the 'move' is a move object (additional
       *         to :'h8',      fields are ignored)
       *         promotion: 'q',
       *      })
       */

      // allow the user to specify the sloppy move parser to work around over
      // disambiguation bugs in Fritz and Chessbase
      var sloppy =
        typeof options !== 'undefined' && 'sloppy' in options
          ? options.sloppy
          : false

      var move_obj = null

      if (typeof move === 'string') {
        move_obj = move_from_san(move, sloppy)
      } else if (typeof move === 'object') {
        var moves = generate_moves()

        /* convert the pretty move object to an ugly move object */
        for (var i = 0, len = moves.length; i < len; i++) {
          if (
            move.from === algebraic(moves[i].from) &&
            move.to === algebraic(moves[i].to) &&
            (!('promotion' in moves[i]) ||
              move.promotion === moves[i].promotion)
          ) {
            move_obj = moves[i]
            break
          }
        }
      }

      /* failed to find move */
      if (!move_obj) {
        return null
      }

      /* need to make a copy of move because we can't generate SAN after the
       * move is made
       */
      var pretty_move = make_pretty(move_obj)

      make_move(move_obj)

      return pretty_move
    },

    undo: function () {
      var move = undo_move()
      return move ? make_pretty(move) : null
    },

    clear: function () {
      return clear()
    },

    put: function (piece, square) {
      return put(piece, square)
    },

    get: function (square) {
      return get(square)
    },

    ascii() {
      var s = '   +------------------------+\n'
      for (var i = SQUARE_MAP.a8; i <= SQUARE_MAP.h1; i++) {
        /* display the rank */
        if (file(i) === 0) {
          s += ' ' + '87654321'[rank(i)] + ' |'
        }

        /* empty piece */
        if (board[i] == null) {
          s += ' . '
        } else {
          var piece = board[i].type
          var color = board[i].color
          var symbol =
            color === WHITE ? piece.toUpperCase() : piece.toLowerCase()
          s += ' ' + symbol + ' '
        }

        if ((i + 1) & 0x88) {
          s += '|\n'
          i += 8
        }
      }
      s += '   +------------------------+\n'
      s += '     a  b  c  d  e  f  g  h'

      return s
    },

    remove: function (square) {
      return remove(square)
    },

    perft: function (depth) {
      return perft(depth)
    },

    square_color: function (square) {
      if (square in SQUARE_MAP) {
        var sq_0x88 = SQUARE_MAP[square]
        return (rank(sq_0x88) + file(sq_0x88)) % 2 === 0 ? 'light' : 'dark'
      }

      return null
    },

    history: function (options) {
      var reversed_history = []
      var move_history = []
      var verbose =
        typeof options !== 'undefined' &&
        'verbose' in options &&
        options.verbose

      while (history.length > 0) {
        reversed_history.push(undo_move())
      }

      while (reversed_history.length > 0) {
        var move = reversed_history.pop()
        if (verbose) {
          move_history.push(make_pretty(move))
        } else {
          move_history.push(move_to_san(move, generate_moves({ legal: true })))
        }
        make_move(move)
      }

      return move_history
    },

    get_comment: function () {
      return comments[generate_fen()]
    },

    set_comment: function (comment) {
      comments[generate_fen()] = comment.replace('{', '[').replace('}', ']')
    },

    delete_comment: function () {
      var comment = comments[generate_fen()]
      delete comments[generate_fen()]
      return comment
    },

    get_comments: function () {
      prune_comments()
      return Object.keys(comments).map(function (fen) {
        return { fen: fen, comment: comments[fen] }
      })
    },

    delete_comments: function () {
      prune_comments()
      return Object.keys(comments).map(function (fen) {
        var comment = comments[fen]
        delete comments[fen]
        return { fen: fen, comment: comment }
      })
    },
  }
}


/***/ }),

/***/ "./node_modules/peerjs/dist sync recursive":
/*!***************************************!*\
  !*** ./node_modules/peerjs/dist sync ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = function() { return []; };
webpackEmptyContext.resolve = webpackEmptyContext;
module.exports = webpackEmptyContext;
webpackEmptyContext.id = "./node_modules/peerjs/dist sync recursive";

/***/ }),

/***/ "./node_modules/peerjs/dist/peerjs.min.js":
/*!************************************************!*\
  !*** ./node_modules/peerjs/dist/peerjs.min.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var require;parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if( true&&"string"==typeof t)return __webpack_require__("./node_modules/peerjs/dist sync recursive")(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]); true?module.exports=l:undefined}if(parcelRequire=f,i)throw i;return f}({"EgBh":[function(require,module,exports) {
var e={};e.useBlobBuilder=function(){try{return new Blob([]),!1}catch(e){return!0}}(),e.useArrayBufferView=!e.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(e){return!0}}(),module.exports.binaryFeatures=e;var r=module.exports.BlobBuilder;function t(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(r=module.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),t.prototype.append=function(e){"number"==typeof e?this._pieces.push(e):(this.flush(),this._parts.push(e))},t.prototype.flush=function(){if(this._pieces.length>0){var r=new Uint8Array(this._pieces);e.useArrayBufferView||(r=r.buffer),this._parts.push(r),this._pieces=[]}},t.prototype.getBuffer=function(){if(this.flush(),e.useBlobBuilder){for(var t=new r,i=0,u=this._parts.length;i<u;i++)t.append(this._parts[i]);return t.getBlob()}return new Blob(this._parts)},module.exports.BufferBuilder=t;
},{}],"kdPp":[function(require,module,exports) {
var t=require("./bufferbuilder").BufferBuilder,e=require("./bufferbuilder").binaryFeatures,i={unpack:function(t){return new r(t).unpack()},pack:function(t){var e=new n;return e.pack(t),e.getBuffer()}};function r(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function n(){this.bufferBuilder=new t}function u(t){var e=t.charCodeAt(0);return e<=2047?"00":e<=65535?"000":e<=2097151?"0000":e<=67108863?"00000":"000000"}function a(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,u).length}module.exports=i,r.prototype.unpack=function(){var t,e=this.unpack_uint8();if(e<128)return e;if((224^e)<32)return(224^e)-32;if((t=160^e)<=15)return this.unpack_raw(t);if((t=176^e)<=15)return this.unpack_string(t);if((t=144^e)<=15)return this.unpack_array(t);if((t=128^e)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:case 213:case 214:case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}},r.prototype.unpack_uint8=function(){var t=255&this.dataView[this.index];return this.index++,t},r.prototype.unpack_uint16=function(){var t=this.read(2),e=256*(255&t[0])+(255&t[1]);return this.index+=2,e},r.prototype.unpack_uint32=function(){var t=this.read(4),e=256*(256*(256*t[0]+t[1])+t[2])+t[3];return this.index+=4,e},r.prototype.unpack_uint64=function(){var t=this.read(8),e=256*(256*(256*(256*(256*(256*(256*t[0]+t[1])+t[2])+t[3])+t[4])+t[5])+t[6])+t[7];return this.index+=8,e},r.prototype.unpack_int8=function(){var t=this.unpack_uint8();return t<128?t:t-256},r.prototype.unpack_int16=function(){var t=this.unpack_uint16();return t<32768?t:t-65536},r.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)},r.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)},r.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e},r.prototype.unpack_string=function(t){for(var e,i,r=this.read(t),n=0,u="";n<t;)(e=r[n])<128?(u+=String.fromCharCode(e),n++):(192^e)<32?(i=(192^e)<<6|63&r[n+1],u+=String.fromCharCode(i),n+=2):(i=(15&e)<<12|(63&r[n+1])<<6|63&r[n+2],u+=String.fromCharCode(i),n+=3);return this.index+=t,u},r.prototype.unpack_array=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=this.unpack();return e},r.prototype.unpack_map=function(t){for(var e={},i=0;i<t;i++){var r=this.unpack(),n=this.unpack();e[r]=n}return e},r.prototype.unpack_float=function(){var t=this.unpack_uint32(),e=(t>>23&255)-127;return(0===t>>31?1:-1)*(8388607&t|8388608)*Math.pow(2,e-23)},r.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),i=(t>>20&2047)-1023;return(0===t>>31?1:-1)*((1048575&t|1048576)*Math.pow(2,i-20)+e*Math.pow(2,i-52))},r.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")},n.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},n.prototype.pack=function(t){var i=typeof t;if("string"===i)this.pack_string(t);else if("number"===i)Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if("boolean"===i)!0===t?this.bufferBuilder.append(195):!1===t&&this.bufferBuilder.append(194);else if("undefined"===i)this.bufferBuilder.append(192);else{if("object"!==i)throw new Error('Type "'+i+'" not yet supported');if(null===t)this.bufferBuilder.append(192);else{var r=t.constructor;if(r==Array)this.pack_array(t);else if(r==Blob||r==File||t instanceof Blob||t instanceof File)this.pack_bin(t);else if(r==ArrayBuffer)e.useArrayBufferView?this.pack_bin(new Uint8Array(t)):this.pack_bin(t);else if("BYTES_PER_ELEMENT"in t)e.useArrayBufferView?this.pack_bin(new Uint8Array(t.buffer)):this.pack_bin(t.buffer);else if(r==Object||r.toString().startsWith("class"))this.pack_object(t);else if(r==Date)this.pack_string(t.toString());else{if("function"!=typeof t.toBinaryPack)throw new Error('Type "'+r.toString()+'" not yet supported');this.bufferBuilder.append(t.toBinaryPack())}}}this.bufferBuilder.flush()},n.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(e<=15)this.pack_uint8(160+e);else if(e<=65535)this.bufferBuilder.append(218),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(e)}this.bufferBuilder.append(t)},n.prototype.pack_string=function(t){var e=a(t);if(e<=15)this.pack_uint8(176+e);else if(e<=65535)this.bufferBuilder.append(216),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(e)}this.bufferBuilder.append(t)},n.prototype.pack_array=function(t){var e=t.length;if(e<=15)this.pack_uint8(144+e);else if(e<=65535)this.bufferBuilder.append(220),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(e)}for(var i=0;i<e;i++)this.pack(t[i])},n.prototype.pack_integer=function(t){if(t>=-32&&t<=127)this.bufferBuilder.append(255&t);else if(t>=0&&t<=255)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-0x8000000000000000&&t<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(t);else{if(!(t>=0&&t<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(t)}},n.prototype.pack_double=function(t){var e=0;t<0&&(e=1,t=-t);var i=Math.floor(Math.log(t)/Math.LN2),r=t/Math.pow(2,i)-1,n=Math.floor(r*Math.pow(2,52)),u=Math.pow(2,32),a=e<<31|i+1023<<20|n/u&1048575,p=n%u;this.bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(p)},n.prototype.pack_object=function(t){var e=Object.keys(t).length;if(e<=15)this.pack_uint8(128+e);else if(e<=65535)this.bufferBuilder.append(222),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(e)}for(var i in t)t.hasOwnProperty(i)&&(this.pack(i),this.pack(t[i]))},n.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)},n.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_uint32=function(t){var e=4294967295&t;this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},n.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),i=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&i)>>>24),this.bufferBuilder.append((16711680&i)>>>16),this.bufferBuilder.append((65280&i)>>>8),this.bufferBuilder.append(255&i)},n.prototype.pack_int8=function(t){this.bufferBuilder.append(255&t)},n.prototype.pack_int16=function(t){this.bufferBuilder.append((65280&t)>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),i=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&i)>>>24),this.bufferBuilder.append((16711680&i)>>>16),this.bufferBuilder.append((65280&i)>>>8),this.bufferBuilder.append(255&i)};
},{"./bufferbuilder":"EgBh"}],"iSxC":[function(require,module,exports) {
"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractVersion=o,exports.wrapPeerConnectionEvent=i,exports.disableLog=s,exports.disableWarnings=a,exports.log=p,exports.deprecated=u,exports.detectBrowser=c,exports.compactObject=f,exports.walkStats=l,exports.filterStats=v;var n=!0,r=!0;function o(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function i(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return o.apply(this,arguments);var i=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,i),o.apply(this,[e,i])};var i=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(n))return i.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function s(e){return"boolean"!=typeof e?new Error("Argument type: "+t(e)+". Please use a boolean."):(n=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function a(e){return"boolean"!=typeof e?new Error("Argument type: "+t(e)+". Please use a boolean."):(r=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function p(){if("object"===("undefined"==typeof window?"undefined":t(window))){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function u(e,t){r&&console.warn(e+" is deprecated, please use "+t+" instead.")}function c(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=o(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=o(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=o(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=o(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function d(e){return"[object Object]"===Object.prototype.toString.call(e)}function f(t){return d(t)?Object.keys(t).reduce(function(n,r){var o=d(t[r]),i=o?f(t[r]):t[r],s=o&&!Object.keys(i).length;return void 0===i||s?n:Object.assign(n,e({},r,i))},{}):t}function l(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach(function(r){r.endsWith("Id")?l(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(function(t){l(e,e.get(t),n)})}))}function v(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;var i=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)}),i.forEach(function(t){e.forEach(function(n){n.type===r&&n.trackId===t.id&&l(e,n,o)})}),o}
},{}],"s6SN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=i;var e=t(require("../utils.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,t&&t.set(e,o),o}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=e.log;function i(e,r){var t=e&&e.navigator;if(t.mediaDevices){var i=function(e){if("object"!==o(e)||e.mandatory||e.optional)return e;var r={};return Object.keys(e).forEach(function(t){if("require"!==t&&"advanced"!==t&&"mediaSource"!==t){var n="object"===o(e[t])?e[t]:{ideal:e[t]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var i=function(e,r){return e?e+r.charAt(0).toUpperCase()+r.slice(1):"deviceId"===r?"sourceId":r};if(void 0!==n.ideal){r.optional=r.optional||[];var a={};"number"==typeof n.ideal?(a[i("min",t)]=n.ideal,r.optional.push(a),(a={})[i("max",t)]=n.ideal,r.optional.push(a)):(a[i("",t)]=n.ideal,r.optional.push(a))}void 0!==n.exact&&"number"!=typeof n.exact?(r.mandatory=r.mandatory||{},r.mandatory[i("",t)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(r.mandatory=r.mandatory||{},r.mandatory[i(e,t)]=n[e])})}}),e.advanced&&(r.optional=(r.optional||[]).concat(e.advanced)),r},a=function(e,a){if(r.version>=61)return a(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===o(e.audio)){var c=function(e,r,t){r in e&&!(t in e)&&(e[t]=e[r],delete e[r])};c((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),c(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"===o(e.video)){var d=e.video.facingMode;d=d&&("object"===o(d)?d:{ideal:d});var u,s=r.version<66;if(d&&("user"===d.exact||"environment"===d.exact||"user"===d.ideal||"environment"===d.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||s))if(delete e.video.facingMode,"environment"===d.exact||"environment"===d.ideal?u=["back","rear"]:"user"!==d.exact&&"user"!==d.ideal||(u=["front"]),u)return t.mediaDevices.enumerateDevices().then(function(r){var t=(r=r.filter(function(e){return"videoinput"===e.kind})).find(function(e){return u.some(function(r){return e.label.toLowerCase().includes(r)})});return!t&&r.length&&u.includes("back")&&(t=r[r.length-1]),t&&(e.video.deviceId=d.exact?{exact:t.deviceId}:{ideal:t.deviceId}),e.video=i(e.video),n("chrome: "+JSON.stringify(e)),a(e)});e.video=i(e.video)}return n("chrome: "+JSON.stringify(e)),a(e)},c=function(e){return r.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,r,o){a(e,function(e){t.webkitGetUserMedia(e,r,function(e){o&&o(c(e))})})}.bind(t),t.mediaDevices.getUserMedia){var d=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return a(e,function(e){return d(e).then(function(r){if(e.audio&&!r.getAudioTracks().length||e.video&&!r.getVideoTracks().length)throw r.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return r},function(e){return Promise.reject(c(e))})})}}}}
},{"../utils.js":"iSxC"}],"VHa8":[function(require,module,exports) {
"use strict";function e(e,i){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof i?e.navigator.mediaDevices.getDisplayMedia=function(a){return i(a).then(function(i){var t=a.video&&a.video.width,o=a.video&&a.video.height,d=a.video&&a.video.frameRate;return a.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:d||3}},t&&(a.video.mandatory.maxWidth=t),o&&(a.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(a)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;
},{}],"uI5X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimMediaStream=a,exports.shimOnTrack=c,exports.shimGetSendersWithDtmf=p,exports.shimGetStats=d,exports.shimSenderReceiverGetStats=h,exports.shimAddTrackRemoveTrackWithNative=f,exports.shimAddTrackRemoveTrack=m,exports.shimPeerConnection=u,exports.fixNegotiationNeeded=l,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return t.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}});var e=i(require("../utils.js")),t=require("./getusermedia"),r=require("./getdisplaymedia");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function c(t){if("object"!==s(t)||!t.RTCPeerConnection||"ontrack"in t.RTCPeerConnection.prototype)e.wrapPeerConnectionEvent(t,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e});else{Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var r=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._ontrackpoly||(this._ontrackpoly=function(r){r.stream.addEventListener("addtrack",function(n){var i;i=t.RTCPeerConnection.prototype.getReceivers?e.getReceivers().find(function(e){return e.track&&e.track.id===n.track.id}):{track:n.track};var o=new Event("track");o.track=n.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],e.dispatchEvent(o)}),r.stream.getTracks().forEach(function(n){var i;i=t.RTCPeerConnection.prototype.getReceivers?e.getReceivers().find(function(e){return e.track&&e.track.id===n.id}):{track:n};var o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],e.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),r.apply(this,arguments)}}}function p(e){if("object"===s(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var i=r.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach(function(e){r._senders.push(t(r,e))})};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach(function(e){var r=t._senders.find(function(t){return t.track===e});r&&t._senders.splice(t._senders.indexOf(r),1)})}}else if("object"===s(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function d(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,[r,n,i]=arguments;if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var o=function(e){var t={};return e.result().forEach(function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){r[t]=e.stat(t)}),t[r.id]=r}),t},s=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){return t.apply(this,[function(e){n(s(o(e)))},r])}return new Promise(function(r,n){t.apply(e,[function(e){r(s(o(e)))},n])}).then(n,i)}}}function h(t){if("object"===s(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver){if(!("getStats"in t.RTCRtpSender.prototype)){var r=t.RTCPeerConnection.prototype.getSenders;r&&(t.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=r.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t});var n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),t.RTCRtpSender.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(r){return e.filterStats(r,t.track,!0)})}}if(!("getStats"in t.RTCRtpReceiver.prototype)){var i=t.RTCPeerConnection.prototype.getReceivers;i&&(t.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),e.wrapPeerConnectionEvent(t,"track",function(e){return e.receiver._pc=e.srcElement,e}),t.RTCRtpReceiver.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(r){return e.filterStats(r,t.track,!1)})}}if("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype){var o=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){var e,r,n,i=arguments[0];return this.getSenders().forEach(function(t){t.track===i&&(e?n=!0:e=t)}),this.getReceivers().forEach(function(e){return e.track===i&&(r?n=!0:r=e),e.track===i}),n||e&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):e?e.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}}function f(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")});var n=this.getSenders();r.apply(this,arguments);var i=this.getSenders().filter(function(e){return-1===n.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(r){var n=t._shimmedLocalStreams[r].indexOf(e);-1!==n&&t._shimmedLocalStreams[r].splice(n,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]}),i.apply(this,arguments)}}function m(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return f(e);var r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=r.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(function(e){if(r.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}n.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){var n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[r.id];if(o)o.addTrack(t),Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))});else{var s=new e.MediaStream([t]);this._streams[r.id]=s,this._reverseStreams[s.id]=r,this.addStream(s)}return this.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t],n=o({},t,function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[function(r){var n=c(e,r);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(this,arguments).then(function(t){return c(e,t)})});e.RTCPeerConnection.prototype[t]=n[t]});var s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(e=this,t=arguments[0],r=t.sdp,Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:r})),s.apply(this,arguments)):s.apply(this,arguments);var e,t,r};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:c(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach(function(n){r._streams[n].getTracks().find(function(t){return e.track===t})&&(t=r._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function c(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(i.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:r})}}function u(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t],n=o({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=n[t]})}function l(t,r){e.wrapPeerConnectionEvent(t,"negotiationneeded",function(e){var t=e.target;if(!(r.version<72||t.getConfiguration&&"plan-b"===t.getConfiguration().sdpSemantics)||"stable"===t.signalingState)return e})}
},{"../utils.js":"iSxC","./getusermedia":"s6SN","./getdisplaymedia":"VHa8"}],"NZ1C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.filterIceServers=n;var r=t(require("../utils"));function e(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return e=function(){return r},r}function t(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=e();if(t&&t.has(r))return t.get(r);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var f=u?Object.getOwnPropertyDescriptor(r,i):null;f&&(f.get||f.set)?Object.defineProperty(n,i,f):n[i]=r[i]}return n.default=r,t&&t.set(r,n),n}function n(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");var u="string"==typeof t;return u&&(t=[t]),t=t.filter(function(r){if(0===r.indexOf("stun:"))return!1;var e=r.startsWith("turn")&&!r.startsWith("turn:[")&&r.includes("transport=udp");return e&&!n?(n=!0,!0):e&&!n}),delete e.url,e.urls=u?t[0]:t,!!t.length}})}
},{"../utils":"iSxC"}],"YHvh":[function(require,module,exports) {
"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(r){return r.trim().split("\n").map(function(r){return r.trim()})},r.splitSections=function(r){return r.split("\nm=").map(function(r,e){return(e>0?"m="+r:r).trim()+"\r\n"})},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(r){return 0===r.indexOf(t)})},r.parseCandidate=function(r){for(var e,t={foundation:(e=0===r.indexOf("a=candidate:")?r.substring(12).split(" "):r.substring(10).split(" "))[0],component:parseInt(e[1],10),protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],address:e[4],port:parseInt(e[5],10),type:e[7]},a=8;a<e.length;a+=2)switch(e[a]){case"raddr":t.relatedAddress=e[a+1];break;case"rport":t.relatedPort=parseInt(e[a+1],10);break;case"tcptype":t.tcpType=e[a+1];break;case"ufrag":t.ufrag=e[a+1],t.usernameFragment=e[a+1];break;default:t[e[a]]=e[a+1]}return t},r.writeCandidate=function(r){var e=[];e.push(r.foundation),e.push(r.component),e.push(r.protocol.toUpperCase()),e.push(r.priority),e.push(r.address||r.ip),e.push(r.port);var t=r.type;return e.push("typ"),e.push(t),"host"!==t&&r.relatedAddress&&r.relatedPort&&(e.push("raddr"),e.push(r.relatedAddress),e.push("rport"),e.push(r.relatedPort)),r.tcpType&&"tcp"===r.protocol.toLowerCase()&&(e.push("tcptype"),e.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(e.push("ufrag"),e.push(r.usernameFragment||r.ufrag)),"candidate:"+e.join(" ")},r.parseIceOptions=function(r){return r.substr(14).split(" ")},r.parseRtpMap=function(r){var e=r.substr(9).split(" "),t={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),t.name=e[0],t.clockRate=parseInt(e[1],10),t.channels=3===e.length?parseInt(e[2],10):1,t.numChannels=t.channels,t},r.writeRtpMap=function(r){var e=r.payloadType;void 0!==r.preferredPayloadType&&(e=r.preferredPayloadType);var t=r.channels||r.numChannels||1;return"a=rtpmap:"+e+" "+r.name+"/"+r.clockRate+(1!==t?"/"+t:"")+"\r\n"},r.parseExtmap=function(r){var e=r.substr(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1]}},r.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&"sendrecv"!==r.direction?"/"+r.direction:"")+" "+r.uri+"\r\n"},r.parseFmtp=function(r){for(var e,t={},a=r.substr(r.indexOf(" ")+1).split(";"),n=0;n<a.length;n++)t[(e=a[n].trim().split("="))[0].trim()]=e[1];return t},r.writeFmtp=function(r){var e="",t=r.payloadType;if(void 0!==r.preferredPayloadType&&(t=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){var a=[];Object.keys(r.parameters).forEach(function(e){r.parameters[e]?a.push(e+"="+r.parameters[e]):a.push(e)}),e+="a=fmtp:"+t+" "+a.join(";")+"\r\n"}return e},r.parseRtcpFb=function(r){var e=r.substr(r.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},r.writeRtcpFb=function(r){var e="",t=r.payloadType;return void 0!==r.preferredPayloadType&&(t=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(function(r){e+="a=rtcp-fb:"+t+" "+r.type+(r.parameter&&r.parameter.length?" "+r.parameter:"")+"\r\n"}),e},r.parseSsrcMedia=function(r){var e=r.indexOf(" "),t={ssrc:parseInt(r.substr(7,e-7),10)},a=r.indexOf(":",e);return a>-1?(t.attribute=r.substr(e+1,a-e-1),t.value=r.substr(a+1)):t.attribute=r.substr(e+1),t},r.parseSsrcGroup=function(r){var e=r.substr(13).split(" ");return{semantics:e.shift(),ssrcs:e.map(function(r){return parseInt(r,10)})}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(r){var e=r.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(r,e){var t="a=setup:"+e+"\r\n";return r.fingerprints.forEach(function(r){t+="a=fingerprint:"+r.algorithm+" "+r.value+"\r\n"}),t},r.parseCryptoLine=function(r){var e=r.substr(9).split(" ");return{tag:parseInt(e[0],10),cryptoSuite:e[1],keyParams:e[2],sessionParams:e.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(r){if(0!==r.indexOf("inline:"))return null;var e=r.substr(7).split("|");return{keyMethod:"inline",keySalt:e[0],lifeTime:e[1],mkiValue:e[2]?e[2].split(":")[0]:void 0,mkiLength:e[2]?e[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var a=r.matchPrefix(e+t,"a=ice-ufrag:")[0],n=r.matchPrefix(e+t,"a=ice-pwd:")[0];return a&&n?{usernameFragment:a.substr(12),password:n.substr(10)}:null},r.writeIceParameters=function(r){return"a=ice-ufrag:"+r.usernameFragment+"\r\na=ice-pwd:"+r.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=r.splitLines(e)[0].split(" "),n=3;n<a.length;n++){var s=a[n],i=r.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(i){var p=r.parseRtpMap(i),c=r.matchPrefix(e,"a=fmtp:"+s+" ");switch(p.parameters=c.length?r.parseFmtp(c[0]):{},p.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(r.parseRtcpFb),t.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(p.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var a="";a+="m="+e+" ",a+=t.codecs.length>0?"9":"0",a+=" UDP/TLS/RTP/SAVPF ",a+=t.codecs.map(function(r){return void 0!==r.preferredPayloadType?r.preferredPayloadType:r.payloadType}).join(" ")+"\r\n",a+="c=IN IP4 0.0.0.0\r\n",a+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){a+=r.writeRtpMap(e),a+=r.writeFmtp(e),a+=r.writeRtcpFb(e)});var n=0;return t.codecs.forEach(function(r){r.maxptime>n&&(n=r.maxptime)}),n>0&&(a+="a=maxptime:"+n+"\r\n"),a+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){a+=r.writeExtmap(e)}),a},r.parseRtpEncodingParameters=function(e){var t,a=[],n=r.parseRtpParameters(e),s=-1!==n.fecMechanisms.indexOf("RED"),i=-1!==n.fecMechanisms.indexOf("ULPFEC"),p=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"cname"===r.attribute}),c=p.length>0&&p[0].ssrc,o=r.matchPrefix(e,"a=ssrc-group:FID").map(function(r){return r.substr(17).split(" ").map(function(r){return parseInt(r,10)})});o.length>0&&o[0].length>1&&o[0][0]===c&&(t=o[0][1]),n.codecs.forEach(function(r){if("RTX"===r.name.toUpperCase()&&r.parameters.apt){var e={ssrc:c,codecPayloadType:parseInt(r.parameters.apt,10)};c&&t&&(e.rtx={ssrc:t}),a.push(e),s&&((e=JSON.parse(JSON.stringify(e))).fec={ssrc:c,mechanism:i?"red+ulpfec":"red"},a.push(e))}}),0===a.length&&c&&a.push({ssrc:c});var u=r.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,a.forEach(function(r){r.maxBitrate=u})),a},r.parseRtcpParameters=function(e){var t={},a=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"cname"===r.attribute})[0];a&&(t.cname=a.value,t.ssrc=a.ssrc);var n=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=n.length>0,t.compound=0===n.length;var s=r.matchPrefix(e,"a=rtcp-mux");return t.mux=s.length>0,t},r.parseMsid=function(e){var t,a=r.matchPrefix(e,"a=msid:");if(1===a.length)return{stream:(t=a[0].substr(7).split(" "))[0],track:t[1]};var n=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(r){return"msid"===r.attribute});return n.length>0?{stream:(t=n[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,a=r.parseMLine(e),n=r.matchPrefix(e,"a=max-message-size:");n.length>0&&(t=parseInt(n[0].substr(19),10)),isNaN(t)&&(t=65536);var s=r.matchPrefix(e,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:a.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var i=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(i[0],10),protocol:i[1],maxMessageSize:t}}},r.writeSctpDescription=function(r,e){var t=[];return t="DTLS/SCTP"!==r.protocol?["m="+r.kind+" 9 "+r.protocol+" "+e.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+e.port+"\r\n"]:["m="+r.kind+" 9 "+r.protocol+" "+e.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+e.port+" "+e.protocol+" 65535\r\n"],void 0!==e.maxMessageSize&&t.push("a=max-message-size:"+e.maxMessageSize+"\r\n"),t.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,a){var n=void 0!==t?t:2;return"v=0\r\no="+(a||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,a,n){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===a?"actpass":"active"),s+="a=mid:"+e.mid+"\r\n",e.direction?s+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var i="msid:"+n.id+" "+e.rtpSender.track.id+"\r\n";s+="a="+i,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+i,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+i,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s},r.getDirection=function(e,t){for(var a=r.splitLines(e),n=0;n<a.length;n++)switch(a[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[n].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(r){return"0"===r.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),a=0;a<t.length;a++)if(t[a].length<2||"="!==t[a].charAt(1))return!1;return!0},"object"==typeof module&&(module.exports=r);
},{}],"NJ2u":[function(require,module,exports) {
"use strict";var e=require("sdp");function t(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function r(t,r,n,a,i){var s=e.writeRtpDescription(t.kind,r);if(s+=e.writeIceParameters(t.iceGatherer.getLocalParameters()),s+=e.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),s+="a=mid:"+t.mid+"\r\n",t.rtpSender&&t.rtpReceiver?s+="a=sendrecv\r\n":t.rtpSender?s+="a=sendonly\r\n":t.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",t.rtpSender){var o=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=o;var c="msid:"+(a?a.id:"-")+" "+o+"\r\n";s+="a="+c,s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+c,t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+"\r\n",t.rtpSender&&t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+"\r\n"),s}function n(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var a="string"==typeof n;return a&&(n=[n]),n=n.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!r?(r=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")}),delete e.url,e.urls=a?n[0]:n,!!n.length}})}function a(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},a=function(e,t,r,a){var i=n(e.parameters.apt,r),s=n(t.parameters.apt,a);return i&&s&&i.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach(function(n){for(var i=0;i<t.codecs.length;i++){var s=t.codecs[i];if(n.name.toLowerCase()===s.name.toLowerCase()&&n.clockRate===s.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&s.parameters.apt&&!a(n,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(n.numChannels,s.numChannels),r.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var n=0;n<t.headerExtensions.length;n++){var a=t.headerExtensions[n];if(e.uri===a.uri){r.headerExtensions.push(a);break}}}),r}function i(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function s(e,t){var r=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return r||e.addRemoteCandidate(t),!r}function o(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}module.exports=function(c,d){function p(e,t){t.addTrack(e),t.dispatchEvent(new c.MediaStreamTrackEvent("addtrack",{track:e}))}function l(e,t,r,n){var a=new Event("track");a.track=t,a.receiver=r,a.transceiver={receiver:r},a.streams=n,c.setTimeout(function(){e._dispatchEvent("track",a)})}var f=function(t){var r=this,a=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){r[e]=a[e].bind(a)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",t=JSON.parse(JSON.stringify(t||{})),this.usingBundle="max-bundle"===t.bundlePolicy,"negotiate"===t.rtcpMuxPolicy)throw o("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(t.rtcpMuxPolicy||(t.rtcpMuxPolicy="require"),t.iceTransportPolicy){case"all":case"relay":break;default:t.iceTransportPolicy="all"}switch(t.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:t.bundlePolicy="balanced"}if(t.iceServers=n(t.iceServers||[],d),this._iceGatherers=[],t.iceCandidatePoolSize)for(var i=t.iceCandidatePoolSize;i>0;i--)this._iceGatherers.push(new c.RTCIceGatherer({iceServers:t.iceServers,gatherPolicy:t.iceTransportPolicy}));else t.iceCandidatePoolSize=0;this._config=t,this.transceivers=[],this._sdpSessionId=e.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(f.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(f.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),f.prototype.onicecandidate=null,f.prototype.onaddstream=null,f.prototype.ontrack=null,f.prototype.onremovestream=null,f.prototype.onsignalingstatechange=null,f.prototype.oniceconnectionstatechange=null,f.prototype.onconnectionstatechange=null,f.prototype.onicegatheringstatechange=null,f.prototype.onnegotiationneeded=null,f.prototype.ondatachannel=null,f.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},f.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},f.prototype.getConfiguration=function(){return this._config},f.prototype.getLocalStreams=function(){return this.localStreams},f.prototype.getRemoteStreams=function(){return this.remoteStreams},f.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var a=this._createIceAndDtlsTransports();n.iceTransport=a.iceTransport,n.dtlsTransport=a.dtlsTransport}return t||this.transceivers.push(n),n},f.prototype.addTrack=function(e,t){if(this._isClosed)throw o("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find(function(t){return t.track===e}))throw o("InvalidAccessError","Track already exists.");for(var n=0;n<this.transceivers.length;n++)this.transceivers[n].track||this.transceivers[n].kind!==e.kind||(r=this.transceivers[n]);return r||(r=this._createTransceiver(e.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(t)&&this.localStreams.push(t),r.track=e,r.stream=t,r.rtpSender=new c.RTCRtpSender(e,r.dtlsTransport),r.rtpSender},f.prototype.addStream=function(e){var t=this;if(d>=15025)e.getTracks().forEach(function(r){t.addTrack(r,e)});else{var r=e.clone();e.getTracks().forEach(function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),r.getTracks().forEach(function(e){t.addTrack(e,r)})}},f.prototype.removeTrack=function(e){if(this._isClosed)throw o("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(e instanceof c.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var t=this.transceivers.find(function(t){return t.rtpSender===e});if(!t)throw o("InvalidAccessError","Sender was not created by this connection.");var r=t.stream;t.rtpSender.stop(),t.rtpSender=null,t.track=null,t.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},f.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var r=t.getSenders().find(function(t){return t.track===e});r&&t.removeTrack(r)})},f.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},f.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},f.prototype._createIceGatherer=function(e,t){var r=this;if(t&&e>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var n=new c.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(n,"state",{value:"new",writable:!0}),this.transceivers[e].bufferedCandidateEvents=[],this.transceivers[e].bufferCandidates=function(t){var a=!t.candidate||0===Object.keys(t.candidate).length;n.state=a?"completed":"gathering",null!==r.transceivers[e].bufferedCandidateEvents&&r.transceivers[e].bufferedCandidateEvents.push(t)},n.addEventListener("localcandidate",this.transceivers[e].bufferCandidates),n},f.prototype._gather=function(t,r){var n=this,a=this.transceivers[r].iceGatherer;if(!a.onlocalcandidate){var i=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,a.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),a.onlocalcandidate=function(i){if(!(n.usingBundle&&r>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:r};var o=i.candidate,c=!o||0===Object.keys(o).length;if(c)"new"!==a.state&&"gathering"!==a.state||(a.state="completed");else{"new"===a.state&&(a.state="gathering"),o.component=1,o.ufrag=a.getLocalParameters().usernameFragment;var d=e.writeCandidate(o);s.candidate=Object.assign(s.candidate,e.parseCandidate(d)),s.candidate.candidate=d,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var p=e.getMediaSections(n._localDescription.sdp);p[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",n._localDescription.sdp=e.getDescription(n._localDescription.sdp)+p.join("");var l=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),c||n._dispatchEvent("icecandidate",s),l&&(n._dispatchEvent("icecandidate",new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},c.setTimeout(function(){i.forEach(function(e){a.onlocalcandidate(e)})},0)}},f.prototype._createIceAndDtlsTransports=function(){var e=this,t=new c.RTCIceTransport(null);t.onicestatechange=function(){e._updateIceConnectionState(),e._updateConnectionState()};var r=new c.RTCDtlsTransport(t);return r.ondtlsstatechange=function(){e._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),e._updateConnectionState()},{iceTransport:t,dtlsTransport:r}},f.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},f.prototype._transceive=function(t,r,n){var i=a(t.localCapabilities,t.remoteCapabilities);r&&t.rtpSender&&(i.encodings=t.sendEncodingParameters,i.rtcp={cname:e.localCName,compound:t.rtcpParameters.compound},t.recvEncodingParameters.length&&(i.rtcp.ssrc=t.recvEncodingParameters[0].ssrc),t.rtpSender.send(i)),n&&t.rtpReceiver&&i.codecs.length>0&&("video"===t.kind&&t.recvEncodingParameters&&d<15019&&t.recvEncodingParameters.forEach(function(e){delete e.rtx}),t.recvEncodingParameters.length?i.encodings=t.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:t.rtcpParameters.compound},t.rtcpParameters.cname&&(i.rtcp.cname=t.rtcpParameters.cname),t.sendEncodingParameters.length&&(i.rtcp.ssrc=t.sendEncodingParameters[0].ssrc),t.rtpReceiver.receive(i))},f.prototype.setLocalDescription=function(t){var r,n,s=this;if(-1===["offer","answer"].indexOf(t.type))return Promise.reject(o("TypeError",'Unsupported type "'+t.type+'"'));if(!i("setLocalDescription",t.type,s.signalingState)||s._isClosed)return Promise.reject(o("InvalidStateError","Can not set local "+t.type+" in state "+s.signalingState));if("offer"===t.type)r=e.splitSections(t.sdp),n=r.shift(),r.forEach(function(t,r){var n=e.parseRtpParameters(t);s.transceivers[r].localCapabilities=n}),s.transceivers.forEach(function(e,t){s._gather(e.mid,t)});else if("answer"===t.type){r=e.splitSections(s._remoteDescription.sdp),n=r.shift();var c=e.matchPrefix(n,"a=ice-lite").length>0;r.forEach(function(t,r){var i=s.transceivers[r],o=i.iceGatherer,d=i.iceTransport,p=i.dtlsTransport,l=i.localCapabilities,f=i.remoteCapabilities;if(!(e.isRejected(t)&&0===e.matchPrefix(t,"a=bundle-only").length)&&!i.rejected){var u=e.getIceParameters(t,n),v=e.getDtlsParameters(t,n);c&&(v.role="server"),s.usingBundle&&0!==r||(s._gather(i.mid,r),"new"===d.state&&d.start(o,u,c?"controlling":"controlled"),"new"===p.state&&p.start(v));var h=a(l,f);s._transceive(i,h.codecs.length>0,!1)}})}return s._localDescription={type:t.type,sdp:t.sdp},"offer"===t.type?s._updateSignalingState("have-local-offer"):s._updateSignalingState("stable"),Promise.resolve()},f.prototype.setRemoteDescription=function(t){var r=this;if(-1===["offer","answer"].indexOf(t.type))return Promise.reject(o("TypeError",'Unsupported type "'+t.type+'"'));if(!i("setRemoteDescription",t.type,r.signalingState)||r._isClosed)return Promise.reject(o("InvalidStateError","Can not set remote "+t.type+" in state "+r.signalingState));var n={};r.remoteStreams.forEach(function(e){n[e.id]=e});var f=[],u=e.splitSections(t.sdp),v=u.shift(),h=e.matchPrefix(v,"a=ice-lite").length>0,m=e.matchPrefix(v,"a=group:BUNDLE ").length>0;r.usingBundle=m;var g=e.matchPrefix(v,"a=ice-options:")[0];return r.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,u.forEach(function(i,o){var l=e.splitLines(i),u=e.getKind(i),g=e.isRejected(i)&&0===e.matchPrefix(i,"a=bundle-only").length,y=l[0].substr(2).split(" ")[2],S=e.getDirection(i,v),T=e.parseMsid(i),E=e.getMid(i)||e.generateIdentifier();if(g||"application"===u&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))r.transceivers[o]={mid:E,kind:u,protocol:y,rejected:!0};else{var C,P,w,R,_,k,b,x,D;!g&&r.transceivers[o]&&r.transceivers[o].rejected&&(r.transceivers[o]=r._createTransceiver(u,!0));var I,L,M=e.parseRtpParameters(i);g||(I=e.getIceParameters(i,v),(L=e.getDtlsParameters(i,v)).role="client"),b=e.parseRtpEncodingParameters(i);var O=e.parseRtcpParameters(i),G=e.matchPrefix(i,"a=end-of-candidates",v).length>0,j=e.matchPrefix(i,"a=candidate:").map(function(t){return e.parseCandidate(t)}).filter(function(e){return 1===e.component});if(("offer"===t.type||"answer"===t.type)&&!g&&m&&o>0&&r.transceivers[o]&&(r._disposeIceAndDtlsTransports(o),r.transceivers[o].iceGatherer=r.transceivers[0].iceGatherer,r.transceivers[o].iceTransport=r.transceivers[0].iceTransport,r.transceivers[o].dtlsTransport=r.transceivers[0].dtlsTransport,r.transceivers[o].rtpSender&&r.transceivers[o].rtpSender.setTransport(r.transceivers[0].dtlsTransport),r.transceivers[o].rtpReceiver&&r.transceivers[o].rtpReceiver.setTransport(r.transceivers[0].dtlsTransport)),"offer"!==t.type||g){if("answer"===t.type&&!g){P=(C=r.transceivers[o]).iceGatherer,w=C.iceTransport,R=C.dtlsTransport,_=C.rtpReceiver,k=C.sendEncodingParameters,x=C.localCapabilities,r.transceivers[o].recvEncodingParameters=b,r.transceivers[o].remoteCapabilities=M,r.transceivers[o].rtcpParameters=O,j.length&&"new"===w.state&&(!h&&!G||m&&0!==o?j.forEach(function(e){s(C.iceTransport,e)}):w.setRemoteCandidates(j)),m&&0!==o||("new"===w.state&&w.start(P,I,"controlling"),"new"===R.state&&R.start(L)),!a(C.localCapabilities,C.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&C.sendEncodingParameters[0].rtx&&delete C.sendEncodingParameters[0].rtx,r._transceive(C,"sendrecv"===S||"recvonly"===S,"sendrecv"===S||"sendonly"===S),!_||"sendrecv"!==S&&"sendonly"!==S?delete C.rtpReceiver:(D=_.track,T?(n[T.stream]||(n[T.stream]=new c.MediaStream),p(D,n[T.stream]),f.push([D,_,n[T.stream]])):(n.default||(n.default=new c.MediaStream),p(D,n.default),f.push([D,_,n.default])))}}else{(C=r.transceivers[o]||r._createTransceiver(u)).mid=E,C.iceGatherer||(C.iceGatherer=r._createIceGatherer(o,m)),j.length&&"new"===C.iceTransport.state&&(!G||m&&0!==o?j.forEach(function(e){s(C.iceTransport,e)}):C.iceTransport.setRemoteCandidates(j)),x=c.RTCRtpReceiver.getCapabilities(u),d<15019&&(x.codecs=x.codecs.filter(function(e){return"rtx"!==e.name})),k=C.sendEncodingParameters||[{ssrc:1001*(2*o+2)}];var N,A=!1;if("sendrecv"===S||"sendonly"===S){if(A=!C.rtpReceiver,_=C.rtpReceiver||new c.RTCRtpReceiver(C.dtlsTransport,u),A)D=_.track,T&&"-"===T.stream||(T?(n[T.stream]||(n[T.stream]=new c.MediaStream,Object.defineProperty(n[T.stream],"id",{get:function(){return T.stream}})),Object.defineProperty(D,"id",{get:function(){return T.track}}),N=n[T.stream]):(n.default||(n.default=new c.MediaStream),N=n.default)),N&&(p(D,N),C.associatedRemoteMediaStreams.push(N)),f.push([D,_,N])}else C.rtpReceiver&&C.rtpReceiver.track&&(C.associatedRemoteMediaStreams.forEach(function(e){var t,r,n=e.getTracks().find(function(e){return e.id===C.rtpReceiver.track.id});n&&(t=n,(r=e).removeTrack(t),r.dispatchEvent(new c.MediaStreamTrackEvent("removetrack",{track:t})))}),C.associatedRemoteMediaStreams=[]);C.localCapabilities=x,C.remoteCapabilities=M,C.rtpReceiver=_,C.rtcpParameters=O,C.sendEncodingParameters=k,C.recvEncodingParameters=b,r._transceive(r.transceivers[o],!1,A)}}}),void 0===r._dtlsRole&&(r._dtlsRole="offer"===t.type?"active":"passive"),r._remoteDescription={type:t.type,sdp:t.sdp},"offer"===t.type?r._updateSignalingState("have-remote-offer"):r._updateSignalingState("stable"),Object.keys(n).forEach(function(e){var t=n[e];if(t.getTracks().length){if(-1===r.remoteStreams.indexOf(t)){r.remoteStreams.push(t);var a=new Event("addstream");a.stream=t,c.setTimeout(function(){r._dispatchEvent("addstream",a)})}f.forEach(function(e){var n=e[0],a=e[1];t.id===e[2].id&&l(r,n,a,[t])})}}),f.forEach(function(e){e[2]||l(r,e[0],e[1],[])}),c.setTimeout(function(){r&&r.transceivers&&r.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},f.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},f.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},f.prototype._maybeFireNegotiationNeeded=function(){var e=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,c.setTimeout(function(){if(e.needNegotiation){e.needNegotiation=!1;var t=new Event("negotiationneeded");e._dispatchEvent("negotiationneeded",t)}},0))},f.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},f.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},f.prototype.createOffer=function(){var t=this;if(t._isClosed)return Promise.reject(o("InvalidStateError","Can not call createOffer after close"));var n=t.transceivers.filter(function(e){return"audio"===e.kind}).length,a=t.transceivers.filter(function(e){return"video"===e.kind}).length,i=arguments[0];if(i){if(i.mandatory||i.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==i.offerToReceiveAudio&&(n=!0===i.offerToReceiveAudio?1:!1===i.offerToReceiveAudio?0:i.offerToReceiveAudio),void 0!==i.offerToReceiveVideo&&(a=!0===i.offerToReceiveVideo?1:!1===i.offerToReceiveVideo?0:i.offerToReceiveVideo)}for(t.transceivers.forEach(function(e){"audio"===e.kind?--n<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)});n>0||a>0;)n>0&&(t._createTransceiver("audio"),n--),a>0&&(t._createTransceiver("video"),a--);var s=e.writeSessionBoilerplate(t._sdpSessionId,t._sdpSessionVersion++);t.transceivers.forEach(function(r,n){var a=r.track,i=r.kind,s=r.mid||e.generateIdentifier();r.mid=s,r.iceGatherer||(r.iceGatherer=t._createIceGatherer(n,t.usingBundle));var o=c.RTCRtpSender.getCapabilities(i);d<15019&&(o.codecs=o.codecs.filter(function(e){return"rtx"!==e.name})),o.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),o.headerExtensions.forEach(function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var p=r.sendEncodingParameters||[{ssrc:1001*(2*n+1)}];a&&d>=15019&&"video"===i&&!p[0].rtx&&(p[0].rtx={ssrc:p[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new c.RTCRtpReceiver(r.dtlsTransport,i)),r.localCapabilities=o,r.sendEncodingParameters=p}),"max-compat"!==t._config.bundlePolicy&&(s+="a=group:BUNDLE "+t.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n",t.transceivers.forEach(function(n,a){s+=r(n,n.localCapabilities,"offer",n.stream,t._dtlsRole),s+="a=rtcp-rsize\r\n",!n.iceGatherer||"new"===t.iceGatheringState||0!==a&&t.usingBundle||(n.iceGatherer.getLocalCandidates().forEach(function(t){t.component=1,s+="a="+e.writeCandidate(t)+"\r\n"}),"completed"===n.iceGatherer.state&&(s+="a=end-of-candidates\r\n"))});var p=new c.RTCSessionDescription({type:"offer",sdp:s});return Promise.resolve(p)},f.prototype.createAnswer=function(){var t=this;if(t._isClosed)return Promise.reject(o("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==t.signalingState&&"have-local-pranswer"!==t.signalingState)return Promise.reject(o("InvalidStateError","Can not call createAnswer in signalingState "+t.signalingState));var n=e.writeSessionBoilerplate(t._sdpSessionId,t._sdpSessionVersion++);t.usingBundle&&(n+="a=group:BUNDLE "+t.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),n+="a=ice-options:trickle\r\n";var i=e.getMediaSections(t._remoteDescription.sdp).length;t.transceivers.forEach(function(e,s){if(!(s+1>i)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?n+="m=application 0 DTLS/SCTP 5000\r\n":n+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?n+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(n+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(n+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var o;if(e.stream)"audio"===e.kind?o=e.stream.getAudioTracks()[0]:"video"===e.kind&&(o=e.stream.getVideoTracks()[0]),o&&d>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var c=a(e.localCapabilities,e.remoteCapabilities);!c.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,n+=r(e,c,"answer",e.stream,t._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(n+="a=rtcp-rsize\r\n")}});var s=new c.RTCSessionDescription({type:"answer",sdp:n});return Promise.resolve(s)},f.prototype.addIceCandidate=function(t){var r,n=this;return t&&void 0===t.sdpMLineIndex&&!t.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(a,i){if(!n._remoteDescription)return i(o("InvalidStateError","Can not add ICE candidate without a remote description"));if(t&&""!==t.candidate){var c=t.sdpMLineIndex;if(t.sdpMid)for(var d=0;d<n.transceivers.length;d++)if(n.transceivers[d].mid===t.sdpMid){c=d;break}var p=n.transceivers[c];if(!p)return i(o("OperationError","Can not add ICE candidate"));if(p.rejected)return a();var l=Object.keys(t.candidate).length>0?e.parseCandidate(t.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return a();if(l.component&&1!==l.component)return a();if((0===c||c>0&&p.iceTransport!==n.transceivers[0].iceTransport)&&!s(p.iceTransport,l))return i(o("OperationError","Can not add ICE candidate"));var f=t.candidate.trim();0===f.indexOf("a=")&&(f=f.substr(2)),(r=e.getMediaSections(n._remoteDescription.sdp))[c]+="a="+(l.type?f:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=e.getDescription(n._remoteDescription.sdp)+r.join("")}else for(var u=0;u<n.transceivers.length&&(n.transceivers[u].rejected||(n.transceivers[u].iceTransport.addRemoteCandidate({}),(r=e.getMediaSections(n._remoteDescription.sdp))[u]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=e.getDescription(n._remoteDescription.sdp)+r.join(""),!n.usingBundle));u++);a()})},f.prototype.getStats=function(e){if(e&&e instanceof c.MediaStreamTrack){var t=null;if(this.transceivers.forEach(function(r){r.rtpSender&&r.rtpSender.track===e?t=r.rtpSender:r.rtpReceiver&&r.rtpReceiver.track===e&&(t=r.rtpReceiver)}),!t)throw o("InvalidAccessError","Invalid selector.");return t.getStats()}var r=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&r.push(e[t].getStats())})}),Promise.all(r).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(e){var r=c[e];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then(function(e){var r=new Map;return Object.keys(e).forEach(function(n){e[n].type=t(e[n]),r.set(n,e[n])}),r})}}});var u=["createOffer","createAnswer"];return u.forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(u=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),f};
},{"sdp":"YHvh"}],"YdKx":[function(require,module,exports) {
"use strict";function e(e){var r=e&&e.navigator,t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return t(e).catch(function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=e;
},{}],"P3bV":[function(require,module,exports) {
"use strict";function e(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;
},{}],"XRic":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimPeerConnection=p,exports.shimReplaceTrack=a,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return n.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}});var e=s(require("../utils")),t=require("./filtericeservers"),r=o(require("rtcpeerconnection-shim")),n=require("./getusermedia"),i=require("./getdisplaymedia");function o(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function p(n,i){if(n.RTCIceGatherer&&(n.RTCIceCandidate||(n.RTCIceCandidate=function(e){return e}),n.RTCSessionDescription||(n.RTCSessionDescription=function(e){return e}),i.version<15025)){var o=Object.getOwnPropertyDescriptor(n.MediaStreamTrack.prototype,"enabled");Object.defineProperty(n.MediaStreamTrack.prototype,"enabled",{set:function(e){o.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!n.RTCRtpSender||"dtmf"in n.RTCRtpSender.prototype||Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new n.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),n.RTCDtmfSender&&!n.RTCDTMFSender&&(n.RTCDTMFSender=n.RTCDtmfSender);var c=(0,r.default)(n,i.version);n.RTCPeerConnection=function(r){return r&&r.iceServers&&(r.iceServers=(0,t.filterIceServers)(r.iceServers,i.version),e.log("ICE servers after filtering:",r.iceServers)),new c(r)},n.RTCPeerConnection.prototype=c.prototype}function a(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}
},{"../utils":"iSxC","./filtericeservers":"NZ1C","rtcpeerconnection-shim":"NJ2u","./getusermedia":"YdKx","./getdisplaymedia":"P3bV"}],"GzSv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetUserMedia=n;var e=o(require("../utils"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=t();if(o&&o.has(e))return o.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,o&&o.set(e,r),r}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t,o){var n=t&&t.navigator,i=t&&t.MediaStreamTrack;if(n.getUserMedia=function(t,o,r){e.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(t).then(o,r)},!(o.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var a=function(e,t,o){t in e&&!(o in e)&&(e[o]=e[t],delete e[t])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===r(e)&&"object"===r(e.audio)&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),s(e)},i&&i.prototype.getSettings){var p=i.prototype.getSettings;i.prototype.getSettings=function(){var e=p.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){var u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===r(e)&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[e])}}}}
},{"../utils":"iSxC"}],"UuGU":[function(require,module,exports) {
"use strict";function e(e,i){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(a){if(!a||!a.video){var t=new DOMException("getDisplayMedia without video constraints is undefined");return t.name="NotFoundError",t.code=8,Promise.reject(t)}return!0===a.video?a.video={mediaSource:i}:a.video.mediaSource=i,e.navigator.mediaDevices.getUserMedia(a)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimGetDisplayMedia=e;
},{}],"Fzdr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimOnTrack=s,exports.shimPeerConnection=c,exports.shimSenderGetStats=p,exports.shimReceiverGetStats=u,exports.shimRemoveStream=f,exports.shimRTCDataChannel=d,exports.shimAddTransceiver=C,exports.shimGetParameters=y,exports.shimCreateOffer=l,exports.shimCreateAnswer=m,Object.defineProperty(exports,"shimGetUserMedia",{enumerable:!0,get:function(){return t.shimGetUserMedia}}),Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:!0,get:function(){return n.shimGetDisplayMedia}});var e=o(require("../utils")),t=require("./getusermedia"),n=require("./getdisplaymedia");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){"object"===a(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function c(e,t){if("object"===a(e)&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t],r=i({},t,function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)});e.RTCPeerConnection.prototype[t]=r[t]});var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var[e,o,i]=arguments;return r.apply(this,[e||null]).then(function(e){if(t.version<53&&!o)try{e.forEach(function(e){e.type=n[e.type]||e.type})}catch(r){if("TypeError"!==r.name)throw r;e.forEach(function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(o,i)}}}function p(e){if("object"===a(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach(function(t){return t._pc=e}),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function u(t){if("object"===a(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&!(t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)){var n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=n.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),e.wrapPeerConnectionEvent(t,"track",function(e){return e.receiver._pc=e.srcElement,e}),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function f(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(t){var n=this;e.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(e){e.track&&t.getTracks().includes(e.track)&&n.removeTrack(e)})})}function d(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function C(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach(function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var r=t.apply(this,arguments);if(n){var{sender:o}=r,i=o.getParameters();"encodings"in i&&(1!==i.encodings.length||0!==Object.keys(i.encodings[0]).length)||(i.encodings=e.sendEncodings,o.sendEncodings=e.sendEncodings,this.setParametersPromises.push(o.setParameters(i).then(function(){delete o.sendEncodings}).catch(function(){delete o.sendEncodings})))}return r})}}function y(e){if("object"===a(e)&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function l(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,e)}).finally(function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}}function m(e){if("object"===a(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,e)}).finally(function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}}
},{"../utils":"iSxC","./getusermedia":"GzSv","./getdisplaymedia":"UuGU"}],"t1lL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimLocalStreamsAPI=n,exports.shimRemoteStreamsAPI=i,exports.shimCallbacksAPI=a,exports.shimGetUserMedia=c,exports.shimConstraints=s,exports.shimRTCIceServerUrls=d,exports.shimTrackEventTransceiver=f,exports.shimCreateOfferLegacy=p,exports.shimAudioContext=u;var e=r(require("../utils"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,r&&r.set(e,o),o}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){if("object"===o(e)&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(function(o){return t.call(r,o,e)}),e.getVideoTracks().forEach(function(o){return t.call(r,o,e)})},e.RTCPeerConnection.prototype.addTrack=function(e){for(var r=this,o=arguments.length,n=new Array(o>1?o-1:0),i=1;i<o;i++)n[i-1]=arguments[i];return n&&n.forEach(function(e){r._localStreams?r._localStreams.includes(e)||r._localStreams.push(e):r._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var r=this._localStreams.indexOf(e);if(-1!==r){this._localStreams.splice(r,1);var o=e.getTracks();this.getSenders().forEach(function(e){o.includes(e.track)&&t.removeTrack(e)})}})}}function i(e){if("object"===o(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r)}})})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}})}),t.apply(e,arguments)}}}function a(e){if("object"===o(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,a=t.setRemoteDescription,c=t.addIceCandidate;t.createOffer=function(e,t){var o=arguments.length>=2?arguments[2]:arguments[0],n=r.apply(this,[o]);return t?(n.then(e,t),Promise.resolve()):n},t.createAnswer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o};var s=function(e,t,r){var o=i.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o};t.setLocalDescription=s,s=function(e,t,r){var o=a.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o},t.setRemoteDescription=s,s=function(e,t,r){var o=c.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o},t.addIceCandidate=s}}function c(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=t.mediaDevices,o=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=function(e){return o(s(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,o){t.mediaDevices.getUserMedia(e).then(r,o)}.bind(t))}function s(t){return t&&void 0!==t.video?Object.assign({},t,{video:e.compactObject(t.video)}):t}function d(t){if(t.RTCPeerConnection){var r=t.RTCPeerConnection;t.RTCPeerConnection=function(t,o){if(t&&t.iceServers){for(var n=[],i=0;i<t.iceServers.length;i++){var a=t.iceServers[i];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(e.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,n.push(a)):n.push(t.iceServers[i])}t.iceServers=n}return new r(t,o)},t.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:function(){return r.generateCertificate}})}}function f(e){"object"===o(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function p(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=this.getTransceivers().find(function(e){return"audio"===e.receiver.track.kind});!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveAudio||r||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var o=this.getTransceivers().find(function(e){return"video"===e.receiver.track.kind});!1===e.offerToReceiveVideo&&o?"sendrecv"===o.direction?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":"recvonly"===o.direction&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):!0!==e.offerToReceiveVideo||o||this.addTransceiver("video")}return t.apply(this,arguments)}}function u(e){"object"!==o(e)||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}
},{"../utils":"iSxC"}],"GOQK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shimRTCIceCandidate=a,exports.shimMaxMessageSize=c,exports.shimSendThrowTypeError=s,exports.shimConnectionState=p,exports.removeExtmapAllowMixed=d,exports.shimAddIceCandidateNullOrEmpty=u;var e=r(require("sdp")),t=o(require("./utils"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,t&&t.set(e,o),o}function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(n){if(n.RTCIceCandidate&&!(n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)){var o=n.RTCIceCandidate;n.RTCIceCandidate=function(t){if("object"===i(t)&&t.candidate&&0===t.candidate.indexOf("a=")&&((t=JSON.parse(JSON.stringify(t))).candidate=t.candidate.substr(2)),t.candidate&&t.candidate.length){var n=new o(t),r=e.default.parseCandidate(t.candidate),a=Object.assign(n,r);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new o(t)},n.RTCIceCandidate.prototype=o.prototype,t.wrapPeerConnectionEvent(n,"icecandidate",function(e){return e.candidate&&Object.defineProperty(e,"candidate",{value:new n.RTCIceCandidate(e.candidate),writable:"false"}),e})}}function c(t,n){if(t.RTCPeerConnection){"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===n.browser&&n.version>=76){var{sdpSemantics:t}=this.getConfiguration();"plan-b"===t&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(t){if(!t||!t.sdp)return!1;var n=e.default.splitSections(t.sdp);return n.shift(),n.some(function(t){var n=e.default.parseMLine(t);return n&&"application"===n.kind&&-1!==n.protocol.indexOf("SCTP")})}(arguments[0])){var r,i=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),a=(p=i,d=65536,"firefox"===n.browser&&(d=n.version<57?-1===p?16384:2147483637:n.version<60?57===n.version?65535:65536:2147483637),d),c=function(t,o){var r=65536;"firefox"===n.browser&&57===n.version&&(r=65535);var i=e.default.matchPrefix(t.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===n.browser&&-1!==o&&(r=2147483637),r}(arguments[0],i);r=0===a&&0===c?Number.POSITIVE_INFINITY:0===a||0===c?Math.max(a,c):Math.min(a,c);var s={};Object.defineProperty(s,"maxMessageSize",{get:function(){return r}}),this._sctp=s}var p,d;return o.apply(this,arguments)}}}function s(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=n.apply(this,arguments);return o(e,this),e},t.wrapPeerConnectionEvent(e,"datachannel",function(e){return o(e.channel,e.target),e})}function o(e,t){var n=e.send;e.send=function(){var o=arguments[0],r=o.length||o.size||o.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function p(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}}function d(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var o=t.sdp.split("\n").filter(function(e){return"a=extmap-allow-mixed"!==e.trim()}).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:o}):t.sdp=o}return n.apply(this,arguments)}}}function u(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}
},{"sdp":"YHvh","./utils":"iSxC"}],"KtlG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.adapterFactory=o;var e=m(require("./utils")),i=m(require("./chrome/chrome_shim")),r=m(require("./edge/edge_shim")),s=m(require("./firefox/firefox_shim")),t=m(require("./safari/safari_shim")),a=m(require("./common_shim"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=n();if(i&&i.has(e))return i.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var a=s?Object.getOwnPropertyDescriptor(e,t):null;a&&(a.get||a.set)?Object.defineProperty(r,t,a):r[t]=e[t]}return r.default=e,i&&i.set(e,r),r}function o(){var{window:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},o=e.log,h=e.detectBrowser(n),d={browserDetails:h,commonShim:a,extractVersion:e.extractVersion,disableLog:e.disableLog,disableWarnings:e.disableWarnings};switch(h.browser){case"chrome":if(!i||!i.shimPeerConnection||!m.shimChrome)return o("Chrome shim is not included in this adapter release."),d;if(null===h.version)return o("Chrome shim can not determine version, not shimming."),d;o("adapter.js shimming chrome."),d.browserShim=i,a.shimAddIceCandidateNullOrEmpty(n,h),i.shimGetUserMedia(n,h),i.shimMediaStream(n,h),i.shimPeerConnection(n,h),i.shimOnTrack(n,h),i.shimAddTrackRemoveTrack(n,h),i.shimGetSendersWithDtmf(n,h),i.shimGetStats(n,h),i.shimSenderReceiverGetStats(n,h),i.fixNegotiationNeeded(n,h),a.shimRTCIceCandidate(n,h),a.shimConnectionState(n,h),a.shimMaxMessageSize(n,h),a.shimSendThrowTypeError(n,h),a.removeExtmapAllowMixed(n,h);break;case"firefox":if(!s||!s.shimPeerConnection||!m.shimFirefox)return o("Firefox shim is not included in this adapter release."),d;o("adapter.js shimming firefox."),d.browserShim=s,a.shimAddIceCandidateNullOrEmpty(n,h),s.shimGetUserMedia(n,h),s.shimPeerConnection(n,h),s.shimOnTrack(n,h),s.shimRemoveStream(n,h),s.shimSenderGetStats(n,h),s.shimReceiverGetStats(n,h),s.shimRTCDataChannel(n,h),s.shimAddTransceiver(n,h),s.shimGetParameters(n,h),s.shimCreateOffer(n,h),s.shimCreateAnswer(n,h),a.shimRTCIceCandidate(n,h),a.shimConnectionState(n,h),a.shimMaxMessageSize(n,h),a.shimSendThrowTypeError(n,h);break;case"edge":if(!r||!r.shimPeerConnection||!m.shimEdge)return o("MS edge shim is not included in this adapter release."),d;o("adapter.js shimming edge."),d.browserShim=r,r.shimGetUserMedia(n,h),r.shimGetDisplayMedia(n,h),r.shimPeerConnection(n,h),r.shimReplaceTrack(n,h),a.shimMaxMessageSize(n,h),a.shimSendThrowTypeError(n,h);break;case"safari":if(!t||!m.shimSafari)return o("Safari shim is not included in this adapter release."),d;o("adapter.js shimming safari."),d.browserShim=t,a.shimAddIceCandidateNullOrEmpty(n,h),t.shimRTCIceServerUrls(n,h),t.shimCreateOfferLegacy(n,h),t.shimCallbacksAPI(n,h),t.shimLocalStreamsAPI(n,h),t.shimRemoteStreamsAPI(n,h),t.shimTrackEventTransceiver(n,h),t.shimGetUserMedia(n,h),t.shimAudioContext(n,h),a.shimRTCIceCandidate(n,h),a.shimMaxMessageSize(n,h),a.shimSendThrowTypeError(n,h),a.removeExtmapAllowMixed(n,h);break;default:o("Unsupported browser!")}return d}
},{"./utils":"iSxC","./chrome/chrome_shim":"uI5X","./edge/edge_shim":"XRic","./firefox/firefox_shim":"Fzdr","./safari/safari_shim":"t1lL","./common_shim":"GOQK"}],"tI1X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./adapter_factory.js"),t=(0,e.adapterFactory)({window:"undefined"==typeof window?void 0:window}),d=t;exports.default=d;
},{"./adapter_factory.js":"KtlG"}],"sXtV":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.webRTCAdapter=void 0;var t=e(require("webrtc-adapter"));exports.webRTCAdapter=t.default;
},{"webrtc-adapter":"tI1X"}],"I31f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Supports=void 0;var r=require("./adapter");exports.Supports=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return"undefined"!=typeof RTCPeerConnection},e.prototype.isBrowserSupported=function(){var r=this.getBrowser(),e=this.getVersion();return!!this.supportedBrowsers.includes(r)&&("chrome"===r?e>=this.minChromeVersion:"firefox"===r?e>=this.minFirefoxVersion:"safari"===r&&(!this.isIOS&&e>=this.minSafariVersion))},e.prototype.getBrowser=function(){return r.webRTCAdapter.browserDetails.browser},e.prototype.getVersion=function(){return r.webRTCAdapter.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var e,i=this.getBrowser(),t=r.webRTCAdapter.browserDetails.version||0;if("chrome"===i&&t<72)return!1;if("firefox"===i&&t>=59)return!0;if(!(window.RTCRtpTransceiver&&"currentDirection"in RTCRtpTransceiver.prototype))return!1;var o=!1;try{(e=new RTCPeerConnection).addTransceiver("audio"),o=!0}catch(s){}finally{e&&e.close()}return o},e.prototype.toString=function(){return"Supports: \n    browser:"+this.getBrowser()+" \n    version:"+this.getVersion()+" \n    isIOS:"+this.isIOS+" \n    isWebRTCSupported:"+this.isWebRTCSupported()+" \n    isBrowserSupported:"+this.isBrowserSupported()+" \n    isUnifiedPlanSupported:"+this.isUnifiedPlanSupported()},e}());
},{"./adapter":"sXtV"}],"BHXf":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var o={};if(null!=r)for(var n in r)"default"!==n&&Object.prototype.hasOwnProperty.call(r,n)&&e(o,r,n);return t(o,r),o};Object.defineProperty(exports,"__esModule",{value:!0}),exports.util=void 0;var o=r(require("peerjs-js-binarypack")),n=require("./supports"),i={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:0.peerjs.com:3478",username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};exports.util=new(function(){function e(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=i,this.browser=n.Supports.getBrowser(),this.browserVersion=n.Supports.getVersion(),this.supports=function(){var e,t={browser:n.Supports.isBrowserSupported(),webRTC:n.Supports.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;try{e=new RTCPeerConnection(i),t.audioVideo=!0;var r=void 0;try{r=e.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!r.ordered;try{r.binaryType="blob",t.binaryBlob=!n.Supports.isIOS}catch(o){}}catch(o){}finally{r&&r.close()}}catch(o){}finally{e&&e.close()}return t}(),this.pack=o.pack,this.unpack=o.unpack,this._dataCount=1}return e.prototype.noop=function(){},e.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},e.prototype.chunk=function(e){for(var t=[],r=e.size,o=Math.ceil(r/exports.util.chunkedMTU),n=0,i=0;i<r;){var a=Math.min(r,i+exports.util.chunkedMTU),u=e.slice(i,a),s={__peerData:this._dataCount,n:n,data:u,total:o};t.push(s),i=a,n++}return this._dataCount++,t},e.prototype.blobToArrayBuffer=function(e,t){var r=new FileReader;return r.onload=function(e){e.target&&t(e.target.result)},r.readAsArrayBuffer(e),r},e.prototype.binaryStringToArrayBuffer=function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer},e.prototype.randomToken=function(){return Math.random().toString(36).substr(2)},e.prototype.isSecure=function(){return"https:"===location.protocol},e}());
},{"peerjs-js-binarypack":"kdPp","./supports":"I31f"}],"JJlS":[function(require,module,exports) {
"use strict";var e=Object.prototype.hasOwnProperty,t="~";function n(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,n,o,s,i){if("function"!=typeof o)throw new TypeError("The listener must be a function");var c=new r(o,s||e,i),f=t?t+n:n;return e._events[f]?e._events[f].fn?e._events[f]=[e._events[f],c]:e._events[f].push(c):(e._events[f]=c,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function i(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(t=!1)),i.prototype.eventNames=function(){var n,r,o=[];if(0===this._eventsCount)return o;for(r in n=this._events)e.call(n,r)&&o.push(t?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(n)):o},i.prototype.listeners=function(e){var n=t?t+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},i.prototype.listenerCount=function(e){var n=t?t+e:e,r=this._events[n];return r?r.fn?1:r.length:0},i.prototype.emit=function(e,n,r,o,s,i){var c=t?t+e:e;if(!this._events[c])return!1;var f,u,a=this._events[c],l=arguments.length;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,o),!0;case 5:return a.fn.call(a.context,n,r,o,s),!0;case 6:return a.fn.call(a.context,n,r,o,s,i),!0}for(u=1,f=new Array(l-1);u<l;u++)f[u-1]=arguments[u];a.fn.apply(a.context,f)}else{var v,h=a.length;for(u=0;u<h;u++)switch(a[u].once&&this.removeListener(e,a[u].fn,void 0,!0),l){case 1:a[u].fn.call(a[u].context);break;case 2:a[u].fn.call(a[u].context,n);break;case 3:a[u].fn.call(a[u].context,n,r);break;case 4:a[u].fn.call(a[u].context,n,r,o);break;default:if(!f)for(v=1,f=new Array(l-1);v<l;v++)f[v-1]=arguments[v];a[u].fn.apply(a[u].context,f)}}return!0},i.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},i.prototype.removeListener=function(e,n,r,o){var i=t?t+e:e;if(!this._events[i])return this;if(!n)return s(this,i),this;var c=this._events[i];if(c.fn)c.fn!==n||o&&!c.once||r&&c.context!==r||s(this,i);else{for(var f=0,u=[],a=c.length;f<a;f++)(c[f].fn!==n||o&&!c[f].once||r&&c[f].context!==r)&&u.push(c[f]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},i.prototype.removeAllListeners=function(e){var r;return e?(r=t?t+e:e,this._events[r]&&s(this,r)):(this._events=new n,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=t,i.EventEmitter=i,"undefined"!=typeof module&&(module.exports=i);
},{}],"WOs9":[function(require,module,exports) {
"use strict";var r=this&&this.__read||function(r,e){var o="function"==typeof Symbol&&r[Symbol.iterator];if(!o)return r;var t,n,l=o.call(r),i=[];try{for(;(void 0===e||e-- >0)&&!(t=l.next()).done;)i.push(t.value)}catch(s){n={error:s}}finally{try{t&&!t.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return i},e=this&&this.__spreadArray||function(r,e){for(var o=0,t=e.length,n=r.length;o<t;o++,n++)r[n]=e[o];return r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LogLevel=void 0;var o,t="PeerJS: ";!function(r){r[r.Disabled=0]="Disabled",r[r.Errors=1]="Errors",r[r.Warnings=2]="Warnings",r[r.All=3]="All"}(o=exports.LogLevel||(exports.LogLevel={}));var n=function(){function n(){this._logLevel=o.Disabled}return Object.defineProperty(n.prototype,"logLevel",{get:function(){return this._logLevel},set:function(r){this._logLevel=r},enumerable:!1,configurable:!0}),n.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=o.All&&this._print.apply(this,e([o.All],r(t)))},n.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=o.Warnings&&this._print.apply(this,e([o.Warnings],r(t)))},n.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=o.Errors&&this._print.apply(this,e([o.Errors],r(t)))},n.prototype.setLogFunction=function(r){this._print=r},n.prototype._print=function(n){for(var l=[],i=1;i<arguments.length;i++)l[i-1]=arguments[i];var s=e([t],r(l));for(var a in s)s[a]instanceof Error&&(s[a]="("+s[a].name+") "+s[a].message);n>=o.All?console.log.apply(console,e([],r(s))):n>=o.Warnings?console.warn.apply(console,e(["WARNING"],r(s))):n>=o.Errors&&console.error.apply(console,e(["ERROR"],r(s)))},n}();exports.default=new n;
},{}],"ZRYf":[function(require,module,exports) {
"use strict";var e,r,o,n,t,a,i;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ServerMessageType=exports.SocketEventType=exports.SerializationType=exports.PeerErrorType=exports.PeerEventType=exports.ConnectionType=exports.ConnectionEventType=void 0,function(e){e.Open="open",e.Stream="stream",e.Data="data",e.Close="close",e.Error="error",e.IceStateChanged="iceStateChanged"}(e=exports.ConnectionEventType||(exports.ConnectionEventType={})),function(e){e.Data="data",e.Media="media"}(r=exports.ConnectionType||(exports.ConnectionType={})),function(e){e.Open="open",e.Close="close",e.Connection="connection",e.Call="call",e.Disconnected="disconnected",e.Error="error"}(o=exports.PeerEventType||(exports.PeerEventType={})),function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"}(n=exports.PeerErrorType||(exports.PeerErrorType={})),function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"}(t=exports.SerializationType||(exports.SerializationType={})),function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"}(a=exports.SocketEventType||(exports.SocketEventType={})),function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"}(i=exports.ServerMessageType||(exports.ServerMessageType={}));
},{}],"wJlv":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),t=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,s,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){s={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},n=this&&this.__spreadArray||function(e,t){for(var n=0,o=t.length,s=e.length;n<o;n++,s++)e[s]=t[n];return e},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Socket=void 0;var r=require("eventemitter3"),i=s(require("./logger")),c=require("./enums"),a=function(s){function r(e,t,n,o,r,i){void 0===i&&(i=5e3);var c=s.call(this)||this;c.pingInterval=i,c._disconnected=!0,c._messagesQueue=[];var a=e?"wss://":"ws://";return c._baseUrl=a+t+":"+n+o+"peerjs?key="+r,c}return e(r,s),r.prototype.start=function(e,t){var n=this;this._id=e;var o=this._baseUrl+"&id="+e+"&token="+t;!this._socket&&this._disconnected&&(this._socket=new WebSocket(o),this._disconnected=!1,this._socket.onmessage=function(e){var t;try{t=JSON.parse(e.data),i.default.log("Server message received:",t)}catch(o){return void i.default.log("Invalid server message",e.data)}n.emit(c.SocketEventType.Message,t)},this._socket.onclose=function(e){n._disconnected||(i.default.log("Socket closed.",e),n._cleanup(),n._disconnected=!0,n.emit(c.SocketEventType.Disconnected))},this._socket.onopen=function(){n._disconnected||(n._sendQueuedMessages(),i.default.log("Socket open"),n._scheduleHeartbeat())})},r.prototype._scheduleHeartbeat=function(){var e=this;this._wsPingTimer=setTimeout(function(){e._sendHeartbeat()},this.pingInterval)},r.prototype._sendHeartbeat=function(){if(this._wsOpen()){var e=JSON.stringify({type:c.ServerMessageType.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}else i.default.log("Cannot send heartbeat, because socket closed")},r.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},r.prototype._sendQueuedMessages=function(){var e,s,r=n([],t(this._messagesQueue));this._messagesQueue=[];try{for(var i=o(r),c=i.next();!c.done;c=i.next()){var a=c.value;this.send(a)}}catch(u){e={error:u}}finally{try{c&&!c.done&&(s=i.return)&&s.call(i)}finally{if(e)throw e.error}}},r.prototype.send=function(e){if(!this._disconnected)if(this._id)if(e.type){if(this._wsOpen()){var t=JSON.stringify(e);this._socket.send(t)}}else this.emit(c.SocketEventType.Error,"Invalid message");else this._messagesQueue.push(e)},r.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},r.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},r}(r.EventEmitter);exports.Socket=a;
},{"eventemitter3":"JJlS","./logger":"WOs9","./enums":"ZRYf"}],"HCdX":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)},n=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(i,r){function c(e){try{s(o.next(e))}catch(n){r(n)}}function a(e){try{s(o.throw(e))}catch(n){r(n)}}function s(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(c,a)}s((o=o.apply(e,n||[])).next())})},t=this&&this.__generator||function(e,n){var t,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=n.call(e,c)}catch(a){r=[6,a],o=0}finally{t=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Negotiator=void 0;var i=require("./util"),r=o(require("./logger")),c=require("./enums"),a=function(){function o(e){this.connection=e}return o.prototype.startConnection=function(e){var n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===c.ConnectionType.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){if(this.connection.type===c.ConnectionType.Data){var t=this.connection,o={ordered:!!e.reliable},i=n.createDataChannel(t.label,o);t.initialize(i)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},o.prototype._startPeerConnection=function(){r.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},o.prototype._setupListeners=function(e){var n=this,t=this.connection.peer,o=this.connection.connectionId,a=this.connection.type,s=this.connection.provider;r.default.log("Listening for ICE candidates."),e.onicecandidate=function(e){e.candidate&&e.candidate.candidate&&(r.default.log("Received ICE candidates for "+t+":",e.candidate),s.socket.send({type:c.ServerMessageType.Candidate,payload:{candidate:e.candidate,type:a,connectionId:o},dst:t}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":r.default.log("iceConnectionState is failed, closing connections to "+t),n.connection.emit(c.ConnectionEventType.Error,new Error("Negotiation of connection to "+t+" failed.")),n.connection.close();break;case"closed":r.default.log("iceConnectionState is closed, closing connections to "+t),n.connection.emit(c.ConnectionEventType.Error,new Error("Connection to "+t+" closed.")),n.connection.close();break;case"disconnected":r.default.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=i.util.noop}n.connection.emit(c.ConnectionEventType.IceStateChanged,e.iceConnectionState)},r.default.log("Listening for data channel"),e.ondatachannel=function(e){r.default.log("Received data channel");var n=e.channel;s.getConnection(t,o).initialize(n)},r.default.log("Listening for remote stream"),e.ontrack=function(e){r.default.log("Received remote stream");var i=e.streams[0],a=s.getConnection(t,o);if(a.type===c.ConnectionType.Media){var d=a;n._addStreamToMediaConnection(i,d)}}},o.prototype.cleanup=function(){r.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var n="closed"!==e.signalingState,t=!1;if(this.connection.type===c.ConnectionType.Data){var o=this.connection.dataChannel;o&&(t=!!o.readyState&&"closed"!==o.readyState)}(n||t)&&e.close()}},o.prototype._makeOffer=function(){return n(this,void 0,Promise,function(){var n,o,a,s,d,l,u;return t(this,function(t){switch(t.label){case 0:n=this.connection.peerConnection,o=this.connection.provider,t.label=1;case 1:return t.trys.push([1,7,,8]),[4,n.createOffer(this.connection.options.constraints)];case 2:a=t.sent(),r.default.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(a.sdp=this.connection.options.sdpTransform(a.sdp)||a.sdp),t.label=3;case 3:return t.trys.push([3,5,,6]),[4,n.setLocalDescription(a)];case 4:return t.sent(),r.default.log("Set localDescription:",a,"for:"+this.connection.peer),s={sdp:a,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:i.util.browser},this.connection.type===c.ConnectionType.Data&&(d=this.connection,s=e(e({},s),{label:d.label,reliable:d.reliable,serialization:d.serialization})),o.socket.send({type:c.ServerMessageType.Offer,payload:s,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=(l=t.sent())&&(o.emitError(c.PeerErrorType.WebRTC,l),r.default.log("Failed to setLocalDescription, ",l)),[3,6];case 6:return[3,8];case 7:return u=t.sent(),o.emitError(c.PeerErrorType.WebRTC,u),r.default.log("Failed to createOffer, ",u),[3,8];case 8:return[2]}})})},o.prototype._makeAnswer=function(){return n(this,void 0,Promise,function(){var e,n,o,a,s;return t(this,function(t){switch(t.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,t.label=1;case 1:return t.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:o=t.sent(),r.default.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(o.sdp=this.connection.options.sdpTransform(o.sdp)||o.sdp),t.label=3;case 3:return t.trys.push([3,5,,6]),[4,e.setLocalDescription(o)];case 4:return t.sent(),r.default.log("Set localDescription:",o,"for:"+this.connection.peer),n.socket.send({type:c.ServerMessageType.Answer,payload:{sdp:o,type:this.connection.type,connectionId:this.connection.connectionId,browser:i.util.browser},dst:this.connection.peer}),[3,6];case 5:return a=t.sent(),n.emitError(c.PeerErrorType.WebRTC,a),r.default.log("Failed to setLocalDescription, ",a),[3,6];case 6:return[3,8];case 7:return s=t.sent(),n.emitError(c.PeerErrorType.WebRTC,s),r.default.log("Failed to create answer, ",s),[3,8];case 8:return[2]}})})},o.prototype.handleSDP=function(e,o){return n(this,void 0,Promise,function(){var n,i,a,s;return t(this,function(t){switch(t.label){case 0:o=new RTCSessionDescription(o),n=this.connection.peerConnection,i=this.connection.provider,r.default.log("Setting remote description",o),a=this,t.label=1;case 1:return t.trys.push([1,5,,6]),[4,n.setRemoteDescription(o)];case 2:return t.sent(),r.default.log("Set remoteDescription:"+e+" for:"+this.connection.peer),"OFFER"!==e?[3,4]:[4,a._makeAnswer()];case 3:t.sent(),t.label=4;case 4:return[3,6];case 5:return s=t.sent(),i.emitError(c.PeerErrorType.WebRTC,s),r.default.log("Failed to setRemoteDescription, ",s),[3,6];case 6:return[2]}})})},o.prototype.handleCandidate=function(e){return n(this,void 0,Promise,function(){var n,o,i,a,s,d;return t(this,function(t){switch(t.label){case 0:r.default.log("handleCandidate:",e),n=e.candidate,o=e.sdpMLineIndex,i=e.sdpMid,a=this.connection.peerConnection,s=this.connection.provider,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,a.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:o,candidate:n}))];case 2:return t.sent(),r.default.log("Added ICE candidate for:"+this.connection.peer),[3,4];case 3:return d=t.sent(),s.emitError(c.PeerErrorType.WebRTC,d),r.default.log("Failed to handleCandidate, ",d),[3,4];case 4:return[2]}})})},o.prototype._addTracksToConnection=function(e,n){if(r.default.log("add tracks from stream "+e.id+" to peer connection"),!n.addTrack)return r.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(t){n.addTrack(t,e)})},o.prototype._addStreamToMediaConnection=function(e,n){r.default.log("add stream "+e.id+" to media connection "+n.connectionId),n.addStream(e)},o}();exports.Negotiator=a;
},{"./util":"BHXf","./logger":"WOs9","./enums":"ZRYf"}],"tQFK":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseConnection=void 0;var e=require("eventemitter3"),n=function(e){function n(t,n,o){var r=e.call(this)||this;return r.peer=t,r.provider=n,r.options=o,r._open=!1,r.metadata=o.metadata,r}return t(n,e),Object.defineProperty(n.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),n}(e.EventEmitter);exports.BaseConnection=n;
},{"eventemitter3":"JJlS"}],"dbHP":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(t,o)};return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaConnection=void 0;var n=require("./util"),i=r(require("./logger")),a=require("./negotiator"),s=require("./enums"),l=require("./baseconnection"),c=function(r){function l(e,t,o){var i=r.call(this,e,t,o)||this;return i._localStream=i.options._stream,i.connectionId=i.options.connectionId||l.ID_PREFIX+n.util.randomToken(),i._negotiator=new a.Negotiator(i),i._localStream&&i._negotiator.startConnection({_stream:i._localStream,originator:!0}),i}return e(l,r),Object.defineProperty(l.prototype,"type",{get:function(){return s.ConnectionType.Media},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),l.prototype.addStream=function(e){i.default.log("Receiving stream",e),this._remoteStream=e,r.prototype.emit.call(this,s.ConnectionEventType.Stream,e)},l.prototype.handleMessage=function(e){var t=e.type,o=e.payload;switch(e.type){case s.ServerMessageType.Answer:this._negotiator.handleSDP(t,o.sdp),this._open=!0;break;case s.ServerMessageType.Candidate:this._negotiator.handleCandidate(o.candidate);break;default:i.default.warn("Unrecognized message type:"+t+" from peer:"+this.peer)}},l.prototype.answer=function(e,r){var n,a;if(void 0===r&&(r={}),this._localStream)i.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=e,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection(t(t({},this.options._payload),{_stream:e}));var s=this.provider._getMessages(this.connectionId);try{for(var l=o(s),c=l.next();!c.done;c=l.next()){var p=c.value;this.handleMessage(p)}}catch(u){n={error:u}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}this._open=!0}},l.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,r.prototype.emit.call(this,s.ConnectionEventType.Close))},l.ID_PREFIX="mc_",l}(l.BaseConnection);exports.MediaConnection=c;
},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK"}],"GGp6":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodingQueue=void 0;var r=require("eventemitter3"),o=t(require("./logger")),n=function(t){function r(){var e=t.call(this)||this;return e.fileReader=new FileReader,e._queue=[],e._processing=!1,e.fileReader.onload=function(t){e._processing=!1,t.target&&e.emit("done",t.target.result),e.doNextTask()},e.fileReader.onerror=function(t){o.default.error("EncodingQueue error:",t),e._processing=!1,e.destroy(),e.emit("error",t)},e}return e(r,t),Object.defineProperty(r.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),r.prototype.enque=function(e){this.queue.push(e),this.processing||this.doNextTask()},r.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},r.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},r}(r.EventEmitter);exports.EncodingQueue=n;
},{"eventemitter3":"JJlS","./logger":"WOs9"}],"GBTQ":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),t=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataConnection=void 0;var i=require("./util"),o=n(require("./logger")),r=require("./negotiator"),a=require("./enums"),s=require("./baseconnection"),u=require("./encodingQueue"),l=function(n){function s(e,t,l){var f=n.call(this,e,t,l)||this;return f.stringify=JSON.stringify,f.parse=JSON.parse,f._buffer=[],f._bufferSize=0,f._buffering=!1,f._chunkedData={},f._encodingQueue=new u.EncodingQueue,f.connectionId=f.options.connectionId||s.ID_PREFIX+i.util.randomToken(),f.label=f.options.label||f.connectionId,f.serialization=f.options.serialization||a.SerializationType.Binary,f.reliable=!!f.options.reliable,f._encodingQueue.on("done",function(e){f._bufferedSend(e)}),f._encodingQueue.on("error",function(){o.default.error("DC#"+f.connectionId+": Error occured in encoding from blob to arraybuffer, close DC"),f.close()}),f._negotiator=new r.Negotiator(f),f._negotiator.startConnection(f.options._payload||{originator:!0}),f}return e(s,n),Object.defineProperty(s.prototype,"type",{get:function(){return a.ConnectionType.Data},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),s.prototype.initialize=function(e){this._dc=e,this._configureDataChannel()},s.prototype._configureDataChannel=function(){var e=this;i.util.supports.binaryBlob&&!i.util.supports.reliable||(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){o.default.log("DC#"+e.connectionId+" dc connection success"),e._open=!0,e.emit(a.ConnectionEventType.Open)},this.dataChannel.onmessage=function(t){o.default.log("DC#"+e.connectionId+" dc onmessage:",t.data),e._handleDataMessage(t)},this.dataChannel.onclose=function(){o.default.log("DC#"+e.connectionId+" dc closed for:",e.peer),e.close()}},s.prototype._handleDataMessage=function(e){var t=this,o=e.data,r=o.constructor,s=o;if(this.serialization===a.SerializationType.Binary||this.serialization===a.SerializationType.BinaryUTF8){if(r===Blob)return void i.util.blobToArrayBuffer(o,function(e){var n=i.util.unpack(e);t.emit(a.ConnectionEventType.Data,n)});if(r===ArrayBuffer)s=i.util.unpack(o);else if(r===String){var u=i.util.binaryStringToArrayBuffer(o);s=i.util.unpack(u)}}else this.serialization===a.SerializationType.JSON&&(s=this.parse(o));s.__peerData?this._handleChunk(s):n.prototype.emit.call(this,a.ConnectionEventType.Data,s)},s.prototype._handleChunk=function(e){var t=e.__peerData,n=this._chunkedData[t]||{data:[],count:0,total:e.total};if(n.data[e.n]=e.data,n.count++,this._chunkedData[t]=n,n.total===n.count){delete this._chunkedData[t];var i=new Blob(n.data);this._handleDataMessage({data:i})}},s.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,n.prototype.emit.call(this,a.ConnectionEventType.Close))},s.prototype.send=function(e,t){if(this.open)if(this.serialization===a.SerializationType.JSON)this._bufferedSend(this.stringify(e));else if(this.serialization===a.SerializationType.Binary||this.serialization===a.SerializationType.BinaryUTF8){var o=i.util.pack(e);if(!t&&o.size>i.util.chunkedMTU)return void this._sendChunks(o);i.util.supports.binaryBlob?this._bufferedSend(o):this._encodingQueue.enque(o)}else this._bufferedSend(e);else n.prototype.emit.call(this,a.ConnectionEventType.Error,new Error("Connection is not open. You should listen for the `open` event before sending messages."))},s.prototype._bufferedSend=function(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this._bufferSize=this._buffer.length)},s.prototype._trySend=function(e){var t=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>s.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){t._buffering=!1,t._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return o.default.error("DC#:"+this.connectionId+" Error when sending:",n),this._buffering=!0,this.close(),!1}return!0},s.prototype._tryBuffer=function(){if(this.open&&0!==this._buffer.length){var e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},s.prototype._sendChunks=function(e){var n,r,a=i.util.chunk(e);o.default.log("DC#"+this.connectionId+" Try to send "+a.length+" chunks...");try{for(var s=t(a),u=s.next();!u.done;u=s.next()){var l=u.value;this.send(l,!0)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},s.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case a.ServerMessageType.Answer:this._negotiator.handleSDP(e.type,t.sdp);break;case a.ServerMessageType.Candidate:this._negotiator.handleCandidate(t.candidate);break;default:o.default.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}},s.ID_PREFIX="dc_",s.MAX_BUFFERED_AMOUNT=8388608,s}(s.BaseConnection);exports.DataConnection=l;
},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK","./encodingQueue":"GGp6"}],"in7L":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,r,o){return new(r||(r=Promise))(function(n,s){function i(t){try{a(o.next(t))}catch(e){s(e)}}function u(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,u)}a((o=o.apply(t,e||[])).next())})},e=this&&this.__generator||function(t,e){var r,o,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(n=(n=i.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(u){s=[6,u],o=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.API=void 0;var o=require("./util"),n=r(require("./logger")),s=function(){function r(t){this._options=t}return r.prototype._buildUrl=function(t){var e=(this._options.secure?"https://":"http://")+this._options.host+":"+this._options.port+this._options.path+this._options.key+"/"+t;return e+="?ts="+(new Date).getTime()+Math.random()},r.prototype.retrieveId=function(){return t(this,void 0,Promise,function(){var t,r,s,i;return e(this,function(e){switch(e.label){case 0:t=this._buildUrl("id"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(t)];case 2:if(200!==(r=e.sent()).status)throw new Error("Error. Status:"+r.status);return[2,r.text()];case 3:throw s=e.sent(),n.default.error("Error retrieving ID",s),i="","/"===this._options.path&&this._options.host!==o.util.CLOUD_HOST&&(i=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+i);case 4:return[2]}})})},r.prototype.listAllPeers=function(){return t(this,void 0,Promise,function(){var t,r,s,i;return e(this,function(e){switch(e.label){case 0:t=this._buildUrl("peers"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(t)];case 2:if(200!==(r=e.sent()).status){if(401===r.status)throw s="",s=this._options.host===o.util.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+s);throw new Error("Error. Status:"+r.status)}return[2,r.json()];case 3:throw i=e.sent(),n.default.error("Error retrieving list peers",i),new Error("Could not get list peers from the server."+i);case 4:return[2]}})})},r}();exports.API=s;
},{"./util":"BHXf","./logger":"WOs9"}],"Hxpd":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Peer=void 0;var i=require("eventemitter3"),s=require("./util"),a=o(require("./logger")),c=require("./socket"),l=require("./mediaconnection"),u=require("./dataconnection"),d=require("./enums"),p=require("./api"),h=function(){return function(){}}(),f=function(o){function i(e,n){var r,c=o.call(this)||this;return c._id=null,c._lastServerId=null,c._destroyed=!1,c._disconnected=!1,c._open=!1,c._connections=new Map,c._lostMessages=new Map,e&&e.constructor==Object?n=e:e&&(r=e.toString()),n=t({debug:0,host:s.util.CLOUD_HOST,port:s.util.CLOUD_PORT,path:"/",key:i.DEFAULT_KEY,token:s.util.randomToken(),config:s.util.defaultConfig},n),c._options=n,"/"===c._options.host&&(c._options.host=window.location.hostname),c._options.path&&("/"!==c._options.path[0]&&(c._options.path="/"+c._options.path),"/"!==c._options.path[c._options.path.length-1]&&(c._options.path+="/")),void 0===c._options.secure&&c._options.host!==s.util.CLOUD_HOST?c._options.secure=s.util.isSecure():c._options.host==s.util.CLOUD_HOST&&(c._options.secure=!0),c._options.logFunction&&a.default.setLogFunction(c._options.logFunction),a.default.logLevel=c._options.debug||0,c._api=new p.API(n),c._socket=c._createServerConnection(),s.util.supports.audioVideo||s.util.supports.data?r&&!s.util.validateId(r)?(c._delayedAbort(d.PeerErrorType.InvalidID,'ID "'+r+'" is invalid'),c):(r?c._initialize(r):c._api.retrieveId().then(function(e){return c._initialize(e)}).catch(function(e){return c._abort(d.PeerErrorType.ServerError,e)}),c):(c._delayedAbort(d.PeerErrorType.BrowserIncompatible,"The current browser does not support WebRTC"),c)}return e(i,o),Object.defineProperty(i.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"connections",{get:function(){var e,t,o=Object.create(null);try{for(var i=n(this._connections),s=i.next();!s.done;s=i.next()){var a=r(s.value,2),c=a[0],l=a[1];o[c]=l}}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),i.prototype._createServerConnection=function(){var e=this,t=new c.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(d.SocketEventType.Message,function(t){e._handleMessage(t)}),t.on(d.SocketEventType.Error,function(t){e._abort(d.PeerErrorType.SocketError,t)}),t.on(d.SocketEventType.Disconnected,function(){e.disconnected||(e.emitError(d.PeerErrorType.Network,"Lost connection to server."),e.disconnect())}),t.on(d.SocketEventType.Close,function(){e.disconnected||e._abort(d.PeerErrorType.SocketClosed,"Underlying socket is already closed.")}),t},i.prototype._initialize=function(e){this._id=e,this.socket.start(e,this._options.token)},i.prototype._handleMessage=function(e){var t,r,o=e.type,i=e.payload,s=e.src;switch(o){case d.ServerMessageType.Open:this._lastServerId=this.id,this._open=!0,this.emit(d.PeerEventType.Open,this.id);break;case d.ServerMessageType.Error:this._abort(d.PeerErrorType.ServerError,i.msg);break;case d.ServerMessageType.IdTaken:this._abort(d.PeerErrorType.UnavailableID,'ID "'+this.id+'" is taken');break;case d.ServerMessageType.InvalidKey:this._abort(d.PeerErrorType.InvalidKey,'API KEY "'+this._options.key+'" is invalid');break;case d.ServerMessageType.Leave:a.default.log("Received leave message from "+s),this._cleanupPeer(s),this._connections.delete(s);break;case d.ServerMessageType.Expire:this.emitError(d.PeerErrorType.PeerUnavailable,"Could not connect to peer "+s);break;case d.ServerMessageType.Offer:var c=i.connectionId;if((_=this.getConnection(s,c))&&(_.close(),a.default.warn("Offer received for existing Connection ID:"+c)),i.type===d.ConnectionType.Media)_=new l.MediaConnection(s,this,{connectionId:c,_payload:i,metadata:i.metadata}),this._addConnection(s,_),this.emit(d.PeerEventType.Call,_);else{if(i.type!==d.ConnectionType.Data)return void a.default.warn("Received malformed connection type:"+i.type);_=new u.DataConnection(s,this,{connectionId:c,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable}),this._addConnection(s,_),this.emit(d.PeerEventType.Connection,_)}var p=this._getMessages(c);try{for(var h=n(p),f=h.next();!f.done;f=h.next()){var y=f.value;_.handleMessage(y)}}catch(v){t={error:v}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}break;default:if(!i)return void a.default.warn("You received a malformed message from "+s+" of type "+o);var _;c=i.connectionId;(_=this.getConnection(s,c))&&_.peerConnection?_.handleMessage(e):c?this._storeMessage(c,e):a.default.warn("You received an unrecognized message:",e)}},i.prototype._storeMessage=function(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)},i.prototype._getMessages=function(e){var t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]},i.prototype.connect=function(e,t){if(void 0===t&&(t={}),this.disconnected)return a.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(d.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var n=new u.DataConnection(e,this,t);return this._addConnection(e,n),n},i.prototype.call=function(e,t,n){if(void 0===n&&(n={}),this.disconnected)return a.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(d.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(t){n._stream=t;var r=new l.MediaConnection(e,this,n);return this._addConnection(e,r),r}a.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},i.prototype._addConnection=function(e,t){a.default.log("add connection "+t.type+":"+t.connectionId+" to peerId:"+e),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)},i.prototype._removeConnection=function(e){var t=this._connections.get(e.peer);if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}this._lostMessages.delete(e.connectionId)},i.prototype.getConnection=function(e,t){var r,o,i=this._connections.get(e);if(!i)return null;try{for(var s=n(i),a=s.next();!a.done;a=s.next()){var c=a.value;if(c.connectionId===t)return c}}catch(l){r={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return null},i.prototype._delayedAbort=function(e,t){var n=this;setTimeout(function(){n._abort(e,t)},0)},i.prototype._abort=function(e,t){a.default.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()},i.prototype.emitError=function(e,t){var n;a.default.error("Error:",t),(n="string"==typeof t?new Error(t):t).type=e,this.emit(d.PeerEventType.Error,n)},i.prototype.destroy=function(){this.destroyed||(a.default.log("Destroy peer with ID:"+this.id),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit(d.PeerEventType.Close))},i.prototype._cleanup=function(){var e,t;try{for(var r=n(this._connections.keys()),o=r.next();!o.done;o=r.next()){var i=o.value;this._cleanupPeer(i),this._connections.delete(i)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.socket.removeAllListeners()},i.prototype._cleanupPeer=function(e){var t,r,o=this._connections.get(e);if(o)try{for(var i=n(o),s=i.next();!s.done;s=i.next()){s.value.close()}}catch(a){t={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},i.prototype.disconnect=function(){if(!this.disconnected){var e=this.id;a.default.log("Disconnect peer with ID:"+e),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit(d.PeerEventType.Disconnected,e)}},i.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)a.default.log("Attempting reconnection to server with ID "+this._lastServerId),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");a.default.error("In a hurry? We're still trying to make the initial connection!")}},i.prototype.listAllPeers=function(e){var t=this;void 0===e&&(e=function(e){}),this._api.listAllPeers().then(function(t){return e(t)}).catch(function(e){return t._abort(d.PeerErrorType.ServerError,e)})},i.DEFAULT_KEY="peerjs",i}(i.EventEmitter);exports.Peer=f;
},{"eventemitter3":"JJlS","./util":"BHXf","./logger":"WOs9","./socket":"wJlv","./mediaconnection":"dbHP","./dataconnection":"GBTQ","./enums":"ZRYf","./api":"in7L"}],"iTK6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.peerjs=void 0;var e=require("./util"),r=require("./peer");exports.peerjs={Peer:r.Peer,util:e.util},exports.default=r.Peer,window.peerjs=exports.peerjs,window.Peer=r.Peer;
},{"./util":"BHXf","./peer":"Hxpd"}]},{},["iTK6"], null)
//# sourceMappingURL=/peerjs.min.js.map

/***/ }),

/***/ "./src/game/main.ts":
/*!**************************!*\
  !*** ./src/game/main.ts ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getNextPuzzle = exports.g = void 0;
const van_1 = __webpack_require__(/*! ../van */ "./src/van.ts");
const PUZZLES_URL = "/common/home/rbk70/projects/chess-please/src/game/puzzles.csv";
let canvas_element = document.getElementById("target");
function getNextPuzzle(puzzles, target_rating, range) {
    let filtered = puzzles.filter(p => p.rating >= target_rating - range && p.rating <= target_rating + range);
    if (filtered.length == 0) {
        return null;
    }
    return filtered[Math.floor(Math.random() * filtered.length)];
}
exports.getNextPuzzle = getNextPuzzle;
(function () {
    return __awaiter(this, void 0, void 0, function* () {
        let puzzles_raw = yield fetch(PUZZLES_URL);
        let puzzles_lines = (yield puzzles_raw.text()).split("\n");
        let puzzles = puzzles_lines.map(line => {
            let lines_split = line.split(",");
            return {
                id: lines_split[0],
                fen: lines_split[1],
                solution: lines_split[2] ? lines_split[2].split(" ") : [],
                rating: parseInt(lines_split[3])
            };
        });
        puzzles.sort((a, b) => a.rating - b.rating);
        exports.g = new van_1.game(canvas_element.getContext("2d"), {
            rating: 1600,
            puzzles
        });
        exports.g.loadRoomString("boardView");
    });
})();


/***/ }),

/***/ "./src/game/objects/abstract/piece.ts":
/*!********************************************!*\
  !*** ./src/game/objects/abstract/piece.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.piece = void 0;
const controls_1 = __webpack_require__(/*! lib/controls */ "./src/lib/controls.ts");
const object_1 = __webpack_require__(/*! lib/object */ "./src/lib/object.ts");
const van_1 = __webpack_require__(/*! src/van */ "./src/van.ts");
class piece extends object_1.obj {
    constructor(state, params = van_1.copy(piece.default_params)) {
        super(state, params);
        this.sprite_url = "./sprites/Error.png";
        this.collision = false;
        this.render = true;
        this.static = true;
        this.tags.add("piece");
        switch (params.type) {
            case "P":
                this.sprite_url = "./sprites/chess/white_pawn.png";
                this.width = 12;
                this.height = 16;
                break;
            case "p":
                this.sprite_url = "./sprites/chess/black_pawn.png";
                this.width = 12;
                this.height = 16;
                break;
            case "K":
                this.sprite_url = "./sprites/chess/white_king.png";
                this.width = 20;
                this.height = 20;
                break;
            case "k":
                this.sprite_url = "./sprites/chess/black_king.png";
                this.width = 20;
                this.height = 20;
                break;
            case "B":
                this.sprite_url = "./sprites/chess/white_bishop.png";
                this.width = 16;
                this.height = 20;
                break;
            case "b":
                this.sprite_url = "./sprites/chess/black_bishop.png";
                this.width = 16;
                this.height = 20;
                break;
            case "N":
                this.sprite_url = "./sprites/chess/white_knight.png";
                this.width = 20;
                this.height = 20;
                break;
            case "n":
                this.sprite_url = "./sprites/chess/black_knight.png";
                this.width = 20;
                this.height = 20;
                break;
            case "R":
                this.sprite_url = "./sprites/chess/white_rook.png";
                this.width = 16;
                this.height = 20;
                break;
            case "r":
                this.sprite_url = "./sprites/chess/black_rook.png";
                this.width = 14;
                this.height = 18;
                break;
            case "Q":
                this.sprite_url = "./sprites/chess/white_queen.png";
                this.width = 18;
                this.height = 20;
                break;
            case "q":
                this.sprite_url = "./sprites/chess/black_queen.png";
                this.width = 18;
                this.height = 20;
                break;
        }
    }
    statef(time_delta) {
        super.statef(time_delta);
    }
    renderf(time_delta) {
        return super.renderf(time_delta);
    }
    registerAnimations() {
    }
    registerAudio() {
    }
    registerControls() {
        this.bindControl("mouse0down", controls_1.exec_type.once, () => {
            let mouse = controls_1.Poll_Mouse(this.getRoom().cameras[0]);
            if (this.collidesWithBox({ x: mouse.x, y: mouse.y, width: 20, height: 20 })) {
                this.getRoom().state.dragging = this;
                this.getRoom().state.start_drag = this.state.position;
                this.layer = 2;
            }
        });
    }
}
exports.piece = piece;
piece.default_params = {
    type: "P",
    square: "a1"
};


/***/ }),

/***/ "./src/game/objects/board.ts":
/*!***********************************!*\
  !*** ./src/game/objects/board.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.board = void 0;
const object_1 = __webpack_require__(/*! lib/object */ "./src/lib/object.ts");
const van_1 = __webpack_require__(/*! src/van */ "./src/van.ts");
class board extends object_1.obj {
    constructor(state, params = van_1.copy(board.default_params)) {
        super(state, params);
        this.sprite_url = "./sprites/chess/board.png";
        this.height = 180;
        this.width = 180;
        this.collision = true;
        this.render = true;
        this.layer = 0;
        this.static = true;
        this.tags.add("board");
    }
    statef(time_delta) {
        super.statef(time_delta);
    }
    renderf(time_delta) {
        return super.renderf(time_delta);
    }
    registerAnimations() {
    }
    registerAudio() {
    }
    registerControls() {
    }
}
exports.board = board;
board.default_params = {};


/***/ }),

/***/ "./src/game/objects/pawn.ts":
/*!**********************************!*\
  !*** ./src/game/objects/pawn.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.pawn = void 0;
const van_1 = __webpack_require__(/*! src/van */ "./src/van.ts");
const piece_1 = __webpack_require__(/*! ./abstract/piece */ "./src/game/objects/abstract/piece.ts");
class pawn extends piece_1.piece {
    constructor(state, params = van_1.copy(piece_1.piece.default_params)) {
        super(state, params);
        this.state.scaling = {
            height: 8,
            width: 8
        };
    }
    statef(time_delta) {
        super.statef(time_delta);
    }
    renderf(time_delta) {
        return super.renderf(time_delta);
    }
    registerAnimations() {
    }
    registerAudio() {
    }
}
exports.pawn = pawn;


/***/ }),

/***/ "./src/game/objects/prefabs.ts":
/*!*************************************!*\
  !*** ./src/game/objects/prefabs.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.prefabs = void 0;
const board_1 = __webpack_require__(/*! ./board */ "./src/game/objects/board.ts");
const pawn_1 = __webpack_require__(/*! ./pawn */ "./src/game/objects/pawn.ts");
exports.prefabs = {
    board: board_1.board,
    pawn: pawn_1.pawn,
};


/***/ }),

/***/ "./src/game/rooms/boardView.json":
/*!***************************************!*\
  !*** ./src/game/rooms/boardView.json ***!
  \***************************************/
/*! exports provided: objects, default */
/***/ (function(module) {

module.exports = JSON.parse("{\"objects\":[{\"type\":\"board\",\"state\":{\"position\":{\"x\":0,\"y\":0.6619656075768603},\"scaling\":{\"width\":8,\"height\":8}}}]}");

/***/ }),

/***/ "./src/game/rooms/boardView.ts":
/*!*************************************!*\
  !*** ./src/game/rooms/boardView.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.boardView = void 0;
const room_1 = __webpack_require__(/*! lib/room */ "./src/lib/room.ts");
const van_1 = __webpack_require__(/*! src/van */ "./src/van.ts");
const config = __webpack_require__(/*! ./boardView.json */ "./src/game/rooms/boardView.json");
const controls_1 = __webpack_require__(/*! lib/controls */ "./src/lib/controls.ts");
const main_1 = __webpack_require__(/*! game/main */ "./src/game/main.ts");
const render_1 = __webpack_require__(/*! lib/render */ "./src/lib/render.ts");
const piece_1 = __webpack_require__(/*! game/objects/abstract/piece */ "./src/game/objects/abstract/piece.ts");
const chess_js_1 = __webpack_require__(/*! chess.js */ "./node_modules/chess.js/chess.js");
const math_1 = __webpack_require__(/*! lib/math */ "./src/lib/math.ts");
const hud_1 = __webpack_require__(/*! lib/hud */ "./src/lib/hud.ts");
let cfig = config;
class boardHud extends hud_1.HUD {
    setTextElements() {
        return [
            new hud_1.Text({
                position: math_1.Vec.create(49 * van_1.viewport.width / 50, 2 * van_1.viewport.height / 20),
                size: 40,
                scaling: 1,
                font: "VT323",
                color: "white",
                align: "right"
            }, () => `${main_1.g.state.globals.rating}`),
        ];
    }
}
class boardView extends room_1.room {
    constructor(game) {
        super(game, cfig);
        this.background_url = "./sprites/Error.png";
        this.render = true;
        this.proximity_map = new room_1.proximity_matrix(2000, 1);
        this.cameras.push(new render_1.Camera({
            x: 0,
            y: 0,
            dimensions: van_1.viewport,
            scaling: 0.3
        }, {
            x: 0,
            y: 0,
            width: 1,
            height: 1
        }, new boardHud()));
        this.state = {
            dragging: null,
            start_drag: null,
            perspective: null,
            puzzle: null
        };
    }
    registerControls() {
        super.registerControls();
        this.bindControl("KeyC", controls_1.exec_type.once, () => {
            this.getObjByTag("piece").forEach((piece) => piece.delete());
            console.log(this.objects);
        });
        this.bindControl("mouse0down", controls_1.exec_type.once, () => {
            console.log(this.objects);
        });
        this.bindControl("mouse0up", controls_1.exec_type.once, () => {
            if (this.state.dragging) {
                let mouse = controls_1.Poll_Mouse(this.cameras[0]);
                this.state.dragging.layer = 1;
                if (mouse.x > 700 || mouse.y > 700 || mouse.x < -700 || mouse.y < -700) {
                    this.state.dragging.state.position = this.state.start_drag;
                }
                else {
                    let rows = ["a", "b", "c", "d", "e", "f", "g", "h"];
                    let cols = ["1", "2", "3", "4", "5", "6", "7", "8"];
                    if (this.state.perspective == "w") {
                        rows = rows.reverse();
                        cols = cols.reverse();
                    }
                    let mod_x = Math.floor(mouse.x / 178.571429) + 4;
                    let mod_y = Math.floor(mouse.y / 178.571429) + 4;
                    let square = `${rows[mod_x]}${cols[mod_y]}`;
                    let full_move = this.state.dragging.params.square + square;
                    console.log(full_move + " " + this.state.puzzle.solution[0]);
                    if (full_move == this.state.puzzle.solution[0]) {
                        console.log("correct");
                        let x = -625 + 178.571429 * (mod_x);
                        let y = -625 + 178.571429 * (mod_y);
                        let collision = this.checkObjectsPointInclusive(mouse, ["piece"]).filter((obj) => obj != this.state.dragging);
                        this.state.puzzle.solution.shift();
                        if (collision.length > 0) {
                            collision[0].delete();
                            console.log("delete");
                        }
                        this.state.dragging.state.position.x = x;
                        this.state.dragging.state.position.y = y;
                        this.state.dragging.params.square = square;
                        if (this.state.puzzle.solution.length > 0) {
                            let next_move = this.state.puzzle.solution.shift();
                            this.otherPlayerMove(next_move);
                        }
                        else {
                            this.showNextPuzzle();
                            main_1.g.state.globals.rating += 25;
                        }
                    }
                    else {
                        console.log("incorrect");
                        this.state.dragging.state.position.x = this.state.start_drag.x;
                        this.state.dragging.state.position.y = this.state.start_drag.y;
                    }
                }
                this.state.dragging = null;
                this.state.start_drag = null;
            }
        });
        this.bindControl("KeyX", controls_1.exec_type.once, () => __awaiter(this, void 0, void 0, function* () {
        }));
    }
    showNextPuzzle() {
        return __awaiter(this, void 0, void 0, function* () {
            let puzzles = main_1.g.state.globals.puzzles;
            let rating = main_1.g.state.globals.rating;
            let next_puzzle;
            do {
                next_puzzle = main_1.getNextPuzzle(puzzles, rating, 50);
            } while (next_puzzle.solution.length <= 2);
            let chess = new chess_js_1.Chess(next_puzzle.fen);
            let board = chess.board();
            console.log(chess.ascii());
            console.log(chess.fen());
            this.getObjByTag("piece").forEach(p => p.delete());
            this.state.perspective = chess.turn();
            this.state.puzzle = next_puzzle;
            if (chess.turn() === "b") {
                board.reverse();
                //board = board.map(row => row.reverse());
            }
            else {
                board = board.map(row => row.reverse());
            }
            console.log(next_puzzle.solution);
            for (let y = 0; y < 8; y++) {
                for (let x = 0; x < 8; x++) {
                    if (board[y][x]) {
                        let type = board[y][x].type;
                        if (board[y][x].color === "w") {
                            type = type.toUpperCase();
                        }
                        yield this.addItem(new piece_1.piece({
                            position: math_1.Vec.create((x - 4) * 178.571429 + 90, (y - 4) * 178.571429 + 90),
                            scaling: {
                                width: 8,
                                height: 8
                            }
                        }, {
                            type: type,
                            square: board[y][x].square
                        }));
                    }
                }
            }
            let next_move = this.state.puzzle.solution.shift();
            this.otherPlayerMove(next_move);
        });
    }
    squareToPosition(square) {
        let rows = ["a", "b", "c", "d", "e", "f", "g", "h"];
        let cols = ["1", "2", "3", "4", "5", "6", "7", "8"];
        if (this.state.perspective == "w") {
            rows = rows.reverse();
            cols = cols.reverse();
        }
        let x = rows.indexOf(square[0]);
        let y = cols.indexOf(square[1]);
        return math_1.Vec.create((x - 4) * 178.571429 + 90, (y - 4) * 178.571429 + 90);
    }
    otherPlayerMove(move) {
        let start = this.squareToPosition(move.substring(0, 2));
        let end = this.squareToPosition(move.substring(2, 4));
        let ai_piece = this.checkObjectsPointInclusive(start, ["piece"])[0];
        let taken_piece = this.checkObjectsPointInclusive(end, ["piece"]);
        if (taken_piece.length > 0) {
            taken_piece[0].delete();
        }
        this.movePiece(ai_piece, end, 175);
    }
    movePiece(piece, target, time) {
        let counter = 0;
        let diff = math_1.Vec.sub(target, piece.state.position);
        let interval = setInterval(() => {
            let offset = math_1.Vec.func(diff, (v) => v / 60);
            piece.state.position = math_1.Vec.add(piece.state.position, offset);
            counter++;
            if (counter === 60) {
                clearInterval(interval);
            }
        }, time / 60);
    }
    registerParticles() {
    }
    registerAudio() {
        this.audio.add("russian", "./sounds/Russian.mpga");
    }
    initialize() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.showNextPuzzle();
            this.audio.play("russian", 1);
        });
    }
    statef(delta_time) {
        super.statef(delta_time);
        if (this.state.dragging) {
            let mouse = controls_1.Poll_Mouse(this.cameras[0]);
            this.state.dragging.state.position = mouse;
        }
    }
}
exports.boardView = boardView;


/***/ }),

/***/ "./src/game/rooms/rooms.ts":
/*!*********************************!*\
  !*** ./src/game/rooms/rooms.ts ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.rooms = void 0;
const boardView_1 = __webpack_require__(/*! ./boardView */ "./src/game/rooms/boardView.ts");
exports.rooms = {
    boardView: boardView_1.boardView,
};


/***/ }),

/***/ "./src/lib/audio.ts":
/*!**************************!*\
  !*** ./src/lib/audio.ts ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.audio = void 0;
const debug_1 = __webpack_require__(/*! ./debug */ "./src/lib/debug.ts");
const van_1 = __webpack_require__(/*! ../van */ "./src/van.ts");
class audio {
    constructor() {
        this.sounds = {};
    }
    add(name, url) {
        let p = url;
        if (van_1.DEBUG) {
            p = debug_1.path.join(debug_1.root_path, url);
        }
        console.log(p);
        this.sounds[name] = new Audio(p);
        console.log(this.sounds[name]);
    }
    load() {
        return __awaiter(this, void 0, void 0, function* () {
            let keys = Object.keys(this.sounds);
            let promises = keys.map((key) => {
                return new Promise((resolve, reject) => {
                    this.sounds[key].addEventListener("canplaythrough", (e) => {
                        resolve();
                    });
                });
            });
            try {
                let x = yield Promise.all(promises);
                return (x);
            }
            catch (e) {
                console.log(e);
            }
        });
    }
    play(name, volume) {
        let a = this.sounds[name];
        a.pause();
        a.currentTime = 0;
        a.volume = volume;
        a.play();
    }
}
exports.audio = audio;


/***/ }),

/***/ "./src/lib/collision.ts":
/*!******************************!*\
  !*** ./src/lib/collision.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.velocityCollisionCheck = exports.check_collisions = exports.check_all_collisions = exports.check_all_objects = exports.getEncompassingBox = exports.boxCollidesWithBox = exports.pointCollidesWithBox = void 0;
const object_1 = __webpack_require__(/*! ../lib/object */ "./src/lib/object.ts");
var direction;
(function (direction) {
    direction[direction["left"] = 0] = "left";
    direction[direction["right"] = 1] = "right";
    direction[direction["up"] = 2] = "up";
    direction[direction["down"] = 3] = "down";
})(direction || (direction = {}));
function pointCollidesWithBox(point, box) {
    return boxCollidesWithBox({ x: point.x, y: point.y, width: 0, height: 0 }, box);
}
exports.pointCollidesWithBox = pointCollidesWithBox;
function boxCollidesWithBox(box1, box2) {
    let collides_horrizontally = false, collides_vertically = false;
    let object_bounds = {
        left: box1.x - box1.width / 2,
        right: box1.x + box1.width / 2,
        top: box1.y + box1.height / 2,
        bottom: box1.y - box1.height / 2
    };
    let other_object_bounds = {
        left: box2.x - box2.width / 2,
        right: box2.x + box2.width / 2,
        top: box2.y + box2.height / 2,
        bottom: box2.y - box2.height / 2
    };
    //We can compare the sides of the boxes to see if they overlap
    //We check once for hoizontal overlap, then vertical.
    if ((object_bounds.left >= other_object_bounds.left && object_bounds.left < other_object_bounds.right) || (other_object_bounds.left > object_bounds.left && other_object_bounds.left < object_bounds.right)) {
        collides_horrizontally = true;
    }
    else {
        return false;
    }
    if ((object_bounds.bottom >= other_object_bounds.bottom && object_bounds.bottom < other_object_bounds.top) || (other_object_bounds.bottom > object_bounds.bottom && other_object_bounds.bottom < object_bounds.top)) {
        collides_vertically = true;
    }
    else {
        return false;
    }
    return collides_horrizontally && collides_vertically;
}
exports.boxCollidesWithBox = boxCollidesWithBox;
function getEncompassingBox(objects) {
    let first_object = objects[0].getBoundingBox();
    let max_y = first_object.top_right.y;
    let max_x = first_object.top_right.x;
    let min_y = first_object.bottom_left.y;
    let min_x = first_object.bottom_left.x;
    for (let a = 1; a < objects.length; a++) {
        let object = objects[a].getBoundingBox();
        if (object.top_right.y > max_y)
            max_y = object.top_right.y;
        if (object.top_right.x > max_x)
            max_x = object.top_right.x;
        if (object.bottom_left.y < min_y)
            min_y = object.bottom_left.y;
        if (object.bottom_left.x < min_x)
            min_x = object.bottom_left.x;
    }
    return {
        x: min_x + (max_x - min_x) / 2,
        y: min_y + (max_y - min_y) / 2,
        height: max_y - min_y,
        width: max_x - min_x
    };
}
exports.getEncompassingBox = getEncompassingBox;
function check_all_objects(c, objs, exemption = []) {
    return objs.filter((a) => (!exemption.some((b) => a.tags.has(b)) && a.collidesWithBox(c)));
}
exports.check_all_objects = check_all_objects;
function check_all_collisions(c, objs, exemption = []) {
    let matched = [];
    for (let a of objs) {
        if (!exemption.some((b) => a.tags.has(b)) && a.collision && a.collidesWithBox(c)) {
            matched.push(a);
        }
    }
    return matched;
}
exports.check_all_collisions = check_all_collisions;
//Checks up to the first collision
function check_collisions(c, objs, exemption) {
    for (let a of objs) {
        if (a.id !== exemption && a.collision && a.collidesWithBox(c)) {
            return a;
        }
    }
    return null;
}
exports.check_collisions = check_collisions;
function velocity_max(velocity, box, objs, exemption, dir) {
    let collision = check_collisions(box, objs, exemption);
    if (collision == null) {
        return velocity;
    }
    else {
        let collider = collision;
        let origin = object_1.getId(objs, exemption);
        let orig_st = origin.state;
        let collider_st = collider.state;
        let orig_col = origin.getFullCollisionBox();
        let collider_col = collider.getFullCollisionBox();
        if (dir == direction.left) {
            return (orig_col.x - orig_col.width / 2) - (collider_col.x + collider_col.width / 2);
        }
        else if (dir == direction.right) {
            return (collider_col.x - collider_col.width / 2) - (orig_col.x + orig_col.width / 2);
        }
        else if (dir == direction.down) {
            return (orig_col.y - orig_col.height / 2) - (collider_col.y + collider_col.height / 2);
        }
        else if (dir == direction.up) {
            return (collider_col.y - collider_col.height / 2) - (orig_col.y + orig_col.height / 2);
        }
    }
}
function velocityCollisionCheck(object, list) {
    list = [...list];
    let ob = object;
    let st = object.state;
    let x_vel = st.velocity.x;
    let y_vel = st.velocity.y;
    if (x_vel == 0 && y_vel == 0)
        return;
    if (!ob.collision) {
        ob.state.position.x += ob.state.velocity.x;
        ob.state.position.y += ob.state.velocity.y;
        return;
    }
    let col_box = ob.getFullCollisionBox();
    if (x_vel > 0) {
        let box = {
            x: col_box.x + col_box.width / 2 + x_vel / 2,
            y: col_box.y,
            width: x_vel,
            height: col_box.height
        };
        let vel = velocity_max(st.velocity.x, box, list, ob.id, direction.right);
        if (vel > 0) {
            st.position.x = st.position.x + vel;
        }
        else {
            st.velocity.x = 0;
        }
    }
    else if (x_vel < 0) {
        let box = {
            x: x_vel / 2 + col_box.x - col_box.width / 2,
            y: col_box.y,
            width: -1 * x_vel,
            height: col_box.height
        };
        let vel = velocity_max(st.velocity.x, box, list, ob.id, direction.left);
        if (vel < 0) {
            st.position.x = st.position.x + vel;
        }
        else {
            st.velocity.x = 0;
        }
    }
    if (y_vel > 0) {
        let box = {
            x: col_box.x,
            y: col_box.y + col_box.height / 2 + y_vel / 2,
            width: col_box.width,
            height: y_vel
        };
        let vel = velocity_max(st.velocity.y, box, list, ob.id, direction.up);
        if (vel > 0) {
            st.position.y = st.position.y + vel;
        }
        else {
            st.velocity.y = 0;
        }
    }
    else if (y_vel < 0) {
        let box = {
            x: col_box.x,
            y: y_vel / 2 + col_box.y - col_box.height / 2,
            width: col_box.width,
            height: -1 * y_vel
        };
        let vel = velocity_max(st.velocity.y, box, list, ob.id, direction.down);
        if (vel < 0) {
            st.position.y = st.position.y + vel;
        }
        else {
            st.velocity.y = 0;
        }
    }
}
exports.velocityCollisionCheck = velocityCollisionCheck;


/***/ }),

/***/ "./src/lib/controls.ts":
/*!*****************************!*\
  !*** ./src/lib/controls.ts ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Bind = exports.Unbind = exports.ExecuteRepeatBinds = exports.Poll_Mouse = exports.held_keys = exports.handleGamepad = exports.within_Canvas = exports.debug_binds = exports.exec_type = exports.btype = void 0;
const main_1 = __webpack_require__(/*! ../game/main */ "./src/game/main.ts");
const van_1 = __webpack_require__(/*! ../van */ "./src/van.ts");
const debug_1 = __webpack_require__(/*! ./debug */ "./src/lib/debug.ts");
var btype;
(function (btype) {
    btype[btype["mouse"] = 0] = "mouse";
    btype[btype["keyboard"] = 1] = "keyboard";
    btype[btype["gamepad"] = 2] = "gamepad";
})(btype = exports.btype || (exports.btype = {}));
var exec_type;
(function (exec_type) {
    exec_type[exec_type["once"] = 0] = "once";
    exec_type[exec_type["repeat"] = 1] = "repeat";
})(exec_type = exports.exec_type || (exports.exec_type = {}));
let id = 0;
let x = 0;
let y = 0;
let last_x = 0;
let last_y = 0;
let binds = {};
exports.debug_binds = [];
let mouseBinds = {};
let bind_count = 0;
let all_binds = [];
let repeat_binds = [];
let target = document.getElementById("target");
/*
export function init_click_handler(game:game<unknown>){
  window.addEventListener("click",(e)=>{
    
    let mouse = Poll_Mouse(game.state.cameras[0]);
    if(!mouse){
      return
    }
    let box:collision_box = {
      x:mouse.x,
      y:mouse.y,
      height:1,
      width:1
    };
    
  let d:bind[];
  if(DEBUG){
    if(debug_state.last_clicked && debug_state.last_clicked.id == "debug_target"){
      d = [...debug_binds];
    }
    else if(!PAUSED && debug_state.last_clicked && debug_state.last_clicked.id == "target"){
      d= [...all_binds]
    }
    else{
      d = [];
    }
  }
  else{
    d = [...all_binds];
  }
    for(let a = 0;a < d.length;a++){
      let selected = d[a];
      if(selected.type === btype.mouse && selected.key === "mouse1" && selected.execute == exec_type.once){
        if(selected.obj !== undefined){
          if(selected.obj.collidesWithBox(box)){
            selected.function();
          }
        }
        else{
          selected.function();
        }
      }
    }
  })
}
*/
function within_Canvas(canvas) {
    let wratio = parseFloat(window.getComputedStyle(canvas).width) / van_1.GetViewportDimensions().width;
    let vratio = parseFloat(window.getComputedStyle(canvas).height) / van_1.GetViewportDimensions().height;
    let bounds = canvas.getBoundingClientRect();
    if (x > bounds.left && x < bounds.right && y < bounds.bottom && y > bounds.top) {
        return true;
    }
    return false;
}
exports.within_Canvas = within_Canvas;
let binding_map = {};
let pressBind = (key, hud_layer = false) => {
    let on_names;
    let off_names;
    let base;
    let selected_bind_map;
    if (key.slice(-4) === "down") {
        base = key.substring(0, key.length - 4);
        on_names = [base, key];
        off_names = [`${base}up`];
    }
    else if (key.slice(-2) === "up") {
        base = key.substring(0, key.length - 2);
        on_names = [key];
        off_names = [`${base}down`, base];
    }
    else {
        throw new Error("Attempted to activate invalid bind.");
    }
    const clicked_on = (target) => (debug_1.debug_state.last_clicked && debug_1.debug_state.last_clicked.id == target);
    const valid_mouse_click = (bind, index) => {
        return bind.type != btype.mouse || (within_Canvas(main_1.g.state.canvases[index]) && (bind.obj == undefined || (bind.obj && bind.obj.info.on_hud_layer == hud_layer)));
    };
    for (let keyname of on_names) {
        if (keyname == base) {
            exports.held_keys[keyname] = true;
        }
        let selected_binds = binding_map[keyname];
        if (selected_binds !== undefined) {
            for (let bind of selected_binds) {
                if ((van_1.DEBUG && bind.debug && clicked_on("debug_target") && valid_mouse_click(bind, 1))
                    ||
                        (van_1.DEBUG && (!van_1.PAUSED && clicked_on("target") && valid_mouse_click(bind, 0)))
                    ||
                        !van_1.DEBUG && valid_mouse_click(bind, 0)) {
                    bind.executed = true;
                    if (bind.execute == exec_type.repeat) {
                        bind.repeat_timer.active = true;
                    }
                    else {
                        bind.function();
                    }
                }
            }
        }
    }
    for (let keyname of off_names) {
        if (keyname == base) {
            exports.held_keys[keyname] = false;
        }
        let selected_binds = binding_map[keyname];
        if (selected_binds !== undefined) {
            for (let bind of selected_binds) {
                bind.executed = false;
                if (bind.execute == exec_type.repeat) {
                    bind.repeat_timer.active = false;
                }
            }
        }
    }
    for (let repeat_bind of repeat_binds) {
        let bind = repeat_bind.bind;
        if (on_names.includes(repeat_bind.bind.key)) {
            if ((van_1.DEBUG && bind.debug && clicked_on("debug_target") && valid_mouse_click(bind, 1))
                ||
                    (van_1.DEBUG && (!van_1.PAUSED && clicked_on("target") && valid_mouse_click(bind, 0)))
                ||
                    !van_1.DEBUG && valid_mouse_click(bind, 0)) {
                repeat_bind.active = true;
            }
        }
        else if (off_names.includes(repeat_bind.bind.key)) {
            repeat_bind.active = false;
        }
    }
};
let xbox_key = ["A", "B", "X", "Y", "LB", "RB", "LT", "RT", "Back", "Select", "ThumbLeftDown", "ThumbRightDown", "PadUp", "PadDown", "PadLeft", "PadRight", "Start"];
let xbox_keys_state = [];
xbox_key.forEach((key) => {
    xbox_keys_state.push({
        key,
        last_state: 0
    });
});
function handleGamepad(gamepad) {
    if (binding_map["GamepadLeftThumb"] != undefined) {
        for (let bind of binding_map["GamepadLeftThumb"]) {
            bind.function(gamepad.axes[0], gamepad.axes[1] * -1);
        }
    }
    if (binding_map["GamepadRightThumb"] != undefined) {
        for (let bind of binding_map["GamepadRightThumb"]) {
            bind.function(gamepad.axes[2], gamepad.axes[3] * -1);
        }
    }
    for (let [i, button] of gamepad.buttons.entries()) {
        let button_entry = xbox_keys_state[i];
        if (button.value > 0 && button_entry.last_state == 0) {
            //Button Down
            pressBind(`Gamepad${button_entry.key}down`);
        }
        else if (button.value == 0 && xbox_keys_state[i].last_state > 0) {
            pressBind(`Gamepad${button_entry.key}up`);
        }
        button_entry.last_state = button.value;
    }
}
exports.handleGamepad = handleGamepad;
let was_valid = false;
window.addEventListener("mousedown", (e) => {
    e.preventDefault();
    let hud_clicked = false;
    for (let camera of main_1.g.getRoom().cameras) {
        let mouse = Poll_Mouse(camera, true);
        if (mouse && camera.hud) {
            for (let obj of camera.hud.graphic_elements.filter((obj) => obj.hud_clickable)) {
                if (obj.collidesWithBox({ x: mouse.x, y: mouse.y, width: 0, height: 0 })) {
                    pressBind("mouse" + e.button + "down", true);
                    return;
                }
            }
        }
    }
    pressBind("mouse" + e.button + "down");
});
window.addEventListener("mouseup", (e) => {
    e.preventDefault();
    pressBind(`mouse${e.button}up`);
});
exports.held_keys = {};
window.addEventListener("wheel", (e) => {
    let code;
    e.preventDefault();
    if (e.deltaY < 0) {
        code = "scrollup";
    }
    else if (e.deltaY > 0) {
        code = "scrolldown";
    }
    pressBind(code);
});
window.addEventListener("keydown", (e) => {
    if (e.code == "Tab") {
        e.preventDefault();
    }
    pressBind(`${e.code}down`);
});
window.addEventListener("keyup", (e) => {
    pressBind(`${e.code}up`);
});
let tracker = document.getElementById("target");
window.addEventListener("mousemove", (e) => {
    var rect = e.target.getBoundingClientRect();
    //console.log(e.target)
    last_x = x;
    last_y = y;
    x = e.clientX; //x position within the element.
    y = e.clientY; //y position within the element.
});
function Poll_Mouse(camera, hud_layer = false, canvas = main_1.g.state.canvases[0]) {
    let height = van_1.GetViewportDimensions().height;
    let wratio = parseFloat(window.getComputedStyle(canvas).width) / van_1.GetViewportDimensions().width;
    let vratio = parseFloat(window.getComputedStyle(canvas).height) / van_1.GetViewportDimensions().height;
    let bounds = canvas.getBoundingClientRect();
    if (x > bounds.left && x < bounds.right && y < bounds.bottom && y > bounds.top) {
        if (hud_layer) {
            return {
                x: (x - bounds.left) / wratio,
                y: ((height - (y - bounds.top) / vratio) - camera.state.viewport.y)
            };
        }
        return ({
            x: ((x - bounds.left - camera.state.viewport.x) / wratio / camera.state.scaling + camera.state.position.x - camera.state.dimensions.width / camera.state.scaling / 2),
            y: ((height - (y - bounds.top) / vratio) / camera.state.scaling + camera.state.position.y - camera.state.dimensions.height / camera.state.scaling / 2 - camera.state.viewport.y)
        });
    }
    return undefined;
}
exports.Poll_Mouse = Poll_Mouse;
function ExecuteRepeatBinds(b) {
    for (let a of repeat_binds) {
        if (a.bind.execute === exec_type.repeat && a.timer == 0 && a.active) {
            a.bind.function();
        }
        if (a.active || (!a.active && a.timer != 0))
            a.timer += b;
        if (a.timer > a.interval) {
            a.timer = 0;
        }
    }
}
exports.ExecuteRepeatBinds = ExecuteRepeatBinds;
function Unbind(bind_id) {
    for (let key of Object.keys(binding_map)) {
        for (let a = 0; a < binding_map[key].length; a++) {
            if (binding_map[key][a].id == bind_id) {
                binding_map[key].splice(a, 1);
                break;
            }
        }
    }
    for (let a = 0; a < repeat_binds.length; a++) {
        if (repeat_binds[a].bind.id == bind_id) {
            repeat_binds.splice(a, 1);
            break;
        }
    }
}
exports.Unbind = Unbind;
function Bind(keyname, func, type, interval, debug, obj) {
    let bind_type = btype.keyboard;
    if (keyname.slice(0, 5) === "mouse" || keyname.slice(0, 6) === "scroll") {
        bind_type = btype.mouse;
    }
    else if (keyname.slice(0, 7) == "Gamepad") {
        bind_type = btype.gamepad;
    }
    let b = {
        key: keyname,
        type: bind_type,
        debug,
        id,
        function: func,
        execute: type,
        executed: false,
        interval,
        obj
    };
    if (type == exec_type.repeat) {
        b.repeat_timer = {
            bind: b,
            timer: 0,
            interval,
            active: false
        };
        repeat_binds.push(b.repeat_timer);
    }
    if (binding_map[keyname] == undefined) {
        binding_map[keyname] = [];
    }
    binding_map[keyname].push(b);
    id++;
    return id - 1;
}
exports.Bind = Bind;


/***/ }),

/***/ "./src/lib/debug.ts":
/*!**************************!*\
  !*** ./src/lib/debug.ts ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.debug_setup = exports.debug_state = exports.debug_update_prefabs = exports.debug_update_obj_list = exports.debug_update_properties_element = exports.debug_update_room_list = exports.debug_statef = exports.Debug_hud = exports.renderer_path = exports.root_path = exports.project_path = exports.path = void 0;
const van_1 = __webpack_require__(/*! ../van */ "./src/van.ts");
let fs;
let ipcRenderer;
const prefabs_1 = __webpack_require__(/*! ../game/objects/prefabs */ "./src/game/objects/prefabs.ts");
exports.project_path = "";
exports.root_path = "";
exports.renderer_path = "./renderer.js";
if (van_1.DEBUG) {
    exports.path = window.require("path");
    fs = window.require("fs");
    ipcRenderer = window.require("electron").ipcRenderer;
    exports.project_path = ipcRenderer.sendSync('path-request', 'ping')[0];
    exports.root_path = exports.path.join(exports.project_path, "..");
    exports.renderer_path = exports.path.join(exports.root_path, "../../target/renderer.js");
}
const object_template_1 = __webpack_require__(/*! ./templates/object_template */ "./src/lib/templates/object_template.ts");
const room_template_1 = __webpack_require__(/*! ./templates/room_template */ "./src/lib/templates/room_template.ts");
const main_1 = __webpack_require__(/*! ../game/main */ "./src/game/main.ts");
const rooms_1 = __webpack_require__(/*! ../game/rooms/rooms */ "./src/game/rooms/rooms.ts");
const controls_1 = __webpack_require__(/*! ../lib/controls */ "./src/lib/controls.ts");
const hud_1 = __webpack_require__(/*! ../lib/hud */ "./src/lib/hud.ts");
const render_1 = __webpack_require__(/*! ../lib/render */ "./src/lib/render.ts");
class Debug_hud extends hud_1.HUD {
    setTextElements() {
        return [
            new hud_1.Text({
                position: {
                    x: 10,
                    y: van_1.viewport.height - 24
                },
                size: 22,
                font: "Alata",
                color: "white",
                align: "left",
                scaling: 1
            }, () => exports.debug_state.render_delta_time > 0 ? Math.round(1000 / exports.debug_state.render_delta_time) + "" : ""),
            new hud_1.Text({
                position: {
                    x: 10,
                    y: 10
                },
                size: 22,
                font: "Alata",
                color: "white",
                align: "left",
                scaling: 1
            }, () => `X:${exports.debug_state.camera.state.position.x.toFixed(0)}`),
            new hud_1.Text({
                position: {
                    x: 10,
                    y: 32
                },
                size: 22,
                font: "Alata",
                color: "white",
                align: "left",
                scaling: 1
            }, () => `Y:${exports.debug_state.camera.state.position.y.toFixed(0)}`),
            new hud_1.Text({
                position: {
                    x: van_1.viewport.width - 10,
                    y: 32
                },
                size: 22,
                font: "Alata",
                color: "white",
                align: "right",
                scaling: 1
            }, () => {
                let mouse = controls_1.Poll_Mouse(exports.debug_state.camera, false, exports.debug_state.target);
                if (mouse) {
                    return `${mouse.x.toFixed(0)}:X`;
                }
                return `:X`;
            }),
            new hud_1.Text({
                position: {
                    x: van_1.viewport.width - 10,
                    y: 10
                },
                size: 22,
                font: "Alata",
                color: "white",
                align: "right",
                scaling: 1
            }, () => {
                let mouse = controls_1.Poll_Mouse(exports.debug_state.camera, false, exports.debug_state.target);
                if (mouse) {
                    return `${mouse.y.toFixed(0)}:Y`;
                }
                return `:Y`;
            }),
            new hud_1.Text({
                position: {
                    x: van_1.viewport.width - 10,
                    y: van_1.viewport.height - 24
                },
                size: 22,
                font: "Alata",
                color: "white",
                align: "right",
                scaling: 1
            }, () => {
                return `${main_1.g.state.current_room.constructor.name}.ts`;
            })
        ];
    }
}
exports.Debug_hud = Debug_hud;
function debug_statef(t) {
    let mouse = controls_1.Poll_Mouse(exports.debug_state.camera, false, exports.debug_state.target);
    if (exports.debug_state.camera.hud) {
        exports.debug_state.camera.hud.statef(t);
    }
    if (!van_1.PAUSED) {
        debug_update_properties_element();
    }
    if (mouse) {
        if (exports.debug_state.selected_element) {
            if (van_1.PAUSED && controls_1.held_keys["ControlLeft"] && exports.debug_state.current_action.property == "scaling") {
                let dist = {
                    x: Math.abs(mouse.x - exports.debug_state.selected_element.state.position.x),
                    y: Math.abs(mouse.y - exports.debug_state.selected_element.state.position.y)
                };
                exports.debug_state.selected_element.state.scaling.width = (2 * dist.x) / exports.debug_state.selected_element.width;
                exports.debug_state.selected_element.state.scaling.height = (2 * dist.y) / exports.debug_state.selected_element.height;
            }
            else {
                let st = exports.debug_state.selected_element.state;
                st.position.x = mouse.x - exports.debug_state.selected_element_offset.x,
                    st.position.y = mouse.y - exports.debug_state.selected_element_offset.y;
            }
        }
        if (van_1.PAUSED && exports.debug_state.rotation_element) {
            exports.debug_state.rotation_element.state.rotation = exports.debug_state.rotation_element.angleTowardsPoint(mouse);
        }
        if (exports.debug_state.middle_position) {
            let diff_y = mouse.y - exports.debug_state.middle_position.y;
            let diff_x = mouse.x - exports.debug_state.middle_position.x;
            exports.debug_state.camera.state.position.x = exports.debug_state.camera.state.position.x + -1 * diff_x;
            exports.debug_state.camera.state.position.y = exports.debug_state.camera.state.position.y + -1 * diff_y;
        }
    }
}
exports.debug_statef = debug_statef;
function debug_update_room_list() {
    let list = document.getElementById("room_list");
    list.textContent = '';
    for (let room_name of Object.keys(rooms_1.rooms)) {
        let para = document.createElement("p");
        para.appendChild(document.createTextNode(room_name));
        para.classList.add("room_list_item");
        para.addEventListener("click", (e) => {
            main_1.g.loadRoomString(room_name);
        });
        list.appendChild(para);
    }
}
exports.debug_update_room_list = debug_update_room_list;
let properties_elements = undefined;
if (van_1.DEBUG) {
    properties_elements = {
        pos_x: document.getElementById("pos_x"),
        pos_y: document.getElementById("pos_y"),
        vel_x: document.getElementById("vel_x"),
        vel_y: document.getElementById("vel_y"),
        rot: document.getElementById("rot"),
        sca_x: document.getElementById("sca_x"),
        sca_y: document.getElementById("sca_y"),
        render: document.getElementById("render"),
        collision: document.getElementById("collision"),
        tags: document.getElementById("tags"),
        layer: document.getElementById("layer")
    };
    let inputs = document.getElementsByTagName("input");
    for (let a = 0; a < inputs.length; a++) {
        inputs[a].addEventListener("click", (e) => {
            inputs[a].focus();
        });
    }
    let focused;
    let debug_target = document.getElementById("debug_target");
    debug_target.addEventListener("click", (e) => {
        for (let a = 0; a < inputs.length; a++) {
            inputs[a].blur();
        }
    });
    let target = document.getElementById("target");
    target.addEventListener("click", (e) => {
        for (let a = 0; a < inputs.length; a++) {
            inputs[a].blur();
        }
    });
    properties_elements.pos_x.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        let new_val = parseFloat(properties_elements.pos_x.value) || 0;
        exports.debug_state.actions_stack.push({
            property: "position",
            element: ele,
            new: JSON.stringify({ x: new_val, y: ele.state.position.y }),
            old: JSON.stringify(ele.state.position)
        });
        ele.state.position.x = new_val;
    });
    properties_elements.pos_y.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        let new_val = parseFloat(properties_elements.pos_y.value) || 0;
        exports.debug_state.actions_stack.push({
            property: "position",
            element: ele,
            new: JSON.stringify({ x: ele.state.position.x, y: new_val }),
            old: JSON.stringify(ele.state.position)
        });
        ele.state.position.y = new_val;
    });
    properties_elements.vel_x.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        ele.state.velocity.x = parseFloat(properties_elements.vel_x.value) || 0;
    });
    properties_elements.vel_y.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        ele.state.velocity.y = parseFloat(properties_elements.vel_y.value) || 0;
    });
    properties_elements.rot.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        let new_val = parseFloat(properties_elements.rot.value) || 0;
        exports.debug_state.actions_stack.push({
            property: "rotation",
            element: ele,
            new: JSON.stringify(new_val),
            old: JSON.stringify(ele.state.rotation)
        });
        ele.state.rotation = new_val;
    });
    properties_elements.sca_x.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        let new_val = parseFloat(properties_elements.sca_x.value) || 0;
        exports.debug_state.actions_stack.push({
            property: "scaling",
            element: ele,
            new: JSON.stringify({ width: new_val, height: ele.state.scaling.height }),
            old: JSON.stringify(ele.state.scaling)
        });
        ele.state.scaling.width = new_val;
    });
    properties_elements.sca_y.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        let new_val = parseFloat(properties_elements.sca_y.value) || 0;
        exports.debug_state.actions_stack.push({
            property: "scaling",
            element: ele,
            new: JSON.stringify({ width: ele.state.scaling.width, height: new_val }),
            old: JSON.stringify(ele.state.scaling)
        });
        ele.state.scaling.height = new_val;
    });
    properties_elements.render.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        ele.render = properties_elements.render.checked;
    });
    properties_elements.collision.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        ele.collision = properties_elements.collision.checked;
    });
    properties_elements.tags.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        ele.tags = new Set(properties_elements.tags.value.split(","));
    });
    properties_elements.layer.addEventListener("input", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        ele.layer = parseInt(properties_elements.layer.value);
    });
    document.getElementById("delete_element").addEventListener("click", (e) => {
        let ele = exports.debug_state.selected_properties_element;
        ele.delete();
    });
}
function debug_update_properties_element() {
    if (exports.debug_state.selected_properties_element) {
        let ele = exports.debug_state.selected_properties_element;
        document.getElementById("obj_name").innerHTML = ele.constructor.name;
        properties_elements.pos_x.value = "" + ele.state.position.x.toFixed(2);
        properties_elements.pos_y.value = "" + ele.state.position.y.toFixed(2);
        properties_elements.vel_x.value = "" + ele.state.velocity.x.toFixed(2);
        properties_elements.vel_y.value = "" + ele.state.velocity.y.toFixed(2);
        properties_elements.rot.value = "" + ele.state.rotation.toFixed(2);
        properties_elements.sca_x.value = "" + ele.state.scaling.width.toFixed(2);
        properties_elements.sca_y.value = "" + ele.state.scaling.height.toFixed(2);
        properties_elements.tags.value = "" + Array.from(ele.tags).join(",");
        properties_elements.render.checked = ele.render;
        properties_elements.collision.checked = ele.collision;
        properties_elements.layer.value = "" + ele.layer;
        let list = document.getElementById("params_list");
        list.textContent = '';
        for (let k of Object.keys(ele.params)) {
            let p = document.createElement("p");
            let span = document.createElement("span");
            span.appendChild(document.createTextNode(k));
            let input = document.createElement("input");
            if (typeof ele.params[k] === "boolean") {
                input.setAttribute("type", "checkbox");
            }
            else if (typeof ele.params[k] === "number") {
                input.setAttribute("type", "number");
            }
            else if (typeof ele.params[k] === "string") {
                input.setAttribute("type", "text");
            }
            input.setAttribute("id", k);
            input.setAttribute("value", (JSON.stringify(ele.params[k])));
            input.addEventListener("click", (e) => {
                input.focus();
            });
            input.addEventListener("input", (e) => {
                let ele = exports.debug_state.selected_properties_element;
                let val = input.value;
                if (!isNaN(val)) {
                    ele.params[k] = parseFloat(val);
                }
                else if (val == "true") {
                    ele.params[k] = true;
                }
                else if (val == "false") {
                    ele.params[k] = false;
                }
                else {
                    try {
                        let parsed = JSON.parse(val);
                        ele.params[k] = JSON.parse(val);
                    }
                    catch (e) {
                    }
                }
            });
            p.appendChild(span);
            p.append(input);
            list.append(p);
        }
    }
}
exports.debug_update_properties_element = debug_update_properties_element;
function debug_update_obj_list() {
    let list = document.getElementById("objects_list");
    list.textContent = '';
    if (main_1.g.getRoom()) {
        for (let obj of main_1.g.getRoom().objects.slice().reverse()) {
            let para = document.createElement("p");
            para.appendChild(document.createTextNode(obj.constructor.name));
            para.classList.add("object_list_item");
            para.addEventListener("click", (e) => {
                if (exports.debug_state.selected_properties_element == obj) {
                    exports.debug_state.camera.state.position = Object.assign({}, obj.state.position);
                }
                else {
                    exports.debug_state.selected_properties_element = obj;
                    debug_update_properties_element();
                }
            });
            list.appendChild(para);
        }
    }
}
exports.debug_update_obj_list = debug_update_obj_list;
function debug_update_prefabs() {
    return __awaiter(this, void 0, void 0, function* () {
        let pres = Object.keys(prefabs_1.prefabs).map((o) => __awaiter(this, void 0, void 0, function* () {
            let a = (new prefabs_1.prefabs[o]({
                position: { x: 0, y: 0 },
                velocity: { x: 0, y: 0 },
                rotation: 0,
                scaling: { width: 1, height: 1 }
            }));
            yield a.load();
            a.render = true;
            let objs = a.combinedObjects();
            for (let obj of objs) {
                obj.UnbindAll();
            }
            let r = a.renderf(0);
            return {
                prefab: prefabs_1.prefabs[o],
                name: a.constructor.name,
                rendered: r
            };
        }));
        let a = yield Promise.all(pres);
        let target = document.getElementById("prefab_target");
        target.textContent = '';
        for (let prefab of a) {
            let div = document.createElement("div");
            let para = document.createElement("p");
            para.appendChild(document.createTextNode(prefab.name));
            div.appendChild(para);
            if (Array.isArray(prefab.rendered)) {
            }
            else {
                div.append(prefab.rendered.sprite.sprite_sheet);
            }
            div.classList.add("prefab_box");
            div.addEventListener("mousedown", () => __awaiter(this, void 0, void 0, function* () {
                let val = {
                    position: { x: exports.debug_state.camera.state.position.x, y: exports.debug_state.camera.state.position.y },
                    velocity: { x: 0, y: 0 },
                    rotation: 0,
                    scaling: { width: 1, height: 1 }
                };
                let obj = (new prefab.prefab(val));
                yield main_1.g.state.current_room.addItems(obj.combinedObjects());
            }));
            target.append(div);
        }
    });
}
exports.debug_update_prefabs = debug_update_prefabs;
exports.debug_setup = () => {
    exports.debug_state = {
        target: document.getElementById("debug_target"),
        camera: new render_1.Camera({
            x: 0,
            y: 0,
            dimensions: {
                height: van_1.viewport.height,
                width: van_1.viewport.width
            },
            scaling: 1,
            debug: true
        }, {
            x: 1,
            y: 0,
            width: 1,
            height: 1
        }),
        last_clicked: undefined,
        selected_element: undefined,
        selected_element_offset: undefined,
        rotation_element: undefined,
        middle_position: undefined,
        click_position: undefined,
        selected_properties_element: undefined,
        selected_element_initial_scaling: { width: 1, height: 1 },
        actions_stack: [],
        render_delta_time: 0,
        current_action: undefined,
        render_toggles: {
            "proximity_box": false,
            "path_finding": false,
            "collision_box": false,
            "bounding_box": false
        }
    };
    exports.debug_state.camera.hud = new Debug_hud();
    controls_1.Bind("mouse0down", () => {
        if (exports.debug_state.selected_element) {
            exports.debug_state.selected_element = null;
        }
        else {
            let mouse = controls_1.Poll_Mouse(exports.debug_state.camera, false, exports.debug_state.target);
            if (!mouse) {
                return;
            }
            exports.debug_state.click_position = mouse;
            let all_clicked = main_1.g.getRoom().checkObjectsPoint(mouse);
            let clicked;
            let filtered = all_clicked.filter((ele) => ele == exports.debug_state.selected_properties_element);
            if (filtered.length > 0) {
                clicked = filtered[0];
            }
            else {
                clicked = all_clicked.sort((a, b) => (b.layer - a.layer))[0];
            }
            if (clicked) {
                if (controls_1.held_keys["ControlLeft"]) {
                    exports.debug_state.current_action = {
                        element: clicked,
                        property: "scaling",
                        old: JSON.stringify(clicked.state.scaling),
                        new: undefined
                    };
                }
                else {
                    exports.debug_state.current_action = {
                        element: clicked,
                        property: "position",
                        old: JSON.stringify(clicked.state.position),
                        new: undefined
                    };
                }
                exports.debug_state.selected_properties_element = clicked;
                debug_update_properties_element();
                exports.debug_state.selected_element = clicked;
                exports.debug_state.selected_element_initial_scaling = clicked.state.scaling;
                exports.debug_state.selected_element_offset = {
                    x: mouse.x - clicked.state.position.x,
                    y: mouse.y - clicked.state.position.y
                };
            }
        }
    }, controls_1.exec_type.once, 1, true);
    controls_1.Bind("mouse1up", () => {
        exports.debug_state.middle_position = undefined;
    }, controls_1.exec_type.once, 1, true);
    controls_1.Bind("mouse1down", () => {
        let mouse = controls_1.Poll_Mouse(exports.debug_state.camera, false, exports.debug_state.target);
        if (!mouse) {
            return;
        }
        exports.debug_state.middle_position = mouse;
    }, controls_1.exec_type.once, 1, true);
    controls_1.Bind("mouse0up", () => {
        if (exports.debug_state.selected_element) {
            if (exports.debug_state.current_action.property == "scaling") {
                exports.debug_state.current_action.new = JSON.stringify(exports.debug_state.selected_element.state.scaling);
            }
            else if (exports.debug_state.current_action.property == "position") {
                exports.debug_state.current_action.new = JSON.stringify(exports.debug_state.selected_element.state.position);
            }
            exports.debug_state.actions_stack.push(exports.debug_state.current_action);
            exports.debug_state.selected_element = undefined;
        }
    }, controls_1.exec_type.once, 1, true);
    controls_1.Bind("mouse2down", () => {
        if (exports.debug_state.rotation_element) {
            exports.debug_state.rotation_element = null;
        }
        else {
            let mouse = controls_1.Poll_Mouse(exports.debug_state.camera, false, exports.debug_state.target);
            if (!mouse) {
                return;
            }
            let clicked = main_1.g.getRoom().checkObjectsPoint(mouse)[0];
            if (clicked) {
                exports.debug_state.rotation_element = clicked;
                exports.debug_state.current_action = {
                    element: exports.debug_state.rotation_element,
                    property: "rotation",
                    old: JSON.stringify(exports.debug_state.rotation_element.state.rotation),
                    new: undefined
                };
            }
        }
    }, controls_1.exec_type.once, 1, true);
    controls_1.Bind("mouse2up", () => {
        exports.debug_state.current_action.new = JSON.stringify(exports.debug_state.rotation_element.state.rotation);
        exports.debug_state.actions_stack.push(exports.debug_state.current_action);
        exports.debug_state.rotation_element = undefined;
    }, controls_1.exec_type.once, 1, true);
    let left_func = () => {
        let shift_held = controls_1.held_keys["ShiftLeft"] ? 1 : 0;
        if (exports.debug_state.last_clicked.id == "debug_target")
            exports.debug_state.camera.state.position.x = exports.debug_state.camera.state.position.x - ((5 + shift_held * 5) * (1 / exports.debug_state.camera.state.scaling));
    };
    let right_func = () => {
        let shift_held = controls_1.held_keys["ShiftLeft"] ? 1 : 0;
        if (exports.debug_state.last_clicked.id == "debug_target")
            exports.debug_state.camera.state.position.x = exports.debug_state.camera.state.position.x + ((5 + shift_held * 5) * (1 / exports.debug_state.camera.state.scaling));
    };
    let down_func = () => {
        let shift_held = controls_1.held_keys["ShiftLeft"] ? 1 : 0;
        if (!controls_1.held_keys["ControlLeft"] && exports.debug_state.last_clicked.id == "debug_target")
            exports.debug_state.camera.state.position.y = exports.debug_state.camera.state.position.y - ((5 + shift_held * 5) * (1 / exports.debug_state.camera.state.scaling));
    };
    let up_func = () => {
        let shift_held = controls_1.held_keys["ShiftLeft"] ? 1 : 0;
        if (exports.debug_state.last_clicked.id == "debug_target")
            exports.debug_state.camera.state.position.y = exports.debug_state.camera.state.position.y + ((5 + shift_held * 5) * (1 / exports.debug_state.camera.state.scaling));
    };
    let scroll_up = () => {
        if (exports.debug_state.last_clicked.id == "debug_target" && exports.debug_state.camera.state.scaling < 0.05)
            exports.debug_state.camera.state.scaling = exports.debug_state.camera.state.scaling + 0.01;
        else if (exports.debug_state.last_clicked.id == "debug_target")
            exports.debug_state.camera.state.scaling = exports.debug_state.camera.state.scaling + 0.05;
    };
    let save_func = () => {
        let ctrl_held = controls_1.held_keys["ControlLeft"];
        if (ctrl_held && van_1.PAUSED) {
            let name = main_1.g.getRoom().constructor.name;
            let a = exports.path.join(`${exports.project_path}`, `../rooms/${name}.json`);
            try {
                fs.writeFileSync(a, JSON.stringify(main_1.g.getRoom().exportStateConfig()));
            }
            catch (e) {
                console.log(e);
                console.log("ERROR WRITING ROOM INFO FILE.");
                alert("Error");
            }
            alert("Saved");
        }
        else if (ctrl_held && !van_1.PAUSED) {
            alert("pause to enable saving.");
        }
    };
    let scroll_down = () => {
        if (exports.debug_state.last_clicked.id == "debug_target" && exports.debug_state.camera.state.scaling > 0.05)
            exports.debug_state.camera.state.scaling = exports.debug_state.camera.state.scaling - 0.05;
        else if (exports.debug_state.last_clicked.id == "debug_target" && exports.debug_state.camera.state.scaling > 0.01)
            exports.debug_state.camera.state.scaling = exports.debug_state.camera.state.scaling - 0.01;
    };
    let undo_func = () => {
        if (controls_1.held_keys["ControlLeft"]) {
            let curr = exports.debug_state.actions_stack.pop();
            if (curr) {
                if (curr.property == "position") {
                    curr.element.state.position = JSON.parse(curr.old);
                }
                else if (curr.property === "rotation") {
                    curr.element.state.rotation = JSON.parse(curr.old);
                }
                else if (curr.property === "scaling") {
                    curr.element.state.scaling = JSON.parse(curr.old);
                }
            }
        }
    };
    controls_1.Bind("KeyA", left_func, controls_1.exec_type.repeat, 1, true);
    controls_1.Bind("KeyD", right_func, controls_1.exec_type.repeat, 1, true);
    controls_1.Bind("KeyW", up_func, controls_1.exec_type.repeat, 1, true);
    controls_1.Bind("KeyS", down_func, controls_1.exec_type.repeat, 1, true);
    controls_1.Bind("scrollup", scroll_up, controls_1.exec_type.once, 1, true);
    controls_1.Bind("scrolldown", scroll_down, controls_1.exec_type.once, 1, true);
    controls_1.Bind("KeyS", save_func, controls_1.exec_type.once, 1, true);
    controls_1.Bind("KeyZ", undo_func, controls_1.exec_type.once, 1, true);
    controls_1.Bind("KeyQ", () => {
        exports.debug_state.render_toggles["path_finding"] = !exports.debug_state.render_toggles["path_finding"];
    }, controls_1.exec_type.once, 1, true);
    controls_1.Bind("KeyE", () => {
        exports.debug_state.render_toggles["proximity_box"] = !exports.debug_state.render_toggles["proximity_box"];
    }, controls_1.exec_type.once, 1, true);
    controls_1.Bind("KeyR", () => {
        exports.debug_state.render_toggles["collision_box"] = !exports.debug_state.render_toggles["collision_box"];
    }, controls_1.exec_type.once, 1, true);
    controls_1.Bind("KeyT", () => {
        exports.debug_state.render_toggles["bounding_box"] = !exports.debug_state.render_toggles["bounding_box"];
    }, controls_1.exec_type.once, 1, true);
    window.addEventListener("click", (e) => {
        if (e.target instanceof HTMLElement) {
            exports.debug_state.last_clicked = e.target;
        }
    });
    let pause_button = document.getElementById("pause_button");
    pause_button.addEventListener("click", (e) => {
        van_1.setPaused(!van_1.PAUSED);
        if (van_1.PAUSED) {
            pause_button.innerHTML = "UNPAUSE";
        }
        else {
            pause_button.innerHTML = "PAUSE";
        }
    });
    let obj_button = document.getElementById("new_object_button");
    let room_button = document.getElementById("new_room_button");
    room_button.addEventListener("click", (e) => {
        let file_path = ipcRenderer.sendSync('object-path-request', "rooms");
        if (file_path) {
            let full_name = exports.path.parse(file_path).base;
            let new_name = full_name.substr(0, full_name.length - 3);
            let path_to_write = exports.path.join(`${file_path}`, "..", new_name + ".ts");
            fs.writeFileSync(path_to_write, room_template_1.room_template.split("template").join(new_name));
            path_to_write = exports.path.join(`${file_path}`, "..", new_name + ".json");
            fs.writeFileSync(path_to_write, `
    {
      "objects":[]
    }
    `);
        }
    });
    obj_button.addEventListener("click", (e) => {
        let file_path = ipcRenderer.sendSync('object-path-request', "objects");
        if (file_path) {
            let full_name = exports.path.parse(file_path).base;
            let new_name = full_name.substr(0, full_name.length - 3);
            let path_to_write = exports.path.join(`${file_path}`, "..", new_name + ".ts");
            fs.writeFileSync(path_to_write, object_template_1.object_template.split("template").join(new_name));
        }
    });
};


/***/ }),

/***/ "./src/lib/hud.ts":
/*!************************!*\
  !*** ./src/lib/hud.ts ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Text = exports.HUD = void 0;
class HUD {
    constructor() {
        this.graphic_elements = [];
        this.text_elements = [];
        this.rendering = false;
        this.text_elements.push(...this.setTextElements());
        for (let g of this.setGraphicElements()) {
            this.addGraphic(g);
        }
    }
    addGraphic(o) {
        return __awaiter(this, void 0, void 0, function* () {
            yield o.load();
            o.info.on_hud_layer = true;
            this.graphic_elements.push(o);
        });
    }
    addGraphics(o) {
        return __awaiter(this, void 0, void 0, function* () {
            for (let obj of o) {
                this.addGraphic(obj);
            }
        });
    }
    statef(a) {
        for (let x of this.graphic_elements) {
            x.statef(a);
        }
        for (let x of this.text_elements) {
            x.statef(a);
        }
    }
    setActive() {
        return __awaiter(this, void 0, void 0, function* () {
        });
    }
    load() {
        return Promise.all(this.graphic_elements.map((a) => a.load()));
    }
    setTextElements() {
        return [];
    }
    setGraphicElements() {
        return [];
    }
}
exports.HUD = HUD;
class Text {
    constructor(node, getFunc) {
        if (!node.align) {
            node.align = "center";
        }
        this.state = node;
        if (!this.state.text) {
            this.state.text = "";
        }
        this.getFunc = getFunc;
    }
    statef(a) {
        this.state.text = this.getFunc();
    }
    renderf(a) {
        let { size, color, font, text, max_width, align } = this.state;
        return {
            size,
            color,
            font,
            text,
            max_width,
            align
        };
    }
}
exports.Text = Text;


/***/ }),

/***/ "./src/lib/math.ts":
/*!*************************!*\
  !*** ./src/lib/math.ts ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Vec = exports.rotation_length = exports.clamp = exports.angle_towards = exports.getRandInt = void 0;
function getRandInt(min, max) {
    return Math.floor(Math.random() * (max - min)) + min;
}
exports.getRandInt = getRandInt;
function angle_towards(target1, target2) {
    return 90 - Math.atan2((target1.y - target2.y), (target1.x - target2.x)) * 180 / Math.PI;
}
exports.angle_towards = angle_towards;
function clamp(value, min, max) {
    return Math.min(Math.max(value, min), max);
}
exports.clamp = clamp;
//Finds the side lengths of a triangle if given the  angle (in degrees)
//along with the length of the hypotenuse
function rotation_length(length, degree) {
    let a_len = length * Math.sin(degree * Math.PI / 180);
    let b_len = length * Math.cos(degree * Math.PI / 180);
    return {
        x: a_len,
        y: b_len
    };
}
exports.rotation_length = rotation_length;
class Vec {
    static from(a) {
        return Vec.create(a.x, a.y);
    }
    static add(a, b) {
        return { x: a.x + b.x, y: a.y + b.y };
    }
    static sub(a, b) {
        return { x: a.x - b.x, y: a.y - b.y };
    }
    static scalar_divide(a, b) {
        return { x: a.x / b, y: a.y / b };
    }
    static scalar_add(a, b) {
        return { x: a.x + b, y: a.y + b };
    }
    static scalar_sub(a, b) {
        return { x: a.x - b, y: a.y - b };
    }
    static scalar_mod(a, b) {
        return { x: a.x % b, y: a.y % b };
    }
    static scalar_mult(a, b) {
        return { x: a.x * b, y: a.y * b };
    }
    static func(a, b) {
        let arr = [a.x, a.y].map(b);
        return Vec.create(arr[0], arr[1]);
    }
    static distance(a, b) {
        return Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));
    }
    static create(x, y) {
        return { x, y };
    }
}
exports.Vec = Vec;


/***/ }),

/***/ "./src/lib/network.ts":
/*!****************************!*\
  !*** ./src/lib/network.ts ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Web = exports.Single_Player = exports.Network = exports.obj_net_type = exports.net_type = void 0;
const math_1 = __webpack_require__(/*! lib/math */ "./src/lib/math.ts");
const peerjs_1 = __webpack_require__(/*! peerjs */ "./node_modules/peerjs/dist/peerjs.min.js");
var net_type;
(function (net_type) {
    net_type[net_type["single_player"] = 0] = "single_player";
    net_type[net_type["web"] = 1] = "web";
    net_type[net_type["single_host"] = 2] = "single_host";
})(net_type = exports.net_type || (exports.net_type = {}));
var obj_net_type;
(function (obj_net_type) {
    obj_net_type[obj_net_type["local"] = 0] = "local";
    obj_net_type[obj_net_type["sync"] = 1] = "sync";
    obj_net_type[obj_net_type["host"] = 2] = "host";
})(obj_net_type = exports.obj_net_type || (exports.obj_net_type = {}));
class Network {
    constructor() {
        this.peer_connections = [];
        this.id = math_1.getRandInt(0, 999999);
        this.max_players = 8;
        this.current_players = 0;
        this.id_counter = 1;
        this.password = "";
        this.local_id = "0";
        this.local_connection = new peerjs_1.default(this.id + "", {
            host: 'localhost',
            port: 9000,
            path: '/'
        });
        this.local_connection.on("error", (err) => {
            this.error(err);
        });
        this.local_connection.on("connection", (connection) => {
            this.recieve_connect(connection);
        });
    }
    init() {
    }
    send(type, data) {
    }
    recieve(type, data, local_id) {
        let room = this.game.state.current_room;
        switch (type) {
            case "update_item": {
                let { id, state } = data;
                let obj = room.getObj(id);
                for (let key of Object.keys(state)) {
                    obj.state[key] = JSON.parse(state[key]);
                }
                break;
            }
            case "add_item": {
                let { state_config, id } = data;
                room.addItemStateConfig(state_config, id);
                break;
            }
            case "connection": {
                let { address, local_id } = JSON.parse(data);
                if (address == this.id) {
                    this.local_id = local_id;
                }
                else if (this.current_players < this.max_players && !this.peer_connections.map(ent => ent.peer_id).includes(address)) {
                    this.connect(address, this.password, local_id);
                    this.max_players++;
                }
            }
        }
        room.parse_packet(type, data, local_id);
    }
    connect(address, password = "", local_id = undefined) {
        return __awaiter(this, void 0, void 0, function* () {
            return;
        });
    }
    recieve_connect(peer) {
    }
    error(error) {
    }
}
exports.Network = Network;
class Single_Player extends Network {
    constructor() {
        super(...arguments);
        this.type = net_type.single_player;
    }
}
exports.Single_Player = Single_Player;
class Web extends Network {
    constructor() {
        super(...arguments);
        this.type = net_type.web;
    }
    connect(address, password = "", local_id = "0") {
        return __awaiter(this, void 0, void 0, function* () {
            return new Promise((resolve, reject) => {
                let peer = this.local_connection.connect(address);
                peer.on("open", () => {
                    let entry = {
                        authenticated: false,
                        connection: peer,
                        peer_id: address,
                        local_id
                    };
                    this.peer_connections.push(entry);
                    peer.send(JSON.stringify({
                        type: "password",
                        data: password
                    }));
                    peer.on("data", (d) => {
                        let { type, data } = JSON.parse(d);
                        if (type == "auth" && data.result == "success" && !entry.authenticated) {
                            entry.authenticated = true;
                            peer.on("data", (d) => {
                                let { type, data, id } = JSON.parse(d);
                                this.recieve(type, data, entry.local_id);
                            });
                            resolve(true);
                        }
                        resolve(false);
                    });
                });
            });
        });
    }
    send(type, data) {
        for (let peer of this.peer_connections) {
            peer.connection.send(JSON.stringify({ type, data, id: this.local_id }));
        }
    }
    recieve_connect(peer) {
        let entry = {
            connection: peer,
            authenticated: false,
            peer_id: peer.peer,
            local_id: undefined
        };
        this.peer_connections.push(entry);
        peer.on("data", (d) => {
            let { type, data } = JSON.parse(d);
            if (type == "password" && data == this.password && !entry.authenticated) {
                console.log("password right");
                entry.authenticated = true;
                entry.local_id = `${this.id_counter++}`;
                peer.send(JSON.stringify({
                    type: "auth",
                    data: {
                        result: "success",
                        assigned_id: entry.local_id
                    }
                }));
                this.send("connection", JSON.stringify({
                    address: peer.peer,
                    local_id: entry.local_id
                }));
                entry.authenticated = true;
                peer.on("data", (d) => {
                    let { type, data } = JSON.parse(d);
                    this.recieve(type, data, entry.local_id);
                });
            }
            else if (type == "password" && data != this.password) {
                console.log("password wrong");
                peer.send(JSON.stringify({
                    type: "auth",
                    data: "failure"
                }));
            }
        });
    }
}
exports.Web = Web;


/***/ }),

/***/ "./src/lib/object.ts":
/*!***************************!*\
  !*** ./src/lib/object.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.gravity_obj = exports.static_obj = exports.composite_obj = exports.obj = exports.getId = void 0;
const render_1 = __webpack_require__(/*! ./render */ "./src/lib/render.ts");
const controls_1 = __webpack_require__(/*! ./controls */ "./src/lib/controls.ts");
const audio_1 = __webpack_require__(/*! ./audio */ "./src/lib/audio.ts");
const van_1 = __webpack_require__(/*! ../van */ "./src/van.ts");
const math_1 = __webpack_require__(/*! ./math */ "./src/lib/math.ts");
const debug_1 = __webpack_require__(/*! ../lib/debug */ "./src/lib/debug.ts");
const utils_1 = __webpack_require__(/*! lib/utils */ "./src/lib/utils.ts");
function getId(a, id) {
    for (let b = 0; b < a.length; b++) {
        if (a[b].id == id) {
            return a[b];
        }
    }
    return undefined;
}
exports.getId = getId;
//This counter tracks the global number of objects created so far
//an object's id (if not overwritten) will be a unique integer, which
//uses this counter.
let counter = 0;
class animations {
    constructor() {
        this.animations = {};
        //Tracks the time passed since the current animation
        //has started playing
        this.animation_tracker = 0;
        this.animating = false;
    }
    //defines an animation that can be played using the play method
    //the keyframes are an array of tuples in the 
    //format of [(time for this sprite to show), sprite]
    add(name, keyframes, length) {
        this.animations[name] = [keyframes, length];
    }
    play(name, callback) {
        this.current = name;
        this.callback = callback;
        this.animation_tracker = 0;
    }
    renderf(t) {
        let curr_animation = this.animations[this.current][0];
        let length = this.animations[this.current][1];
        let index = 0;
        for (; index < curr_animation.length - 1; index++) {
            let keyframe_time = curr_animation[index][0];
            let next_keyframe_time = curr_animation[index + 1][0];
            if (this.animation_tracker >= keyframe_time && this.animation_tracker < next_keyframe_time) {
                this.animation_tracker = this.animation_tracker + t;
                this.animating = true;
                //Returns the raw sprite that's correct to show at this time
                return curr_animation[index][1];
            }
        }
        if (this.animation_tracker >= length) {
            this.animation_tracker = 0;
            this.animating = false;
            if (this.callback) {
                this.callback();
            }
        }
        else {
            this.animation_tracker += t;
        }
        //Returns the last appropriate frame until the animation is over.
        return curr_animation[index][1];
    }
}
class obj {
    constructor(state, params = obj.default_params) {
        //Url to the object's individual sprite, or all of its sprites
        //bundled into a spritesheet
        this.sprite_url = "./sprites/Error.png";
        this.render_type = render_1.render_type.sprite;
        this.collision = false;
        this.tags = new Set();
        //tags are used to exclude or include objects when checking for collisions,
        //and for object identification / classification in scripts
        this.render = true;
        this.animations = new animations();
        this.audio = new audio_1.audio();
        //Last render time, used to calculate delta_time
        this.last_render = 0;
        //Params are options for the object, that do not rely on state
        // For example, the side of a piece in chess.
        this.params = {};
        this.static = false;
        this.layer = 1;
        this.save_to_file = true;
        this.tick_state = true;
        this.scale_type = render_1.scale_type.grow;
        this.proximity_boxes = new Set();
        this.hud_clickable = true;
        this.info = {};
        this.text_nodes = [];
        this.cache_entries = {};
        this.internal_cache = {};
        this.state_properties_to_sync = [];
        this.past_state = {};
        this.diff_state = {};
        this.event_handlers = {};
        this.id = "" + counter;
        this.binds = [];
        counter++;
        this.params = Object.assign({}, params);
        this.registerControls();
        this.registerAudio();
        this.registerEvents();
        let position_proxy = (pos) => new Proxy(pos, {
            "set": (target, prop, reciever) => {
                if (prop == "y" || prop == "x") {
                    if (target[prop] == reciever) {
                        return true;
                    }
                    let room = this.game.getRoom();
                    let offset = 0;
                    if (prop == "y") {
                        offset = this.getFullCollisionBox().height / 2;
                    }
                    else if (prop == "x") {
                        offset = this.getFullCollisionBox().width / 2;
                    }
                    if (reciever > 0) {
                        offset = -offset;
                    }
                    if (reciever > room.proximity_map.length / 2 + offset) {
                        reciever = room.proximity_map.length / 2 + offset;
                    }
                    if (reciever < -room.proximity_map.length / 2 + offset) {
                        reciever = -room.proximity_map.length / 2 + offset;
                    }
                    target[prop] = this.x_proxy(reciever);
                    this.recalculateProxBoxes();
                    if (this.static) {
                        let col_box = this.getFullCollisionBox();
                        col_box.height = col_box.height + 2 * this.game.getRoom().proximity_map.square_length;
                        col_box.width = col_box.width + 2 * this.game.getRoom().proximity_map.square_length;
                        this.game.updateStaticsInCollision(col_box);
                    }
                }
                return true;
            }
        });
        let scaling_proxy = (a) => new Proxy(a, {
            "set": (target, prop, reciever) => {
                if (prop == "width" || prop == "height") {
                    target[prop] = reciever;
                    this.recalculateProxBoxes();
                    if (this.static) {
                        this.game.updateStaticsInCollision(this.getFullCollisionBox());
                    }
                }
                return true;
            }
        });
        //Creates a copy of the passed in initial state to avoid 
        //Updating the saved state of the room
        this.state = JSON.parse(JSON.stringify(state));
        this.info = {
            on_hud_layer: false
        };
        if (!state.velocity) {
            this.state.velocity = math_1.Vec.create(0, 0);
        }
        if (!state.scaling) {
            this.state.scaling = { height: 1, width: 1 };
        }
        if (!state.rotation) {
            this.state.rotation = 0;
        }
        this.state = new Proxy(this.state, {
            "set": (target, prop, reciever) => {
                if (prop == "position") {
                    let res = reciever;
                    let vec = math_1.Vec.create(res.x, res.y);
                    target[prop] = position_proxy(vec);
                    if (this.game && this.game.getRoom()) {
                        this.recalculateProxBoxes();
                        if (this.static) {
                            this.game.updateStaticsInCollision(this.getFullCollisionBox());
                        }
                    }
                }
                else if (prop == "scaling") {
                    let res = reciever;
                    let dim = { width: res.width, height: res.height };
                    target[prop] = scaling_proxy(dim);
                    if (this.game && this.game.getRoom()) {
                        this.recalculateProxBoxes();
                        if (this.static) {
                            this.game.updateStaticsInCollision(this.getFullCollisionBox());
                        }
                    }
                }
                else {
                    target[prop] = reciever;
                }
                return true;
            }
        });
        this.state.position = position_proxy(this.state.position);
        this.state.scaling = scaling_proxy(this.state.scaling);
        this.params = params;
    }
    getState() {
        return this.state;
    }
    //Animations should be registered using this.animations.add in this method
    registerAnimations() {
    }
    //Sounds should be registered using this.audio.add in this method.
    registerAudio() {
    }
    registerEvents() {
    }
    removeAllEventHandlers() {
        this.event_handlers = {};
    }
    removeEventHandler(event) {
        this.event_handlers[event.type].splice(event.index, 1);
    }
    addEventHandler(event, func) {
        if (!this.event_handlers[event]) {
            this.event_handlers[event] = [];
        }
        this.event_handlers[event].push(func);
        return {
            type: event,
            index: this.event_handlers[event].indexOf(func)
        };
    }
    event(event) {
        if (this.event_handlers[event]) {
            for (let func of this.event_handlers[event]) {
                func();
            }
        }
    }
    defaultParams() {
        return van_1.copy(this.defaultParams);
    }
    x_proxy(val) {
        return val;
    }
    y_proxy(val) {
        return val;
    }
    recalculateProxBoxes() {
        let bounds = this.getBoundingBox();
        let prox_map = this.game.getRoom().proximity_map;
        let boxes = prox_map.getBoxLocations(this);
        for (let cord of this.proximity_boxes) {
            prox_map.remove(cord, this);
        }
        for (let cord of boxes) {
            prox_map.add(cord, this);
        }
    }
    mutate(key, value) {
        this[key] = value;
    }
    getRoom() {
        return this.game.getRoom();
    }
    load() {
        let _this = this;
        return new Promise((resolve, reject) => {
            let image = new Image();
            let url = this.sprite_url;
            if (van_1.DEBUG) {
                url = debug_1.path.join(debug_1.root_path, this.sprite_url);
            }
            image.src = url;
            image.onload = (() => __awaiter(this, void 0, void 0, function* () {
                _this.sprite_sheet = image;
                _this.registerAnimations();
                yield this.audio.load();
                /*worker_pool.send_all("sprite_sheet_cache",{
                  name:this.constructor.name,
                  encoded
                });
                */
                resolve();
            }));
        });
    }
    //Within normal objects, this just returns an array that contains the object.
    //This method is overwritten by composite objects, which returns every object
    //that the composite object contains. This simplifies the backend work, as each
    //object returns an array of atleast one object.
    combinedObjects() {
        return [this];
    }
    getBoundingBox() {
        let coll_box = this.getFullCollisionBox();
        return {
            top_right: {
                x: coll_box.x + coll_box.width / 2,
                y: coll_box.y + coll_box.height / 2
            },
            bottom_left: {
                x: coll_box.x - coll_box.width / 2,
                y: coll_box.y - coll_box.height / 2
            }
        };
    }
    //Distance from one object to another.
    distance(target) {
        return math_1.Vec.distance(this.state.position, target.state.position);
    }
    applyForce(vel) {
        this.state.velocity.x += vel.x;
        this.state.velocity.y += vel.y;
    }
    angleTowards(a) {
        return this.angleTowardsPoint(a.state.position);
    }
    angleTowardsPoint(target) {
        return 90 - Math.atan2((target.y - this.state.position.y), (target.x - this.state.position.x)) * 180 / Math.PI;
    }
    bindControl(key, x, func, interval = 1) {
        this.binds.push(controls_1.Bind(key, func, x, interval, false, this));
    }
    //This method is where controls and keybinds should
    //be defined using bindControl
    registerControls() {
    }
    statef(time) {
        for (let node of this.text_nodes) {
            node.statef(time);
        }
        if (this.state_properties_to_sync.length > 0) {
            let network_properties = {};
            let state = this.state;
            if (this.state_properties_to_sync) {
                for (let key of this.state_properties_to_sync) {
                    network_properties[key] = JSON.stringify(state[key]);
                }
            }
            this.diff_state = utils_1.diff(this.past_state, network_properties);
            this.past_state = network_properties;
        }
    }
    delete() {
        for (let a of this.binds) {
            controls_1.Unbind(a);
        }
        for (let cord of this.proximity_boxes) {
            this.game.getRoom().proximity_map.remove(cord, this);
        }
        this.game.getRoom().deleteItem(this.id);
        if (this.static) {
            this.game.updateStaticsInCollision(this.getFullCollisionBox());
        }
    }
    UnbindAll() {
        for (let a of this.binds) {
            controls_1.Unbind(a);
        }
    }
    //Returns the collision box of the object
    //Does not have to correspond to the object's sprite's size 
    //A composite object instead returns the bounding box that 
    //contains every one of its contained objects
    getFullCollisionBox() {
        //If a developer defined hitbox exists, use that, otherwise
        //generate it using the sprite width / height
        if (this.hitbox) {
            return {
                x: this.state.position.x,
                y: this.state.position.y,
                width: this.hitbox.width * this.state.scaling.width,
                height: this.hitbox.height * this.state.scaling.height
            };
        }
        else {
            return {
                x: this.state.position.x,
                y: this.state.position.y,
                width: this.width * this.state.scaling.width,
                height: this.height * this.state.scaling.height
            };
        }
    }
    //This is another methods, similar to getCombined
    //Just returns an array containing the object's collision box
    //Overwritten in composite objects to return every object's collision box
    //within the composite obect.
    getAllCollisionBoxes() {
        return [this.getFullCollisionBox()];
    }
    cache(key, value) {
        if (!this.cache_entries[key]) {
            this.cache_entries[key] = value;
        }
        return this.cache_entries[key];
    }
    collidesWithPoint(point) {
        return this.collidesWithBox({ x: point.x, y: point.y, height: 0, width: 0 });
    }
    //Checks to see if an object actually collides with the provided box.
    //A box represents an area within the game space
    //Checking for collisions is trivial currently, as all hitboxes are axis aligned
    //But implementing a more complicated physics engine would make this method's impl.
    //significatly more complex.
    collidesWithBox(other_object) {
        let collides_horrizontally = false, collides_vertically = false;
        let hbox = this.hitbox;
        if (!this.hitbox) {
            hbox = {
                x_offset: 0,
                y_offset: 0,
                width: this.width,
                height: this.height
            };
        }
        let object_bounds = {
            left: (this.state.position.x + hbox.x_offset - hbox.width * this.state.scaling.width / 2),
            right: (this.state.position.x + hbox.x_offset + hbox.width * this.state.scaling.width / 2),
            top: (this.state.position.y + hbox.y_offset + hbox.height * this.state.scaling.height / 2),
            bottom: (this.state.position.y + hbox.y_offset - hbox.height * this.state.scaling.height / 2)
        };
        let other_object_bounds = {
            left: (other_object.x - other_object.width / 2),
            right: (other_object.x + other_object.width / 2),
            top: (other_object.y + other_object.height / 2),
            bottom: (other_object.y - other_object.height / 2)
        };
        //We can compare the sides of the boxes to see if they overlap
        //We check once for hoizontal overlap, then vertical.
        if ((object_bounds.left >= other_object_bounds.left && object_bounds.left < other_object_bounds.right) || (other_object_bounds.left > object_bounds.left && other_object_bounds.left < object_bounds.right)) {
            collides_horrizontally = true;
        }
        else {
            return false;
        }
        if ((object_bounds.bottom >= other_object_bounds.bottom && object_bounds.bottom < other_object_bounds.top) || (other_object_bounds.bottom > object_bounds.bottom && other_object_bounds.bottom < object_bounds.top)) {
            collides_vertically = true;
        }
        else {
            return false;
        }
        return collides_horrizontally && collides_vertically;
    }
    //The particle must be registered in the room's registerParticles method 
    //The name parameter should correspond to the key of a particle
    emitParticle(name, offset, lifetime, range) {
        let room = this.game.getRoom();
        let st = this.state;
        let final_position = {
            x: st.position.x + offset.x,
            y: st.position.y + offset.y
        };
        room.emitParticle(name, final_position, lifetime, range);
    }
    //Internal method that keeps calculates the delta_time
    //Also converts individual sprites into arrays of one sprite.
    renderTrack(time) {
        let rendered = this.renderf(time - this.last_render);
        let final;
        this.last_render = time;
        if (Array.isArray(rendered))
            final = rendered;
        else {
            final = [rendered];
        }
        return final;
    }
    //Most objects should not be overwritting the renderf method
    //Returns the appropriate sprite for the object
    renderf(time) {
        //If the object doesn't have registered animations, or isn't playing one
        //We have to create the sprite here.
        if (Object.keys(this.animations.animations).length == 0 || !this.animations.current) {
            if (!this.sprite_sheet) {
                return {
                    sprite: undefined,
                    x: this.state.position.x,
                    y: this.state.position.y
                };
            }
            let sprite_height = this.height;
            let sprite_width = this.width;
            //Technically we don't need to define an object height and width
            //If the sprite_url points to a single static sprite, as we can just pull
            //the dimensions from the image
            if (this.height == undefined) {
                sprite_height = this.sprite_sheet.height;
            }
            if (this.width == undefined) {
                sprite_width = this.sprite_sheet.width;
            }
            return {
                sprite: {
                    sprite_sheet: this.sprite_sheet,
                    name: this.constructor.name,
                    left: 0,
                    top: 0,
                    sprite_width: sprite_width,
                    sprite_height: sprite_height,
                    opacity: this.opacity || 1
                },
                x: this.state.position.x,
                y: this.state.position.y
            };
        }
        return {
            sprite: this.animations.renderf(time),
            x: this.state.position.x,
            y: this.state.position.y
        };
    }
}
exports.obj = obj;
obj.default_params = {};
class composite_obj extends obj {
    constructor(pos, params) {
        super(pos, params);
        this.objects = [];
        this.render = false;
        this.registered = false;
        this.collision = false;
        this.statics = [];
    }
    load() {
        const _super = Object.create(null, {
            load: { get: () => super.load }
        });
        return __awaiter(this, void 0, void 0, function* () {
            yield _super.load.call(this);
            yield Promise.all([...this.objects.map((a) => a.load()), ...this.statics.map(a => a.obj.load())]);
        });
    }
    combinedObjects() {
        let combined = [...this.objects, ...this.statics.map(a => a.obj)];
        return [...combined, this];
    }
    getItemsByTag(tag) {
        return this.combinedObjects().filter((a) => a.tags.has(tag));
    }
    addItem(a, list = this.objects) {
        a.parent = this;
        list.push(...a.combinedObjects());
    }
    addItems(a, list = this.objects) {
        for (let o of a) {
            this.addItem(o, list);
        }
    }
    getAllCollisionBoxes() {
        let arr = [];
        for (let obj of [...this.statics.map(a => a.obj), ...this.objects]) {
            let created_box = obj.getAllCollisionBoxes();
            if (Array.isArray(created_box)) {
                arr.push(...created_box);
            }
            else {
                arr.push(created_box);
            }
        }
        return arr;
    }
    delete() {
        for (let a of this.objects) {
            a.delete();
        }
        for (let a of this.statics) {
            a.obj.delete();
        }
        super.delete();
    }
    collidesWithBox(a) {
        for (let obj of this.objects) {
            if (obj.collidesWithBox(a))
                return true;
        }
        for (let o of this.statics) {
            if (o.obj.collidesWithBox(a))
                return true;
        }
        return false;
    }
}
exports.composite_obj = composite_obj;
class static_obj {
    constructor() {
        this.sprite_url = "";
    }
}
exports.static_obj = static_obj;
class gravity_obj extends obj {
    constructor() {
        super(...arguments);
        this.gravity = true;
    }
}
exports.gravity_obj = gravity_obj;


/***/ }),

/***/ "./src/lib/render.ts":
/*!***************************!*\
  !*** ./src/lib/render.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.rect_renderer = exports.stroked_rect_renderer = exports.line_renderer = exports.sprite_renderer = exports.hud_sprite_renderer = exports.canvas_renderer = exports.text_renderer = exports.hud_text_renderer = exports.scale_type = exports.render_type = exports.Camera = void 0;
const van_1 = __webpack_require__(/*! ../van */ "./src/van.ts");
const math_1 = __webpack_require__(/*! ./math */ "./src/lib/math.ts");
class Camera {
    constructor(props, v, hud = undefined) {
        this.state = {
            scaling: props.scaling,
            position: {
                x: props.x,
                y: props.y
            },
            dimensions: props.dimensions,
            viewport: {
                x: v.x,
                y: v.y,
                width: v.width * props.dimensions.width,
                height: v.height * props.dimensions.height
            },
            debug: props.debug,
            hud,
            target_pos: undefined,
            start_pos: undefined,
            easing_time: 0,
            current_time: 0,
            speed: 0
        };
        if (hud) {
            hud.graphic_elements.forEach(e => {
                e.UnbindAll();
            });
        }
        this.setHud(hud);
    }
    statef(delta_time) {
        if (this.state.target_pos) {
            let t = this.state.current_time / this.state.easing_time;
            let distance = math_1.Vec.distance(this.state.position, this.state.target_pos);
            let coeff;
            if (t <= 0.5) {
                coeff = 2 * t * t;
            }
            else {
                t -= 0.5;
                coeff = 2 * t * (1 - t) + 0.5;
            }
            let angle = math_1.angle_towards(this.state.target_pos, this.state.position);
            let velocity = math_1.rotation_length(2 * this.state.speed * delta_time, angle);
            velocity = math_1.Vec.scalar_mult(velocity, coeff);
            this.state.position = math_1.Vec.add(this.state.position, velocity);
            this.state.current_time += delta_time;
            if (this.state.current_time > this.state.easing_time) {
                this.state.position = math_1.Vec.from(this.state.target_pos);
                this.state.target_pos = undefined;
            }
        }
    }
    set x(x) {
        this.state.position.x = x;
    }
    set y(y) {
        this.state.position.y = y;
    }
    get x() {
        return this.state.position.x;
    }
    get y() {
        return this.state.position.y;
    }
    setHud(hud = undefined) {
        if (this.hud) {
            this.hud.rendering = false;
            for (let o of this.hud.graphic_elements) {
                o.UnbindAll();
            }
        }
        if (hud && hud != this.hud) {
            hud.rendering = true;
            for (let o of hud.graphic_elements) {
                o.registerControls();
            }
            hud.setActive();
        }
        this.hud = hud;
    }
    moveTo(pos, time) {
        this.state.speed = math_1.Vec.distance(this.state.position, pos) / time;
        this.state.target_pos = pos;
        this.state.start_pos = math_1.Vec.from(this.state.position);
        this.state.easing_time = time;
        this.state.current_time = 0;
    }
}
exports.Camera = Camera;
var render_type;
(function (render_type) {
    render_type[render_type["text"] = 0] = "text";
    render_type[render_type["sprite"] = 1] = "sprite";
    render_type[render_type["rect"] = 2] = "rect";
    render_type[render_type["stroke_rect"] = 3] = "stroke_rect";
})(render_type = exports.render_type || (exports.render_type = {}));
var scale_type;
(function (scale_type) {
    scale_type[scale_type["grow"] = 0] = "grow";
    scale_type[scale_type["repeat"] = 1] = "repeat";
})(scale_type = exports.scale_type || (exports.scale_type = {}));
exports.hud_text_renderer = (r, s) => {
    let vheight = van_1.GetViewportDimensions().height;
    r.context.font = `${s.font.size}px ${s.font.font}`;
    r.context.fillStyle = s.font.color;
    r.context.textAlign = s.font.align;
    if (s.font.max_width) {
        r.context.fillText(s.font.text, s.x, vheight - s.y, s.font.max_width);
    }
    else {
        r.context.fillText(s.font.text, s.x, vheight - s.y);
    }
};
exports.text_renderer = (r, s) => {
    let camera = r.camera;
    let vheight = r.camera.state.dimensions.height;
    let final_x = ((s.x - camera.state.position.x + camera.state.dimensions.width * (1 / r.camera.state.scaling) / 2) * r.camera.state.scaling);
    let final_y = ((vheight - s.y * camera.state.scaling - camera.state.dimensions.height / 2 + camera.state.position.y * camera.state.scaling));
    r.context.font = `${s.font.size * r.camera.state.scaling}px ${s.font.font}`;
    r.context.fillStyle = s.font.color;
    r.context.textAlign = s.font.align;
    r.context.save();
    r.context.translate(final_x, final_y);
    if (s.font.max_width) {
        r.context.fillText(s.font.text, 0, 0, s.font.max_width);
    }
    else {
        r.context.fillText(s.font.text, 0, 0);
    }
    r.context.restore();
};
exports.canvas_renderer = (r, a) => {
    let camera = r.camera;
    let vheight = r.camera.state.dimensions.height / r.camera.state.scaling;
    let final_x = ((a.x - camera.state.position.x + camera.state.dimensions.width * (1 / r.camera.state.scaling) / 2 - a.width * a.scale.width / 2) * r.camera.state.scaling);
    let final_y = ((vheight - a.y - camera.state.dimensions.height * (1 / r.camera.state.scaling) / 2 - a.height * a.scale.height / 2 + camera.state.position.y) * r.camera.state.scaling);
    let height = a.height * r.camera.state.scaling * a.scale.height;
    let width = a.width * r.camera.state.scaling * a.scale.width;
    r.context.save();
    r.context.translate(final_x + (width) / 2, final_y + height / 2);
    r.context.drawImage(a.canvas, -(width) / 2, -height / 2, width, height);
    r.context.restore();
};
exports.hud_sprite_renderer = (r, s) => {
    let camera = r.camera;
    let vheight = r.camera.state.dimensions.height;
    let final_x = (s.x - s.sprite.sprite_width * s.scale.width / 2);
    let final_y = (vheight - s.y - s.sprite.sprite_height * s.scale.height / 2);
    let height = s.sprite.sprite_height * s.scale.height;
    let width = s.sprite.sprite_width * s.scale.width;
    r.context.save();
    r.context.globalAlpha = s.sprite.opacity;
    r.context.translate(final_x + (width) / 2, final_y + height / 2);
    let radians = s.rotation * (Math.PI / 180);
    r.context.rotate(radians);
    if (s.scale_type == scale_type.grow) {
        if (typeof s.sprite.sprite_sheet == "string") {
            let image = new Image();
            image.onload = () => {
                r.context.drawImage(image, s.sprite.left, s.sprite.top, s.sprite.sprite_width, s.sprite.sprite_height, -(width) / 2, -height / 2, width, height);
                r.context.restore();
            };
            image.src = s.sprite.sprite_sheet;
        }
        else {
            r.context.drawImage(s.sprite.sprite_sheet, s.sprite.left, s.sprite.top, s.sprite.sprite_width, s.sprite.sprite_height, -(width) / 2, -height / 2, width, height);
            r.context.restore();
        }
    }
    else if (s.scale_type == scale_type.repeat) {
        let one_width = s.sprite.sprite_width * r.camera.state.scaling;
        let one_height = s.sprite.sprite_height * r.camera.state.scaling;
        let total_hor_sprites = width / one_width;
        let total_ver_sprites = height / one_height;
        for (let a = 0; a < total_hor_sprites; a += 1) {
            for (let b = 0; b < total_ver_sprites; b += 1) {
                let new_width = one_width;
                let new_height = one_height;
                if ((a + 1) * one_width - width > 0) {
                    new_width = width % one_width;
                }
                if ((b + 1) * one_height - height > 0) {
                    new_height = height % one_height;
                }
                if (typeof s.sprite.sprite_sheet == "string") {
                    let image = new Image();
                    image.onload = () => {
                        r.context.drawImage(image, s.sprite.left, s.sprite.top, new_width / (r.camera.state.scaling), new_height / (r.camera.state.scaling), -width / 2 + a * one_width, -height / 2 + b * one_height, new_width, new_height);
                        r.context.restore();
                    };
                    image.src = s.sprite.sprite_sheet;
                }
                else {
                    r.context.drawImage(s.sprite.sprite_sheet, s.sprite.left, s.sprite.top, new_width / (r.camera.state.scaling), new_height / (r.camera.state.scaling), -width / 2 + a * one_width, -height / 2 + b * one_height, new_width, new_height);
                    r.context.restore();
                }
            }
        }
    }
};
exports.sprite_renderer = (r, s) => {
    let camera = r.camera;
    let vheight = r.camera.state.dimensions.height / r.camera.state.scaling;
    let final_x = ((s.x - camera.state.position.x + camera.state.dimensions.width * (1 / r.camera.state.scaling) / 2 - s.sprite.sprite_width * s.scale.width / 2) * r.camera.state.scaling);
    let final_y = ((vheight - s.y - camera.state.dimensions.height * (1 / r.camera.state.scaling) / 2 - s.sprite.sprite_height * s.scale.height / 2 + camera.state.position.y) * r.camera.state.scaling);
    let height = s.sprite.sprite_height * r.camera.state.scaling * s.scale.height;
    let width = s.sprite.sprite_width * r.camera.state.scaling * s.scale.width;
    r.context.save();
    r.context.globalAlpha = s.sprite.opacity;
    r.context.translate(final_x + (width) / 2, final_y + height / 2);
    let radians = s.rotation * (Math.PI / 180);
    r.context.rotate(radians);
    if (s.scale_type == scale_type.grow) {
        if (typeof s.sprite.sprite_sheet == "string") {
        }
        else {
            r.context.drawImage(s.sprite.sprite_sheet, s.sprite.left, s.sprite.top, s.sprite.sprite_width, s.sprite.sprite_height, -(width) / 2, -height / 2, width, height);
            r.context.restore();
            /*
            return worker_pool.send("draw_sprite",{
              translate:{x:final_x  + (width) / 2,y: final_y + height / 2},
              sprite:{
                name:s.sprite.name,
                left:s.sprite.left,
                top:s.sprite.top,
                sprite_width:s.sprite.sprite_width,
                sprite_height:s.sprite.sprite_height
              },
              width,
              height
            })
            */
        }
    }
    else if (s.scale_type == scale_type.repeat) {
        let one_width = s.sprite.sprite_width * r.camera.state.scaling;
        let one_height = s.sprite.sprite_height * r.camera.state.scaling;
        let total_hor_sprites = width / one_width;
        let total_ver_sprites = height / one_height;
        for (let a = 0; a < total_hor_sprites; a += 1) {
            for (let b = 0; b < total_ver_sprites; b += 1) {
                let new_width = one_width;
                let new_height = one_height;
                if ((a + 1) * one_width - width > 0) {
                    new_width = width % one_width;
                }
                if ((b + 1) * one_height - height > 0) {
                    new_height = height % one_height;
                }
                r.context.drawImage(s.sprite.sprite_sheet, s.sprite.left, s.sprite.top, new_width / (r.camera.state.scaling), new_height / (r.camera.state.scaling), -width / 2 + a * one_width, -height / 2 + b * one_height, new_width, new_height);
            }
        }
    }
    r.context.restore();
};
exports.line_renderer = (context, line, color, lineWidth, camera) => {
    let vheight = camera.state.dimensions.height / camera.state.scaling;
    let start_x = ((line.start.x - camera.state.position.x + camera.state.dimensions.width * (1 / camera.state.scaling) / 2) * camera.state.scaling);
    let start_y = ((vheight - line.start.y + camera.state.position.y - camera.state.dimensions.height * (1 / camera.state.scaling) / 2) * camera.state.scaling);
    let end_x = ((line.end.x - camera.state.position.x + camera.state.dimensions.width * (1 / camera.state.scaling) / 2) * camera.state.scaling);
    let end_y = ((vheight - line.end.y + camera.state.position.y - camera.state.dimensions.height * (1 / camera.state.scaling) / 2) * camera.state.scaling);
    context.beginPath();
    context.strokeStyle = color;
    context.lineWidth = lineWidth * camera.state.scaling;
    context.moveTo(start_x, start_y);
    context.lineTo(end_x, end_y);
    context.stroke();
};
exports.stroked_rect_renderer = (context, rect, x, y, color, lineWidth, camera) => {
    let vheight = camera.state.dimensions.height / camera.state.scaling;
    let final_x = ((x - camera.state.position.x + camera.state.dimensions.width * (1 / camera.state.scaling) / 2 - rect.width / 2) * camera.state.scaling);
    let final_y = ((vheight - y + camera.state.position.y - camera.state.dimensions.height * (1 / camera.state.scaling) / 2 - rect.height / 2) * camera.state.scaling);
    let height = rect.height * camera.state.scaling;
    let width = rect.width * camera.state.scaling;
    context.strokeStyle = color;
    context.lineWidth = lineWidth * camera.state.scaling;
    context.strokeRect(final_x, final_y, width, height);
};
exports.rect_renderer = (context, rect, x, y, color, camera, opacity = 1) => {
    let vheight = camera.state.dimensions.height / camera.state.scaling;
    let final_x = ((x - camera.state.position.x + camera.state.dimensions.width * (1 / camera.state.scaling) / 2 - rect.width / 2) * camera.state.scaling);
    let final_y = ((vheight - y - rect.height / 2 - camera.state.dimensions.height * (1 / camera.state.scaling) / 2 + camera.state.position.y) * camera.state.scaling);
    let height = rect.height * camera.state.scaling;
    let width = rect.width * camera.state.scaling;
    context.save();
    context.translate(final_x, final_y);
    context.globalAlpha = opacity;
    context.fillStyle = color;
    context.fillRect(-width / 2, -height / 2, width, height);
    context.restore();
};


/***/ }),

/***/ "./src/lib/room.ts":
/*!*************************!*\
  !*** ./src/lib/room.ts ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.p2p_room = exports.room = exports.proximity_matrix = exports.applyGravity = void 0;
const sprite_1 = __webpack_require__(/*! ./sprite */ "./src/lib/sprite.ts");
const collision_1 = __webpack_require__(/*! ./collision */ "./src/lib/collision.ts");
const van_1 = __webpack_require__(/*! ../van */ "./src/van.ts");
const controls_1 = __webpack_require__(/*! ./controls */ "./src/lib/controls.ts");
const audio_1 = __webpack_require__(/*! ./audio */ "./src/lib/audio.ts");
const debug_1 = __webpack_require__(/*! ../lib/debug */ "./src/lib/debug.ts");
const prefabs_1 = __webpack_require__(/*! ../game/objects/prefabs */ "./src/game/objects/prefabs.ts");
const math_1 = __webpack_require__(/*! lib/math */ "./src/lib/math.ts");
function applyGravity(ob, grav_const, grav_max) {
    if (ob.gravity && ob.state.velocity.y > grav_max) {
        ob.state.velocity.y += grav_const;
    }
}
exports.applyGravity = applyGravity;
class proximity_matrix {
    constructor(full_length, dimension) {
        this.internal_map = {};
        this.length = full_length;
        this.square_length = this.length / dimension;
        if (dimension % 2 != 1) {
            throw new Error("Proximity map matix dimension must be odd. Got:" + dimension);
        }
    }
    ensure(a) {
        if (!this.internal_map[a.y]) {
            this.internal_map[a.y] = {};
        }
        if (!this.internal_map[a.y][a.x]) {
            this.internal_map[a.y][a.x] = new Map();
        }
        return this.internal_map[a.y][a.x];
    }
    get(a) {
        return this.ensure(a);
    }
    add(a, o) {
        let entry = this.ensure(a);
        entry.set(o.id, o);
        o.proximity_boxes.add(a);
    }
    exists(a) {
        if (!this.internal_map[a.y] || !this.internal_map[a.y][a.x])
            return false;
        return true;
    }
    remove(a, o) {
        let entry = this.internal_map[a.y][a.x];
        entry.delete(o.id);
        o.proximity_boxes.delete(a);
    }
    getObjectsFromBox(a) {
        return this.getObjectsFromCords(this.getCordsFromBox(a));
    }
    getObjectsFromCords(input) {
        let object_set = new Set();
        for (let cord of input) {
            if (this.exists(cord)) {
                let keys = this.internal_map[cord.y][cord.x].keys();
                for (let k of keys) {
                    let j = this.internal_map[cord.y][cord.x].get(k);
                    object_set.add(j);
                }
            }
        }
        return Array.from(object_set);
    }
    getCordsFromBox(a) {
        let bottom_left = math_1.Vec.create(a.x - a.width / 2, a.y - a.height / 2);
        let top_right = math_1.Vec.create(a.x + a.width / 2, a.y + a.height / 2);
        return this.getCordsFromBoundingBox({ bottom_left, top_right });
    }
    getCordsFromBoundingBox(a) {
        let box = a;
        let bot_left = math_1.Vec.scalar_divide(math_1.Vec.scalar_add(box.bottom_left, this.length / 2), this.square_length);
        let top_right = math_1.Vec.scalar_divide(math_1.Vec.scalar_add(box.top_right, this.length / 2), this.square_length);
        bot_left = math_1.Vec.func(bot_left, (a) => Math.max(0, a));
        top_right = math_1.Vec.func(top_right, (a) => Math.min(this.length / this.square_length, a));
        let min = math_1.Vec.func(bot_left, (a) => Math.floor(a));
        let max = math_1.Vec.func(top_right, (a) => Math.ceil(a));
        let dimensions_in_boxes = math_1.Vec.sub(max, min);
        let all_boxes = [];
        let cord = math_1.Vec.func(math_1.Vec.scalar_divide(math_1.Vec.scalar_add(math_1.Vec.func(box.bottom_left, (a) => Math.max(a, -this.length / 2)), this.length / 2), this.square_length), (a) => Math.floor(a));
        for (let a = 0; a < dimensions_in_boxes.y; a++) {
            for (let b = 0; b < dimensions_in_boxes.x; b++) {
                let new_vec = math_1.Vec.add(math_1.Vec.create(b, a), cord);
                new_vec = math_1.Vec.func(new_vec, (a) => Math.floor(a));
                all_boxes.push(new_vec);
            }
        }
        return all_boxes;
    }
    getBoxLocations(o) {
        let box = o.getBoundingBox();
        let cords = this.getCordsFromBoundingBox(box);
        return cords;
    }
}
exports.proximity_matrix = proximity_matrix;
class room {
    constructor(game, config) {
        this.objects = [];
        //This object contains particle definitions
        this.particles = {};
        //This array is what actually contains the particles
        //that exists within the room.
        this.particles_arr = [];
        this.binds = [];
        this.audio = new audio_1.audio();
        //These text nodes exists in the actual room space, rather than
        //on the hud layer.
        this.render = true;
        this.text_nodes = [];
        this.proximity_map = new proximity_matrix(10000, 5);
        this.cameras = [];
        this.cache_entries = {};
        this.game = game;
        this.config = config;
        this.bindControl("mouse0", controls_1.exec_type.once, () => {
            let hud_clicked = false;
            for (let cam of this.cameras) {
                if (cam.hud) {
                    let mouse_hud = controls_1.Poll_Mouse(cam, true);
                    for (let obj of cam.hud.graphic_elements) {
                        if (obj.collidesWithPoint(mouse_hud)) {
                            hud_clicked = true;
                            obj.event("click");
                        }
                    }
                }
            }
            if (!hud_clicked) {
                for (let cam of this.cameras) {
                    let mouse = controls_1.Poll_Mouse(cam);
                    let colliders = this.checkObjectsPoint(mouse);
                    for (let obj of colliders) {
                        obj.event("click");
                    }
                }
            }
        });
    }
    exportStateConfig() {
        let config = { objects: [] };
        let filtered = this.objects.filter((obj) => obj.save_to_file && !obj.parent);
        for (let o of filtered) {
            //If an object has a parent object, it's a descendent of a composite object
            //The parent will spawn this object when it's instantiated, so we do
            //not have to save this instance.
            let state = {
                position: math_1.Vec.from(o.state.position)
            };
            if (o.state.velocity.x != 0 || o.state.velocity.y != 0) {
                state.velocity = math_1.Vec.from(o.state.velocity);
            }
            if (o.state.rotation != 0) {
                state.rotation = o.state.rotation;
            }
            if (o.state.scaling.width != 1 || o.state.scaling.height != 1) {
                state.scaling = o.state.scaling;
            }
            if (Object.keys(o.params).length > 0) {
                config.objects.push({
                    type: o.constructor.name,
                    state,
                    parameters: o.params
                });
            }
            else {
                config.objects.push({
                    type: o.constructor.name,
                    state
                });
            }
        }
        return config;
    }
    //This handles the loading of all room sprites, and
    //any objects it contains.
    load() {
        let _this = this;
        return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {
            let background = new Image();
            let object_promise_array = this.objects.map((a) => a.load());
            yield Promise.all(object_promise_array);
            let background_url = this.background_url;
            if (van_1.DEBUG) {
                background_url = debug_1.path.join(debug_1.root_path, this.background_url);
            }
            background.src = background_url;
            background.onerror = (() => {
                throw new Error("Loading Error:" + this.background_url);
            });
            background.onload = (() => __awaiter(this, void 0, void 0, function* () {
                _this.background = background;
                yield this.audio.load();
                for (let cam of this.cameras) {
                    if (cam.hud) {
                        yield cam.hud.load();
                    }
                }
                resolve();
            }));
        }));
    }
    initialize() {
    }
    //This is used while loading objects from file, it's used to dynamically load
    //objects from the room's json. If adding items within code, it's better to create
    //new instances of objects through addItem
    createItemString(name, state_config, parameters) {
        return van_1.createItemString(name, state_config, parameters);
    }
    addItemStateConfig(config, id) {
        return __awaiter(this, void 0, void 0, function* () {
            if (prefabs_1.prefabs[config.type]) {
                let params = config.parameters || {};
                let new_obj = (new prefabs_1.prefabs[config.type](Object.assign({}, config.state), params));
                if (id)
                    new_obj.id = id;
                yield this.addItems(new_obj.combinedObjects());
            }
            else {
                console.log("UNKNOWN TYPE ATTEMPTED TO LOAD: " + config.type);
            }
        });
    }
    //Adds the passed item to the room.
    addItem(o, list = this.objects) {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.addItems([...o.combinedObjects()], list);
        });
    }
    //Adds every item in the passed array to the room.
    addItems(o, list = this.objects) {
        return __awaiter(this, void 0, void 0, function* () {
            for (let ob of o) {
                ob.game = this.game;
            }
            yield Promise.all(o.map((a) => a.load()));
            if (list == this.objects) {
                for (let ob of o) {
                    let cords = this.proximity_map.getBoxLocations(ob);
                    for (let cord of cords) {
                        this.proximity_map.add(cord, ob);
                    }
                }
            }
            list.push(...o);
            if (this.game.state.current_room && o.some((o) => o.static)) {
                this.game.drawAllStatics();
            }
            if (van_1.DEBUG && list === this.objects) {
                debug_1.debug_update_obj_list();
            }
        });
    }
    //Deletes the item and removes it from the room's object list
    deleteItem(id, list = this.objects) {
        for (let a = 0; a < list.length; a++) {
            if (list[a].id === id) {
                list.splice(a, 1);
                a--;
            }
        }
        if (van_1.DEBUG && list === this.objects) {
            debug_1.debug_update_obj_list();
        }
    }
    //Any particles that are needed in the room should be added to the particle array here.
    registerParticles() {
    }
    //Adds a bind that is executed when the passed key is activated
    //key examples: mouse0down KeyAdown KeyLup
    bindControl(key, x, func, interval = 1) {
        this.binds.push(controls_1.Bind(key, func, x, interval, false));
    }
    //Checks for objects that have collision at the passed point
    checkCollisionsPoint(pos, exempt, list = this.objects) {
        return this.checkCollisions({ x: pos.x, y: pos.y, height: 0, width: 0 }, exempt, list);
    }
    //Checks for any objects at the passed point
    checkObjectsPoint(pos, exempt, list = this.objects) {
        return this.checkObjects({ x: pos.x, y: pos.y, height: 0, width: 0 }, exempt, list);
    }
    //Checks for collisions at the point that contain every tag within the second argument
    checkCollisionsPointInclusive(pos, tags, list = this.objects) {
        return this.checkCollisionsInclusive({ x: pos.x, y: pos.y, height: 0, width: 0 }, tags, list);
    }
    //Checks for any objects that contain every tag within the second argument
    checkObjectsPointInclusive(pos, tags, list = this.objects) {
        return this.checkObjectsInclusive({ x: pos.x, y: pos.y, height: 0, width: 0 }, tags, list);
    }
    //Checks for collisions in the box that contain the tags in the second argument
    checkCollisionsInclusive(box, tags, list = this.objects) {
        if (van_1.DEBUG) {
            van_1.render_collision_box(box);
        }
        if (list == this.objects) {
            list = this.proximity_map.getObjectsFromBox(box);
        }
        return list.filter(obj => obj.collision && obj.collidesWithBox(box) && tags.every((val) => obj.tags.has(val)));
    }
    //Checks for any objects in the box that contain all tags in the second argument
    checkObjectsInclusive(box, tags, list = this.objects) {
        if (van_1.DEBUG && debug_1.debug_state.render_toggles["collision_box"]) {
            van_1.render_collision_box(box);
        }
        if (list == this.objects) {
            list = this.proximity_map.getObjectsFromBox(box);
        }
        return list.filter((obj) => obj.collidesWithBox(box) && tags.every((val) => obj.tags.has(val)));
    }
    //checks for objects with collision in the box that do not contain the tags in the second argument
    checkCollisions(box, exempt = [], list = this.objects) {
        if (van_1.DEBUG && debug_1.debug_state.render_toggles["collision_box"]) {
            van_1.render_collision_box(box);
        }
        if (list == this.objects) {
            list = this.proximity_map.getObjectsFromBox(box);
        }
        return list.filter(obj => obj.collision && obj.collidesWithBox(box) && exempt.every((val) => !obj.tags.has(val)));
    }
    //checks for  any objects in the box that do not contain the tags in the second argument
    checkObjects(box, exempt = [], list = this.objects) {
        if (van_1.DEBUG && debug_1.debug_state.render_toggles["collision_box"]) {
            van_1.render_collision_box(box);
        }
        if (list == this.objects) {
            list = this.proximity_map.getObjectsFromBox(box);
        }
        return list.filter(obj => obj.collidesWithBox(box) && exempt.every((val) => !obj.tags.has(val)));
    }
    //This method should be used to call bindControl and create any needed keyBindings
    registerControls() {
    }
    registerAudio() {
    }
    cleanup() {
    }
    cache(key, value) {
        if (!this.cache_entries[key]) {
            this.cache_entries[key] = value;
        }
        return this.cache_entries[key];
    }
    //The room's state updating function.
    statef(time) {
        for (let particle of this.particles_arr) {
            particle.statef(time);
        }
        for (let text_node of this.text_nodes) {
            text_node.statef(time);
        }
        let ticking_objects = this.objects.filter((o) => o.tick_state);
        for (let a = 0; a < ticking_objects.length; a++) {
            //This function checks the velocity of every object, and moves it into it's next location
            //provided that it can fit there.
            collision_1.velocityCollisionCheck(ticking_objects[a], this.objects);
            ticking_objects[a].statef(time);
        }
        for (let cam of this.cameras) {
            if (cam.hud) {
                cam.hud.statef(time);
            }
            cam.statef(time);
        }
    }
    emitParticle(name, pos, lifetime, pos_range) {
        let state = {
            position: math_1.Vec.func(pos, (a) => a + math_1.getRandInt(-pos_range, pos_range)),
            velocity: { x: 0, y: 0 },
            rotation: 0,
            scaling: { width: 1, height: 1 }
        };
        this.addItem(new sprite_1.Particle(this.particles[name], state, lifetime), this.particles_arr);
    }
    getObj(id) {
        for (let a = 0; a < this.objects.length; a++) {
            if (this.objects[a].id == id) {
                return this.objects[a];
            }
        }
        return null;
    }
    //Gets any objects that have the passed tag
    getObjByTag(tag) {
        return this.objects.filter((a) => a.tags.has(tag));
    }
    //renders the room's sprite
    renderf(time) {
        return {
            sprite_sheet: this.background,
            name: this.constructor.name,
            left: 0,
            top: 0,
            sprite_height: this.background.height,
            sprite_width: this.background.width,
            opacity: 1
        };
    }
}
exports.room = room;
class p2p_room extends room {
    constructor(game, config) {
        super(game, config);
        this.game = game;
        this.network = game.network;
        this.net_type = game.net_type;
    }
    parse_packet(type, data, id) {
    }
    send_packet(type, data, peer_id) {
        this.network.send(type, data);
    }
    addItemNetwork(type, state, parameters) {
        return __awaiter(this, void 0, void 0, function* () {
            let id = math_1.getRandInt(100000, 999999);
            let state_config = {
                type,
                state,
                parameters
            };
            this.send_packet("add_item", {
                id,
                state_config
            });
            yield this.addItemStateConfig(state_config, id.toString());
        });
    }
    recieve_packet(id, type, data) {
    }
    statef(time) {
        super.statef(time);
        let network_items = this.objects.filter((o) => o.state_properties_to_sync.length > 0 && Object.keys(o.diff_state).length > 0);
        for (let item of network_items) {
            this.send_packet("update_item", {
                id: item.id,
                state: item.diff_state
            });
        }
    }
}
exports.p2p_room = p2p_room;


/***/ }),

/***/ "./src/lib/sprite.ts":
/*!***************************!*\
  !*** ./src/lib/sprite.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.sprite_gen = exports.Particle = void 0;
const object_1 = __webpack_require__(/*! ./object */ "./src/lib/object.ts");
const math_1 = __webpack_require__(/*! ./math */ "./src/lib/math.ts");
class Particle extends object_1.obj {
    constructor(part, state, lifetime) {
        super(state);
        this.collision = false;
        this.state.position = math_1.Vec.create(this.state.position.x, this.state.position.y);
        this.state.lifetime = 0;
        this.sprite_url = part.sprite;
        this.height = part.height;
        this.width = part.width;
        this.max_lifetime = lifetime;
    }
    statef(time) {
        this.state.lifetime += time;
        if (this.state.lifetime > this.max_lifetime) {
            this.delete();
        }
    }
    delete() {
        let room = this.game.getRoom();
        room.deleteItem(this.id, room.particles_arr);
    }
    renderf(time) {
        if (!this.selected_sprite) {
            let sprites = sprite_gen(this, this.width, this.height);
            let random_row = math_1.getRandInt(0, sprites.length);
            let random_col = math_1.getRandInt(0, sprites[random_row].length);
            this.selected_sprite = sprites[random_row][random_col];
        }
        this.selected_sprite.opacity = 1 - this.state.lifetime / this.max_lifetime;
        return {
            x: this.state.position.x,
            y: this.state.position.y,
            sprite: this.selected_sprite
        };
    }
}
exports.Particle = Particle;
function sprite_gen(obj, sprite_width, sprite_height) {
    let width = obj.sprite_sheet.width;
    let height = obj.sprite_sheet.height;
    let sprites = [];
    for (let b = 0; b < height; b += sprite_height) {
        sprites.push([]);
        for (let a = 0; a < width; a += sprite_width) {
            sprites[b / sprite_height].push({
                sprite_sheet: obj.sprite_sheet,
                sprite_sheet_buffer: obj.sprite_sheet_buffer,
                name: obj.constructor.name,
                left: a,
                top: b,
                sprite_height,
                sprite_width,
                opacity: 1
            });
        }
    }
    return sprites;
}
exports.sprite_gen = sprite_gen;


/***/ }),

/***/ "./src/lib/templates/object_template.ts":
/*!**********************************************!*\
  !*** ./src/lib/templates/object_template.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.object_template = void 0;
exports.object_template = `import {obj} from "lib/object";
import { obj_state, Vector } from "lib/state";
import {copy} from "src/van";

export interface template_state extends obj_state{
    
}
    
export interface template_parameters{
    
}
    
export class template extends obj{
  sprite_url = "./sprites/Error.png";
  height = 100;
  width = 100;
  tags:Array<string>;
  collision = true;
  render = true;
  state:template_state;
  params:template_parameters;
  static default_params:template_parameters = {}
  constructor(state:obj_state,params:template_parameters = copy(template.default_params)){
    super(state,params);
  }
  statef(time_delta:number){
    super.statef(time_delta);
  }
  renderf(time_delta:number){
   return super.renderf(time_delta); 
  }
  registerAnimations(){
    
  }
  registerAudio(){
    
  }
  registerControls(){
        
  }
}`;


/***/ }),

/***/ "./src/lib/templates/room_template.ts":
/*!********************************************!*\
  !*** ./src/lib/templates/room_template.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.room_template = void 0;
exports.room_template = `import { room } from "lib/room";
import { game } from "src/van";
import { state_config } from "lib/room";
import * as config from "./template.json";
let cfig = config as unknown as state_config;
interface template_state {

}

export class template extends room<template_state>{
  background_url = "./sprites/Error.png";
  render = true;
  constructor(game: game<unknown>) {
    super(game, cfig);
  }
  registerControls() {

  }
  registerParticles() {

  }
  statef(delta_time: number) {
    super.statef(delta_time);
  }

}`;


/***/ }),

/***/ "./src/lib/utils.ts":
/*!**************************!*\
  !*** ./src/lib/utils.ts ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.range = exports.diff = void 0;
exports.diff = function (prev_state, new_state) {
    let delta_state = {};
    let keys = Object.keys(new_state);
    for (let key of keys) {
        if (!prev_state || new_state[key] != prev_state[key]) {
            delta_state[key] = new_state[key];
        }
    }
    return delta_state;
};
exports.range = function (first, second) {
    let start;
    let end;
    if (second) {
        start = first;
        end = second;
    }
    else {
        start = 0;
        end = first;
    }
    let to_return = [];
    for (let a = start; a < end; a++) {
        to_return.push(a);
    }
    return to_return;
};


/***/ }),

/***/ "./src/van.ts":
/*!********************!*\
  !*** ./src/van.ts ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.peer_to_peer_game = exports.peer_connection = exports.game = exports.createItemString = exports.objects = exports.rooms = exports.copy = exports.render_line = exports.render_filled_box = exports.render_collision_box = exports.setPaused = exports.setDebug = exports.viewport = exports.GetViewportDimensions = exports.GetScreenDimensions = exports.PAUSED = exports.DEBUG = void 0;
exports.DEBUG = "production" === 'dev';
exports.PAUSED = "production" === 'dev';
const render_1 = __webpack_require__(/*! ./lib/render */ "./src/lib/render.ts");
const controls_1 = __webpack_require__(/*! ./lib/controls */ "./src/lib/controls.ts");
const debug_1 = __webpack_require__(/*! ./lib/debug */ "./src/lib/debug.ts");
const rooms_1 = __webpack_require__(/*! ./game/rooms/rooms */ "./src/game/rooms/rooms.ts");
const network_1 = __webpack_require__(/*! lib/network */ "./src/lib/network.ts");
const prefabs_1 = __webpack_require__(/*! game/objects/prefabs */ "./src/game/objects/prefabs.ts");
let canvas_element = document.getElementById("target");
let context = canvas_element.getContext("2d");
let screen_width = window.innerWidth;
let screen_height = window.innerHeight;
//How often the game logic loop should run, in milliseconds
let logic_loop_interval = 1000 / 60;
let last_time = new Date();
let last_render_time = 0;
function GetScreenDimensions() {
    return ({
        width: screen_width,
        height: screen_height
    });
}
exports.GetScreenDimensions = GetScreenDimensions;
function GetViewportDimensions() {
    return ({
        height: canvas_element.height,
        width: canvas_element.width
    });
}
exports.GetViewportDimensions = GetViewportDimensions;
exports.viewport = {
    height: GetViewportDimensions().height,
    width: GetViewportDimensions().width
};
window.onresize = () => {
    exports.viewport.height = GetViewportDimensions().height;
    exports.viewport.width = GetViewportDimensions().width;
};
function setDebug(x) {
    exports.DEBUG = x;
}
exports.setDebug = setDebug;
function setPaused(x) {
    exports.PAUSED = x;
}
exports.setPaused = setPaused;
exports.render_collision_box = (box, color = "red") => {
    boxes.push({
        box,
        color
    });
};
exports.render_filled_box = (box, color = "red", opacity = 1) => {
    filled_boxes.push({
        box,
        color,
        opacity
    });
};
let lines = [];
exports.render_line = (a) => {
    lines.push(a);
};
let boxes = [];
let filled_boxes = [];
exports.copy = (a) => {
    return JSON.parse(JSON.stringify(a));
};
exports.rooms = [];
//export let worker_pool = new WorkerPool(renderer_path,1);
exports.createItemString = (name, state_config, parameters) => {
    if (prefabs_1.prefabs[name]) {
        let new_obj = (new prefabs_1.prefabs[name](Object.assign({}, state_config), parameters));
        return new_obj;
    }
    throw new Error(`Attempted to create unknown obj type <${name}>`);
};
class game {
    constructor(ctx, init_state) {
        this.prototypes = [];
        this.rooms = [];
        this.isRendering = false;
        this.state = {
            canvases: [canvas_element],
            logic: undefined,
            context: ctx,
            cameras: [],
            current_room: undefined,
            globals: init_state
        };
        this.offscreen_canvas = document.createElement("canvas");
        /*
          this.test_canvas = <HTMLCanvasElement>document.getElementById("test");
          this.test_canvas.height = viewport.height;
          this.test_canvas.width = viewport.width;
          let offscreen = this.test_canvas.transferControlToOffscreen();
          //worker_pool.send_all("canvas_pass",{canvas:offscreen,viewport},[offscreen])
          */
        this.offscreen_context = this.offscreen_canvas.getContext("2d");
        this.static_canvas = document.createElement("canvas");
        this.static_context = this.static_canvas.getContext("2d");
        //worker_pool.send_all("canvas_pass",{canvas:offscreen,viewport},[offscreen])
        //DEBUG determines whether the game is running within the editor
        if (exports.DEBUG) {
            //Sets up some global debug state and the editor keybindings
            debug_1.debug_setup();
            this.state.canvases.push(debug_1.debug_state.target);
            //Initializes a separate logic loop solely for the editor
            //This separation allows for the editor to interact with the environment while
            //the actual room's state loop is paused.
            setInterval(() => {
                if (this.getRoom()) {
                    //This functions handles the editor interactions with the game environment
                    debug_1.debug_statef(16.66);
                }
            }, 16.66);
        }
        //Creates a onclick function on the window that handles element onclick functions
        //init_click_handler(this);
    }
    render(t) {
        return __awaiter(this, void 0, void 0, function* () {
            //t is current render time
            let delta_time = t - last_render_time;
            last_render_time = t;
            let all_cameras = [...this.state.cameras, ...this.state.current_room.cameras];
            let editor_camera_index = -1;
            if (exports.DEBUG) {
                debug_1.debug_state.render_delta_time = delta_time;
                all_cameras = [...all_cameras, debug_1.debug_state.camera];
                editor_camera_index = all_cameras.length - 1;
                if (all_cameras.length === 1) {
                    this.state.context.fillStyle = "white";
                    this.state.context.font = "50px Arial";
                    this.state.context.textAlign = "center";
                    this.state.context.fillText("NO CAMERA", exports.viewport.width / 2, exports.viewport.height / 2);
                }
                //The editor camera is always the last camera inside the cameras array
                //the editor camera is rendered to a different canvas than the main game canvas
                //so we use the camera's index to check what canvas to render to
            }
            for (let a = 0; a < all_cameras.length; a++) {
                let camera = all_cameras[a];
                //We render the cameras contents to an offscreen canvas, then copy its contents
                //to the main canvas.
                //This allows us to avoid any math needed to determine sprites that are partially offscreen
                //as any offscreen sections of the sprites will not be copied over, rather than explicitly 
                //calculating the cutoffs
                this.offscreen_canvas.height = camera.state.dimensions.height;
                this.offscreen_canvas.width = camera.state.dimensions.width;
                this.offscreen_context.fillStyle = "black";
                //let offscreen = new OffscreenCanvas(camera.state.dimensions.width,camera.state.dimensions.height);
                //await worker_pool.send("clear_canvas")
                this.offscreen_context.fillRect(0, 0, camera.state.dimensions.width, camera.state.dimensions.height);
                //This collision box represents the camera's field of view in the game space
                //We use the room's checkObjects function to find any object that exists within this area
                //These objects are the objects that need to be rendered for this camera
                let camera_box = {
                    x: camera.state.position.x,
                    y: camera.state.position.y,
                    width: camera.state.dimensions.width * (1 / camera.state.scaling),
                    height: camera.state.dimensions.height * (1 / camera.state.scaling)
                };
                let room = this.state.current_room;
                //List of all particles within the camera's fov
                let cords = room.proximity_map.getCordsFromBox(camera_box);
                let to_check = room.proximity_map.getObjectsFromCords(cords);
                let particle_collides = this.state.current_room.checkObjects(camera_box, [], this.state.current_room.particles_arr);
                //List of all objects within the camera's fov
                let camera_colliders = [...this.state.current_room.checkObjects(camera_box, [], to_check), ...particle_collides];
                let render_args = {
                    context: this.offscreen_context,
                    camera: camera,
                };
                //Renders the room's background.
                if (this.state.current_room.render) {
                    render_1.sprite_renderer(render_args, {
                        sprite: this.state.current_room.renderf(delta_time),
                        x: 0,
                        y: 0,
                        rotation: 0,
                        scale: {
                            width: 1,
                            height: 1
                        },
                        scale_type: render_1.scale_type.grow
                    });
                }
                render_1.canvas_renderer(render_args, {
                    canvas: this.static_canvas,
                    width: this.state.current_room.proximity_map.length,
                    height: this.state.current_room.proximity_map.length,
                    x: 0,
                    y: 0,
                    scale: { width: 1, height: 1 }
                });
                //Array of hitboxes for each item in the room
                let hitboxes = [];
                let render_toggles = debug_1.debug_state ? debug_1.debug_state.render_toggles : undefined;
                camera_colliders = camera_colliders.filter((b) => b.render && !b.static).sort((a, b) => (a.layer - b.layer));
                let promises = [];
                for (let a of camera_colliders) {
                    let rendered = a.renderTrack(t);
                    //Objects can return either a sprite, or an array of sprites to simplify the API
                    //For the user, and for use in composite objects(object that bundles other objects together)
                    //Internally, we convert any single sprite into an array of one sprite.
                    for (let positioned_sprite of rendered) {
                        //worker.postMessage(positioned_sprite.sprite.sprite_base64);
                        yield render_1.sprite_renderer(render_args, {
                            sprite: positioned_sprite.sprite,
                            x: positioned_sprite.x,
                            y: positioned_sprite.y,
                            rotation: a.state.rotation,
                            scale: a.state.scaling,
                            scale_type: a.scale_type
                        });
                    }
                    for (let node of a.text_nodes) {
                        render_1.text_renderer(render_args, {
                            x: node.state.position.x,
                            y: node.state.position.y,
                            font: node.renderf(t)
                        });
                    }
                    //Hitboxes are rendered late in the render loop, to ensure objects don't overlap them
                    //As we render objects, we add their hitboxes to this list
                    if (exports.DEBUG && a.collision && render_toggles["bounding_box"]) {
                        hitboxes.push(...a.getAllCollisionBoxes());
                    }
                }
                //This is a special class of object that exists in the game world
                for (let node of this.state.current_room.text_nodes) {
                    render_1.text_renderer(render_args, {
                        x: node.state.position.x,
                        y: node.state.position.y,
                        font: node.renderf(t)
                    });
                }
                if (camera.hud) {
                    let graphics = camera.hud.graphic_elements;
                    let text_elements = camera.hud.text_elements;
                    //Renders static graphics that are a part of the hud
                    for (let graphic of graphics.filter((b) => b.render && !b.static).sort((a, b) => (a.layer - b.layer))) {
                        let rendered = graphic.renderTrack(t);
                        if (graphic.render) {
                            for (let positioned_sprite of rendered) {
                                render_1.hud_sprite_renderer(render_args, {
                                    sprite: positioned_sprite.sprite,
                                    x: positioned_sprite.x,
                                    y: positioned_sprite.y,
                                    rotation: graphic.state.rotation,
                                    scale: graphic.state.scaling,
                                    scale_type: graphic.scale_type
                                });
                            }
                            for (let node of graphic.text_nodes) {
                                render_1.hud_text_renderer(render_args, {
                                    x: node.state.position.x,
                                    y: node.state.position.y,
                                    font: node.renderf(t)
                                });
                            }
                        }
                    }
                    for (let text of text_elements) {
                        render_1.hud_text_renderer(render_args, {
                            x: text.state.position.x,
                            y: text.state.position.y,
                            font: text.renderf(t)
                        });
                    }
                }
                //If a camera is marked as a debug camera, we render the
                //  hitboxes, and potentially update the editor
                if (camera.state.debug) {
                    if (render_toggles["proximity_box"]) {
                        let room = this.state.current_room;
                        let room_length = room.proximity_map.length;
                        let square_length = room.proximity_map.square_length;
                        let dimension = room_length / square_length;
                        for (let x = 0; x < dimension; x++) {
                            for (let y = 0; y < dimension; y++) {
                                exports.render_collision_box({
                                    x: x * square_length + square_length / 2 - room_length / 2,
                                    y: y * square_length + square_length / 2 - room_length / 2,
                                    width: square_length,
                                    height: square_length
                                }, "purple");
                            }
                        }
                    }
                    if (render_toggles["bounding_box"]) {
                        for (let obj of camera_colliders) {
                            exports.render_collision_box(obj.getFullCollisionBox(), "orange");
                        }
                    }
                    if (exports.DEBUG && debug_1.debug_state.render_toggles["path_finding"]) {
                        let room = this.state.current_room;
                        if (room.computeNavMesh) {
                            let mesh = room.computeNavMesh(room.floor_tag, "");
                            for (let y = 0; y < mesh.grid.length; y++) {
                                for (let x = 0; x < mesh.grid[y].length; x++) {
                                    let final_y = y * room.nav_node_diameter + (mesh.box.y - mesh.box.height / 2) + room.nav_node_diameter / 2;
                                    let final_x = x * room.nav_node_diameter + (mesh.box.x - mesh.box.width / 2) + room.nav_node_diameter / 2;
                                    exports.render_filled_box({
                                        x: final_x,
                                        y: final_y,
                                        width: room.nav_node_diameter,
                                        height: room.nav_node_diameter
                                    }, mesh.grid[y][x] == 0 ? "green" : "red", 0.4);
                                }
                            }
                        }
                    }
                    let box;
                    let boxes_copy = [...boxes];
                    let lines_copy = [...lines];
                    while (lines_copy.length > 0) {
                        let line = lines_copy.pop();
                        render_1.line_renderer(this.offscreen_context, line, "orange", 10, camera);
                    }
                    while (boxes_copy.length > 0) {
                        let box_entry = boxes_copy.pop();
                        let rect = {
                            width: box_entry.box.width,
                            height: box_entry.box.height
                        };
                        render_1.stroked_rect_renderer(this.offscreen_context, rect, box_entry.box.x, box_entry.box.y, box_entry.color, 1, camera);
                    }
                    while (hitboxes.length > 0) {
                        let box = hitboxes.pop();
                        let rect = {
                            width: box.width,
                            height: box.height
                        };
                        render_1.stroked_rect_renderer(this.offscreen_context, rect, box.x, box.y, "#008000", 1, camera);
                    }
                    while (filled_boxes.length > 0) {
                        let box = filled_boxes.pop();
                        let rect = {
                            width: box.box.width,
                            height: box.box.height
                        };
                        render_1.rect_renderer(this.offscreen_context, rect, box.box.x, box.box.y, box.color, camera, box.opacity);
                    }
                    //Draws a special box around the currently selected element
                    //inside the editor UI
                    if (exports.DEBUG && debug_1.debug_state.selected_properties_element) {
                        let coll = debug_1.debug_state.selected_properties_element.getFullCollisionBox();
                        render_1.rect_renderer(this.offscreen_context, { width: 5, height: 5 }, coll.x, coll.y, "skyblue", camera);
                        render_1.stroked_rect_renderer(this.offscreen_context, coll, coll.x, coll.y, "blue", 1, camera);
                    }
                    render_1.stroked_rect_renderer(this.offscreen_context, { width: this.state.current_room.proximity_map.length, height: this.state.current_room.proximity_map.length }, 0, 0, "purple", 10, camera);
                }
                //Separate canvas for the editor camera
                if (a !== editor_camera_index) {
                    //this.state.context.drawImage(this.test_canvas, camera.state.viewport.x, camera.state.viewport.y);
                    this.state.context.drawImage(this.offscreen_canvas, camera.state.viewport.x, camera.state.viewport.y);
                }
                else {
                    //debug_state.target.getContext("2d").drawImage(this.test_canvas, camera.state.viewport.x, camera.state.viewport.y);  
                    debug_1.debug_state.target.getContext("2d").drawImage(this.offscreen_canvas, camera.state.viewport.x, camera.state.viewport.y);
                }
            }
            if (exports.DEBUG) {
                boxes = [];
                filled_boxes = [];
                lines = [];
            }
            requestAnimationFrame((a) => __awaiter(this, void 0, void 0, function* () {
                if (this.isRendering) {
                    yield this.render(a);
                }
            }));
        });
    }
    start_logic(a) {
        //this is the room's state loop
        return window.setInterval(() => {
            let new_time = new Date();
            if (!exports.PAUSED) {
                let time_since = new_time.getTime() - last_time.getTime();
                let room = this.state.current_room;
                if (room) {
                    room.statef(time_since);
                    if (this.state.cameras) {
                        for (let cameras of this.state.cameras) {
                            if (cameras.hud) {
                                cameras.hud.statef(time_since);
                            }
                        }
                    }
                }
            }
            last_time = new_time;
            //This functions handles binds that occur on an interval
            controls_1.ExecuteRepeatBinds(a);
            var gamepads = [...navigator.getGamepads()];
            for (let gamepad of gamepads.filter(pad => pad != null)) {
                controls_1.handleGamepad(gamepad);
            }
        }, a);
    }
    getRoom() {
        return this.state.current_room;
    }
    loadRoomString(x) {
        return __awaiter(this, void 0, void 0, function* () {
            //room list is a object that contains each room's class,
            //with the room's name as the key for class
            //This object is populated at compile time
            let loaded_room = false;
            for (let a of Object.keys(rooms_1.rooms)) {
                if (a == x) {
                    //this isn't particularly type-safe.
                    let new_room = new rooms_1.rooms[a](this);
                    yield this.loadRoom(new_room);
                    return;
                }
            }
            throw new Error("Attempted to load non-existing room.");
        });
    }
    //Redraws any static objects contained within the list
    drawStaticObjects(input) {
        let room_length = this.state.current_room.proximity_map.length;
        let statics = input.filter(u => u.static);
        /*This camera spans the entire world space, which we use to capture
        A render of every static objects, which we cache. Instead of rendering
        every static object every frame, we render the cached image. */
        let static_cam = new render_1.Camera({
            x: 0,
            y: 0,
            dimensions: { height: room_length, width: room_length },
            scaling: 1,
            debug: false
        }, {
            x: 0,
            y: 0,
            width: 1,
            height: 1
        });
        statics.forEach((u) => {
            let rendered = u.renderTrack(u.last_render);
            for (let r of rendered) {
                render_1.sprite_renderer({
                    context: this.static_context,
                    camera: static_cam
                }, {
                    sprite: r.sprite,
                    x: r.x,
                    y: r.y,
                    rotation: u.state.rotation,
                    scale: u.state.scaling,
                    scale_type: u.scale_type
                });
            }
        });
    }
    //Redraws the statics that are contained within the input collision box.
    updateStaticsInCollision(input) {
        let prox_boxes = this.state.current_room.proximity_map.getCordsFromBox(input);
        let square_length = this.state.current_room.proximity_map.square_length;
        let room_length = this.state.current_room.proximity_map.length;
        for (let box of prox_boxes) {
            this.static_context.clearRect(box.x * square_length, room_length - (box.y * square_length + square_length), square_length, square_length);
        }
        let statics = this.state.current_room.proximity_map.getObjectsFromCords(prox_boxes);
        this.drawStaticObjects(statics);
    }
    //Creates the inital cached render of the static objects.
    drawAllStatics() {
        let room_length = this.state.current_room.proximity_map.length;
        this.static_canvas.width = room_length;
        this.static_canvas.height = room_length;
        this.static_context.clearRect(0, 0, room_length, room_length);
        this.drawStaticObjects(this.state.current_room.objects);
    }
    loadRoom(x) {
        return __awaiter(this, void 0, void 0, function* () {
            //Clears the room's logic loop if one
            //Was already running
            this.isRendering = false;
            if (this.state.logic) {
                window.clearInterval(this.state.logic);
            }
            //This reference is used during initialization
            x.game = this;
            //Deletes each object in the room (which also unbinds their binds),
            //and unbinds the room's bindings.
            if (this.state.current_room !== undefined) {
                while (this.state.current_room.objects.length > 0) {
                    this.state.current_room.objects[0].delete();
                }
                for (let id of this.state.current_room.binds) {
                    controls_1.Unbind(id);
                }
            }
            yield x.load();
            for (let c of x.config.objects) {
                //This handles loading objects from the saved json file associated with each room.
                yield x.addItemStateConfig(c);
            }
            x.registerControls();
            x.registerParticles();
            x.registerAudio();
            this.state.current_room = x;
            yield this.state.current_room.initialize();
            this.drawAllStatics();
            this.state.logic = this.start_logic(logic_loop_interval);
            if (exports.DEBUG) {
                debug_1.debug_update_room_list();
                debug_1.debug_update_prefabs();
                debug_1.debug_update_obj_list();
            }
            if (!this.isRendering) {
                this.isRendering = true;
                //This starts the render loop for the room
                this.render(0);
            }
        });
    }
}
exports.game = game;
var peer_connection;
(function (peer_connection) {
    peer_connection[peer_connection["child"] = 0] = "child";
    peer_connection[peer_connection["host"] = 1] = "host";
})(peer_connection = exports.peer_connection || (exports.peer_connection = {}));
class peer_to_peer_game extends game {
    constructor(ctx, init_state) {
        super(ctx, init_state);
        this.net_type = network_1.net_type.web;
        this.network = new network_1.Web();
        this.network.game = this;
    }
}
exports.peer_to_peer_game = peer_to_peer_game;


/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NoZXNzLmpzL2NoZXNzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wZWVyanMvZGlzdCBzeW5jIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wZWVyanMvZGlzdC9wZWVyanMubWluLmpzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvb2JqZWN0cy9hYnN0cmFjdC9waWVjZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9vYmplY3RzL2JvYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL29iamVjdHMvcGF3bi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9vYmplY3RzL3ByZWZhYnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvcm9vbXMvYm9hcmRWaWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lL3Jvb21zL3Jvb21zLnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvYXVkaW8udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9jb2xsaXNpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9jb250cm9scy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL2RlYnVnLnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvaHVkLnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvbWF0aC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL25ldHdvcmsudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9vYmplY3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9yZW5kZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYi9yb29tLnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvc3ByaXRlLnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvdGVtcGxhdGVzL29iamVjdF90ZW1wbGF0ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliL3RlbXBsYXRlcy9yb29tX3RlbXBsYXRlLnRzIiwid2VicGFjazovLy8uL3NyYy9saWIvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Zhbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1FBQUE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7OztRQUdBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSwwQ0FBMEMsZ0NBQWdDO1FBQzFFO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0Esd0RBQXdELGtCQUFrQjtRQUMxRTtRQUNBLGlEQUFpRCxjQUFjO1FBQy9EOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQSx5Q0FBeUMsaUNBQWlDO1FBQzFFLGdIQUFnSCxtQkFBbUIsRUFBRTtRQUNySTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLDJCQUEyQiwwQkFBMEIsRUFBRTtRQUN2RCxpQ0FBaUMsZUFBZTtRQUNoRDtRQUNBO1FBQ0E7O1FBRUE7UUFDQSxzREFBc0QsK0RBQStEOztRQUVySDtRQUNBOzs7UUFHQTtRQUNBOzs7Ozs7Ozs7Ozs7O0FDbEZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsK0JBQStCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZ0JBQWdCOztBQUVoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLLGlEQUFpRDtBQUN0RCxLQUFLLGlEQUFpRDtBQUN0RDtBQUNBO0FBQ0EsS0FBSyxpREFBaUQ7QUFDdEQsS0FBSyxpREFBaUQ7QUFDdEQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHFDQUFxQyxTQUFTO0FBQzlDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztB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QUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDbkQsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDbkMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDbkMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtRQUNwQixDQUFDLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7S0FDdkU7U0FDSTtRQUNILENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNyRDtBQUNILENBQUM7QUFFWSxxQkFBYSxHQUFHLENBQUMsQ0FBZSxFQUFDLENBQWEsRUFBRSxFQUFFO0lBQzdELElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUM7SUFDdEIsSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQztJQUMvQyxJQUFJLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzFJLElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDM0ksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUM1RSxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNuQyxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUs7SUFDbEMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNqQixDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDdEMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtRQUNwQixDQUFDLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7S0FDekQ7U0FDSTtRQUNILENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FB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QUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN0TCxJQUFJLE9BQU8sR0FBRyxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDbk0sSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxhQUFhLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO0lBQzlFLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQztJQUMzRSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ2pCLENBQUMsQ0FBQyxPQUFPLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDO0lBQ3pDLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLE9BQU8sR0FBSSxDQUFDLEtBQUss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QUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ3RCLENBQUM7QUFPWSxxQkFBYSxHQUFHLENBQUMsT0FBZ0MsRUFBQyxJQUFTLEVBQUMsS0FBWSxFQUFDLFNBQWdCLEVBQUMsTUFBYSxFQUFFLEVBQUU7SUFDdEgsSUFBSSxPQUFPLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDO0lBQ3BFLElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvSSxJQUFJLE9BQU8sR0FBRyxDQUFDLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBRTFKLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFD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SSxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNySixJQUFJLE9BQU8sR0FBRyxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNqSyxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDO0lBQ2hELElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUM7SUFDOUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ2YsT0FBTyxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUMsT0FBTyxDQUFDLENBQUM7SUFDbkMsT0FBTyxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUM7SUFDOUIsT0FBTyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7SUFDMUIsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEtBQUssR0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLEdBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztJ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IFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9zcmMvZ2FtZS9tYWluLnRzXCIpO1xuIiwiLypcbiAqIENvcHlyaWdodCAoYykgMjAyMiwgSmVmZiBIbHl3YSAoamhseXdhQGdtYWlsLmNvbSlcbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG4gKiBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcbiAqXG4gKiAxLiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4gKiAgICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuICogMi4gUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICogICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuICogICAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG4gKlxuICogVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCJcbiAqIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEVcbiAqIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFXG4gKiBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBPV05FUiBPUiBDT05UUklCVVRPUlMgQkVcbiAqIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1JcbiAqIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GXG4gKiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1NcbiAqIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOXG4gKiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKVxuICogQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEVcbiAqIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuICpcbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmNvbnN0IFNZTUJPTFMgPSAncG5icnFrUE5CUlFLJ1xuXG5jb25zdCBERUZBVUxUX1BPU0lUSU9OID1cbiAgJ3JuYnFrYm5yL3BwcHBwcHBwLzgvOC84LzgvUFBQUFBQUFAvUk5CUUtCTlIgdyBLUWtxIC0gMCAxJ1xuXG5jb25zdCBURVJNSU5BVElPTl9NQVJLRVJTID0gWycxLTAnLCAnMC0xJywgJzEvMi0xLzInLCAnKiddXG5cbmNvbnN0IFBBV05fT0ZGU0VUUyA9IHtcbiAgYjogWzE2LCAzMiwgMTcsIDE1XSxcbiAgdzogWy0xNiwgLTMyLCAtMTcsIC0xNV0sXG59XG5cbmNvbnN0IFBJRUNFX09GRlNFVFMgPSB7XG4gIG46IFstMTgsIC0zMywgLTMxLCAtMTQsIDE4LCAzMywgMzEsIDE0XSxcbiAgYjogWy0xNywgLTE1LCAxNywgMTVdLFxuICByOiBbLTE2LCAxLCAxNiwgLTFdLFxuICBxOiBbLTE3LCAtMTYsIC0xNSwgMSwgMTcsIDE2LCAxNSwgLTFdLFxuICBrOiBbLTE3LCAtMTYsIC0xNSwgMSwgMTcsIDE2LCAxNSwgLTFdLFxufVxuXG4vLyBwcmV0dGllci1pZ25vcmVcbmNvbnN0IEFUVEFDS1MgPSBbXG4gIDIwLCAwLCAwLCAwLCAwLCAwLCAwLCAyNCwgIDAsIDAsIDAsIDAsIDAsIDAsMjAsIDAsXG4gICAwLDIwLCAwLCAwLCAwLCAwLCAwLCAyNCwgIDAsIDAsIDAsIDAsIDAsMjAsIDAsIDAsXG4gICAwLCAwLDIwLCAwLCAwLCAwLCAwLCAyNCwgIDAsIDAsIDAsIDAsMjAsIDAsIDAsIDAsXG4gICAwLCAwLCAwLDIwLCAwLCAwLCAwLCAyNCwgIDAsIDAsIDAsMjAsIDAsIDAsIDAsIDAsXG4gICAwLCAwLCAwLCAwLDIwLCAwLCAwLCAyNCwgIDAsIDAsMjAsIDAsIDAsIDAsIDAsIDAsXG4gICAwLCAwLCAwLCAwLCAwLDIwLCAyLCAyNCwgIDIsMjAsIDAsIDAsIDAsIDAsIDAsIDAsXG4gICAwLCAwLCAwLCAwLCAwLCAyLDUzLCA1NiwgNTMsIDIsIDAsIDAsIDAsIDAsIDAsIDAsXG4gIDI0LDI0LDI0LDI0LDI0LDI0LDU2LCAgMCwgNTYsMjQsMjQsMjQsMjQsMjQsMjQsIDAsXG4gICAwLCAwLCAwLCAwLCAwLCAyLDUzLCA1NiwgNTMsIDIsIDAsIDAsIDAsIDAsIDAsIDAsXG4gICAwLCAwLCAwLCAwLCAwLDIwLCAyLCAyNCwgIDIsMjAsIDAsIDAsIDAsIDAsIDAsIDAsXG4gICAwLCAwLCAwLCAwLDIwLCAwLCAwLCAyNCwgIDAsIDAsMjAsIDAsIDAsIDAsIDAsIDAsXG4gICAwLCAwLCAwLDIwLCAwLCAwLCAwLCAyNCwgIDAsIDAsIDAsMjAsIDAsIDAsIDAsIDAsXG4gICAwLCAwLDIwLCAwLCAwLCAwLCAwLCAyNCwgIDAsIDAsIDAsIDAsMjAsIDAsIDAsIDAsXG4gICAwLDIwLCAwLCAwLCAwLCAwLCAwLCAyNCwgIDAsIDAsIDAsIDAsIDAsMjAsIDAsIDAsXG4gIDIwLCAwLCAwLCAwLCAwLCAwLCAwLCAyNCwgIDAsIDAsIDAsIDAsIDAsIDAsMjBcbl07XG5cbi8vIHByZXR0aWVyLWlnbm9yZVxuY29uc3QgUkFZUyA9IFtcbiAgIDE3LCAgMCwgIDAsICAwLCAgMCwgIDAsICAwLCAxNiwgIDAsICAwLCAgMCwgIDAsICAwLCAgMCwgMTUsIDAsXG4gICAgMCwgMTcsICAwLCAgMCwgIDAsICAwLCAgMCwgMTYsICAwLCAgMCwgIDAsICAwLCAgMCwgMTUsICAwLCAwLFxuICAgIDAsICAwLCAxNywgIDAsICAwLCAgMCwgIDAsIDE2LCAgMCwgIDAsICAwLCAgMCwgMTUsICAwLCAgMCwgMCxcbiAgICAwLCAgMCwgIDAsIDE3LCAgMCwgIDAsICAwLCAxNiwgIDAsICAwLCAgMCwgMTUsICAwLCAgMCwgIDAsIDAsXG4gICAgMCwgIDAsICAwLCAgMCwgMTcsICAwLCAgMCwgMTYsICAwLCAgMCwgMTUsICAwLCAgMCwgIDAsICAwLCAwLFxuICAgIDAsICAwLCAgMCwgIDAsICAwLCAxNywgIDAsIDE2LCAgMCwgMTUsICAwLCAgMCwgIDAsICAwLCAgMCwgMCxcbiAgICAwLCAgMCwgIDAsICAwLCAgMCwgIDAsIDE3LCAxNiwgMTUsICAwLCAgMCwgIDAsICAwLCAgMCwgIDAsIDAsXG4gICAgMSwgIDEsICAxLCAgMSwgIDEsICAxLCAgMSwgIDAsIC0xLCAtMSwgIC0xLC0xLCAtMSwgLTEsIC0xLCAwLFxuICAgIDAsICAwLCAgMCwgIDAsICAwLCAgMCwtMTUsLTE2LC0xNywgIDAsICAwLCAgMCwgIDAsICAwLCAgMCwgMCxcbiAgICAwLCAgMCwgIDAsICAwLCAgMCwtMTUsICAwLC0xNiwgIDAsLTE3LCAgMCwgIDAsICAwLCAgMCwgIDAsIDAsXG4gICAgMCwgIDAsICAwLCAgMCwtMTUsICAwLCAgMCwtMTYsICAwLCAgMCwtMTcsICAwLCAgMCwgIDAsICAwLCAwLFxuICAgIDAsICAwLCAgMCwtMTUsICAwLCAgMCwgIDAsLTE2LCAgMCwgIDAsICAwLC0xNywgIDAsICAwLCAgMCwgMCxcbiAgICAwLCAgMCwtMTUsICAwLCAgMCwgIDAsICAwLC0xNiwgIDAsICAwLCAgMCwgIDAsLTE3LCAgMCwgIDAsIDAsXG4gICAgMCwtMTUsICAwLCAgMCwgIDAsICAwLCAgMCwtMTYsICAwLCAgMCwgIDAsICAwLCAgMCwtMTcsICAwLCAwLFxuICAtMTUsICAwLCAgMCwgIDAsICAwLCAgMCwgIDAsLTE2LCAgMCwgIDAsICAwLCAgMCwgIDAsICAwLC0xN1xuXTtcblxuY29uc3QgU0hJRlRTID0geyBwOiAwLCBuOiAxLCBiOiAyLCByOiAzLCBxOiA0LCBrOiA1IH1cblxuY29uc3QgQklUUyA9IHtcbiAgTk9STUFMOiAxLFxuICBDQVBUVVJFOiAyLFxuICBCSUdfUEFXTjogNCxcbiAgRVBfQ0FQVFVSRTogOCxcbiAgUFJPTU9USU9OOiAxNixcbiAgS1NJREVfQ0FTVExFOiAzMixcbiAgUVNJREVfQ0FTVExFOiA2NCxcbn1cblxuY29uc3QgUkFOS18xID0gN1xuY29uc3QgUkFOS18yID0gNlxuY29uc3QgUkFOS18zID0gNVxuY29uc3QgUkFOS180ID0gNFxuY29uc3QgUkFOS181ID0gM1xuY29uc3QgUkFOS182ID0gMlxuY29uc3QgUkFOS183ID0gMVxuY29uc3QgUkFOS184ID0gMFxuXG4vLyBwcmV0dGllci1pZ25vcmVcbmNvbnN0IFNRVUFSRV9NQVAgPSB7XG4gIGE4OiAgIDAsIGI4OiAgIDEsIGM4OiAgIDIsIGQ4OiAgIDMsIGU4OiAgIDQsIGY4OiAgIDUsIGc4OiAgIDYsIGg4OiAgIDcsXG4gIGE3OiAgMTYsIGI3OiAgMTcsIGM3OiAgMTgsIGQ3OiAgMTksIGU3OiAgMjAsIGY3OiAgMjEsIGc3OiAgMjIsIGg3OiAgMjMsXG4gIGE2OiAgMzIsIGI2OiAgMzMsIGM2OiAgMzQsIGQ2OiAgMzUsIGU2OiAgMzYsIGY2OiAgMzcsIGc2OiAgMzgsIGg2OiAgMzksXG4gIGE1OiAgNDgsIGI1OiAgNDksIGM1OiAgNTAsIGQ1OiAgNTEsIGU1OiAgNTIsIGY1OiAgNTMsIGc1OiAgNTQsIGg1OiAgNTUsXG4gIGE0OiAgNjQsIGI0OiAgNjUsIGM0OiAgNjYsIGQ0OiAgNjcsIGU0OiAgNjgsIGY0OiAgNjksIGc0OiAgNzAsIGg0OiAgNzEsXG4gIGEzOiAgODAsIGIzOiAgODEsIGMzOiAgODIsIGQzOiAgODMsIGUzOiAgODQsIGYzOiAgODUsIGczOiAgODYsIGgzOiAgODcsXG4gIGEyOiAgOTYsIGIyOiAgOTcsIGMyOiAgOTgsIGQyOiAgOTksIGUyOiAxMDAsIGYyOiAxMDEsIGcyOiAxMDIsIGgyOiAxMDMsXG4gIGExOiAxMTIsIGIxOiAxMTMsIGMxOiAxMTQsIGQxOiAxMTUsIGUxOiAxMTYsIGYxOiAxMTcsIGcxOiAxMTgsIGgxOiAxMTlcbn07XG5cbmNvbnN0IFJPT0tTID0ge1xuICB3OiBbXG4gICAgeyBzcXVhcmU6IFNRVUFSRV9NQVAuYTEsIGZsYWc6IEJJVFMuUVNJREVfQ0FTVExFIH0sXG4gICAgeyBzcXVhcmU6IFNRVUFSRV9NQVAuaDEsIGZsYWc6IEJJVFMuS1NJREVfQ0FTVExFIH0sXG4gIF0sXG4gIGI6IFtcbiAgICB7IHNxdWFyZTogU1FVQVJFX01BUC5hOCwgZmxhZzogQklUUy5RU0lERV9DQVNUTEUgfSxcbiAgICB7IHNxdWFyZTogU1FVQVJFX01BUC5oOCwgZmxhZzogQklUUy5LU0lERV9DQVNUTEUgfSxcbiAgXSxcbn1cblxuY29uc3QgUEFSU0VSX1NUUklDVCA9IDBcbmNvbnN0IFBBUlNFUl9TTE9QUFkgPSAxXG5cbi8qIHRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byB1bmlxdWVseSBpZGVudGlmeSBhbWJpZ3VvdXMgbW92ZXMgKi9cbmZ1bmN0aW9uIGdldF9kaXNhbWJpZ3VhdG9yKG1vdmUsIG1vdmVzKSB7XG4gIHZhciBmcm9tID0gbW92ZS5mcm9tXG4gIHZhciB0byA9IG1vdmUudG9cbiAgdmFyIHBpZWNlID0gbW92ZS5waWVjZVxuXG4gIHZhciBhbWJpZ3VpdGllcyA9IDBcbiAgdmFyIHNhbWVfcmFuayA9IDBcbiAgdmFyIHNhbWVfZmlsZSA9IDBcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gbW92ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICB2YXIgYW1iaWdfZnJvbSA9IG1vdmVzW2ldLmZyb21cbiAgICB2YXIgYW1iaWdfdG8gPSBtb3Zlc1tpXS50b1xuICAgIHZhciBhbWJpZ19waWVjZSA9IG1vdmVzW2ldLnBpZWNlXG5cbiAgICAvKiBpZiBhIG1vdmUgb2YgdGhlIHNhbWUgcGllY2UgdHlwZSBlbmRzIG9uIHRoZSBzYW1lIHRvIHNxdWFyZSwgd2UnbGxcbiAgICAgKiBuZWVkIHRvIGFkZCBhIGRpc2FtYmlndWF0b3IgdG8gdGhlIGFsZ2VicmFpYyBub3RhdGlvblxuICAgICAqL1xuICAgIGlmIChwaWVjZSA9PT0gYW1iaWdfcGllY2UgJiYgZnJvbSAhPT0gYW1iaWdfZnJvbSAmJiB0byA9PT0gYW1iaWdfdG8pIHtcbiAgICAgIGFtYmlndWl0aWVzKytcblxuICAgICAgaWYgKHJhbmsoZnJvbSkgPT09IHJhbmsoYW1iaWdfZnJvbSkpIHtcbiAgICAgICAgc2FtZV9yYW5rKytcbiAgICAgIH1cblxuICAgICAgaWYgKGZpbGUoZnJvbSkgPT09IGZpbGUoYW1iaWdfZnJvbSkpIHtcbiAgICAgICAgc2FtZV9maWxlKytcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoYW1iaWd1aXRpZXMgPiAwKSB7XG4gICAgLyogaWYgdGhlcmUgZXhpc3RzIGEgc2ltaWxhciBtb3ZpbmcgcGllY2Ugb24gdGhlIHNhbWUgcmFuayBhbmQgZmlsZSBhc1xuICAgICAqIHRoZSBtb3ZlIGluIHF1ZXN0aW9uLCB1c2UgdGhlIHNxdWFyZSBhcyB0aGUgZGlzYW1iaWd1YXRvclxuICAgICAqL1xuICAgIGlmIChzYW1lX3JhbmsgPiAwICYmIHNhbWVfZmlsZSA+IDApIHtcbiAgICAgIHJldHVybiBhbGdlYnJhaWMoZnJvbSlcbiAgICB9IGVsc2UgaWYgKHNhbWVfZmlsZSA+IDApIHtcbiAgICAgIC8qIGlmIHRoZSBtb3ZpbmcgcGllY2UgcmVzdHMgb24gdGhlIHNhbWUgZmlsZSwgdXNlIHRoZSByYW5rIHN5bWJvbCBhcyB0aGVcbiAgICAgICAqIGRpc2FtYmlndWF0b3JcbiAgICAgICAqL1xuICAgICAgcmV0dXJuIGFsZ2VicmFpYyhmcm9tKS5jaGFyQXQoMSlcbiAgICB9IGVsc2Uge1xuICAgICAgLyogZWxzZSB1c2UgdGhlIGZpbGUgc3ltYm9sICovXG4gICAgICByZXR1cm4gYWxnZWJyYWljKGZyb20pLmNoYXJBdCgwKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiAnJ1xufVxuXG5mdW5jdGlvbiBpbmZlcl9waWVjZV90eXBlKHNhbikge1xuICB2YXIgcGllY2VfdHlwZSA9IHNhbi5jaGFyQXQoMClcbiAgaWYgKHBpZWNlX3R5cGUgPj0gJ2EnICYmIHBpZWNlX3R5cGUgPD0gJ2gnKSB7XG4gICAgdmFyIG1hdGNoZXMgPSBzYW4ubWF0Y2goL1thLWhdXFxkLipbYS1oXVxcZC8pXG4gICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIFBBV05cbiAgfVxuICBwaWVjZV90eXBlID0gcGllY2VfdHlwZS50b0xvd2VyQ2FzZSgpXG4gIGlmIChwaWVjZV90eXBlID09PSAnbycpIHtcbiAgICByZXR1cm4gS0lOR1xuICB9XG4gIHJldHVybiBwaWVjZV90eXBlXG59XG5cbi8vIHBhcnNlcyBhbGwgb2YgdGhlIGRlY29yYXRvcnMgb3V0IG9mIGEgU0FOIHN0cmluZ1xuZnVuY3Rpb24gc3RyaXBwZWRfc2FuKG1vdmUpIHtcbiAgcmV0dXJuIG1vdmUucmVwbGFjZSgvPS8sICcnKS5yZXBsYWNlKC9bKyNdP1s/IV0qJC8sICcnKVxufVxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqIFVUSUxJVFkgRlVOQ1RJT05TXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbmZ1bmN0aW9uIHJhbmsoaSkge1xuICByZXR1cm4gaSA+PiA0XG59XG5cbmZ1bmN0aW9uIGZpbGUoaSkge1xuICByZXR1cm4gaSAmIDE1XG59XG5cbmZ1bmN0aW9uIGFsZ2VicmFpYyhpKSB7XG4gIHZhciBmID0gZmlsZShpKSxcbiAgICByID0gcmFuayhpKVxuICByZXR1cm4gJ2FiY2RlZmdoJy5zdWJzdHJpbmcoZiwgZiArIDEpICsgJzg3NjU0MzIxJy5zdWJzdHJpbmcociwgciArIDEpXG59XG5cbmZ1bmN0aW9uIHN3YXBfY29sb3IoYykge1xuICByZXR1cm4gYyA9PT0gV0hJVEUgPyBCTEFDSyA6IFdISVRFXG59XG5cbmZ1bmN0aW9uIGlzX2RpZ2l0KGMpIHtcbiAgcmV0dXJuICcwMTIzNDU2Nzg5Jy5pbmRleE9mKGMpICE9PSAtMVxufVxuXG5mdW5jdGlvbiBjbG9uZShvYmopIHtcbiAgdmFyIGR1cGUgPSBvYmogaW5zdGFuY2VvZiBBcnJheSA/IFtdIDoge31cblxuICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBvYmopIHtcbiAgICBpZiAodHlwZW9mIHByb3BlcnR5ID09PSAnb2JqZWN0Jykge1xuICAgICAgZHVwZVtwcm9wZXJ0eV0gPSBjbG9uZShvYmpbcHJvcGVydHldKVxuICAgIH0gZWxzZSB7XG4gICAgICBkdXBlW3Byb3BlcnR5XSA9IG9ialtwcm9wZXJ0eV1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZHVwZVxufVxuXG5mdW5jdGlvbiB0cmltKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxufVxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBQVUJMSUMgQ09OU1RBTlRTXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmV4cG9ydCBjb25zdCBCTEFDSyA9ICdiJ1xuZXhwb3J0IGNvbnN0IFdISVRFID0gJ3cnXG5cbmV4cG9ydCBjb25zdCBFTVBUWSA9IC0xXG5cbmV4cG9ydCBjb25zdCBQQVdOID0gJ3AnXG5leHBvcnQgY29uc3QgS05JR0hUID0gJ24nXG5leHBvcnQgY29uc3QgQklTSE9QID0gJ2InXG5leHBvcnQgY29uc3QgUk9PSyA9ICdyJ1xuZXhwb3J0IGNvbnN0IFFVRUVOID0gJ3EnXG5leHBvcnQgY29uc3QgS0lORyA9ICdrJ1xuXG5leHBvcnQgY29uc3QgU1FVQVJFUyA9IChmdW5jdGlvbiAoKSB7XG4gIC8qIGZyb20gdGhlIEVDTUEtMjYyIHNwZWMgKHNlY3Rpb24gMTIuNi40KTpcbiAgICogXCJUaGUgbWVjaGFuaWNzIG9mIGVudW1lcmF0aW5nIHRoZSBwcm9wZXJ0aWVzIC4uLiBpc1xuICAgKiBpbXBsZW1lbnRhdGlvbiBkZXBlbmRlbnRcIlxuICAgKiBzbzogZm9yICh2YXIgc3EgaW4gU1FVQVJFUykgeyBrZXlzLnB1c2goc3EpOyB9IG1pZ2h0IG5vdCBiZVxuICAgKiBvcmRlcmVkIGNvcnJlY3RseVxuICAgKi9cbiAgdmFyIGtleXMgPSBbXVxuICBmb3IgKHZhciBpID0gU1FVQVJFX01BUC5hODsgaSA8PSBTUVVBUkVfTUFQLmgxOyBpKyspIHtcbiAgICBpZiAoaSAmIDB4ODgpIHtcbiAgICAgIGkgKz0gN1xuICAgICAgY29udGludWVcbiAgICB9XG4gICAga2V5cy5wdXNoKGFsZ2VicmFpYyhpKSlcbiAgfVxuICByZXR1cm4ga2V5c1xufSkoKVxuXG5leHBvcnQgY29uc3QgRkxBR1MgPSB7XG4gIE5PUk1BTDogJ24nLFxuICBDQVBUVVJFOiAnYycsXG4gIEJJR19QQVdOOiAnYicsXG4gIEVQX0NBUFRVUkU6ICdlJyxcbiAgUFJPTU9USU9OOiAncCcsXG4gIEtTSURFX0NBU1RMRTogJ2snLFxuICBRU0lERV9DQVNUTEU6ICdxJyxcbn1cblxuZXhwb3J0IGNvbnN0IENoZXNzID0gZnVuY3Rpb24gKGZlbikge1xuICB2YXIgYm9hcmQgPSBuZXcgQXJyYXkoMTI4KVxuICB2YXIga2luZ3MgPSB7IHc6IEVNUFRZLCBiOiBFTVBUWSB9XG4gIHZhciB0dXJuID0gV0hJVEVcbiAgdmFyIGNhc3RsaW5nID0geyB3OiAwLCBiOiAwIH1cbiAgdmFyIGVwX3NxdWFyZSA9IEVNUFRZXG4gIHZhciBoYWxmX21vdmVzID0gMFxuICB2YXIgbW92ZV9udW1iZXIgPSAxXG4gIHZhciBoaXN0b3J5ID0gW11cbiAgdmFyIGhlYWRlciA9IHt9XG4gIHZhciBjb21tZW50cyA9IHt9XG5cbiAgLyogaWYgdGhlIHVzZXIgcGFzc2VzIGluIGEgZmVuIHN0cmluZywgbG9hZCBpdCwgZWxzZSBkZWZhdWx0IHRvXG4gICAqIHN0YXJ0aW5nIHBvc2l0aW9uXG4gICAqL1xuICBpZiAodHlwZW9mIGZlbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBsb2FkKERFRkFVTFRfUE9TSVRJT04pXG4gIH0gZWxzZSB7XG4gICAgbG9hZChmZW4pXG4gIH1cblxuICBmdW5jdGlvbiBjbGVhcihrZWVwX2hlYWRlcnMpIHtcbiAgICBpZiAodHlwZW9mIGtlZXBfaGVhZGVycyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGtlZXBfaGVhZGVycyA9IGZhbHNlXG4gICAgfVxuXG4gICAgYm9hcmQgPSBuZXcgQXJyYXkoMTI4KVxuICAgIGtpbmdzID0geyB3OiBFTVBUWSwgYjogRU1QVFkgfVxuICAgIHR1cm4gPSBXSElURVxuICAgIGNhc3RsaW5nID0geyB3OiAwLCBiOiAwIH1cbiAgICBlcF9zcXVhcmUgPSBFTVBUWVxuICAgIGhhbGZfbW92ZXMgPSAwXG4gICAgbW92ZV9udW1iZXIgPSAxXG4gICAgaGlzdG9yeSA9IFtdXG4gICAgaWYgKCFrZWVwX2hlYWRlcnMpIGhlYWRlciA9IHt9XG4gICAgY29tbWVudHMgPSB7fVxuICAgIHVwZGF0ZV9zZXR1cChnZW5lcmF0ZV9mZW4oKSlcbiAgfVxuXG4gIGZ1bmN0aW9uIHBydW5lX2NvbW1lbnRzKCkge1xuICAgIHZhciByZXZlcnNlZF9oaXN0b3J5ID0gW11cbiAgICB2YXIgY3VycmVudF9jb21tZW50cyA9IHt9XG4gICAgdmFyIGNvcHlfY29tbWVudCA9IGZ1bmN0aW9uIChmZW4pIHtcbiAgICAgIGlmIChmZW4gaW4gY29tbWVudHMpIHtcbiAgICAgICAgY3VycmVudF9jb21tZW50c1tmZW5dID0gY29tbWVudHNbZmVuXVxuICAgICAgfVxuICAgIH1cbiAgICB3aGlsZSAoaGlzdG9yeS5sZW5ndGggPiAwKSB7XG4gICAgICByZXZlcnNlZF9oaXN0b3J5LnB1c2godW5kb19tb3ZlKCkpXG4gICAgfVxuICAgIGNvcHlfY29tbWVudChnZW5lcmF0ZV9mZW4oKSlcbiAgICB3aGlsZSAocmV2ZXJzZWRfaGlzdG9yeS5sZW5ndGggPiAwKSB7XG4gICAgICBtYWtlX21vdmUocmV2ZXJzZWRfaGlzdG9yeS5wb3AoKSlcbiAgICAgIGNvcHlfY29tbWVudChnZW5lcmF0ZV9mZW4oKSlcbiAgICB9XG4gICAgY29tbWVudHMgPSBjdXJyZW50X2NvbW1lbnRzXG4gIH1cblxuICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICBsb2FkKERFRkFVTFRfUE9TSVRJT04pXG4gIH1cblxuICBmdW5jdGlvbiBsb2FkKGZlbiwga2VlcF9oZWFkZXJzKSB7XG4gICAgaWYgKHR5cGVvZiBrZWVwX2hlYWRlcnMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBrZWVwX2hlYWRlcnMgPSBmYWxzZVxuICAgIH1cblxuICAgIHZhciB0b2tlbnMgPSBmZW4uc3BsaXQoL1xccysvKVxuICAgIHZhciBwb3NpdGlvbiA9IHRva2Vuc1swXVxuICAgIHZhciBzcXVhcmUgPSAwXG5cbiAgICBpZiAoIXZhbGlkYXRlX2ZlbihmZW4pLnZhbGlkKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBjbGVhcihrZWVwX2hlYWRlcnMpXG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvc2l0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcGllY2UgPSBwb3NpdGlvbi5jaGFyQXQoaSlcblxuICAgICAgaWYgKHBpZWNlID09PSAnLycpIHtcbiAgICAgICAgc3F1YXJlICs9IDhcbiAgICAgIH0gZWxzZSBpZiAoaXNfZGlnaXQocGllY2UpKSB7XG4gICAgICAgIHNxdWFyZSArPSBwYXJzZUludChwaWVjZSwgMTApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgY29sb3IgPSBwaWVjZSA8ICdhJyA/IFdISVRFIDogQkxBQ0tcbiAgICAgICAgcHV0KHsgdHlwZTogcGllY2UudG9Mb3dlckNhc2UoKSwgY29sb3I6IGNvbG9yIH0sIGFsZ2VicmFpYyhzcXVhcmUpKVxuICAgICAgICBzcXVhcmUrK1xuICAgICAgfVxuICAgIH1cblxuICAgIHR1cm4gPSB0b2tlbnNbMV1cblxuICAgIGlmICh0b2tlbnNbMl0uaW5kZXhPZignSycpID4gLTEpIHtcbiAgICAgIGNhc3RsaW5nLncgfD0gQklUUy5LU0lERV9DQVNUTEVcbiAgICB9XG4gICAgaWYgKHRva2Vuc1syXS5pbmRleE9mKCdRJykgPiAtMSkge1xuICAgICAgY2FzdGxpbmcudyB8PSBCSVRTLlFTSURFX0NBU1RMRVxuICAgIH1cbiAgICBpZiAodG9rZW5zWzJdLmluZGV4T2YoJ2snKSA+IC0xKSB7XG4gICAgICBjYXN0bGluZy5iIHw9IEJJVFMuS1NJREVfQ0FTVExFXG4gICAgfVxuICAgIGlmICh0b2tlbnNbMl0uaW5kZXhPZigncScpID4gLTEpIHtcbiAgICAgIGNhc3RsaW5nLmIgfD0gQklUUy5RU0lERV9DQVNUTEVcbiAgICB9XG5cbiAgICBlcF9zcXVhcmUgPSB0b2tlbnNbM10gPT09ICctJyA/IEVNUFRZIDogU1FVQVJFX01BUFt0b2tlbnNbM11dXG4gICAgaGFsZl9tb3ZlcyA9IHBhcnNlSW50KHRva2Vuc1s0XSwgMTApXG4gICAgbW92ZV9udW1iZXIgPSBwYXJzZUludCh0b2tlbnNbNV0sIDEwKVxuXG4gICAgdXBkYXRlX3NldHVwKGdlbmVyYXRlX2ZlbigpKVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8qIFRPRE86IHRoaXMgZnVuY3Rpb24gaXMgcHJldHR5IG11Y2ggY3JhcCAtIGl0IHZhbGlkYXRlcyBzdHJ1Y3R1cmUgYnV0XG4gICAqIGNvbXBsZXRlbHkgaWdub3JlcyBjb250ZW50IChlLmcuIGRvZXNuJ3QgdmVyaWZ5IHRoYXQgZWFjaCBzaWRlIGhhcyBhIGtpbmcpXG4gICAqIC4uLiB3ZSBzaG91bGQgcmV3cml0ZSB0aGlzLCBhbmQgZGl0Y2ggdGhlIHNpbGx5IGVycm9yX251bWJlciBmaWVsZCB3aGlsZVxuICAgKiB3ZSdyZSBhdCBpdFxuICAgKi9cbiAgZnVuY3Rpb24gdmFsaWRhdGVfZmVuKGZlbikge1xuICAgIHZhciBlcnJvcnMgPSB7XG4gICAgICAwOiAnTm8gZXJyb3JzLicsXG4gICAgICAxOiAnRkVOIHN0cmluZyBtdXN0IGNvbnRhaW4gc2l4IHNwYWNlLWRlbGltaXRlZCBmaWVsZHMuJyxcbiAgICAgIDI6ICc2dGggZmllbGQgKG1vdmUgbnVtYmVyKSBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlci4nLFxuICAgICAgMzogJzV0aCBmaWVsZCAoaGFsZiBtb3ZlIGNvdW50ZXIpIG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlci4nLFxuICAgICAgNDogJzR0aCBmaWVsZCAoZW4tcGFzc2FudCBzcXVhcmUpIGlzIGludmFsaWQuJyxcbiAgICAgIDU6ICczcmQgZmllbGQgKGNhc3RsaW5nIGF2YWlsYWJpbGl0eSkgaXMgaW52YWxpZC4nLFxuICAgICAgNjogJzJuZCBmaWVsZCAoc2lkZSB0byBtb3ZlKSBpcyBpbnZhbGlkLicsXG4gICAgICA3OiBcIjFzdCBmaWVsZCAocGllY2UgcG9zaXRpb25zKSBkb2VzIG5vdCBjb250YWluIDggJy8nLWRlbGltaXRlZCByb3dzLlwiLFxuICAgICAgODogJzFzdCBmaWVsZCAocGllY2UgcG9zaXRpb25zKSBpcyBpbnZhbGlkIFtjb25zZWN1dGl2ZSBudW1iZXJzXS4nLFxuICAgICAgOTogJzFzdCBmaWVsZCAocGllY2UgcG9zaXRpb25zKSBpcyBpbnZhbGlkIFtpbnZhbGlkIHBpZWNlXS4nLFxuICAgICAgMTA6ICcxc3QgZmllbGQgKHBpZWNlIHBvc2l0aW9ucykgaXMgaW52YWxpZCBbcm93IHRvbyBsYXJnZV0uJyxcbiAgICAgIDExOiAnSWxsZWdhbCBlbi1wYXNzYW50IHNxdWFyZScsXG4gICAgfVxuXG4gICAgLyogMXN0IGNyaXRlcmlvbjogNiBzcGFjZS1zZXBlcmF0ZWQgZmllbGRzPyAqL1xuICAgIHZhciB0b2tlbnMgPSBmZW4uc3BsaXQoL1xccysvKVxuICAgIGlmICh0b2tlbnMubGVuZ3RoICE9PSA2KSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yX251bWJlcjogMSwgZXJyb3I6IGVycm9yc1sxXSB9XG4gICAgfVxuXG4gICAgLyogMm5kIGNyaXRlcmlvbjogbW92ZSBudW1iZXIgZmllbGQgaXMgYSBpbnRlZ2VyIHZhbHVlID4gMD8gKi9cbiAgICBpZiAoaXNOYU4odG9rZW5zWzVdKSB8fCBwYXJzZUludCh0b2tlbnNbNV0sIDEwKSA8PSAwKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yX251bWJlcjogMiwgZXJyb3I6IGVycm9yc1syXSB9XG4gICAgfVxuXG4gICAgLyogM3JkIGNyaXRlcmlvbjogaGFsZiBtb3ZlIGNvdW50ZXIgaXMgYW4gaW50ZWdlciA+PSAwPyAqL1xuICAgIGlmIChpc05hTih0b2tlbnNbNF0pIHx8IHBhcnNlSW50KHRva2Vuc1s0XSwgMTApIDwgMCkge1xuICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcl9udW1iZXI6IDMsIGVycm9yOiBlcnJvcnNbM10gfVxuICAgIH1cblxuICAgIC8qIDR0aCBjcml0ZXJpb246IDR0aCBmaWVsZCBpcyBhIHZhbGlkIGUucC4tc3RyaW5nPyAqL1xuICAgIGlmICghL14oLXxbYWJjZGVmZ2hdWzM2XSkkLy50ZXN0KHRva2Vuc1szXSkpIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3JfbnVtYmVyOiA0LCBlcnJvcjogZXJyb3JzWzRdIH1cbiAgICB9XG5cbiAgICAvKiA1dGggY3JpdGVyaW9uOiAzdGggZmllbGQgaXMgYSB2YWxpZCBjYXN0bGUtc3RyaW5nPyAqL1xuICAgIGlmICghL14oS1E/az9xP3xRaz9xP3xrcT98cXwtKSQvLnRlc3QodG9rZW5zWzJdKSkge1xuICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcl9udW1iZXI6IDUsIGVycm9yOiBlcnJvcnNbNV0gfVxuICAgIH1cblxuICAgIC8qIDZ0aCBjcml0ZXJpb246IDJuZCBmaWVsZCBpcyBcIndcIiAod2hpdGUpIG9yIFwiYlwiIChibGFjayk/ICovXG4gICAgaWYgKCEvXih3fGIpJC8udGVzdCh0b2tlbnNbMV0pKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yX251bWJlcjogNiwgZXJyb3I6IGVycm9yc1s2XSB9XG4gICAgfVxuXG4gICAgLyogN3RoIGNyaXRlcmlvbjogMXN0IGZpZWxkIGNvbnRhaW5zIDggcm93cz8gKi9cbiAgICB2YXIgcm93cyA9IHRva2Vuc1swXS5zcGxpdCgnLycpXG4gICAgaWYgKHJvd3MubGVuZ3RoICE9PSA4KSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yX251bWJlcjogNywgZXJyb3I6IGVycm9yc1s3XSB9XG4gICAgfVxuXG4gICAgLyogOHRoIGNyaXRlcmlvbjogZXZlcnkgcm93IGlzIHZhbGlkPyAqL1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgLyogY2hlY2sgZm9yIHJpZ2h0IHN1bSBvZiBmaWVsZHMgQU5EIG5vdCB0d28gbnVtYmVycyBpbiBzdWNjZXNzaW9uICovXG4gICAgICB2YXIgc3VtX2ZpZWxkcyA9IDBcbiAgICAgIHZhciBwcmV2aW91c193YXNfbnVtYmVyID0gZmFsc2VcblxuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCByb3dzW2ldLmxlbmd0aDsgaysrKSB7XG4gICAgICAgIGlmICghaXNOYU4ocm93c1tpXVtrXSkpIHtcbiAgICAgICAgICBpZiAocHJldmlvdXNfd2FzX251bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcl9udW1iZXI6IDgsIGVycm9yOiBlcnJvcnNbOF0gfVxuICAgICAgICAgIH1cbiAgICAgICAgICBzdW1fZmllbGRzICs9IHBhcnNlSW50KHJvd3NbaV1ba10sIDEwKVxuICAgICAgICAgIHByZXZpb3VzX3dhc19udW1iZXIgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCEvXltwcm5icWtQUk5CUUtdJC8udGVzdChyb3dzW2ldW2tdKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcl9udW1iZXI6IDksIGVycm9yOiBlcnJvcnNbOV0gfVxuICAgICAgICAgIH1cbiAgICAgICAgICBzdW1fZmllbGRzICs9IDFcbiAgICAgICAgICBwcmV2aW91c193YXNfbnVtYmVyID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHN1bV9maWVsZHMgIT09IDgpIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcl9udW1iZXI6IDEwLCBlcnJvcjogZXJyb3JzWzEwXSB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgKHRva2Vuc1szXVsxXSA9PSAnMycgJiYgdG9rZW5zWzFdID09ICd3JykgfHxcbiAgICAgICh0b2tlbnNbM11bMV0gPT0gJzYnICYmIHRva2Vuc1sxXSA9PSAnYicpXG4gICAgKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yX251bWJlcjogMTEsIGVycm9yOiBlcnJvcnNbMTFdIH1cbiAgICB9XG5cbiAgICAvKiBldmVyeXRoaW5nJ3Mgb2theSEgKi9cbiAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZXJyb3JfbnVtYmVyOiAwLCBlcnJvcjogZXJyb3JzWzBdIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdlbmVyYXRlX2ZlbigpIHtcbiAgICB2YXIgZW1wdHkgPSAwXG4gICAgdmFyIGZlbiA9ICcnXG5cbiAgICBmb3IgKHZhciBpID0gU1FVQVJFX01BUC5hODsgaSA8PSBTUVVBUkVfTUFQLmgxOyBpKyspIHtcbiAgICAgIGlmIChib2FyZFtpXSA9PSBudWxsKSB7XG4gICAgICAgIGVtcHR5KytcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChlbXB0eSA+IDApIHtcbiAgICAgICAgICBmZW4gKz0gZW1wdHlcbiAgICAgICAgICBlbXB0eSA9IDBcbiAgICAgICAgfVxuICAgICAgICB2YXIgY29sb3IgPSBib2FyZFtpXS5jb2xvclxuICAgICAgICB2YXIgcGllY2UgPSBib2FyZFtpXS50eXBlXG5cbiAgICAgICAgZmVuICs9IGNvbG9yID09PSBXSElURSA/IHBpZWNlLnRvVXBwZXJDYXNlKCkgOiBwaWVjZS50b0xvd2VyQ2FzZSgpXG4gICAgICB9XG5cbiAgICAgIGlmICgoaSArIDEpICYgMHg4OCkge1xuICAgICAgICBpZiAoZW1wdHkgPiAwKSB7XG4gICAgICAgICAgZmVuICs9IGVtcHR5XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaSAhPT0gU1FVQVJFX01BUC5oMSkge1xuICAgICAgICAgIGZlbiArPSAnLydcbiAgICAgICAgfVxuXG4gICAgICAgIGVtcHR5ID0gMFxuICAgICAgICBpICs9IDhcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgY2ZsYWdzID0gJydcbiAgICBpZiAoY2FzdGxpbmdbV0hJVEVdICYgQklUUy5LU0lERV9DQVNUTEUpIHtcbiAgICAgIGNmbGFncyArPSAnSydcbiAgICB9XG4gICAgaWYgKGNhc3RsaW5nW1dISVRFXSAmIEJJVFMuUVNJREVfQ0FTVExFKSB7XG4gICAgICBjZmxhZ3MgKz0gJ1EnXG4gICAgfVxuICAgIGlmIChjYXN0bGluZ1tCTEFDS10gJiBCSVRTLktTSURFX0NBU1RMRSkge1xuICAgICAgY2ZsYWdzICs9ICdrJ1xuICAgIH1cbiAgICBpZiAoY2FzdGxpbmdbQkxBQ0tdICYgQklUUy5RU0lERV9DQVNUTEUpIHtcbiAgICAgIGNmbGFncyArPSAncSdcbiAgICB9XG5cbiAgICAvKiBkbyB3ZSBoYXZlIGFuIGVtcHR5IGNhc3RsaW5nIGZsYWc/ICovXG4gICAgY2ZsYWdzID0gY2ZsYWdzIHx8ICctJ1xuICAgIHZhciBlcGZsYWdzID0gZXBfc3F1YXJlID09PSBFTVBUWSA/ICctJyA6IGFsZ2VicmFpYyhlcF9zcXVhcmUpXG5cbiAgICByZXR1cm4gW2ZlbiwgdHVybiwgY2ZsYWdzLCBlcGZsYWdzLCBoYWxmX21vdmVzLCBtb3ZlX251bWJlcl0uam9pbignICcpXG4gIH1cblxuICBmdW5jdGlvbiBzZXRfaGVhZGVyKGFyZ3MpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgIGlmICh0eXBlb2YgYXJnc1tpXSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIGFyZ3NbaSArIDFdID09PSAnc3RyaW5nJykge1xuICAgICAgICBoZWFkZXJbYXJnc1tpXV0gPSBhcmdzW2kgKyAxXVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaGVhZGVyXG4gIH1cblxuICAvKiBjYWxsZWQgd2hlbiB0aGUgaW5pdGlhbCBib2FyZCBzZXR1cCBpcyBjaGFuZ2VkIHdpdGggcHV0KCkgb3IgcmVtb3ZlKCkuXG4gICAqIG1vZGlmaWVzIHRoZSBTZXRVcCBhbmQgRkVOIHByb3BlcnRpZXMgb2YgdGhlIGhlYWRlciBvYmplY3QuICBpZiB0aGUgRkVOIGlzXG4gICAqIGVxdWFsIHRvIHRoZSBkZWZhdWx0IHBvc2l0aW9uLCB0aGUgU2V0VXAgYW5kIEZFTiBhcmUgZGVsZXRlZFxuICAgKiB0aGUgc2V0dXAgaXMgb25seSB1cGRhdGVkIGlmIGhpc3RvcnkubGVuZ3RoIGlzIHplcm8sIGllIG1vdmVzIGhhdmVuJ3QgYmVlblxuICAgKiBtYWRlLlxuICAgKi9cbiAgZnVuY3Rpb24gdXBkYXRlX3NldHVwKGZlbikge1xuICAgIGlmIChoaXN0b3J5Lmxlbmd0aCA+IDApIHJldHVyblxuXG4gICAgaWYgKGZlbiAhPT0gREVGQVVMVF9QT1NJVElPTikge1xuICAgICAgaGVhZGVyWydTZXRVcCddID0gJzEnXG4gICAgICBoZWFkZXJbJ0ZFTiddID0gZmVuXG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZSBoZWFkZXJbJ1NldFVwJ11cbiAgICAgIGRlbGV0ZSBoZWFkZXJbJ0ZFTiddXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0KHNxdWFyZSkge1xuICAgIHZhciBwaWVjZSA9IGJvYXJkW1NRVUFSRV9NQVBbc3F1YXJlXV1cbiAgICByZXR1cm4gcGllY2UgPyB7IHR5cGU6IHBpZWNlLnR5cGUsIGNvbG9yOiBwaWVjZS5jb2xvciB9IDogbnVsbFxuICB9XG5cbiAgZnVuY3Rpb24gcHV0KHBpZWNlLCBzcXVhcmUpIHtcbiAgICAvKiBjaGVjayBmb3IgdmFsaWQgcGllY2Ugb2JqZWN0ICovXG4gICAgaWYgKCEoJ3R5cGUnIGluIHBpZWNlICYmICdjb2xvcicgaW4gcGllY2UpKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICAvKiBjaGVjayBmb3IgcGllY2UgKi9cbiAgICBpZiAoU1lNQk9MUy5pbmRleE9mKHBpZWNlLnR5cGUudG9Mb3dlckNhc2UoKSkgPT09IC0xKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICAvKiBjaGVjayBmb3IgdmFsaWQgc3F1YXJlICovXG4gICAgaWYgKCEoc3F1YXJlIGluIFNRVUFSRV9NQVApKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICB2YXIgc3EgPSBTUVVBUkVfTUFQW3NxdWFyZV1cblxuICAgIC8qIGRvbid0IGxldCB0aGUgdXNlciBwbGFjZSBtb3JlIHRoYW4gb25lIGtpbmcgKi9cbiAgICBpZiAoXG4gICAgICBwaWVjZS50eXBlID09IEtJTkcgJiZcbiAgICAgICEoa2luZ3NbcGllY2UuY29sb3JdID09IEVNUFRZIHx8IGtpbmdzW3BpZWNlLmNvbG9yXSA9PSBzcSlcbiAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGJvYXJkW3NxXSA9IHsgdHlwZTogcGllY2UudHlwZSwgY29sb3I6IHBpZWNlLmNvbG9yIH1cbiAgICBpZiAocGllY2UudHlwZSA9PT0gS0lORykge1xuICAgICAga2luZ3NbcGllY2UuY29sb3JdID0gc3FcbiAgICB9XG5cbiAgICB1cGRhdGVfc2V0dXAoZ2VuZXJhdGVfZmVuKCkpXG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlKHNxdWFyZSkge1xuICAgIHZhciBwaWVjZSA9IGdldChzcXVhcmUpXG4gICAgYm9hcmRbU1FVQVJFX01BUFtzcXVhcmVdXSA9IG51bGxcbiAgICBpZiAocGllY2UgJiYgcGllY2UudHlwZSA9PT0gS0lORykge1xuICAgICAga2luZ3NbcGllY2UuY29sb3JdID0gRU1QVFlcbiAgICB9XG5cbiAgICB1cGRhdGVfc2V0dXAoZ2VuZXJhdGVfZmVuKCkpXG5cbiAgICByZXR1cm4gcGllY2VcbiAgfVxuXG4gIGZ1bmN0aW9uIGJ1aWxkX21vdmUoYm9hcmQsIGZyb20sIHRvLCBmbGFncywgcHJvbW90aW9uKSB7XG4gICAgdmFyIG1vdmUgPSB7XG4gICAgICBjb2xvcjogdHVybixcbiAgICAgIGZyb206IGZyb20sXG4gICAgICB0bzogdG8sXG4gICAgICBmbGFnczogZmxhZ3MsXG4gICAgICBwaWVjZTogYm9hcmRbZnJvbV0udHlwZSxcbiAgICB9XG5cbiAgICBpZiAocHJvbW90aW9uKSB7XG4gICAgICBtb3ZlLmZsYWdzIHw9IEJJVFMuUFJPTU9USU9OXG4gICAgICBtb3ZlLnByb21vdGlvbiA9IHByb21vdGlvblxuICAgIH1cblxuICAgIGlmIChib2FyZFt0b10pIHtcbiAgICAgIG1vdmUuY2FwdHVyZWQgPSBib2FyZFt0b10udHlwZVxuICAgIH0gZWxzZSBpZiAoZmxhZ3MgJiBCSVRTLkVQX0NBUFRVUkUpIHtcbiAgICAgIG1vdmUuY2FwdHVyZWQgPSBQQVdOXG4gICAgfVxuICAgIHJldHVybiBtb3ZlXG4gIH1cblxuICBmdW5jdGlvbiBnZW5lcmF0ZV9tb3ZlcyhvcHRpb25zKSB7XG4gICAgZnVuY3Rpb24gYWRkX21vdmUoYm9hcmQsIG1vdmVzLCBmcm9tLCB0bywgZmxhZ3MpIHtcbiAgICAgIC8qIGlmIHBhd24gcHJvbW90aW9uICovXG4gICAgICBpZiAoXG4gICAgICAgIGJvYXJkW2Zyb21dLnR5cGUgPT09IFBBV04gJiZcbiAgICAgICAgKHJhbmsodG8pID09PSBSQU5LXzggfHwgcmFuayh0bykgPT09IFJBTktfMSlcbiAgICAgICkge1xuICAgICAgICB2YXIgcGllY2VzID0gW1FVRUVOLCBST09LLCBCSVNIT1AsIEtOSUdIVF1cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHBpZWNlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIG1vdmVzLnB1c2goYnVpbGRfbW92ZShib2FyZCwgZnJvbSwgdG8sIGZsYWdzLCBwaWVjZXNbaV0pKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtb3Zlcy5wdXNoKGJ1aWxkX21vdmUoYm9hcmQsIGZyb20sIHRvLCBmbGFncykpXG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIG1vdmVzID0gW11cbiAgICB2YXIgdXMgPSB0dXJuXG4gICAgdmFyIHRoZW0gPSBzd2FwX2NvbG9yKHVzKVxuICAgIHZhciBzZWNvbmRfcmFuayA9IHsgYjogUkFOS183LCB3OiBSQU5LXzIgfVxuXG4gICAgdmFyIGZpcnN0X3NxID0gU1FVQVJFX01BUC5hOFxuICAgIHZhciBsYXN0X3NxID0gU1FVQVJFX01BUC5oMVxuICAgIHZhciBzaW5nbGVfc3F1YXJlID0gZmFsc2VcblxuICAgIC8qIGRvIHdlIHdhbnQgbGVnYWwgbW92ZXM/ICovXG4gICAgdmFyIGxlZ2FsID1cbiAgICAgIHR5cGVvZiBvcHRpb25zICE9PSAndW5kZWZpbmVkJyAmJiAnbGVnYWwnIGluIG9wdGlvbnNcbiAgICAgICAgPyBvcHRpb25zLmxlZ2FsXG4gICAgICAgIDogdHJ1ZVxuXG4gICAgdmFyIHBpZWNlX3R5cGUgPVxuICAgICAgdHlwZW9mIG9wdGlvbnMgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAncGllY2UnIGluIG9wdGlvbnMgJiZcbiAgICAgIHR5cGVvZiBvcHRpb25zLnBpZWNlID09PSAnc3RyaW5nJ1xuICAgICAgICA/IG9wdGlvbnMucGllY2UudG9Mb3dlckNhc2UoKVxuICAgICAgICA6IHRydWVcblxuICAgIC8qIGFyZSB3ZSBnZW5lcmF0aW5nIG1vdmVzIGZvciBhIHNpbmdsZSBzcXVhcmU/ICovXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zICE9PSAndW5kZWZpbmVkJyAmJiAnc3F1YXJlJyBpbiBvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucy5zcXVhcmUgaW4gU1FVQVJFX01BUCkge1xuICAgICAgICBmaXJzdF9zcSA9IGxhc3Rfc3EgPSBTUVVBUkVfTUFQW29wdGlvbnMuc3F1YXJlXVxuICAgICAgICBzaW5nbGVfc3F1YXJlID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLyogaW52YWxpZCBzcXVhcmUgKi9cbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IGZpcnN0X3NxOyBpIDw9IGxhc3Rfc3E7IGkrKykge1xuICAgICAgLyogZGlkIHdlIHJ1biBvZmYgdGhlIGVuZCBvZiB0aGUgYm9hcmQgKi9cbiAgICAgIGlmIChpICYgMHg4OCkge1xuICAgICAgICBpICs9IDdcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgdmFyIHBpZWNlID0gYm9hcmRbaV1cbiAgICAgIGlmIChwaWVjZSA9PSBudWxsIHx8IHBpZWNlLmNvbG9yICE9PSB1cykge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBpZiAocGllY2UudHlwZSA9PT0gUEFXTiAmJiAocGllY2VfdHlwZSA9PT0gdHJ1ZSB8fCBwaWVjZV90eXBlID09PSBQQVdOKSkge1xuICAgICAgICAvKiBzaW5nbGUgc3F1YXJlLCBub24tY2FwdHVyaW5nICovXG4gICAgICAgIHZhciBzcXVhcmUgPSBpICsgUEFXTl9PRkZTRVRTW3VzXVswXVxuICAgICAgICBpZiAoYm9hcmRbc3F1YXJlXSA9PSBudWxsKSB7XG4gICAgICAgICAgYWRkX21vdmUoYm9hcmQsIG1vdmVzLCBpLCBzcXVhcmUsIEJJVFMuTk9STUFMKVxuXG4gICAgICAgICAgLyogZG91YmxlIHNxdWFyZSAqL1xuICAgICAgICAgIHZhciBzcXVhcmUgPSBpICsgUEFXTl9PRkZTRVRTW3VzXVsxXVxuICAgICAgICAgIGlmIChzZWNvbmRfcmFua1t1c10gPT09IHJhbmsoaSkgJiYgYm9hcmRbc3F1YXJlXSA9PSBudWxsKSB7XG4gICAgICAgICAgICBhZGRfbW92ZShib2FyZCwgbW92ZXMsIGksIHNxdWFyZSwgQklUUy5CSUdfUEFXTilcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKiBwYXduIGNhcHR1cmVzICovXG4gICAgICAgIGZvciAoaiA9IDI7IGogPCA0OyBqKyspIHtcbiAgICAgICAgICB2YXIgc3F1YXJlID0gaSArIFBBV05fT0ZGU0VUU1t1c11bal1cbiAgICAgICAgICBpZiAoc3F1YXJlICYgMHg4OCkgY29udGludWVcblxuICAgICAgICAgIGlmIChib2FyZFtzcXVhcmVdICE9IG51bGwgJiYgYm9hcmRbc3F1YXJlXS5jb2xvciA9PT0gdGhlbSkge1xuICAgICAgICAgICAgYWRkX21vdmUoYm9hcmQsIG1vdmVzLCBpLCBzcXVhcmUsIEJJVFMuQ0FQVFVSRSlcbiAgICAgICAgICB9IGVsc2UgaWYgKHNxdWFyZSA9PT0gZXBfc3F1YXJlKSB7XG4gICAgICAgICAgICBhZGRfbW92ZShib2FyZCwgbW92ZXMsIGksIGVwX3NxdWFyZSwgQklUUy5FUF9DQVBUVVJFKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChwaWVjZV90eXBlID09PSB0cnVlIHx8IHBpZWNlX3R5cGUgPT09IHBpZWNlLnR5cGUpIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDAsIGxlbiA9IFBJRUNFX09GRlNFVFNbcGllY2UudHlwZV0ubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICB2YXIgb2Zmc2V0ID0gUElFQ0VfT0ZGU0VUU1twaWVjZS50eXBlXVtqXVxuICAgICAgICAgIHZhciBzcXVhcmUgPSBpXG5cbiAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgc3F1YXJlICs9IG9mZnNldFxuICAgICAgICAgICAgaWYgKHNxdWFyZSAmIDB4ODgpIGJyZWFrXG5cbiAgICAgICAgICAgIGlmIChib2FyZFtzcXVhcmVdID09IG51bGwpIHtcbiAgICAgICAgICAgICAgYWRkX21vdmUoYm9hcmQsIG1vdmVzLCBpLCBzcXVhcmUsIEJJVFMuTk9STUFMKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKGJvYXJkW3NxdWFyZV0uY29sb3IgPT09IHVzKSBicmVha1xuICAgICAgICAgICAgICBhZGRfbW92ZShib2FyZCwgbW92ZXMsIGksIHNxdWFyZSwgQklUUy5DQVBUVVJFKVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBicmVhaywgaWYga25pZ2h0IG9yIGtpbmcgKi9cbiAgICAgICAgICAgIGlmIChwaWVjZS50eXBlID09PSAnbicgfHwgcGllY2UudHlwZSA9PT0gJ2snKSBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qIGNoZWNrIGZvciBjYXN0bGluZyBpZjogYSkgd2UncmUgZ2VuZXJhdGluZyBhbGwgbW92ZXMsIG9yIGIpIHdlJ3JlIGRvaW5nXG4gICAgICogc2luZ2xlIHNxdWFyZSBtb3ZlIGdlbmVyYXRpb24gb24gdGhlIGtpbmcncyBzcXVhcmVcbiAgICAgKi9cbiAgICBpZiAocGllY2VfdHlwZSA9PT0gdHJ1ZSB8fCBwaWVjZV90eXBlID09PSBLSU5HKSB7XG4gICAgICBpZiAoIXNpbmdsZV9zcXVhcmUgfHwgbGFzdF9zcSA9PT0ga2luZ3NbdXNdKSB7XG4gICAgICAgIC8qIGtpbmctc2lkZSBjYXN0bGluZyAqL1xuICAgICAgICBpZiAoY2FzdGxpbmdbdXNdICYgQklUUy5LU0lERV9DQVNUTEUpIHtcbiAgICAgICAgICB2YXIgY2FzdGxpbmdfZnJvbSA9IGtpbmdzW3VzXVxuICAgICAgICAgIHZhciBjYXN0bGluZ190byA9IGNhc3RsaW5nX2Zyb20gKyAyXG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBib2FyZFtjYXN0bGluZ19mcm9tICsgMV0gPT0gbnVsbCAmJlxuICAgICAgICAgICAgYm9hcmRbY2FzdGxpbmdfdG9dID09IG51bGwgJiZcbiAgICAgICAgICAgICFhdHRhY2tlZCh0aGVtLCBraW5nc1t1c10pICYmXG4gICAgICAgICAgICAhYXR0YWNrZWQodGhlbSwgY2FzdGxpbmdfZnJvbSArIDEpICYmXG4gICAgICAgICAgICAhYXR0YWNrZWQodGhlbSwgY2FzdGxpbmdfdG8pXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBhZGRfbW92ZShib2FyZCwgbW92ZXMsIGtpbmdzW3VzXSwgY2FzdGxpbmdfdG8sIEJJVFMuS1NJREVfQ0FTVExFKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qIHF1ZWVuLXNpZGUgY2FzdGxpbmcgKi9cbiAgICAgICAgaWYgKGNhc3RsaW5nW3VzXSAmIEJJVFMuUVNJREVfQ0FTVExFKSB7XG4gICAgICAgICAgdmFyIGNhc3RsaW5nX2Zyb20gPSBraW5nc1t1c11cbiAgICAgICAgICB2YXIgY2FzdGxpbmdfdG8gPSBjYXN0bGluZ19mcm9tIC0gMlxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgYm9hcmRbY2FzdGxpbmdfZnJvbSAtIDFdID09IG51bGwgJiZcbiAgICAgICAgICAgIGJvYXJkW2Nhc3RsaW5nX2Zyb20gLSAyXSA9PSBudWxsICYmXG4gICAgICAgICAgICBib2FyZFtjYXN0bGluZ19mcm9tIC0gM10gPT0gbnVsbCAmJlxuICAgICAgICAgICAgIWF0dGFja2VkKHRoZW0sIGtpbmdzW3VzXSkgJiZcbiAgICAgICAgICAgICFhdHRhY2tlZCh0aGVtLCBjYXN0bGluZ19mcm9tIC0gMSkgJiZcbiAgICAgICAgICAgICFhdHRhY2tlZCh0aGVtLCBjYXN0bGluZ190bylcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGFkZF9tb3ZlKGJvYXJkLCBtb3Zlcywga2luZ3NbdXNdLCBjYXN0bGluZ190bywgQklUUy5RU0lERV9DQVNUTEUpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyogcmV0dXJuIGFsbCBwc2V1ZG8tbGVnYWwgbW92ZXMgKHRoaXMgaW5jbHVkZXMgbW92ZXMgdGhhdCBhbGxvdyB0aGUga2luZ1xuICAgICAqIHRvIGJlIGNhcHR1cmVkKVxuICAgICAqL1xuICAgIGlmICghbGVnYWwpIHtcbiAgICAgIHJldHVybiBtb3Zlc1xuICAgIH1cblxuICAgIC8qIGZpbHRlciBvdXQgaWxsZWdhbCBtb3ZlcyAqL1xuICAgIHZhciBsZWdhbF9tb3ZlcyA9IFtdXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG1vdmVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBtYWtlX21vdmUobW92ZXNbaV0pXG4gICAgICBpZiAoIWtpbmdfYXR0YWNrZWQodXMpKSB7XG4gICAgICAgIGxlZ2FsX21vdmVzLnB1c2gobW92ZXNbaV0pXG4gICAgICB9XG4gICAgICB1bmRvX21vdmUoKVxuICAgIH1cblxuICAgIHJldHVybiBsZWdhbF9tb3Zlc1xuICB9XG5cbiAgLyogY29udmVydCBhIG1vdmUgZnJvbSAweDg4IGNvb3JkaW5hdGVzIHRvIFN0YW5kYXJkIEFsZ2VicmFpYyBOb3RhdGlvblxuICAgKiAoU0FOKVxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNsb3BweSBVc2UgdGhlIHNsb3BweSBTQU4gZ2VuZXJhdG9yIHRvIHdvcmsgYXJvdW5kIG92ZXJcbiAgICogZGlzYW1iaWd1YXRpb24gYnVncyBpbiBGcml0eiBhbmQgQ2hlc3NiYXNlLiAgU2VlIGJlbG93OlxuICAgKlxuICAgKiByMWJxa2Juci9wcHAycHBwLzJuNS8xQjFwUDMvNFAzLzgvUFBQUDJQUC9STkJRSzFOUiBiIEtRa3EgLSAyIDRcbiAgICogNC4gLi4uIE5nZTcgaXMgb3Zlcmx5IGRpc2FtYmlndWF0ZWQgYmVjYXVzZSB0aGUga25pZ2h0IG9uIGM2IGlzIHBpbm5lZFxuICAgKiA0LiAuLi4gTmU3IGlzIHRlY2huaWNhbGx5IHRoZSB2YWxpZCBTQU5cbiAgICovXG4gIGZ1bmN0aW9uIG1vdmVfdG9fc2FuKG1vdmUsIG1vdmVzKSB7XG4gICAgdmFyIG91dHB1dCA9ICcnXG5cbiAgICBpZiAobW92ZS5mbGFncyAmIEJJVFMuS1NJREVfQ0FTVExFKSB7XG4gICAgICBvdXRwdXQgPSAnTy1PJ1xuICAgIH0gZWxzZSBpZiAobW92ZS5mbGFncyAmIEJJVFMuUVNJREVfQ0FTVExFKSB7XG4gICAgICBvdXRwdXQgPSAnTy1PLU8nXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChtb3ZlLnBpZWNlICE9PSBQQVdOKSB7XG4gICAgICAgIHZhciBkaXNhbWJpZ3VhdG9yID0gZ2V0X2Rpc2FtYmlndWF0b3IobW92ZSwgbW92ZXMpXG4gICAgICAgIG91dHB1dCArPSBtb3ZlLnBpZWNlLnRvVXBwZXJDYXNlKCkgKyBkaXNhbWJpZ3VhdG9yXG4gICAgICB9XG5cbiAgICAgIGlmIChtb3ZlLmZsYWdzICYgKEJJVFMuQ0FQVFVSRSB8IEJJVFMuRVBfQ0FQVFVSRSkpIHtcbiAgICAgICAgaWYgKG1vdmUucGllY2UgPT09IFBBV04pIHtcbiAgICAgICAgICBvdXRwdXQgKz0gYWxnZWJyYWljKG1vdmUuZnJvbSlbMF1cbiAgICAgICAgfVxuICAgICAgICBvdXRwdXQgKz0gJ3gnXG4gICAgICB9XG5cbiAgICAgIG91dHB1dCArPSBhbGdlYnJhaWMobW92ZS50bylcblxuICAgICAgaWYgKG1vdmUuZmxhZ3MgJiBCSVRTLlBST01PVElPTikge1xuICAgICAgICBvdXRwdXQgKz0gJz0nICsgbW92ZS5wcm9tb3Rpb24udG9VcHBlckNhc2UoKVxuICAgICAgfVxuICAgIH1cblxuICAgIG1ha2VfbW92ZShtb3ZlKVxuICAgIGlmIChpbl9jaGVjaygpKSB7XG4gICAgICBpZiAoaW5fY2hlY2ttYXRlKCkpIHtcbiAgICAgICAgb3V0cHV0ICs9ICcjJ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3V0cHV0ICs9ICcrJ1xuICAgICAgfVxuICAgIH1cbiAgICB1bmRvX21vdmUoKVxuXG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgZnVuY3Rpb24gYXR0YWNrZWQoY29sb3IsIHNxdWFyZSkge1xuICAgIGZvciAodmFyIGkgPSBTUVVBUkVfTUFQLmE4OyBpIDw9IFNRVUFSRV9NQVAuaDE7IGkrKykge1xuICAgICAgLyogZGlkIHdlIHJ1biBvZmYgdGhlIGVuZCBvZiB0aGUgYm9hcmQgKi9cbiAgICAgIGlmIChpICYgMHg4OCkge1xuICAgICAgICBpICs9IDdcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLyogaWYgZW1wdHkgc3F1YXJlIG9yIHdyb25nIGNvbG9yICovXG4gICAgICBpZiAoYm9hcmRbaV0gPT0gbnVsbCB8fCBib2FyZFtpXS5jb2xvciAhPT0gY29sb3IpIGNvbnRpbnVlXG5cbiAgICAgIHZhciBwaWVjZSA9IGJvYXJkW2ldXG4gICAgICB2YXIgZGlmZmVyZW5jZSA9IGkgLSBzcXVhcmVcbiAgICAgIHZhciBpbmRleCA9IGRpZmZlcmVuY2UgKyAxMTlcblxuICAgICAgaWYgKEFUVEFDS1NbaW5kZXhdICYgKDEgPDwgU0hJRlRTW3BpZWNlLnR5cGVdKSkge1xuICAgICAgICBpZiAocGllY2UudHlwZSA9PT0gUEFXTikge1xuICAgICAgICAgIGlmIChkaWZmZXJlbmNlID4gMCkge1xuICAgICAgICAgICAgaWYgKHBpZWNlLmNvbG9yID09PSBXSElURSkgcmV0dXJuIHRydWVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHBpZWNlLmNvbG9yID09PSBCTEFDSykgcmV0dXJuIHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGlmIHRoZSBwaWVjZSBpcyBhIGtuaWdodCBvciBhIGtpbmcgKi9cbiAgICAgICAgaWYgKHBpZWNlLnR5cGUgPT09ICduJyB8fCBwaWVjZS50eXBlID09PSAnaycpIHJldHVybiB0cnVlXG5cbiAgICAgICAgdmFyIG9mZnNldCA9IFJBWVNbaW5kZXhdXG4gICAgICAgIHZhciBqID0gaSArIG9mZnNldFxuXG4gICAgICAgIHZhciBibG9ja2VkID0gZmFsc2VcbiAgICAgICAgd2hpbGUgKGogIT09IHNxdWFyZSkge1xuICAgICAgICAgIGlmIChib2FyZFtqXSAhPSBudWxsKSB7XG4gICAgICAgICAgICBibG9ja2VkID0gdHJ1ZVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgICAgaiArPSBvZmZzZXRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmxvY2tlZCkgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGZ1bmN0aW9uIGtpbmdfYXR0YWNrZWQoY29sb3IpIHtcbiAgICByZXR1cm4gYXR0YWNrZWQoc3dhcF9jb2xvcihjb2xvciksIGtpbmdzW2NvbG9yXSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGluX2NoZWNrKCkge1xuICAgIHJldHVybiBraW5nX2F0dGFja2VkKHR1cm4pXG4gIH1cblxuICBmdW5jdGlvbiBpbl9jaGVja21hdGUoKSB7XG4gICAgcmV0dXJuIGluX2NoZWNrKCkgJiYgZ2VuZXJhdGVfbW92ZXMoKS5sZW5ndGggPT09IDBcbiAgfVxuXG4gIGZ1bmN0aW9uIGluX3N0YWxlbWF0ZSgpIHtcbiAgICByZXR1cm4gIWluX2NoZWNrKCkgJiYgZ2VuZXJhdGVfbW92ZXMoKS5sZW5ndGggPT09IDBcbiAgfVxuXG4gIGZ1bmN0aW9uIGluc3VmZmljaWVudF9tYXRlcmlhbCgpIHtcbiAgICB2YXIgcGllY2VzID0ge31cbiAgICB2YXIgYmlzaG9wcyA9IFtdXG4gICAgdmFyIG51bV9waWVjZXMgPSAwXG4gICAgdmFyIHNxX2NvbG9yID0gMFxuXG4gICAgZm9yICh2YXIgaSA9IFNRVUFSRV9NQVAuYTg7IGkgPD0gU1FVQVJFX01BUC5oMTsgaSsrKSB7XG4gICAgICBzcV9jb2xvciA9IChzcV9jb2xvciArIDEpICUgMlxuICAgICAgaWYgKGkgJiAweDg4KSB7XG4gICAgICAgIGkgKz0gN1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICB2YXIgcGllY2UgPSBib2FyZFtpXVxuICAgICAgaWYgKHBpZWNlKSB7XG4gICAgICAgIHBpZWNlc1twaWVjZS50eXBlXSA9IHBpZWNlLnR5cGUgaW4gcGllY2VzID8gcGllY2VzW3BpZWNlLnR5cGVdICsgMSA6IDFcbiAgICAgICAgaWYgKHBpZWNlLnR5cGUgPT09IEJJU0hPUCkge1xuICAgICAgICAgIGJpc2hvcHMucHVzaChzcV9jb2xvcilcbiAgICAgICAgfVxuICAgICAgICBudW1fcGllY2VzKytcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBrIHZzLiBrICovXG4gICAgaWYgKG51bV9waWVjZXMgPT09IDIpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSBlbHNlIGlmIChcbiAgICAgIC8qIGsgdnMuIGtuIC4uLi4gb3IgLi4uLiBrIHZzLiBrYiAqL1xuICAgICAgbnVtX3BpZWNlcyA9PT0gMyAmJlxuICAgICAgKHBpZWNlc1tCSVNIT1BdID09PSAxIHx8IHBpZWNlc1tLTklHSFRdID09PSAxKVxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9IGVsc2UgaWYgKG51bV9waWVjZXMgPT09IHBpZWNlc1tCSVNIT1BdICsgMikge1xuICAgICAgLyoga2IgdnMuIGtiIHdoZXJlIGFueSBudW1iZXIgb2YgYmlzaG9wcyBhcmUgYWxsIG9uIHRoZSBzYW1lIGNvbG9yICovXG4gICAgICB2YXIgc3VtID0gMFxuICAgICAgdmFyIGxlbiA9IGJpc2hvcHMubGVuZ3RoXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHN1bSArPSBiaXNob3BzW2ldXG4gICAgICB9XG4gICAgICBpZiAoc3VtID09PSAwIHx8IHN1bSA9PT0gbGVuKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBmdW5jdGlvbiBpbl90aHJlZWZvbGRfcmVwZXRpdGlvbigpIHtcbiAgICAvKiBUT0RPOiB3aGlsZSB0aGlzIGZ1bmN0aW9uIGlzIGZpbmUgZm9yIGNhc3VhbCB1c2UsIGEgYmV0dGVyXG4gICAgICogaW1wbGVtZW50YXRpb24gd291bGQgdXNlIGEgWm9icmlzdCBrZXkgKGluc3RlYWQgb2YgRkVOKS4gdGhlXG4gICAgICogWm9icmlzdCBrZXkgd291bGQgYmUgbWFpbnRhaW5lZCBpbiB0aGUgbWFrZV9tb3ZlL3VuZG9fbW92ZSBmdW5jdGlvbnMsXG4gICAgICogYXZvaWRpbmcgdGhlIGNvc3RseSB0aGF0IHdlIGRvIGJlbG93LlxuICAgICAqL1xuICAgIHZhciBtb3ZlcyA9IFtdXG4gICAgdmFyIHBvc2l0aW9ucyA9IHt9XG4gICAgdmFyIHJlcGV0aXRpb24gPSBmYWxzZVxuXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIHZhciBtb3ZlID0gdW5kb19tb3ZlKClcbiAgICAgIGlmICghbW92ZSkgYnJlYWtcbiAgICAgIG1vdmVzLnB1c2gobW92ZSlcbiAgICB9XG5cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgLyogcmVtb3ZlIHRoZSBsYXN0IHR3byBmaWVsZHMgaW4gdGhlIEZFTiBzdHJpbmcsIHRoZXkncmUgbm90IG5lZWRlZFxuICAgICAgICogd2hlbiBjaGVja2luZyBmb3IgZHJhdyBieSByZXAgKi9cbiAgICAgIHZhciBmZW4gPSBnZW5lcmF0ZV9mZW4oKS5zcGxpdCgnICcpLnNsaWNlKDAsIDQpLmpvaW4oJyAnKVxuXG4gICAgICAvKiBoYXMgdGhlIHBvc2l0aW9uIG9jY3VycmVkIHRocmVlIG9yIG1vdmUgdGltZXMgKi9cbiAgICAgIHBvc2l0aW9uc1tmZW5dID0gZmVuIGluIHBvc2l0aW9ucyA/IHBvc2l0aW9uc1tmZW5dICsgMSA6IDFcbiAgICAgIGlmIChwb3NpdGlvbnNbZmVuXSA+PSAzKSB7XG4gICAgICAgIHJlcGV0aXRpb24gPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmICghbW92ZXMubGVuZ3RoKSB7XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBtYWtlX21vdmUobW92ZXMucG9wKCkpXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcGV0aXRpb25cbiAgfVxuXG4gIGZ1bmN0aW9uIHB1c2gobW92ZSkge1xuICAgIGhpc3RvcnkucHVzaCh7XG4gICAgICBtb3ZlOiBtb3ZlLFxuICAgICAga2luZ3M6IHsgYjoga2luZ3MuYiwgdzoga2luZ3MudyB9LFxuICAgICAgdHVybjogdHVybixcbiAgICAgIGNhc3RsaW5nOiB7IGI6IGNhc3RsaW5nLmIsIHc6IGNhc3RsaW5nLncgfSxcbiAgICAgIGVwX3NxdWFyZTogZXBfc3F1YXJlLFxuICAgICAgaGFsZl9tb3ZlczogaGFsZl9tb3ZlcyxcbiAgICAgIG1vdmVfbnVtYmVyOiBtb3ZlX251bWJlcixcbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gbWFrZV9tb3ZlKG1vdmUpIHtcbiAgICB2YXIgdXMgPSB0dXJuXG4gICAgdmFyIHRoZW0gPSBzd2FwX2NvbG9yKHVzKVxuICAgIHB1c2gobW92ZSlcblxuICAgIGJvYXJkW21vdmUudG9dID0gYm9hcmRbbW92ZS5mcm9tXVxuICAgIGJvYXJkW21vdmUuZnJvbV0gPSBudWxsXG5cbiAgICAvKiBpZiBlcCBjYXB0dXJlLCByZW1vdmUgdGhlIGNhcHR1cmVkIHBhd24gKi9cbiAgICBpZiAobW92ZS5mbGFncyAmIEJJVFMuRVBfQ0FQVFVSRSkge1xuICAgICAgaWYgKHR1cm4gPT09IEJMQUNLKSB7XG4gICAgICAgIGJvYXJkW21vdmUudG8gLSAxNl0gPSBudWxsXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBib2FyZFttb3ZlLnRvICsgMTZdID0gbnVsbFxuICAgICAgfVxuICAgIH1cblxuICAgIC8qIGlmIHBhd24gcHJvbW90aW9uLCByZXBsYWNlIHdpdGggbmV3IHBpZWNlICovXG4gICAgaWYgKG1vdmUuZmxhZ3MgJiBCSVRTLlBST01PVElPTikge1xuICAgICAgYm9hcmRbbW92ZS50b10gPSB7IHR5cGU6IG1vdmUucHJvbW90aW9uLCBjb2xvcjogdXMgfVxuICAgIH1cblxuICAgIC8qIGlmIHdlIG1vdmVkIHRoZSBraW5nICovXG4gICAgaWYgKGJvYXJkW21vdmUudG9dLnR5cGUgPT09IEtJTkcpIHtcbiAgICAgIGtpbmdzW2JvYXJkW21vdmUudG9dLmNvbG9yXSA9IG1vdmUudG9cblxuICAgICAgLyogaWYgd2UgY2FzdGxlZCwgbW92ZSB0aGUgcm9vayBuZXh0IHRvIHRoZSBraW5nICovXG4gICAgICBpZiAobW92ZS5mbGFncyAmIEJJVFMuS1NJREVfQ0FTVExFKSB7XG4gICAgICAgIHZhciBjYXN0bGluZ190byA9IG1vdmUudG8gLSAxXG4gICAgICAgIHZhciBjYXN0bGluZ19mcm9tID0gbW92ZS50byArIDFcbiAgICAgICAgYm9hcmRbY2FzdGxpbmdfdG9dID0gYm9hcmRbY2FzdGxpbmdfZnJvbV1cbiAgICAgICAgYm9hcmRbY2FzdGxpbmdfZnJvbV0gPSBudWxsXG4gICAgICB9IGVsc2UgaWYgKG1vdmUuZmxhZ3MgJiBCSVRTLlFTSURFX0NBU1RMRSkge1xuICAgICAgICB2YXIgY2FzdGxpbmdfdG8gPSBtb3ZlLnRvICsgMVxuICAgICAgICB2YXIgY2FzdGxpbmdfZnJvbSA9IG1vdmUudG8gLSAyXG4gICAgICAgIGJvYXJkW2Nhc3RsaW5nX3RvXSA9IGJvYXJkW2Nhc3RsaW5nX2Zyb21dXG4gICAgICAgIGJvYXJkW2Nhc3RsaW5nX2Zyb21dID0gbnVsbFxuICAgICAgfVxuXG4gICAgICAvKiB0dXJuIG9mZiBjYXN0bGluZyAqL1xuICAgICAgY2FzdGxpbmdbdXNdID0gJydcbiAgICB9XG5cbiAgICAvKiB0dXJuIG9mZiBjYXN0bGluZyBpZiB3ZSBtb3ZlIGEgcm9vayAqL1xuICAgIGlmIChjYXN0bGluZ1t1c10pIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBST09LU1t1c10ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIG1vdmUuZnJvbSA9PT0gUk9PS1NbdXNdW2ldLnNxdWFyZSAmJlxuICAgICAgICAgIGNhc3RsaW5nW3VzXSAmIFJPT0tTW3VzXVtpXS5mbGFnXG4gICAgICAgICkge1xuICAgICAgICAgIGNhc3RsaW5nW3VzXSBePSBST09LU1t1c11baV0uZmxhZ1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKiB0dXJuIG9mZiBjYXN0bGluZyBpZiB3ZSBjYXB0dXJlIGEgcm9vayAqL1xuICAgIGlmIChjYXN0bGluZ1t0aGVtXSkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IFJPT0tTW3RoZW1dLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBtb3ZlLnRvID09PSBST09LU1t0aGVtXVtpXS5zcXVhcmUgJiZcbiAgICAgICAgICBjYXN0bGluZ1t0aGVtXSAmIFJPT0tTW3RoZW1dW2ldLmZsYWdcbiAgICAgICAgKSB7XG4gICAgICAgICAgY2FzdGxpbmdbdGhlbV0gXj0gUk9PS1NbdGhlbV1baV0uZmxhZ1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBpZiBiaWcgcGF3biBtb3ZlLCB1cGRhdGUgdGhlIGVuIHBhc3NhbnQgc3F1YXJlICovXG4gICAgaWYgKG1vdmUuZmxhZ3MgJiBCSVRTLkJJR19QQVdOKSB7XG4gICAgICBpZiAodHVybiA9PT0gJ2InKSB7XG4gICAgICAgIGVwX3NxdWFyZSA9IG1vdmUudG8gLSAxNlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXBfc3F1YXJlID0gbW92ZS50byArIDE2XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVwX3NxdWFyZSA9IEVNUFRZXG4gICAgfVxuXG4gICAgLyogcmVzZXQgdGhlIDUwIG1vdmUgY291bnRlciBpZiBhIHBhd24gaXMgbW92ZWQgb3IgYSBwaWVjZSBpcyBjYXB0dXJlZCAqL1xuICAgIGlmIChtb3ZlLnBpZWNlID09PSBQQVdOKSB7XG4gICAgICBoYWxmX21vdmVzID0gMFxuICAgIH0gZWxzZSBpZiAobW92ZS5mbGFncyAmIChCSVRTLkNBUFRVUkUgfCBCSVRTLkVQX0NBUFRVUkUpKSB7XG4gICAgICBoYWxmX21vdmVzID0gMFxuICAgIH0gZWxzZSB7XG4gICAgICBoYWxmX21vdmVzKytcbiAgICB9XG5cbiAgICBpZiAodHVybiA9PT0gQkxBQ0spIHtcbiAgICAgIG1vdmVfbnVtYmVyKytcbiAgICB9XG4gICAgdHVybiA9IHN3YXBfY29sb3IodHVybilcbiAgfVxuXG4gIGZ1bmN0aW9uIHVuZG9fbW92ZSgpIHtcbiAgICB2YXIgb2xkID0gaGlzdG9yeS5wb3AoKVxuICAgIGlmIChvbGQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICB2YXIgbW92ZSA9IG9sZC5tb3ZlXG4gICAga2luZ3MgPSBvbGQua2luZ3NcbiAgICB0dXJuID0gb2xkLnR1cm5cbiAgICBjYXN0bGluZyA9IG9sZC5jYXN0bGluZ1xuICAgIGVwX3NxdWFyZSA9IG9sZC5lcF9zcXVhcmVcbiAgICBoYWxmX21vdmVzID0gb2xkLmhhbGZfbW92ZXNcbiAgICBtb3ZlX251bWJlciA9IG9sZC5tb3ZlX251bWJlclxuXG4gICAgdmFyIHVzID0gdHVyblxuICAgIHZhciB0aGVtID0gc3dhcF9jb2xvcih0dXJuKVxuXG4gICAgYm9hcmRbbW92ZS5mcm9tXSA9IGJvYXJkW21vdmUudG9dXG4gICAgYm9hcmRbbW92ZS5mcm9tXS50eXBlID0gbW92ZS5waWVjZSAvLyB0byB1bmRvIGFueSBwcm9tb3Rpb25zXG4gICAgYm9hcmRbbW92ZS50b10gPSBudWxsXG5cbiAgICBpZiAobW92ZS5mbGFncyAmIEJJVFMuQ0FQVFVSRSkge1xuICAgICAgYm9hcmRbbW92ZS50b10gPSB7IHR5cGU6IG1vdmUuY2FwdHVyZWQsIGNvbG9yOiB0aGVtIH1cbiAgICB9IGVsc2UgaWYgKG1vdmUuZmxhZ3MgJiBCSVRTLkVQX0NBUFRVUkUpIHtcbiAgICAgIHZhciBpbmRleFxuICAgICAgaWYgKHVzID09PSBCTEFDSykge1xuICAgICAgICBpbmRleCA9IG1vdmUudG8gLSAxNlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5kZXggPSBtb3ZlLnRvICsgMTZcbiAgICAgIH1cbiAgICAgIGJvYXJkW2luZGV4XSA9IHsgdHlwZTogUEFXTiwgY29sb3I6IHRoZW0gfVxuICAgIH1cblxuICAgIGlmIChtb3ZlLmZsYWdzICYgKEJJVFMuS1NJREVfQ0FTVExFIHwgQklUUy5RU0lERV9DQVNUTEUpKSB7XG4gICAgICB2YXIgY2FzdGxpbmdfdG8sIGNhc3RsaW5nX2Zyb21cbiAgICAgIGlmIChtb3ZlLmZsYWdzICYgQklUUy5LU0lERV9DQVNUTEUpIHtcbiAgICAgICAgY2FzdGxpbmdfdG8gPSBtb3ZlLnRvICsgMVxuICAgICAgICBjYXN0bGluZ19mcm9tID0gbW92ZS50byAtIDFcbiAgICAgIH0gZWxzZSBpZiAobW92ZS5mbGFncyAmIEJJVFMuUVNJREVfQ0FTVExFKSB7XG4gICAgICAgIGNhc3RsaW5nX3RvID0gbW92ZS50byAtIDJcbiAgICAgICAgY2FzdGxpbmdfZnJvbSA9IG1vdmUudG8gKyAxXG4gICAgICB9XG5cbiAgICAgIGJvYXJkW2Nhc3RsaW5nX3RvXSA9IGJvYXJkW2Nhc3RsaW5nX2Zyb21dXG4gICAgICBib2FyZFtjYXN0bGluZ19mcm9tXSA9IG51bGxcbiAgICB9XG5cbiAgICByZXR1cm4gbW92ZVxuICB9XG5cbiAgLy8gY29udmVydCBhIG1vdmUgZnJvbSBTdGFuZGFyZCBBbGdlYnJhaWMgTm90YXRpb24gKFNBTikgdG8gMHg4OCBjb29yZGluYXRlc1xuICBmdW5jdGlvbiBtb3ZlX2Zyb21fc2FuKG1vdmUsIHNsb3BweSkge1xuICAgIC8vIHN0cmlwIG9mZiBhbnkgbW92ZSBkZWNvcmF0aW9uczogZS5nIE5mMys/ISBiZWNvbWVzIE5mM1xuICAgIHZhciBjbGVhbl9tb3ZlID0gc3RyaXBwZWRfc2FuKG1vdmUpXG5cbiAgICAvLyB0aGUgbW92ZSBwYXJzZXJzIGlzIGEgMi1zdGVwIHN0YXRlXG4gICAgZm9yICh2YXIgcGFyc2VyID0gMDsgcGFyc2VyIDwgMjsgcGFyc2VyKyspIHtcbiAgICAgIGlmIChwYXJzZXIgPT0gUEFSU0VSX1NMT1BQWSkge1xuICAgICAgICAvLyBvbmx5IHJ1biB0aGUgc2xvcHB5IHBhcnNlIGlmIGV4cGxpY2l0bHkgcmVxdWVzdGVkXG4gICAgICAgIGlmICghc2xvcHB5KSB7XG4gICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRoZSBzbG9wcHkgcGFyc2VyIGFsbG93cyB0aGUgdXNlciB0byBwYXJzZSBub24tc3RhbmRhcmQgY2hlc3NcbiAgICAgICAgLy8gbm90YXRpb25zLiBUaGlzIHBhcnNlciBpcyBvcHQtaW4gKGJ5IHNwZWNpZnlpbmcgdGhlXG4gICAgICAgIC8vICd7IHNsb3BweTogdHJ1ZSB9JyBzZXR0aW5nKSBhbmQgaXMgb25seSBydW4gYWZ0ZXIgdGhlIFN0YW5kYXJkXG4gICAgICAgIC8vIEFsZ2VicmFpYyBOb3RhdGlvbiAoU0FOKSBwYXJzZXIgaGFzIGZhaWxlZC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gV2hlbiBydW5uaW5nIHRoZSBzbG9wcHkgcGFyc2VyLCB3ZSdsbCBydW4gYSByZWdleCB0byBncmFiIHRoZSBwaWVjZSxcbiAgICAgICAgLy8gdGhlIHRvL2Zyb20gc3F1YXJlLCBhbmQgYW4gb3B0aW9uYWwgcHJvbW90aW9uIHBpZWNlLiBUaGlzIHJlZ2V4IHdpbGxcbiAgICAgICAgLy8gcGFyc2UgY29tbW9uIG5vbi1zdGFuZGFyZCBub3RhdGlvbiBsaWtlOiBQZTItZTQsIFJjMWM0LCBRZjN4ZjcsXG4gICAgICAgIC8vIGY3ZjhxLCBiMWMzXG5cbiAgICAgICAgLy8gTk9URTogU29tZSBwb3NpdGlvbnMgYW5kIG1vdmVzIG1heSBiZSBhbWJpZ3VvdXMgd2hlbiB1c2luZyB0aGVcbiAgICAgICAgLy8gc2xvcHB5IHBhcnNlci4gRm9yIGV4YW1wbGUsIGluIHRoaXMgcG9zaXRpb246XG4gICAgICAgIC8vIDZrMS84LzgvQjcvOC84LzgvQk40SzEgdyAtIC0gMCAxLCB0aGUgbW92ZSBiMWMzIG1heSBiZSBpbnRlcnByZXRlZFxuICAgICAgICAvLyBhcyBOYzMgb3IgQjFjMyAoYSBkaXNhbWJpZ3VhdGVkIGJpc2hvcCBtb3ZlKS4gSW4gdGhlc2UgY2FzZXMsIHRoZVxuICAgICAgICAvLyBzbG9wcHkgcGFyc2VyIHdpbGwgZGVmYXVsdCB0byB0aGUgbW9zdCBtb3N0IGJhc2ljIGludGVycHJldGF0aW9uXG4gICAgICAgIC8vICh3aGljaCBpcyBiMWMzIHBhcnNpbmcgdG8gTmMzKS5cblxuICAgICAgICAvLyBGSVhNRTogdGhlc2UgdmFyJ3MgYXJlIGhvaXN0ZWQgaW50byBmdW5jdGlvbiBzY29wZSwgdGhpcyB3aWxsIG5lZWRcbiAgICAgICAgLy8gdG8gY2hhbmdlIHdoZW4gc3dpdGNoaW5nIHRvIGNvbnN0L2xldFxuXG4gICAgICAgIHZhciBvdmVybHlfZGlzYW1iaWd1YXRlZCA9IGZhbHNlXG5cbiAgICAgICAgdmFyIG1hdGNoZXMgPSBjbGVhbl9tb3ZlLm1hdGNoKFxuICAgICAgICAgIC8oW3BuYnJxa1BOQlJRS10pPyhbYS1oXVsxLThdKXg/LT8oW2EtaF1bMS04XSkoW3FyYm5RUkJOXSk/L1xuICAgICAgICApXG4gICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgdmFyIHBpZWNlID0gbWF0Y2hlc1sxXVxuICAgICAgICAgIHZhciBmcm9tID0gbWF0Y2hlc1syXVxuICAgICAgICAgIHZhciB0byA9IG1hdGNoZXNbM11cbiAgICAgICAgICB2YXIgcHJvbW90aW9uID0gbWF0Y2hlc1s0XVxuXG4gICAgICAgICAgaWYgKGZyb20ubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIG92ZXJseV9kaXNhbWJpZ3VhdGVkID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBUaGUgW2EtaF0/WzEtOF0/IHBvcnRpb24gb2YgdGhlIHJlZ2V4IGJlbG93IGhhbmRsZXMgbW92ZXMgdGhhdCBtYXlcbiAgICAgICAgICAvLyBiZSBvdmVybHkgZGlzYW1iaWd1YXRlZCAoZS5nLiBOZ2U3IGlzIHVubmVjZXNzYXJ5IGFuZCBub24tc3RhbmRhcmRcbiAgICAgICAgICAvLyB3aGVuIHRoZXJlIGlzIG9uZSBsZWdhbCBrbmlnaHQgbW92ZSB0byBlNykuIEluIHRoaXMgY2FzZSwgdGhlIHZhbHVlXG4gICAgICAgICAgLy8gb2YgJ2Zyb20nIHZhcmlhYmxlIHdpbGwgYmUgYSByYW5rIG9yIGZpbGUsIG5vdCBhIHNxdWFyZS5cbiAgICAgICAgICB2YXIgbWF0Y2hlcyA9IGNsZWFuX21vdmUubWF0Y2goXG4gICAgICAgICAgICAvKFtwbmJycWtQTkJSUUtdKT8oW2EtaF0/WzEtOF0/KXg/LT8oW2EtaF1bMS04XSkoW3FyYm5RUkJOXSk/L1xuICAgICAgICAgIClcblxuICAgICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgICB2YXIgcGllY2UgPSBtYXRjaGVzWzFdXG4gICAgICAgICAgICB2YXIgZnJvbSA9IG1hdGNoZXNbMl1cbiAgICAgICAgICAgIHZhciB0byA9IG1hdGNoZXNbM11cbiAgICAgICAgICAgIHZhciBwcm9tb3Rpb24gPSBtYXRjaGVzWzRdXG5cbiAgICAgICAgICAgIGlmIChmcm9tLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgIHZhciBvdmVybHlfZGlzYW1iaWd1YXRlZCA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIHBpZWNlX3R5cGUgPSBpbmZlcl9waWVjZV90eXBlKGNsZWFuX21vdmUpXG4gICAgICB2YXIgbW92ZXMgPSBnZW5lcmF0ZV9tb3Zlcyh7XG4gICAgICAgIGxlZ2FsOiB0cnVlLFxuICAgICAgICBwaWVjZTogcGllY2UgPyBwaWVjZSA6IHBpZWNlX3R5cGUsXG4gICAgICB9KVxuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbW92ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgc3dpdGNoIChwYXJzZXIpIHtcbiAgICAgICAgICBjYXNlIFBBUlNFUl9TVFJJQ1Q6IHtcbiAgICAgICAgICAgIGlmIChjbGVhbl9tb3ZlID09PSBzdHJpcHBlZF9zYW4obW92ZV90b19zYW4obW92ZXNbaV0sIG1vdmVzKSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG1vdmVzW2ldXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFBBUlNFUl9TTE9QUFk6IHtcbiAgICAgICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgICAgIC8vIGhhbmQtY29tcGFyZSBtb3ZlIHByb3BlcnRpZXMgd2l0aCB0aGUgcmVzdWx0cyBmcm9tIG91ciBzbG9wcHlcbiAgICAgICAgICAgICAgLy8gcmVnZXhcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICghcGllY2UgfHwgcGllY2UudG9Mb3dlckNhc2UoKSA9PSBtb3Zlc1tpXS5waWVjZSkgJiZcbiAgICAgICAgICAgICAgICBTUVVBUkVfTUFQW2Zyb21dID09IG1vdmVzW2ldLmZyb20gJiZcbiAgICAgICAgICAgICAgICBTUVVBUkVfTUFQW3RvXSA9PSBtb3Zlc1tpXS50byAmJlxuICAgICAgICAgICAgICAgICghcHJvbW90aW9uIHx8IHByb21vdGlvbi50b0xvd2VyQ2FzZSgpID09IG1vdmVzW2ldLnByb21vdGlvbilcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vdmVzW2ldXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAob3Zlcmx5X2Rpc2FtYmlndWF0ZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBTUEVDSUFMIENBU0U6IHdlIHBhcnNlZCBhIG1vdmUgc3RyaW5nIHRoYXQgbWF5IGhhdmUgYW5cbiAgICAgICAgICAgICAgICAvLyB1bm5lZWRlZCByYW5rL2ZpbGUgZGlzYW1iaWd1YXRvciAoZS5nLiBOZ2U3KS4gIFRoZSAnZnJvbSdcbiAgICAgICAgICAgICAgICAvLyB2YXJpYWJsZSB3aWxsXG4gICAgICAgICAgICAgICAgdmFyIHNxdWFyZSA9IGFsZ2VicmFpYyhtb3Zlc1tpXS5mcm9tKVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICghcGllY2UgfHwgcGllY2UudG9Mb3dlckNhc2UoKSA9PSBtb3Zlc1tpXS5waWVjZSkgJiZcbiAgICAgICAgICAgICAgICAgIFNRVUFSRV9NQVBbdG9dID09IG1vdmVzW2ldLnRvICYmXG4gICAgICAgICAgICAgICAgICAoZnJvbSA9PSBzcXVhcmVbMF0gfHwgZnJvbSA9PSBzcXVhcmVbMV0pICYmXG4gICAgICAgICAgICAgICAgICAoIXByb21vdGlvbiB8fCBwcm9tb3Rpb24udG9Mb3dlckNhc2UoKSA9PSBtb3Zlc1tpXS5wcm9tb3Rpb24pXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbW92ZXNbaV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgLyogcHJldHR5ID0gZXh0ZXJuYWwgbW92ZSBvYmplY3QgKi9cbiAgZnVuY3Rpb24gbWFrZV9wcmV0dHkodWdseV9tb3ZlKSB7XG4gICAgdmFyIG1vdmUgPSBjbG9uZSh1Z2x5X21vdmUpXG4gICAgbW92ZS5zYW4gPSBtb3ZlX3RvX3Nhbihtb3ZlLCBnZW5lcmF0ZV9tb3Zlcyh7IGxlZ2FsOiB0cnVlIH0pKVxuICAgIG1vdmUudG8gPSBhbGdlYnJhaWMobW92ZS50bylcbiAgICBtb3ZlLmZyb20gPSBhbGdlYnJhaWMobW92ZS5mcm9tKVxuXG4gICAgdmFyIGZsYWdzID0gJydcblxuICAgIGZvciAodmFyIGZsYWcgaW4gQklUUykge1xuICAgICAgaWYgKEJJVFNbZmxhZ10gJiBtb3ZlLmZsYWdzKSB7XG4gICAgICAgIGZsYWdzICs9IEZMQUdTW2ZsYWddXG4gICAgICB9XG4gICAgfVxuICAgIG1vdmUuZmxhZ3MgPSBmbGFnc1xuXG4gICAgcmV0dXJuIG1vdmVcbiAgfVxuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgKiBERUJVR0dJTkcgVVRJTElUSUVTXG4gICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICBmdW5jdGlvbiBwZXJmdChkZXB0aCkge1xuICAgIHZhciBtb3ZlcyA9IGdlbmVyYXRlX21vdmVzKHsgbGVnYWw6IGZhbHNlIH0pXG4gICAgdmFyIG5vZGVzID0gMFxuICAgIHZhciBjb2xvciA9IHR1cm5cblxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBtb3Zlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgbWFrZV9tb3ZlKG1vdmVzW2ldKVxuICAgICAgaWYgKCFraW5nX2F0dGFja2VkKGNvbG9yKSkge1xuICAgICAgICBpZiAoZGVwdGggLSAxID4gMCkge1xuICAgICAgICAgIHZhciBjaGlsZF9ub2RlcyA9IHBlcmZ0KGRlcHRoIC0gMSlcbiAgICAgICAgICBub2RlcyArPSBjaGlsZF9ub2Rlc1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vZGVzKytcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdW5kb19tb3ZlKClcbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZXNcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAqIFBVQkxJQyBBUElcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gICAgbG9hZDogZnVuY3Rpb24gKGZlbikge1xuICAgICAgcmV0dXJuIGxvYWQoZmVuKVxuICAgIH0sXG5cbiAgICByZXNldDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHJlc2V0KClcbiAgICB9LFxuXG4gICAgbW92ZXM6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAvKiBUaGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gb2YgYSBjaGVzcyBtb3ZlIGlzIGluIDB4ODggZm9ybWF0LCBhbmRcbiAgICAgICAqIG5vdCBtZWFudCB0byBiZSBodW1hbi1yZWFkYWJsZS4gIFRoZSBjb2RlIGJlbG93IGNvbnZlcnRzIHRoZSAweDg4XG4gICAgICAgKiBzcXVhcmUgY29vcmRpbmF0ZXMgdG8gYWxnZWJyYWljIGNvb3JkaW5hdGVzLiAgSXQgYWxzbyBwcnVuZXMgYW5cbiAgICAgICAqIHVubmVjZXNzYXJ5IG1vdmUga2V5cyByZXN1bHRpbmcgZnJvbSBhIHZlcmJvc2UgY2FsbC5cbiAgICAgICAqL1xuXG4gICAgICB2YXIgdWdseV9tb3ZlcyA9IGdlbmVyYXRlX21vdmVzKG9wdGlvbnMpXG4gICAgICB2YXIgbW92ZXMgPSBbXVxuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdWdseV9tb3Zlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAvKiBkb2VzIHRoZSB1c2VyIHdhbnQgYSBmdWxsIG1vdmUgb2JqZWN0IChtb3N0IGxpa2VseSBub3QpLCBvciBqdXN0XG4gICAgICAgICAqIFNBTlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBvcHRpb25zICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICd2ZXJib3NlJyBpbiBvcHRpb25zICYmXG4gICAgICAgICAgb3B0aW9ucy52ZXJib3NlXG4gICAgICAgICkge1xuICAgICAgICAgIG1vdmVzLnB1c2gobWFrZV9wcmV0dHkodWdseV9tb3Zlc1tpXSkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbW92ZXMucHVzaChcbiAgICAgICAgICAgIG1vdmVfdG9fc2FuKHVnbHlfbW92ZXNbaV0sIGdlbmVyYXRlX21vdmVzKHsgbGVnYWw6IHRydWUgfSkpXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBtb3Zlc1xuICAgIH0sXG5cbiAgICBpbl9jaGVjazogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGluX2NoZWNrKClcbiAgICB9LFxuXG4gICAgaW5fY2hlY2ttYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gaW5fY2hlY2ttYXRlKClcbiAgICB9LFxuXG4gICAgaW5fc3RhbGVtYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gaW5fc3RhbGVtYXRlKClcbiAgICB9LFxuXG4gICAgaW5fZHJhdzogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgaGFsZl9tb3ZlcyA+PSAxMDAgfHxcbiAgICAgICAgaW5fc3RhbGVtYXRlKCkgfHxcbiAgICAgICAgaW5zdWZmaWNpZW50X21hdGVyaWFsKCkgfHxcbiAgICAgICAgaW5fdGhyZWVmb2xkX3JlcGV0aXRpb24oKVxuICAgICAgKVxuICAgIH0sXG5cbiAgICBpbnN1ZmZpY2llbnRfbWF0ZXJpYWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBpbnN1ZmZpY2llbnRfbWF0ZXJpYWwoKVxuICAgIH0sXG5cbiAgICBpbl90aHJlZWZvbGRfcmVwZXRpdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGluX3RocmVlZm9sZF9yZXBldGl0aW9uKClcbiAgICB9LFxuXG4gICAgZ2FtZV9vdmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBoYWxmX21vdmVzID49IDEwMCB8fFxuICAgICAgICBpbl9jaGVja21hdGUoKSB8fFxuICAgICAgICBpbl9zdGFsZW1hdGUoKSB8fFxuICAgICAgICBpbnN1ZmZpY2llbnRfbWF0ZXJpYWwoKSB8fFxuICAgICAgICBpbl90aHJlZWZvbGRfcmVwZXRpdGlvbigpXG4gICAgICApXG4gICAgfSxcblxuICAgIHZhbGlkYXRlX2ZlbjogZnVuY3Rpb24gKGZlbikge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlX2ZlbihmZW4pXG4gICAgfSxcblxuICAgIGZlbjogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGdlbmVyYXRlX2ZlbigpXG4gICAgfSxcblxuICAgIGJvYXJkOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgb3V0cHV0ID0gW10sXG4gICAgICAgIHJvdyA9IFtdXG5cbiAgICAgIGZvciAodmFyIGkgPSBTUVVBUkVfTUFQLmE4OyBpIDw9IFNRVUFSRV9NQVAuaDE7IGkrKykge1xuICAgICAgICBpZiAoYm9hcmRbaV0gPT0gbnVsbCkge1xuICAgICAgICAgIHJvdy5wdXNoKG51bGwpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcm93LnB1c2goe1xuICAgICAgICAgICAgc3F1YXJlOiBhbGdlYnJhaWMoaSksXG4gICAgICAgICAgICB0eXBlOiBib2FyZFtpXS50eXBlLFxuICAgICAgICAgICAgY29sb3I6IGJvYXJkW2ldLmNvbG9yLFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKChpICsgMSkgJiAweDg4KSB7XG4gICAgICAgICAgb3V0cHV0LnB1c2gocm93KVxuICAgICAgICAgIHJvdyA9IFtdXG4gICAgICAgICAgaSArPSA4XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG91dHB1dFxuICAgIH0sXG5cbiAgICBwZ246IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAvKiB1c2luZyB0aGUgc3BlY2lmaWNhdGlvbiBmcm9tIGh0dHA6Ly93d3cuY2hlc3NjbHViLmNvbS9oZWxwL1BHTi1zcGVjXG4gICAgICAgKiBleGFtcGxlIGZvciBodG1sIHVzYWdlOiAucGduKHsgbWF4X3dpZHRoOiA3MiwgbmV3bGluZV9jaGFyOiBcIjxiciAvPlwiIH0pXG4gICAgICAgKi9cbiAgICAgIHZhciBuZXdsaW5lID1cbiAgICAgICAgdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBvcHRpb25zLm5ld2xpbmVfY2hhciA9PT0gJ3N0cmluZydcbiAgICAgICAgICA/IG9wdGlvbnMubmV3bGluZV9jaGFyXG4gICAgICAgICAgOiAnXFxuJ1xuICAgICAgdmFyIG1heF93aWR0aCA9XG4gICAgICAgIHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0JyAmJiB0eXBlb2Ygb3B0aW9ucy5tYXhfd2lkdGggPT09ICdudW1iZXInXG4gICAgICAgICAgPyBvcHRpb25zLm1heF93aWR0aFxuICAgICAgICAgIDogMFxuICAgICAgdmFyIHJlc3VsdCA9IFtdXG4gICAgICB2YXIgaGVhZGVyX2V4aXN0cyA9IGZhbHNlXG5cbiAgICAgIC8qIGFkZCB0aGUgUEdOIGhlYWRlciBoZWFkZXJybWF0aW9uICovXG4gICAgICBmb3IgKHZhciBpIGluIGhlYWRlcikge1xuICAgICAgICAvKiBUT0RPOiBvcmRlciBvZiBlbnVtZXJhdGVkIHByb3BlcnRpZXMgaW4gaGVhZGVyIG9iamVjdCBpcyBub3RcbiAgICAgICAgICogZ3VhcmFudGVlZCwgc2VlIEVDTUEtMjYyIHNwZWMgKHNlY3Rpb24gMTIuNi40KVxuICAgICAgICAgKi9cbiAgICAgICAgcmVzdWx0LnB1c2goJ1snICsgaSArICcgXCInICsgaGVhZGVyW2ldICsgJ1wiXScgKyBuZXdsaW5lKVxuICAgICAgICBoZWFkZXJfZXhpc3RzID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAoaGVhZGVyX2V4aXN0cyAmJiBoaXN0b3J5Lmxlbmd0aCkge1xuICAgICAgICByZXN1bHQucHVzaChuZXdsaW5lKVxuICAgICAgfVxuXG4gICAgICB2YXIgYXBwZW5kX2NvbW1lbnQgPSBmdW5jdGlvbiAobW92ZV9zdHJpbmcpIHtcbiAgICAgICAgdmFyIGNvbW1lbnQgPSBjb21tZW50c1tnZW5lcmF0ZV9mZW4oKV1cbiAgICAgICAgaWYgKHR5cGVvZiBjb21tZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHZhciBkZWxpbWl0ZXIgPSBtb3ZlX3N0cmluZy5sZW5ndGggPiAwID8gJyAnIDogJydcbiAgICAgICAgICBtb3ZlX3N0cmluZyA9IGAke21vdmVfc3RyaW5nfSR7ZGVsaW1pdGVyfXske2NvbW1lbnR9fWBcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbW92ZV9zdHJpbmdcbiAgICAgIH1cblxuICAgICAgLyogcG9wIGFsbCBvZiBoaXN0b3J5IG9udG8gcmV2ZXJzZWRfaGlzdG9yeSAqL1xuICAgICAgdmFyIHJldmVyc2VkX2hpc3RvcnkgPSBbXVxuICAgICAgd2hpbGUgKGhpc3RvcnkubGVuZ3RoID4gMCkge1xuICAgICAgICByZXZlcnNlZF9oaXN0b3J5LnB1c2godW5kb19tb3ZlKCkpXG4gICAgICB9XG5cbiAgICAgIHZhciBtb3ZlcyA9IFtdXG4gICAgICB2YXIgbW92ZV9zdHJpbmcgPSAnJ1xuXG4gICAgICAvKiBzcGVjaWFsIGNhc2Ugb2YgYSBjb21tZW50ZWQgc3RhcnRpbmcgcG9zaXRpb24gd2l0aCBubyBtb3ZlcyAqL1xuICAgICAgaWYgKHJldmVyc2VkX2hpc3RvcnkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIG1vdmVzLnB1c2goYXBwZW5kX2NvbW1lbnQoJycpKVxuICAgICAgfVxuXG4gICAgICAvKiBidWlsZCB0aGUgbGlzdCBvZiBtb3Zlcy4gIGEgbW92ZV9zdHJpbmcgbG9va3MgbGlrZTogXCIzLiBlMyBlNlwiICovXG4gICAgICB3aGlsZSAocmV2ZXJzZWRfaGlzdG9yeS5sZW5ndGggPiAwKSB7XG4gICAgICAgIG1vdmVfc3RyaW5nID0gYXBwZW5kX2NvbW1lbnQobW92ZV9zdHJpbmcpXG4gICAgICAgIHZhciBtb3ZlID0gcmV2ZXJzZWRfaGlzdG9yeS5wb3AoKVxuXG4gICAgICAgIC8qIGlmIHRoZSBwb3NpdGlvbiBzdGFydGVkIHdpdGggYmxhY2sgdG8gbW92ZSwgc3RhcnQgUEdOIHdpdGggMS4gLi4uICovXG4gICAgICAgIGlmICghaGlzdG9yeS5sZW5ndGggJiYgbW92ZS5jb2xvciA9PT0gJ2InKSB7XG4gICAgICAgICAgbW92ZV9zdHJpbmcgPSBtb3ZlX251bWJlciArICcuIC4uLidcbiAgICAgICAgfSBlbHNlIGlmIChtb3ZlLmNvbG9yID09PSAndycpIHtcbiAgICAgICAgICAvKiBzdG9yZSB0aGUgcHJldmlvdXMgZ2VuZXJhdGVkIG1vdmVfc3RyaW5nIGlmIHdlIGhhdmUgb25lICovXG4gICAgICAgICAgaWYgKG1vdmVfc3RyaW5nLmxlbmd0aCkge1xuICAgICAgICAgICAgbW92ZXMucHVzaChtb3ZlX3N0cmluZylcbiAgICAgICAgICB9XG4gICAgICAgICAgbW92ZV9zdHJpbmcgPSBtb3ZlX251bWJlciArICcuJ1xuICAgICAgICB9XG5cbiAgICAgICAgbW92ZV9zdHJpbmcgPVxuICAgICAgICAgIG1vdmVfc3RyaW5nICsgJyAnICsgbW92ZV90b19zYW4obW92ZSwgZ2VuZXJhdGVfbW92ZXMoeyBsZWdhbDogdHJ1ZSB9KSlcbiAgICAgICAgbWFrZV9tb3ZlKG1vdmUpXG4gICAgICB9XG5cbiAgICAgIC8qIGFyZSB0aGVyZSBhbnkgb3RoZXIgbGVmdG92ZXIgbW92ZXM/ICovXG4gICAgICBpZiAobW92ZV9zdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgIG1vdmVzLnB1c2goYXBwZW5kX2NvbW1lbnQobW92ZV9zdHJpbmcpKVxuICAgICAgfVxuXG4gICAgICAvKiBpcyB0aGVyZSBhIHJlc3VsdD8gKi9cbiAgICAgIGlmICh0eXBlb2YgaGVhZGVyLlJlc3VsdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbW92ZXMucHVzaChoZWFkZXIuUmVzdWx0KVxuICAgICAgfVxuXG4gICAgICAvKiBoaXN0b3J5IHNob3VsZCBiZSBiYWNrIHRvIHdoYXQgaXQgd2FzIGJlZm9yZSB3ZSBzdGFydGVkIGdlbmVyYXRpbmcgUEdOLFxuICAgICAgICogc28gam9pbiB0b2dldGhlciBtb3Zlc1xuICAgICAgICovXG4gICAgICBpZiAobWF4X3dpZHRoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQuam9pbignJykgKyBtb3Zlcy5qb2luKCcgJylcbiAgICAgIH1cblxuICAgICAgdmFyIHN0cmlwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDAgJiYgcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSA9PT0gJyAnKSB7XG4gICAgICAgICAgcmVzdWx0LnBvcCgpXG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cblxuICAgICAgLyogTkI6IHRoaXMgZG9lcyBub3QgcHJlc2VydmUgY29tbWVudCB3aGl0ZXNwYWNlLiAqL1xuICAgICAgdmFyIHdyYXBfY29tbWVudCA9IGZ1bmN0aW9uICh3aWR0aCwgbW92ZSkge1xuICAgICAgICBmb3IgKHZhciB0b2tlbiBvZiBtb3ZlLnNwbGl0KCcgJykpIHtcbiAgICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAod2lkdGggKyB0b2tlbi5sZW5ndGggPiBtYXhfd2lkdGgpIHtcbiAgICAgICAgICAgIHdoaWxlIChzdHJpcCgpKSB7XG4gICAgICAgICAgICAgIHdpZHRoLS1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5ld2xpbmUpXG4gICAgICAgICAgICB3aWR0aCA9IDBcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0LnB1c2godG9rZW4pXG4gICAgICAgICAgd2lkdGggKz0gdG9rZW4ubGVuZ3RoXG4gICAgICAgICAgcmVzdWx0LnB1c2goJyAnKVxuICAgICAgICAgIHdpZHRoKytcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RyaXAoKSkge1xuICAgICAgICAgIHdpZHRoLS1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2lkdGhcbiAgICAgIH1cblxuICAgICAgLyogd3JhcCB0aGUgUEdOIG91dHB1dCBhdCBtYXhfd2lkdGggKi9cbiAgICAgIHZhciBjdXJyZW50X3dpZHRoID0gMFxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb3Zlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoY3VycmVudF93aWR0aCArIG1vdmVzW2ldLmxlbmd0aCA+IG1heF93aWR0aCkge1xuICAgICAgICAgIGlmIChtb3Zlc1tpXS5pbmNsdWRlcygneycpKSB7XG4gICAgICAgICAgICBjdXJyZW50X3dpZHRoID0gd3JhcF9jb21tZW50KGN1cnJlbnRfd2lkdGgsIG1vdmVzW2ldKVxuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyogaWYgdGhlIGN1cnJlbnQgbW92ZSB3aWxsIHB1c2ggcGFzdCBtYXhfd2lkdGggKi9cbiAgICAgICAgaWYgKGN1cnJlbnRfd2lkdGggKyBtb3Zlc1tpXS5sZW5ndGggPiBtYXhfd2lkdGggJiYgaSAhPT0gMCkge1xuICAgICAgICAgIC8qIGRvbid0IGVuZCB0aGUgbGluZSB3aXRoIHdoaXRlc3BhY2UgKi9cbiAgICAgICAgICBpZiAocmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSA9PT0gJyAnKSB7XG4gICAgICAgICAgICByZXN1bHQucG9wKClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXN1bHQucHVzaChuZXdsaW5lKVxuICAgICAgICAgIGN1cnJlbnRfd2lkdGggPSAwXG4gICAgICAgIH0gZWxzZSBpZiAoaSAhPT0gMCkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKCcgJylcbiAgICAgICAgICBjdXJyZW50X3dpZHRoKytcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQucHVzaChtb3Zlc1tpXSlcbiAgICAgICAgY3VycmVudF93aWR0aCArPSBtb3Zlc1tpXS5sZW5ndGhcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdC5qb2luKCcnKVxuICAgIH0sXG5cbiAgICBsb2FkX3BnbjogZnVuY3Rpb24gKHBnbiwgb3B0aW9ucykge1xuICAgICAgLy8gYWxsb3cgdGhlIHVzZXIgdG8gc3BlY2lmeSB0aGUgc2xvcHB5IG1vdmUgcGFyc2VyIHRvIHdvcmsgYXJvdW5kIG92ZXJcbiAgICAgIC8vIGRpc2FtYmlndWF0aW9uIGJ1Z3MgaW4gRnJpdHogYW5kIENoZXNzYmFzZVxuICAgICAgdmFyIHNsb3BweSA9XG4gICAgICAgIHR5cGVvZiBvcHRpb25zICE9PSAndW5kZWZpbmVkJyAmJiAnc2xvcHB5JyBpbiBvcHRpb25zXG4gICAgICAgICAgPyBvcHRpb25zLnNsb3BweVxuICAgICAgICAgIDogZmFsc2VcblxuICAgICAgZnVuY3Rpb24gbWFzayhzdHIpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9cXFxcL2csICdcXFxcJylcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaGFzX2tleXMob2JqZWN0KSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBwYXJzZV9wZ25faGVhZGVyKGhlYWRlciwgb3B0aW9ucykge1xuICAgICAgICB2YXIgbmV3bGluZV9jaGFyID1cbiAgICAgICAgICB0eXBlb2Ygb3B0aW9ucyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5uZXdsaW5lX2NoYXIgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IG9wdGlvbnMubmV3bGluZV9jaGFyXG4gICAgICAgICAgICA6ICdcXHI/XFxuJ1xuICAgICAgICB2YXIgaGVhZGVyX29iaiA9IHt9XG4gICAgICAgIHZhciBoZWFkZXJzID0gaGVhZGVyLnNwbGl0KG5ldyBSZWdFeHAobWFzayhuZXdsaW5lX2NoYXIpKSlcbiAgICAgICAgdmFyIGtleSA9ICcnXG4gICAgICAgIHZhciB2YWx1ZSA9ICcnXG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAga2V5ID0gaGVhZGVyc1tpXS5yZXBsYWNlKC9eXFxbKFtBLVpdW0EtWmEtel0qKVxccy4qXFxdJC8sICckMScpXG4gICAgICAgICAgdmFsdWUgPSBoZWFkZXJzW2ldLnJlcGxhY2UoL15cXFtbQS1aYS16XStcXHNcIiguKilcIlxcICpcXF0kLywgJyQxJylcbiAgICAgICAgICBpZiAodHJpbShrZXkpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGhlYWRlcl9vYmpba2V5XSA9IHZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGhlYWRlcl9vYmpcbiAgICAgIH1cblxuICAgICAgdmFyIG5ld2xpbmVfY2hhciA9XG4gICAgICAgIHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0JyAmJiB0eXBlb2Ygb3B0aW9ucy5uZXdsaW5lX2NoYXIgPT09ICdzdHJpbmcnXG4gICAgICAgICAgPyBvcHRpb25zLm5ld2xpbmVfY2hhclxuICAgICAgICAgIDogJ1xccj9cXG4nXG5cbiAgICAgIC8vIFJlZ0V4cCB0byBzcGxpdCBoZWFkZXIuIFRha2VzIGFkdmFudGFnZSBvZiB0aGUgZmFjdCB0aGF0IGhlYWRlciBhbmQgbW92ZXRleHRcbiAgICAgIC8vIHdpbGwgYWx3YXlzIGhhdmUgYSBibGFuayBsaW5lIGJldHdlZW4gdGhlbSAoaWUsIHR3byBuZXdsaW5lX2NoYXIncykuXG4gICAgICAvLyBXaXRoIGRlZmF1bHQgbmV3bGluZV9jaGFyLCB3aWxsIGVxdWFsOiAvXihcXFsoKD86XFxyP1xcbil8LikqXFxdKSg/Olxccj9cXG4pezJ9L1xuICAgICAgdmFyIGhlYWRlcl9yZWdleCA9IG5ldyBSZWdFeHAoXG4gICAgICAgICdeKFxcXFxbKCg/OicgK1xuICAgICAgICAgIG1hc2sobmV3bGluZV9jaGFyKSArXG4gICAgICAgICAgJyl8LikqXFxcXF0pJyArXG4gICAgICAgICAgJyg/OicgK1xuICAgICAgICAgIG1hc2sobmV3bGluZV9jaGFyKSArXG4gICAgICAgICAgJyl7Mn0nXG4gICAgICApXG5cbiAgICAgIC8vIElmIG5vIGhlYWRlciBnaXZlbiwgYmVnaW4gd2l0aCBtb3Zlcy5cbiAgICAgIHZhciBoZWFkZXJfc3RyaW5nID0gaGVhZGVyX3JlZ2V4LnRlc3QocGduKVxuICAgICAgICA/IGhlYWRlcl9yZWdleC5leGVjKHBnbilbMV1cbiAgICAgICAgOiAnJ1xuXG4gICAgICAvLyBQdXQgdGhlIGJvYXJkIGluIHRoZSBzdGFydGluZyBwb3NpdGlvblxuICAgICAgcmVzZXQoKVxuXG4gICAgICAvKiBwYXJzZSBQR04gaGVhZGVyICovXG4gICAgICB2YXIgaGVhZGVycyA9IHBhcnNlX3Bnbl9oZWFkZXIoaGVhZGVyX3N0cmluZywgb3B0aW9ucylcbiAgICAgIGZvciAodmFyIGtleSBpbiBoZWFkZXJzKSB7XG4gICAgICAgIHNldF9oZWFkZXIoW2tleSwgaGVhZGVyc1trZXldXSlcbiAgICAgIH1cblxuICAgICAgLyogbG9hZCB0aGUgc3RhcnRpbmcgcG9zaXRpb24gaW5kaWNhdGVkIGJ5IFtTZXR1cCAnMSddIGFuZFxuICAgICAgICogW0ZFTiBwb3NpdGlvbl0gKi9cbiAgICAgIGlmIChoZWFkZXJzWydTZXRVcCddID09PSAnMScpIHtcbiAgICAgICAgaWYgKCEoJ0ZFTicgaW4gaGVhZGVycyAmJiBsb2FkKGhlYWRlcnNbJ0ZFTiddLCB0cnVlKSkpIHtcbiAgICAgICAgICAvLyBzZWNvbmQgYXJndW1lbnQgdG8gbG9hZDogZG9uJ3QgY2xlYXIgdGhlIGhlYWRlcnNcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKiBOQjogdGhlIHJlZ2V4ZXMgYmVsb3cgdGhhdCBkZWxldGUgbW92ZSBudW1iZXJzLCByZWN1cnNpdmVcbiAgICAgICAqIGFubm90YXRpb25zLCBhbmQgbnVtZXJpYyBhbm5vdGF0aW9uIGdseXBocyBtYXkgYWxzbyBtYXRjaFxuICAgICAgICogdGV4dCBpbiBjb21tZW50cy4gVG8gcHJldmVudCB0aGlzLCB3ZSB0cmFuc2Zvcm0gY29tbWVudHNcbiAgICAgICAqIGJ5IGhleC1lbmNvZGluZyB0aGVtIGluIHBsYWNlIGFuZCBkZWNvZGluZyB0aGVtIGFnYWluIGFmdGVyXG4gICAgICAgKiB0aGUgb3RoZXIgdG9rZW5zIGhhdmUgYmVlbiBkZWxldGVkLlxuICAgICAgICpcbiAgICAgICAqIFdoaWxlIHRoZSBzcGVjIHN0YXRlcyB0aGF0IFBHTiBmaWxlcyBzaG91bGQgYmUgQVNDSUkgZW5jb2RlZCxcbiAgICAgICAqIHdlIHVzZSB7ZW4sZGV9Y29kZVVSSUNvbXBvbmVudCBoZXJlIHRvIHN1cHBvcnQgYXJiaXRyYXJ5IFVURjhcbiAgICAgICAqIGFzIGEgY29udmVuaWVuY2UgZm9yIG1vZGVybiB1c2VycyAqL1xuXG4gICAgICB2YXIgdG9faGV4ID0gZnVuY3Rpb24gKHN0cmluZykge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShzdHJpbmcpXG4gICAgICAgICAgLm1hcChmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgLyogZW5jb2RlVVJJIGRvZXNuJ3QgdHJhbnNmb3JtIG1vc3QgQVNDSUkgY2hhcmFjdGVycyxcbiAgICAgICAgICAgICAqIHNvIHdlIGhhbmRsZSB0aGVzZSBvdXJzZWx2ZXMgKi9cbiAgICAgICAgICAgIHJldHVybiBjLmNoYXJDb2RlQXQoMCkgPCAxMjhcbiAgICAgICAgICAgICAgPyBjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpXG4gICAgICAgICAgICAgIDogZW5jb2RlVVJJQ29tcG9uZW50KGMpLnJlcGxhY2UoL1xcJS9nLCAnJykudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmpvaW4oJycpXG4gICAgICB9XG5cbiAgICAgIHZhciBmcm9tX2hleCA9IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZy5sZW5ndGggPT0gMFxuICAgICAgICAgID8gJydcbiAgICAgICAgICA6IGRlY29kZVVSSUNvbXBvbmVudCgnJScgKyBzdHJpbmcubWF0Y2goLy57MSwyfS9nKS5qb2luKCclJykpXG4gICAgICB9XG5cbiAgICAgIHZhciBlbmNvZGVfY29tbWVudCA9IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICAgICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UobmV3IFJlZ0V4cChtYXNrKG5ld2xpbmVfY2hhciksICdnJyksICcgJylcbiAgICAgICAgcmV0dXJuIGB7JHt0b19oZXgoc3RyaW5nLnNsaWNlKDEsIHN0cmluZy5sZW5ndGggLSAxKSl9fWBcbiAgICAgIH1cblxuICAgICAgdmFyIGRlY29kZV9jb21tZW50ID0gZnVuY3Rpb24gKHN0cmluZykge1xuICAgICAgICBpZiAoc3RyaW5nLnN0YXJ0c1dpdGgoJ3snKSAmJiBzdHJpbmcuZW5kc1dpdGgoJ30nKSkge1xuICAgICAgICAgIHJldHVybiBmcm9tX2hleChzdHJpbmcuc2xpY2UoMSwgc3RyaW5nLmxlbmd0aCAtIDEpKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qIGRlbGV0ZSBoZWFkZXIgdG8gZ2V0IHRoZSBtb3ZlcyAqL1xuICAgICAgdmFyIG1zID0gcGduXG4gICAgICAgIC5yZXBsYWNlKGhlYWRlcl9zdHJpbmcsICcnKVxuICAgICAgICAucmVwbGFjZShcbiAgICAgICAgICAvKiBlbmNvZGUgY29tbWVudHMgc28gdGhleSBkb24ndCBnZXQgZGVsZXRlZCBiZWxvdyAqL1xuICAgICAgICAgIG5ldyBSZWdFeHAoYChcXHtbXn1dKlxcfSkrP3w7KFteJHttYXNrKG5ld2xpbmVfY2hhcil9XSopYCwgJ2cnKSxcbiAgICAgICAgICBmdW5jdGlvbiAobWF0Y2gsIGJyYWNrZXQsIHNlbWljb2xvbikge1xuICAgICAgICAgICAgcmV0dXJuIGJyYWNrZXQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICA/IGVuY29kZV9jb21tZW50KGJyYWNrZXQpXG4gICAgICAgICAgICAgIDogJyAnICsgZW5jb2RlX2NvbW1lbnQoYHske3NlbWljb2xvbi5zbGljZSgxKX19YClcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgLnJlcGxhY2UobmV3IFJlZ0V4cChtYXNrKG5ld2xpbmVfY2hhciksICdnJyksICcgJylcblxuICAgICAgLyogZGVsZXRlIHJlY3Vyc2l2ZSBhbm5vdGF0aW9uIHZhcmlhdGlvbnMgKi9cbiAgICAgIHZhciByYXZfcmVnZXggPSAvKFxcKFteXFwoXFwpXStcXCkpKz8vZ1xuICAgICAgd2hpbGUgKHJhdl9yZWdleC50ZXN0KG1zKSkge1xuICAgICAgICBtcyA9IG1zLnJlcGxhY2UocmF2X3JlZ2V4LCAnJylcbiAgICAgIH1cblxuICAgICAgLyogZGVsZXRlIG1vdmUgbnVtYmVycyAqL1xuICAgICAgbXMgPSBtcy5yZXBsYWNlKC9cXGQrXFwuKFxcLlxcLik/L2csICcnKVxuXG4gICAgICAvKiBkZWxldGUgLi4uIGluZGljYXRpbmcgYmxhY2sgdG8gbW92ZSAqL1xuICAgICAgbXMgPSBtcy5yZXBsYWNlKC9cXC5cXC5cXC4vZywgJycpXG5cbiAgICAgIC8qIGRlbGV0ZSBudW1lcmljIGFubm90YXRpb24gZ2x5cGhzICovXG4gICAgICBtcyA9IG1zLnJlcGxhY2UoL1xcJFxcZCsvZywgJycpXG5cbiAgICAgIC8qIHRyaW0gYW5kIGdldCBhcnJheSBvZiBtb3ZlcyAqL1xuICAgICAgdmFyIG1vdmVzID0gdHJpbShtcykuc3BsaXQobmV3IFJlZ0V4cCgvXFxzKy8pKVxuXG4gICAgICAvKiBkZWxldGUgZW1wdHkgZW50cmllcyAqL1xuICAgICAgbW92ZXMgPSBtb3Zlcy5qb2luKCcsJykucmVwbGFjZSgvLCwrL2csICcsJykuc3BsaXQoJywnKVxuICAgICAgdmFyIG1vdmUgPSAnJ1xuXG4gICAgICB2YXIgcmVzdWx0ID0gJydcblxuICAgICAgZm9yICh2YXIgaGFsZl9tb3ZlID0gMDsgaGFsZl9tb3ZlIDwgbW92ZXMubGVuZ3RoOyBoYWxmX21vdmUrKykge1xuICAgICAgICB2YXIgY29tbWVudCA9IGRlY29kZV9jb21tZW50KG1vdmVzW2hhbGZfbW92ZV0pXG4gICAgICAgIGlmIChjb21tZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjb21tZW50c1tnZW5lcmF0ZV9mZW4oKV0gPSBjb21tZW50XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIG1vdmUgPSBtb3ZlX2Zyb21fc2FuKG1vdmVzW2hhbGZfbW92ZV0sIHNsb3BweSlcblxuICAgICAgICAvKiBpbnZhbGlkIG1vdmUgKi9cbiAgICAgICAgaWYgKG1vdmUgPT0gbnVsbCkge1xuICAgICAgICAgIC8qIHdhcyB0aGUgbW92ZSBhbiBlbmQgb2YgZ2FtZSBtYXJrZXIgKi9cbiAgICAgICAgICBpZiAoVEVSTUlOQVRJT05fTUFSS0VSUy5pbmRleE9mKG1vdmVzW2hhbGZfbW92ZV0pID4gLTEpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IG1vdmVzW2hhbGZfbW92ZV1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8qIHJlc2V0IHRoZSBlbmQgb2YgZ2FtZSBtYXJrZXIgaWYgbWFraW5nIGEgdmFsaWQgbW92ZSAqL1xuICAgICAgICAgIHJlc3VsdCA9ICcnXG4gICAgICAgICAgbWFrZV9tb3ZlKG1vdmUpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyogUGVyIHNlY3Rpb24gOC4yLjYgb2YgdGhlIFBHTiBzcGVjLCB0aGUgUmVzdWx0IHRhZyBwYWlyIG11c3QgbWF0Y2hcbiAgICAgICAqIG1hdGNoIHRoZSB0ZXJtaW5hdGlvbiBtYXJrZXIuIE9ubHkgZG8gdGhpcyB3aGVuIGhlYWRlcnMgYXJlIHByZXNlbnQsXG4gICAgICAgKiBidXQgdGhlIHJlc3VsdCB0YWcgaXMgbWlzc2luZ1xuICAgICAgICovXG4gICAgICBpZiAocmVzdWx0ICYmIE9iamVjdC5rZXlzKGhlYWRlcikubGVuZ3RoICYmICFoZWFkZXJbJ1Jlc3VsdCddKSB7XG4gICAgICAgIHNldF9oZWFkZXIoWydSZXN1bHQnLCByZXN1bHRdKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG5cbiAgICBoZWFkZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBzZXRfaGVhZGVyKGFyZ3VtZW50cylcbiAgICB9LFxuXG4gICAgdHVybjogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHR1cm5cbiAgICB9LFxuXG4gICAgbW92ZTogZnVuY3Rpb24gKG1vdmUsIG9wdGlvbnMpIHtcbiAgICAgIC8qIFRoZSBtb3ZlIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgd2l0aCBpbiB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gICAgICAgKlxuICAgICAgICogLm1vdmUoJ054YjcnKSAgICAgIDwtIHdoZXJlICdtb3ZlJyBpcyBhIGNhc2Utc2Vuc2l0aXZlIFNBTiBzdHJpbmdcbiAgICAgICAqXG4gICAgICAgKiAubW92ZSh7IGZyb206ICdoNycsIDwtIHdoZXJlIHRoZSAnbW92ZScgaXMgYSBtb3ZlIG9iamVjdCAoYWRkaXRpb25hbFxuICAgICAgICogICAgICAgICB0byA6J2g4JywgICAgICBmaWVsZHMgYXJlIGlnbm9yZWQpXG4gICAgICAgKiAgICAgICAgIHByb21vdGlvbjogJ3EnLFxuICAgICAgICogICAgICB9KVxuICAgICAgICovXG5cbiAgICAgIC8vIGFsbG93IHRoZSB1c2VyIHRvIHNwZWNpZnkgdGhlIHNsb3BweSBtb3ZlIHBhcnNlciB0byB3b3JrIGFyb3VuZCBvdmVyXG4gICAgICAvLyBkaXNhbWJpZ3VhdGlvbiBidWdzIGluIEZyaXR6IGFuZCBDaGVzc2Jhc2VcbiAgICAgIHZhciBzbG9wcHkgPVxuICAgICAgICB0eXBlb2Ygb3B0aW9ucyAhPT0gJ3VuZGVmaW5lZCcgJiYgJ3Nsb3BweScgaW4gb3B0aW9uc1xuICAgICAgICAgID8gb3B0aW9ucy5zbG9wcHlcbiAgICAgICAgICA6IGZhbHNlXG5cbiAgICAgIHZhciBtb3ZlX29iaiA9IG51bGxcblxuICAgICAgaWYgKHR5cGVvZiBtb3ZlID09PSAnc3RyaW5nJykge1xuICAgICAgICBtb3ZlX29iaiA9IG1vdmVfZnJvbV9zYW4obW92ZSwgc2xvcHB5KVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbW92ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgdmFyIG1vdmVzID0gZ2VuZXJhdGVfbW92ZXMoKVxuXG4gICAgICAgIC8qIGNvbnZlcnQgdGhlIHByZXR0eSBtb3ZlIG9iamVjdCB0byBhbiB1Z2x5IG1vdmUgb2JqZWN0ICovXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBtb3Zlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIG1vdmUuZnJvbSA9PT0gYWxnZWJyYWljKG1vdmVzW2ldLmZyb20pICYmXG4gICAgICAgICAgICBtb3ZlLnRvID09PSBhbGdlYnJhaWMobW92ZXNbaV0udG8pICYmXG4gICAgICAgICAgICAoISgncHJvbW90aW9uJyBpbiBtb3Zlc1tpXSkgfHxcbiAgICAgICAgICAgICAgbW92ZS5wcm9tb3Rpb24gPT09IG1vdmVzW2ldLnByb21vdGlvbilcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIG1vdmVfb2JqID0gbW92ZXNbaV1cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qIGZhaWxlZCB0byBmaW5kIG1vdmUgKi9cbiAgICAgIGlmICghbW92ZV9vYmopIHtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cblxuICAgICAgLyogbmVlZCB0byBtYWtlIGEgY29weSBvZiBtb3ZlIGJlY2F1c2Ugd2UgY2FuJ3QgZ2VuZXJhdGUgU0FOIGFmdGVyIHRoZVxuICAgICAgICogbW92ZSBpcyBtYWRlXG4gICAgICAgKi9cbiAgICAgIHZhciBwcmV0dHlfbW92ZSA9IG1ha2VfcHJldHR5KG1vdmVfb2JqKVxuXG4gICAgICBtYWtlX21vdmUobW92ZV9vYmopXG5cbiAgICAgIHJldHVybiBwcmV0dHlfbW92ZVxuICAgIH0sXG5cbiAgICB1bmRvOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbW92ZSA9IHVuZG9fbW92ZSgpXG4gICAgICByZXR1cm4gbW92ZSA/IG1ha2VfcHJldHR5KG1vdmUpIDogbnVsbFxuICAgIH0sXG5cbiAgICBjbGVhcjogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGNsZWFyKClcbiAgICB9LFxuXG4gICAgcHV0OiBmdW5jdGlvbiAocGllY2UsIHNxdWFyZSkge1xuICAgICAgcmV0dXJuIHB1dChwaWVjZSwgc3F1YXJlKVxuICAgIH0sXG5cbiAgICBnZXQ6IGZ1bmN0aW9uIChzcXVhcmUpIHtcbiAgICAgIHJldHVybiBnZXQoc3F1YXJlKVxuICAgIH0sXG5cbiAgICBhc2NpaSgpIHtcbiAgICAgIHZhciBzID0gJyAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXFxuJ1xuICAgICAgZm9yICh2YXIgaSA9IFNRVUFSRV9NQVAuYTg7IGkgPD0gU1FVQVJFX01BUC5oMTsgaSsrKSB7XG4gICAgICAgIC8qIGRpc3BsYXkgdGhlIHJhbmsgKi9cbiAgICAgICAgaWYgKGZpbGUoaSkgPT09IDApIHtcbiAgICAgICAgICBzICs9ICcgJyArICc4NzY1NDMyMSdbcmFuayhpKV0gKyAnIHwnXG4gICAgICAgIH1cblxuICAgICAgICAvKiBlbXB0eSBwaWVjZSAqL1xuICAgICAgICBpZiAoYm9hcmRbaV0gPT0gbnVsbCkge1xuICAgICAgICAgIHMgKz0gJyAuICdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcGllY2UgPSBib2FyZFtpXS50eXBlXG4gICAgICAgICAgdmFyIGNvbG9yID0gYm9hcmRbaV0uY29sb3JcbiAgICAgICAgICB2YXIgc3ltYm9sID1cbiAgICAgICAgICAgIGNvbG9yID09PSBXSElURSA/IHBpZWNlLnRvVXBwZXJDYXNlKCkgOiBwaWVjZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgcyArPSAnICcgKyBzeW1ib2wgKyAnICdcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgoaSArIDEpICYgMHg4OCkge1xuICAgICAgICAgIHMgKz0gJ3xcXG4nXG4gICAgICAgICAgaSArPSA4XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHMgKz0gJyAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXFxuJ1xuICAgICAgcyArPSAnICAgICBhICBiICBjICBkICBlICBmICBnICBoJ1xuXG4gICAgICByZXR1cm4gc1xuICAgIH0sXG5cbiAgICByZW1vdmU6IGZ1bmN0aW9uIChzcXVhcmUpIHtcbiAgICAgIHJldHVybiByZW1vdmUoc3F1YXJlKVxuICAgIH0sXG5cbiAgICBwZXJmdDogZnVuY3Rpb24gKGRlcHRoKSB7XG4gICAgICByZXR1cm4gcGVyZnQoZGVwdGgpXG4gICAgfSxcblxuICAgIHNxdWFyZV9jb2xvcjogZnVuY3Rpb24gKHNxdWFyZSkge1xuICAgICAgaWYgKHNxdWFyZSBpbiBTUVVBUkVfTUFQKSB7XG4gICAgICAgIHZhciBzcV8weDg4ID0gU1FVQVJFX01BUFtzcXVhcmVdXG4gICAgICAgIHJldHVybiAocmFuayhzcV8weDg4KSArIGZpbGUoc3FfMHg4OCkpICUgMiA9PT0gMCA/ICdsaWdodCcgOiAnZGFyaydcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9LFxuXG4gICAgaGlzdG9yeTogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgIHZhciByZXZlcnNlZF9oaXN0b3J5ID0gW11cbiAgICAgIHZhciBtb3ZlX2hpc3RvcnkgPSBbXVxuICAgICAgdmFyIHZlcmJvc2UgPVxuICAgICAgICB0eXBlb2Ygb3B0aW9ucyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgJ3ZlcmJvc2UnIGluIG9wdGlvbnMgJiZcbiAgICAgICAgb3B0aW9ucy52ZXJib3NlXG5cbiAgICAgIHdoaWxlIChoaXN0b3J5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV2ZXJzZWRfaGlzdG9yeS5wdXNoKHVuZG9fbW92ZSgpKVxuICAgICAgfVxuXG4gICAgICB3aGlsZSAocmV2ZXJzZWRfaGlzdG9yeS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBtb3ZlID0gcmV2ZXJzZWRfaGlzdG9yeS5wb3AoKVxuICAgICAgICBpZiAodmVyYm9zZSkge1xuICAgICAgICAgIG1vdmVfaGlzdG9yeS5wdXNoKG1ha2VfcHJldHR5KG1vdmUpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1vdmVfaGlzdG9yeS5wdXNoKG1vdmVfdG9fc2FuKG1vdmUsIGdlbmVyYXRlX21vdmVzKHsgbGVnYWw6IHRydWUgfSkpKVxuICAgICAgICB9XG4gICAgICAgIG1ha2VfbW92ZShtb3ZlKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbW92ZV9oaXN0b3J5XG4gICAgfSxcblxuICAgIGdldF9jb21tZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gY29tbWVudHNbZ2VuZXJhdGVfZmVuKCldXG4gICAgfSxcblxuICAgIHNldF9jb21tZW50OiBmdW5jdGlvbiAoY29tbWVudCkge1xuICAgICAgY29tbWVudHNbZ2VuZXJhdGVfZmVuKCldID0gY29tbWVudC5yZXBsYWNlKCd7JywgJ1snKS5yZXBsYWNlKCd9JywgJ10nKVxuICAgIH0sXG5cbiAgICBkZWxldGVfY29tbWVudDogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNvbW1lbnQgPSBjb21tZW50c1tnZW5lcmF0ZV9mZW4oKV1cbiAgICAgIGRlbGV0ZSBjb21tZW50c1tnZW5lcmF0ZV9mZW4oKV1cbiAgICAgIHJldHVybiBjb21tZW50XG4gICAgfSxcblxuICAgIGdldF9jb21tZW50czogZnVuY3Rpb24gKCkge1xuICAgICAgcHJ1bmVfY29tbWVudHMoKVxuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGNvbW1lbnRzKS5tYXAoZnVuY3Rpb24gKGZlbikge1xuICAgICAgICByZXR1cm4geyBmZW46IGZlbiwgY29tbWVudDogY29tbWVudHNbZmVuXSB9XG4gICAgICB9KVxuICAgIH0sXG5cbiAgICBkZWxldGVfY29tbWVudHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHBydW5lX2NvbW1lbnRzKClcbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhjb21tZW50cykubWFwKGZ1bmN0aW9uIChmZW4pIHtcbiAgICAgICAgdmFyIGNvbW1lbnQgPSBjb21tZW50c1tmZW5dXG4gICAgICAgIGRlbGV0ZSBjb21tZW50c1tmZW5dXG4gICAgICAgIHJldHVybiB7IGZlbjogZmVuLCBjb21tZW50OiBjb21tZW50IH1cbiAgICAgIH0pXG4gICAgfSxcbiAgfVxufVxuIiwiZnVuY3Rpb24gd2VicGFja0VtcHR5Q29udGV4dChyZXEpIHtcblx0dmFyIGUgPSBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgcmVxICsgXCInXCIpO1xuXHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdHRocm93IGU7XG59XG53ZWJwYWNrRW1wdHlDb250ZXh0LmtleXMgPSBmdW5jdGlvbigpIHsgcmV0dXJuIFtdOyB9O1xud2VicGFja0VtcHR5Q29udGV4dC5yZXNvbHZlID0gd2VicGFja0VtcHR5Q29udGV4dDtcbm1vZHVsZS5leHBvcnRzID0gd2VicGFja0VtcHR5Q29udGV4dDtcbndlYnBhY2tFbXB0eUNvbnRleHQuaWQgPSBcIi4vbm9kZV9tb2R1bGVzL3BlZXJqcy9kaXN0IHN5bmMgcmVjdXJzaXZlXCI7IiwicGFyY2VsUmVxdWlyZT1mdW5jdGlvbihlLHIsdCxuKXt2YXIgaSxvPVwiZnVuY3Rpb25cIj09dHlwZW9mIHBhcmNlbFJlcXVpcmUmJnBhcmNlbFJlcXVpcmUsdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2Z1bmN0aW9uIGYodCxuKXtpZighclt0XSl7aWYoIWVbdF0pe3ZhciBpPVwiZnVuY3Rpb25cIj09dHlwZW9mIHBhcmNlbFJlcXVpcmUmJnBhcmNlbFJlcXVpcmU7aWYoIW4mJmkpcmV0dXJuIGkodCwhMCk7aWYobylyZXR1cm4gbyh0LCEwKTtpZih1JiZcInN0cmluZ1wiPT10eXBlb2YgdClyZXR1cm4gdSh0KTt2YXIgYz1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK3QrXCInXCIpO3Rocm93IGMuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixjfXAucmVzb2x2ZT1mdW5jdGlvbihyKXtyZXR1cm4gZVt0XVsxXVtyXXx8cn0scC5jYWNoZT17fTt2YXIgbD1yW3RdPW5ldyBmLk1vZHVsZSh0KTtlW3RdWzBdLmNhbGwobC5leHBvcnRzLHAsbCxsLmV4cG9ydHMsdGhpcyl9cmV0dXJuIHJbdF0uZXhwb3J0cztmdW5jdGlvbiBwKGUpe3JldHVybiBmKHAucmVzb2x2ZShlKSl9fWYuaXNQYXJjZWxSZXF1aXJlPSEwLGYuTW9kdWxlPWZ1bmN0aW9uKGUpe3RoaXMuaWQ9ZSx0aGlzLmJ1bmRsZT1mLHRoaXMuZXhwb3J0cz17fX0sZi5tb2R1bGVzPWUsZi5jYWNoZT1yLGYucGFyZW50PW8sZi5yZWdpc3Rlcj1mdW5jdGlvbihyLHQpe2Vbcl09W2Z1bmN0aW9uKGUscil7ci5leHBvcnRzPXR9LHt9XX07Zm9yKHZhciBjPTA7Yzx0Lmxlbmd0aDtjKyspdHJ5e2YodFtjXSl9Y2F0Y2goZSl7aXx8KGk9ZSl9aWYodC5sZW5ndGgpe3ZhciBsPWYodFt0Lmxlbmd0aC0xXSk7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9bDpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIGx9KTpuJiYodGhpc1tuXT1sKX1pZihwYXJjZWxSZXF1aXJlPWYsaSl0aHJvdyBpO3JldHVybiBmfSh7XCJFZ0JoXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcbnZhciBlPXt9O2UudXNlQmxvYkJ1aWxkZXI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBCbG9iKFtdKSwhMX1jYXRjaChlKXtyZXR1cm4hMH19KCksZS51c2VBcnJheUJ1ZmZlclZpZXc9IWUudXNlQmxvYkJ1aWxkZXImJmZ1bmN0aW9uKCl7dHJ5e3JldHVybiAwPT09bmV3IEJsb2IoW25ldyBVaW50OEFycmF5KFtdKV0pLnNpemV9Y2F0Y2goZSl7cmV0dXJuITB9fSgpLG1vZHVsZS5leHBvcnRzLmJpbmFyeUZlYXR1cmVzPWU7dmFyIHI9bW9kdWxlLmV4cG9ydHMuQmxvYkJ1aWxkZXI7ZnVuY3Rpb24gdCgpe3RoaXMuX3BpZWNlcz1bXSx0aGlzLl9wYXJ0cz1bXX1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYocj1tb2R1bGUuZXhwb3J0cy5CbG9iQnVpbGRlcj13aW5kb3cuV2ViS2l0QmxvYkJ1aWxkZXJ8fHdpbmRvdy5Nb3pCbG9iQnVpbGRlcnx8d2luZG93Lk1TQmxvYkJ1aWxkZXJ8fHdpbmRvdy5CbG9iQnVpbGRlciksdC5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKGUpe1wibnVtYmVyXCI9PXR5cGVvZiBlP3RoaXMuX3BpZWNlcy5wdXNoKGUpOih0aGlzLmZsdXNoKCksdGhpcy5fcGFydHMucHVzaChlKSl9LHQucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7aWYodGhpcy5fcGllY2VzLmxlbmd0aD4wKXt2YXIgcj1uZXcgVWludDhBcnJheSh0aGlzLl9waWVjZXMpO2UudXNlQXJyYXlCdWZmZXJWaWV3fHwocj1yLmJ1ZmZlciksdGhpcy5fcGFydHMucHVzaChyKSx0aGlzLl9waWVjZXM9W119fSx0LnByb3RvdHlwZS5nZXRCdWZmZXI9ZnVuY3Rpb24oKXtpZih0aGlzLmZsdXNoKCksZS51c2VCbG9iQnVpbGRlcil7Zm9yKHZhciB0PW5ldyByLGk9MCx1PXRoaXMuX3BhcnRzLmxlbmd0aDtpPHU7aSsrKXQuYXBwZW5kKHRoaXMuX3BhcnRzW2ldKTtyZXR1cm4gdC5nZXRCbG9iKCl9cmV0dXJuIG5ldyBCbG9iKHRoaXMuX3BhcnRzKX0sbW9kdWxlLmV4cG9ydHMuQnVmZmVyQnVpbGRlcj10O1xufSx7fV0sXCJrZFBwXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcbnZhciB0PXJlcXVpcmUoXCIuL2J1ZmZlcmJ1aWxkZXJcIikuQnVmZmVyQnVpbGRlcixlPXJlcXVpcmUoXCIuL2J1ZmZlcmJ1aWxkZXJcIikuYmluYXJ5RmVhdHVyZXMsaT17dW5wYWNrOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcih0KS51bnBhY2soKX0scGFjazpmdW5jdGlvbih0KXt2YXIgZT1uZXcgbjtyZXR1cm4gZS5wYWNrKHQpLGUuZ2V0QnVmZmVyKCl9fTtmdW5jdGlvbiByKHQpe3RoaXMuaW5kZXg9MCx0aGlzLmRhdGFCdWZmZXI9dCx0aGlzLmRhdGFWaWV3PW5ldyBVaW50OEFycmF5KHRoaXMuZGF0YUJ1ZmZlciksdGhpcy5sZW5ndGg9dGhpcy5kYXRhQnVmZmVyLmJ5dGVMZW5ndGh9ZnVuY3Rpb24gbigpe3RoaXMuYnVmZmVyQnVpbGRlcj1uZXcgdH1mdW5jdGlvbiB1KHQpe3ZhciBlPXQuY2hhckNvZGVBdCgwKTtyZXR1cm4gZTw9MjA0Nz9cIjAwXCI6ZTw9NjU1MzU/XCIwMDBcIjplPD0yMDk3MTUxP1wiMDAwMFwiOmU8PTY3MTA4ODYzP1wiMDAwMDBcIjpcIjAwMDAwMFwifWZ1bmN0aW9uIGEodCl7cmV0dXJuIHQubGVuZ3RoPjYwMD9uZXcgQmxvYihbdF0pLnNpemU6dC5yZXBsYWNlKC9bXlxcdTAwMDAtXFx1MDA3Rl0vZyx1KS5sZW5ndGh9bW9kdWxlLmV4cG9ydHM9aSxyLnByb3RvdHlwZS51bnBhY2s9ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMudW5wYWNrX3VpbnQ4KCk7aWYoZTwxMjgpcmV0dXJuIGU7aWYoKDIyNF5lKTwzMilyZXR1cm4oMjI0XmUpLTMyO2lmKCh0PTE2MF5lKTw9MTUpcmV0dXJuIHRoaXMudW5wYWNrX3Jhdyh0KTtpZigodD0xNzZeZSk8PTE1KXJldHVybiB0aGlzLnVucGFja19zdHJpbmcodCk7aWYoKHQ9MTQ0XmUpPD0xNSlyZXR1cm4gdGhpcy51bnBhY2tfYXJyYXkodCk7aWYoKHQ9MTI4XmUpPD0xNSlyZXR1cm4gdGhpcy51bnBhY2tfbWFwKHQpO3N3aXRjaChlKXtjYXNlIDE5MjpyZXR1cm4gbnVsbDtjYXNlIDE5MzpyZXR1cm47Y2FzZSAxOTQ6cmV0dXJuITE7Y2FzZSAxOTU6cmV0dXJuITA7Y2FzZSAyMDI6cmV0dXJuIHRoaXMudW5wYWNrX2Zsb2F0KCk7Y2FzZSAyMDM6cmV0dXJuIHRoaXMudW5wYWNrX2RvdWJsZSgpO2Nhc2UgMjA0OnJldHVybiB0aGlzLnVucGFja191aW50OCgpO2Nhc2UgMjA1OnJldHVybiB0aGlzLnVucGFja191aW50MTYoKTtjYXNlIDIwNjpyZXR1cm4gdGhpcy51bnBhY2tfdWludDMyKCk7Y2FzZSAyMDc6cmV0dXJuIHRoaXMudW5wYWNrX3VpbnQ2NCgpO2Nhc2UgMjA4OnJldHVybiB0aGlzLnVucGFja19pbnQ4KCk7Y2FzZSAyMDk6cmV0dXJuIHRoaXMudW5wYWNrX2ludDE2KCk7Y2FzZSAyMTA6cmV0dXJuIHRoaXMudW5wYWNrX2ludDMyKCk7Y2FzZSAyMTE6cmV0dXJuIHRoaXMudW5wYWNrX2ludDY0KCk7Y2FzZSAyMTI6Y2FzZSAyMTM6Y2FzZSAyMTQ6Y2FzZSAyMTU6cmV0dXJuO2Nhc2UgMjE2OnJldHVybiB0PXRoaXMudW5wYWNrX3VpbnQxNigpLHRoaXMudW5wYWNrX3N0cmluZyh0KTtjYXNlIDIxNzpyZXR1cm4gdD10aGlzLnVucGFja191aW50MzIoKSx0aGlzLnVucGFja19zdHJpbmcodCk7Y2FzZSAyMTg6cmV0dXJuIHQ9dGhpcy51bnBhY2tfdWludDE2KCksdGhpcy51bnBhY2tfcmF3KHQpO2Nhc2UgMjE5OnJldHVybiB0PXRoaXMudW5wYWNrX3VpbnQzMigpLHRoaXMudW5wYWNrX3Jhdyh0KTtjYXNlIDIyMDpyZXR1cm4gdD10aGlzLnVucGFja191aW50MTYoKSx0aGlzLnVucGFja19hcnJheSh0KTtjYXNlIDIyMTpyZXR1cm4gdD10aGlzLnVucGFja191aW50MzIoKSx0aGlzLnVucGFja19hcnJheSh0KTtjYXNlIDIyMjpyZXR1cm4gdD10aGlzLnVucGFja191aW50MTYoKSx0aGlzLnVucGFja19tYXAodCk7Y2FzZSAyMjM6cmV0dXJuIHQ9dGhpcy51bnBhY2tfdWludDMyKCksdGhpcy51bnBhY2tfbWFwKHQpfX0sci5wcm90b3R5cGUudW5wYWNrX3VpbnQ4PWZ1bmN0aW9uKCl7dmFyIHQ9MjU1JnRoaXMuZGF0YVZpZXdbdGhpcy5pbmRleF07cmV0dXJuIHRoaXMuaW5kZXgrKyx0fSxyLnByb3RvdHlwZS51bnBhY2tfdWludDE2PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yZWFkKDIpLGU9MjU2KigyNTUmdFswXSkrKDI1NSZ0WzFdKTtyZXR1cm4gdGhpcy5pbmRleCs9MixlfSxyLnByb3RvdHlwZS51bnBhY2tfdWludDMyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yZWFkKDQpLGU9MjU2KigyNTYqKDI1Nip0WzBdK3RbMV0pK3RbMl0pK3RbM107cmV0dXJuIHRoaXMuaW5kZXgrPTQsZX0sci5wcm90b3R5cGUudW5wYWNrX3VpbnQ2ND1mdW5jdGlvbigpe3ZhciB0PXRoaXMucmVhZCg4KSxlPTI1NiooMjU2KigyNTYqKDI1NiooMjU2KigyNTYqKDI1Nip0WzBdK3RbMV0pK3RbMl0pK3RbM10pK3RbNF0pK3RbNV0pK3RbNl0pK3RbN107cmV0dXJuIHRoaXMuaW5kZXgrPTgsZX0sci5wcm90b3R5cGUudW5wYWNrX2ludDg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnVucGFja191aW50OCgpO3JldHVybiB0PDEyOD90OnQtMjU2fSxyLnByb3RvdHlwZS51bnBhY2tfaW50MTY9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnVucGFja191aW50MTYoKTtyZXR1cm4gdDwzMjc2OD90OnQtNjU1MzZ9LHIucHJvdG90eXBlLnVucGFja19pbnQzMj1mdW5jdGlvbigpe3ZhciB0PXRoaXMudW5wYWNrX3VpbnQzMigpO3JldHVybiB0PE1hdGgucG93KDIsMzEpP3Q6dC1NYXRoLnBvdygyLDMyKX0sci5wcm90b3R5cGUudW5wYWNrX2ludDY0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy51bnBhY2tfdWludDY0KCk7cmV0dXJuIHQ8TWF0aC5wb3coMiw2Myk/dDp0LU1hdGgucG93KDIsNjQpfSxyLnByb3RvdHlwZS51bnBhY2tfcmF3PWZ1bmN0aW9uKHQpe2lmKHRoaXMubGVuZ3RoPHRoaXMuaW5kZXgrdCl0aHJvdyBuZXcgRXJyb3IoXCJCaW5hcnlQYWNrRmFpbHVyZTogaW5kZXggaXMgb3V0IG9mIHJhbmdlIFwiK3RoaXMuaW5kZXgrXCIgXCIrdCtcIiBcIit0aGlzLmxlbmd0aCk7dmFyIGU9dGhpcy5kYXRhQnVmZmVyLnNsaWNlKHRoaXMuaW5kZXgsdGhpcy5pbmRleCt0KTtyZXR1cm4gdGhpcy5pbmRleCs9dCxlfSxyLnByb3RvdHlwZS51bnBhY2tfc3RyaW5nPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxpLHI9dGhpcy5yZWFkKHQpLG49MCx1PVwiXCI7bjx0OykoZT1yW25dKTwxMjg/KHUrPVN0cmluZy5mcm9tQ2hhckNvZGUoZSksbisrKTooMTkyXmUpPDMyPyhpPSgxOTJeZSk8PDZ8NjMmcltuKzFdLHUrPVN0cmluZy5mcm9tQ2hhckNvZGUoaSksbis9Mik6KGk9KDE1JmUpPDwxMnwoNjMmcltuKzFdKTw8Nnw2MyZyW24rMl0sdSs9U3RyaW5nLmZyb21DaGFyQ29kZShpKSxuKz0zKTtyZXR1cm4gdGhpcy5pbmRleCs9dCx1fSxyLnByb3RvdHlwZS51bnBhY2tfYXJyYXk9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBBcnJheSh0KSxpPTA7aTx0O2krKyllW2ldPXRoaXMudW5wYWNrKCk7cmV0dXJuIGV9LHIucHJvdG90eXBlLnVucGFja19tYXA9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXt9LGk9MDtpPHQ7aSsrKXt2YXIgcj10aGlzLnVucGFjaygpLG49dGhpcy51bnBhY2soKTtlW3JdPW59cmV0dXJuIGV9LHIucHJvdG90eXBlLnVucGFja19mbG9hdD1mdW5jdGlvbigpe3ZhciB0PXRoaXMudW5wYWNrX3VpbnQzMigpLGU9KHQ+PjIzJjI1NSktMTI3O3JldHVybigwPT09dD4+MzE/MTotMSkqKDgzODg2MDcmdHw4Mzg4NjA4KSpNYXRoLnBvdygyLGUtMjMpfSxyLnByb3RvdHlwZS51bnBhY2tfZG91YmxlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy51bnBhY2tfdWludDMyKCksZT10aGlzLnVucGFja191aW50MzIoKSxpPSh0Pj4yMCYyMDQ3KS0xMDIzO3JldHVybigwPT09dD4+MzE/MTotMSkqKCgxMDQ4NTc1JnR8MTA0ODU3NikqTWF0aC5wb3coMixpLTIwKStlKk1hdGgucG93KDIsaS01MikpfSxyLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuaW5kZXg7aWYoZSt0PD10aGlzLmxlbmd0aClyZXR1cm4gdGhpcy5kYXRhVmlldy5zdWJhcnJheShlLGUrdCk7dGhyb3cgbmV3IEVycm9yKFwiQmluYXJ5UGFja0ZhaWx1cmU6IHJlYWQgaW5kZXggb3V0IG9mIHJhbmdlXCIpfSxuLnByb3RvdHlwZS5nZXRCdWZmZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXJCdWlsZGVyLmdldEJ1ZmZlcigpfSxuLnByb3RvdHlwZS5wYWNrPWZ1bmN0aW9uKHQpe3ZhciBpPXR5cGVvZiB0O2lmKFwic3RyaW5nXCI9PT1pKXRoaXMucGFja19zdHJpbmcodCk7ZWxzZSBpZihcIm51bWJlclwiPT09aSlNYXRoLmZsb29yKHQpPT09dD90aGlzLnBhY2tfaW50ZWdlcih0KTp0aGlzLnBhY2tfZG91YmxlKHQpO2Vsc2UgaWYoXCJib29sZWFuXCI9PT1pKSEwPT09dD90aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDE5NSk6ITE9PT10JiZ0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDE5NCk7ZWxzZSBpZihcInVuZGVmaW5lZFwiPT09aSl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDE5Mik7ZWxzZXtpZihcIm9iamVjdFwiIT09aSl0aHJvdyBuZXcgRXJyb3IoJ1R5cGUgXCInK2krJ1wiIG5vdCB5ZXQgc3VwcG9ydGVkJyk7aWYobnVsbD09PXQpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgxOTIpO2Vsc2V7dmFyIHI9dC5jb25zdHJ1Y3RvcjtpZihyPT1BcnJheSl0aGlzLnBhY2tfYXJyYXkodCk7ZWxzZSBpZihyPT1CbG9ifHxyPT1GaWxlfHx0IGluc3RhbmNlb2YgQmxvYnx8dCBpbnN0YW5jZW9mIEZpbGUpdGhpcy5wYWNrX2Jpbih0KTtlbHNlIGlmKHI9PUFycmF5QnVmZmVyKWUudXNlQXJyYXlCdWZmZXJWaWV3P3RoaXMucGFja19iaW4obmV3IFVpbnQ4QXJyYXkodCkpOnRoaXMucGFja19iaW4odCk7ZWxzZSBpZihcIkJZVEVTX1BFUl9FTEVNRU5UXCJpbiB0KWUudXNlQXJyYXlCdWZmZXJWaWV3P3RoaXMucGFja19iaW4obmV3IFVpbnQ4QXJyYXkodC5idWZmZXIpKTp0aGlzLnBhY2tfYmluKHQuYnVmZmVyKTtlbHNlIGlmKHI9PU9iamVjdHx8ci50b1N0cmluZygpLnN0YXJ0c1dpdGgoXCJjbGFzc1wiKSl0aGlzLnBhY2tfb2JqZWN0KHQpO2Vsc2UgaWYocj09RGF0ZSl0aGlzLnBhY2tfc3RyaW5nKHQudG9TdHJpbmcoKSk7ZWxzZXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0LnRvQmluYXJ5UGFjayl0aHJvdyBuZXcgRXJyb3IoJ1R5cGUgXCInK3IudG9TdHJpbmcoKSsnXCIgbm90IHlldCBzdXBwb3J0ZWQnKTt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKHQudG9CaW5hcnlQYWNrKCkpfX19dGhpcy5idWZmZXJCdWlsZGVyLmZsdXNoKCl9LG4ucHJvdG90eXBlLnBhY2tfYmluPWZ1bmN0aW9uKHQpe3ZhciBlPXQubGVuZ3RofHx0LmJ5dGVMZW5ndGh8fHQuc2l6ZTtpZihlPD0xNSl0aGlzLnBhY2tfdWludDgoMTYwK2UpO2Vsc2UgaWYoZTw9NjU1MzUpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMTgpLHRoaXMucGFja191aW50MTYoZSk7ZWxzZXtpZighKGU8PTQyOTQ5NjcyOTUpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgbGVuZ3RoXCIpO3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjE5KSx0aGlzLnBhY2tfdWludDMyKGUpfXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQodCl9LG4ucHJvdG90eXBlLnBhY2tfc3RyaW5nPWZ1bmN0aW9uKHQpe3ZhciBlPWEodCk7aWYoZTw9MTUpdGhpcy5wYWNrX3VpbnQ4KDE3NitlKTtlbHNlIGlmKGU8PTY1NTM1KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjE2KSx0aGlzLnBhY2tfdWludDE2KGUpO2Vsc2V7aWYoIShlPD00Mjk0OTY3Mjk1KSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGxlbmd0aFwiKTt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIxNyksdGhpcy5wYWNrX3VpbnQzMihlKX10aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKHQpfSxuLnByb3RvdHlwZS5wYWNrX2FycmF5PWZ1bmN0aW9uKHQpe3ZhciBlPXQubGVuZ3RoO2lmKGU8PTE1KXRoaXMucGFja191aW50OCgxNDQrZSk7ZWxzZSBpZihlPD02NTUzNSl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIyMCksdGhpcy5wYWNrX3VpbnQxNihlKTtlbHNle2lmKCEoZTw9NDI5NDk2NzI5NSkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBsZW5ndGhcIik7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMjEpLHRoaXMucGFja191aW50MzIoZSl9Zm9yKHZhciBpPTA7aTxlO2krKyl0aGlzLnBhY2sodFtpXSl9LG4ucHJvdG90eXBlLnBhY2tfaW50ZWdlcj1mdW5jdGlvbih0KXtpZih0Pj0tMzImJnQ8PTEyNyl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDI1NSZ0KTtlbHNlIGlmKHQ+PTAmJnQ8PTI1NSl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIwNCksdGhpcy5wYWNrX3VpbnQ4KHQpO2Vsc2UgaWYodD49LTEyOCYmdDw9MTI3KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjA4KSx0aGlzLnBhY2tfaW50OCh0KTtlbHNlIGlmKHQ+PTAmJnQ8PTY1NTM1KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjA1KSx0aGlzLnBhY2tfdWludDE2KHQpO2Vsc2UgaWYodD49LTMyNzY4JiZ0PD0zMjc2Nyl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIwOSksdGhpcy5wYWNrX2ludDE2KHQpO2Vsc2UgaWYodD49MCYmdDw9NDI5NDk2NzI5NSl0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDIwNiksdGhpcy5wYWNrX3VpbnQzMih0KTtlbHNlIGlmKHQ+PS0yMTQ3NDgzNjQ4JiZ0PD0yMTQ3NDgzNjQ3KXRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjEwKSx0aGlzLnBhY2tfaW50MzIodCk7ZWxzZSBpZih0Pj0tMHg4MDAwMDAwMDAwMDAwMDAwJiZ0PD0weDgwMDAwMDAwMDAwMDAwMDApdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMTEpLHRoaXMucGFja19pbnQ2NCh0KTtlbHNle2lmKCEodD49MCYmdDw9MHgxMDAwMDAwMDAwMDAwMDAwMCkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbnRlZ2VyXCIpO3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjA3KSx0aGlzLnBhY2tfdWludDY0KHQpfX0sbi5wcm90b3R5cGUucGFja19kb3VibGU9ZnVuY3Rpb24odCl7dmFyIGU9MDt0PDAmJihlPTEsdD0tdCk7dmFyIGk9TWF0aC5mbG9vcihNYXRoLmxvZyh0KS9NYXRoLkxOMikscj10L01hdGgucG93KDIsaSktMSxuPU1hdGguZmxvb3IocipNYXRoLnBvdygyLDUyKSksdT1NYXRoLnBvdygyLDMyKSxhPWU8PDMxfGkrMTAyMzw8MjB8bi91JjEwNDg1NzUscD1uJXU7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMDMpLHRoaXMucGFja19pbnQzMihhKSx0aGlzLnBhY2tfaW50MzIocCl9LG4ucHJvdG90eXBlLnBhY2tfb2JqZWN0PWZ1bmN0aW9uKHQpe3ZhciBlPU9iamVjdC5rZXlzKHQpLmxlbmd0aDtpZihlPD0xNSl0aGlzLnBhY2tfdWludDgoMTI4K2UpO2Vsc2UgaWYoZTw9NjU1MzUpdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyMjIpLHRoaXMucGFja191aW50MTYoZSk7ZWxzZXtpZighKGU8PTQyOTQ5NjcyOTUpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgbGVuZ3RoXCIpO3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjIzKSx0aGlzLnBhY2tfdWludDMyKGUpfWZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJih0aGlzLnBhY2soaSksdGhpcy5wYWNrKHRbaV0pKX0sbi5wcm90b3R5cGUucGFja191aW50OD1mdW5jdGlvbih0KXt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKHQpfSxuLnByb3RvdHlwZS5wYWNrX3VpbnQxNj1mdW5jdGlvbih0KXt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKHQ+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JnQpfSxuLnByb3RvdHlwZS5wYWNrX3VpbnQzMj1mdW5jdGlvbih0KXt2YXIgZT00Mjk0OTY3Mjk1JnQ7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNDI3ODE5MDA4MCZlKT4+PjI0KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCgxNjcxMTY4MCZlKT4+PjE2KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg2NTI4MCZlKT4+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JmUpfSxuLnByb3RvdHlwZS5wYWNrX3VpbnQ2ND1mdW5jdGlvbih0KXt2YXIgZT10L01hdGgucG93KDIsMzIpLGk9dCVNYXRoLnBvdygyLDMyKTt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg0Mjc4MTkwMDgwJmUpPj4+MjQpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDE2NzExNjgwJmUpPj4+MTYpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDY1MjgwJmUpPj4+OCksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyNTUmZSksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNDI3ODE5MDA4MCZpKT4+PjI0KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCgxNjcxMTY4MCZpKT4+PjE2KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg2NTI4MCZpKT4+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JmkpfSxuLnByb3RvdHlwZS5wYWNrX2ludDg9ZnVuY3Rpb24odCl7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyNTUmdCl9LG4ucHJvdG90eXBlLnBhY2tfaW50MTY9ZnVuY3Rpb24odCl7dGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNjUyODAmdCk+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JnQpfSxuLnByb3RvdHlwZS5wYWNrX2ludDMyPWZ1bmN0aW9uKHQpe3RoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQodD4+PjI0JjI1NSksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoMTY3MTE2ODAmdCk+Pj4xNiksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNjUyODAmdCk+Pj44KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKDI1NSZ0KX0sbi5wcm90b3R5cGUucGFja19pbnQ2ND1mdW5jdGlvbih0KXt2YXIgZT1NYXRoLmZsb29yKHQvTWF0aC5wb3coMiwzMikpLGk9dCVNYXRoLnBvdygyLDMyKTt0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg0Mjc4MTkwMDgwJmUpPj4+MjQpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDE2NzExNjgwJmUpPj4+MTYpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoKDY1MjgwJmUpPj4+OCksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgyNTUmZSksdGhpcy5idWZmZXJCdWlsZGVyLmFwcGVuZCgoNDI3ODE5MDA4MCZpKT4+PjI0KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCgxNjcxMTY4MCZpKT4+PjE2KSx0aGlzLmJ1ZmZlckJ1aWxkZXIuYXBwZW5kKCg2NTI4MCZpKT4+PjgpLHRoaXMuYnVmZmVyQnVpbGRlci5hcHBlbmQoMjU1JmkpfTtcbn0se1wiLi9idWZmZXJidWlsZGVyXCI6XCJFZ0JoXCJ9XSxcImlTeENcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlLHQsbil7cmV0dXJuIHQgaW4gZT9PYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6ZVt0XT1uLGV9ZnVuY3Rpb24gdChlKXtyZXR1cm4odD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5leHRyYWN0VmVyc2lvbj1vLGV4cG9ydHMud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQ9aSxleHBvcnRzLmRpc2FibGVMb2c9cyxleHBvcnRzLmRpc2FibGVXYXJuaW5ncz1hLGV4cG9ydHMubG9nPXAsZXhwb3J0cy5kZXByZWNhdGVkPXUsZXhwb3J0cy5kZXRlY3RCcm93c2VyPWMsZXhwb3J0cy5jb21wYWN0T2JqZWN0PWYsZXhwb3J0cy53YWxrU3RhdHM9bCxleHBvcnRzLmZpbHRlclN0YXRzPXY7dmFyIG49ITAscj0hMDtmdW5jdGlvbiBvKGUsdCxuKXt2YXIgcj1lLm1hdGNoKHQpO3JldHVybiByJiZyLmxlbmd0aD49biYmcGFyc2VJbnQocltuXSwxMCl9ZnVuY3Rpb24gaShlLHQsbil7aWYoZS5SVENQZWVyQ29ubmVjdGlvbil7dmFyIHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsbz1yLmFkZEV2ZW50TGlzdGVuZXI7ci5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGUscil7aWYoZSE9PXQpcmV0dXJuIG8uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciB0PW4oZSk7dCYmKHIuaGFuZGxlRXZlbnQ/ci5oYW5kbGVFdmVudCh0KTpyKHQpKX07cmV0dXJuIHRoaXMuX2V2ZW50TWFwPXRoaXMuX2V2ZW50TWFwfHx7fSx0aGlzLl9ldmVudE1hcFt0XXx8KHRoaXMuX2V2ZW50TWFwW3RdPW5ldyBNYXApLHRoaXMuX2V2ZW50TWFwW3RdLnNldChyLGkpLG8uYXBwbHkodGhpcyxbZSxpXSl9O3ZhciBpPXIucmVtb3ZlRXZlbnRMaXN0ZW5lcjtyLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oZSxuKXtpZihlIT09dHx8IXRoaXMuX2V2ZW50TWFwfHwhdGhpcy5fZXZlbnRNYXBbdF0pcmV0dXJuIGkuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCF0aGlzLl9ldmVudE1hcFt0XS5oYXMobikpcmV0dXJuIGkuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciByPXRoaXMuX2V2ZW50TWFwW3RdLmdldChuKTtyZXR1cm4gdGhpcy5fZXZlbnRNYXBbdF0uZGVsZXRlKG4pLDA9PT10aGlzLl9ldmVudE1hcFt0XS5zaXplJiZkZWxldGUgdGhpcy5fZXZlbnRNYXBbdF0sMD09PU9iamVjdC5rZXlzKHRoaXMuX2V2ZW50TWFwKS5sZW5ndGgmJmRlbGV0ZSB0aGlzLl9ldmVudE1hcCxpLmFwcGx5KHRoaXMsW2Uscl0pfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIm9uXCIrdCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbXCJfb25cIit0XX0sc2V0OmZ1bmN0aW9uKGUpe3RoaXNbXCJfb25cIit0XSYmKHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LHRoaXNbXCJfb25cIit0XSksZGVsZXRlIHRoaXNbXCJfb25cIit0XSksZSYmdGhpcy5hZGRFdmVudExpc3RlbmVyKHQsdGhpc1tcIl9vblwiK3RdPWUpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfX1mdW5jdGlvbiBzKGUpe3JldHVyblwiYm9vbGVhblwiIT10eXBlb2YgZT9uZXcgRXJyb3IoXCJBcmd1bWVudCB0eXBlOiBcIit0KGUpK1wiLiBQbGVhc2UgdXNlIGEgYm9vbGVhbi5cIik6KG49ZSxlP1wiYWRhcHRlci5qcyBsb2dnaW5nIGRpc2FibGVkXCI6XCJhZGFwdGVyLmpzIGxvZ2dpbmcgZW5hYmxlZFwiKX1mdW5jdGlvbiBhKGUpe3JldHVyblwiYm9vbGVhblwiIT10eXBlb2YgZT9uZXcgRXJyb3IoXCJBcmd1bWVudCB0eXBlOiBcIit0KGUpK1wiLiBQbGVhc2UgdXNlIGEgYm9vbGVhbi5cIik6KHI9IWUsXCJhZGFwdGVyLmpzIGRlcHJlY2F0aW9uIHdhcm5pbmdzIFwiKyhlP1wiZGlzYWJsZWRcIjpcImVuYWJsZWRcIikpfWZ1bmN0aW9uIHAoKXtpZihcIm9iamVjdFwiPT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3c/XCJ1bmRlZmluZWRcIjp0KHdpbmRvdykpKXtpZihuKXJldHVybjtcInVuZGVmaW5lZFwiIT10eXBlb2YgY29uc29sZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgY29uc29sZS5sb2cmJmNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKX19ZnVuY3Rpb24gdShlLHQpe3ImJmNvbnNvbGUud2FybihlK1wiIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgXCIrdCtcIiBpbnN0ZWFkLlwiKX1mdW5jdGlvbiBjKGUpe3ZhciB0PXticm93c2VyOm51bGwsdmVyc2lvbjpudWxsfTtpZih2b2lkIDA9PT1lfHwhZS5uYXZpZ2F0b3IpcmV0dXJuIHQuYnJvd3Nlcj1cIk5vdCBhIGJyb3dzZXIuXCIsdDt2YXJ7bmF2aWdhdG9yOm59PWU7aWYobi5tb3pHZXRVc2VyTWVkaWEpdC5icm93c2VyPVwiZmlyZWZveFwiLHQudmVyc2lvbj1vKG4udXNlckFnZW50LC9GaXJlZm94XFwvKFxcZCspXFwuLywxKTtlbHNlIGlmKG4ud2Via2l0R2V0VXNlck1lZGlhfHwhMT09PWUuaXNTZWN1cmVDb250ZXh0JiZlLndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uJiYhZS5SVENJY2VHYXRoZXJlcil0LmJyb3dzZXI9XCJjaHJvbWVcIix0LnZlcnNpb249byhuLnVzZXJBZ2VudCwvQ2hyb20oZXxpdW0pXFwvKFxcZCspXFwuLywyKTtlbHNlIGlmKG4ubWVkaWFEZXZpY2VzJiZuLnVzZXJBZ2VudC5tYXRjaCgvRWRnZVxcLyhcXGQrKS4oXFxkKykkLykpdC5icm93c2VyPVwiZWRnZVwiLHQudmVyc2lvbj1vKG4udXNlckFnZW50LC9FZGdlXFwvKFxcZCspLihcXGQrKSQvLDIpO2Vsc2V7aWYoIWUuUlRDUGVlckNvbm5lY3Rpb258fCFuLnVzZXJBZ2VudC5tYXRjaCgvQXBwbGVXZWJLaXRcXC8oXFxkKylcXC4vKSlyZXR1cm4gdC5icm93c2VyPVwiTm90IGEgc3VwcG9ydGVkIGJyb3dzZXIuXCIsdDt0LmJyb3dzZXI9XCJzYWZhcmlcIix0LnZlcnNpb249byhuLnVzZXJBZ2VudCwvQXBwbGVXZWJLaXRcXC8oXFxkKylcXC4vLDEpLHQuc3VwcG9ydHNVbmlmaWVkUGxhbj1lLlJUQ1J0cFRyYW5zY2VpdmVyJiZcImN1cnJlbnREaXJlY3Rpb25cImluIGUuUlRDUnRwVHJhbnNjZWl2ZXIucHJvdG90eXBlfXJldHVybiB0fWZ1bmN0aW9uIGQoZSl7cmV0dXJuXCJbb2JqZWN0IE9iamVjdF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX1mdW5jdGlvbiBmKHQpe3JldHVybiBkKHQpP09iamVjdC5rZXlzKHQpLnJlZHVjZShmdW5jdGlvbihuLHIpe3ZhciBvPWQodFtyXSksaT1vP2YodFtyXSk6dFtyXSxzPW8mJiFPYmplY3Qua2V5cyhpKS5sZW5ndGg7cmV0dXJuIHZvaWQgMD09PWl8fHM/bjpPYmplY3QuYXNzaWduKG4sZSh7fSxyLGkpKX0se30pOnR9ZnVuY3Rpb24gbChlLHQsbil7dCYmIW4uaGFzKHQuaWQpJiYobi5zZXQodC5pZCx0KSxPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3IuZW5kc1dpdGgoXCJJZFwiKT9sKGUsZS5nZXQodFtyXSksbik6ci5lbmRzV2l0aChcIklkc1wiKSYmdFtyXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2woZSxlLmdldCh0KSxuKX0pfSkpfWZ1bmN0aW9uIHYoZSx0LG4pe3ZhciByPW4/XCJvdXRib3VuZC1ydHBcIjpcImluYm91bmQtcnRwXCIsbz1uZXcgTWFwO2lmKG51bGw9PT10KXJldHVybiBvO3ZhciBpPVtdO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7XCJ0cmFja1wiPT09ZS50eXBlJiZlLnRyYWNrSWRlbnRpZmllcj09PXQuaWQmJmkucHVzaChlKX0pLGkuZm9yRWFjaChmdW5jdGlvbih0KXtlLmZvckVhY2goZnVuY3Rpb24obil7bi50eXBlPT09ciYmbi50cmFja0lkPT09dC5pZCYmbChlLG4sbyl9KX0pLG99XG59LHt9XSxcInM2U05cIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltR2V0VXNlck1lZGlhPWk7dmFyIGU9dChyZXF1aXJlKFwiLi4vdXRpbHMuanNcIikpO2Z1bmN0aW9uIHIoKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciBlPW5ldyBXZWFrTWFwO3JldHVybiByPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9ZnVuY3Rpb24gdChlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXJldHVybntkZWZhdWx0OmV9O3ZhciB0PXIoKTtpZih0JiZ0LmhhcyhlKSlyZXR1cm4gdC5nZXQoZSk7dmFyIG89e30sbj1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7Zm9yKHZhciBpIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkpe3ZhciBhPW4/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGkpOm51bGw7YSYmKGEuZ2V0fHxhLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KG8saSxhKTpvW2ldPWVbaV19cmV0dXJuIG8uZGVmYXVsdD1lLHQmJnQuc2V0KGUsbyksb31mdW5jdGlvbiBvKGUpe3JldHVybihvPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX12YXIgbj1lLmxvZztmdW5jdGlvbiBpKGUscil7dmFyIHQ9ZSYmZS5uYXZpZ2F0b3I7aWYodC5tZWRpYURldmljZXMpe3ZhciBpPWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCIhPT1vKGUpfHxlLm1hbmRhdG9yeXx8ZS5vcHRpb25hbClyZXR1cm4gZTt2YXIgcj17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbih0KXtpZihcInJlcXVpcmVcIiE9PXQmJlwiYWR2YW5jZWRcIiE9PXQmJlwibWVkaWFTb3VyY2VcIiE9PXQpe3ZhciBuPVwib2JqZWN0XCI9PT1vKGVbdF0pP2VbdF06e2lkZWFsOmVbdF19O3ZvaWQgMCE9PW4uZXhhY3QmJlwibnVtYmVyXCI9PXR5cGVvZiBuLmV4YWN0JiYobi5taW49bi5tYXg9bi5leGFjdCk7dmFyIGk9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gZT9lK3IuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrci5zbGljZSgxKTpcImRldmljZUlkXCI9PT1yP1wic291cmNlSWRcIjpyfTtpZih2b2lkIDAhPT1uLmlkZWFsKXtyLm9wdGlvbmFsPXIub3B0aW9uYWx8fFtdO3ZhciBhPXt9O1wibnVtYmVyXCI9PXR5cGVvZiBuLmlkZWFsPyhhW2koXCJtaW5cIix0KV09bi5pZGVhbCxyLm9wdGlvbmFsLnB1c2goYSksKGE9e30pW2koXCJtYXhcIix0KV09bi5pZGVhbCxyLm9wdGlvbmFsLnB1c2goYSkpOihhW2koXCJcIix0KV09bi5pZGVhbCxyLm9wdGlvbmFsLnB1c2goYSkpfXZvaWQgMCE9PW4uZXhhY3QmJlwibnVtYmVyXCIhPXR5cGVvZiBuLmV4YWN0PyhyLm1hbmRhdG9yeT1yLm1hbmRhdG9yeXx8e30sci5tYW5kYXRvcnlbaShcIlwiLHQpXT1uLmV4YWN0KTpbXCJtaW5cIixcIm1heFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZvaWQgMCE9PW5bZV0mJihyLm1hbmRhdG9yeT1yLm1hbmRhdG9yeXx8e30sci5tYW5kYXRvcnlbaShlLHQpXT1uW2VdKX0pfX0pLGUuYWR2YW5jZWQmJihyLm9wdGlvbmFsPShyLm9wdGlvbmFsfHxbXSkuY29uY2F0KGUuYWR2YW5jZWQpKSxyfSxhPWZ1bmN0aW9uKGUsYSl7aWYoci52ZXJzaW9uPj02MSlyZXR1cm4gYShlKTtpZigoZT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKSkmJlwib2JqZWN0XCI9PT1vKGUuYXVkaW8pKXt2YXIgYz1mdW5jdGlvbihlLHIsdCl7ciBpbiBlJiYhKHQgaW4gZSkmJihlW3RdPWVbcl0sZGVsZXRlIGVbcl0pfTtjKChlPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpKS5hdWRpbyxcImF1dG9HYWluQ29udHJvbFwiLFwiZ29vZ0F1dG9HYWluQ29udHJvbFwiKSxjKGUuYXVkaW8sXCJub2lzZVN1cHByZXNzaW9uXCIsXCJnb29nTm9pc2VTdXBwcmVzc2lvblwiKSxlLmF1ZGlvPWkoZS5hdWRpbyl9aWYoZSYmXCJvYmplY3RcIj09PW8oZS52aWRlbykpe3ZhciBkPWUudmlkZW8uZmFjaW5nTW9kZTtkPWQmJihcIm9iamVjdFwiPT09byhkKT9kOntpZGVhbDpkfSk7dmFyIHUscz1yLnZlcnNpb248NjY7aWYoZCYmKFwidXNlclwiPT09ZC5leGFjdHx8XCJlbnZpcm9ubWVudFwiPT09ZC5leGFjdHx8XCJ1c2VyXCI9PT1kLmlkZWFsfHxcImVudmlyb25tZW50XCI9PT1kLmlkZWFsKSYmKCF0Lm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50c3x8IXQubWVkaWFEZXZpY2VzLmdldFN1cHBvcnRlZENvbnN0cmFpbnRzKCkuZmFjaW5nTW9kZXx8cykpaWYoZGVsZXRlIGUudmlkZW8uZmFjaW5nTW9kZSxcImVudmlyb25tZW50XCI9PT1kLmV4YWN0fHxcImVudmlyb25tZW50XCI9PT1kLmlkZWFsP3U9W1wiYmFja1wiLFwicmVhclwiXTpcInVzZXJcIiE9PWQuZXhhY3QmJlwidXNlclwiIT09ZC5pZGVhbHx8KHU9W1wiZnJvbnRcIl0pLHUpcmV0dXJuIHQubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKS50aGVuKGZ1bmN0aW9uKHIpe3ZhciB0PShyPXIuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwidmlkZW9pbnB1dFwiPT09ZS5raW5kfSkpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIHUuc29tZShmdW5jdGlvbihyKXtyZXR1cm4gZS5sYWJlbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHIpfSl9KTtyZXR1cm4hdCYmci5sZW5ndGgmJnUuaW5jbHVkZXMoXCJiYWNrXCIpJiYodD1yW3IubGVuZ3RoLTFdKSx0JiYoZS52aWRlby5kZXZpY2VJZD1kLmV4YWN0P3tleGFjdDp0LmRldmljZUlkfTp7aWRlYWw6dC5kZXZpY2VJZH0pLGUudmlkZW89aShlLnZpZGVvKSxuKFwiY2hyb21lOiBcIitKU09OLnN0cmluZ2lmeShlKSksYShlKX0pO2UudmlkZW89aShlLnZpZGVvKX1yZXR1cm4gbihcImNocm9tZTogXCIrSlNPTi5zdHJpbmdpZnkoZSkpLGEoZSl9LGM9ZnVuY3Rpb24oZSl7cmV0dXJuIHIudmVyc2lvbj49NjQ/ZTp7bmFtZTp7UGVybWlzc2lvbkRlbmllZEVycm9yOlwiTm90QWxsb3dlZEVycm9yXCIsUGVybWlzc2lvbkRpc21pc3NlZEVycm9yOlwiTm90QWxsb3dlZEVycm9yXCIsSW52YWxpZFN0YXRlRXJyb3I6XCJOb3RBbGxvd2VkRXJyb3JcIixEZXZpY2VzTm90Rm91bmRFcnJvcjpcIk5vdEZvdW5kRXJyb3JcIixDb25zdHJhaW50Tm90U2F0aXNmaWVkRXJyb3I6XCJPdmVyY29uc3RyYWluZWRFcnJvclwiLFRyYWNrU3RhcnRFcnJvcjpcIk5vdFJlYWRhYmxlRXJyb3JcIixNZWRpYURldmljZUZhaWxlZER1ZVRvU2h1dGRvd246XCJOb3RBbGxvd2VkRXJyb3JcIixNZWRpYURldmljZUtpbGxTd2l0Y2hPbjpcIk5vdEFsbG93ZWRFcnJvclwiLFRhYkNhcHR1cmVFcnJvcjpcIkFib3J0RXJyb3JcIixTY3JlZW5DYXB0dXJlRXJyb3I6XCJBYm9ydEVycm9yXCIsRGV2aWNlQ2FwdHVyZUVycm9yOlwiQWJvcnRFcnJvclwifVtlLm5hbWVdfHxlLm5hbWUsbWVzc2FnZTplLm1lc3NhZ2UsY29uc3RyYWludDplLmNvbnN0cmFpbnR8fGUuY29uc3RyYWludE5hbWUsdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lKyh0aGlzLm1lc3NhZ2UmJlwiOiBcIikrdGhpcy5tZXNzYWdlfX19O2lmKHQuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKGUscixvKXthKGUsZnVuY3Rpb24oZSl7dC53ZWJraXRHZXRVc2VyTWVkaWEoZSxyLGZ1bmN0aW9uKGUpe28mJm8oYyhlKSl9KX0pfS5iaW5kKHQpLHQubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSl7dmFyIGQ9dC5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLmJpbmQodC5tZWRpYURldmljZXMpO3QubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYT1mdW5jdGlvbihlKXtyZXR1cm4gYShlLGZ1bmN0aW9uKGUpe3JldHVybiBkKGUpLnRoZW4oZnVuY3Rpb24ocil7aWYoZS5hdWRpbyYmIXIuZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGh8fGUudmlkZW8mJiFyLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoKXRocm93IHIuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0b3AoKX0pLG5ldyBET01FeGNlcHRpb24oXCJcIixcIk5vdEZvdW5kRXJyb3JcIik7cmV0dXJuIHJ9LGZ1bmN0aW9uKGUpe3JldHVybiBQcm9taXNlLnJlamVjdChjKGUpKX0pfSl9fX19XG59LHtcIi4uL3V0aWxzLmpzXCI6XCJpU3hDXCJ9XSxcIlZIYThcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlLGkpe2UubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmXCJnZXREaXNwbGF5TWVkaWFcImluIGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlc3x8ZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiYoXCJmdW5jdGlvblwiPT10eXBlb2YgaT9lLm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhPWZ1bmN0aW9uKGEpe3JldHVybiBpKGEpLnRoZW4oZnVuY3Rpb24oaSl7dmFyIHQ9YS52aWRlbyYmYS52aWRlby53aWR0aCxvPWEudmlkZW8mJmEudmlkZW8uaGVpZ2h0LGQ9YS52aWRlbyYmYS52aWRlby5mcmFtZVJhdGU7cmV0dXJuIGEudmlkZW89e21hbmRhdG9yeTp7Y2hyb21lTWVkaWFTb3VyY2U6XCJkZXNrdG9wXCIsY2hyb21lTWVkaWFTb3VyY2VJZDppLG1heEZyYW1lUmF0ZTpkfHwzfX0sdCYmKGEudmlkZW8ubWFuZGF0b3J5Lm1heFdpZHRoPXQpLG8mJihhLnZpZGVvLm1hbmRhdG9yeS5tYXhIZWlnaHQ9byksZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShhKX0pfTpjb25zb2xlLmVycm9yKFwic2hpbUdldERpc3BsYXlNZWRpYTogZ2V0U291cmNlSWQgYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb25cIikpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuc2hpbUdldERpc3BsYXlNZWRpYT1lO1xufSx7fV0sXCJ1STVYXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuc2hpbU1lZGlhU3RyZWFtPWEsZXhwb3J0cy5zaGltT25UcmFjaz1jLGV4cG9ydHMuc2hpbUdldFNlbmRlcnNXaXRoRHRtZj1wLGV4cG9ydHMuc2hpbUdldFN0YXRzPWQsZXhwb3J0cy5zaGltU2VuZGVyUmVjZWl2ZXJHZXRTdGF0cz1oLGV4cG9ydHMuc2hpbUFkZFRyYWNrUmVtb3ZlVHJhY2tXaXRoTmF0aXZlPWYsZXhwb3J0cy5zaGltQWRkVHJhY2tSZW1vdmVUcmFjaz1tLGV4cG9ydHMuc2hpbVBlZXJDb25uZWN0aW9uPXUsZXhwb3J0cy5maXhOZWdvdGlhdGlvbk5lZWRlZD1sLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwic2hpbUdldFVzZXJNZWRpYVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0LnNoaW1HZXRVc2VyTWVkaWF9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJzaGltR2V0RGlzcGxheU1lZGlhXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHIuc2hpbUdldERpc3BsYXlNZWRpYX19KTt2YXIgZT1pKHJlcXVpcmUoXCIuLi91dGlscy5qc1wiKSksdD1yZXF1aXJlKFwiLi9nZXR1c2VybWVkaWFcIikscj1yZXF1aXJlKFwiLi9nZXRkaXNwbGF5bWVkaWFcIik7ZnVuY3Rpb24gbigpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuIG51bGw7dmFyIGU9bmV3IFdlYWtNYXA7cmV0dXJuIG49ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX1mdW5jdGlvbiBpKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTtpZihudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpcmV0dXJue2RlZmF1bHQ6ZX07dmFyIHQ9bigpO2lmKHQmJnQuaGFzKGUpKXJldHVybiB0LmdldChlKTt2YXIgcj17fSxpPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtmb3IodmFyIG8gaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxvKSl7dmFyIHM9aT9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbyk6bnVsbDtzJiYocy5nZXR8fHMuc2V0KT9PYmplY3QuZGVmaW5lUHJvcGVydHkocixvLHMpOnJbb109ZVtvXX1yZXR1cm4gci5kZWZhdWx0PWUsdCYmdC5zZXQoZSxyKSxyfWZ1bmN0aW9uIG8oZSx0LHIpe3JldHVybiB0IGluIGU/T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6cixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09cixlfWZ1bmN0aW9uIHMoZSl7cmV0dXJuKHM9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIGEoZSl7ZS5NZWRpYVN0cmVhbT1lLk1lZGlhU3RyZWFtfHxlLndlYmtpdE1lZGlhU3RyZWFtfWZ1bmN0aW9uIGModCl7aWYoXCJvYmplY3RcIiE9PXModCl8fCF0LlJUQ1BlZXJDb25uZWN0aW9ufHxcIm9udHJhY2tcImluIHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKWUud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQodCxcInRyYWNrXCIsZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJhbnNjZWl2ZXJ8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwidHJhbnNjZWl2ZXJcIix7dmFsdWU6e3JlY2VpdmVyOmUucmVjZWl2ZXJ9fSksZX0pO2Vsc2V7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLFwib250cmFja1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb250cmFja30sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX29udHJhY2smJnRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYWNrXCIsdGhpcy5fb250cmFjayksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwidHJhY2tcIix0aGlzLl9vbnRyYWNrPWUpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pO3ZhciByPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO3QuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5fb250cmFja3BvbHl8fCh0aGlzLl9vbnRyYWNrcG9seT1mdW5jdGlvbihyKXtyLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwiYWRkdHJhY2tcIixmdW5jdGlvbihuKXt2YXIgaTtpPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycz9lLmdldFJlY2VpdmVycygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJhY2smJmUudHJhY2suaWQ9PT1uLnRyYWNrLmlkfSk6e3RyYWNrOm4udHJhY2t9O3ZhciBvPW5ldyBFdmVudChcInRyYWNrXCIpO28udHJhY2s9bi50cmFjayxvLnJlY2VpdmVyPWksby50cmFuc2NlaXZlcj17cmVjZWl2ZXI6aX0sby5zdHJlYW1zPVtyLnN0cmVhbV0sZS5kaXNwYXRjaEV2ZW50KG8pfSksci5zdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgaTtpPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycz9lLmdldFJlY2VpdmVycygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJhY2smJmUudHJhY2suaWQ9PT1uLmlkfSk6e3RyYWNrOm59O3ZhciBvPW5ldyBFdmVudChcInRyYWNrXCIpO28udHJhY2s9bixvLnJlY2VpdmVyPWksby50cmFuc2NlaXZlcj17cmVjZWl2ZXI6aX0sby5zdHJlYW1zPVtyLnN0cmVhbV0sZS5kaXNwYXRjaEV2ZW50KG8pfSl9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImFkZHN0cmVhbVwiLHRoaXMuX29udHJhY2twb2x5KSksci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX1mdW5jdGlvbiBwKGUpe2lmKFwib2JqZWN0XCI9PT1zKGUpJiZlLlJUQ1BlZXJDb25uZWN0aW9uJiYhKFwiZ2V0U2VuZGVyc1wiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpJiZcImNyZWF0ZURUTUZTZW5kZXJcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKXt2YXIgdD1mdW5jdGlvbihlLHQpe3JldHVybnt0cmFjazp0LGdldCBkdG1mKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuX2R0bWYmJihcImF1ZGlvXCI9PT10LmtpbmQ/dGhpcy5fZHRtZj1lLmNyZWF0ZURUTUZTZW5kZXIodCk6dGhpcy5fZHRtZj1udWxsKSx0aGlzLl9kdG1mfSxfcGM6ZX19O2lmKCFlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzKXtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlbmRlcnM9dGhpcy5fc2VuZGVyc3x8W10sdGhpcy5fc2VuZGVycy5zbGljZSgpfTt2YXIgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaz1mdW5jdGlvbihlLG4pe3ZhciBpPXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBpfHwoaT10KHRoaXMsZSksdGhpcy5fc2VuZGVycy5wdXNoKGkpKSxpfTt2YXIgbj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjaztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjaz1mdW5jdGlvbihlKXtuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgdD10aGlzLl9zZW5kZXJzLmluZGV4T2YoZSk7LTEhPT10JiZ0aGlzLl9zZW5kZXJzLnNwbGljZSh0LDEpfX12YXIgaT1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKGUpe3ZhciByPXRoaXM7dGhpcy5fc2VuZGVycz10aGlzLl9zZW5kZXJzfHxbXSxpLmFwcGx5KHRoaXMsW2VdKSxlLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24oZSl7ci5fc2VuZGVycy5wdXNoKHQocixlKSl9KX07dmFyIG89ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX3NlbmRlcnM9dGhpcy5fc2VuZGVyc3x8W10sby5hcHBseSh0aGlzLFtlXSksZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciByPXQuX3NlbmRlcnMuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmFjaz09PWV9KTtyJiZ0Ll9zZW5kZXJzLnNwbGljZSh0Ll9zZW5kZXJzLmluZGV4T2YociksMSl9KX19ZWxzZSBpZihcIm9iamVjdFwiPT09cyhlKSYmZS5SVENQZWVyQ29ubmVjdGlvbiYmXCJnZXRTZW5kZXJzXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSYmXCJjcmVhdGVEVE1GU2VuZGVyXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSYmZS5SVENSdHBTZW5kZXImJiEoXCJkdG1mXCJpbiBlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpKXt2YXIgYT1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9YS5hcHBseSh0aGlzLFtdKTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0Ll9wYz1lfSksdH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSxcImR0bWZcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuX2R0bWYmJihcImF1ZGlvXCI9PT10aGlzLnRyYWNrLmtpbmQ/dGhpcy5fZHRtZj10aGlzLl9wYy5jcmVhdGVEVE1GU2VuZGVyKHRoaXMudHJhY2spOnRoaXMuX2R0bWY9bnVsbCksdGhpcy5fZHRtZn19KX19ZnVuY3Rpb24gZChlKXtpZihlLlJUQ1BlZXJDb25uZWN0aW9uKXt2YXIgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsW3IsbixpXT1hcmd1bWVudHM7aWYoYXJndW1lbnRzLmxlbmd0aD4wJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiByKXJldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZigwPT09dC5sZW5ndGgmJigwPT09YXJndW1lbnRzLmxlbmd0aHx8XCJmdW5jdGlvblwiIT10eXBlb2YgcikpcmV0dXJuIHQuYXBwbHkodGhpcyxbXSk7dmFyIG89ZnVuY3Rpb24oZSl7dmFyIHQ9e307cmV0dXJuIGUucmVzdWx0KCkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj17aWQ6ZS5pZCx0aW1lc3RhbXA6ZS50aW1lc3RhbXAsdHlwZTp7bG9jYWxjYW5kaWRhdGU6XCJsb2NhbC1jYW5kaWRhdGVcIixyZW1vdGVjYW5kaWRhdGU6XCJyZW1vdGUtY2FuZGlkYXRlXCJ9W2UudHlwZV18fGUudHlwZX07ZS5uYW1lcygpLmZvckVhY2goZnVuY3Rpb24odCl7clt0XT1lLnN0YXQodCl9KSx0W3IuaWRdPXJ9KSx0fSxzPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgTWFwKE9iamVjdC5rZXlzKGUpLm1hcChmdW5jdGlvbih0KXtyZXR1cm5bdCxlW3RdXX0pKX07aWYoYXJndW1lbnRzLmxlbmd0aD49Mil7cmV0dXJuIHQuYXBwbHkodGhpcyxbZnVuY3Rpb24oZSl7bihzKG8oZSkpKX0scl0pfXJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyLG4pe3QuYXBwbHkoZSxbZnVuY3Rpb24oZSl7cihzKG8oZSkpKX0sbl0pfSkudGhlbihuLGkpfX19ZnVuY3Rpb24gaCh0KXtpZihcIm9iamVjdFwiPT09cyh0KSYmdC5SVENQZWVyQ29ubmVjdGlvbiYmdC5SVENSdHBTZW5kZXImJnQuUlRDUnRwUmVjZWl2ZXIpe2lmKCEoXCJnZXRTdGF0c1wiaW4gdC5SVENSdHBTZW5kZXIucHJvdG90eXBlKSl7dmFyIHI9dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycztyJiYodC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1yLmFwcGx5KHRoaXMsW10pO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuX3BjPWV9KSx0fSk7dmFyIG49dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7biYmKHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrPWZ1bmN0aW9uKCl7dmFyIGU9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGUuX3BjPXRoaXMsZX0pLHQuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuX3BjLmdldFN0YXRzKCkudGhlbihmdW5jdGlvbihyKXtyZXR1cm4gZS5maWx0ZXJTdGF0cyhyLHQudHJhY2ssITApfSl9fWlmKCEoXCJnZXRTdGF0c1wiaW4gdC5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUpKXt2YXIgaT10LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM7aSYmKHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1pLmFwcGx5KHRoaXMsW10pO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuX3BjPWV9KSx0fSksZS53cmFwUGVlckNvbm5lY3Rpb25FdmVudCh0LFwidHJhY2tcIixmdW5jdGlvbihlKXtyZXR1cm4gZS5yZWNlaXZlci5fcGM9ZS5zcmNFbGVtZW50LGV9KSx0LlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuX3BjLmdldFN0YXRzKCkudGhlbihmdW5jdGlvbihyKXtyZXR1cm4gZS5maWx0ZXJTdGF0cyhyLHQudHJhY2ssITEpfSl9fWlmKFwiZ2V0U3RhdHNcImluIHQuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSYmXCJnZXRTdGF0c1wiaW4gdC5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUpe3ZhciBvPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzO3QuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIHQuTWVkaWFTdHJlYW1UcmFjayl7dmFyIGUscixuLGk9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmdldFNlbmRlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QudHJhY2s9PT1pJiYoZT9uPSEwOmU9dCl9KSx0aGlzLmdldFJlY2VpdmVycygpLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJhY2s9PT1pJiYocj9uPSEwOnI9ZSksZS50cmFjaz09PWl9KSxufHxlJiZyP1Byb21pc2UucmVqZWN0KG5ldyBET01FeGNlcHRpb24oXCJUaGVyZSBhcmUgbW9yZSB0aGFuIG9uZSBzZW5kZXIgb3IgcmVjZWl2ZXIgZm9yIHRoZSB0cmFjay5cIixcIkludmFsaWRBY2Nlc3NFcnJvclwiKSk6ZT9lLmdldFN0YXRzKCk6cj9yLmdldFN0YXRzKCk6UHJvbWlzZS5yZWplY3QobmV3IERPTUV4Y2VwdGlvbihcIlRoZXJlIGlzIG5vIHNlbmRlciBvciByZWNlaXZlciBmb3IgdGhlIHRyYWNrLlwiLFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIpKX1yZXR1cm4gby5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX19ZnVuY3Rpb24gZihlKXtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zPXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXN8fHt9LE9iamVjdC5rZXlzKHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZS5fc2hpbW1lZExvY2FsU3RyZWFtc1t0XVswXX0pfTt2YXIgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaz1mdW5jdGlvbihlLHIpe2lmKCFyKXJldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zPXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXN8fHt9O3ZhciBuPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3IuaWRdPy0xPT09dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tyLmlkXS5pbmRleE9mKG4pJiZ0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3IuaWRdLnB1c2gobik6dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tyLmlkXT1bcixuXSxufTt2YXIgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcz10aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zfHx7fSxlLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24oZSl7aWYodC5nZXRTZW5kZXJzKCkuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmFjaz09PWV9KSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiVHJhY2sgYWxyZWFkeSBleGlzdHMuXCIsXCJJbnZhbGlkQWNjZXNzRXJyb3JcIil9KTt2YXIgbj10aGlzLmdldFNlbmRlcnMoKTtyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgaT10aGlzLmdldFNlbmRlcnMoKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1uLmluZGV4T2YoZSl9KTt0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW2UuaWRdPVtlXS5jb25jYXQoaSl9O3ZhciBuPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbTtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXM9dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc3x8e30sZGVsZXRlIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbZS5pZF0sbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3ZhciBpPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXM9dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc3x8e30sZSYmT2JqZWN0LmtleXModGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcykuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgbj10Ll9zaGltbWVkTG9jYWxTdHJlYW1zW3JdLmluZGV4T2YoZSk7LTEhPT1uJiZ0Ll9zaGltbWVkTG9jYWxTdHJlYW1zW3JdLnNwbGljZShuLDEpLDE9PT10Ll9zaGltbWVkTG9jYWxTdHJlYW1zW3JdLmxlbmd0aCYmZGVsZXRlIHQuX3NoaW1tZWRMb2NhbFN0cmVhbXNbcl19KSxpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19ZnVuY3Rpb24gbShlLHQpe2lmKGUuUlRDUGVlckNvbm5lY3Rpb24pe2lmKGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrJiZ0LnZlcnNpb24+PTY1KXJldHVybiBmKGUpO3ZhciByPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ci5hcHBseSh0aGlzKTtyZXR1cm4gdGhpcy5fcmV2ZXJzZVN0cmVhbXM9dGhpcy5fcmV2ZXJzZVN0cmVhbXN8fHt9LHQubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9yZXZlcnNlU3RyZWFtc1t0LmlkXX0pfTt2YXIgbj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXM7aWYodGhpcy5fc3RyZWFtcz10aGlzLl9zdHJlYW1zfHx7fSx0aGlzLl9yZXZlcnNlU3RyZWFtcz10aGlzLl9yZXZlcnNlU3RyZWFtc3x8e30sdC5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKHIuZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJhY2s9PT1lfSkpdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIlRyYWNrIGFscmVhZHkgZXhpc3RzLlwiLFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIpfSksIXRoaXMuX3JldmVyc2VTdHJlYW1zW3QuaWRdKXt2YXIgaT1uZXcgZS5NZWRpYVN0cmVhbSh0LmdldFRyYWNrcygpKTt0aGlzLl9zdHJlYW1zW3QuaWRdPWksdGhpcy5fcmV2ZXJzZVN0cmVhbXNbaS5pZF09dCx0PWl9bi5hcHBseSh0aGlzLFt0XSl9O3ZhciBpPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbTtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oZSl7dGhpcy5fc3RyZWFtcz10aGlzLl9zdHJlYW1zfHx7fSx0aGlzLl9yZXZlcnNlU3RyZWFtcz10aGlzLl9yZXZlcnNlU3RyZWFtc3x8e30saS5hcHBseSh0aGlzLFt0aGlzLl9zdHJlYW1zW2UuaWRdfHxlXSksZGVsZXRlIHRoaXMuX3JldmVyc2VTdHJlYW1zW3RoaXMuX3N0cmVhbXNbZS5pZF0/dGhpcy5fc3RyZWFtc1tlLmlkXS5pZDplLmlkXSxkZWxldGUgdGhpcy5fc3RyZWFtc1tlLmlkXX0sZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24odCxyKXt2YXIgbj10aGlzO2lmKFwiY2xvc2VkXCI9PT10aGlzLnNpZ25hbGluZ1N0YXRlKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJUaGUgUlRDUGVlckNvbm5lY3Rpb24ncyBzaWduYWxpbmdTdGF0ZSBpcyAnY2xvc2VkJy5cIixcIkludmFsaWRTdGF0ZUVycm9yXCIpO3ZhciBpPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2lmKDEhPT1pLmxlbmd0aHx8IWlbMF0uZ2V0VHJhY2tzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9KSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiVGhlIGFkYXB0ZXIuanMgYWRkVHJhY2sgcG9seWZpbGwgb25seSBzdXBwb3J0cyBhIHNpbmdsZSAgc3RyZWFtIHdoaWNoIGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3BlY2lmaWVkIHRyYWNrLlwiLFwiTm90U3VwcG9ydGVkRXJyb3JcIik7aWYodGhpcy5nZXRTZW5kZXJzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm4gZS50cmFjaz09PXR9KSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiVHJhY2sgYWxyZWFkeSBleGlzdHMuXCIsXCJJbnZhbGlkQWNjZXNzRXJyb3JcIik7dGhpcy5fc3RyZWFtcz10aGlzLl9zdHJlYW1zfHx7fSx0aGlzLl9yZXZlcnNlU3RyZWFtcz10aGlzLl9yZXZlcnNlU3RyZWFtc3x8e307dmFyIG89dGhpcy5fc3RyZWFtc1tyLmlkXTtpZihvKW8uYWRkVHJhY2sodCksUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe24uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJuZWdvdGlhdGlvbm5lZWRlZFwiKSl9KTtlbHNle3ZhciBzPW5ldyBlLk1lZGlhU3RyZWFtKFt0XSk7dGhpcy5fc3RyZWFtc1tyLmlkXT1zLHRoaXMuX3JldmVyc2VTdHJlYW1zW3MuaWRdPXIsdGhpcy5hZGRTdHJlYW0ocyl9cmV0dXJuIHRoaXMuZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJhY2s9PT10fSl9LFtcImNyZWF0ZU9mZmVyXCIsXCJjcmVhdGVBbnN3ZXJcIl0uZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVt0XSxuPW8oe30sdCxmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1hcmd1bWVudHM7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGgmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1swXT9yLmFwcGx5KHRoaXMsW2Z1bmN0aW9uKHIpe3ZhciBuPWMoZSxyKTt0WzBdLmFwcGx5KG51bGwsW25dKX0sZnVuY3Rpb24oZSl7dFsxXSYmdFsxXS5hcHBseShudWxsLGUpfSxhcmd1bWVudHNbMl1dKTpyLmFwcGx5KHRoaXMsYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBjKGUsdCl9KX0pO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW3RdPW5bdF19KTt2YXIgcz1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb249ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCYmYXJndW1lbnRzWzBdLnR5cGU/KGFyZ3VtZW50c1swXT0oZT10aGlzLHQ9YXJndW1lbnRzWzBdLHI9dC5zZHAsT2JqZWN0LmtleXMoZS5fcmV2ZXJzZVN0cmVhbXN8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPWUuX3JldmVyc2VTdHJlYW1zW3RdLGk9ZS5fc3RyZWFtc1tuLmlkXTtyPXIucmVwbGFjZShuZXcgUmVnRXhwKG4uaWQsXCJnXCIpLGkuaWQpfSksbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTp0LnR5cGUsc2RwOnJ9KSkscy5hcHBseSh0aGlzLGFyZ3VtZW50cykpOnMuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBlLHQscn07dmFyIGE9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxcImxvY2FsRGVzY3JpcHRpb25cIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLFwibG9jYWxEZXNjcmlwdGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT1hLmdldC5hcHBseSh0aGlzKTtyZXR1cm5cIlwiPT09ZS50eXBlP2U6Yyh0aGlzLGUpfX0pLGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZihcImNsb3NlZFwiPT09dGhpcy5zaWduYWxpbmdTdGF0ZSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiVGhlIFJUQ1BlZXJDb25uZWN0aW9uJ3Mgc2lnbmFsaW5nU3RhdGUgaXMgJ2Nsb3NlZCcuXCIsXCJJbnZhbGlkU3RhdGVFcnJvclwiKTtpZighZS5fcGMpdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIkFyZ3VtZW50IDEgb2YgUlRDUGVlckNvbm5lY3Rpb24ucmVtb3ZlVHJhY2sgZG9lcyBub3QgaW1wbGVtZW50IGludGVyZmFjZSBSVENSdHBTZW5kZXIuXCIsXCJUeXBlRXJyb3JcIik7aWYoIShlLl9wYz09PXRoaXMpKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJTZW5kZXIgd2FzIG5vdCBjcmVhdGVkIGJ5IHRoaXMgY29ubmVjdGlvbi5cIixcIkludmFsaWRBY2Nlc3NFcnJvclwiKTt0aGlzLl9zdHJlYW1zPXRoaXMuX3N0cmVhbXN8fHt9LE9iamVjdC5rZXlzKHRoaXMuX3N0cmVhbXMpLmZvckVhY2goZnVuY3Rpb24obil7ci5fc3RyZWFtc1tuXS5nZXRUcmFja3MoKS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiBlLnRyYWNrPT09dH0pJiYodD1yLl9zdHJlYW1zW25dKX0pLHQmJigxPT09dC5nZXRUcmFja3MoKS5sZW5ndGg/dGhpcy5yZW1vdmVTdHJlYW0odGhpcy5fcmV2ZXJzZVN0cmVhbXNbdC5pZF0pOnQucmVtb3ZlVHJhY2soZS50cmFjayksdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcIm5lZ290aWF0aW9ubmVlZGVkXCIpKSl9fWZ1bmN0aW9uIGMoZSx0KXt2YXIgcj10LnNkcDtyZXR1cm4gT2JqZWN0LmtleXMoZS5fcmV2ZXJzZVN0cmVhbXN8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPWUuX3JldmVyc2VTdHJlYW1zW3RdLGk9ZS5fc3RyZWFtc1tuLmlkXTtyPXIucmVwbGFjZShuZXcgUmVnRXhwKGkuaWQsXCJnXCIpLG4uaWQpfSksbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTp0LnR5cGUsc2RwOnJ9KX19ZnVuY3Rpb24gdShlLHQpeyFlLlJUQ1BlZXJDb25uZWN0aW9uJiZlLndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uJiYoZS5SVENQZWVyQ29ubmVjdGlvbj1lLndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uKSxlLlJUQ1BlZXJDb25uZWN0aW9uJiZ0LnZlcnNpb248NTMmJltcInNldExvY2FsRGVzY3JpcHRpb25cIixcInNldFJlbW90ZURlc2NyaXB0aW9uXCIsXCJhZGRJY2VDYW5kaWRhdGVcIl0uZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVt0XSxuPW8oe30sdCxmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF09bmV3KFwiYWRkSWNlQ2FuZGlkYXRlXCI9PT10P2UuUlRDSWNlQ2FuZGlkYXRlOmUuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKShhcmd1bWVudHNbMF0pLHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSk7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbdF09blt0XX0pfWZ1bmN0aW9uIGwodCxyKXtlLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHQsXCJuZWdvdGlhdGlvbm5lZWRlZFwiLGZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0O2lmKCEoci52ZXJzaW9uPDcyfHx0LmdldENvbmZpZ3VyYXRpb24mJlwicGxhbi1iXCI9PT10LmdldENvbmZpZ3VyYXRpb24oKS5zZHBTZW1hbnRpY3MpfHxcInN0YWJsZVwiPT09dC5zaWduYWxpbmdTdGF0ZSlyZXR1cm4gZX0pfVxufSx7XCIuLi91dGlscy5qc1wiOlwiaVN4Q1wiLFwiLi9nZXR1c2VybWVkaWFcIjpcInM2U05cIixcIi4vZ2V0ZGlzcGxheW1lZGlhXCI6XCJWSGE4XCJ9XSxcIk5aMUNcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5maWx0ZXJJY2VTZXJ2ZXJzPW47dmFyIHI9dChyZXF1aXJlKFwiLi4vdXRpbHNcIikpO2Z1bmN0aW9uIGUoKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciByPW5ldyBXZWFrTWFwO3JldHVybiBlPWZ1bmN0aW9uKCl7cmV0dXJuIHJ9LHJ9ZnVuY3Rpb24gdChyKXtpZihyJiZyLl9fZXNNb2R1bGUpcmV0dXJuIHI7aWYobnVsbD09PXJ8fFwib2JqZWN0XCIhPXR5cGVvZiByJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiByKXJldHVybntkZWZhdWx0OnJ9O3ZhciB0PWUoKTtpZih0JiZ0LmhhcyhyKSlyZXR1cm4gdC5nZXQocik7dmFyIG49e30sdT1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7Zm9yKHZhciBpIGluIHIpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIsaSkpe3ZhciBmPXU/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyLGkpOm51bGw7ZiYmKGYuZ2V0fHxmLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KG4saSxmKTpuW2ldPXJbaV19cmV0dXJuIG4uZGVmYXVsdD1yLHQmJnQuc2V0KHIsbiksbn1mdW5jdGlvbiBuKGUsdCl7dmFyIG49ITE7cmV0dXJuKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSkpLmZpbHRlcihmdW5jdGlvbihlKXtpZihlJiYoZS51cmxzfHxlLnVybCkpe3ZhciB0PWUudXJsc3x8ZS51cmw7ZS51cmwmJiFlLnVybHMmJnIuZGVwcmVjYXRlZChcIlJUQ0ljZVNlcnZlci51cmxcIixcIlJUQ0ljZVNlcnZlci51cmxzXCIpO3ZhciB1PVwic3RyaW5nXCI9PXR5cGVvZiB0O3JldHVybiB1JiYodD1bdF0pLHQ9dC5maWx0ZXIoZnVuY3Rpb24ocil7aWYoMD09PXIuaW5kZXhPZihcInN0dW46XCIpKXJldHVybiExO3ZhciBlPXIuc3RhcnRzV2l0aChcInR1cm5cIikmJiFyLnN0YXJ0c1dpdGgoXCJ0dXJuOltcIikmJnIuaW5jbHVkZXMoXCJ0cmFuc3BvcnQ9dWRwXCIpO3JldHVybiBlJiYhbj8obj0hMCwhMCk6ZSYmIW59KSxkZWxldGUgZS51cmwsZS51cmxzPXU/dFswXTp0LCEhdC5sZW5ndGh9fSl9XG59LHtcIi4uL3V0aWxzXCI6XCJpU3hDXCJ9XSxcIllIdmhcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIHI9e2dlbmVyYXRlSWRlbnRpZmllcjpmdW5jdGlvbigpe3JldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwxMCl9fTtyLmxvY2FsQ05hbWU9ci5nZW5lcmF0ZUlkZW50aWZpZXIoKSxyLnNwbGl0TGluZXM9ZnVuY3Rpb24ocil7cmV0dXJuIHIudHJpbSgpLnNwbGl0KFwiXFxuXCIpLm1hcChmdW5jdGlvbihyKXtyZXR1cm4gci50cmltKCl9KX0sci5zcGxpdFNlY3Rpb25zPWZ1bmN0aW9uKHIpe3JldHVybiByLnNwbGl0KFwiXFxubT1cIikubWFwKGZ1bmN0aW9uKHIsZSl7cmV0dXJuKGU+MD9cIm09XCIrcjpyKS50cmltKCkrXCJcXHJcXG5cIn0pfSxyLmdldERlc2NyaXB0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PXIuc3BsaXRTZWN0aW9ucyhlKTtyZXR1cm4gdCYmdFswXX0sci5nZXRNZWRpYVNlY3Rpb25zPWZ1bmN0aW9uKGUpe3ZhciB0PXIuc3BsaXRTZWN0aW9ucyhlKTtyZXR1cm4gdC5zaGlmdCgpLHR9LHIubWF0Y2hQcmVmaXg9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gci5zcGxpdExpbmVzKGUpLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm4gMD09PXIuaW5kZXhPZih0KX0pfSxyLnBhcnNlQ2FuZGlkYXRlPWZ1bmN0aW9uKHIpe2Zvcih2YXIgZSx0PXtmb3VuZGF0aW9uOihlPTA9PT1yLmluZGV4T2YoXCJhPWNhbmRpZGF0ZTpcIik/ci5zdWJzdHJpbmcoMTIpLnNwbGl0KFwiIFwiKTpyLnN1YnN0cmluZygxMCkuc3BsaXQoXCIgXCIpKVswXSxjb21wb25lbnQ6cGFyc2VJbnQoZVsxXSwxMCkscHJvdG9jb2w6ZVsyXS50b0xvd2VyQ2FzZSgpLHByaW9yaXR5OnBhcnNlSW50KGVbM10sMTApLGlwOmVbNF0sYWRkcmVzczplWzRdLHBvcnQ6cGFyc2VJbnQoZVs1XSwxMCksdHlwZTplWzddfSxhPTg7YTxlLmxlbmd0aDthKz0yKXN3aXRjaChlW2FdKXtjYXNlXCJyYWRkclwiOnQucmVsYXRlZEFkZHJlc3M9ZVthKzFdO2JyZWFrO2Nhc2VcInJwb3J0XCI6dC5yZWxhdGVkUG9ydD1wYXJzZUludChlW2ErMV0sMTApO2JyZWFrO2Nhc2VcInRjcHR5cGVcIjp0LnRjcFR5cGU9ZVthKzFdO2JyZWFrO2Nhc2VcInVmcmFnXCI6dC51ZnJhZz1lW2ErMV0sdC51c2VybmFtZUZyYWdtZW50PWVbYSsxXTticmVhaztkZWZhdWx0OnRbZVthXV09ZVthKzFdfXJldHVybiB0fSxyLndyaXRlQ2FuZGlkYXRlPWZ1bmN0aW9uKHIpe3ZhciBlPVtdO2UucHVzaChyLmZvdW5kYXRpb24pLGUucHVzaChyLmNvbXBvbmVudCksZS5wdXNoKHIucHJvdG9jb2wudG9VcHBlckNhc2UoKSksZS5wdXNoKHIucHJpb3JpdHkpLGUucHVzaChyLmFkZHJlc3N8fHIuaXApLGUucHVzaChyLnBvcnQpO3ZhciB0PXIudHlwZTtyZXR1cm4gZS5wdXNoKFwidHlwXCIpLGUucHVzaCh0KSxcImhvc3RcIiE9PXQmJnIucmVsYXRlZEFkZHJlc3MmJnIucmVsYXRlZFBvcnQmJihlLnB1c2goXCJyYWRkclwiKSxlLnB1c2goci5yZWxhdGVkQWRkcmVzcyksZS5wdXNoKFwicnBvcnRcIiksZS5wdXNoKHIucmVsYXRlZFBvcnQpKSxyLnRjcFR5cGUmJlwidGNwXCI9PT1yLnByb3RvY29sLnRvTG93ZXJDYXNlKCkmJihlLnB1c2goXCJ0Y3B0eXBlXCIpLGUucHVzaChyLnRjcFR5cGUpKSwoci51c2VybmFtZUZyYWdtZW50fHxyLnVmcmFnKSYmKGUucHVzaChcInVmcmFnXCIpLGUucHVzaChyLnVzZXJuYW1lRnJhZ21lbnR8fHIudWZyYWcpKSxcImNhbmRpZGF0ZTpcIitlLmpvaW4oXCIgXCIpfSxyLnBhcnNlSWNlT3B0aW9ucz1mdW5jdGlvbihyKXtyZXR1cm4gci5zdWJzdHIoMTQpLnNwbGl0KFwiIFwiKX0sci5wYXJzZVJ0cE1hcD1mdW5jdGlvbihyKXt2YXIgZT1yLnN1YnN0cig5KS5zcGxpdChcIiBcIiksdD17cGF5bG9hZFR5cGU6cGFyc2VJbnQoZS5zaGlmdCgpLDEwKX07cmV0dXJuIGU9ZVswXS5zcGxpdChcIi9cIiksdC5uYW1lPWVbMF0sdC5jbG9ja1JhdGU9cGFyc2VJbnQoZVsxXSwxMCksdC5jaGFubmVscz0zPT09ZS5sZW5ndGg/cGFyc2VJbnQoZVsyXSwxMCk6MSx0Lm51bUNoYW5uZWxzPXQuY2hhbm5lbHMsdH0sci53cml0ZVJ0cE1hcD1mdW5jdGlvbihyKXt2YXIgZT1yLnBheWxvYWRUeXBlO3ZvaWQgMCE9PXIucHJlZmVycmVkUGF5bG9hZFR5cGUmJihlPXIucHJlZmVycmVkUGF5bG9hZFR5cGUpO3ZhciB0PXIuY2hhbm5lbHN8fHIubnVtQ2hhbm5lbHN8fDE7cmV0dXJuXCJhPXJ0cG1hcDpcIitlK1wiIFwiK3IubmFtZStcIi9cIityLmNsb2NrUmF0ZSsoMSE9PXQ/XCIvXCIrdDpcIlwiKStcIlxcclxcblwifSxyLnBhcnNlRXh0bWFwPWZ1bmN0aW9uKHIpe3ZhciBlPXIuc3Vic3RyKDkpLnNwbGl0KFwiIFwiKTtyZXR1cm57aWQ6cGFyc2VJbnQoZVswXSwxMCksZGlyZWN0aW9uOmVbMF0uaW5kZXhPZihcIi9cIik+MD9lWzBdLnNwbGl0KFwiL1wiKVsxXTpcInNlbmRyZWN2XCIsdXJpOmVbMV19fSxyLndyaXRlRXh0bWFwPWZ1bmN0aW9uKHIpe3JldHVyblwiYT1leHRtYXA6XCIrKHIuaWR8fHIucHJlZmVycmVkSWQpKyhyLmRpcmVjdGlvbiYmXCJzZW5kcmVjdlwiIT09ci5kaXJlY3Rpb24/XCIvXCIrci5kaXJlY3Rpb246XCJcIikrXCIgXCIrci51cmkrXCJcXHJcXG5cIn0sci5wYXJzZUZtdHA9ZnVuY3Rpb24ocil7Zm9yKHZhciBlLHQ9e30sYT1yLnN1YnN0cihyLmluZGV4T2YoXCIgXCIpKzEpLnNwbGl0KFwiO1wiKSxuPTA7bjxhLmxlbmd0aDtuKyspdFsoZT1hW25dLnRyaW0oKS5zcGxpdChcIj1cIikpWzBdLnRyaW0oKV09ZVsxXTtyZXR1cm4gdH0sci53cml0ZUZtdHA9ZnVuY3Rpb24ocil7dmFyIGU9XCJcIix0PXIucGF5bG9hZFR5cGU7aWYodm9pZCAwIT09ci5wcmVmZXJyZWRQYXlsb2FkVHlwZSYmKHQ9ci5wcmVmZXJyZWRQYXlsb2FkVHlwZSksci5wYXJhbWV0ZXJzJiZPYmplY3Qua2V5cyhyLnBhcmFtZXRlcnMpLmxlbmd0aCl7dmFyIGE9W107T2JqZWN0LmtleXMoci5wYXJhbWV0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IucGFyYW1ldGVyc1tlXT9hLnB1c2goZStcIj1cIityLnBhcmFtZXRlcnNbZV0pOmEucHVzaChlKX0pLGUrPVwiYT1mbXRwOlwiK3QrXCIgXCIrYS5qb2luKFwiO1wiKStcIlxcclxcblwifXJldHVybiBlfSxyLnBhcnNlUnRjcEZiPWZ1bmN0aW9uKHIpe3ZhciBlPXIuc3Vic3RyKHIuaW5kZXhPZihcIiBcIikrMSkuc3BsaXQoXCIgXCIpO3JldHVybnt0eXBlOmUuc2hpZnQoKSxwYXJhbWV0ZXI6ZS5qb2luKFwiIFwiKX19LHIud3JpdGVSdGNwRmI9ZnVuY3Rpb24ocil7dmFyIGU9XCJcIix0PXIucGF5bG9hZFR5cGU7cmV0dXJuIHZvaWQgMCE9PXIucHJlZmVycmVkUGF5bG9hZFR5cGUmJih0PXIucHJlZmVycmVkUGF5bG9hZFR5cGUpLHIucnRjcEZlZWRiYWNrJiZyLnJ0Y3BGZWVkYmFjay5sZW5ndGgmJnIucnRjcEZlZWRiYWNrLmZvckVhY2goZnVuY3Rpb24ocil7ZSs9XCJhPXJ0Y3AtZmI6XCIrdCtcIiBcIityLnR5cGUrKHIucGFyYW1ldGVyJiZyLnBhcmFtZXRlci5sZW5ndGg/XCIgXCIrci5wYXJhbWV0ZXI6XCJcIikrXCJcXHJcXG5cIn0pLGV9LHIucGFyc2VTc3JjTWVkaWE9ZnVuY3Rpb24ocil7dmFyIGU9ci5pbmRleE9mKFwiIFwiKSx0PXtzc3JjOnBhcnNlSW50KHIuc3Vic3RyKDcsZS03KSwxMCl9LGE9ci5pbmRleE9mKFwiOlwiLGUpO3JldHVybiBhPi0xPyh0LmF0dHJpYnV0ZT1yLnN1YnN0cihlKzEsYS1lLTEpLHQudmFsdWU9ci5zdWJzdHIoYSsxKSk6dC5hdHRyaWJ1dGU9ci5zdWJzdHIoZSsxKSx0fSxyLnBhcnNlU3NyY0dyb3VwPWZ1bmN0aW9uKHIpe3ZhciBlPXIuc3Vic3RyKDEzKS5zcGxpdChcIiBcIik7cmV0dXJue3NlbWFudGljczplLnNoaWZ0KCksc3NyY3M6ZS5tYXAoZnVuY3Rpb24ocil7cmV0dXJuIHBhcnNlSW50KHIsMTApfSl9fSxyLmdldE1pZD1mdW5jdGlvbihlKXt2YXIgdD1yLm1hdGNoUHJlZml4KGUsXCJhPW1pZDpcIilbMF07aWYodClyZXR1cm4gdC5zdWJzdHIoNil9LHIucGFyc2VGaW5nZXJwcmludD1mdW5jdGlvbihyKXt2YXIgZT1yLnN1YnN0cigxNCkuc3BsaXQoXCIgXCIpO3JldHVybnthbGdvcml0aG06ZVswXS50b0xvd2VyQ2FzZSgpLHZhbHVlOmVbMV19fSxyLmdldER0bHNQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3JvbGU6XCJhdXRvXCIsZmluZ2VycHJpbnRzOnIubWF0Y2hQcmVmaXgoZSt0LFwiYT1maW5nZXJwcmludDpcIikubWFwKHIucGFyc2VGaW5nZXJwcmludCl9fSxyLndyaXRlRHRsc1BhcmFtZXRlcnM9ZnVuY3Rpb24ocixlKXt2YXIgdD1cImE9c2V0dXA6XCIrZStcIlxcclxcblwiO3JldHVybiByLmZpbmdlcnByaW50cy5mb3JFYWNoKGZ1bmN0aW9uKHIpe3QrPVwiYT1maW5nZXJwcmludDpcIityLmFsZ29yaXRobStcIiBcIityLnZhbHVlK1wiXFxyXFxuXCJ9KSx0fSxyLnBhcnNlQ3J5cHRvTGluZT1mdW5jdGlvbihyKXt2YXIgZT1yLnN1YnN0cig5KS5zcGxpdChcIiBcIik7cmV0dXJue3RhZzpwYXJzZUludChlWzBdLDEwKSxjcnlwdG9TdWl0ZTplWzFdLGtleVBhcmFtczplWzJdLHNlc3Npb25QYXJhbXM6ZS5zbGljZSgzKX19LHIud3JpdGVDcnlwdG9MaW5lPWZ1bmN0aW9uKGUpe3JldHVyblwiYT1jcnlwdG86XCIrZS50YWcrXCIgXCIrZS5jcnlwdG9TdWl0ZStcIiBcIisoXCJvYmplY3RcIj09dHlwZW9mIGUua2V5UGFyYW1zP3Iud3JpdGVDcnlwdG9LZXlQYXJhbXMoZS5rZXlQYXJhbXMpOmUua2V5UGFyYW1zKSsoZS5zZXNzaW9uUGFyYW1zP1wiIFwiK2Uuc2Vzc2lvblBhcmFtcy5qb2luKFwiIFwiKTpcIlwiKStcIlxcclxcblwifSxyLnBhcnNlQ3J5cHRvS2V5UGFyYW1zPWZ1bmN0aW9uKHIpe2lmKDAhPT1yLmluZGV4T2YoXCJpbmxpbmU6XCIpKXJldHVybiBudWxsO3ZhciBlPXIuc3Vic3RyKDcpLnNwbGl0KFwifFwiKTtyZXR1cm57a2V5TWV0aG9kOlwiaW5saW5lXCIsa2V5U2FsdDplWzBdLGxpZmVUaW1lOmVbMV0sbWtpVmFsdWU6ZVsyXT9lWzJdLnNwbGl0KFwiOlwiKVswXTp2b2lkIDAsbWtpTGVuZ3RoOmVbMl0/ZVsyXS5zcGxpdChcIjpcIilbMV06dm9pZCAwfX0sci53cml0ZUNyeXB0b0tleVBhcmFtcz1mdW5jdGlvbihyKXtyZXR1cm4gci5rZXlNZXRob2QrXCI6XCIrci5rZXlTYWx0KyhyLmxpZmVUaW1lP1wifFwiK3IubGlmZVRpbWU6XCJcIikrKHIubWtpVmFsdWUmJnIubWtpTGVuZ3RoP1wifFwiK3IubWtpVmFsdWUrXCI6XCIrci5ta2lMZW5ndGg6XCJcIil9LHIuZ2V0Q3J5cHRvUGFyYW1ldGVycz1mdW5jdGlvbihlLHQpe3JldHVybiByLm1hdGNoUHJlZml4KGUrdCxcImE9Y3J5cHRvOlwiKS5tYXAoci5wYXJzZUNyeXB0b0xpbmUpfSxyLmdldEljZVBhcmFtZXRlcnM9ZnVuY3Rpb24oZSx0KXt2YXIgYT1yLm1hdGNoUHJlZml4KGUrdCxcImE9aWNlLXVmcmFnOlwiKVswXSxuPXIubWF0Y2hQcmVmaXgoZSt0LFwiYT1pY2UtcHdkOlwiKVswXTtyZXR1cm4gYSYmbj97dXNlcm5hbWVGcmFnbWVudDphLnN1YnN0cigxMikscGFzc3dvcmQ6bi5zdWJzdHIoMTApfTpudWxsfSxyLndyaXRlSWNlUGFyYW1ldGVycz1mdW5jdGlvbihyKXtyZXR1cm5cImE9aWNlLXVmcmFnOlwiK3IudXNlcm5hbWVGcmFnbWVudCtcIlxcclxcbmE9aWNlLXB3ZDpcIityLnBhc3N3b3JkK1wiXFxyXFxuXCJ9LHIucGFyc2VSdHBQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD17Y29kZWNzOltdLGhlYWRlckV4dGVuc2lvbnM6W10sZmVjTWVjaGFuaXNtczpbXSxydGNwOltdfSxhPXIuc3BsaXRMaW5lcyhlKVswXS5zcGxpdChcIiBcIiksbj0zO248YS5sZW5ndGg7bisrKXt2YXIgcz1hW25dLGk9ci5tYXRjaFByZWZpeChlLFwiYT1ydHBtYXA6XCIrcytcIiBcIilbMF07aWYoaSl7dmFyIHA9ci5wYXJzZVJ0cE1hcChpKSxjPXIubWF0Y2hQcmVmaXgoZSxcImE9Zm10cDpcIitzK1wiIFwiKTtzd2l0Y2gocC5wYXJhbWV0ZXJzPWMubGVuZ3RoP3IucGFyc2VGbXRwKGNbMF0pOnt9LHAucnRjcEZlZWRiYWNrPXIubWF0Y2hQcmVmaXgoZSxcImE9cnRjcC1mYjpcIitzK1wiIFwiKS5tYXAoci5wYXJzZVJ0Y3BGYiksdC5jb2RlY3MucHVzaChwKSxwLm5hbWUudG9VcHBlckNhc2UoKSl7Y2FzZVwiUkVEXCI6Y2FzZVwiVUxQRkVDXCI6dC5mZWNNZWNoYW5pc21zLnB1c2gocC5uYW1lLnRvVXBwZXJDYXNlKCkpfX19cmV0dXJuIHIubWF0Y2hQcmVmaXgoZSxcImE9ZXh0bWFwOlwiKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuaGVhZGVyRXh0ZW5zaW9ucy5wdXNoKHIucGFyc2VFeHRtYXAoZSkpfSksdH0sci53cml0ZVJ0cERlc2NyaXB0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIGE9XCJcIjthKz1cIm09XCIrZStcIiBcIixhKz10LmNvZGVjcy5sZW5ndGg+MD9cIjlcIjpcIjBcIixhKz1cIiBVRFAvVExTL1JUUC9TQVZQRiBcIixhKz10LmNvZGVjcy5tYXAoZnVuY3Rpb24ocil7cmV0dXJuIHZvaWQgMCE9PXIucHJlZmVycmVkUGF5bG9hZFR5cGU/ci5wcmVmZXJyZWRQYXlsb2FkVHlwZTpyLnBheWxvYWRUeXBlfSkuam9pbihcIiBcIikrXCJcXHJcXG5cIixhKz1cImM9SU4gSVA0IDAuMC4wLjBcXHJcXG5cIixhKz1cImE9cnRjcDo5IElOIElQNCAwLjAuMC4wXFxyXFxuXCIsdC5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihlKXthKz1yLndyaXRlUnRwTWFwKGUpLGErPXIud3JpdGVGbXRwKGUpLGErPXIud3JpdGVSdGNwRmIoZSl9KTt2YXIgbj0wO3JldHVybiB0LmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKHIpe3IubWF4cHRpbWU+biYmKG49ci5tYXhwdGltZSl9KSxuPjAmJihhKz1cImE9bWF4cHRpbWU6XCIrbitcIlxcclxcblwiKSxhKz1cImE9cnRjcC1tdXhcXHJcXG5cIix0LmhlYWRlckV4dGVuc2lvbnMmJnQuaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2ErPXIud3JpdGVFeHRtYXAoZSl9KSxhfSxyLnBhcnNlUnRwRW5jb2RpbmdQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUpe3ZhciB0LGE9W10sbj1yLnBhcnNlUnRwUGFyYW1ldGVycyhlKSxzPS0xIT09bi5mZWNNZWNoYW5pc21zLmluZGV4T2YoXCJSRURcIiksaT0tMSE9PW4uZmVjTWVjaGFuaXNtcy5pbmRleE9mKFwiVUxQRkVDXCIpLHA9ci5tYXRjaFByZWZpeChlLFwiYT1zc3JjOlwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHIucGFyc2VTc3JjTWVkaWEoZSl9KS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuXCJjbmFtZVwiPT09ci5hdHRyaWJ1dGV9KSxjPXAubGVuZ3RoPjAmJnBbMF0uc3NyYyxvPXIubWF0Y2hQcmVmaXgoZSxcImE9c3NyYy1ncm91cDpGSURcIikubWFwKGZ1bmN0aW9uKHIpe3JldHVybiByLnN1YnN0cigxNykuc3BsaXQoXCIgXCIpLm1hcChmdW5jdGlvbihyKXtyZXR1cm4gcGFyc2VJbnQociwxMCl9KX0pO28ubGVuZ3RoPjAmJm9bMF0ubGVuZ3RoPjEmJm9bMF1bMF09PT1jJiYodD1vWzBdWzFdKSxuLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKHIpe2lmKFwiUlRYXCI9PT1yLm5hbWUudG9VcHBlckNhc2UoKSYmci5wYXJhbWV0ZXJzLmFwdCl7dmFyIGU9e3NzcmM6Yyxjb2RlY1BheWxvYWRUeXBlOnBhcnNlSW50KHIucGFyYW1ldGVycy5hcHQsMTApfTtjJiZ0JiYoZS5ydHg9e3NzcmM6dH0pLGEucHVzaChlKSxzJiYoKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSkpLmZlYz17c3NyYzpjLG1lY2hhbmlzbTppP1wicmVkK3VscGZlY1wiOlwicmVkXCJ9LGEucHVzaChlKSl9fSksMD09PWEubGVuZ3RoJiZjJiZhLnB1c2goe3NzcmM6Y30pO3ZhciB1PXIubWF0Y2hQcmVmaXgoZSxcImI9XCIpO3JldHVybiB1Lmxlbmd0aCYmKHU9MD09PXVbMF0uaW5kZXhPZihcImI9VElBUzpcIik/cGFyc2VJbnQodVswXS5zdWJzdHIoNyksMTApOjA9PT11WzBdLmluZGV4T2YoXCJiPUFTOlwiKT8xZTMqcGFyc2VJbnQodVswXS5zdWJzdHIoNSksMTApKi45NS0xNmUzOnZvaWQgMCxhLmZvckVhY2goZnVuY3Rpb24ocil7ci5tYXhCaXRyYXRlPXV9KSksYX0sci5wYXJzZVJ0Y3BQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUpe3ZhciB0PXt9LGE9ci5tYXRjaFByZWZpeChlLFwiYT1zc3JjOlwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHIucGFyc2VTc3JjTWVkaWEoZSl9KS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuXCJjbmFtZVwiPT09ci5hdHRyaWJ1dGV9KVswXTthJiYodC5jbmFtZT1hLnZhbHVlLHQuc3NyYz1hLnNzcmMpO3ZhciBuPXIubWF0Y2hQcmVmaXgoZSxcImE9cnRjcC1yc2l6ZVwiKTt0LnJlZHVjZWRTaXplPW4ubGVuZ3RoPjAsdC5jb21wb3VuZD0wPT09bi5sZW5ndGg7dmFyIHM9ci5tYXRjaFByZWZpeChlLFwiYT1ydGNwLW11eFwiKTtyZXR1cm4gdC5tdXg9cy5sZW5ndGg+MCx0fSxyLnBhcnNlTXNpZD1mdW5jdGlvbihlKXt2YXIgdCxhPXIubWF0Y2hQcmVmaXgoZSxcImE9bXNpZDpcIik7aWYoMT09PWEubGVuZ3RoKXJldHVybntzdHJlYW06KHQ9YVswXS5zdWJzdHIoNykuc3BsaXQoXCIgXCIpKVswXSx0cmFjazp0WzFdfTt2YXIgbj1yLm1hdGNoUHJlZml4KGUsXCJhPXNzcmM6XCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gci5wYXJzZVNzcmNNZWRpYShlKX0pLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm5cIm1zaWRcIj09PXIuYXR0cmlidXRlfSk7cmV0dXJuIG4ubGVuZ3RoPjA/e3N0cmVhbToodD1uWzBdLnZhbHVlLnNwbGl0KFwiIFwiKSlbMF0sdHJhY2s6dFsxXX06dm9pZCAwfSxyLnBhcnNlU2N0cERlc2NyaXB0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0LGE9ci5wYXJzZU1MaW5lKGUpLG49ci5tYXRjaFByZWZpeChlLFwiYT1tYXgtbWVzc2FnZS1zaXplOlwiKTtuLmxlbmd0aD4wJiYodD1wYXJzZUludChuWzBdLnN1YnN0cigxOSksMTApKSxpc05hTih0KSYmKHQ9NjU1MzYpO3ZhciBzPXIubWF0Y2hQcmVmaXgoZSxcImE9c2N0cC1wb3J0OlwiKTtpZihzLmxlbmd0aD4wKXJldHVybntwb3J0OnBhcnNlSW50KHNbMF0uc3Vic3RyKDEyKSwxMCkscHJvdG9jb2w6YS5mbXQsbWF4TWVzc2FnZVNpemU6dH07aWYoci5tYXRjaFByZWZpeChlLFwiYT1zY3RwbWFwOlwiKS5sZW5ndGg+MCl7dmFyIGk9ci5tYXRjaFByZWZpeChlLFwiYT1zY3RwbWFwOlwiKVswXS5zdWJzdHIoMTApLnNwbGl0KFwiIFwiKTtyZXR1cm57cG9ydDpwYXJzZUludChpWzBdLDEwKSxwcm90b2NvbDppWzFdLG1heE1lc3NhZ2VTaXplOnR9fX0sci53cml0ZVNjdHBEZXNjcmlwdGlvbj1mdW5jdGlvbihyLGUpe3ZhciB0PVtdO3JldHVybiB0PVwiRFRMUy9TQ1RQXCIhPT1yLnByb3RvY29sP1tcIm09XCIrci5raW5kK1wiIDkgXCIrci5wcm90b2NvbCtcIiBcIitlLnByb3RvY29sK1wiXFxyXFxuXCIsXCJjPUlOIElQNCAwLjAuMC4wXFxyXFxuXCIsXCJhPXNjdHAtcG9ydDpcIitlLnBvcnQrXCJcXHJcXG5cIl06W1wibT1cIityLmtpbmQrXCIgOSBcIityLnByb3RvY29sK1wiIFwiK2UucG9ydCtcIlxcclxcblwiLFwiYz1JTiBJUDQgMC4wLjAuMFxcclxcblwiLFwiYT1zY3RwbWFwOlwiK2UucG9ydCtcIiBcIitlLnByb3RvY29sK1wiIDY1NTM1XFxyXFxuXCJdLHZvaWQgMCE9PWUubWF4TWVzc2FnZVNpemUmJnQucHVzaChcImE9bWF4LW1lc3NhZ2Utc2l6ZTpcIitlLm1heE1lc3NhZ2VTaXplK1wiXFxyXFxuXCIpLHQuam9pbihcIlwiKX0sci5nZW5lcmF0ZVNlc3Npb25JZD1mdW5jdGlvbigpe3JldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc3Vic3RyKDIsMjEpfSxyLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlPWZ1bmN0aW9uKGUsdCxhKXt2YXIgbj12b2lkIDAhPT10P3Q6MjtyZXR1cm5cInY9MFxcclxcbm89XCIrKGF8fFwidGhpc2lzYWRhcHRlcm9ydGNcIikrXCIgXCIrKGV8fHIuZ2VuZXJhdGVTZXNzaW9uSWQoKSkrXCIgXCIrbitcIiBJTiBJUDQgMTI3LjAuMC4xXFxyXFxucz0tXFxyXFxudD0wIDBcXHJcXG5cIn0sci53cml0ZU1lZGlhU2VjdGlvbj1mdW5jdGlvbihlLHQsYSxuKXt2YXIgcz1yLndyaXRlUnRwRGVzY3JpcHRpb24oZS5raW5kLHQpO2lmKHMrPXIud3JpdGVJY2VQYXJhbWV0ZXJzKGUuaWNlR2F0aGVyZXIuZ2V0TG9jYWxQYXJhbWV0ZXJzKCkpLHMrPXIud3JpdGVEdGxzUGFyYW1ldGVycyhlLmR0bHNUcmFuc3BvcnQuZ2V0TG9jYWxQYXJhbWV0ZXJzKCksXCJvZmZlclwiPT09YT9cImFjdHBhc3NcIjpcImFjdGl2ZVwiKSxzKz1cImE9bWlkOlwiK2UubWlkK1wiXFxyXFxuXCIsZS5kaXJlY3Rpb24/cys9XCJhPVwiK2UuZGlyZWN0aW9uK1wiXFxyXFxuXCI6ZS5ydHBTZW5kZXImJmUucnRwUmVjZWl2ZXI/cys9XCJhPXNlbmRyZWN2XFxyXFxuXCI6ZS5ydHBTZW5kZXI/cys9XCJhPXNlbmRvbmx5XFxyXFxuXCI6ZS5ydHBSZWNlaXZlcj9zKz1cImE9cmVjdm9ubHlcXHJcXG5cIjpzKz1cImE9aW5hY3RpdmVcXHJcXG5cIixlLnJ0cFNlbmRlcil7dmFyIGk9XCJtc2lkOlwiK24uaWQrXCIgXCIrZS5ydHBTZW5kZXIudHJhY2suaWQrXCJcXHJcXG5cIjtzKz1cImE9XCIraSxzKz1cImE9c3NyYzpcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBcIitpLGUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJihzKz1cImE9c3NyYzpcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMrXCIgXCIraSxzKz1cImE9c3NyYy1ncm91cDpGSUQgXCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrXCIgXCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjK1wiXFxyXFxuXCIpfXJldHVybiBzKz1cImE9c3NyYzpcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBjbmFtZTpcIityLmxvY2FsQ05hbWUrXCJcXHJcXG5cIixlLnJ0cFNlbmRlciYmZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmKHMrPVwiYT1zc3JjOlwiK2Uuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYytcIiBjbmFtZTpcIityLmxvY2FsQ05hbWUrXCJcXHJcXG5cIiksc30sci5nZXREaXJlY3Rpb249ZnVuY3Rpb24oZSx0KXtmb3IodmFyIGE9ci5zcGxpdExpbmVzKGUpLG49MDtuPGEubGVuZ3RoO24rKylzd2l0Y2goYVtuXSl7Y2FzZVwiYT1zZW5kcmVjdlwiOmNhc2VcImE9c2VuZG9ubHlcIjpjYXNlXCJhPXJlY3Zvbmx5XCI6Y2FzZVwiYT1pbmFjdGl2ZVwiOnJldHVybiBhW25dLnN1YnN0cigyKX1yZXR1cm4gdD9yLmdldERpcmVjdGlvbih0KTpcInNlbmRyZWN2XCJ9LHIuZ2V0S2luZD1mdW5jdGlvbihlKXtyZXR1cm4gci5zcGxpdExpbmVzKGUpWzBdLnNwbGl0KFwiIFwiKVswXS5zdWJzdHIoMil9LHIuaXNSZWplY3RlZD1mdW5jdGlvbihyKXtyZXR1cm5cIjBcIj09PXIuc3BsaXQoXCIgXCIsMilbMV19LHIucGFyc2VNTGluZT1mdW5jdGlvbihlKXt2YXIgdD1yLnNwbGl0TGluZXMoZSlbMF0uc3Vic3RyKDIpLnNwbGl0KFwiIFwiKTtyZXR1cm57a2luZDp0WzBdLHBvcnQ6cGFyc2VJbnQodFsxXSwxMCkscHJvdG9jb2w6dFsyXSxmbXQ6dC5zbGljZSgzKS5qb2luKFwiIFwiKX19LHIucGFyc2VPTGluZT1mdW5jdGlvbihlKXt2YXIgdD1yLm1hdGNoUHJlZml4KGUsXCJvPVwiKVswXS5zdWJzdHIoMikuc3BsaXQoXCIgXCIpO3JldHVybnt1c2VybmFtZTp0WzBdLHNlc3Npb25JZDp0WzFdLHNlc3Npb25WZXJzaW9uOnBhcnNlSW50KHRbMl0sMTApLG5ldFR5cGU6dFszXSxhZGRyZXNzVHlwZTp0WzRdLGFkZHJlc3M6dFs1XX19LHIuaXNWYWxpZFNEUD1mdW5jdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZXx8MD09PWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgdD1yLnNwbGl0TGluZXMoZSksYT0wO2E8dC5sZW5ndGg7YSsrKWlmKHRbYV0ubGVuZ3RoPDJ8fFwiPVwiIT09dFthXS5jaGFyQXQoMSkpcmV0dXJuITE7cmV0dXJuITB9LFwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJihtb2R1bGUuZXhwb3J0cz1yKTtcbn0se31dLFwiTkoydVwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgZT1yZXF1aXJlKFwic2RwXCIpO2Z1bmN0aW9uIHQoZSl7cmV0dXJue2luYm91bmRydHA6XCJpbmJvdW5kLXJ0cFwiLG91dGJvdW5kcnRwOlwib3V0Ym91bmQtcnRwXCIsY2FuZGlkYXRlcGFpcjpcImNhbmRpZGF0ZS1wYWlyXCIsbG9jYWxjYW5kaWRhdGU6XCJsb2NhbC1jYW5kaWRhdGVcIixyZW1vdGVjYW5kaWRhdGU6XCJyZW1vdGUtY2FuZGlkYXRlXCJ9W2UudHlwZV18fGUudHlwZX1mdW5jdGlvbiByKHQscixuLGEsaSl7dmFyIHM9ZS53cml0ZVJ0cERlc2NyaXB0aW9uKHQua2luZCxyKTtpZihzKz1lLndyaXRlSWNlUGFyYW1ldGVycyh0LmljZUdhdGhlcmVyLmdldExvY2FsUGFyYW1ldGVycygpKSxzKz1lLndyaXRlRHRsc1BhcmFtZXRlcnModC5kdGxzVHJhbnNwb3J0LmdldExvY2FsUGFyYW1ldGVycygpLFwib2ZmZXJcIj09PW4/XCJhY3RwYXNzXCI6aXx8XCJhY3RpdmVcIikscys9XCJhPW1pZDpcIit0Lm1pZCtcIlxcclxcblwiLHQucnRwU2VuZGVyJiZ0LnJ0cFJlY2VpdmVyP3MrPVwiYT1zZW5kcmVjdlxcclxcblwiOnQucnRwU2VuZGVyP3MrPVwiYT1zZW5kb25seVxcclxcblwiOnQucnRwUmVjZWl2ZXI/cys9XCJhPXJlY3Zvbmx5XFxyXFxuXCI6cys9XCJhPWluYWN0aXZlXFxyXFxuXCIsdC5ydHBTZW5kZXIpe3ZhciBvPXQucnRwU2VuZGVyLl9pbml0aWFsVHJhY2tJZHx8dC5ydHBTZW5kZXIudHJhY2suaWQ7dC5ydHBTZW5kZXIuX2luaXRpYWxUcmFja0lkPW87dmFyIGM9XCJtc2lkOlwiKyhhP2EuaWQ6XCItXCIpK1wiIFwiK28rXCJcXHJcXG5cIjtzKz1cImE9XCIrYyxzKz1cImE9c3NyYzpcIit0LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBcIitjLHQuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJihzKz1cImE9c3NyYzpcIit0LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMrXCIgXCIrYyxzKz1cImE9c3NyYy1ncm91cDpGSUQgXCIrdC5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrXCIgXCIrdC5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjK1wiXFxyXFxuXCIpfXJldHVybiBzKz1cImE9c3NyYzpcIit0LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBjbmFtZTpcIitlLmxvY2FsQ05hbWUrXCJcXHJcXG5cIix0LnJ0cFNlbmRlciYmdC5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmKHMrPVwiYT1zc3JjOlwiK3Quc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYytcIiBjbmFtZTpcIitlLmxvY2FsQ05hbWUrXCJcXHJcXG5cIiksc31mdW5jdGlvbiBuKGUsdCl7dmFyIHI9ITE7cmV0dXJuKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSkpLmZpbHRlcihmdW5jdGlvbihlKXtpZihlJiYoZS51cmxzfHxlLnVybCkpe3ZhciBuPWUudXJsc3x8ZS51cmw7ZS51cmwmJiFlLnVybHMmJmNvbnNvbGUud2FybihcIlJUQ0ljZVNlcnZlci51cmwgaXMgZGVwcmVjYXRlZCEgVXNlIHVybHMgaW5zdGVhZC5cIik7dmFyIGE9XCJzdHJpbmdcIj09dHlwZW9mIG47cmV0dXJuIGEmJihuPVtuXSksbj1uLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gMD09PWUuaW5kZXhPZihcInR1cm46XCIpJiYtMSE9PWUuaW5kZXhPZihcInRyYW5zcG9ydD11ZHBcIikmJi0xPT09ZS5pbmRleE9mKFwidHVybjpbXCIpJiYhcj8ocj0hMCwhMCk6MD09PWUuaW5kZXhPZihcInN0dW46XCIpJiZ0Pj0xNDM5MyYmLTE9PT1lLmluZGV4T2YoXCI/dHJhbnNwb3J0PXVkcFwiKX0pLGRlbGV0ZSBlLnVybCxlLnVybHM9YT9uWzBdOm4sISFuLmxlbmd0aH19KX1mdW5jdGlvbiBhKGUsdCl7dmFyIHI9e2NvZGVjczpbXSxoZWFkZXJFeHRlbnNpb25zOltdLGZlY01lY2hhbmlzbXM6W119LG49ZnVuY3Rpb24oZSx0KXtlPXBhcnNlSW50KGUsMTApO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKHRbcl0ucGF5bG9hZFR5cGU9PT1lfHx0W3JdLnByZWZlcnJlZFBheWxvYWRUeXBlPT09ZSlyZXR1cm4gdFtyXX0sYT1mdW5jdGlvbihlLHQscixhKXt2YXIgaT1uKGUucGFyYW1ldGVycy5hcHQscikscz1uKHQucGFyYW1ldGVycy5hcHQsYSk7cmV0dXJuIGkmJnMmJmkubmFtZS50b0xvd2VyQ2FzZSgpPT09cy5uYW1lLnRvTG93ZXJDYXNlKCl9O3JldHVybiBlLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKG4pe2Zvcih2YXIgaT0wO2k8dC5jb2RlY3MubGVuZ3RoO2krKyl7dmFyIHM9dC5jb2RlY3NbaV07aWYobi5uYW1lLnRvTG93ZXJDYXNlKCk9PT1zLm5hbWUudG9Mb3dlckNhc2UoKSYmbi5jbG9ja1JhdGU9PT1zLmNsb2NrUmF0ZSl7aWYoXCJydHhcIj09PW4ubmFtZS50b0xvd2VyQ2FzZSgpJiZuLnBhcmFtZXRlcnMmJnMucGFyYW1ldGVycy5hcHQmJiFhKG4scyxlLmNvZGVjcyx0LmNvZGVjcykpY29udGludWU7KHM9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzKSkpLm51bUNoYW5uZWxzPU1hdGgubWluKG4ubnVtQ2hhbm5lbHMscy5udW1DaGFubmVscyksci5jb2RlY3MucHVzaChzKSxzLnJ0Y3BGZWVkYmFjaz1zLnJ0Y3BGZWVkYmFjay5maWx0ZXIoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxuLnJ0Y3BGZWVkYmFjay5sZW5ndGg7dCsrKWlmKG4ucnRjcEZlZWRiYWNrW3RdLnR5cGU9PT1lLnR5cGUmJm4ucnRjcEZlZWRiYWNrW3RdLnBhcmFtZXRlcj09PWUucGFyYW1ldGVyKXJldHVybiEwO3JldHVybiExfSk7YnJlYWt9fX0pLGUuaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Zvcih2YXIgbj0wO248dC5oZWFkZXJFeHRlbnNpb25zLmxlbmd0aDtuKyspe3ZhciBhPXQuaGVhZGVyRXh0ZW5zaW9uc1tuXTtpZihlLnVyaT09PWEudXJpKXtyLmhlYWRlckV4dGVuc2lvbnMucHVzaChhKTticmVha319fSkscn1mdW5jdGlvbiBpKGUsdCxyKXtyZXR1cm4tMSE9PXtvZmZlcjp7c2V0TG9jYWxEZXNjcmlwdGlvbjpbXCJzdGFibGVcIixcImhhdmUtbG9jYWwtb2ZmZXJcIl0sc2V0UmVtb3RlRGVzY3JpcHRpb246W1wic3RhYmxlXCIsXCJoYXZlLXJlbW90ZS1vZmZlclwiXX0sYW5zd2VyOntzZXRMb2NhbERlc2NyaXB0aW9uOltcImhhdmUtcmVtb3RlLW9mZmVyXCIsXCJoYXZlLWxvY2FsLXByYW5zd2VyXCJdLHNldFJlbW90ZURlc2NyaXB0aW9uOltcImhhdmUtbG9jYWwtb2ZmZXJcIixcImhhdmUtcmVtb3RlLXByYW5zd2VyXCJdfX1bdF1bZV0uaW5kZXhPZihyKX1mdW5jdGlvbiBzKGUsdCl7dmFyIHI9ZS5nZXRSZW1vdGVDYW5kaWRhdGVzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm4gdC5mb3VuZGF0aW9uPT09ZS5mb3VuZGF0aW9uJiZ0LmlwPT09ZS5pcCYmdC5wb3J0PT09ZS5wb3J0JiZ0LnByaW9yaXR5PT09ZS5wcmlvcml0eSYmdC5wcm90b2NvbD09PWUucHJvdG9jb2wmJnQudHlwZT09PWUudHlwZX0pO3JldHVybiByfHxlLmFkZFJlbW90ZUNhbmRpZGF0ZSh0KSwhcn1mdW5jdGlvbiBvKGUsdCl7dmFyIHI9bmV3IEVycm9yKHQpO3JldHVybiByLm5hbWU9ZSxyLmNvZGU9e05vdFN1cHBvcnRlZEVycm9yOjksSW52YWxpZFN0YXRlRXJyb3I6MTEsSW52YWxpZEFjY2Vzc0Vycm9yOjE1LFR5cGVFcnJvcjp2b2lkIDAsT3BlcmF0aW9uRXJyb3I6dm9pZCAwfVtlXSxyfW1vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGMsZCl7ZnVuY3Rpb24gcChlLHQpe3QuYWRkVHJhY2soZSksdC5kaXNwYXRjaEV2ZW50KG5ldyBjLk1lZGlhU3RyZWFtVHJhY2tFdmVudChcImFkZHRyYWNrXCIse3RyYWNrOmV9KSl9ZnVuY3Rpb24gbChlLHQscixuKXt2YXIgYT1uZXcgRXZlbnQoXCJ0cmFja1wiKTthLnRyYWNrPXQsYS5yZWNlaXZlcj1yLGEudHJhbnNjZWl2ZXI9e3JlY2VpdmVyOnJ9LGEuc3RyZWFtcz1uLGMuc2V0VGltZW91dChmdW5jdGlvbigpe2UuX2Rpc3BhdGNoRXZlbnQoXCJ0cmFja1wiLGEpfSl9dmFyIGY9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcyxhPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihbXCJhZGRFdmVudExpc3RlbmVyXCIsXCJyZW1vdmVFdmVudExpc3RlbmVyXCIsXCJkaXNwYXRjaEV2ZW50XCJdLmZvckVhY2goZnVuY3Rpb24oZSl7cltlXT1hW2VdLmJpbmQoYSl9KSx0aGlzLmNhblRyaWNrbGVJY2VDYW5kaWRhdGVzPW51bGwsdGhpcy5uZWVkTmVnb3RpYXRpb249ITEsdGhpcy5sb2NhbFN0cmVhbXM9W10sdGhpcy5yZW1vdGVTdHJlYW1zPVtdLHRoaXMuX2xvY2FsRGVzY3JpcHRpb249bnVsbCx0aGlzLl9yZW1vdGVEZXNjcmlwdGlvbj1udWxsLHRoaXMuc2lnbmFsaW5nU3RhdGU9XCJzdGFibGVcIix0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZT1cIm5ld1wiLHRoaXMuY29ubmVjdGlvblN0YXRlPVwibmV3XCIsdGhpcy5pY2VHYXRoZXJpbmdTdGF0ZT1cIm5ld1wiLHQ9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0fHx7fSkpLHRoaXMudXNpbmdCdW5kbGU9XCJtYXgtYnVuZGxlXCI9PT10LmJ1bmRsZVBvbGljeSxcIm5lZ290aWF0ZVwiPT09dC5ydGNwTXV4UG9saWN5KXRocm93IG8oXCJOb3RTdXBwb3J0ZWRFcnJvclwiLFwicnRjcE11eFBvbGljeSAnbmVnb3RpYXRlJyBpcyBub3Qgc3VwcG9ydGVkXCIpO3N3aXRjaCh0LnJ0Y3BNdXhQb2xpY3l8fCh0LnJ0Y3BNdXhQb2xpY3k9XCJyZXF1aXJlXCIpLHQuaWNlVHJhbnNwb3J0UG9saWN5KXtjYXNlXCJhbGxcIjpjYXNlXCJyZWxheVwiOmJyZWFrO2RlZmF1bHQ6dC5pY2VUcmFuc3BvcnRQb2xpY3k9XCJhbGxcIn1zd2l0Y2godC5idW5kbGVQb2xpY3kpe2Nhc2VcImJhbGFuY2VkXCI6Y2FzZVwibWF4LWNvbXBhdFwiOmNhc2VcIm1heC1idW5kbGVcIjpicmVhaztkZWZhdWx0OnQuYnVuZGxlUG9saWN5PVwiYmFsYW5jZWRcIn1pZih0LmljZVNlcnZlcnM9bih0LmljZVNlcnZlcnN8fFtdLGQpLHRoaXMuX2ljZUdhdGhlcmVycz1bXSx0LmljZUNhbmRpZGF0ZVBvb2xTaXplKWZvcih2YXIgaT10LmljZUNhbmRpZGF0ZVBvb2xTaXplO2k+MDtpLS0pdGhpcy5faWNlR2F0aGVyZXJzLnB1c2gobmV3IGMuUlRDSWNlR2F0aGVyZXIoe2ljZVNlcnZlcnM6dC5pY2VTZXJ2ZXJzLGdhdGhlclBvbGljeTp0LmljZVRyYW5zcG9ydFBvbGljeX0pKTtlbHNlIHQuaWNlQ2FuZGlkYXRlUG9vbFNpemU9MDt0aGlzLl9jb25maWc9dCx0aGlzLnRyYW5zY2VpdmVycz1bXSx0aGlzLl9zZHBTZXNzaW9uSWQ9ZS5nZW5lcmF0ZVNlc3Npb25JZCgpLHRoaXMuX3NkcFNlc3Npb25WZXJzaW9uPTAsdGhpcy5fZHRsc1JvbGU9dm9pZCAwLHRoaXMuX2lzQ2xvc2VkPSExfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZi5wcm90b3R5cGUsXCJsb2NhbERlc2NyaXB0aW9uXCIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9jYWxEZXNjcmlwdGlvbn19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZi5wcm90b3R5cGUsXCJyZW1vdGVEZXNjcmlwdGlvblwiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbW90ZURlc2NyaXB0aW9ufX0pLGYucHJvdG90eXBlLm9uaWNlY2FuZGlkYXRlPW51bGwsZi5wcm90b3R5cGUub25hZGRzdHJlYW09bnVsbCxmLnByb3RvdHlwZS5vbnRyYWNrPW51bGwsZi5wcm90b3R5cGUub25yZW1vdmVzdHJlYW09bnVsbCxmLnByb3RvdHlwZS5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlPW51bGwsZi5wcm90b3R5cGUub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9bnVsbCxmLnByb3RvdHlwZS5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZT1udWxsLGYucHJvdG90eXBlLm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2U9bnVsbCxmLnByb3RvdHlwZS5vbm5lZ290aWF0aW9ubmVlZGVkPW51bGwsZi5wcm90b3R5cGUub25kYXRhY2hhbm5lbD1udWxsLGYucHJvdG90eXBlLl9kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKGUsdCl7dGhpcy5faXNDbG9zZWR8fCh0aGlzLmRpc3BhdGNoRXZlbnQodCksXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpc1tcIm9uXCIrZV0mJnRoaXNbXCJvblwiK2VdKHQpKX0sZi5wcm90b3R5cGUuX2VtaXRHYXRoZXJpbmdTdGF0ZUNoYW5nZT1mdW5jdGlvbigpe3ZhciBlPW5ldyBFdmVudChcImljZWdhdGhlcmluZ3N0YXRlY2hhbmdlXCIpO3RoaXMuX2Rpc3BhdGNoRXZlbnQoXCJpY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZVwiLGUpfSxmLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbmZpZ30sZi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9jYWxTdHJlYW1zfSxmLnByb3RvdHlwZS5nZXRSZW1vdGVTdHJlYW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVtb3RlU3RyZWFtc30sZi5wcm90b3R5cGUuX2NyZWF0ZVRyYW5zY2VpdmVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy50cmFuc2NlaXZlcnMubGVuZ3RoPjAsbj17dHJhY2s6bnVsbCxpY2VHYXRoZXJlcjpudWxsLGljZVRyYW5zcG9ydDpudWxsLGR0bHNUcmFuc3BvcnQ6bnVsbCxsb2NhbENhcGFiaWxpdGllczpudWxsLHJlbW90ZUNhcGFiaWxpdGllczpudWxsLHJ0cFNlbmRlcjpudWxsLHJ0cFJlY2VpdmVyOm51bGwsa2luZDplLG1pZDpudWxsLHNlbmRFbmNvZGluZ1BhcmFtZXRlcnM6bnVsbCxyZWN2RW5jb2RpbmdQYXJhbWV0ZXJzOm51bGwsc3RyZWFtOm51bGwsYXNzb2NpYXRlZFJlbW90ZU1lZGlhU3RyZWFtczpbXSx3YW50UmVjZWl2ZTohMH07aWYodGhpcy51c2luZ0J1bmRsZSYmciluLmljZVRyYW5zcG9ydD10aGlzLnRyYW5zY2VpdmVyc1swXS5pY2VUcmFuc3BvcnQsbi5kdGxzVHJhbnNwb3J0PXRoaXMudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQ7ZWxzZXt2YXIgYT10aGlzLl9jcmVhdGVJY2VBbmREdGxzVHJhbnNwb3J0cygpO24uaWNlVHJhbnNwb3J0PWEuaWNlVHJhbnNwb3J0LG4uZHRsc1RyYW5zcG9ydD1hLmR0bHNUcmFuc3BvcnR9cmV0dXJuIHR8fHRoaXMudHJhbnNjZWl2ZXJzLnB1c2gobiksbn0sZi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLl9pc0Nsb3NlZCl0aHJvdyBvKFwiSW52YWxpZFN0YXRlRXJyb3JcIixcIkF0dGVtcHRlZCB0byBjYWxsIGFkZFRyYWNrIG9uIGEgY2xvc2VkIHBlZXJjb25uZWN0aW9uLlwiKTt2YXIgcjtpZih0aGlzLnRyYW5zY2VpdmVycy5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyYWNrPT09ZX0pKXRocm93IG8oXCJJbnZhbGlkQWNjZXNzRXJyb3JcIixcIlRyYWNrIGFscmVhZHkgZXhpc3RzLlwiKTtmb3IodmFyIG49MDtuPHRoaXMudHJhbnNjZWl2ZXJzLmxlbmd0aDtuKyspdGhpcy50cmFuc2NlaXZlcnNbbl0udHJhY2t8fHRoaXMudHJhbnNjZWl2ZXJzW25dLmtpbmQhPT1lLmtpbmR8fChyPXRoaXMudHJhbnNjZWl2ZXJzW25dKTtyZXR1cm4gcnx8KHI9dGhpcy5fY3JlYXRlVHJhbnNjZWl2ZXIoZS5raW5kKSksdGhpcy5fbWF5YmVGaXJlTmVnb3RpYXRpb25OZWVkZWQoKSwtMT09PXRoaXMubG9jYWxTdHJlYW1zLmluZGV4T2YodCkmJnRoaXMubG9jYWxTdHJlYW1zLnB1c2godCksci50cmFjaz1lLHIuc3RyZWFtPXQsci5ydHBTZW5kZXI9bmV3IGMuUlRDUnRwU2VuZGVyKGUsci5kdGxzVHJhbnNwb3J0KSxyLnJ0cFNlbmRlcn0sZi5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoZD49MTUwMjUpZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3QuYWRkVHJhY2socixlKX0pO2Vsc2V7dmFyIHI9ZS5jbG9uZSgpO2UuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlLHQpe3ZhciBuPXIuZ2V0VHJhY2tzKClbdF07ZS5hZGRFdmVudExpc3RlbmVyKFwiZW5hYmxlZFwiLGZ1bmN0aW9uKGUpe24uZW5hYmxlZD1lLmVuYWJsZWR9KX0pLHIuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXt0LmFkZFRyYWNrKGUscil9KX19LGYucHJvdG90eXBlLnJlbW92ZVRyYWNrPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2lzQ2xvc2VkKXRocm93IG8oXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQXR0ZW1wdGVkIHRvIGNhbGwgcmVtb3ZlVHJhY2sgb24gYSBjbG9zZWQgcGVlcmNvbm5lY3Rpb24uXCIpO2lmKCEoZSBpbnN0YW5jZW9mIGMuUlRDUnRwU2VuZGVyKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnQgMSBvZiBSVENQZWVyQ29ubmVjdGlvbi5yZW1vdmVUcmFjayBkb2VzIG5vdCBpbXBsZW1lbnQgaW50ZXJmYWNlIFJUQ1J0cFNlbmRlci5cIik7dmFyIHQ9dGhpcy50cmFuc2NlaXZlcnMuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdC5ydHBTZW5kZXI9PT1lfSk7aWYoIXQpdGhyb3cgbyhcIkludmFsaWRBY2Nlc3NFcnJvclwiLFwiU2VuZGVyIHdhcyBub3QgY3JlYXRlZCBieSB0aGlzIGNvbm5lY3Rpb24uXCIpO3ZhciByPXQuc3RyZWFtO3QucnRwU2VuZGVyLnN0b3AoKSx0LnJ0cFNlbmRlcj1udWxsLHQudHJhY2s9bnVsbCx0LnN0cmVhbT1udWxsLC0xPT09dGhpcy50cmFuc2NlaXZlcnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0cmVhbX0pLmluZGV4T2YocikmJnRoaXMubG9jYWxTdHJlYW1zLmluZGV4T2Yocik+LTEmJnRoaXMubG9jYWxTdHJlYW1zLnNwbGljZSh0aGlzLmxvY2FsU3RyZWFtcy5pbmRleE9mKHIpLDEpLHRoaXMuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkKCl9LGYucHJvdG90eXBlLnJlbW92ZVN0cmVhbT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj10LmdldFNlbmRlcnMoKS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyYWNrPT09ZX0pO3ImJnQucmVtb3ZlVHJhY2socil9KX0sZi5wcm90b3R5cGUuZ2V0U2VuZGVycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zY2VpdmVycy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuISFlLnJ0cFNlbmRlcn0pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5ydHBTZW5kZXJ9KX0sZi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hIWUucnRwUmVjZWl2ZXJ9KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUucnRwUmVjZWl2ZXJ9KX0sZi5wcm90b3R5cGUuX2NyZWF0ZUljZUdhdGhlcmVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZih0JiZlPjApcmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzWzBdLmljZUdhdGhlcmVyO2lmKHRoaXMuX2ljZUdhdGhlcmVycy5sZW5ndGgpcmV0dXJuIHRoaXMuX2ljZUdhdGhlcmVycy5zaGlmdCgpO3ZhciBuPW5ldyBjLlJUQ0ljZUdhdGhlcmVyKHtpY2VTZXJ2ZXJzOnRoaXMuX2NvbmZpZy5pY2VTZXJ2ZXJzLGdhdGhlclBvbGljeTp0aGlzLl9jb25maWcuaWNlVHJhbnNwb3J0UG9saWN5fSk7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwic3RhdGVcIix7dmFsdWU6XCJuZXdcIix3cml0YWJsZTohMH0pLHRoaXMudHJhbnNjZWl2ZXJzW2VdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzPVtdLHRoaXMudHJhbnNjZWl2ZXJzW2VdLmJ1ZmZlckNhbmRpZGF0ZXM9ZnVuY3Rpb24odCl7dmFyIGE9IXQuY2FuZGlkYXRlfHwwPT09T2JqZWN0LmtleXModC5jYW5kaWRhdGUpLmxlbmd0aDtuLnN0YXRlPWE/XCJjb21wbGV0ZWRcIjpcImdhdGhlcmluZ1wiLG51bGwhPT1yLnRyYW5zY2VpdmVyc1tlXS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50cyYmci50cmFuc2NlaXZlcnNbZV0uYnVmZmVyZWRDYW5kaWRhdGVFdmVudHMucHVzaCh0KX0sbi5hZGRFdmVudExpc3RlbmVyKFwibG9jYWxjYW5kaWRhdGVcIix0aGlzLnRyYW5zY2VpdmVyc1tlXS5idWZmZXJDYW5kaWRhdGVzKSxufSxmLnByb3RvdHlwZS5fZ2F0aGVyPWZ1bmN0aW9uKHQscil7dmFyIG49dGhpcyxhPXRoaXMudHJhbnNjZWl2ZXJzW3JdLmljZUdhdGhlcmVyO2lmKCFhLm9ubG9jYWxjYW5kaWRhdGUpe3ZhciBpPXRoaXMudHJhbnNjZWl2ZXJzW3JdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzO3RoaXMudHJhbnNjZWl2ZXJzW3JdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzPW51bGwsYS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9jYWxjYW5kaWRhdGVcIix0aGlzLnRyYW5zY2VpdmVyc1tyXS5idWZmZXJDYW5kaWRhdGVzKSxhLm9ubG9jYWxjYW5kaWRhdGU9ZnVuY3Rpb24oaSl7aWYoIShuLnVzaW5nQnVuZGxlJiZyPjApKXt2YXIgcz1uZXcgRXZlbnQoXCJpY2VjYW5kaWRhdGVcIik7cy5jYW5kaWRhdGU9e3NkcE1pZDp0LHNkcE1MaW5lSW5kZXg6cn07dmFyIG89aS5jYW5kaWRhdGUsYz0hb3x8MD09PU9iamVjdC5rZXlzKG8pLmxlbmd0aDtpZihjKVwibmV3XCIhPT1hLnN0YXRlJiZcImdhdGhlcmluZ1wiIT09YS5zdGF0ZXx8KGEuc3RhdGU9XCJjb21wbGV0ZWRcIik7ZWxzZXtcIm5ld1wiPT09YS5zdGF0ZSYmKGEuc3RhdGU9XCJnYXRoZXJpbmdcIiksby5jb21wb25lbnQ9MSxvLnVmcmFnPWEuZ2V0TG9jYWxQYXJhbWV0ZXJzKCkudXNlcm5hbWVGcmFnbWVudDt2YXIgZD1lLndyaXRlQ2FuZGlkYXRlKG8pO3MuY2FuZGlkYXRlPU9iamVjdC5hc3NpZ24ocy5jYW5kaWRhdGUsZS5wYXJzZUNhbmRpZGF0ZShkKSkscy5jYW5kaWRhdGUuY2FuZGlkYXRlPWQscy5jYW5kaWRhdGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue2NhbmRpZGF0ZTpzLmNhbmRpZGF0ZS5jYW5kaWRhdGUsc2RwTWlkOnMuY2FuZGlkYXRlLnNkcE1pZCxzZHBNTGluZUluZGV4OnMuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXgsdXNlcm5hbWVGcmFnbWVudDpzLmNhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50fX19dmFyIHA9ZS5nZXRNZWRpYVNlY3Rpb25zKG4uX2xvY2FsRGVzY3JpcHRpb24uc2RwKTtwW3MuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXhdKz1jP1wiYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcblwiOlwiYT1cIitzLmNhbmRpZGF0ZS5jYW5kaWRhdGUrXCJcXHJcXG5cIixuLl9sb2NhbERlc2NyaXB0aW9uLnNkcD1lLmdldERlc2NyaXB0aW9uKG4uX2xvY2FsRGVzY3JpcHRpb24uc2RwKStwLmpvaW4oXCJcIik7dmFyIGw9bi50cmFuc2NlaXZlcnMuZXZlcnkoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWNlR2F0aGVyZXImJlwiY29tcGxldGVkXCI9PT1lLmljZUdhdGhlcmVyLnN0YXRlfSk7XCJnYXRoZXJpbmdcIiE9PW4uaWNlR2F0aGVyaW5nU3RhdGUmJihuLmljZUdhdGhlcmluZ1N0YXRlPVwiZ2F0aGVyaW5nXCIsbi5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlKCkpLGN8fG4uX2Rpc3BhdGNoRXZlbnQoXCJpY2VjYW5kaWRhdGVcIixzKSxsJiYobi5fZGlzcGF0Y2hFdmVudChcImljZWNhbmRpZGF0ZVwiLG5ldyBFdmVudChcImljZWNhbmRpZGF0ZVwiKSksbi5pY2VHYXRoZXJpbmdTdGF0ZT1cImNvbXBsZXRlXCIsbi5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlKCkpfX0sYy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Eub25sb2NhbGNhbmRpZGF0ZShlKX0pfSwwKX19LGYucHJvdG90eXBlLl9jcmVhdGVJY2VBbmREdGxzVHJhbnNwb3J0cz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgYy5SVENJY2VUcmFuc3BvcnQobnVsbCk7dC5vbmljZXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ZS5fdXBkYXRlSWNlQ29ubmVjdGlvblN0YXRlKCksZS5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCl9O3ZhciByPW5ldyBjLlJUQ0R0bHNUcmFuc3BvcnQodCk7cmV0dXJuIHIub25kdGxzc3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtlLl91cGRhdGVDb25uZWN0aW9uU3RhdGUoKX0sci5vbmVycm9yPWZ1bmN0aW9uKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJzdGF0ZVwiLHt2YWx1ZTpcImZhaWxlZFwiLHdyaXRhYmxlOiEwfSksZS5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCl9LHtpY2VUcmFuc3BvcnQ6dCxkdGxzVHJhbnNwb3J0OnJ9fSxmLnByb3RvdHlwZS5fZGlzcG9zZUljZUFuZER0bHNUcmFuc3BvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudHJhbnNjZWl2ZXJzW2VdLmljZUdhdGhlcmVyO3QmJihkZWxldGUgdC5vbmxvY2FsY2FuZGlkYXRlLGRlbGV0ZSB0aGlzLnRyYW5zY2VpdmVyc1tlXS5pY2VHYXRoZXJlcik7dmFyIHI9dGhpcy50cmFuc2NlaXZlcnNbZV0uaWNlVHJhbnNwb3J0O3ImJihkZWxldGUgci5vbmljZXN0YXRlY2hhbmdlLGRlbGV0ZSB0aGlzLnRyYW5zY2VpdmVyc1tlXS5pY2VUcmFuc3BvcnQpO3ZhciBuPXRoaXMudHJhbnNjZWl2ZXJzW2VdLmR0bHNUcmFuc3BvcnQ7biYmKGRlbGV0ZSBuLm9uZHRsc3N0YXRlY2hhbmdlLGRlbGV0ZSBuLm9uZXJyb3IsZGVsZXRlIHRoaXMudHJhbnNjZWl2ZXJzW2VdLmR0bHNUcmFuc3BvcnQpfSxmLnByb3RvdHlwZS5fdHJhbnNjZWl2ZT1mdW5jdGlvbih0LHIsbil7dmFyIGk9YSh0LmxvY2FsQ2FwYWJpbGl0aWVzLHQucmVtb3RlQ2FwYWJpbGl0aWVzKTtyJiZ0LnJ0cFNlbmRlciYmKGkuZW5jb2RpbmdzPXQuc2VuZEVuY29kaW5nUGFyYW1ldGVycyxpLnJ0Y3A9e2NuYW1lOmUubG9jYWxDTmFtZSxjb21wb3VuZDp0LnJ0Y3BQYXJhbWV0ZXJzLmNvbXBvdW5kfSx0LnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoJiYoaS5ydGNwLnNzcmM9dC5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMpLHQucnRwU2VuZGVyLnNlbmQoaSkpLG4mJnQucnRwUmVjZWl2ZXImJmkuY29kZWNzLmxlbmd0aD4wJiYoXCJ2aWRlb1wiPT09dC5raW5kJiZ0LnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMmJmQ8MTUwMTkmJnQucmVjdkVuY29kaW5nUGFyYW1ldGVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2RlbGV0ZSBlLnJ0eH0pLHQucmVjdkVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGg/aS5lbmNvZGluZ3M9dC5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzOmkuZW5jb2RpbmdzPVt7fV0saS5ydGNwPXtjb21wb3VuZDp0LnJ0Y3BQYXJhbWV0ZXJzLmNvbXBvdW5kfSx0LnJ0Y3BQYXJhbWV0ZXJzLmNuYW1lJiYoaS5ydGNwLmNuYW1lPXQucnRjcFBhcmFtZXRlcnMuY25hbWUpLHQuc2VuZEVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGgmJihpLnJ0Y3Auc3NyYz10LnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyksdC5ydHBSZWNlaXZlci5yZWNlaXZlKGkpKX0sZi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbj1mdW5jdGlvbih0KXt2YXIgcixuLHM9dGhpcztpZigtMT09PVtcIm9mZmVyXCIsXCJhbnN3ZXJcIl0uaW5kZXhPZih0LnR5cGUpKXJldHVybiBQcm9taXNlLnJlamVjdChvKFwiVHlwZUVycm9yXCIsJ1Vuc3VwcG9ydGVkIHR5cGUgXCInK3QudHlwZSsnXCInKSk7aWYoIWkoXCJzZXRMb2NhbERlc2NyaXB0aW9uXCIsdC50eXBlLHMuc2lnbmFsaW5nU3RhdGUpfHxzLl9pc0Nsb3NlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobyhcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IHNldCBsb2NhbCBcIit0LnR5cGUrXCIgaW4gc3RhdGUgXCIrcy5zaWduYWxpbmdTdGF0ZSkpO2lmKFwib2ZmZXJcIj09PXQudHlwZSlyPWUuc3BsaXRTZWN0aW9ucyh0LnNkcCksbj1yLnNoaWZ0KCksci5mb3JFYWNoKGZ1bmN0aW9uKHQscil7dmFyIG49ZS5wYXJzZVJ0cFBhcmFtZXRlcnModCk7cy50cmFuc2NlaXZlcnNbcl0ubG9jYWxDYXBhYmlsaXRpZXM9bn0pLHMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24oZSx0KXtzLl9nYXRoZXIoZS5taWQsdCl9KTtlbHNlIGlmKFwiYW5zd2VyXCI9PT10LnR5cGUpe3I9ZS5zcGxpdFNlY3Rpb25zKHMuX3JlbW90ZURlc2NyaXB0aW9uLnNkcCksbj1yLnNoaWZ0KCk7dmFyIGM9ZS5tYXRjaFByZWZpeChuLFwiYT1pY2UtbGl0ZVwiKS5sZW5ndGg+MDtyLmZvckVhY2goZnVuY3Rpb24odCxyKXt2YXIgaT1zLnRyYW5zY2VpdmVyc1tyXSxvPWkuaWNlR2F0aGVyZXIsZD1pLmljZVRyYW5zcG9ydCxwPWkuZHRsc1RyYW5zcG9ydCxsPWkubG9jYWxDYXBhYmlsaXRpZXMsZj1pLnJlbW90ZUNhcGFiaWxpdGllcztpZighKGUuaXNSZWplY3RlZCh0KSYmMD09PWUubWF0Y2hQcmVmaXgodCxcImE9YnVuZGxlLW9ubHlcIikubGVuZ3RoKSYmIWkucmVqZWN0ZWQpe3ZhciB1PWUuZ2V0SWNlUGFyYW1ldGVycyh0LG4pLHY9ZS5nZXREdGxzUGFyYW1ldGVycyh0LG4pO2MmJih2LnJvbGU9XCJzZXJ2ZXJcIikscy51c2luZ0J1bmRsZSYmMCE9PXJ8fChzLl9nYXRoZXIoaS5taWQsciksXCJuZXdcIj09PWQuc3RhdGUmJmQuc3RhcnQobyx1LGM/XCJjb250cm9sbGluZ1wiOlwiY29udHJvbGxlZFwiKSxcIm5ld1wiPT09cC5zdGF0ZSYmcC5zdGFydCh2KSk7dmFyIGg9YShsLGYpO3MuX3RyYW5zY2VpdmUoaSxoLmNvZGVjcy5sZW5ndGg+MCwhMSl9fSl9cmV0dXJuIHMuX2xvY2FsRGVzY3JpcHRpb249e3R5cGU6dC50eXBlLHNkcDp0LnNkcH0sXCJvZmZlclwiPT09dC50eXBlP3MuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKFwiaGF2ZS1sb2NhbC1vZmZlclwiKTpzLl91cGRhdGVTaWduYWxpbmdTdGF0ZShcInN0YWJsZVwiKSxQcm9taXNlLnJlc29sdmUoKX0sZi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb249ZnVuY3Rpb24odCl7dmFyIHI9dGhpcztpZigtMT09PVtcIm9mZmVyXCIsXCJhbnN3ZXJcIl0uaW5kZXhPZih0LnR5cGUpKXJldHVybiBQcm9taXNlLnJlamVjdChvKFwiVHlwZUVycm9yXCIsJ1Vuc3VwcG9ydGVkIHR5cGUgXCInK3QudHlwZSsnXCInKSk7aWYoIWkoXCJzZXRSZW1vdGVEZXNjcmlwdGlvblwiLHQudHlwZSxyLnNpZ25hbGluZ1N0YXRlKXx8ci5faXNDbG9zZWQpcmV0dXJuIFByb21pc2UucmVqZWN0KG8oXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQ2FuIG5vdCBzZXQgcmVtb3RlIFwiK3QudHlwZStcIiBpbiBzdGF0ZSBcIityLnNpZ25hbGluZ1N0YXRlKSk7dmFyIG49e307ci5yZW1vdGVTdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oZSl7bltlLmlkXT1lfSk7dmFyIGY9W10sdT1lLnNwbGl0U2VjdGlvbnModC5zZHApLHY9dS5zaGlmdCgpLGg9ZS5tYXRjaFByZWZpeCh2LFwiYT1pY2UtbGl0ZVwiKS5sZW5ndGg+MCxtPWUubWF0Y2hQcmVmaXgodixcImE9Z3JvdXA6QlVORExFIFwiKS5sZW5ndGg+MDtyLnVzaW5nQnVuZGxlPW07dmFyIGc9ZS5tYXRjaFByZWZpeCh2LFwiYT1pY2Utb3B0aW9uczpcIilbMF07cmV0dXJuIHIuY2FuVHJpY2tsZUljZUNhbmRpZGF0ZXM9ISFnJiZnLnN1YnN0cigxNCkuc3BsaXQoXCIgXCIpLmluZGV4T2YoXCJ0cmlja2xlXCIpPj0wLHUuZm9yRWFjaChmdW5jdGlvbihpLG8pe3ZhciBsPWUuc3BsaXRMaW5lcyhpKSx1PWUuZ2V0S2luZChpKSxnPWUuaXNSZWplY3RlZChpKSYmMD09PWUubWF0Y2hQcmVmaXgoaSxcImE9YnVuZGxlLW9ubHlcIikubGVuZ3RoLHk9bFswXS5zdWJzdHIoMikuc3BsaXQoXCIgXCIpWzJdLFM9ZS5nZXREaXJlY3Rpb24oaSx2KSxUPWUucGFyc2VNc2lkKGkpLEU9ZS5nZXRNaWQoaSl8fGUuZ2VuZXJhdGVJZGVudGlmaWVyKCk7aWYoZ3x8XCJhcHBsaWNhdGlvblwiPT09dSYmKFwiRFRMUy9TQ1RQXCI9PT15fHxcIlVEUC9EVExTL1NDVFBcIj09PXkpKXIudHJhbnNjZWl2ZXJzW29dPXttaWQ6RSxraW5kOnUscHJvdG9jb2w6eSxyZWplY3RlZDohMH07ZWxzZXt2YXIgQyxQLHcsUixfLGssYix4LEQ7IWcmJnIudHJhbnNjZWl2ZXJzW29dJiZyLnRyYW5zY2VpdmVyc1tvXS5yZWplY3RlZCYmKHIudHJhbnNjZWl2ZXJzW29dPXIuX2NyZWF0ZVRyYW5zY2VpdmVyKHUsITApKTt2YXIgSSxMLE09ZS5wYXJzZVJ0cFBhcmFtZXRlcnMoaSk7Z3x8KEk9ZS5nZXRJY2VQYXJhbWV0ZXJzKGksdiksKEw9ZS5nZXREdGxzUGFyYW1ldGVycyhpLHYpKS5yb2xlPVwiY2xpZW50XCIpLGI9ZS5wYXJzZVJ0cEVuY29kaW5nUGFyYW1ldGVycyhpKTt2YXIgTz1lLnBhcnNlUnRjcFBhcmFtZXRlcnMoaSksRz1lLm1hdGNoUHJlZml4KGksXCJhPWVuZC1vZi1jYW5kaWRhdGVzXCIsdikubGVuZ3RoPjAsaj1lLm1hdGNoUHJlZml4KGksXCJhPWNhbmRpZGF0ZTpcIikubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBlLnBhcnNlQ2FuZGlkYXRlKHQpfSkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5jb21wb25lbnR9KTtpZigoXCJvZmZlclwiPT09dC50eXBlfHxcImFuc3dlclwiPT09dC50eXBlKSYmIWcmJm0mJm8+MCYmci50cmFuc2NlaXZlcnNbb10mJihyLl9kaXNwb3NlSWNlQW5kRHRsc1RyYW5zcG9ydHMobyksci50cmFuc2NlaXZlcnNbb10uaWNlR2F0aGVyZXI9ci50cmFuc2NlaXZlcnNbMF0uaWNlR2F0aGVyZXIsci50cmFuc2NlaXZlcnNbb10uaWNlVHJhbnNwb3J0PXIudHJhbnNjZWl2ZXJzWzBdLmljZVRyYW5zcG9ydCxyLnRyYW5zY2VpdmVyc1tvXS5kdGxzVHJhbnNwb3J0PXIudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQsci50cmFuc2NlaXZlcnNbb10ucnRwU2VuZGVyJiZyLnRyYW5zY2VpdmVyc1tvXS5ydHBTZW5kZXIuc2V0VHJhbnNwb3J0KHIudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQpLHIudHJhbnNjZWl2ZXJzW29dLnJ0cFJlY2VpdmVyJiZyLnRyYW5zY2VpdmVyc1tvXS5ydHBSZWNlaXZlci5zZXRUcmFuc3BvcnQoci50cmFuc2NlaXZlcnNbMF0uZHRsc1RyYW5zcG9ydCkpLFwib2ZmZXJcIiE9PXQudHlwZXx8Zyl7aWYoXCJhbnN3ZXJcIj09PXQudHlwZSYmIWcpe1A9KEM9ci50cmFuc2NlaXZlcnNbb10pLmljZUdhdGhlcmVyLHc9Qy5pY2VUcmFuc3BvcnQsUj1DLmR0bHNUcmFuc3BvcnQsXz1DLnJ0cFJlY2VpdmVyLGs9Qy5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzLHg9Qy5sb2NhbENhcGFiaWxpdGllcyxyLnRyYW5zY2VpdmVyc1tvXS5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzPWIsci50cmFuc2NlaXZlcnNbb10ucmVtb3RlQ2FwYWJpbGl0aWVzPU0sci50cmFuc2NlaXZlcnNbb10ucnRjcFBhcmFtZXRlcnM9TyxqLmxlbmd0aCYmXCJuZXdcIj09PXcuc3RhdGUmJighaCYmIUd8fG0mJjAhPT1vP2ouZm9yRWFjaChmdW5jdGlvbihlKXtzKEMuaWNlVHJhbnNwb3J0LGUpfSk6dy5zZXRSZW1vdGVDYW5kaWRhdGVzKGopKSxtJiYwIT09b3x8KFwibmV3XCI9PT13LnN0YXRlJiZ3LnN0YXJ0KFAsSSxcImNvbnRyb2xsaW5nXCIpLFwibmV3XCI9PT1SLnN0YXRlJiZSLnN0YXJ0KEwpKSwhYShDLmxvY2FsQ2FwYWJpbGl0aWVzLEMucmVtb3RlQ2FwYWJpbGl0aWVzKS5jb2RlY3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwicnR4XCI9PT1lLm5hbWUudG9Mb3dlckNhc2UoKX0pLmxlbmd0aCYmQy5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmZGVsZXRlIEMuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgsci5fdHJhbnNjZWl2ZShDLFwic2VuZHJlY3ZcIj09PVN8fFwicmVjdm9ubHlcIj09PVMsXCJzZW5kcmVjdlwiPT09U3x8XCJzZW5kb25seVwiPT09UyksIV98fFwic2VuZHJlY3ZcIiE9PVMmJlwic2VuZG9ubHlcIiE9PVM/ZGVsZXRlIEMucnRwUmVjZWl2ZXI6KEQ9Xy50cmFjayxUPyhuW1Quc3RyZWFtXXx8KG5bVC5zdHJlYW1dPW5ldyBjLk1lZGlhU3RyZWFtKSxwKEQsbltULnN0cmVhbV0pLGYucHVzaChbRCxfLG5bVC5zdHJlYW1dXSkpOihuLmRlZmF1bHR8fChuLmRlZmF1bHQ9bmV3IGMuTWVkaWFTdHJlYW0pLHAoRCxuLmRlZmF1bHQpLGYucHVzaChbRCxfLG4uZGVmYXVsdF0pKSl9fWVsc2V7KEM9ci50cmFuc2NlaXZlcnNbb118fHIuX2NyZWF0ZVRyYW5zY2VpdmVyKHUpKS5taWQ9RSxDLmljZUdhdGhlcmVyfHwoQy5pY2VHYXRoZXJlcj1yLl9jcmVhdGVJY2VHYXRoZXJlcihvLG0pKSxqLmxlbmd0aCYmXCJuZXdcIj09PUMuaWNlVHJhbnNwb3J0LnN0YXRlJiYoIUd8fG0mJjAhPT1vP2ouZm9yRWFjaChmdW5jdGlvbihlKXtzKEMuaWNlVHJhbnNwb3J0LGUpfSk6Qy5pY2VUcmFuc3BvcnQuc2V0UmVtb3RlQ2FuZGlkYXRlcyhqKSkseD1jLlJUQ1J0cFJlY2VpdmVyLmdldENhcGFiaWxpdGllcyh1KSxkPDE1MDE5JiYoeC5jb2RlY3M9eC5jb2RlY3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwicnR4XCIhPT1lLm5hbWV9KSksaz1DLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnN8fFt7c3NyYzoxMDAxKigyKm8rMil9XTt2YXIgTixBPSExO2lmKFwic2VuZHJlY3ZcIj09PVN8fFwic2VuZG9ubHlcIj09PVMpe2lmKEE9IUMucnRwUmVjZWl2ZXIsXz1DLnJ0cFJlY2VpdmVyfHxuZXcgYy5SVENSdHBSZWNlaXZlcihDLmR0bHNUcmFuc3BvcnQsdSksQSlEPV8udHJhY2ssVCYmXCItXCI9PT1ULnN0cmVhbXx8KFQ/KG5bVC5zdHJlYW1dfHwobltULnN0cmVhbV09bmV3IGMuTWVkaWFTdHJlYW0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG5bVC5zdHJlYW1dLFwiaWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFQuc3RyZWFtfX0pKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoRCxcImlkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBULnRyYWNrfX0pLE49bltULnN0cmVhbV0pOihuLmRlZmF1bHR8fChuLmRlZmF1bHQ9bmV3IGMuTWVkaWFTdHJlYW0pLE49bi5kZWZhdWx0KSksTiYmKHAoRCxOKSxDLmFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXMucHVzaChOKSksZi5wdXNoKFtELF8sTl0pfWVsc2UgQy5ydHBSZWNlaXZlciYmQy5ydHBSZWNlaXZlci50cmFjayYmKEMuYXNzb2NpYXRlZFJlbW90ZU1lZGlhU3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0LHIsbj1lLmdldFRyYWNrcygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWQ9PT1DLnJ0cFJlY2VpdmVyLnRyYWNrLmlkfSk7biYmKHQ9biwocj1lKS5yZW1vdmVUcmFjayh0KSxyLmRpc3BhdGNoRXZlbnQobmV3IGMuTWVkaWFTdHJlYW1UcmFja0V2ZW50KFwicmVtb3ZldHJhY2tcIix7dHJhY2s6dH0pKSl9KSxDLmFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXM9W10pO0MubG9jYWxDYXBhYmlsaXRpZXM9eCxDLnJlbW90ZUNhcGFiaWxpdGllcz1NLEMucnRwUmVjZWl2ZXI9XyxDLnJ0Y3BQYXJhbWV0ZXJzPU8sQy5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzPWssQy5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzPWIsci5fdHJhbnNjZWl2ZShyLnRyYW5zY2VpdmVyc1tvXSwhMSxBKX19fSksdm9pZCAwPT09ci5fZHRsc1JvbGUmJihyLl9kdGxzUm9sZT1cIm9mZmVyXCI9PT10LnR5cGU/XCJhY3RpdmVcIjpcInBhc3NpdmVcIiksci5fcmVtb3RlRGVzY3JpcHRpb249e3R5cGU6dC50eXBlLHNkcDp0LnNkcH0sXCJvZmZlclwiPT09dC50eXBlP3IuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKFwiaGF2ZS1yZW1vdGUtb2ZmZXJcIik6ci5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoXCJzdGFibGVcIiksT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1uW2VdO2lmKHQuZ2V0VHJhY2tzKCkubGVuZ3RoKXtpZigtMT09PXIucmVtb3RlU3RyZWFtcy5pbmRleE9mKHQpKXtyLnJlbW90ZVN0cmVhbXMucHVzaCh0KTt2YXIgYT1uZXcgRXZlbnQoXCJhZGRzdHJlYW1cIik7YS5zdHJlYW09dCxjLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyLl9kaXNwYXRjaEV2ZW50KFwiYWRkc3RyZWFtXCIsYSl9KX1mLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49ZVswXSxhPWVbMV07dC5pZD09PWVbMl0uaWQmJmwocixuLGEsW3RdKX0pfX0pLGYuZm9yRWFjaChmdW5jdGlvbihlKXtlWzJdfHxsKHIsZVswXSxlWzFdLFtdKX0pLGMuc2V0VGltZW91dChmdW5jdGlvbigpe3ImJnIudHJhbnNjZWl2ZXJzJiZyLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuaWNlVHJhbnNwb3J0JiZcIm5ld1wiPT09ZS5pY2VUcmFuc3BvcnQuc3RhdGUmJmUuaWNlVHJhbnNwb3J0LmdldFJlbW90ZUNhbmRpZGF0ZXMoKS5sZW5ndGg+MCYmKGNvbnNvbGUud2FybihcIlRpbWVvdXQgZm9yIGFkZFJlbW90ZUNhbmRpZGF0ZS4gQ29uc2lkZXIgc2VuZGluZyBhbiBlbmQtb2YtY2FuZGlkYXRlcyBub3RpZmljYXRpb25cIiksZS5pY2VUcmFuc3BvcnQuYWRkUmVtb3RlQ2FuZGlkYXRlKHt9KSl9KX0sNGUzKSxQcm9taXNlLnJlc29sdmUoKX0sZi5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuaWNlVHJhbnNwb3J0JiZlLmljZVRyYW5zcG9ydC5zdG9wKCksZS5kdGxzVHJhbnNwb3J0JiZlLmR0bHNUcmFuc3BvcnQuc3RvcCgpLGUucnRwU2VuZGVyJiZlLnJ0cFNlbmRlci5zdG9wKCksZS5ydHBSZWNlaXZlciYmZS5ydHBSZWNlaXZlci5zdG9wKCl9KSx0aGlzLl9pc0Nsb3NlZD0hMCx0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZShcImNsb3NlZFwiKX0sZi5wcm90b3R5cGUuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlPWZ1bmN0aW9uKGUpe3RoaXMuc2lnbmFsaW5nU3RhdGU9ZTt2YXIgdD1uZXcgRXZlbnQoXCJzaWduYWxpbmdzdGF0ZWNoYW5nZVwiKTt0aGlzLl9kaXNwYXRjaEV2ZW50KFwic2lnbmFsaW5nc3RhdGVjaGFuZ2VcIix0KX0sZi5wcm90b3R5cGUuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztcInN0YWJsZVwiPT09dGhpcy5zaWduYWxpbmdTdGF0ZSYmITAhPT10aGlzLm5lZWROZWdvdGlhdGlvbiYmKHRoaXMubmVlZE5lZ290aWF0aW9uPSEwLGMuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGUubmVlZE5lZ290aWF0aW9uKXtlLm5lZWROZWdvdGlhdGlvbj0hMTt2YXIgdD1uZXcgRXZlbnQoXCJuZWdvdGlhdGlvbm5lZWRlZFwiKTtlLl9kaXNwYXRjaEV2ZW50KFwibmVnb3RpYXRpb25uZWVkZWRcIix0KX19LDApKX0sZi5wcm90b3R5cGUuX3VwZGF0ZUljZUNvbm5lY3Rpb25TdGF0ZT1mdW5jdGlvbigpe3ZhciBlLHQ9e25ldzowLGNsb3NlZDowLGNoZWNraW5nOjAsY29ubmVjdGVkOjAsY29tcGxldGVkOjAsZGlzY29ubmVjdGVkOjAsZmFpbGVkOjB9O2lmKHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5pY2VUcmFuc3BvcnQmJiFlLnJlamVjdGVkJiZ0W2UuaWNlVHJhbnNwb3J0LnN0YXRlXSsrfSksZT1cIm5ld1wiLHQuZmFpbGVkPjA/ZT1cImZhaWxlZFwiOnQuY2hlY2tpbmc+MD9lPVwiY2hlY2tpbmdcIjp0LmRpc2Nvbm5lY3RlZD4wP2U9XCJkaXNjb25uZWN0ZWRcIjp0Lm5ldz4wP2U9XCJuZXdcIjp0LmNvbm5lY3RlZD4wP2U9XCJjb25uZWN0ZWRcIjp0LmNvbXBsZXRlZD4wJiYoZT1cImNvbXBsZXRlZFwiKSxlIT09dGhpcy5pY2VDb25uZWN0aW9uU3RhdGUpe3RoaXMuaWNlQ29ubmVjdGlvblN0YXRlPWU7dmFyIHI9bmV3IEV2ZW50KFwiaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIpO3RoaXMuX2Rpc3BhdGNoRXZlbnQoXCJpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIixyKX19LGYucHJvdG90eXBlLl91cGRhdGVDb25uZWN0aW9uU3RhdGU9ZnVuY3Rpb24oKXt2YXIgZSx0PXtuZXc6MCxjbG9zZWQ6MCxjb25uZWN0aW5nOjAsY29ubmVjdGVkOjAsY29tcGxldGVkOjAsZGlzY29ubmVjdGVkOjAsZmFpbGVkOjB9O2lmKHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5pY2VUcmFuc3BvcnQmJmUuZHRsc1RyYW5zcG9ydCYmIWUucmVqZWN0ZWQmJih0W2UuaWNlVHJhbnNwb3J0LnN0YXRlXSsrLHRbZS5kdGxzVHJhbnNwb3J0LnN0YXRlXSsrKX0pLHQuY29ubmVjdGVkKz10LmNvbXBsZXRlZCxlPVwibmV3XCIsdC5mYWlsZWQ+MD9lPVwiZmFpbGVkXCI6dC5jb25uZWN0aW5nPjA/ZT1cImNvbm5lY3RpbmdcIjp0LmRpc2Nvbm5lY3RlZD4wP2U9XCJkaXNjb25uZWN0ZWRcIjp0Lm5ldz4wP2U9XCJuZXdcIjp0LmNvbm5lY3RlZD4wJiYoZT1cImNvbm5lY3RlZFwiKSxlIT09dGhpcy5jb25uZWN0aW9uU3RhdGUpe3RoaXMuY29ubmVjdGlvblN0YXRlPWU7dmFyIHI9bmV3IEV2ZW50KFwiY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIpO3RoaXMuX2Rpc3BhdGNoRXZlbnQoXCJjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIixyKX19LGYucHJvdG90eXBlLmNyZWF0ZU9mZmVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0Ll9pc0Nsb3NlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobyhcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IGNhbGwgY3JlYXRlT2ZmZXIgYWZ0ZXIgY2xvc2VcIikpO3ZhciBuPXQudHJhbnNjZWl2ZXJzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cImF1ZGlvXCI9PT1lLmtpbmR9KS5sZW5ndGgsYT10LnRyYW5zY2VpdmVycy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJ2aWRlb1wiPT09ZS5raW5kfSkubGVuZ3RoLGk9YXJndW1lbnRzWzBdO2lmKGkpe2lmKGkubWFuZGF0b3J5fHxpLm9wdGlvbmFsKXRocm93IG5ldyBUeXBlRXJyb3IoXCJMZWdhY3kgbWFuZGF0b3J5L29wdGlvbmFsIGNvbnN0cmFpbnRzIG5vdCBzdXBwb3J0ZWQuXCIpO3ZvaWQgMCE9PWkub2ZmZXJUb1JlY2VpdmVBdWRpbyYmKG49ITA9PT1pLm9mZmVyVG9SZWNlaXZlQXVkaW8/MTohMT09PWkub2ZmZXJUb1JlY2VpdmVBdWRpbz8wOmkub2ZmZXJUb1JlY2VpdmVBdWRpbyksdm9pZCAwIT09aS5vZmZlclRvUmVjZWl2ZVZpZGVvJiYoYT0hMD09PWkub2ZmZXJUb1JlY2VpdmVWaWRlbz8xOiExPT09aS5vZmZlclRvUmVjZWl2ZVZpZGVvPzA6aS5vZmZlclRvUmVjZWl2ZVZpZGVvKX1mb3IodC50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbihlKXtcImF1ZGlvXCI9PT1lLmtpbmQ/LS1uPDAmJihlLndhbnRSZWNlaXZlPSExKTpcInZpZGVvXCI9PT1lLmtpbmQmJi0tYTwwJiYoZS53YW50UmVjZWl2ZT0hMSl9KTtuPjB8fGE+MDspbj4wJiYodC5fY3JlYXRlVHJhbnNjZWl2ZXIoXCJhdWRpb1wiKSxuLS0pLGE+MCYmKHQuX2NyZWF0ZVRyYW5zY2VpdmVyKFwidmlkZW9cIiksYS0tKTt2YXIgcz1lLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlKHQuX3NkcFNlc3Npb25JZCx0Ll9zZHBTZXNzaW9uVmVyc2lvbisrKTt0LnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHIsbil7dmFyIGE9ci50cmFjayxpPXIua2luZCxzPXIubWlkfHxlLmdlbmVyYXRlSWRlbnRpZmllcigpO3IubWlkPXMsci5pY2VHYXRoZXJlcnx8KHIuaWNlR2F0aGVyZXI9dC5fY3JlYXRlSWNlR2F0aGVyZXIobix0LnVzaW5nQnVuZGxlKSk7dmFyIG89Yy5SVENSdHBTZW5kZXIuZ2V0Q2FwYWJpbGl0aWVzKGkpO2Q8MTUwMTkmJihvLmNvZGVjcz1vLmNvZGVjcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJydHhcIiE9PWUubmFtZX0pKSxvLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe1wiSDI2NFwiPT09ZS5uYW1lJiZ2b2lkIDA9PT1lLnBhcmFtZXRlcnNbXCJsZXZlbC1hc3ltbWV0cnktYWxsb3dlZFwiXSYmKGUucGFyYW1ldGVyc1tcImxldmVsLWFzeW1tZXRyeS1hbGxvd2VkXCJdPVwiMVwiKSxyLnJlbW90ZUNhcGFiaWxpdGllcyYmci5yZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzJiZyLnJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbih0KXtlLm5hbWUudG9Mb3dlckNhc2UoKT09PXQubmFtZS50b0xvd2VyQ2FzZSgpJiZlLmNsb2NrUmF0ZT09PXQuY2xvY2tSYXRlJiYoZS5wcmVmZXJyZWRQYXlsb2FkVHlwZT10LnBheWxvYWRUeXBlKX0pfSksby5oZWFkZXJFeHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24oZSl7KHIucmVtb3RlQ2FwYWJpbGl0aWVzJiZyLnJlbW90ZUNhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zfHxbXSkuZm9yRWFjaChmdW5jdGlvbih0KXtlLnVyaT09PXQudXJpJiYoZS5pZD10LmlkKX0pfSk7dmFyIHA9ci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzfHxbe3NzcmM6MTAwMSooMipuKzEpfV07YSYmZD49MTUwMTkmJlwidmlkZW9cIj09PWkmJiFwWzBdLnJ0eCYmKHBbMF0ucnR4PXtzc3JjOnBbMF0uc3NyYysxfSksci53YW50UmVjZWl2ZSYmKHIucnRwUmVjZWl2ZXI9bmV3IGMuUlRDUnRwUmVjZWl2ZXIoci5kdGxzVHJhbnNwb3J0LGkpKSxyLmxvY2FsQ2FwYWJpbGl0aWVzPW8sci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzPXB9KSxcIm1heC1jb21wYXRcIiE9PXQuX2NvbmZpZy5idW5kbGVQb2xpY3kmJihzKz1cImE9Z3JvdXA6QlVORExFIFwiK3QudHJhbnNjZWl2ZXJzLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5taWR9KS5qb2luKFwiIFwiKStcIlxcclxcblwiKSxzKz1cImE9aWNlLW9wdGlvbnM6dHJpY2tsZVxcclxcblwiLHQudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24obixhKXtzKz1yKG4sbi5sb2NhbENhcGFiaWxpdGllcyxcIm9mZmVyXCIsbi5zdHJlYW0sdC5fZHRsc1JvbGUpLHMrPVwiYT1ydGNwLXJzaXplXFxyXFxuXCIsIW4uaWNlR2F0aGVyZXJ8fFwibmV3XCI9PT10LmljZUdhdGhlcmluZ1N0YXRlfHwwIT09YSYmdC51c2luZ0J1bmRsZXx8KG4uaWNlR2F0aGVyZXIuZ2V0TG9jYWxDYW5kaWRhdGVzKCkuZm9yRWFjaChmdW5jdGlvbih0KXt0LmNvbXBvbmVudD0xLHMrPVwiYT1cIitlLndyaXRlQ2FuZGlkYXRlKHQpK1wiXFxyXFxuXCJ9KSxcImNvbXBsZXRlZFwiPT09bi5pY2VHYXRoZXJlci5zdGF0ZSYmKHMrPVwiYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcblwiKSl9KTt2YXIgcD1uZXcgYy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJvZmZlclwiLHNkcDpzfSk7cmV0dXJuIFByb21pc2UucmVzb2x2ZShwKX0sZi5wcm90b3R5cGUuY3JlYXRlQW5zd2VyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0Ll9pc0Nsb3NlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobyhcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IGNhbGwgY3JlYXRlQW5zd2VyIGFmdGVyIGNsb3NlXCIpKTtpZihcImhhdmUtcmVtb3RlLW9mZmVyXCIhPT10LnNpZ25hbGluZ1N0YXRlJiZcImhhdmUtbG9jYWwtcHJhbnN3ZXJcIiE9PXQuc2lnbmFsaW5nU3RhdGUpcmV0dXJuIFByb21pc2UucmVqZWN0KG8oXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQ2FuIG5vdCBjYWxsIGNyZWF0ZUFuc3dlciBpbiBzaWduYWxpbmdTdGF0ZSBcIit0LnNpZ25hbGluZ1N0YXRlKSk7dmFyIG49ZS53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZSh0Ll9zZHBTZXNzaW9uSWQsdC5fc2RwU2Vzc2lvblZlcnNpb24rKyk7dC51c2luZ0J1bmRsZSYmKG4rPVwiYT1ncm91cDpCVU5ETEUgXCIrdC50cmFuc2NlaXZlcnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLm1pZH0pLmpvaW4oXCIgXCIpK1wiXFxyXFxuXCIpLG4rPVwiYT1pY2Utb3B0aW9uczp0cmlja2xlXFxyXFxuXCI7dmFyIGk9ZS5nZXRNZWRpYVNlY3Rpb25zKHQuX3JlbW90ZURlc2NyaXB0aW9uLnNkcCkubGVuZ3RoO3QudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24oZSxzKXtpZighKHMrMT5pKSl7aWYoZS5yZWplY3RlZClyZXR1cm5cImFwcGxpY2F0aW9uXCI9PT1lLmtpbmQ/XCJEVExTL1NDVFBcIj09PWUucHJvdG9jb2w/bis9XCJtPWFwcGxpY2F0aW9uIDAgRFRMUy9TQ1RQIDUwMDBcXHJcXG5cIjpuKz1cIm09YXBwbGljYXRpb24gMCBcIitlLnByb3RvY29sK1wiIHdlYnJ0Yy1kYXRhY2hhbm5lbFxcclxcblwiOlwiYXVkaW9cIj09PWUua2luZD9uKz1cIm09YXVkaW8gMCBVRFAvVExTL1JUUC9TQVZQRiAwXFxyXFxuYT1ydHBtYXA6MCBQQ01VLzgwMDBcXHJcXG5cIjpcInZpZGVvXCI9PT1lLmtpbmQmJihuKz1cIm09dmlkZW8gMCBVRFAvVExTL1JUUC9TQVZQRiAxMjBcXHJcXG5hPXJ0cG1hcDoxMjAgVlA4LzkwMDAwXFxyXFxuXCIpLHZvaWQobis9XCJjPUlOIElQNCAwLjAuMC4wXFxyXFxuYT1pbmFjdGl2ZVxcclxcbmE9bWlkOlwiK2UubWlkK1wiXFxyXFxuXCIpO3ZhciBvO2lmKGUuc3RyZWFtKVwiYXVkaW9cIj09PWUua2luZD9vPWUuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF06XCJ2aWRlb1wiPT09ZS5raW5kJiYobz1lLnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdKSxvJiZkPj0xNTAxOSYmXCJ2aWRlb1wiPT09ZS5raW5kJiYhZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmKGUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHg9e3NzcmM6ZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrMX0pO3ZhciBjPWEoZS5sb2NhbENhcGFiaWxpdGllcyxlLnJlbW90ZUNhcGFiaWxpdGllcyk7IWMuY29kZWNzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cInJ0eFwiPT09ZS5uYW1lLnRvTG93ZXJDYXNlKCl9KS5sZW5ndGgmJmUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJmRlbGV0ZSBlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LG4rPXIoZSxjLFwiYW5zd2VyXCIsZS5zdHJlYW0sdC5fZHRsc1JvbGUpLGUucnRjcFBhcmFtZXRlcnMmJmUucnRjcFBhcmFtZXRlcnMucmVkdWNlZFNpemUmJihuKz1cImE9cnRjcC1yc2l6ZVxcclxcblwiKX19KTt2YXIgcz1uZXcgYy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJhbnN3ZXJcIixzZHA6bn0pO3JldHVybiBQcm9taXNlLnJlc29sdmUocyl9LGYucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZT1mdW5jdGlvbih0KXt2YXIgcixuPXRoaXM7cmV0dXJuIHQmJnZvaWQgMD09PXQuc2RwTUxpbmVJbmRleCYmIXQuc2RwTWlkP1Byb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJzZHBNTGluZUluZGV4IG9yIHNkcE1pZCByZXF1aXJlZFwiKSk6bmV3IFByb21pc2UoZnVuY3Rpb24oYSxpKXtpZighbi5fcmVtb3RlRGVzY3JpcHRpb24pcmV0dXJuIGkobyhcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IGFkZCBJQ0UgY2FuZGlkYXRlIHdpdGhvdXQgYSByZW1vdGUgZGVzY3JpcHRpb25cIikpO2lmKHQmJlwiXCIhPT10LmNhbmRpZGF0ZSl7dmFyIGM9dC5zZHBNTGluZUluZGV4O2lmKHQuc2RwTWlkKWZvcih2YXIgZD0wO2Q8bi50cmFuc2NlaXZlcnMubGVuZ3RoO2QrKylpZihuLnRyYW5zY2VpdmVyc1tkXS5taWQ9PT10LnNkcE1pZCl7Yz1kO2JyZWFrfXZhciBwPW4udHJhbnNjZWl2ZXJzW2NdO2lmKCFwKXJldHVybiBpKG8oXCJPcGVyYXRpb25FcnJvclwiLFwiQ2FuIG5vdCBhZGQgSUNFIGNhbmRpZGF0ZVwiKSk7aWYocC5yZWplY3RlZClyZXR1cm4gYSgpO3ZhciBsPU9iamVjdC5rZXlzKHQuY2FuZGlkYXRlKS5sZW5ndGg+MD9lLnBhcnNlQ2FuZGlkYXRlKHQuY2FuZGlkYXRlKTp7fTtpZihcInRjcFwiPT09bC5wcm90b2NvbCYmKDA9PT1sLnBvcnR8fDk9PT1sLnBvcnQpKXJldHVybiBhKCk7aWYobC5jb21wb25lbnQmJjEhPT1sLmNvbXBvbmVudClyZXR1cm4gYSgpO2lmKCgwPT09Y3x8Yz4wJiZwLmljZVRyYW5zcG9ydCE9PW4udHJhbnNjZWl2ZXJzWzBdLmljZVRyYW5zcG9ydCkmJiFzKHAuaWNlVHJhbnNwb3J0LGwpKXJldHVybiBpKG8oXCJPcGVyYXRpb25FcnJvclwiLFwiQ2FuIG5vdCBhZGQgSUNFIGNhbmRpZGF0ZVwiKSk7dmFyIGY9dC5jYW5kaWRhdGUudHJpbSgpOzA9PT1mLmluZGV4T2YoXCJhPVwiKSYmKGY9Zi5zdWJzdHIoMikpLChyPWUuZ2V0TWVkaWFTZWN0aW9ucyhuLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHApKVtjXSs9XCJhPVwiKyhsLnR5cGU/ZjpcImVuZC1vZi1jYW5kaWRhdGVzXCIpK1wiXFxyXFxuXCIsbi5fcmVtb3RlRGVzY3JpcHRpb24uc2RwPWUuZ2V0RGVzY3JpcHRpb24obi5fcmVtb3RlRGVzY3JpcHRpb24uc2RwKStyLmpvaW4oXCJcIil9ZWxzZSBmb3IodmFyIHU9MDt1PG4udHJhbnNjZWl2ZXJzLmxlbmd0aCYmKG4udHJhbnNjZWl2ZXJzW3VdLnJlamVjdGVkfHwobi50cmFuc2NlaXZlcnNbdV0uaWNlVHJhbnNwb3J0LmFkZFJlbW90ZUNhbmRpZGF0ZSh7fSksKHI9ZS5nZXRNZWRpYVNlY3Rpb25zKG4uX3JlbW90ZURlc2NyaXB0aW9uLnNkcCkpW3VdKz1cImE9ZW5kLW9mLWNhbmRpZGF0ZXNcXHJcXG5cIixuLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHA9ZS5nZXREZXNjcmlwdGlvbihuLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHApK3Iuam9pbihcIlwiKSwhbi51c2luZ0J1bmRsZSkpO3UrKyk7YSgpfSl9LGYucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKGUpe2lmKGUmJmUgaW5zdGFuY2VvZiBjLk1lZGlhU3RyZWFtVHJhY2spe3ZhciB0PW51bGw7aWYodGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbihyKXtyLnJ0cFNlbmRlciYmci5ydHBTZW5kZXIudHJhY2s9PT1lP3Q9ci5ydHBTZW5kZXI6ci5ydHBSZWNlaXZlciYmci5ydHBSZWNlaXZlci50cmFjaz09PWUmJih0PXIucnRwUmVjZWl2ZXIpfSksIXQpdGhyb3cgbyhcIkludmFsaWRBY2Nlc3NFcnJvclwiLFwiSW52YWxpZCBzZWxlY3Rvci5cIik7cmV0dXJuIHQuZ2V0U3RhdHMoKX12YXIgcj1bXTtyZXR1cm4gdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbihlKXtbXCJydHBTZW5kZXJcIixcInJ0cFJlY2VpdmVyXCIsXCJpY2VHYXRoZXJlclwiLFwiaWNlVHJhbnNwb3J0XCIsXCJkdGxzVHJhbnNwb3J0XCJdLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XSYmci5wdXNoKGVbdF0uZ2V0U3RhdHMoKSl9KX0pLFByb21pc2UuYWxsKHIpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IE1hcDtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuZm9yRWFjaChmdW5jdGlvbihlKXt0LnNldChlLmlkLGUpfSl9KSx0fSl9O1tcIlJUQ1J0cFNlbmRlclwiLFwiUlRDUnRwUmVjZWl2ZXJcIixcIlJUQ0ljZUdhdGhlcmVyXCIsXCJSVENJY2VUcmFuc3BvcnRcIixcIlJUQ0R0bHNUcmFuc3BvcnRcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj1jW2VdO2lmKHImJnIucHJvdG90eXBlJiZyLnByb3RvdHlwZS5nZXRTdGF0cyl7dmFyIG49ci5wcm90b3R5cGUuZ2V0U3RhdHM7ci5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBseSh0aGlzKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciByPW5ldyBNYXA7cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24obil7ZVtuXS50eXBlPXQoZVtuXSksci5zZXQobixlW25dKX0pLHJ9KX19fSk7dmFyIHU9W1wiY3JlYXRlT2ZmZXJcIixcImNyZWF0ZUFuc3dlclwiXTtyZXR1cm4gdS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PWYucHJvdG90eXBlW2VdO2YucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGVbMF18fFwiZnVuY3Rpb25cIj09dHlwZW9mIGVbMV0/dC5hcHBseSh0aGlzLFthcmd1bWVudHNbMl1dKS50aGVuKGZ1bmN0aW9uKHQpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGVbMF0mJmVbMF0uYXBwbHkobnVsbCxbdF0pfSxmdW5jdGlvbih0KXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzFdJiZlWzFdLmFwcGx5KG51bGwsW3RdKX0pOnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pLCh1PVtcInNldExvY2FsRGVzY3JpcHRpb25cIixcInNldFJlbW90ZURlc2NyaXB0aW9uXCIsXCJhZGRJY2VDYW5kaWRhdGVcIl0pLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9Zi5wcm90b3R5cGVbZV07Zi5wcm90b3R5cGVbZV09ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZVsxXXx8XCJmdW5jdGlvblwiPT10eXBlb2YgZVsyXT90LmFwcGx5KHRoaXMsYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uKCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZVsxXSYmZVsxXS5hcHBseShudWxsKX0sZnVuY3Rpb24odCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZVsyXSYmZVsyXS5hcHBseShudWxsLFt0XSl9KTp0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSxbXCJnZXRTdGF0c1wiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PWYucHJvdG90eXBlW2VdO2YucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGVbMV0/dC5hcHBseSh0aGlzLGFyZ3VtZW50cykudGhlbihmdW5jdGlvbigpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGVbMV0mJmVbMV0uYXBwbHkobnVsbCl9KTp0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSxmfTtcbn0se1wic2RwXCI6XCJZSHZoXCJ9XSxcIllkS3hcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlKXt2YXIgcj1lJiZlLm5hdmlnYXRvcix0PXIubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5iaW5kKHIubWVkaWFEZXZpY2VzKTtyLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIFByb21pc2UucmVqZWN0KGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOntQZXJtaXNzaW9uRGVuaWVkRXJyb3I6XCJOb3RBbGxvd2VkRXJyb3JcIn1bZS5uYW1lXXx8ZS5uYW1lLG1lc3NhZ2U6ZS5tZXNzYWdlLGNvbnN0cmFpbnQ6ZS5jb25zdHJhaW50LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZX19fShlKSl9KX19T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltR2V0VXNlck1lZGlhPWU7XG59LHt9XSxcIlAzYlZcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlKXtcImdldERpc3BsYXlNZWRpYVwiaW4gZS5uYXZpZ2F0b3ImJmUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmKGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmXCJnZXREaXNwbGF5TWVkaWFcImluIGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlc3x8KGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWE9ZS5uYXZpZ2F0b3IuZ2V0RGlzcGxheU1lZGlhLmJpbmQoZS5uYXZpZ2F0b3IpKSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltR2V0RGlzcGxheU1lZGlhPWU7XG59LHt9XSxcIlhSaWNcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltUGVlckNvbm5lY3Rpb249cCxleHBvcnRzLnNoaW1SZXBsYWNlVHJhY2s9YSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcInNoaW1HZXRVc2VyTWVkaWFcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbi5zaGltR2V0VXNlck1lZGlhfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwic2hpbUdldERpc3BsYXlNZWRpYVwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpLnNoaW1HZXREaXNwbGF5TWVkaWF9fSk7dmFyIGU9cyhyZXF1aXJlKFwiLi4vdXRpbHNcIikpLHQ9cmVxdWlyZShcIi4vZmlsdGVyaWNlc2VydmVyc1wiKSxyPW8ocmVxdWlyZShcInJ0Y3BlZXJjb25uZWN0aW9uLXNoaW1cIikpLG49cmVxdWlyZShcIi4vZ2V0dXNlcm1lZGlhXCIpLGk9cmVxdWlyZShcIi4vZ2V0ZGlzcGxheW1lZGlhXCIpO2Z1bmN0aW9uIG8oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIGMoKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBXZWFrTWFwKXJldHVybiBudWxsO3ZhciBlPW5ldyBXZWFrTWFwO3JldHVybiBjPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LGV9ZnVuY3Rpb24gcyhlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXJldHVybntkZWZhdWx0OmV9O3ZhciB0PWMoKTtpZih0JiZ0LmhhcyhlKSlyZXR1cm4gdC5nZXQoZSk7dmFyIHI9e30sbj1PYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7Zm9yKHZhciBpIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkpe3ZhciBvPW4/T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLGkpOm51bGw7byYmKG8uZ2V0fHxvLnNldCk/T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsaSxvKTpyW2ldPWVbaV19cmV0dXJuIHIuZGVmYXVsdD1lLHQmJnQuc2V0KGUscikscn1mdW5jdGlvbiBwKG4saSl7aWYobi5SVENJY2VHYXRoZXJlciYmKG4uUlRDSWNlQ2FuZGlkYXRlfHwobi5SVENJY2VDYW5kaWRhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSxuLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbnx8KG4uUlRDU2Vzc2lvbkRlc2NyaXB0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiBlfSksaS52ZXJzaW9uPDE1MDI1KSl7dmFyIG89T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLk1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLFwiZW5hYmxlZFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkobi5NZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZSxcImVuYWJsZWRcIix7c2V0OmZ1bmN0aW9uKGUpe28uc2V0LmNhbGwodGhpcyxlKTt2YXIgdD1uZXcgRXZlbnQoXCJlbmFibGVkXCIpO3QuZW5hYmxlZD1lLHRoaXMuZGlzcGF0Y2hFdmVudCh0KX19KX0hbi5SVENSdHBTZW5kZXJ8fFwiZHRtZlwiaW4gbi5SVENSdHBTZW5kZXIucHJvdG90eXBlfHxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5SVENSdHBTZW5kZXIucHJvdG90eXBlLFwiZHRtZlwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5fZHRtZiYmKFwiYXVkaW9cIj09PXRoaXMudHJhY2sua2luZD90aGlzLl9kdG1mPW5ldyBuLlJUQ0R0bWZTZW5kZXIodGhpcyk6XCJ2aWRlb1wiPT09dGhpcy50cmFjay5raW5kJiYodGhpcy5fZHRtZj1udWxsKSksdGhpcy5fZHRtZn19KSxuLlJUQ0R0bWZTZW5kZXImJiFuLlJUQ0RUTUZTZW5kZXImJihuLlJUQ0RUTUZTZW5kZXI9bi5SVENEdG1mU2VuZGVyKTt2YXIgYz0oMCxyLmRlZmF1bHQpKG4saS52ZXJzaW9uKTtuLlJUQ1BlZXJDb25uZWN0aW9uPWZ1bmN0aW9uKHIpe3JldHVybiByJiZyLmljZVNlcnZlcnMmJihyLmljZVNlcnZlcnM9KDAsdC5maWx0ZXJJY2VTZXJ2ZXJzKShyLmljZVNlcnZlcnMsaS52ZXJzaW9uKSxlLmxvZyhcIklDRSBzZXJ2ZXJzIGFmdGVyIGZpbHRlcmluZzpcIixyLmljZVNlcnZlcnMpKSxuZXcgYyhyKX0sbi5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU9Yy5wcm90b3R5cGV9ZnVuY3Rpb24gYShlKXshZS5SVENSdHBTZW5kZXJ8fFwicmVwbGFjZVRyYWNrXCJpbiBlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGV8fChlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUucmVwbGFjZVRyYWNrPWUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5zZXRUcmFjayl9XG59LHtcIi4uL3V0aWxzXCI6XCJpU3hDXCIsXCIuL2ZpbHRlcmljZXNlcnZlcnNcIjpcIk5aMUNcIixcInJ0Y3BlZXJjb25uZWN0aW9uLXNoaW1cIjpcIk5KMnVcIixcIi4vZ2V0dXNlcm1lZGlhXCI6XCJZZEt4XCIsXCIuL2dldGRpc3BsYXltZWRpYVwiOlwiUDNiVlwifV0sXCJHelN2XCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuc2hpbUdldFVzZXJNZWRpYT1uO3ZhciBlPW8ocmVxdWlyZShcIi4uL3V0aWxzXCIpKTtmdW5jdGlvbiB0KCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgV2Vha01hcClyZXR1cm4gbnVsbDt2YXIgZT1uZXcgV2Vha01hcDtyZXR1cm4gdD1mdW5jdGlvbigpe3JldHVybiBlfSxlfWZ1bmN0aW9uIG8oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO2lmKG51bGw9PT1lfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZSlyZXR1cm57ZGVmYXVsdDplfTt2YXIgbz10KCk7aWYobyYmby5oYXMoZSkpcmV0dXJuIG8uZ2V0KGUpO3ZhciByPXt9LG49T2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2Zvcih2YXIgaSBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpKXt2YXIgYT1uP09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxpKTpudWxsO2EmJihhLmdldHx8YS5zZXQpP09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLGksYSk6cltpXT1lW2ldfXJldHVybiByLmRlZmF1bHQ9ZSxvJiZvLnNldChlLHIpLHJ9ZnVuY3Rpb24gcihlKXtyZXR1cm4ocj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gbih0LG8pe3ZhciBuPXQmJnQubmF2aWdhdG9yLGk9dCYmdC5NZWRpYVN0cmVhbVRyYWNrO2lmKG4uZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKHQsbyxyKXtlLmRlcHJlY2F0ZWQoXCJuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhXCIsXCJuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYVwiKSxuLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEodCkudGhlbihvLHIpfSwhKG8udmVyc2lvbj41NSYmXCJhdXRvR2FpbkNvbnRyb2xcImluIG4ubWVkaWFEZXZpY2VzLmdldFN1cHBvcnRlZENvbnN0cmFpbnRzKCkpKXt2YXIgYT1mdW5jdGlvbihlLHQsbyl7dCBpbiBlJiYhKG8gaW4gZSkmJihlW29dPWVbdF0sZGVsZXRlIGVbdF0pfSxzPW4ubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5iaW5kKG4ubWVkaWFEZXZpY2VzKTtpZihuLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09PXIoZSkmJlwib2JqZWN0XCI9PT1yKGUuYXVkaW8pJiYoZT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKSxhKGUuYXVkaW8sXCJhdXRvR2FpbkNvbnRyb2xcIixcIm1vekF1dG9HYWluQ29udHJvbFwiKSxhKGUuYXVkaW8sXCJub2lzZVN1cHByZXNzaW9uXCIsXCJtb3pOb2lzZVN1cHByZXNzaW9uXCIpKSxzKGUpfSxpJiZpLnByb3RvdHlwZS5nZXRTZXR0aW5ncyl7dmFyIHA9aS5wcm90b3R5cGUuZ2V0U2V0dGluZ3M7aS5wcm90b3R5cGUuZ2V0U2V0dGluZ3M9ZnVuY3Rpb24oKXt2YXIgZT1wLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gYShlLFwibW96QXV0b0dhaW5Db250cm9sXCIsXCJhdXRvR2FpbkNvbnRyb2xcIiksYShlLFwibW96Tm9pc2VTdXBwcmVzc2lvblwiLFwibm9pc2VTdXBwcmVzc2lvblwiKSxlfX1pZihpJiZpLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnRzKXt2YXIgdT1pLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnRzO2kucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludHM9ZnVuY3Rpb24oZSl7cmV0dXJuXCJhdWRpb1wiPT09dGhpcy5raW5kJiZcIm9iamVjdFwiPT09cihlKSYmKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSksYShlLFwiYXV0b0dhaW5Db250cm9sXCIsXCJtb3pBdXRvR2FpbkNvbnRyb2xcIiksYShlLFwibm9pc2VTdXBwcmVzc2lvblwiLFwibW96Tm9pc2VTdXBwcmVzc2lvblwiKSksdS5hcHBseSh0aGlzLFtlXSl9fX19XG59LHtcIi4uL3V0aWxzXCI6XCJpU3hDXCJ9XSxcIlV1R1VcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShlLGkpe2UubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmXCJnZXREaXNwbGF5TWVkaWFcImluIGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlc3x8ZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiYoZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYT1mdW5jdGlvbihhKXtpZighYXx8IWEudmlkZW8pe3ZhciB0PW5ldyBET01FeGNlcHRpb24oXCJnZXREaXNwbGF5TWVkaWEgd2l0aG91dCB2aWRlbyBjb25zdHJhaW50cyBpcyB1bmRlZmluZWRcIik7cmV0dXJuIHQubmFtZT1cIk5vdEZvdW5kRXJyb3JcIix0LmNvZGU9OCxQcm9taXNlLnJlamVjdCh0KX1yZXR1cm4hMD09PWEudmlkZW8/YS52aWRlbz17bWVkaWFTb3VyY2U6aX06YS52aWRlby5tZWRpYVNvdXJjZT1pLGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoYSl9KX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1HZXREaXNwbGF5TWVkaWE9ZTtcbn0se31dLFwiRnpkclwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1PblRyYWNrPXMsZXhwb3J0cy5zaGltUGVlckNvbm5lY3Rpb249YyxleHBvcnRzLnNoaW1TZW5kZXJHZXRTdGF0cz1wLGV4cG9ydHMuc2hpbVJlY2VpdmVyR2V0U3RhdHM9dSxleHBvcnRzLnNoaW1SZW1vdmVTdHJlYW09ZixleHBvcnRzLnNoaW1SVENEYXRhQ2hhbm5lbD1kLGV4cG9ydHMuc2hpbUFkZFRyYW5zY2VpdmVyPUMsZXhwb3J0cy5zaGltR2V0UGFyYW1ldGVycz15LGV4cG9ydHMuc2hpbUNyZWF0ZU9mZmVyPWwsZXhwb3J0cy5zaGltQ3JlYXRlQW5zd2VyPW0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJzaGltR2V0VXNlck1lZGlhXCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuc2hpbUdldFVzZXJNZWRpYX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcInNoaW1HZXREaXNwbGF5TWVkaWFcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbi5zaGltR2V0RGlzcGxheU1lZGlhfX0pO3ZhciBlPW8ocmVxdWlyZShcIi4uL3V0aWxzXCIpKSx0PXJlcXVpcmUoXCIuL2dldHVzZXJtZWRpYVwiKSxuPXJlcXVpcmUoXCIuL2dldGRpc3BsYXltZWRpYVwiKTtmdW5jdGlvbiByKCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgV2Vha01hcClyZXR1cm4gbnVsbDt2YXIgZT1uZXcgV2Vha01hcDtyZXR1cm4gcj1mdW5jdGlvbigpe3JldHVybiBlfSxlfWZ1bmN0aW9uIG8oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO2lmKG51bGw9PT1lfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZSlyZXR1cm57ZGVmYXVsdDplfTt2YXIgdD1yKCk7aWYodCYmdC5oYXMoZSkpcmV0dXJuIHQuZ2V0KGUpO3ZhciBuPXt9LG89T2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2Zvcih2YXIgaSBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpKXt2YXIgYT1vP09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxpKTpudWxsO2EmJihhLmdldHx8YS5zZXQpP09iamVjdC5kZWZpbmVQcm9wZXJ0eShuLGksYSk6bltpXT1lW2ldfXJldHVybiBuLmRlZmF1bHQ9ZSx0JiZ0LnNldChlLG4pLG59ZnVuY3Rpb24gaShlLHQsbil7cmV0dXJuIHQgaW4gZT9PYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6ZVt0XT1uLGV9ZnVuY3Rpb24gYShlKXtyZXR1cm4oYT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gcyhlKXtcIm9iamVjdFwiPT09YShlKSYmZS5SVENUcmFja0V2ZW50JiZcInJlY2VpdmVyXCJpbiBlLlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlJiYhKFwidHJhbnNjZWl2ZXJcImluIGUuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUpJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5SVENUcmFja0V2ZW50LnByb3RvdHlwZSxcInRyYW5zY2VpdmVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybntyZWNlaXZlcjp0aGlzLnJlY2VpdmVyfX19KX1mdW5jdGlvbiBjKGUsdCl7aWYoXCJvYmplY3RcIj09PWEoZSkmJihlLlJUQ1BlZXJDb25uZWN0aW9ufHxlLm1velJUQ1BlZXJDb25uZWN0aW9uKSl7IWUuUlRDUGVlckNvbm5lY3Rpb24mJmUubW96UlRDUGVlckNvbm5lY3Rpb24mJihlLlJUQ1BlZXJDb25uZWN0aW9uPWUubW96UlRDUGVlckNvbm5lY3Rpb24pLHQudmVyc2lvbjw1MyYmW1wic2V0TG9jYWxEZXNjcmlwdGlvblwiLFwic2V0UmVtb3RlRGVzY3JpcHRpb25cIixcImFkZEljZUNhbmRpZGF0ZVwiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW3RdLHI9aSh7fSx0LGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1swXT1uZXcoXCJhZGRJY2VDYW5kaWRhdGVcIj09PXQ/ZS5SVENJY2VDYW5kaWRhdGU6ZS5SVENTZXNzaW9uRGVzY3JpcHRpb24pKGFyZ3VtZW50c1swXSksbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVt0XT1yW3RdfSk7dmFyIG49e2luYm91bmRydHA6XCJpbmJvdW5kLXJ0cFwiLG91dGJvdW5kcnRwOlwib3V0Ym91bmQtcnRwXCIsY2FuZGlkYXRlcGFpcjpcImNhbmRpZGF0ZS1wYWlyXCIsbG9jYWxjYW5kaWRhdGU6XCJsb2NhbC1jYW5kaWRhdGVcIixyZW1vdGVjYW5kaWRhdGU6XCJyZW1vdGUtY2FuZGlkYXRlXCJ9LHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXt2YXJbZSxvLGldPWFyZ3VtZW50cztyZXR1cm4gci5hcHBseSh0aGlzLFtlfHxudWxsXSkudGhlbihmdW5jdGlvbihlKXtpZih0LnZlcnNpb248NTMmJiFvKXRyeXtlLmZvckVhY2goZnVuY3Rpb24oZSl7ZS50eXBlPW5bZS50eXBlXXx8ZS50eXBlfSl9Y2F0Y2gocil7aWYoXCJUeXBlRXJyb3JcIiE9PXIubmFtZSl0aHJvdyByO2UuZm9yRWFjaChmdW5jdGlvbih0LHIpe2Uuc2V0KHIsT2JqZWN0LmFzc2lnbih7fSx0LHt0eXBlOm5bdC50eXBlXXx8dC50eXBlfSkpfSl9cmV0dXJuIGV9KS50aGVuKG8saSl9fX1mdW5jdGlvbiBwKGUpe2lmKFwib2JqZWN0XCI9PT1hKGUpJiZlLlJUQ1BlZXJDb25uZWN0aW9uJiZlLlJUQ1J0cFNlbmRlciYmIShlLlJUQ1J0cFNlbmRlciYmXCJnZXRTdGF0c1wiaW4gZS5SVENSdHBTZW5kZXIucHJvdG90eXBlKSl7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVyczt0JiYoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsbj10LmFwcGx5KHRoaXMsW10pO3JldHVybiBuLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuX3BjPWV9KSxufSk7dmFyIG49ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7biYmKGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrPWZ1bmN0aW9uKCl7dmFyIGU9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGUuX3BjPXRoaXMsZX0pLGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYWNrP3RoaXMuX3BjLmdldFN0YXRzKHRoaXMudHJhY2spOlByb21pc2UucmVzb2x2ZShuZXcgTWFwKX19fWZ1bmN0aW9uIHUodCl7aWYoXCJvYmplY3RcIj09PWEodCkmJnQuUlRDUGVlckNvbm5lY3Rpb24mJnQuUlRDUnRwU2VuZGVyJiYhKHQuUlRDUnRwU2VuZGVyJiZcImdldFN0YXRzXCJpbiB0LlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZSkpe3ZhciBuPXQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycztuJiYodC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PW4uYXBwbHkodGhpcyxbXSk7cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdC5fcGM9ZX0pLHR9KSxlLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHQsXCJ0cmFja1wiLGZ1bmN0aW9uKGUpe3JldHVybiBlLnJlY2VpdmVyLl9wYz1lLnNyY0VsZW1lbnQsZX0pLHQuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BjLmdldFN0YXRzKHRoaXMudHJhY2spfX19ZnVuY3Rpb24gZih0KXshdC5SVENQZWVyQ29ubmVjdGlvbnx8XCJyZW1vdmVTdHJlYW1cImluIHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlfHwodC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7ZS5kZXByZWNhdGVkKFwicmVtb3ZlU3RyZWFtXCIsXCJyZW1vdmVUcmFja1wiKSx0aGlzLmdldFNlbmRlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UudHJhY2smJnQuZ2V0VHJhY2tzKCkuaW5jbHVkZXMoZS50cmFjaykmJm4ucmVtb3ZlVHJhY2soZSl9KX0pfWZ1bmN0aW9uIGQoZSl7ZS5EYXRhQ2hhbm5lbCYmIWUuUlRDRGF0YUNoYW5uZWwmJihlLlJUQ0RhdGFDaGFubmVsPWUuRGF0YUNoYW5uZWwpfWZ1bmN0aW9uIEMoZSl7aWYoXCJvYmplY3RcIj09PWEoZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24pe3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYW5zY2VpdmVyO3QmJihlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFuc2NlaXZlcj1mdW5jdGlvbigpe3RoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzPVtdO3ZhciBlPWFyZ3VtZW50c1sxXSxuPWUmJlwic2VuZEVuY29kaW5nc1wiaW4gZTtuJiZlLnNlbmRFbmNvZGluZ3MuZm9yRWFjaChmdW5jdGlvbihlKXtpZihcInJpZFwiaW4gZSl7aWYoIS9eW2EtejAtOV17MCwxNn0kL2kudGVzdChlLnJpZCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgUklEIHZhbHVlIHByb3ZpZGVkLlwiKX1pZihcInNjYWxlUmVzb2x1dGlvbkRvd25CeVwiaW4gZSYmIShwYXJzZUZsb2F0KGUuc2NhbGVSZXNvbHV0aW9uRG93bkJ5KT49MSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJzY2FsZV9yZXNvbHV0aW9uX2Rvd25fYnkgbXVzdCBiZSA+PSAxLjBcIik7aWYoXCJtYXhGcmFtZXJhdGVcImluIGUmJiEocGFyc2VGbG9hdChlLm1heEZyYW1lcmF0ZSk+PTApKXRocm93IG5ldyBSYW5nZUVycm9yKFwibWF4X2ZyYW1lcmF0ZSBtdXN0IGJlID49IDAuMFwiKX0pO3ZhciByPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKG4pe3ZhcntzZW5kZXI6b309cixpPW8uZ2V0UGFyYW1ldGVycygpO1wiZW5jb2RpbmdzXCJpbiBpJiYoMSE9PWkuZW5jb2RpbmdzLmxlbmd0aHx8MCE9PU9iamVjdC5rZXlzKGkuZW5jb2RpbmdzWzBdKS5sZW5ndGgpfHwoaS5lbmNvZGluZ3M9ZS5zZW5kRW5jb2RpbmdzLG8uc2VuZEVuY29kaW5ncz1lLnNlbmRFbmNvZGluZ3MsdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMucHVzaChvLnNldFBhcmFtZXRlcnMoaSkudGhlbihmdW5jdGlvbigpe2RlbGV0ZSBvLnNlbmRFbmNvZGluZ3N9KS5jYXRjaChmdW5jdGlvbigpe2RlbGV0ZSBvLnNlbmRFbmNvZGluZ3N9KSkpfXJldHVybiByfSl9fWZ1bmN0aW9uIHkoZSl7aWYoXCJvYmplY3RcIj09PWEoZSkmJmUuUlRDUnRwU2VuZGVyKXt2YXIgdD1lLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUuZ2V0UGFyYW1ldGVyczt0JiYoZS5SVENSdHBTZW5kZXIucHJvdG90eXBlLmdldFBhcmFtZXRlcnM9ZnVuY3Rpb24oKXt2YXIgZT10LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm5cImVuY29kaW5nc1wiaW4gZXx8KGUuZW5jb2RpbmdzPVtdLmNvbmNhdCh0aGlzLnNlbmRFbmNvZGluZ3N8fFt7fV0pKSxlfSl9fWZ1bmN0aW9uIGwoZSl7aWYoXCJvYmplY3RcIj09PWEoZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24pe3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9mZmVyO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9mZmVyPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLG49dGhpcztyZXR1cm4gdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMmJnRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzLmxlbmd0aD9Qcm9taXNlLmFsbCh0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcykudGhlbihmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KG4sZSl9KS5maW5hbGx5KGZ1bmN0aW9uKCl7bi5zZXRQYXJhbWV0ZXJzUHJvbWlzZXM9W119KTp0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fWZ1bmN0aW9uIG0oZSl7aWYoXCJvYmplY3RcIj09PWEoZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24pe3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZUFuc3dlcjtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVBbnN3ZXI9ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMsbj10aGlzO3JldHVybiB0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcyYmdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMubGVuZ3RoP1Byb21pc2UuYWxsKHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkobixlKX0pLmZpbmFsbHkoZnVuY3Rpb24oKXtuLnNldFBhcmFtZXRlcnNQcm9taXNlcz1bXX0pOnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19XG59LHtcIi4uL3V0aWxzXCI6XCJpU3hDXCIsXCIuL2dldHVzZXJtZWRpYVwiOlwiR3pTdlwiLFwiLi9nZXRkaXNwbGF5bWVkaWFcIjpcIlV1R1VcIn1dLFwidDFsTFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnNoaW1Mb2NhbFN0cmVhbXNBUEk9bixleHBvcnRzLnNoaW1SZW1vdGVTdHJlYW1zQVBJPWksZXhwb3J0cy5zaGltQ2FsbGJhY2tzQVBJPWEsZXhwb3J0cy5zaGltR2V0VXNlck1lZGlhPWMsZXhwb3J0cy5zaGltQ29uc3RyYWludHM9cyxleHBvcnRzLnNoaW1SVENJY2VTZXJ2ZXJVcmxzPWQsZXhwb3J0cy5zaGltVHJhY2tFdmVudFRyYW5zY2VpdmVyPWYsZXhwb3J0cy5zaGltQ3JlYXRlT2ZmZXJMZWdhY3k9cCxleHBvcnRzLnNoaW1BdWRpb0NvbnRleHQ9dTt2YXIgZT1yKHJlcXVpcmUoXCIuLi91dGlsc1wiKSk7ZnVuY3Rpb24gdCgpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuIG51bGw7dmFyIGU9bmV3IFdlYWtNYXA7cmV0dXJuIHQ9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX1mdW5jdGlvbiByKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTtpZihudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpcmV0dXJue2RlZmF1bHQ6ZX07dmFyIHI9dCgpO2lmKHImJnIuaGFzKGUpKXJldHVybiByLmdldChlKTt2YXIgbz17fSxuPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtmb3IodmFyIGkgaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSl7dmFyIGE9bj9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsaSk6bnVsbDthJiYoYS5nZXR8fGEuc2V0KT9PYmplY3QuZGVmaW5lUHJvcGVydHkobyxpLGEpOm9baV09ZVtpXX1yZXR1cm4gby5kZWZhdWx0PWUsciYmci5zZXQoZSxvKSxvfWZ1bmN0aW9uIG8oZSl7cmV0dXJuKG89XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX0pKGUpfWZ1bmN0aW9uIG4oZSl7aWYoXCJvYmplY3RcIj09PW8oZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24pe2lmKFwiZ2V0TG9jYWxTdHJlYW1zXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZXx8KGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2NhbFN0cmVhbXN8fCh0aGlzLl9sb2NhbFN0cmVhbXM9W10pLHRoaXMuX2xvY2FsU3RyZWFtc30pLCEoXCJhZGRTdHJlYW1cImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSl7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKGUpe3ZhciByPXRoaXM7dGhpcy5fbG9jYWxTdHJlYW1zfHwodGhpcy5fbG9jYWxTdHJlYW1zPVtdKSx0aGlzLl9sb2NhbFN0cmVhbXMuaW5jbHVkZXMoZSl8fHRoaXMuX2xvY2FsU3RyZWFtcy5wdXNoKGUpLGUuZ2V0QXVkaW9UcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKG8pe3JldHVybiB0LmNhbGwocixvLGUpfSksZS5nZXRWaWRlb1RyYWNrcygpLmZvckVhY2goZnVuY3Rpb24obyl7cmV0dXJuIHQuY2FsbChyLG8sZSl9KX0sZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oZSl7Zm9yKHZhciByPXRoaXMsbz1hcmd1bWVudHMubGVuZ3RoLG49bmV3IEFycmF5KG8+MT9vLTE6MCksaT0xO2k8bztpKyspbltpLTFdPWFyZ3VtZW50c1tpXTtyZXR1cm4gbiYmbi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IuX2xvY2FsU3RyZWFtcz9yLl9sb2NhbFN0cmVhbXMuaW5jbHVkZXMoZSl8fHIuX2xvY2FsU3RyZWFtcy5wdXNoKGUpOnIuX2xvY2FsU3RyZWFtcz1bZV19KSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19XCJyZW1vdmVTdHJlYW1cImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlfHwoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fbG9jYWxTdHJlYW1zfHwodGhpcy5fbG9jYWxTdHJlYW1zPVtdKTt2YXIgcj10aGlzLl9sb2NhbFN0cmVhbXMuaW5kZXhPZihlKTtpZigtMSE9PXIpe3RoaXMuX2xvY2FsU3RyZWFtcy5zcGxpY2UociwxKTt2YXIgbz1lLmdldFRyYWNrcygpO3RoaXMuZ2V0U2VuZGVycygpLmZvckVhY2goZnVuY3Rpb24oZSl7by5pbmNsdWRlcyhlLnRyYWNrKSYmdC5yZW1vdmVUcmFjayhlKX0pfX0pfX1mdW5jdGlvbiBpKGUpe2lmKFwib2JqZWN0XCI9PT1vKGUpJiZlLlJUQ1BlZXJDb25uZWN0aW9uJiYoXCJnZXRSZW1vdGVTdHJlYW1zXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZXx8KGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlbW90ZVN0cmVhbXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVtb3RlU3RyZWFtcz90aGlzLl9yZW1vdGVTdHJlYW1zOltdfSksIShcIm9uYWRkc3RyZWFtXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsXCJvbmFkZHN0cmVhbVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25hZGRzdHJlYW19LHNldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX29uYWRkc3RyZWFtJiYodGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWRkc3RyZWFtXCIsdGhpcy5fb25hZGRzdHJlYW0pLHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYWNrXCIsdGhpcy5fb25hZGRzdHJlYW1wb2x5KSksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiYWRkc3RyZWFtXCIsdGhpcy5fb25hZGRzdHJlYW09ZSksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwidHJhY2tcIix0aGlzLl9vbmFkZHN0cmVhbXBvbHk9ZnVuY3Rpb24oZSl7ZS5zdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oZSl7aWYodC5fcmVtb3RlU3RyZWFtc3x8KHQuX3JlbW90ZVN0cmVhbXM9W10pLCF0Ll9yZW1vdGVTdHJlYW1zLmluY2x1ZGVzKGUpKXt0Ll9yZW1vdGVTdHJlYW1zLnB1c2goZSk7dmFyIHI9bmV3IEV2ZW50KFwiYWRkc3RyZWFtXCIpO3Iuc3RyZWFtPWUsdC5kaXNwYXRjaEV2ZW50KHIpfX0pfSl9fSk7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb249ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLl9vbmFkZHN0cmVhbXBvbHl8fHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInRyYWNrXCIsdGhpcy5fb25hZGRzdHJlYW1wb2x5PWZ1bmN0aW9uKHQpe3Quc3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKGUuX3JlbW90ZVN0cmVhbXN8fChlLl9yZW1vdGVTdHJlYW1zPVtdKSwhKGUuX3JlbW90ZVN0cmVhbXMuaW5kZXhPZih0KT49MCkpe2UuX3JlbW90ZVN0cmVhbXMucHVzaCh0KTt2YXIgcj1uZXcgRXZlbnQoXCJhZGRzdHJlYW1cIik7ci5zdHJlYW09dCxlLmRpc3BhdGNoRXZlbnQocil9fSl9KSx0LmFwcGx5KGUsYXJndW1lbnRzKX19fWZ1bmN0aW9uIGEoZSl7aWYoXCJvYmplY3RcIj09PW8oZSkmJmUuUlRDUGVlckNvbm5lY3Rpb24pe3ZhciB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLHI9dC5jcmVhdGVPZmZlcixuPXQuY3JlYXRlQW5zd2VyLGk9dC5zZXRMb2NhbERlc2NyaXB0aW9uLGE9dC5zZXRSZW1vdGVEZXNjcmlwdGlvbixjPXQuYWRkSWNlQ2FuZGlkYXRlO3QuY3JlYXRlT2ZmZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbz1hcmd1bWVudHMubGVuZ3RoPj0yP2FyZ3VtZW50c1syXTphcmd1bWVudHNbMF0sbj1yLmFwcGx5KHRoaXMsW29dKTtyZXR1cm4gdD8obi50aGVuKGUsdCksUHJvbWlzZS5yZXNvbHZlKCkpOm59LHQuY3JlYXRlQW5zd2VyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD49Mj9hcmd1bWVudHNbMl06YXJndW1lbnRzWzBdLG89bi5hcHBseSh0aGlzLFtyXSk7cmV0dXJuIHQ/KG8udGhlbihlLHQpLFByb21pc2UucmVzb2x2ZSgpKTpvfTt2YXIgcz1mdW5jdGlvbihlLHQscil7dmFyIG89aS5hcHBseSh0aGlzLFtlXSk7cmV0dXJuIHI/KG8udGhlbih0LHIpLFByb21pc2UucmVzb2x2ZSgpKTpvfTt0LnNldExvY2FsRGVzY3JpcHRpb249cyxzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbz1hLmFwcGx5KHRoaXMsW2VdKTtyZXR1cm4gcj8oby50aGVuKHQsciksUHJvbWlzZS5yZXNvbHZlKCkpOm99LHQuc2V0UmVtb3RlRGVzY3JpcHRpb249cyxzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbz1jLmFwcGx5KHRoaXMsW2VdKTtyZXR1cm4gcj8oby50aGVuKHQsciksUHJvbWlzZS5yZXNvbHZlKCkpOm99LHQuYWRkSWNlQ2FuZGlkYXRlPXN9fWZ1bmN0aW9uIGMoZSl7dmFyIHQ9ZSYmZS5uYXZpZ2F0b3I7aWYodC5tZWRpYURldmljZXMmJnQubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSl7dmFyIHI9dC5tZWRpYURldmljZXMsbz1yLmdldFVzZXJNZWRpYS5iaW5kKHIpO3QubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYT1mdW5jdGlvbihlKXtyZXR1cm4gbyhzKGUpKX19IXQuZ2V0VXNlck1lZGlhJiZ0Lm1lZGlhRGV2aWNlcyYmdC5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhJiYodC5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSxyLG8pe3QubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShlKS50aGVuKHIsbyl9LmJpbmQodCkpfWZ1bmN0aW9uIHModCl7cmV0dXJuIHQmJnZvaWQgMCE9PXQudmlkZW8/T2JqZWN0LmFzc2lnbih7fSx0LHt2aWRlbzplLmNvbXBhY3RPYmplY3QodC52aWRlbyl9KTp0fWZ1bmN0aW9uIGQodCl7aWYodC5SVENQZWVyQ29ubmVjdGlvbil7dmFyIHI9dC5SVENQZWVyQ29ubmVjdGlvbjt0LlJUQ1BlZXJDb25uZWN0aW9uPWZ1bmN0aW9uKHQsbyl7aWYodCYmdC5pY2VTZXJ2ZXJzKXtmb3IodmFyIG49W10saT0wO2k8dC5pY2VTZXJ2ZXJzLmxlbmd0aDtpKyspe3ZhciBhPXQuaWNlU2VydmVyc1tpXTshYS5oYXNPd25Qcm9wZXJ0eShcInVybHNcIikmJmEuaGFzT3duUHJvcGVydHkoXCJ1cmxcIik/KGUuZGVwcmVjYXRlZChcIlJUQ0ljZVNlcnZlci51cmxcIixcIlJUQ0ljZVNlcnZlci51cmxzXCIpLChhPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYSkpKS51cmxzPWEudXJsLGRlbGV0ZSBhLnVybCxuLnB1c2goYSkpOm4ucHVzaCh0LmljZVNlcnZlcnNbaV0pfXQuaWNlU2VydmVycz1ufXJldHVybiBuZXcgcih0LG8pfSx0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZT1yLnByb3RvdHlwZSxcImdlbmVyYXRlQ2VydGlmaWNhdGVcImluIHImJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LlJUQ1BlZXJDb25uZWN0aW9uLFwiZ2VuZXJhdGVDZXJ0aWZpY2F0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gci5nZW5lcmF0ZUNlcnRpZmljYXRlfX0pfX1mdW5jdGlvbiBmKGUpe1wib2JqZWN0XCI9PT1vKGUpJiZlLlJUQ1RyYWNrRXZlbnQmJlwicmVjZWl2ZXJcImluIGUuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUmJiEoXCJ0cmFuc2NlaXZlclwiaW4gZS5SVENUcmFja0V2ZW50LnByb3RvdHlwZSkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlLFwidHJhbnNjZWl2ZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJue3JlY2VpdmVyOnRoaXMucmVjZWl2ZXJ9fX0pfWZ1bmN0aW9uIHAoZSl7dmFyIHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXI7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXI9ZnVuY3Rpb24oZSl7aWYoZSl7dm9pZCAwIT09ZS5vZmZlclRvUmVjZWl2ZUF1ZGlvJiYoZS5vZmZlclRvUmVjZWl2ZUF1ZGlvPSEhZS5vZmZlclRvUmVjZWl2ZUF1ZGlvKTt2YXIgcj10aGlzLmdldFRyYW5zY2VpdmVycygpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuXCJhdWRpb1wiPT09ZS5yZWNlaXZlci50cmFjay5raW5kfSk7ITE9PT1lLm9mZmVyVG9SZWNlaXZlQXVkaW8mJnI/XCJzZW5kcmVjdlwiPT09ci5kaXJlY3Rpb24/ci5zZXREaXJlY3Rpb24/ci5zZXREaXJlY3Rpb24oXCJzZW5kb25seVwiKTpyLmRpcmVjdGlvbj1cInNlbmRvbmx5XCI6XCJyZWN2b25seVwiPT09ci5kaXJlY3Rpb24mJihyLnNldERpcmVjdGlvbj9yLnNldERpcmVjdGlvbihcImluYWN0aXZlXCIpOnIuZGlyZWN0aW9uPVwiaW5hY3RpdmVcIik6ITAhPT1lLm9mZmVyVG9SZWNlaXZlQXVkaW98fHJ8fHRoaXMuYWRkVHJhbnNjZWl2ZXIoXCJhdWRpb1wiKSx2b2lkIDAhPT1lLm9mZmVyVG9SZWNlaXZlVmlkZW8mJihlLm9mZmVyVG9SZWNlaXZlVmlkZW89ISFlLm9mZmVyVG9SZWNlaXZlVmlkZW8pO3ZhciBvPXRoaXMuZ2V0VHJhbnNjZWl2ZXJzKCkuZmluZChmdW5jdGlvbihlKXtyZXR1cm5cInZpZGVvXCI9PT1lLnJlY2VpdmVyLnRyYWNrLmtpbmR9KTshMT09PWUub2ZmZXJUb1JlY2VpdmVWaWRlbyYmbz9cInNlbmRyZWN2XCI9PT1vLmRpcmVjdGlvbj9vLnNldERpcmVjdGlvbj9vLnNldERpcmVjdGlvbihcInNlbmRvbmx5XCIpOm8uZGlyZWN0aW9uPVwic2VuZG9ubHlcIjpcInJlY3Zvbmx5XCI9PT1vLmRpcmVjdGlvbiYmKG8uc2V0RGlyZWN0aW9uP28uc2V0RGlyZWN0aW9uKFwiaW5hY3RpdmVcIik6by5kaXJlY3Rpb249XCJpbmFjdGl2ZVwiKTohMCE9PWUub2ZmZXJUb1JlY2VpdmVWaWRlb3x8b3x8dGhpcy5hZGRUcmFuc2NlaXZlcihcInZpZGVvXCIpfXJldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19ZnVuY3Rpb24gdShlKXtcIm9iamVjdFwiIT09byhlKXx8ZS5BdWRpb0NvbnRleHR8fChlLkF1ZGlvQ29udGV4dD1lLndlYmtpdEF1ZGlvQ29udGV4dCl9XG59LHtcIi4uL3V0aWxzXCI6XCJpU3hDXCJ9XSxcIkdPUUtcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5zaGltUlRDSWNlQ2FuZGlkYXRlPWEsZXhwb3J0cy5zaGltTWF4TWVzc2FnZVNpemU9YyxleHBvcnRzLnNoaW1TZW5kVGhyb3dUeXBlRXJyb3I9cyxleHBvcnRzLnNoaW1Db25uZWN0aW9uU3RhdGU9cCxleHBvcnRzLnJlbW92ZUV4dG1hcEFsbG93TWl4ZWQ9ZCxleHBvcnRzLnNoaW1BZGRJY2VDYW5kaWRhdGVOdWxsT3JFbXB0eT11O3ZhciBlPXIocmVxdWlyZShcInNkcFwiKSksdD1vKHJlcXVpcmUoXCIuL3V0aWxzXCIpKTtmdW5jdGlvbiBuKCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgV2Vha01hcClyZXR1cm4gbnVsbDt2YXIgZT1uZXcgV2Vha01hcDtyZXR1cm4gbj1mdW5jdGlvbigpe3JldHVybiBlfSxlfWZ1bmN0aW9uIG8oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO2lmKG51bGw9PT1lfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZSlyZXR1cm57ZGVmYXVsdDplfTt2YXIgdD1uKCk7aWYodCYmdC5oYXMoZSkpcmV0dXJuIHQuZ2V0KGUpO3ZhciBvPXt9LHI9T2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2Zvcih2YXIgaSBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpKXt2YXIgYT1yP09iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxpKTpudWxsO2EmJihhLmdldHx8YS5zZXQpP09iamVjdC5kZWZpbmVQcm9wZXJ0eShvLGksYSk6b1tpXT1lW2ldfXJldHVybiBvLmRlZmF1bHQ9ZSx0JiZ0LnNldChlLG8pLG99ZnVuY3Rpb24gcihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gaShlKXtyZXR1cm4oaT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gYShuKXtpZihuLlJUQ0ljZUNhbmRpZGF0ZSYmIShuLlJUQ0ljZUNhbmRpZGF0ZSYmXCJmb3VuZGF0aW9uXCJpbiBuLlJUQ0ljZUNhbmRpZGF0ZS5wcm90b3R5cGUpKXt2YXIgbz1uLlJUQ0ljZUNhbmRpZGF0ZTtuLlJUQ0ljZUNhbmRpZGF0ZT1mdW5jdGlvbih0KXtpZihcIm9iamVjdFwiPT09aSh0KSYmdC5jYW5kaWRhdGUmJjA9PT10LmNhbmRpZGF0ZS5pbmRleE9mKFwiYT1cIikmJigodD1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQpKSkuY2FuZGlkYXRlPXQuY2FuZGlkYXRlLnN1YnN0cigyKSksdC5jYW5kaWRhdGUmJnQuY2FuZGlkYXRlLmxlbmd0aCl7dmFyIG49bmV3IG8odCkscj1lLmRlZmF1bHQucGFyc2VDYW5kaWRhdGUodC5jYW5kaWRhdGUpLGE9T2JqZWN0LmFzc2lnbihuLHIpO3JldHVybiBhLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybntjYW5kaWRhdGU6YS5jYW5kaWRhdGUsc2RwTWlkOmEuc2RwTWlkLHNkcE1MaW5lSW5kZXg6YS5zZHBNTGluZUluZGV4LHVzZXJuYW1lRnJhZ21lbnQ6YS51c2VybmFtZUZyYWdtZW50fX0sYX1yZXR1cm4gbmV3IG8odCl9LG4uUlRDSWNlQ2FuZGlkYXRlLnByb3RvdHlwZT1vLnByb3RvdHlwZSx0LndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KG4sXCJpY2VjYW5kaWRhdGVcIixmdW5jdGlvbihlKXtyZXR1cm4gZS5jYW5kaWRhdGUmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiY2FuZGlkYXRlXCIse3ZhbHVlOm5ldyBuLlJUQ0ljZUNhbmRpZGF0ZShlLmNhbmRpZGF0ZSksd3JpdGFibGU6XCJmYWxzZVwifSksZX0pfX1mdW5jdGlvbiBjKHQsbil7aWYodC5SVENQZWVyQ29ubmVjdGlvbil7XCJzY3RwXCJpbiB0LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHQuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLFwic2N0cFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5fc2N0cD9udWxsOnRoaXMuX3NjdHB9fSk7dmFyIG89dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247dC5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb249ZnVuY3Rpb24oKXtpZih0aGlzLl9zY3RwPW51bGwsXCJjaHJvbWVcIj09PW4uYnJvd3NlciYmbi52ZXJzaW9uPj03Nil7dmFye3NkcFNlbWFudGljczp0fT10aGlzLmdldENvbmZpZ3VyYXRpb24oKTtcInBsYW4tYlwiPT09dCYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJzY3RwXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLl9zY3RwP251bGw6dGhpcy5fc2N0cH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KX1pZihmdW5jdGlvbih0KXtpZighdHx8IXQuc2RwKXJldHVybiExO3ZhciBuPWUuZGVmYXVsdC5zcGxpdFNlY3Rpb25zKHQuc2RwKTtyZXR1cm4gbi5zaGlmdCgpLG4uc29tZShmdW5jdGlvbih0KXt2YXIgbj1lLmRlZmF1bHQucGFyc2VNTGluZSh0KTtyZXR1cm4gbiYmXCJhcHBsaWNhdGlvblwiPT09bi5raW5kJiYtMSE9PW4ucHJvdG9jb2wuaW5kZXhPZihcIlNDVFBcIil9KX0oYXJndW1lbnRzWzBdKSl7dmFyIHIsaT1mdW5jdGlvbihlKXt2YXIgdD1lLnNkcC5tYXRjaCgvbW96aWxsYS4uLlRISVNfSVNfU0RQQVJUQS0oXFxkKykvKTtpZihudWxsPT09dHx8dC5sZW5ndGg8MilyZXR1cm4tMTt2YXIgbj1wYXJzZUludCh0WzFdLDEwKTtyZXR1cm4gbiE9bj8tMTpufShhcmd1bWVudHNbMF0pLGE9KHA9aSxkPTY1NTM2LFwiZmlyZWZveFwiPT09bi5icm93c2VyJiYoZD1uLnZlcnNpb248NTc/LTE9PT1wPzE2Mzg0OjIxNDc0ODM2Mzc6bi52ZXJzaW9uPDYwPzU3PT09bi52ZXJzaW9uPzY1NTM1OjY1NTM2OjIxNDc0ODM2MzcpLGQpLGM9ZnVuY3Rpb24odCxvKXt2YXIgcj02NTUzNjtcImZpcmVmb3hcIj09PW4uYnJvd3NlciYmNTc9PT1uLnZlcnNpb24mJihyPTY1NTM1KTt2YXIgaT1lLmRlZmF1bHQubWF0Y2hQcmVmaXgodC5zZHAsXCJhPW1heC1tZXNzYWdlLXNpemU6XCIpO3JldHVybiBpLmxlbmd0aD4wP3I9cGFyc2VJbnQoaVswXS5zdWJzdHIoMTkpLDEwKTpcImZpcmVmb3hcIj09PW4uYnJvd3NlciYmLTEhPT1vJiYocj0yMTQ3NDgzNjM3KSxyfShhcmd1bWVudHNbMF0saSk7cj0wPT09YSYmMD09PWM/TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOjA9PT1hfHwwPT09Yz9NYXRoLm1heChhLGMpOk1hdGgubWluKGEsYyk7dmFyIHM9e307T2JqZWN0LmRlZmluZVByb3BlcnR5KHMsXCJtYXhNZXNzYWdlU2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcn19KSx0aGlzLl9zY3RwPXN9dmFyIHAsZDtyZXR1cm4gby5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX1mdW5jdGlvbiBzKGUpe2lmKGUuUlRDUGVlckNvbm5lY3Rpb24mJlwiY3JlYXRlRGF0YUNoYW5uZWxcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKXt2YXIgbj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVEYXRhQ2hhbm5lbDtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVEYXRhQ2hhbm5lbD1mdW5jdGlvbigpe3ZhciBlPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBvKGUsdGhpcyksZX0sdC53cmFwUGVlckNvbm5lY3Rpb25FdmVudChlLFwiZGF0YWNoYW5uZWxcIixmdW5jdGlvbihlKXtyZXR1cm4gbyhlLmNoYW5uZWwsZS50YXJnZXQpLGV9KX1mdW5jdGlvbiBvKGUsdCl7dmFyIG49ZS5zZW5kO2Uuc2VuZD1mdW5jdGlvbigpe3ZhciBvPWFyZ3VtZW50c1swXSxyPW8ubGVuZ3RofHxvLnNpemV8fG8uYnl0ZUxlbmd0aDtpZihcIm9wZW5cIj09PWUucmVhZHlTdGF0ZSYmdC5zY3RwJiZyPnQuc2N0cC5tYXhNZXNzYWdlU2l6ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiTWVzc2FnZSB0b28gbGFyZ2UgKGNhbiBzZW5kIGEgbWF4aW11bSBvZiBcIit0LnNjdHAubWF4TWVzc2FnZVNpemUrXCIgYnl0ZXMpXCIpO3JldHVybiBuLmFwcGx5KGUsYXJndW1lbnRzKX19fWZ1bmN0aW9uIHAoZSl7aWYoZS5SVENQZWVyQ29ubmVjdGlvbiYmIShcImNvbm5lY3Rpb25TdGF0ZVwiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKXt2YXIgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcImNvbm5lY3Rpb25TdGF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57Y29tcGxldGVkOlwiY29ubmVjdGVkXCIsY2hlY2tpbmc6XCJjb25uZWN0aW5nXCJ9W3RoaXMuaWNlQ29ubmVjdGlvblN0YXRlXXx8dGhpcy5pY2VDb25uZWN0aW9uU3RhdGV9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJvbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2V8fG51bGx9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSYmKHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHRoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlKSxkZWxldGUgdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2UpLGUmJnRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHRoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlPWUpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLFtcInNldExvY2FsRGVzY3JpcHRpb25cIixcInNldFJlbW90ZURlc2NyaXB0aW9uXCJdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49dFtlXTt0W2VdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZXBvbHl8fCh0aGlzLl9jb25uZWN0aW9uc3RhdGVjaGFuZ2Vwb2x5PWZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0O2lmKHQuX2xhc3RDb25uZWN0aW9uU3RhdGUhPT10LmNvbm5lY3Rpb25TdGF0ZSl7dC5fbGFzdENvbm5lY3Rpb25TdGF0ZT10LmNvbm5lY3Rpb25TdGF0ZTt2YXIgbj1uZXcgRXZlbnQoXCJjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIixlKTt0LmRpc3BhdGNoRXZlbnQobil9cmV0dXJuIGV9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHRoaXMuX2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZXBvbHkpKSxuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KX19ZnVuY3Rpb24gZChlLHQpe2lmKGUuUlRDUGVlckNvbm5lY3Rpb24mJiEoXCJjaHJvbWVcIj09PXQuYnJvd3NlciYmdC52ZXJzaW9uPj03MXx8XCJzYWZhcmlcIj09PXQuYnJvd3NlciYmdC52ZXJzaW9uPj02MDUpKXt2YXIgbj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbjtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbj1mdW5jdGlvbih0KXtpZih0JiZ0LnNkcCYmLTEhPT10LnNkcC5pbmRleE9mKFwiXFxuYT1leHRtYXAtYWxsb3ctbWl4ZWRcIikpe3ZhciBvPXQuc2RwLnNwbGl0KFwiXFxuXCIpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cImE9ZXh0bWFwLWFsbG93LW1peGVkXCIhPT1lLnRyaW0oKX0pLmpvaW4oXCJcXG5cIik7ZS5SVENTZXNzaW9uRGVzY3JpcHRpb24mJnQgaW5zdGFuY2VvZiBlLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbj9hcmd1bWVudHNbMF09bmV3IGUuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOnQudHlwZSxzZHA6b30pOnQuc2RwPW99cmV0dXJuIG4uYXBwbHkodGhpcyxhcmd1bWVudHMpfX19ZnVuY3Rpb24gdShlLHQpe2lmKGUuUlRDUGVlckNvbm5lY3Rpb24mJmUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKXt2YXIgbj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGU7biYmMCE9PW4ubGVuZ3RoJiYoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1swXT8oXCJjaHJvbWVcIj09PXQuYnJvd3NlciYmdC52ZXJzaW9uPDc4fHxcImZpcmVmb3hcIj09PXQuYnJvd3NlciYmdC52ZXJzaW9uPDY4fHxcInNhZmFyaVwiPT09dC5icm93c2VyKSYmYXJndW1lbnRzWzBdJiZcIlwiPT09YXJndW1lbnRzWzBdLmNhbmRpZGF0ZT9Qcm9taXNlLnJlc29sdmUoKTpuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTooYXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV0uYXBwbHkobnVsbCksUHJvbWlzZS5yZXNvbHZlKCkpfSl9fVxufSx7XCJzZHBcIjpcIllIdmhcIixcIi4vdXRpbHNcIjpcImlTeENcIn1dLFwiS3RsR1wiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmFkYXB0ZXJGYWN0b3J5PW87dmFyIGU9bShyZXF1aXJlKFwiLi91dGlsc1wiKSksaT1tKHJlcXVpcmUoXCIuL2Nocm9tZS9jaHJvbWVfc2hpbVwiKSkscj1tKHJlcXVpcmUoXCIuL2VkZ2UvZWRnZV9zaGltXCIpKSxzPW0ocmVxdWlyZShcIi4vZmlyZWZveC9maXJlZm94X3NoaW1cIikpLHQ9bShyZXF1aXJlKFwiLi9zYWZhcmkvc2FmYXJpX3NoaW1cIikpLGE9bShyZXF1aXJlKFwiLi9jb21tb25fc2hpbVwiKSk7ZnVuY3Rpb24gbigpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIFdlYWtNYXApcmV0dXJuIG51bGw7dmFyIGU9bmV3IFdlYWtNYXA7cmV0dXJuIG49ZnVuY3Rpb24oKXtyZXR1cm4gZX0sZX1mdW5jdGlvbiBtKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTtpZihudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpcmV0dXJue2RlZmF1bHQ6ZX07dmFyIGk9bigpO2lmKGkmJmkuaGFzKGUpKXJldHVybiBpLmdldChlKTt2YXIgcj17fSxzPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtmb3IodmFyIHQgaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KSl7dmFyIGE9cz9PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCk6bnVsbDthJiYoYS5nZXR8fGEuc2V0KT9PYmplY3QuZGVmaW5lUHJvcGVydHkocix0LGEpOnJbdF09ZVt0XX1yZXR1cm4gci5kZWZhdWx0PWUsaSYmaS5zZXQoZSxyKSxyfWZ1bmN0aW9uIG8oKXt2YXJ7d2luZG93Om59PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxtPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7c2hpbUNocm9tZTohMCxzaGltRmlyZWZveDohMCxzaGltRWRnZTohMCxzaGltU2FmYXJpOiEwfSxvPWUubG9nLGg9ZS5kZXRlY3RCcm93c2VyKG4pLGQ9e2Jyb3dzZXJEZXRhaWxzOmgsY29tbW9uU2hpbTphLGV4dHJhY3RWZXJzaW9uOmUuZXh0cmFjdFZlcnNpb24sZGlzYWJsZUxvZzplLmRpc2FibGVMb2csZGlzYWJsZVdhcm5pbmdzOmUuZGlzYWJsZVdhcm5pbmdzfTtzd2l0Y2goaC5icm93c2VyKXtjYXNlXCJjaHJvbWVcIjppZighaXx8IWkuc2hpbVBlZXJDb25uZWN0aW9ufHwhbS5zaGltQ2hyb21lKXJldHVybiBvKFwiQ2hyb21lIHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLlwiKSxkO2lmKG51bGw9PT1oLnZlcnNpb24pcmV0dXJuIG8oXCJDaHJvbWUgc2hpbSBjYW4gbm90IGRldGVybWluZSB2ZXJzaW9uLCBub3Qgc2hpbW1pbmcuXCIpLGQ7byhcImFkYXB0ZXIuanMgc2hpbW1pbmcgY2hyb21lLlwiKSxkLmJyb3dzZXJTaGltPWksYS5zaGltQWRkSWNlQ2FuZGlkYXRlTnVsbE9yRW1wdHkobixoKSxpLnNoaW1HZXRVc2VyTWVkaWEobixoKSxpLnNoaW1NZWRpYVN0cmVhbShuLGgpLGkuc2hpbVBlZXJDb25uZWN0aW9uKG4saCksaS5zaGltT25UcmFjayhuLGgpLGkuc2hpbUFkZFRyYWNrUmVtb3ZlVHJhY2sobixoKSxpLnNoaW1HZXRTZW5kZXJzV2l0aER0bWYobixoKSxpLnNoaW1HZXRTdGF0cyhuLGgpLGkuc2hpbVNlbmRlclJlY2VpdmVyR2V0U3RhdHMobixoKSxpLmZpeE5lZ290aWF0aW9uTmVlZGVkKG4saCksYS5zaGltUlRDSWNlQ2FuZGlkYXRlKG4saCksYS5zaGltQ29ubmVjdGlvblN0YXRlKG4saCksYS5zaGltTWF4TWVzc2FnZVNpemUobixoKSxhLnNoaW1TZW5kVGhyb3dUeXBlRXJyb3IobixoKSxhLnJlbW92ZUV4dG1hcEFsbG93TWl4ZWQobixoKTticmVhaztjYXNlXCJmaXJlZm94XCI6aWYoIXN8fCFzLnNoaW1QZWVyQ29ubmVjdGlvbnx8IW0uc2hpbUZpcmVmb3gpcmV0dXJuIG8oXCJGaXJlZm94IHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLlwiKSxkO28oXCJhZGFwdGVyLmpzIHNoaW1taW5nIGZpcmVmb3guXCIpLGQuYnJvd3NlclNoaW09cyxhLnNoaW1BZGRJY2VDYW5kaWRhdGVOdWxsT3JFbXB0eShuLGgpLHMuc2hpbUdldFVzZXJNZWRpYShuLGgpLHMuc2hpbVBlZXJDb25uZWN0aW9uKG4saCkscy5zaGltT25UcmFjayhuLGgpLHMuc2hpbVJlbW92ZVN0cmVhbShuLGgpLHMuc2hpbVNlbmRlckdldFN0YXRzKG4saCkscy5zaGltUmVjZWl2ZXJHZXRTdGF0cyhuLGgpLHMuc2hpbVJUQ0RhdGFDaGFubmVsKG4saCkscy5zaGltQWRkVHJhbnNjZWl2ZXIobixoKSxzLnNoaW1HZXRQYXJhbWV0ZXJzKG4saCkscy5zaGltQ3JlYXRlT2ZmZXIobixoKSxzLnNoaW1DcmVhdGVBbnN3ZXIobixoKSxhLnNoaW1SVENJY2VDYW5kaWRhdGUobixoKSxhLnNoaW1Db25uZWN0aW9uU3RhdGUobixoKSxhLnNoaW1NYXhNZXNzYWdlU2l6ZShuLGgpLGEuc2hpbVNlbmRUaHJvd1R5cGVFcnJvcihuLGgpO2JyZWFrO2Nhc2VcImVkZ2VcIjppZighcnx8IXIuc2hpbVBlZXJDb25uZWN0aW9ufHwhbS5zaGltRWRnZSlyZXR1cm4gbyhcIk1TIGVkZ2Ugc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuXCIpLGQ7byhcImFkYXB0ZXIuanMgc2hpbW1pbmcgZWRnZS5cIiksZC5icm93c2VyU2hpbT1yLHIuc2hpbUdldFVzZXJNZWRpYShuLGgpLHIuc2hpbUdldERpc3BsYXlNZWRpYShuLGgpLHIuc2hpbVBlZXJDb25uZWN0aW9uKG4saCksci5zaGltUmVwbGFjZVRyYWNrKG4saCksYS5zaGltTWF4TWVzc2FnZVNpemUobixoKSxhLnNoaW1TZW5kVGhyb3dUeXBlRXJyb3IobixoKTticmVhaztjYXNlXCJzYWZhcmlcIjppZighdHx8IW0uc2hpbVNhZmFyaSlyZXR1cm4gbyhcIlNhZmFyaSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS5cIiksZDtvKFwiYWRhcHRlci5qcyBzaGltbWluZyBzYWZhcmkuXCIpLGQuYnJvd3NlclNoaW09dCxhLnNoaW1BZGRJY2VDYW5kaWRhdGVOdWxsT3JFbXB0eShuLGgpLHQuc2hpbVJUQ0ljZVNlcnZlclVybHMobixoKSx0LnNoaW1DcmVhdGVPZmZlckxlZ2FjeShuLGgpLHQuc2hpbUNhbGxiYWNrc0FQSShuLGgpLHQuc2hpbUxvY2FsU3RyZWFtc0FQSShuLGgpLHQuc2hpbVJlbW90ZVN0cmVhbXNBUEkobixoKSx0LnNoaW1UcmFja0V2ZW50VHJhbnNjZWl2ZXIobixoKSx0LnNoaW1HZXRVc2VyTWVkaWEobixoKSx0LnNoaW1BdWRpb0NvbnRleHQobixoKSxhLnNoaW1SVENJY2VDYW5kaWRhdGUobixoKSxhLnNoaW1NYXhNZXNzYWdlU2l6ZShuLGgpLGEuc2hpbVNlbmRUaHJvd1R5cGVFcnJvcihuLGgpLGEucmVtb3ZlRXh0bWFwQWxsb3dNaXhlZChuLGgpO2JyZWFrO2RlZmF1bHQ6byhcIlVuc3VwcG9ydGVkIGJyb3dzZXIhXCIpfXJldHVybiBkfVxufSx7XCIuL3V0aWxzXCI6XCJpU3hDXCIsXCIuL2Nocm9tZS9jaHJvbWVfc2hpbVwiOlwidUk1WFwiLFwiLi9lZGdlL2VkZ2Vfc2hpbVwiOlwiWFJpY1wiLFwiLi9maXJlZm94L2ZpcmVmb3hfc2hpbVwiOlwiRnpkclwiLFwiLi9zYWZhcmkvc2FmYXJpX3NoaW1cIjpcInQxbExcIixcIi4vY29tbW9uX3NoaW1cIjpcIkdPUUtcIn1dLFwidEkxWFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLmRlZmF1bHQ9dm9pZCAwO3ZhciBlPXJlcXVpcmUoXCIuL2FkYXB0ZXJfZmFjdG9yeS5qc1wiKSx0PSgwLGUuYWRhcHRlckZhY3RvcnkpKHt3aW5kb3c6XCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvdz92b2lkIDA6d2luZG93fSksZD10O2V4cG9ydHMuZGVmYXVsdD1kO1xufSx7XCIuL2FkYXB0ZXJfZmFjdG9yeS5qc1wiOlwiS3RsR1wifV0sXCJzWHRWXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPXRoaXMmJnRoaXMuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMud2ViUlRDQWRhcHRlcj12b2lkIDA7dmFyIHQ9ZShyZXF1aXJlKFwid2VicnRjLWFkYXB0ZXJcIikpO2V4cG9ydHMud2ViUlRDQWRhcHRlcj10LmRlZmF1bHQ7XG59LHtcIndlYnJ0Yy1hZGFwdGVyXCI6XCJ0STFYXCJ9XSxcIkkzMWZcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5TdXBwb3J0cz12b2lkIDA7dmFyIHI9cmVxdWlyZShcIi4vYWRhcHRlclwiKTtleHBvcnRzLlN1cHBvcnRzPW5ldyhmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmlzSU9TPVtcImlQYWRcIixcImlQaG9uZVwiLFwiaVBvZFwiXS5pbmNsdWRlcyhuYXZpZ2F0b3IucGxhdGZvcm0pLHRoaXMuc3VwcG9ydGVkQnJvd3NlcnM9W1wiZmlyZWZveFwiLFwiY2hyb21lXCIsXCJzYWZhcmlcIl0sdGhpcy5taW5GaXJlZm94VmVyc2lvbj01OSx0aGlzLm1pbkNocm9tZVZlcnNpb249NzIsdGhpcy5taW5TYWZhcmlWZXJzaW9uPTYwNX1yZXR1cm4gZS5wcm90b3R5cGUuaXNXZWJSVENTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgUlRDUGVlckNvbm5lY3Rpb259LGUucHJvdG90eXBlLmlzQnJvd3NlclN1cHBvcnRlZD1mdW5jdGlvbigpe3ZhciByPXRoaXMuZ2V0QnJvd3NlcigpLGU9dGhpcy5nZXRWZXJzaW9uKCk7cmV0dXJuISF0aGlzLnN1cHBvcnRlZEJyb3dzZXJzLmluY2x1ZGVzKHIpJiYoXCJjaHJvbWVcIj09PXI/ZT49dGhpcy5taW5DaHJvbWVWZXJzaW9uOlwiZmlyZWZveFwiPT09cj9lPj10aGlzLm1pbkZpcmVmb3hWZXJzaW9uOlwic2FmYXJpXCI9PT1yJiYoIXRoaXMuaXNJT1MmJmU+PXRoaXMubWluU2FmYXJpVmVyc2lvbikpfSxlLnByb3RvdHlwZS5nZXRCcm93c2VyPWZ1bmN0aW9uKCl7cmV0dXJuIHIud2ViUlRDQWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyfSxlLnByb3RvdHlwZS5nZXRWZXJzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHIud2ViUlRDQWRhcHRlci5icm93c2VyRGV0YWlscy52ZXJzaW9ufHwwfSxlLnByb3RvdHlwZS5pc1VuaWZpZWRQbGFuU3VwcG9ydGVkPWZ1bmN0aW9uKCl7dmFyIGUsaT10aGlzLmdldEJyb3dzZXIoKSx0PXIud2ViUlRDQWRhcHRlci5icm93c2VyRGV0YWlscy52ZXJzaW9ufHwwO2lmKFwiY2hyb21lXCI9PT1pJiZ0PDcyKXJldHVybiExO2lmKFwiZmlyZWZveFwiPT09aSYmdD49NTkpcmV0dXJuITA7aWYoISh3aW5kb3cuUlRDUnRwVHJhbnNjZWl2ZXImJlwiY3VycmVudERpcmVjdGlvblwiaW4gUlRDUnRwVHJhbnNjZWl2ZXIucHJvdG90eXBlKSlyZXR1cm4hMTt2YXIgbz0hMTt0cnl7KGU9bmV3IFJUQ1BlZXJDb25uZWN0aW9uKS5hZGRUcmFuc2NlaXZlcihcImF1ZGlvXCIpLG89ITB9Y2F0Y2gocyl7fWZpbmFsbHl7ZSYmZS5jbG9zZSgpfXJldHVybiBvfSxlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiU3VwcG9ydHM6IFxcbiAgICBicm93c2VyOlwiK3RoaXMuZ2V0QnJvd3NlcigpK1wiIFxcbiAgICB2ZXJzaW9uOlwiK3RoaXMuZ2V0VmVyc2lvbigpK1wiIFxcbiAgICBpc0lPUzpcIit0aGlzLmlzSU9TK1wiIFxcbiAgICBpc1dlYlJUQ1N1cHBvcnRlZDpcIit0aGlzLmlzV2ViUlRDU3VwcG9ydGVkKCkrXCIgXFxuICAgIGlzQnJvd3NlclN1cHBvcnRlZDpcIit0aGlzLmlzQnJvd3NlclN1cHBvcnRlZCgpK1wiIFxcbiAgICBpc1VuaWZpZWRQbGFuU3VwcG9ydGVkOlwiK3RoaXMuaXNVbmlmaWVkUGxhblN1cHBvcnRlZCgpfSxlfSgpKTtcbn0se1wiLi9hZGFwdGVyXCI6XCJzWHRWXCJ9XSxcIkJIWGZcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIGU9dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxyLG8pe3ZvaWQgMD09PW8mJihvPXIpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG8se2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbcl19fSl9OmZ1bmN0aW9uKGUsdCxyLG8pe3ZvaWQgMD09PW8mJihvPXIpLGVbb109dFtyXX0pLHQ9dGhpcyYmdGhpcy5fX3NldE1vZHVsZURlZmF1bHR8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJkZWZhdWx0XCIse2VudW1lcmFibGU6ITAsdmFsdWU6dH0pfTpmdW5jdGlvbihlLHQpe2UuZGVmYXVsdD10fSkscj10aGlzJiZ0aGlzLl9faW1wb3J0U3Rhcnx8ZnVuY3Rpb24ocil7aWYociYmci5fX2VzTW9kdWxlKXJldHVybiByO3ZhciBvPXt9O2lmKG51bGwhPXIpZm9yKHZhciBuIGluIHIpXCJkZWZhdWx0XCIhPT1uJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixuKSYmZShvLHIsbik7cmV0dXJuIHQobyxyKSxvfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLnV0aWw9dm9pZCAwO3ZhciBvPXIocmVxdWlyZShcInBlZXJqcy1qcy1iaW5hcnlwYWNrXCIpKSxuPXJlcXVpcmUoXCIuL3N1cHBvcnRzXCIpLGk9e2ljZVNlcnZlcnM6W3t1cmxzOlwic3R1bjpzdHVuLmwuZ29vZ2xlLmNvbToxOTMwMlwifSx7dXJsczpcInR1cm46MC5wZWVyanMuY29tOjM0NzhcIix1c2VybmFtZTpcInBlZXJqc1wiLGNyZWRlbnRpYWw6XCJwZWVyanNwXCJ9XSxzZHBTZW1hbnRpY3M6XCJ1bmlmaWVkLXBsYW5cIn07ZXhwb3J0cy51dGlsPW5ldyhmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLkNMT1VEX0hPU1Q9XCIwLnBlZXJqcy5jb21cIix0aGlzLkNMT1VEX1BPUlQ9NDQzLHRoaXMuY2h1bmtlZEJyb3dzZXJzPXtDaHJvbWU6MSxjaHJvbWU6MX0sdGhpcy5jaHVua2VkTVRVPTE2MzAwLHRoaXMuZGVmYXVsdENvbmZpZz1pLHRoaXMuYnJvd3Nlcj1uLlN1cHBvcnRzLmdldEJyb3dzZXIoKSx0aGlzLmJyb3dzZXJWZXJzaW9uPW4uU3VwcG9ydHMuZ2V0VmVyc2lvbigpLHRoaXMuc3VwcG9ydHM9ZnVuY3Rpb24oKXt2YXIgZSx0PXticm93c2VyOm4uU3VwcG9ydHMuaXNCcm93c2VyU3VwcG9ydGVkKCksd2ViUlRDOm4uU3VwcG9ydHMuaXNXZWJSVENTdXBwb3J0ZWQoKSxhdWRpb1ZpZGVvOiExLGRhdGE6ITEsYmluYXJ5QmxvYjohMSxyZWxpYWJsZTohMX07aWYoIXQud2ViUlRDKXJldHVybiB0O3RyeXtlPW5ldyBSVENQZWVyQ29ubmVjdGlvbihpKSx0LmF1ZGlvVmlkZW89ITA7dmFyIHI9dm9pZCAwO3RyeXtyPWUuY3JlYXRlRGF0YUNoYW5uZWwoXCJfUEVFUkpTVEVTVFwiLHtvcmRlcmVkOiEwfSksdC5kYXRhPSEwLHQucmVsaWFibGU9ISFyLm9yZGVyZWQ7dHJ5e3IuYmluYXJ5VHlwZT1cImJsb2JcIix0LmJpbmFyeUJsb2I9IW4uU3VwcG9ydHMuaXNJT1N9Y2F0Y2gobyl7fX1jYXRjaChvKXt9ZmluYWxseXtyJiZyLmNsb3NlKCl9fWNhdGNoKG8pe31maW5hbGx5e2UmJmUuY2xvc2UoKX1yZXR1cm4gdH0oKSx0aGlzLnBhY2s9by5wYWNrLHRoaXMudW5wYWNrPW8udW5wYWNrLHRoaXMuX2RhdGFDb3VudD0xfXJldHVybiBlLnByb3RvdHlwZS5ub29wPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS52YWxpZGF0ZUlkPWZ1bmN0aW9uKGUpe3JldHVybiFlfHwvXltBLVphLXowLTldKyg/OlsgXy1dW0EtWmEtejAtOV0rKSokLy50ZXN0KGUpfSxlLnByb3RvdHlwZS5jaHVuaz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj1lLnNpemUsbz1NYXRoLmNlaWwoci9leHBvcnRzLnV0aWwuY2h1bmtlZE1UVSksbj0wLGk9MDtpPHI7KXt2YXIgYT1NYXRoLm1pbihyLGkrZXhwb3J0cy51dGlsLmNodW5rZWRNVFUpLHU9ZS5zbGljZShpLGEpLHM9e19fcGVlckRhdGE6dGhpcy5fZGF0YUNvdW50LG46bixkYXRhOnUsdG90YWw6b307dC5wdXNoKHMpLGk9YSxuKyt9cmV0dXJuIHRoaXMuX2RhdGFDb3VudCsrLHR9LGUucHJvdG90eXBlLmJsb2JUb0FycmF5QnVmZmVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IEZpbGVSZWFkZXI7cmV0dXJuIHIub25sb2FkPWZ1bmN0aW9uKGUpe2UudGFyZ2V0JiZ0KGUudGFyZ2V0LnJlc3VsdCl9LHIucmVhZEFzQXJyYXlCdWZmZXIoZSkscn0sZS5wcm90b3R5cGUuYmluYXJ5U3RyaW5nVG9BcnJheUJ1ZmZlcj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9bmV3IFVpbnQ4QXJyYXkoZS5sZW5ndGgpLHI9MDtyPGUubGVuZ3RoO3IrKyl0W3JdPTI1NSZlLmNoYXJDb2RlQXQocik7cmV0dXJuIHQuYnVmZmVyfSxlLnByb3RvdHlwZS5yYW5kb21Ub2tlbj1mdW5jdGlvbigpe3JldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMil9LGUucHJvdG90eXBlLmlzU2VjdXJlPWZ1bmN0aW9uKCl7cmV0dXJuXCJodHRwczpcIj09PWxvY2F0aW9uLnByb3RvY29sfSxlfSgpKTtcbn0se1wicGVlcmpzLWpzLWJpbmFyeXBhY2tcIjpcImtkUHBcIixcIi4vc3VwcG9ydHNcIjpcIkkzMWZcIn1dLFwiSkpsU1wiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgZT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LHQ9XCJ+XCI7ZnVuY3Rpb24gbigpe31mdW5jdGlvbiByKGUsdCxuKXt0aGlzLmZuPWUsdGhpcy5jb250ZXh0PXQsdGhpcy5vbmNlPW58fCExfWZ1bmN0aW9uIG8oZSxuLG8scyxpKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBvKXRocm93IG5ldyBUeXBlRXJyb3IoXCJUaGUgbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3ZhciBjPW5ldyByKG8sc3x8ZSxpKSxmPXQ/dCtuOm47cmV0dXJuIGUuX2V2ZW50c1tmXT9lLl9ldmVudHNbZl0uZm4/ZS5fZXZlbnRzW2ZdPVtlLl9ldmVudHNbZl0sY106ZS5fZXZlbnRzW2ZdLnB1c2goYyk6KGUuX2V2ZW50c1tmXT1jLGUuX2V2ZW50c0NvdW50KyspLGV9ZnVuY3Rpb24gcyhlLHQpezA9PS0tZS5fZXZlbnRzQ291bnQ/ZS5fZXZlbnRzPW5ldyBuOmRlbGV0ZSBlLl9ldmVudHNbdF19ZnVuY3Rpb24gaSgpe3RoaXMuX2V2ZW50cz1uZXcgbix0aGlzLl9ldmVudHNDb3VudD0wfU9iamVjdC5jcmVhdGUmJihuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG51bGwpLChuZXcgbikuX19wcm90b19ffHwodD0hMSkpLGkucHJvdG90eXBlLmV2ZW50TmFtZXM9ZnVuY3Rpb24oKXt2YXIgbixyLG89W107aWYoMD09PXRoaXMuX2V2ZW50c0NvdW50KXJldHVybiBvO2ZvcihyIGluIG49dGhpcy5fZXZlbnRzKWUuY2FsbChuLHIpJiZvLnB1c2godD9yLnNsaWNlKDEpOnIpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzP28uY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMobikpOm99LGkucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgbj10P3QrZTplLHI9dGhpcy5fZXZlbnRzW25dO2lmKCFyKXJldHVybltdO2lmKHIuZm4pcmV0dXJuW3IuZm5dO2Zvcih2YXIgbz0wLHM9ci5sZW5ndGgsaT1uZXcgQXJyYXkocyk7bzxzO28rKylpW29dPXJbb10uZm47cmV0dXJuIGl9LGkucHJvdG90eXBlLmxpc3RlbmVyQ291bnQ9ZnVuY3Rpb24oZSl7dmFyIG49dD90K2U6ZSxyPXRoaXMuX2V2ZW50c1tuXTtyZXR1cm4gcj9yLmZuPzE6ci5sZW5ndGg6MH0saS5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbihlLG4scixvLHMsaSl7dmFyIGM9dD90K2U6ZTtpZighdGhpcy5fZXZlbnRzW2NdKXJldHVybiExO3ZhciBmLHUsYT10aGlzLl9ldmVudHNbY10sbD1hcmd1bWVudHMubGVuZ3RoO2lmKGEuZm4pe3N3aXRjaChhLm9uY2UmJnRoaXMucmVtb3ZlTGlzdGVuZXIoZSxhLmZuLHZvaWQgMCwhMCksbCl7Y2FzZSAxOnJldHVybiBhLmZuLmNhbGwoYS5jb250ZXh0KSwhMDtjYXNlIDI6cmV0dXJuIGEuZm4uY2FsbChhLmNvbnRleHQsbiksITA7Y2FzZSAzOnJldHVybiBhLmZuLmNhbGwoYS5jb250ZXh0LG4sciksITA7Y2FzZSA0OnJldHVybiBhLmZuLmNhbGwoYS5jb250ZXh0LG4scixvKSwhMDtjYXNlIDU6cmV0dXJuIGEuZm4uY2FsbChhLmNvbnRleHQsbixyLG8scyksITA7Y2FzZSA2OnJldHVybiBhLmZuLmNhbGwoYS5jb250ZXh0LG4scixvLHMsaSksITB9Zm9yKHU9MSxmPW5ldyBBcnJheShsLTEpO3U8bDt1KyspZlt1LTFdPWFyZ3VtZW50c1t1XTthLmZuLmFwcGx5KGEuY29udGV4dCxmKX1lbHNle3ZhciB2LGg9YS5sZW5ndGg7Zm9yKHU9MDt1PGg7dSsrKXN3aXRjaChhW3VdLm9uY2UmJnRoaXMucmVtb3ZlTGlzdGVuZXIoZSxhW3VdLmZuLHZvaWQgMCwhMCksbCl7Y2FzZSAxOmFbdV0uZm4uY2FsbChhW3VdLmNvbnRleHQpO2JyZWFrO2Nhc2UgMjphW3VdLmZuLmNhbGwoYVt1XS5jb250ZXh0LG4pO2JyZWFrO2Nhc2UgMzphW3VdLmZuLmNhbGwoYVt1XS5jb250ZXh0LG4scik7YnJlYWs7Y2FzZSA0OmFbdV0uZm4uY2FsbChhW3VdLmNvbnRleHQsbixyLG8pO2JyZWFrO2RlZmF1bHQ6aWYoIWYpZm9yKHY9MSxmPW5ldyBBcnJheShsLTEpO3Y8bDt2KyspZlt2LTFdPWFyZ3VtZW50c1t2XTthW3VdLmZuLmFwcGx5KGFbdV0uY29udGV4dCxmKX19cmV0dXJuITB9LGkucHJvdG90eXBlLm9uPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbyh0aGlzLGUsdCxuLCExKX0saS5wcm90b3R5cGUub25jZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG8odGhpcyxlLHQsbiwhMCl9LGkucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGUsbixyLG8pe3ZhciBpPXQ/dCtlOmU7aWYoIXRoaXMuX2V2ZW50c1tpXSlyZXR1cm4gdGhpcztpZighbilyZXR1cm4gcyh0aGlzLGkpLHRoaXM7dmFyIGM9dGhpcy5fZXZlbnRzW2ldO2lmKGMuZm4pYy5mbiE9PW58fG8mJiFjLm9uY2V8fHImJmMuY29udGV4dCE9PXJ8fHModGhpcyxpKTtlbHNle2Zvcih2YXIgZj0wLHU9W10sYT1jLmxlbmd0aDtmPGE7ZisrKShjW2ZdLmZuIT09bnx8byYmIWNbZl0ub25jZXx8ciYmY1tmXS5jb250ZXh0IT09cikmJnUucHVzaChjW2ZdKTt1Lmxlbmd0aD90aGlzLl9ldmVudHNbaV09MT09PXUubGVuZ3RoP3VbMF06dTpzKHRoaXMsaSl9cmV0dXJuIHRoaXN9LGkucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgcjtyZXR1cm4gZT8ocj10P3QrZTplLHRoaXMuX2V2ZW50c1tyXSYmcyh0aGlzLHIpKToodGhpcy5fZXZlbnRzPW5ldyBuLHRoaXMuX2V2ZW50c0NvdW50PTApLHRoaXN9LGkucHJvdG90eXBlLm9mZj1pLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcixpLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1pLnByb3RvdHlwZS5vbixpLnByZWZpeGVkPXQsaS5FdmVudEVtaXR0ZXI9aSxcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlJiYobW9kdWxlLmV4cG9ydHM9aSk7XG59LHt9XSxcIldPczlcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIHI9dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKHIsZSl7dmFyIG89XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZyW1N5bWJvbC5pdGVyYXRvcl07aWYoIW8pcmV0dXJuIHI7dmFyIHQsbixsPW8uY2FsbChyKSxpPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT1lfHxlLS0gPjApJiYhKHQ9bC5uZXh0KCkpLmRvbmU7KWkucHVzaCh0LnZhbHVlKX1jYXRjaChzKXtuPXtlcnJvcjpzfX1maW5hbGx5e3RyeXt0JiYhdC5kb25lJiYobz1sLnJldHVybikmJm8uY2FsbChsKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19cmV0dXJuIGl9LGU9dGhpcyYmdGhpcy5fX3NwcmVhZEFycmF5fHxmdW5jdGlvbihyLGUpe2Zvcih2YXIgbz0wLHQ9ZS5sZW5ndGgsbj1yLmxlbmd0aDtvPHQ7bysrLG4rKylyW25dPWVbb107cmV0dXJuIHJ9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuTG9nTGV2ZWw9dm9pZCAwO3ZhciBvLHQ9XCJQZWVySlM6IFwiOyFmdW5jdGlvbihyKXtyW3IuRGlzYWJsZWQ9MF09XCJEaXNhYmxlZFwiLHJbci5FcnJvcnM9MV09XCJFcnJvcnNcIixyW3IuV2FybmluZ3M9Ml09XCJXYXJuaW5nc1wiLHJbci5BbGw9M109XCJBbGxcIn0obz1leHBvcnRzLkxvZ0xldmVsfHwoZXhwb3J0cy5Mb2dMZXZlbD17fSkpO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe3RoaXMuX2xvZ0xldmVsPW8uRGlzYWJsZWR9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLnByb3RvdHlwZSxcImxvZ0xldmVsXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2dMZXZlbH0sc2V0OmZ1bmN0aW9uKHIpe3RoaXMuX2xvZ0xldmVsPXJ9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksbi5wcm90b3R5cGUubG9nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbl09YXJndW1lbnRzW25dO3RoaXMuX2xvZ0xldmVsPj1vLkFsbCYmdGhpcy5fcHJpbnQuYXBwbHkodGhpcyxlKFtvLkFsbF0scih0KSkpfSxuLnByb3RvdHlwZS53YXJuPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbl09YXJndW1lbnRzW25dO3RoaXMuX2xvZ0xldmVsPj1vLldhcm5pbmdzJiZ0aGlzLl9wcmludC5hcHBseSh0aGlzLGUoW28uV2FybmluZ3NdLHIodCkpKX0sbi5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuXT1hcmd1bWVudHNbbl07dGhpcy5fbG9nTGV2ZWw+PW8uRXJyb3JzJiZ0aGlzLl9wcmludC5hcHBseSh0aGlzLGUoW28uRXJyb3JzXSxyKHQpKSl9LG4ucHJvdG90eXBlLnNldExvZ0Z1bmN0aW9uPWZ1bmN0aW9uKHIpe3RoaXMuX3ByaW50PXJ9LG4ucHJvdG90eXBlLl9wcmludD1mdW5jdGlvbihuKXtmb3IodmFyIGw9W10saT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspbFtpLTFdPWFyZ3VtZW50c1tpXTt2YXIgcz1lKFt0XSxyKGwpKTtmb3IodmFyIGEgaW4gcylzW2FdaW5zdGFuY2VvZiBFcnJvciYmKHNbYV09XCIoXCIrc1thXS5uYW1lK1wiKSBcIitzW2FdLm1lc3NhZ2UpO24+PW8uQWxsP2NvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsZShbXSxyKHMpKSk6bj49by5XYXJuaW5ncz9jb25zb2xlLndhcm4uYXBwbHkoY29uc29sZSxlKFtcIldBUk5JTkdcIl0scihzKSkpOm4+PW8uRXJyb3JzJiZjb25zb2xlLmVycm9yLmFwcGx5KGNvbnNvbGUsZShbXCJFUlJPUlwiXSxyKHMpKSl9LG59KCk7ZXhwb3J0cy5kZWZhdWx0PW5ldyBuO1xufSx7fV0sXCJaUllmXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlLHIsbyxuLHQsYSxpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuU2VydmVyTWVzc2FnZVR5cGU9ZXhwb3J0cy5Tb2NrZXRFdmVudFR5cGU9ZXhwb3J0cy5TZXJpYWxpemF0aW9uVHlwZT1leHBvcnRzLlBlZXJFcnJvclR5cGU9ZXhwb3J0cy5QZWVyRXZlbnRUeXBlPWV4cG9ydHMuQ29ubmVjdGlvblR5cGU9ZXhwb3J0cy5Db25uZWN0aW9uRXZlbnRUeXBlPXZvaWQgMCxmdW5jdGlvbihlKXtlLk9wZW49XCJvcGVuXCIsZS5TdHJlYW09XCJzdHJlYW1cIixlLkRhdGE9XCJkYXRhXCIsZS5DbG9zZT1cImNsb3NlXCIsZS5FcnJvcj1cImVycm9yXCIsZS5JY2VTdGF0ZUNoYW5nZWQ9XCJpY2VTdGF0ZUNoYW5nZWRcIn0oZT1leHBvcnRzLkNvbm5lY3Rpb25FdmVudFR5cGV8fChleHBvcnRzLkNvbm5lY3Rpb25FdmVudFR5cGU9e30pKSxmdW5jdGlvbihlKXtlLkRhdGE9XCJkYXRhXCIsZS5NZWRpYT1cIm1lZGlhXCJ9KHI9ZXhwb3J0cy5Db25uZWN0aW9uVHlwZXx8KGV4cG9ydHMuQ29ubmVjdGlvblR5cGU9e30pKSxmdW5jdGlvbihlKXtlLk9wZW49XCJvcGVuXCIsZS5DbG9zZT1cImNsb3NlXCIsZS5Db25uZWN0aW9uPVwiY29ubmVjdGlvblwiLGUuQ2FsbD1cImNhbGxcIixlLkRpc2Nvbm5lY3RlZD1cImRpc2Nvbm5lY3RlZFwiLGUuRXJyb3I9XCJlcnJvclwifShvPWV4cG9ydHMuUGVlckV2ZW50VHlwZXx8KGV4cG9ydHMuUGVlckV2ZW50VHlwZT17fSkpLGZ1bmN0aW9uKGUpe2UuQnJvd3NlckluY29tcGF0aWJsZT1cImJyb3dzZXItaW5jb21wYXRpYmxlXCIsZS5EaXNjb25uZWN0ZWQ9XCJkaXNjb25uZWN0ZWRcIixlLkludmFsaWRJRD1cImludmFsaWQtaWRcIixlLkludmFsaWRLZXk9XCJpbnZhbGlkLWtleVwiLGUuTmV0d29yaz1cIm5ldHdvcmtcIixlLlBlZXJVbmF2YWlsYWJsZT1cInBlZXItdW5hdmFpbGFibGVcIixlLlNzbFVuYXZhaWxhYmxlPVwic3NsLXVuYXZhaWxhYmxlXCIsZS5TZXJ2ZXJFcnJvcj1cInNlcnZlci1lcnJvclwiLGUuU29ja2V0RXJyb3I9XCJzb2NrZXQtZXJyb3JcIixlLlNvY2tldENsb3NlZD1cInNvY2tldC1jbG9zZWRcIixlLlVuYXZhaWxhYmxlSUQ9XCJ1bmF2YWlsYWJsZS1pZFwiLGUuV2ViUlRDPVwid2VicnRjXCJ9KG49ZXhwb3J0cy5QZWVyRXJyb3JUeXBlfHwoZXhwb3J0cy5QZWVyRXJyb3JUeXBlPXt9KSksZnVuY3Rpb24oZSl7ZS5CaW5hcnk9XCJiaW5hcnlcIixlLkJpbmFyeVVURjg9XCJiaW5hcnktdXRmOFwiLGUuSlNPTj1cImpzb25cIn0odD1leHBvcnRzLlNlcmlhbGl6YXRpb25UeXBlfHwoZXhwb3J0cy5TZXJpYWxpemF0aW9uVHlwZT17fSkpLGZ1bmN0aW9uKGUpe2UuTWVzc2FnZT1cIm1lc3NhZ2VcIixlLkRpc2Nvbm5lY3RlZD1cImRpc2Nvbm5lY3RlZFwiLGUuRXJyb3I9XCJlcnJvclwiLGUuQ2xvc2U9XCJjbG9zZVwifShhPWV4cG9ydHMuU29ja2V0RXZlbnRUeXBlfHwoZXhwb3J0cy5Tb2NrZXRFdmVudFR5cGU9e30pKSxmdW5jdGlvbihlKXtlLkhlYXJ0YmVhdD1cIkhFQVJUQkVBVFwiLGUuQ2FuZGlkYXRlPVwiQ0FORElEQVRFXCIsZS5PZmZlcj1cIk9GRkVSXCIsZS5BbnN3ZXI9XCJBTlNXRVJcIixlLk9wZW49XCJPUEVOXCIsZS5FcnJvcj1cIkVSUk9SXCIsZS5JZFRha2VuPVwiSUQtVEFLRU5cIixlLkludmFsaWRLZXk9XCJJTlZBTElELUtFWVwiLGUuTGVhdmU9XCJMRUFWRVwiLGUuRXhwaXJlPVwiRVhQSVJFXCJ9KGk9ZXhwb3J0cy5TZXJ2ZXJNZXNzYWdlVHlwZXx8KGV4cG9ydHMuU2VydmVyTWVzc2FnZVR5cGU9e30pKTtcbn0se31dLFwid0psdlwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgZT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbih0LG4pe3JldHVybihlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKX0pKHQsbil9O3JldHVybiBmdW5jdGlvbih0LG4pe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4mJm51bGwhPT1uKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiK1N0cmluZyhuKStcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO2Z1bmN0aW9uIG8oKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LG4pLHQucHJvdG90eXBlPW51bGw9PT1uP09iamVjdC5jcmVhdGUobik6KG8ucHJvdG90eXBlPW4ucHJvdG90eXBlLG5ldyBvKX19KCksdD10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24oZSx0KXt2YXIgbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXTtpZighbilyZXR1cm4gZTt2YXIgbyxzLHI9bi5jYWxsKGUpLGk9W107dHJ5e2Zvcig7KHZvaWQgMD09PXR8fHQtLSA+MCkmJiEobz1yLm5leHQoKSkuZG9uZTspaS5wdXNoKG8udmFsdWUpfWNhdGNoKGMpe3M9e2Vycm9yOmN9fWZpbmFsbHl7dHJ5e28mJiFvLmRvbmUmJihuPXIucmV0dXJuKSYmbi5jYWxsKHIpfWZpbmFsbHl7aWYocyl0aHJvdyBzLmVycm9yfX1yZXR1cm4gaX0sbj10aGlzJiZ0aGlzLl9fc3ByZWFkQXJyYXl8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTAsbz10Lmxlbmd0aCxzPWUubGVuZ3RoO248bztuKysscysrKWVbc109dFtuXTtyZXR1cm4gZX0sbz10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixuPXQmJmVbdF0sbz0wO2lmKG4pcmV0dXJuIG4uY2FsbChlKTtpZihlJiZcIm51bWJlclwiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmbz49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbbysrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD9cIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCI6XCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpfSxzPXRoaXMmJnRoaXMuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuU29ja2V0PXZvaWQgMDt2YXIgcj1yZXF1aXJlKFwiZXZlbnRlbWl0dGVyM1wiKSxpPXMocmVxdWlyZShcIi4vbG9nZ2VyXCIpKSxjPXJlcXVpcmUoXCIuL2VudW1zXCIpLGE9ZnVuY3Rpb24ocyl7ZnVuY3Rpb24gcihlLHQsbixvLHIsaSl7dm9pZCAwPT09aSYmKGk9NWUzKTt2YXIgYz1zLmNhbGwodGhpcyl8fHRoaXM7Yy5waW5nSW50ZXJ2YWw9aSxjLl9kaXNjb25uZWN0ZWQ9ITAsYy5fbWVzc2FnZXNRdWV1ZT1bXTt2YXIgYT1lP1wid3NzOi8vXCI6XCJ3czovL1wiO3JldHVybiBjLl9iYXNlVXJsPWErdCtcIjpcIituK28rXCJwZWVyanM/a2V5PVwiK3IsY31yZXR1cm4gZShyLHMpLHIucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpczt0aGlzLl9pZD1lO3ZhciBvPXRoaXMuX2Jhc2VVcmwrXCImaWQ9XCIrZStcIiZ0b2tlbj1cIit0OyF0aGlzLl9zb2NrZXQmJnRoaXMuX2Rpc2Nvbm5lY3RlZCYmKHRoaXMuX3NvY2tldD1uZXcgV2ViU29ja2V0KG8pLHRoaXMuX2Rpc2Nvbm5lY3RlZD0hMSx0aGlzLl9zb2NrZXQub25tZXNzYWdlPWZ1bmN0aW9uKGUpe3ZhciB0O3RyeXt0PUpTT04ucGFyc2UoZS5kYXRhKSxpLmRlZmF1bHQubG9nKFwiU2VydmVyIG1lc3NhZ2UgcmVjZWl2ZWQ6XCIsdCl9Y2F0Y2gobyl7cmV0dXJuIHZvaWQgaS5kZWZhdWx0LmxvZyhcIkludmFsaWQgc2VydmVyIG1lc3NhZ2VcIixlLmRhdGEpfW4uZW1pdChjLlNvY2tldEV2ZW50VHlwZS5NZXNzYWdlLHQpfSx0aGlzLl9zb2NrZXQub25jbG9zZT1mdW5jdGlvbihlKXtuLl9kaXNjb25uZWN0ZWR8fChpLmRlZmF1bHQubG9nKFwiU29ja2V0IGNsb3NlZC5cIixlKSxuLl9jbGVhbnVwKCksbi5fZGlzY29ubmVjdGVkPSEwLG4uZW1pdChjLlNvY2tldEV2ZW50VHlwZS5EaXNjb25uZWN0ZWQpKX0sdGhpcy5fc29ja2V0Lm9ub3Blbj1mdW5jdGlvbigpe24uX2Rpc2Nvbm5lY3RlZHx8KG4uX3NlbmRRdWV1ZWRNZXNzYWdlcygpLGkuZGVmYXVsdC5sb2coXCJTb2NrZXQgb3BlblwiKSxuLl9zY2hlZHVsZUhlYXJ0YmVhdCgpKX0pfSxyLnByb3RvdHlwZS5fc2NoZWR1bGVIZWFydGJlYXQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX3dzUGluZ1RpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLl9zZW5kSGVhcnRiZWF0KCl9LHRoaXMucGluZ0ludGVydmFsKX0sci5wcm90b3R5cGUuX3NlbmRIZWFydGJlYXQ9ZnVuY3Rpb24oKXtpZih0aGlzLl93c09wZW4oKSl7dmFyIGU9SlNPTi5zdHJpbmdpZnkoe3R5cGU6Yy5TZXJ2ZXJNZXNzYWdlVHlwZS5IZWFydGJlYXR9KTt0aGlzLl9zb2NrZXQuc2VuZChlKSx0aGlzLl9zY2hlZHVsZUhlYXJ0YmVhdCgpfWVsc2UgaS5kZWZhdWx0LmxvZyhcIkNhbm5vdCBzZW5kIGhlYXJ0YmVhdCwgYmVjYXVzZSBzb2NrZXQgY2xvc2VkXCIpfSxyLnByb3RvdHlwZS5fd3NPcGVuPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9zb2NrZXQmJjE9PT10aGlzLl9zb2NrZXQucmVhZHlTdGF0ZX0sci5wcm90b3R5cGUuX3NlbmRRdWV1ZWRNZXNzYWdlcz1mdW5jdGlvbigpe3ZhciBlLHMscj1uKFtdLHQodGhpcy5fbWVzc2FnZXNRdWV1ZSkpO3RoaXMuX21lc3NhZ2VzUXVldWU9W107dHJ5e2Zvcih2YXIgaT1vKHIpLGM9aS5uZXh0KCk7IWMuZG9uZTtjPWkubmV4dCgpKXt2YXIgYT1jLnZhbHVlO3RoaXMuc2VuZChhKX19Y2F0Y2godSl7ZT17ZXJyb3I6dX19ZmluYWxseXt0cnl7YyYmIWMuZG9uZSYmKHM9aS5yZXR1cm4pJiZzLmNhbGwoaSl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fX0sci5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihlKXtpZighdGhpcy5fZGlzY29ubmVjdGVkKWlmKHRoaXMuX2lkKWlmKGUudHlwZSl7aWYodGhpcy5fd3NPcGVuKCkpe3ZhciB0PUpTT04uc3RyaW5naWZ5KGUpO3RoaXMuX3NvY2tldC5zZW5kKHQpfX1lbHNlIHRoaXMuZW1pdChjLlNvY2tldEV2ZW50VHlwZS5FcnJvcixcIkludmFsaWQgbWVzc2FnZVwiKTtlbHNlIHRoaXMuX21lc3NhZ2VzUXVldWUucHVzaChlKX0sci5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLl9kaXNjb25uZWN0ZWR8fCh0aGlzLl9jbGVhbnVwKCksdGhpcy5fZGlzY29ubmVjdGVkPSEwKX0sci5wcm90b3R5cGUuX2NsZWFudXA9ZnVuY3Rpb24oKXt0aGlzLl9zb2NrZXQmJih0aGlzLl9zb2NrZXQub25vcGVuPXRoaXMuX3NvY2tldC5vbm1lc3NhZ2U9dGhpcy5fc29ja2V0Lm9uY2xvc2U9bnVsbCx0aGlzLl9zb2NrZXQuY2xvc2UoKSx0aGlzLl9zb2NrZXQ9dm9pZCAwKSxjbGVhclRpbWVvdXQodGhpcy5fd3NQaW5nVGltZXIpfSxyfShyLkV2ZW50RW1pdHRlcik7ZXhwb3J0cy5Tb2NrZXQ9YTtcbn0se1wiZXZlbnRlbWl0dGVyM1wiOlwiSkpsU1wiLFwiLi9sb2dnZXJcIjpcIldPczlcIixcIi4vZW51bXNcIjpcIlpSWWZcIn1dLFwiSENkWFwiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgZT10aGlzJiZ0aGlzLl9fYXNzaWdufHxmdW5jdGlvbigpe3JldHVybihlPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgbix0PTEsbz1hcmd1bWVudHMubGVuZ3RoO3Q8bzt0KyspZm9yKHZhciBpIGluIG49YXJndW1lbnRzW3RdKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLGkpJiYoZVtpXT1uW2ldKTtyZXR1cm4gZX0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbj10aGlzJiZ0aGlzLl9fYXdhaXRlcnx8ZnVuY3Rpb24oZSxuLHQsbyl7cmV0dXJuIG5ldyh0fHwodD1Qcm9taXNlKSkoZnVuY3Rpb24oaSxyKXtmdW5jdGlvbiBjKGUpe3RyeXtzKG8ubmV4dChlKSl9Y2F0Y2gobil7cihuKX19ZnVuY3Rpb24gYShlKXt0cnl7cyhvLnRocm93KGUpKX1jYXRjaChuKXtyKG4pfX1mdW5jdGlvbiBzKGUpe3ZhciBuO2UuZG9uZT9pKGUudmFsdWUpOihuPWUudmFsdWUsbiBpbnN0YW5jZW9mIHQ/bjpuZXcgdChmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4oYyxhKX1zKChvPW8uYXBwbHkoZSxufHxbXSkpLm5leHQoKSl9KX0sdD10aGlzJiZ0aGlzLl9fZ2VuZXJhdG9yfHxmdW5jdGlvbihlLG4pe3ZhciB0LG8saSxyLGM9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmaVswXSl0aHJvdyBpWzFdO3JldHVybiBpWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIHI9e25leHQ6YSgwKSx0aHJvdzphKDEpLHJldHVybjphKDIpfSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJihyW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHI7ZnVuY3Rpb24gYShyKXtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKHIpe2lmKHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7Zm9yKDtjOyl0cnl7aWYodD0xLG8mJihpPTImclswXT9vLnJldHVybjpyWzBdP28udGhyb3d8fCgoaT1vLnJldHVybikmJmkuY2FsbChvKSwwKTpvLm5leHQpJiYhKGk9aS5jYWxsKG8sclsxXSkpLmRvbmUpcmV0dXJuIGk7c3dpdGNoKG89MCxpJiYocj1bMiZyWzBdLGkudmFsdWVdKSxyWzBdKXtjYXNlIDA6Y2FzZSAxOmk9cjticmVhaztjYXNlIDQ6cmV0dXJuIGMubGFiZWwrKyx7dmFsdWU6clsxXSxkb25lOiExfTtjYXNlIDU6Yy5sYWJlbCsrLG89clsxXSxyPVswXTtjb250aW51ZTtjYXNlIDc6cj1jLm9wcy5wb3AoKSxjLnRyeXMucG9wKCk7Y29udGludWU7ZGVmYXVsdDppZighKGk9KGk9Yy50cnlzKS5sZW5ndGg+MCYmaVtpLmxlbmd0aC0xXSkmJig2PT09clswXXx8Mj09PXJbMF0pKXtjPTA7Y29udGludWV9aWYoMz09PXJbMF0mJighaXx8clsxXT5pWzBdJiZyWzFdPGlbM10pKXtjLmxhYmVsPXJbMV07YnJlYWt9aWYoNj09PXJbMF0mJmMubGFiZWw8aVsxXSl7Yy5sYWJlbD1pWzFdLGk9cjticmVha31pZihpJiZjLmxhYmVsPGlbMl0pe2MubGFiZWw9aVsyXSxjLm9wcy5wdXNoKHIpO2JyZWFrfWlbMl0mJmMub3BzLnBvcCgpLGMudHJ5cy5wb3AoKTtjb250aW51ZX1yPW4uY2FsbChlLGMpfWNhdGNoKGEpe3I9WzYsYV0sbz0wfWZpbmFsbHl7dD1pPTB9aWYoNSZyWzBdKXRocm93IHJbMV07cmV0dXJue3ZhbHVlOnJbMF0/clsxXTp2b2lkIDAsZG9uZTohMH19KFtyLGFdKX19fSxvPXRoaXMmJnRoaXMuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuTmVnb3RpYXRvcj12b2lkIDA7dmFyIGk9cmVxdWlyZShcIi4vdXRpbFwiKSxyPW8ocmVxdWlyZShcIi4vbG9nZ2VyXCIpKSxjPXJlcXVpcmUoXCIuL2VudW1zXCIpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBvKGUpe3RoaXMuY29ubmVjdGlvbj1lfXJldHVybiBvLnByb3RvdHlwZS5zdGFydENvbm5lY3Rpb249ZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5fc3RhcnRQZWVyQ29ubmVjdGlvbigpO2lmKHRoaXMuY29ubmVjdGlvbi5wZWVyQ29ubmVjdGlvbj1uLHRoaXMuY29ubmVjdGlvbi50eXBlPT09Yy5Db25uZWN0aW9uVHlwZS5NZWRpYSYmZS5fc3RyZWFtJiZ0aGlzLl9hZGRUcmFja3NUb0Nvbm5lY3Rpb24oZS5fc3RyZWFtLG4pLGUub3JpZ2luYXRvcil7aWYodGhpcy5jb25uZWN0aW9uLnR5cGU9PT1jLkNvbm5lY3Rpb25UeXBlLkRhdGEpe3ZhciB0PXRoaXMuY29ubmVjdGlvbixvPXtvcmRlcmVkOiEhZS5yZWxpYWJsZX0saT1uLmNyZWF0ZURhdGFDaGFubmVsKHQubGFiZWwsbyk7dC5pbml0aWFsaXplKGkpfXRoaXMuX21ha2VPZmZlcigpfWVsc2UgdGhpcy5oYW5kbGVTRFAoXCJPRkZFUlwiLGUuc2RwKX0sby5wcm90b3R5cGUuX3N0YXJ0UGVlckNvbm5lY3Rpb249ZnVuY3Rpb24oKXtyLmRlZmF1bHQubG9nKFwiQ3JlYXRpbmcgUlRDUGVlckNvbm5lY3Rpb24uXCIpO3ZhciBlPW5ldyBSVENQZWVyQ29ubmVjdGlvbih0aGlzLmNvbm5lY3Rpb24ucHJvdmlkZXIub3B0aW9ucy5jb25maWcpO3JldHVybiB0aGlzLl9zZXR1cExpc3RlbmVycyhlKSxlfSxvLnByb3RvdHlwZS5fc2V0dXBMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyx0PXRoaXMuY29ubmVjdGlvbi5wZWVyLG89dGhpcy5jb25uZWN0aW9uLmNvbm5lY3Rpb25JZCxhPXRoaXMuY29ubmVjdGlvbi50eXBlLHM9dGhpcy5jb25uZWN0aW9uLnByb3ZpZGVyO3IuZGVmYXVsdC5sb2coXCJMaXN0ZW5pbmcgZm9yIElDRSBjYW5kaWRhdGVzLlwiKSxlLm9uaWNlY2FuZGlkYXRlPWZ1bmN0aW9uKGUpe2UuY2FuZGlkYXRlJiZlLmNhbmRpZGF0ZS5jYW5kaWRhdGUmJihyLmRlZmF1bHQubG9nKFwiUmVjZWl2ZWQgSUNFIGNhbmRpZGF0ZXMgZm9yIFwiK3QrXCI6XCIsZS5jYW5kaWRhdGUpLHMuc29ja2V0LnNlbmQoe3R5cGU6Yy5TZXJ2ZXJNZXNzYWdlVHlwZS5DYW5kaWRhdGUscGF5bG9hZDp7Y2FuZGlkYXRlOmUuY2FuZGlkYXRlLHR5cGU6YSxjb25uZWN0aW9uSWQ6b30sZHN0OnR9KSl9LGUub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtzd2l0Y2goZS5pY2VDb25uZWN0aW9uU3RhdGUpe2Nhc2VcImZhaWxlZFwiOnIuZGVmYXVsdC5sb2coXCJpY2VDb25uZWN0aW9uU3RhdGUgaXMgZmFpbGVkLCBjbG9zaW5nIGNvbm5lY3Rpb25zIHRvIFwiK3QpLG4uY29ubmVjdGlvbi5lbWl0KGMuQ29ubmVjdGlvbkV2ZW50VHlwZS5FcnJvcixuZXcgRXJyb3IoXCJOZWdvdGlhdGlvbiBvZiBjb25uZWN0aW9uIHRvIFwiK3QrXCIgZmFpbGVkLlwiKSksbi5jb25uZWN0aW9uLmNsb3NlKCk7YnJlYWs7Y2FzZVwiY2xvc2VkXCI6ci5kZWZhdWx0LmxvZyhcImljZUNvbm5lY3Rpb25TdGF0ZSBpcyBjbG9zZWQsIGNsb3NpbmcgY29ubmVjdGlvbnMgdG8gXCIrdCksbi5jb25uZWN0aW9uLmVtaXQoYy5Db25uZWN0aW9uRXZlbnRUeXBlLkVycm9yLG5ldyBFcnJvcihcIkNvbm5lY3Rpb24gdG8gXCIrdCtcIiBjbG9zZWQuXCIpKSxuLmNvbm5lY3Rpb24uY2xvc2UoKTticmVhaztjYXNlXCJkaXNjb25uZWN0ZWRcIjpyLmRlZmF1bHQubG9nKFwiaWNlQ29ubmVjdGlvblN0YXRlIGNoYW5nZWQgdG8gZGlzY29ubmVjdGVkIG9uIHRoZSBjb25uZWN0aW9uIHdpdGggXCIrdCk7YnJlYWs7Y2FzZVwiY29tcGxldGVkXCI6ZS5vbmljZWNhbmRpZGF0ZT1pLnV0aWwubm9vcH1uLmNvbm5lY3Rpb24uZW1pdChjLkNvbm5lY3Rpb25FdmVudFR5cGUuSWNlU3RhdGVDaGFuZ2VkLGUuaWNlQ29ubmVjdGlvblN0YXRlKX0sci5kZWZhdWx0LmxvZyhcIkxpc3RlbmluZyBmb3IgZGF0YSBjaGFubmVsXCIpLGUub25kYXRhY2hhbm5lbD1mdW5jdGlvbihlKXtyLmRlZmF1bHQubG9nKFwiUmVjZWl2ZWQgZGF0YSBjaGFubmVsXCIpO3ZhciBuPWUuY2hhbm5lbDtzLmdldENvbm5lY3Rpb24odCxvKS5pbml0aWFsaXplKG4pfSxyLmRlZmF1bHQubG9nKFwiTGlzdGVuaW5nIGZvciByZW1vdGUgc3RyZWFtXCIpLGUub250cmFjaz1mdW5jdGlvbihlKXtyLmRlZmF1bHQubG9nKFwiUmVjZWl2ZWQgcmVtb3RlIHN0cmVhbVwiKTt2YXIgaT1lLnN0cmVhbXNbMF0sYT1zLmdldENvbm5lY3Rpb24odCxvKTtpZihhLnR5cGU9PT1jLkNvbm5lY3Rpb25UeXBlLk1lZGlhKXt2YXIgZD1hO24uX2FkZFN0cmVhbVRvTWVkaWFDb25uZWN0aW9uKGksZCl9fX0sby5wcm90b3R5cGUuY2xlYW51cD1mdW5jdGlvbigpe3IuZGVmYXVsdC5sb2coXCJDbGVhbmluZyB1cCBQZWVyQ29ubmVjdGlvbiB0byBcIit0aGlzLmNvbm5lY3Rpb24ucGVlcik7dmFyIGU9dGhpcy5jb25uZWN0aW9uLnBlZXJDb25uZWN0aW9uO2lmKGUpe3RoaXMuY29ubmVjdGlvbi5wZWVyQ29ubmVjdGlvbj1udWxsLGUub25pY2VjYW5kaWRhdGU9ZS5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZT1lLm9uZGF0YWNoYW5uZWw9ZS5vbnRyYWNrPWZ1bmN0aW9uKCl7fTt2YXIgbj1cImNsb3NlZFwiIT09ZS5zaWduYWxpbmdTdGF0ZSx0PSExO2lmKHRoaXMuY29ubmVjdGlvbi50eXBlPT09Yy5Db25uZWN0aW9uVHlwZS5EYXRhKXt2YXIgbz10aGlzLmNvbm5lY3Rpb24uZGF0YUNoYW5uZWw7byYmKHQ9ISFvLnJlYWR5U3RhdGUmJlwiY2xvc2VkXCIhPT1vLnJlYWR5U3RhdGUpfShufHx0KSYmZS5jbG9zZSgpfX0sby5wcm90b3R5cGUuX21ha2VPZmZlcj1mdW5jdGlvbigpe3JldHVybiBuKHRoaXMsdm9pZCAwLFByb21pc2UsZnVuY3Rpb24oKXt2YXIgbixvLGEscyxkLGwsdTtyZXR1cm4gdCh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6bj10aGlzLmNvbm5lY3Rpb24ucGVlckNvbm5lY3Rpb24sbz10aGlzLmNvbm5lY3Rpb24ucHJvdmlkZXIsdC5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gdC50cnlzLnB1c2goWzEsNywsOF0pLFs0LG4uY3JlYXRlT2ZmZXIodGhpcy5jb25uZWN0aW9uLm9wdGlvbnMuY29uc3RyYWludHMpXTtjYXNlIDI6YT10LnNlbnQoKSxyLmRlZmF1bHQubG9nKFwiQ3JlYXRlZCBvZmZlci5cIiksdGhpcy5jb25uZWN0aW9uLm9wdGlvbnMuc2RwVHJhbnNmb3JtJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLmNvbm5lY3Rpb24ub3B0aW9ucy5zZHBUcmFuc2Zvcm0mJihhLnNkcD10aGlzLmNvbm5lY3Rpb24ub3B0aW9ucy5zZHBUcmFuc2Zvcm0oYS5zZHApfHxhLnNkcCksdC5sYWJlbD0zO2Nhc2UgMzpyZXR1cm4gdC50cnlzLnB1c2goWzMsNSwsNl0pLFs0LG4uc2V0TG9jYWxEZXNjcmlwdGlvbihhKV07Y2FzZSA0OnJldHVybiB0LnNlbnQoKSxyLmRlZmF1bHQubG9nKFwiU2V0IGxvY2FsRGVzY3JpcHRpb246XCIsYSxcImZvcjpcIit0aGlzLmNvbm5lY3Rpb24ucGVlcikscz17c2RwOmEsdHlwZTp0aGlzLmNvbm5lY3Rpb24udHlwZSxjb25uZWN0aW9uSWQ6dGhpcy5jb25uZWN0aW9uLmNvbm5lY3Rpb25JZCxtZXRhZGF0YTp0aGlzLmNvbm5lY3Rpb24ubWV0YWRhdGEsYnJvd3NlcjppLnV0aWwuYnJvd3Nlcn0sdGhpcy5jb25uZWN0aW9uLnR5cGU9PT1jLkNvbm5lY3Rpb25UeXBlLkRhdGEmJihkPXRoaXMuY29ubmVjdGlvbixzPWUoZSh7fSxzKSx7bGFiZWw6ZC5sYWJlbCxyZWxpYWJsZTpkLnJlbGlhYmxlLHNlcmlhbGl6YXRpb246ZC5zZXJpYWxpemF0aW9ufSkpLG8uc29ja2V0LnNlbmQoe3R5cGU6Yy5TZXJ2ZXJNZXNzYWdlVHlwZS5PZmZlcixwYXlsb2FkOnMsZHN0OnRoaXMuY29ubmVjdGlvbi5wZWVyfSksWzMsNl07Y2FzZSA1OnJldHVyblwiT3BlcmF0aW9uRXJyb3I6IEZhaWxlZCB0byBzZXQgbG9jYWwgb2ZmZXIgc2RwOiBDYWxsZWQgaW4gd3Jvbmcgc3RhdGU6IGtIYXZlUmVtb3RlT2ZmZXJcIiE9KGw9dC5zZW50KCkpJiYoby5lbWl0RXJyb3IoYy5QZWVyRXJyb3JUeXBlLldlYlJUQyxsKSxyLmRlZmF1bHQubG9nKFwiRmFpbGVkIHRvIHNldExvY2FsRGVzY3JpcHRpb24sIFwiLGwpKSxbMyw2XTtjYXNlIDY6cmV0dXJuWzMsOF07Y2FzZSA3OnJldHVybiB1PXQuc2VudCgpLG8uZW1pdEVycm9yKGMuUGVlckVycm9yVHlwZS5XZWJSVEMsdSksci5kZWZhdWx0LmxvZyhcIkZhaWxlZCB0byBjcmVhdGVPZmZlciwgXCIsdSksWzMsOF07Y2FzZSA4OnJldHVyblsyXX19KX0pfSxvLnByb3RvdHlwZS5fbWFrZUFuc3dlcj1mdW5jdGlvbigpe3JldHVybiBuKHRoaXMsdm9pZCAwLFByb21pc2UsZnVuY3Rpb24oKXt2YXIgZSxuLG8sYSxzO3JldHVybiB0KHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDplPXRoaXMuY29ubmVjdGlvbi5wZWVyQ29ubmVjdGlvbixuPXRoaXMuY29ubmVjdGlvbi5wcm92aWRlcix0LmxhYmVsPTE7Y2FzZSAxOnJldHVybiB0LnRyeXMucHVzaChbMSw3LCw4XSksWzQsZS5jcmVhdGVBbnN3ZXIoKV07Y2FzZSAyOm89dC5zZW50KCksci5kZWZhdWx0LmxvZyhcIkNyZWF0ZWQgYW5zd2VyLlwiKSx0aGlzLmNvbm5lY3Rpb24ub3B0aW9ucy5zZHBUcmFuc2Zvcm0mJlwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuY29ubmVjdGlvbi5vcHRpb25zLnNkcFRyYW5zZm9ybSYmKG8uc2RwPXRoaXMuY29ubmVjdGlvbi5vcHRpb25zLnNkcFRyYW5zZm9ybShvLnNkcCl8fG8uc2RwKSx0LmxhYmVsPTM7Y2FzZSAzOnJldHVybiB0LnRyeXMucHVzaChbMyw1LCw2XSksWzQsZS5zZXRMb2NhbERlc2NyaXB0aW9uKG8pXTtjYXNlIDQ6cmV0dXJuIHQuc2VudCgpLHIuZGVmYXVsdC5sb2coXCJTZXQgbG9jYWxEZXNjcmlwdGlvbjpcIixvLFwiZm9yOlwiK3RoaXMuY29ubmVjdGlvbi5wZWVyKSxuLnNvY2tldC5zZW5kKHt0eXBlOmMuU2VydmVyTWVzc2FnZVR5cGUuQW5zd2VyLHBheWxvYWQ6e3NkcDpvLHR5cGU6dGhpcy5jb25uZWN0aW9uLnR5cGUsY29ubmVjdGlvbklkOnRoaXMuY29ubmVjdGlvbi5jb25uZWN0aW9uSWQsYnJvd3NlcjppLnV0aWwuYnJvd3Nlcn0sZHN0OnRoaXMuY29ubmVjdGlvbi5wZWVyfSksWzMsNl07Y2FzZSA1OnJldHVybiBhPXQuc2VudCgpLG4uZW1pdEVycm9yKGMuUGVlckVycm9yVHlwZS5XZWJSVEMsYSksci5kZWZhdWx0LmxvZyhcIkZhaWxlZCB0byBzZXRMb2NhbERlc2NyaXB0aW9uLCBcIixhKSxbMyw2XTtjYXNlIDY6cmV0dXJuWzMsOF07Y2FzZSA3OnJldHVybiBzPXQuc2VudCgpLG4uZW1pdEVycm9yKGMuUGVlckVycm9yVHlwZS5XZWJSVEMscyksci5kZWZhdWx0LmxvZyhcIkZhaWxlZCB0byBjcmVhdGUgYW5zd2VyLCBcIixzKSxbMyw4XTtjYXNlIDg6cmV0dXJuWzJdfX0pfSl9LG8ucHJvdG90eXBlLmhhbmRsZVNEUD1mdW5jdGlvbihlLG8pe3JldHVybiBuKHRoaXMsdm9pZCAwLFByb21pc2UsZnVuY3Rpb24oKXt2YXIgbixpLGEscztyZXR1cm4gdCh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6bz1uZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKG8pLG49dGhpcy5jb25uZWN0aW9uLnBlZXJDb25uZWN0aW9uLGk9dGhpcy5jb25uZWN0aW9uLnByb3ZpZGVyLHIuZGVmYXVsdC5sb2coXCJTZXR0aW5nIHJlbW90ZSBkZXNjcmlwdGlvblwiLG8pLGE9dGhpcyx0LmxhYmVsPTE7Y2FzZSAxOnJldHVybiB0LnRyeXMucHVzaChbMSw1LCw2XSksWzQsbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihvKV07Y2FzZSAyOnJldHVybiB0LnNlbnQoKSxyLmRlZmF1bHQubG9nKFwiU2V0IHJlbW90ZURlc2NyaXB0aW9uOlwiK2UrXCIgZm9yOlwiK3RoaXMuY29ubmVjdGlvbi5wZWVyKSxcIk9GRkVSXCIhPT1lP1szLDRdOls0LGEuX21ha2VBbnN3ZXIoKV07Y2FzZSAzOnQuc2VudCgpLHQubGFiZWw9NDtjYXNlIDQ6cmV0dXJuWzMsNl07Y2FzZSA1OnJldHVybiBzPXQuc2VudCgpLGkuZW1pdEVycm9yKGMuUGVlckVycm9yVHlwZS5XZWJSVEMscyksci5kZWZhdWx0LmxvZyhcIkZhaWxlZCB0byBzZXRSZW1vdGVEZXNjcmlwdGlvbiwgXCIscyksWzMsNl07Y2FzZSA2OnJldHVyblsyXX19KX0pfSxvLnByb3RvdHlwZS5oYW5kbGVDYW5kaWRhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG4odGhpcyx2b2lkIDAsUHJvbWlzZSxmdW5jdGlvbigpe3ZhciBuLG8saSxhLHMsZDtyZXR1cm4gdCh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6ci5kZWZhdWx0LmxvZyhcImhhbmRsZUNhbmRpZGF0ZTpcIixlKSxuPWUuY2FuZGlkYXRlLG89ZS5zZHBNTGluZUluZGV4LGk9ZS5zZHBNaWQsYT10aGlzLmNvbm5lY3Rpb24ucGVlckNvbm5lY3Rpb24scz10aGlzLmNvbm5lY3Rpb24ucHJvdmlkZXIsdC5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gdC50cnlzLnB1c2goWzEsMywsNF0pLFs0LGEuYWRkSWNlQ2FuZGlkYXRlKG5ldyBSVENJY2VDYW5kaWRhdGUoe3NkcE1pZDppLHNkcE1MaW5lSW5kZXg6byxjYW5kaWRhdGU6bn0pKV07Y2FzZSAyOnJldHVybiB0LnNlbnQoKSxyLmRlZmF1bHQubG9nKFwiQWRkZWQgSUNFIGNhbmRpZGF0ZSBmb3I6XCIrdGhpcy5jb25uZWN0aW9uLnBlZXIpLFszLDRdO2Nhc2UgMzpyZXR1cm4gZD10LnNlbnQoKSxzLmVtaXRFcnJvcihjLlBlZXJFcnJvclR5cGUuV2ViUlRDLGQpLHIuZGVmYXVsdC5sb2coXCJGYWlsZWQgdG8gaGFuZGxlQ2FuZGlkYXRlLCBcIixkKSxbMyw0XTtjYXNlIDQ6cmV0dXJuWzJdfX0pfSl9LG8ucHJvdG90eXBlLl9hZGRUcmFja3NUb0Nvbm5lY3Rpb249ZnVuY3Rpb24oZSxuKXtpZihyLmRlZmF1bHQubG9nKFwiYWRkIHRyYWNrcyBmcm9tIHN0cmVhbSBcIitlLmlkK1wiIHRvIHBlZXIgY29ubmVjdGlvblwiKSwhbi5hZGRUcmFjaylyZXR1cm4gci5kZWZhdWx0LmVycm9yKFwiWW91ciBicm93c2VyIGRvZXMndCBzdXBwb3J0IFJUQ1BlZXJDb25uZWN0aW9uI2FkZFRyYWNrLiBJZ25vcmVkLlwiKTtlLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odCl7bi5hZGRUcmFjayh0LGUpfSl9LG8ucHJvdG90eXBlLl9hZGRTdHJlYW1Ub01lZGlhQ29ubmVjdGlvbj1mdW5jdGlvbihlLG4pe3IuZGVmYXVsdC5sb2coXCJhZGQgc3RyZWFtIFwiK2UuaWQrXCIgdG8gbWVkaWEgY29ubmVjdGlvbiBcIituLmNvbm5lY3Rpb25JZCksbi5hZGRTdHJlYW0oZSl9LG99KCk7ZXhwb3J0cy5OZWdvdGlhdG9yPWE7XG59LHtcIi4vdXRpbFwiOlwiQkhYZlwiLFwiLi9sb2dnZXJcIjpcIldPczlcIixcIi4vZW51bXNcIjpcIlpSWWZcIn1dLFwidFFGS1wiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7XG5cInVzZSBzdHJpY3RcIjt2YXIgdD10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbihlLG4pe3JldHVybih0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgbiBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pJiYodFtuXT1lW25dKX0pKGUsbil9O3JldHVybiBmdW5jdGlvbihlLG4pe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4mJm51bGwhPT1uKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiK1N0cmluZyhuKStcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO2Z1bmN0aW9uIG8oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLG4pLGUucHJvdG90eXBlPW51bGw9PT1uP09iamVjdC5jcmVhdGUobik6KG8ucHJvdG90eXBlPW4ucHJvdG90eXBlLG5ldyBvKX19KCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5CYXNlQ29ubmVjdGlvbj12b2lkIDA7dmFyIGU9cmVxdWlyZShcImV2ZW50ZW1pdHRlcjNcIiksbj1mdW5jdGlvbihlKXtmdW5jdGlvbiBuKHQsbixvKXt2YXIgcj1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHIucGVlcj10LHIucHJvdmlkZXI9bixyLm9wdGlvbnM9byxyLl9vcGVuPSExLHIubWV0YWRhdGE9by5tZXRhZGF0YSxyfXJldHVybiB0KG4sZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwib3BlblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3Blbn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxufShlLkV2ZW50RW1pdHRlcik7ZXhwb3J0cy5CYXNlQ29ubmVjdGlvbj1uO1xufSx7XCJldmVudGVtaXR0ZXIzXCI6XCJKSmxTXCJ9XSxcImRiSFBcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIGU9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24odCxvKXtyZXR1cm4oZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG8gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxvKSYmKGVbb109dFtvXSl9KSh0LG8pfTtyZXR1cm4gZnVuY3Rpb24odCxvKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBvJiZudWxsIT09byl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIitTdHJpbmcobykrXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxvKSx0LnByb3RvdHlwZT1udWxsPT09bz9PYmplY3QuY3JlYXRlKG8pOihyLnByb3RvdHlwZT1vLnByb3RvdHlwZSxuZXcgcil9fSgpLHQ9dGhpcyYmdGhpcy5fX2Fzc2lnbnx8ZnVuY3Rpb24oKXtyZXR1cm4odD1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQsbz0xLHI9YXJndW1lbnRzLmxlbmd0aDtvPHI7bysrKWZvcih2YXIgbiBpbiB0PWFyZ3VtZW50c1tvXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG89dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Isbz10JiZlW3RdLHI9MDtpZihvKXJldHVybiBvLmNhbGwoZSk7aWYoZSYmXCJudW1iZXJcIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJnI+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW3IrK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/XCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiOlwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKX0scj10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLk1lZGlhQ29ubmVjdGlvbj12b2lkIDA7dmFyIG49cmVxdWlyZShcIi4vdXRpbFwiKSxpPXIocmVxdWlyZShcIi4vbG9nZ2VyXCIpKSxhPXJlcXVpcmUoXCIuL25lZ290aWF0b3JcIikscz1yZXF1aXJlKFwiLi9lbnVtc1wiKSxsPXJlcXVpcmUoXCIuL2Jhc2Vjb25uZWN0aW9uXCIpLGM9ZnVuY3Rpb24ocil7ZnVuY3Rpb24gbChlLHQsbyl7dmFyIGk9ci5jYWxsKHRoaXMsZSx0LG8pfHx0aGlzO3JldHVybiBpLl9sb2NhbFN0cmVhbT1pLm9wdGlvbnMuX3N0cmVhbSxpLmNvbm5lY3Rpb25JZD1pLm9wdGlvbnMuY29ubmVjdGlvbklkfHxsLklEX1BSRUZJWCtuLnV0aWwucmFuZG9tVG9rZW4oKSxpLl9uZWdvdGlhdG9yPW5ldyBhLk5lZ290aWF0b3IoaSksaS5fbG9jYWxTdHJlYW0mJmkuX25lZ290aWF0b3Iuc3RhcnRDb25uZWN0aW9uKHtfc3RyZWFtOmkuX2xvY2FsU3RyZWFtLG9yaWdpbmF0b3I6ITB9KSxpfXJldHVybiBlKGwsciksT2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5Db25uZWN0aW9uVHlwZS5NZWRpYX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobC5wcm90b3R5cGUsXCJsb2NhbFN0cmVhbVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9jYWxTdHJlYW19LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLFwicmVtb3RlU3RyZWFtXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW1vdGVTdHJlYW19LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksbC5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKGUpe2kuZGVmYXVsdC5sb2coXCJSZWNlaXZpbmcgc3RyZWFtXCIsZSksdGhpcy5fcmVtb3RlU3RyZWFtPWUsci5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMscy5Db25uZWN0aW9uRXZlbnRUeXBlLlN0cmVhbSxlKX0sbC5wcm90b3R5cGUuaGFuZGxlTWVzc2FnZT1mdW5jdGlvbihlKXt2YXIgdD1lLnR5cGUsbz1lLnBheWxvYWQ7c3dpdGNoKGUudHlwZSl7Y2FzZSBzLlNlcnZlck1lc3NhZ2VUeXBlLkFuc3dlcjp0aGlzLl9uZWdvdGlhdG9yLmhhbmRsZVNEUCh0LG8uc2RwKSx0aGlzLl9vcGVuPSEwO2JyZWFrO2Nhc2Ugcy5TZXJ2ZXJNZXNzYWdlVHlwZS5DYW5kaWRhdGU6dGhpcy5fbmVnb3RpYXRvci5oYW5kbGVDYW5kaWRhdGUoby5jYW5kaWRhdGUpO2JyZWFrO2RlZmF1bHQ6aS5kZWZhdWx0Lndhcm4oXCJVbnJlY29nbml6ZWQgbWVzc2FnZSB0eXBlOlwiK3QrXCIgZnJvbSBwZWVyOlwiK3RoaXMucGVlcil9fSxsLnByb3RvdHlwZS5hbnN3ZXI9ZnVuY3Rpb24oZSxyKXt2YXIgbixhO2lmKHZvaWQgMD09PXImJihyPXt9KSx0aGlzLl9sb2NhbFN0cmVhbSlpLmRlZmF1bHQud2FybihcIkxvY2FsIHN0cmVhbSBhbHJlYWR5IGV4aXN0cyBvbiB0aGlzIE1lZGlhQ29ubmVjdGlvbi4gQXJlIHlvdSBhbnN3ZXJpbmcgYSBjYWxsIHR3aWNlP1wiKTtlbHNle3RoaXMuX2xvY2FsU3RyZWFtPWUsciYmci5zZHBUcmFuc2Zvcm0mJih0aGlzLm9wdGlvbnMuc2RwVHJhbnNmb3JtPXIuc2RwVHJhbnNmb3JtKSx0aGlzLl9uZWdvdGlhdG9yLnN0YXJ0Q29ubmVjdGlvbih0KHQoe30sdGhpcy5vcHRpb25zLl9wYXlsb2FkKSx7X3N0cmVhbTplfSkpO3ZhciBzPXRoaXMucHJvdmlkZXIuX2dldE1lc3NhZ2VzKHRoaXMuY29ubmVjdGlvbklkKTt0cnl7Zm9yKHZhciBsPW8ocyksYz1sLm5leHQoKTshYy5kb25lO2M9bC5uZXh0KCkpe3ZhciBwPWMudmFsdWU7dGhpcy5oYW5kbGVNZXNzYWdlKHApfX1jYXRjaCh1KXtuPXtlcnJvcjp1fX1maW5hbGx5e3RyeXtjJiYhYy5kb25lJiYoYT1sLnJldHVybikmJmEuY2FsbChsKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19dGhpcy5fb3Blbj0hMH19LGwucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5fbmVnb3RpYXRvciYmKHRoaXMuX25lZ290aWF0b3IuY2xlYW51cCgpLHRoaXMuX25lZ290aWF0b3I9bnVsbCksdGhpcy5fbG9jYWxTdHJlYW09bnVsbCx0aGlzLl9yZW1vdGVTdHJlYW09bnVsbCx0aGlzLnByb3ZpZGVyJiYodGhpcy5wcm92aWRlci5fcmVtb3ZlQ29ubmVjdGlvbih0aGlzKSx0aGlzLnByb3ZpZGVyPW51bGwpLHRoaXMub3B0aW9ucyYmdGhpcy5vcHRpb25zLl9zdHJlYW0mJih0aGlzLm9wdGlvbnMuX3N0cmVhbT1udWxsKSx0aGlzLm9wZW4mJih0aGlzLl9vcGVuPSExLHIucHJvdG90eXBlLmVtaXQuY2FsbCh0aGlzLHMuQ29ubmVjdGlvbkV2ZW50VHlwZS5DbG9zZSkpfSxsLklEX1BSRUZJWD1cIm1jX1wiLGx9KGwuQmFzZUNvbm5lY3Rpb24pO2V4cG9ydHMuTWVkaWFDb25uZWN0aW9uPWM7XG59LHtcIi4vdXRpbFwiOlwiQkhYZlwiLFwiLi9sb2dnZXJcIjpcIldPczlcIixcIi4vbmVnb3RpYXRvclwiOlwiSENkWFwiLFwiLi9lbnVtc1wiOlwiWlJZZlwiLFwiLi9iYXNlY29ubmVjdGlvblwiOlwidFFGS1wifV0sXCJHR3A2XCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQscil7cmV0dXJuKGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSkodCxyKX07cmV0dXJuIGZ1bmN0aW9uKHQscil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgciYmbnVsbCE9PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIrU3RyaW5nKHIpK1wiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7ZnVuY3Rpb24gbygpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsciksdC5wcm90b3R5cGU9bnVsbD09PXI/T2JqZWN0LmNyZWF0ZShyKTooby5wcm90b3R5cGU9ci5wcm90b3R5cGUsbmV3IG8pfX0oKSx0PXRoaXMmJnRoaXMuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMuRW5jb2RpbmdRdWV1ZT12b2lkIDA7dmFyIHI9cmVxdWlyZShcImV2ZW50ZW1pdHRlcjNcIiksbz10KHJlcXVpcmUoXCIuL2xvZ2dlclwiKSksbj1mdW5jdGlvbih0KXtmdW5jdGlvbiByKCl7dmFyIGU9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBlLmZpbGVSZWFkZXI9bmV3IEZpbGVSZWFkZXIsZS5fcXVldWU9W10sZS5fcHJvY2Vzc2luZz0hMSxlLmZpbGVSZWFkZXIub25sb2FkPWZ1bmN0aW9uKHQpe2UuX3Byb2Nlc3Npbmc9ITEsdC50YXJnZXQmJmUuZW1pdChcImRvbmVcIix0LnRhcmdldC5yZXN1bHQpLGUuZG9OZXh0VGFzaygpfSxlLmZpbGVSZWFkZXIub25lcnJvcj1mdW5jdGlvbih0KXtvLmRlZmF1bHQuZXJyb3IoXCJFbmNvZGluZ1F1ZXVlIGVycm9yOlwiLHQpLGUuX3Byb2Nlc3Npbmc9ITEsZS5kZXN0cm95KCksZS5lbWl0KFwiZXJyb3JcIix0KX0sZX1yZXR1cm4gZShyLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInF1ZXVlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9xdWV1ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXVlLmxlbmd0aH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJwcm9jZXNzaW5nXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9jZXNzaW5nfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHIucHJvdG90eXBlLmVucXVlPWZ1bmN0aW9uKGUpe3RoaXMucXVldWUucHVzaChlKSx0aGlzLnByb2Nlc3Npbmd8fHRoaXMuZG9OZXh0VGFzaygpfSxyLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5maWxlUmVhZGVyLmFib3J0KCksdGhpcy5fcXVldWU9W119LHIucHJvdG90eXBlLmRvTmV4dFRhc2s9ZnVuY3Rpb24oKXswIT09dGhpcy5zaXplJiYodGhpcy5wcm9jZXNzaW5nfHwodGhpcy5fcHJvY2Vzc2luZz0hMCx0aGlzLmZpbGVSZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIodGhpcy5xdWV1ZS5zaGlmdCgpKSkpfSxyfShyLkV2ZW50RW1pdHRlcik7ZXhwb3J0cy5FbmNvZGluZ1F1ZXVlPW47XG59LHtcImV2ZW50ZW1pdHRlcjNcIjpcIkpKbFNcIixcIi4vbG9nZ2VyXCI6XCJXT3M5XCJ9XSxcIkdCVFFcIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykge1xuXCJ1c2Ugc3RyaWN0XCI7dmFyIGU9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24odCxuKXtyZXR1cm4oZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSl9KSh0LG4pfTtyZXR1cm4gZnVuY3Rpb24odCxuKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBuJiZudWxsIT09bil0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIitTdHJpbmcobikrXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxuKSx0LnByb3RvdHlwZT1udWxsPT09bj9PYmplY3QuY3JlYXRlKG4pOihpLnByb3RvdHlwZT1uLnByb3RvdHlwZSxuZXcgaSl9fSgpLHQ9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Isbj10JiZlW3RdLGk9MDtpZihuKXJldHVybiBuLmNhbGwoZSk7aWYoZSYmXCJudW1iZXJcIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/XCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiOlwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKX0sbj10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLkRhdGFDb25uZWN0aW9uPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwiLi91dGlsXCIpLG89bihyZXF1aXJlKFwiLi9sb2dnZXJcIikpLHI9cmVxdWlyZShcIi4vbmVnb3RpYXRvclwiKSxhPXJlcXVpcmUoXCIuL2VudW1zXCIpLHM9cmVxdWlyZShcIi4vYmFzZWNvbm5lY3Rpb25cIiksdT1yZXF1aXJlKFwiLi9lbmNvZGluZ1F1ZXVlXCIpLGw9ZnVuY3Rpb24obil7ZnVuY3Rpb24gcyhlLHQsbCl7dmFyIGY9bi5jYWxsKHRoaXMsZSx0LGwpfHx0aGlzO3JldHVybiBmLnN0cmluZ2lmeT1KU09OLnN0cmluZ2lmeSxmLnBhcnNlPUpTT04ucGFyc2UsZi5fYnVmZmVyPVtdLGYuX2J1ZmZlclNpemU9MCxmLl9idWZmZXJpbmc9ITEsZi5fY2h1bmtlZERhdGE9e30sZi5fZW5jb2RpbmdRdWV1ZT1uZXcgdS5FbmNvZGluZ1F1ZXVlLGYuY29ubmVjdGlvbklkPWYub3B0aW9ucy5jb25uZWN0aW9uSWR8fHMuSURfUFJFRklYK2kudXRpbC5yYW5kb21Ub2tlbigpLGYubGFiZWw9Zi5vcHRpb25zLmxhYmVsfHxmLmNvbm5lY3Rpb25JZCxmLnNlcmlhbGl6YXRpb249Zi5vcHRpb25zLnNlcmlhbGl6YXRpb258fGEuU2VyaWFsaXphdGlvblR5cGUuQmluYXJ5LGYucmVsaWFibGU9ISFmLm9wdGlvbnMucmVsaWFibGUsZi5fZW5jb2RpbmdRdWV1ZS5vbihcImRvbmVcIixmdW5jdGlvbihlKXtmLl9idWZmZXJlZFNlbmQoZSl9KSxmLl9lbmNvZGluZ1F1ZXVlLm9uKFwiZXJyb3JcIixmdW5jdGlvbigpe28uZGVmYXVsdC5lcnJvcihcIkRDI1wiK2YuY29ubmVjdGlvbklkK1wiOiBFcnJvciBvY2N1cmVkIGluIGVuY29kaW5nIGZyb20gYmxvYiB0byBhcnJheWJ1ZmZlciwgY2xvc2UgRENcIiksZi5jbG9zZSgpfSksZi5fbmVnb3RpYXRvcj1uZXcgci5OZWdvdGlhdG9yKGYpLGYuX25lZ290aWF0b3Iuc3RhcnRDb25uZWN0aW9uKGYub3B0aW9ucy5fcGF5bG9hZHx8e29yaWdpbmF0b3I6ITB9KSxmfXJldHVybiBlKHMsbiksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYS5Db25uZWN0aW9uVHlwZS5EYXRhfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSxcImRhdGFDaGFubmVsXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kY30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsXCJidWZmZXJTaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXJTaXplfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHMucHJvdG90eXBlLmluaXRpYWxpemU9ZnVuY3Rpb24oZSl7dGhpcy5fZGM9ZSx0aGlzLl9jb25maWd1cmVEYXRhQ2hhbm5lbCgpfSxzLnByb3RvdHlwZS5fY29uZmlndXJlRGF0YUNoYW5uZWw9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2kudXRpbC5zdXBwb3J0cy5iaW5hcnlCbG9iJiYhaS51dGlsLnN1cHBvcnRzLnJlbGlhYmxlfHwodGhpcy5kYXRhQ2hhbm5lbC5iaW5hcnlUeXBlPVwiYXJyYXlidWZmZXJcIiksdGhpcy5kYXRhQ2hhbm5lbC5vbm9wZW49ZnVuY3Rpb24oKXtvLmRlZmF1bHQubG9nKFwiREMjXCIrZS5jb25uZWN0aW9uSWQrXCIgZGMgY29ubmVjdGlvbiBzdWNjZXNzXCIpLGUuX29wZW49ITAsZS5lbWl0KGEuQ29ubmVjdGlvbkV2ZW50VHlwZS5PcGVuKX0sdGhpcy5kYXRhQ2hhbm5lbC5vbm1lc3NhZ2U9ZnVuY3Rpb24odCl7by5kZWZhdWx0LmxvZyhcIkRDI1wiK2UuY29ubmVjdGlvbklkK1wiIGRjIG9ubWVzc2FnZTpcIix0LmRhdGEpLGUuX2hhbmRsZURhdGFNZXNzYWdlKHQpfSx0aGlzLmRhdGFDaGFubmVsLm9uY2xvc2U9ZnVuY3Rpb24oKXtvLmRlZmF1bHQubG9nKFwiREMjXCIrZS5jb25uZWN0aW9uSWQrXCIgZGMgY2xvc2VkIGZvcjpcIixlLnBlZXIpLGUuY2xvc2UoKX19LHMucHJvdG90eXBlLl9oYW5kbGVEYXRhTWVzc2FnZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG89ZS5kYXRhLHI9by5jb25zdHJ1Y3RvcixzPW87aWYodGhpcy5zZXJpYWxpemF0aW9uPT09YS5TZXJpYWxpemF0aW9uVHlwZS5CaW5hcnl8fHRoaXMuc2VyaWFsaXphdGlvbj09PWEuU2VyaWFsaXphdGlvblR5cGUuQmluYXJ5VVRGOCl7aWYocj09PUJsb2IpcmV0dXJuIHZvaWQgaS51dGlsLmJsb2JUb0FycmF5QnVmZmVyKG8sZnVuY3Rpb24oZSl7dmFyIG49aS51dGlsLnVucGFjayhlKTt0LmVtaXQoYS5Db25uZWN0aW9uRXZlbnRUeXBlLkRhdGEsbil9KTtpZihyPT09QXJyYXlCdWZmZXIpcz1pLnV0aWwudW5wYWNrKG8pO2Vsc2UgaWYocj09PVN0cmluZyl7dmFyIHU9aS51dGlsLmJpbmFyeVN0cmluZ1RvQXJyYXlCdWZmZXIobyk7cz1pLnV0aWwudW5wYWNrKHUpfX1lbHNlIHRoaXMuc2VyaWFsaXphdGlvbj09PWEuU2VyaWFsaXphdGlvblR5cGUuSlNPTiYmKHM9dGhpcy5wYXJzZShvKSk7cy5fX3BlZXJEYXRhP3RoaXMuX2hhbmRsZUNodW5rKHMpOm4ucHJvdG90eXBlLmVtaXQuY2FsbCh0aGlzLGEuQ29ubmVjdGlvbkV2ZW50VHlwZS5EYXRhLHMpfSxzLnByb3RvdHlwZS5faGFuZGxlQ2h1bms9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5fX3BlZXJEYXRhLG49dGhpcy5fY2h1bmtlZERhdGFbdF18fHtkYXRhOltdLGNvdW50OjAsdG90YWw6ZS50b3RhbH07aWYobi5kYXRhW2Uubl09ZS5kYXRhLG4uY291bnQrKyx0aGlzLl9jaHVua2VkRGF0YVt0XT1uLG4udG90YWw9PT1uLmNvdW50KXtkZWxldGUgdGhpcy5fY2h1bmtlZERhdGFbdF07dmFyIGk9bmV3IEJsb2Iobi5kYXRhKTt0aGlzLl9oYW5kbGVEYXRhTWVzc2FnZSh7ZGF0YTppfSl9fSxzLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3RoaXMuX2J1ZmZlcj1bXSx0aGlzLl9idWZmZXJTaXplPTAsdGhpcy5fY2h1bmtlZERhdGE9e30sdGhpcy5fbmVnb3RpYXRvciYmKHRoaXMuX25lZ290aWF0b3IuY2xlYW51cCgpLHRoaXMuX25lZ290aWF0b3I9bnVsbCksdGhpcy5wcm92aWRlciYmKHRoaXMucHJvdmlkZXIuX3JlbW92ZUNvbm5lY3Rpb24odGhpcyksdGhpcy5wcm92aWRlcj1udWxsKSx0aGlzLmRhdGFDaGFubmVsJiYodGhpcy5kYXRhQ2hhbm5lbC5vbm9wZW49bnVsbCx0aGlzLmRhdGFDaGFubmVsLm9ubWVzc2FnZT1udWxsLHRoaXMuZGF0YUNoYW5uZWwub25jbG9zZT1udWxsLHRoaXMuX2RjPW51bGwpLHRoaXMuX2VuY29kaW5nUXVldWUmJih0aGlzLl9lbmNvZGluZ1F1ZXVlLmRlc3Ryb3koKSx0aGlzLl9lbmNvZGluZ1F1ZXVlLnJlbW92ZUFsbExpc3RlbmVycygpLHRoaXMuX2VuY29kaW5nUXVldWU9bnVsbCksdGhpcy5vcGVuJiYodGhpcy5fb3Blbj0hMSxuLnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxhLkNvbm5lY3Rpb25FdmVudFR5cGUuQ2xvc2UpKX0scy5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihlLHQpe2lmKHRoaXMub3BlbilpZih0aGlzLnNlcmlhbGl6YXRpb249PT1hLlNlcmlhbGl6YXRpb25UeXBlLkpTT04pdGhpcy5fYnVmZmVyZWRTZW5kKHRoaXMuc3RyaW5naWZ5KGUpKTtlbHNlIGlmKHRoaXMuc2VyaWFsaXphdGlvbj09PWEuU2VyaWFsaXphdGlvblR5cGUuQmluYXJ5fHx0aGlzLnNlcmlhbGl6YXRpb249PT1hLlNlcmlhbGl6YXRpb25UeXBlLkJpbmFyeVVURjgpe3ZhciBvPWkudXRpbC5wYWNrKGUpO2lmKCF0JiZvLnNpemU+aS51dGlsLmNodW5rZWRNVFUpcmV0dXJuIHZvaWQgdGhpcy5fc2VuZENodW5rcyhvKTtpLnV0aWwuc3VwcG9ydHMuYmluYXJ5QmxvYj90aGlzLl9idWZmZXJlZFNlbmQobyk6dGhpcy5fZW5jb2RpbmdRdWV1ZS5lbnF1ZShvKX1lbHNlIHRoaXMuX2J1ZmZlcmVkU2VuZChlKTtlbHNlIG4ucHJvdG90eXBlLmVtaXQuY2FsbCh0aGlzLGEuQ29ubmVjdGlvbkV2ZW50VHlwZS5FcnJvcixuZXcgRXJyb3IoXCJDb25uZWN0aW9uIGlzIG5vdCBvcGVuLiBZb3Ugc2hvdWxkIGxpc3RlbiBmb3IgdGhlIGBvcGVuYCBldmVudCBiZWZvcmUgc2VuZGluZyBtZXNzYWdlcy5cIikpfSxzLnByb3RvdHlwZS5fYnVmZmVyZWRTZW5kPWZ1bmN0aW9uKGUpeyF0aGlzLl9idWZmZXJpbmcmJnRoaXMuX3RyeVNlbmQoZSl8fCh0aGlzLl9idWZmZXIucHVzaChlKSx0aGlzLl9idWZmZXJTaXplPXRoaXMuX2J1ZmZlci5sZW5ndGgpfSxzLnByb3RvdHlwZS5fdHJ5U2VuZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCF0aGlzLm9wZW4pcmV0dXJuITE7aWYodGhpcy5kYXRhQ2hhbm5lbC5idWZmZXJlZEFtb3VudD5zLk1BWF9CVUZGRVJFRF9BTU9VTlQpcmV0dXJuIHRoaXMuX2J1ZmZlcmluZz0hMCxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5fYnVmZmVyaW5nPSExLHQuX3RyeUJ1ZmZlcigpfSw1MCksITE7dHJ5e3RoaXMuZGF0YUNoYW5uZWwuc2VuZChlKX1jYXRjaChuKXtyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiREMjOlwiK3RoaXMuY29ubmVjdGlvbklkK1wiIEVycm9yIHdoZW4gc2VuZGluZzpcIixuKSx0aGlzLl9idWZmZXJpbmc9ITAsdGhpcy5jbG9zZSgpLCExfXJldHVybiEwfSxzLnByb3RvdHlwZS5fdHJ5QnVmZmVyPWZ1bmN0aW9uKCl7aWYodGhpcy5vcGVuJiYwIT09dGhpcy5fYnVmZmVyLmxlbmd0aCl7dmFyIGU9dGhpcy5fYnVmZmVyWzBdO3RoaXMuX3RyeVNlbmQoZSkmJih0aGlzLl9idWZmZXIuc2hpZnQoKSx0aGlzLl9idWZmZXJTaXplPXRoaXMuX2J1ZmZlci5sZW5ndGgsdGhpcy5fdHJ5QnVmZmVyKCkpfX0scy5wcm90b3R5cGUuX3NlbmRDaHVua3M9ZnVuY3Rpb24oZSl7dmFyIG4scixhPWkudXRpbC5jaHVuayhlKTtvLmRlZmF1bHQubG9nKFwiREMjXCIrdGhpcy5jb25uZWN0aW9uSWQrXCIgVHJ5IHRvIHNlbmQgXCIrYS5sZW5ndGgrXCIgY2h1bmtzLi4uXCIpO3RyeXtmb3IodmFyIHM9dChhKSx1PXMubmV4dCgpOyF1LmRvbmU7dT1zLm5leHQoKSl7dmFyIGw9dS52YWx1ZTt0aGlzLnNlbmQobCwhMCl9fWNhdGNoKGYpe249e2Vycm9yOmZ9fWZpbmFsbHl7dHJ5e3UmJiF1LmRvbmUmJihyPXMucmV0dXJuKSYmci5jYWxsKHMpfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX19LHMucHJvdG90eXBlLmhhbmRsZU1lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXlsb2FkO3N3aXRjaChlLnR5cGUpe2Nhc2UgYS5TZXJ2ZXJNZXNzYWdlVHlwZS5BbnN3ZXI6dGhpcy5fbmVnb3RpYXRvci5oYW5kbGVTRFAoZS50eXBlLHQuc2RwKTticmVhaztjYXNlIGEuU2VydmVyTWVzc2FnZVR5cGUuQ2FuZGlkYXRlOnRoaXMuX25lZ290aWF0b3IuaGFuZGxlQ2FuZGlkYXRlKHQuY2FuZGlkYXRlKTticmVhaztkZWZhdWx0Om8uZGVmYXVsdC53YXJuKFwiVW5yZWNvZ25pemVkIG1lc3NhZ2UgdHlwZTpcIixlLnR5cGUsXCJmcm9tIHBlZXI6XCIsdGhpcy5wZWVyKX19LHMuSURfUFJFRklYPVwiZGNfXCIscy5NQVhfQlVGRkVSRURfQU1PVU5UPTgzODg2MDgsc30ocy5CYXNlQ29ubmVjdGlvbik7ZXhwb3J0cy5EYXRhQ29ubmVjdGlvbj1sO1xufSx7XCIuL3V0aWxcIjpcIkJIWGZcIixcIi4vbG9nZ2VyXCI6XCJXT3M5XCIsXCIuL25lZ290aWF0b3JcIjpcIkhDZFhcIixcIi4vZW51bXNcIjpcIlpSWWZcIixcIi4vYmFzZWNvbm5lY3Rpb25cIjpcInRRRktcIixcIi4vZW5jb2RpbmdRdWV1ZVwiOlwiR0dwNlwifV0sXCJpbjdMXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciB0PXRoaXMmJnRoaXMuX19hd2FpdGVyfHxmdW5jdGlvbih0LGUscixvKXtyZXR1cm4gbmV3KHJ8fChyPVByb21pc2UpKShmdW5jdGlvbihuLHMpe2Z1bmN0aW9uIGkodCl7dHJ5e2Eoby5uZXh0KHQpKX1jYXRjaChlKXtzKGUpfX1mdW5jdGlvbiB1KHQpe3RyeXthKG8udGhyb3codCkpfWNhdGNoKGUpe3MoZSl9fWZ1bmN0aW9uIGEodCl7dmFyIGU7dC5kb25lP24odC52YWx1ZSk6KGU9dC52YWx1ZSxlIGluc3RhbmNlb2Ygcj9lOm5ldyByKGZ1bmN0aW9uKHQpe3QoZSl9KSkudGhlbihpLHUpfWEoKG89by5hcHBseSh0LGV8fFtdKSkubmV4dCgpKX0pfSxlPXRoaXMmJnRoaXMuX19nZW5lcmF0b3J8fGZ1bmN0aW9uKHQsZSl7dmFyIHIsbyxuLHMsaT17bGFiZWw6MCxzZW50OmZ1bmN0aW9uKCl7aWYoMSZuWzBdKXRocm93IG5bMV07cmV0dXJuIG5bMV19LHRyeXM6W10sb3BzOltdfTtyZXR1cm4gcz17bmV4dDp1KDApLHRocm93OnUoMSkscmV0dXJuOnUoMil9LFwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmKHNbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSkscztmdW5jdGlvbiB1KHMpe3JldHVybiBmdW5jdGlvbih1KXtyZXR1cm4gZnVuY3Rpb24ocyl7aWYocil0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtmb3IoO2k7KXRyeXtpZihyPTEsbyYmKG49MiZzWzBdP28ucmV0dXJuOnNbMF0/by50aHJvd3x8KChuPW8ucmV0dXJuKSYmbi5jYWxsKG8pLDApOm8ubmV4dCkmJiEobj1uLmNhbGwobyxzWzFdKSkuZG9uZSlyZXR1cm4gbjtzd2l0Y2gobz0wLG4mJihzPVsyJnNbMF0sbi52YWx1ZV0pLHNbMF0pe2Nhc2UgMDpjYXNlIDE6bj1zO2JyZWFrO2Nhc2UgNDpyZXR1cm4gaS5sYWJlbCsrLHt2YWx1ZTpzWzFdLGRvbmU6ITF9O2Nhc2UgNTppLmxhYmVsKyssbz1zWzFdLHM9WzBdO2NvbnRpbnVlO2Nhc2UgNzpzPWkub3BzLnBvcCgpLGkudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEobj0obj1pLnRyeXMpLmxlbmd0aD4wJiZuW24ubGVuZ3RoLTFdKSYmKDY9PT1zWzBdfHwyPT09c1swXSkpe2k9MDtjb250aW51ZX1pZigzPT09c1swXSYmKCFufHxzWzFdPm5bMF0mJnNbMV08blszXSkpe2kubGFiZWw9c1sxXTticmVha31pZig2PT09c1swXSYmaS5sYWJlbDxuWzFdKXtpLmxhYmVsPW5bMV0sbj1zO2JyZWFrfWlmKG4mJmkubGFiZWw8blsyXSl7aS5sYWJlbD1uWzJdLGkub3BzLnB1c2gocyk7YnJlYWt9blsyXSYmaS5vcHMucG9wKCksaS50cnlzLnBvcCgpO2NvbnRpbnVlfXM9ZS5jYWxsKHQsaSl9Y2F0Y2godSl7cz1bNix1XSxvPTB9ZmluYWxseXtyPW49MH1pZig1JnNbMF0pdGhyb3cgc1sxXTtyZXR1cm57dmFsdWU6c1swXT9zWzFdOnZvaWQgMCxkb25lOiEwfX0oW3MsdV0pfX19LHI9dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5BUEk9dm9pZCAwO3ZhciBvPXJlcXVpcmUoXCIuL3V0aWxcIiksbj1yKHJlcXVpcmUoXCIuL2xvZ2dlclwiKSkscz1mdW5jdGlvbigpe2Z1bmN0aW9uIHIodCl7dGhpcy5fb3B0aW9ucz10fXJldHVybiByLnByb3RvdHlwZS5fYnVpbGRVcmw9ZnVuY3Rpb24odCl7dmFyIGU9KHRoaXMuX29wdGlvbnMuc2VjdXJlP1wiaHR0cHM6Ly9cIjpcImh0dHA6Ly9cIikrdGhpcy5fb3B0aW9ucy5ob3N0K1wiOlwiK3RoaXMuX29wdGlvbnMucG9ydCt0aGlzLl9vcHRpb25zLnBhdGgrdGhpcy5fb3B0aW9ucy5rZXkrXCIvXCIrdDtyZXR1cm4gZSs9XCI/dHM9XCIrKG5ldyBEYXRlKS5nZXRUaW1lKCkrTWF0aC5yYW5kb20oKX0sci5wcm90b3R5cGUucmV0cmlldmVJZD1mdW5jdGlvbigpe3JldHVybiB0KHRoaXMsdm9pZCAwLFByb21pc2UsZnVuY3Rpb24oKXt2YXIgdCxyLHMsaTtyZXR1cm4gZSh0aGlzLGZ1bmN0aW9uKGUpe3N3aXRjaChlLmxhYmVsKXtjYXNlIDA6dD10aGlzLl9idWlsZFVybChcImlkXCIpLGUubGFiZWw9MTtjYXNlIDE6cmV0dXJuIGUudHJ5cy5wdXNoKFsxLDMsLDRdKSxbNCxmZXRjaCh0KV07Y2FzZSAyOmlmKDIwMCE9PShyPWUuc2VudCgpKS5zdGF0dXMpdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IuIFN0YXR1czpcIityLnN0YXR1cyk7cmV0dXJuWzIsci50ZXh0KCldO2Nhc2UgMzp0aHJvdyBzPWUuc2VudCgpLG4uZGVmYXVsdC5lcnJvcihcIkVycm9yIHJldHJpZXZpbmcgSURcIixzKSxpPVwiXCIsXCIvXCI9PT10aGlzLl9vcHRpb25zLnBhdGgmJnRoaXMuX29wdGlvbnMuaG9zdCE9PW8udXRpbC5DTE9VRF9IT1NUJiYoaT1cIiBJZiB5b3UgcGFzc2VkIGluIGEgYHBhdGhgIHRvIHlvdXIgc2VsZi1ob3N0ZWQgUGVlclNlcnZlciwgeW91J2xsIGFsc28gbmVlZCB0byBwYXNzIGluIHRoYXQgc2FtZSBwYXRoIHdoZW4gY3JlYXRpbmcgYSBuZXcgUGVlci5cIiksbmV3IEVycm9yKFwiQ291bGQgbm90IGdldCBhbiBJRCBmcm9tIHRoZSBzZXJ2ZXIuXCIraSk7Y2FzZSA0OnJldHVyblsyXX19KX0pfSxyLnByb3RvdHlwZS5saXN0QWxsUGVlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLHZvaWQgMCxQcm9taXNlLGZ1bmN0aW9uKCl7dmFyIHQscixzLGk7cmV0dXJuIGUodGhpcyxmdW5jdGlvbihlKXtzd2l0Y2goZS5sYWJlbCl7Y2FzZSAwOnQ9dGhpcy5fYnVpbGRVcmwoXCJwZWVyc1wiKSxlLmxhYmVsPTE7Y2FzZSAxOnJldHVybiBlLnRyeXMucHVzaChbMSwzLCw0XSksWzQsZmV0Y2godCldO2Nhc2UgMjppZigyMDAhPT0ocj1lLnNlbnQoKSkuc3RhdHVzKXtpZig0MDE9PT1yLnN0YXR1cyl0aHJvdyBzPVwiXCIscz10aGlzLl9vcHRpb25zLmhvc3Q9PT1vLnV0aWwuQ0xPVURfSE9TVD9cIkl0IGxvb2tzIGxpa2UgeW91J3JlIHVzaW5nIHRoZSBjbG91ZCBzZXJ2ZXIuIFlvdSBjYW4gZW1haWwgdGVhbUBwZWVyanMuY29tIHRvIGVuYWJsZSBwZWVyIGxpc3RpbmcgZm9yIHlvdXIgQVBJIGtleS5cIjpcIllvdSBuZWVkIHRvIGVuYWJsZSBgYWxsb3dfZGlzY292ZXJ5YCBvbiB5b3VyIHNlbGYtaG9zdGVkIFBlZXJTZXJ2ZXIgdG8gdXNlIHRoaXMgZmVhdHVyZS5cIixuZXcgRXJyb3IoXCJJdCBkb2Vzbid0IGxvb2sgbGlrZSB5b3UgaGF2ZSBwZXJtaXNzaW9uIHRvIGxpc3QgcGVlcnMgSURzLiBcIitzKTt0aHJvdyBuZXcgRXJyb3IoXCJFcnJvci4gU3RhdHVzOlwiK3Iuc3RhdHVzKX1yZXR1cm5bMixyLmpzb24oKV07Y2FzZSAzOnRocm93IGk9ZS5zZW50KCksbi5kZWZhdWx0LmVycm9yKFwiRXJyb3IgcmV0cmlldmluZyBsaXN0IHBlZXJzXCIsaSksbmV3IEVycm9yKFwiQ291bGQgbm90IGdldCBsaXN0IHBlZXJzIGZyb20gdGhlIHNlcnZlci5cIitpKTtjYXNlIDQ6cmV0dXJuWzJdfX0pfSl9LHJ9KCk7ZXhwb3J0cy5BUEk9cztcbn0se1wiLi91dGlsXCI6XCJCSFhmXCIsXCIuL2xvZ2dlclwiOlwiV09zOVwifV0sXCJIeHBkXCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO3ZhciBlPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsbil7cmV0dXJuKGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pfSkodCxuKX07cmV0dXJuIGZ1bmN0aW9uKHQsbil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgbiYmbnVsbCE9PW4pdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIrU3RyaW5nKG4pK1wiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsbiksdC5wcm90b3R5cGU9bnVsbD09PW4/T2JqZWN0LmNyZWF0ZShuKTooci5wcm90b3R5cGU9bi5wcm90b3R5cGUsbmV3IHIpfX0oKSx0PXRoaXMmJnRoaXMuX19hc3NpZ258fGZ1bmN0aW9uKCl7cmV0dXJuKHQ9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49MSxyPWFyZ3VtZW50cy5sZW5ndGg7bjxyO24rKylmb3IodmFyIG8gaW4gdD1hcmd1bWVudHNbbl0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbykmJihlW29dPXRbb10pO3JldHVybiBlfSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxuPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLG49dCYmZVt0XSxyPTA7aWYobilyZXR1cm4gbi5jYWxsKGUpO2lmKGUmJlwibnVtYmVyXCI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZyPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtyKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0P1wiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIjpcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIil9LHI9dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKGUsdCl7dmFyIG49XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl07aWYoIW4pcmV0dXJuIGU7dmFyIHIsbyxpPW4uY2FsbChlKSxzPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT10fHx0LS0gPjApJiYhKHI9aS5uZXh0KCkpLmRvbmU7KXMucHVzaChyLnZhbHVlKX1jYXRjaChhKXtvPXtlcnJvcjphfX1maW5hbGx5e3RyeXtyJiYhci5kb25lJiYobj1pLnJldHVybikmJm4uY2FsbChpKX1maW5hbGx5e2lmKG8pdGhyb3cgby5lcnJvcn19cmV0dXJuIHN9LG89dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZXhwb3J0cy5QZWVyPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwiZXZlbnRlbWl0dGVyM1wiKSxzPXJlcXVpcmUoXCIuL3V0aWxcIiksYT1vKHJlcXVpcmUoXCIuL2xvZ2dlclwiKSksYz1yZXF1aXJlKFwiLi9zb2NrZXRcIiksbD1yZXF1aXJlKFwiLi9tZWRpYWNvbm5lY3Rpb25cIiksdT1yZXF1aXJlKFwiLi9kYXRhY29ubmVjdGlvblwiKSxkPXJlcXVpcmUoXCIuL2VudW1zXCIpLHA9cmVxdWlyZShcIi4vYXBpXCIpLGg9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXt9fSgpLGY9ZnVuY3Rpb24obyl7ZnVuY3Rpb24gaShlLG4pe3ZhciByLGM9by5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBjLl9pZD1udWxsLGMuX2xhc3RTZXJ2ZXJJZD1udWxsLGMuX2Rlc3Ryb3llZD0hMSxjLl9kaXNjb25uZWN0ZWQ9ITEsYy5fb3Blbj0hMSxjLl9jb25uZWN0aW9ucz1uZXcgTWFwLGMuX2xvc3RNZXNzYWdlcz1uZXcgTWFwLGUmJmUuY29uc3RydWN0b3I9PU9iamVjdD9uPWU6ZSYmKHI9ZS50b1N0cmluZygpKSxuPXQoe2RlYnVnOjAsaG9zdDpzLnV0aWwuQ0xPVURfSE9TVCxwb3J0OnMudXRpbC5DTE9VRF9QT1JULHBhdGg6XCIvXCIsa2V5OmkuREVGQVVMVF9LRVksdG9rZW46cy51dGlsLnJhbmRvbVRva2VuKCksY29uZmlnOnMudXRpbC5kZWZhdWx0Q29uZmlnfSxuKSxjLl9vcHRpb25zPW4sXCIvXCI9PT1jLl9vcHRpb25zLmhvc3QmJihjLl9vcHRpb25zLmhvc3Q9d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lKSxjLl9vcHRpb25zLnBhdGgmJihcIi9cIiE9PWMuX29wdGlvbnMucGF0aFswXSYmKGMuX29wdGlvbnMucGF0aD1cIi9cIitjLl9vcHRpb25zLnBhdGgpLFwiL1wiIT09Yy5fb3B0aW9ucy5wYXRoW2MuX29wdGlvbnMucGF0aC5sZW5ndGgtMV0mJihjLl9vcHRpb25zLnBhdGgrPVwiL1wiKSksdm9pZCAwPT09Yy5fb3B0aW9ucy5zZWN1cmUmJmMuX29wdGlvbnMuaG9zdCE9PXMudXRpbC5DTE9VRF9IT1NUP2MuX29wdGlvbnMuc2VjdXJlPXMudXRpbC5pc1NlY3VyZSgpOmMuX29wdGlvbnMuaG9zdD09cy51dGlsLkNMT1VEX0hPU1QmJihjLl9vcHRpb25zLnNlY3VyZT0hMCksYy5fb3B0aW9ucy5sb2dGdW5jdGlvbiYmYS5kZWZhdWx0LnNldExvZ0Z1bmN0aW9uKGMuX29wdGlvbnMubG9nRnVuY3Rpb24pLGEuZGVmYXVsdC5sb2dMZXZlbD1jLl9vcHRpb25zLmRlYnVnfHwwLGMuX2FwaT1uZXcgcC5BUEkobiksYy5fc29ja2V0PWMuX2NyZWF0ZVNlcnZlckNvbm5lY3Rpb24oKSxzLnV0aWwuc3VwcG9ydHMuYXVkaW9WaWRlb3x8cy51dGlsLnN1cHBvcnRzLmRhdGE/ciYmIXMudXRpbC52YWxpZGF0ZUlkKHIpPyhjLl9kZWxheWVkQWJvcnQoZC5QZWVyRXJyb3JUeXBlLkludmFsaWRJRCwnSUQgXCInK3IrJ1wiIGlzIGludmFsaWQnKSxjKToocj9jLl9pbml0aWFsaXplKHIpOmMuX2FwaS5yZXRyaWV2ZUlkKCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gYy5faW5pdGlhbGl6ZShlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBjLl9hYm9ydChkLlBlZXJFcnJvclR5cGUuU2VydmVyRXJyb3IsZSl9KSxjKTooYy5fZGVsYXllZEFib3J0KGQuUGVlckVycm9yVHlwZS5Ccm93c2VySW5jb21wYXRpYmxlLFwiVGhlIGN1cnJlbnQgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IFdlYlJUQ1wiKSxjKX1yZXR1cm4gZShpLG8pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcImlkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaS5wcm90b3R5cGUsXCJvcHRpb25zXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcHRpb25zfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnByb3RvdHlwZSxcIm9wZW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29wZW59LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwic29ja2V0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb2NrZXR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiY29ubmVjdGlvbnNcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGUsdCxvPU9iamVjdC5jcmVhdGUobnVsbCk7dHJ5e2Zvcih2YXIgaT1uKHRoaXMuX2Nvbm5lY3Rpb25zKSxzPWkubmV4dCgpOyFzLmRvbmU7cz1pLm5leHQoKSl7dmFyIGE9cihzLnZhbHVlLDIpLGM9YVswXSxsPWFbMV07b1tjXT1sfX1jYXRjaCh1KXtlPXtlcnJvcjp1fX1maW5hbGx5e3RyeXtzJiYhcy5kb25lJiYodD1pLnJldHVybikmJnQuY2FsbChpKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19cmV0dXJuIG99LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiZGVzdHJveWVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZXN0cm95ZWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGkucHJvdG90eXBlLFwiZGlzY29ubmVjdGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXNjb25uZWN0ZWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksaS5wcm90b3R5cGUuX2NyZWF0ZVNlcnZlckNvbm5lY3Rpb249ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IGMuU29ja2V0KHRoaXMuX29wdGlvbnMuc2VjdXJlLHRoaXMuX29wdGlvbnMuaG9zdCx0aGlzLl9vcHRpb25zLnBvcnQsdGhpcy5fb3B0aW9ucy5wYXRoLHRoaXMuX29wdGlvbnMua2V5LHRoaXMuX29wdGlvbnMucGluZ0ludGVydmFsKTtyZXR1cm4gdC5vbihkLlNvY2tldEV2ZW50VHlwZS5NZXNzYWdlLGZ1bmN0aW9uKHQpe2UuX2hhbmRsZU1lc3NhZ2UodCl9KSx0Lm9uKGQuU29ja2V0RXZlbnRUeXBlLkVycm9yLGZ1bmN0aW9uKHQpe2UuX2Fib3J0KGQuUGVlckVycm9yVHlwZS5Tb2NrZXRFcnJvcix0KX0pLHQub24oZC5Tb2NrZXRFdmVudFR5cGUuRGlzY29ubmVjdGVkLGZ1bmN0aW9uKCl7ZS5kaXNjb25uZWN0ZWR8fChlLmVtaXRFcnJvcihkLlBlZXJFcnJvclR5cGUuTmV0d29yayxcIkxvc3QgY29ubmVjdGlvbiB0byBzZXJ2ZXIuXCIpLGUuZGlzY29ubmVjdCgpKX0pLHQub24oZC5Tb2NrZXRFdmVudFR5cGUuQ2xvc2UsZnVuY3Rpb24oKXtlLmRpc2Nvbm5lY3RlZHx8ZS5fYWJvcnQoZC5QZWVyRXJyb3JUeXBlLlNvY2tldENsb3NlZCxcIlVuZGVybHlpbmcgc29ja2V0IGlzIGFscmVhZHkgY2xvc2VkLlwiKX0pLHR9LGkucHJvdG90eXBlLl9pbml0aWFsaXplPWZ1bmN0aW9uKGUpe3RoaXMuX2lkPWUsdGhpcy5zb2NrZXQuc3RhcnQoZSx0aGlzLl9vcHRpb25zLnRva2VuKX0saS5wcm90b3R5cGUuX2hhbmRsZU1lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQscixvPWUudHlwZSxpPWUucGF5bG9hZCxzPWUuc3JjO3N3aXRjaChvKXtjYXNlIGQuU2VydmVyTWVzc2FnZVR5cGUuT3Blbjp0aGlzLl9sYXN0U2VydmVySWQ9dGhpcy5pZCx0aGlzLl9vcGVuPSEwLHRoaXMuZW1pdChkLlBlZXJFdmVudFR5cGUuT3Blbix0aGlzLmlkKTticmVhaztjYXNlIGQuU2VydmVyTWVzc2FnZVR5cGUuRXJyb3I6dGhpcy5fYWJvcnQoZC5QZWVyRXJyb3JUeXBlLlNlcnZlckVycm9yLGkubXNnKTticmVhaztjYXNlIGQuU2VydmVyTWVzc2FnZVR5cGUuSWRUYWtlbjp0aGlzLl9hYm9ydChkLlBlZXJFcnJvclR5cGUuVW5hdmFpbGFibGVJRCwnSUQgXCInK3RoaXMuaWQrJ1wiIGlzIHRha2VuJyk7YnJlYWs7Y2FzZSBkLlNlcnZlck1lc3NhZ2VUeXBlLkludmFsaWRLZXk6dGhpcy5fYWJvcnQoZC5QZWVyRXJyb3JUeXBlLkludmFsaWRLZXksJ0FQSSBLRVkgXCInK3RoaXMuX29wdGlvbnMua2V5KydcIiBpcyBpbnZhbGlkJyk7YnJlYWs7Y2FzZSBkLlNlcnZlck1lc3NhZ2VUeXBlLkxlYXZlOmEuZGVmYXVsdC5sb2coXCJSZWNlaXZlZCBsZWF2ZSBtZXNzYWdlIGZyb20gXCIrcyksdGhpcy5fY2xlYW51cFBlZXIocyksdGhpcy5fY29ubmVjdGlvbnMuZGVsZXRlKHMpO2JyZWFrO2Nhc2UgZC5TZXJ2ZXJNZXNzYWdlVHlwZS5FeHBpcmU6dGhpcy5lbWl0RXJyb3IoZC5QZWVyRXJyb3JUeXBlLlBlZXJVbmF2YWlsYWJsZSxcIkNvdWxkIG5vdCBjb25uZWN0IHRvIHBlZXIgXCIrcyk7YnJlYWs7Y2FzZSBkLlNlcnZlck1lc3NhZ2VUeXBlLk9mZmVyOnZhciBjPWkuY29ubmVjdGlvbklkO2lmKChfPXRoaXMuZ2V0Q29ubmVjdGlvbihzLGMpKSYmKF8uY2xvc2UoKSxhLmRlZmF1bHQud2FybihcIk9mZmVyIHJlY2VpdmVkIGZvciBleGlzdGluZyBDb25uZWN0aW9uIElEOlwiK2MpKSxpLnR5cGU9PT1kLkNvbm5lY3Rpb25UeXBlLk1lZGlhKV89bmV3IGwuTWVkaWFDb25uZWN0aW9uKHMsdGhpcyx7Y29ubmVjdGlvbklkOmMsX3BheWxvYWQ6aSxtZXRhZGF0YTppLm1ldGFkYXRhfSksdGhpcy5fYWRkQ29ubmVjdGlvbihzLF8pLHRoaXMuZW1pdChkLlBlZXJFdmVudFR5cGUuQ2FsbCxfKTtlbHNle2lmKGkudHlwZSE9PWQuQ29ubmVjdGlvblR5cGUuRGF0YSlyZXR1cm4gdm9pZCBhLmRlZmF1bHQud2FybihcIlJlY2VpdmVkIG1hbGZvcm1lZCBjb25uZWN0aW9uIHR5cGU6XCIraS50eXBlKTtfPW5ldyB1LkRhdGFDb25uZWN0aW9uKHMsdGhpcyx7Y29ubmVjdGlvbklkOmMsX3BheWxvYWQ6aSxtZXRhZGF0YTppLm1ldGFkYXRhLGxhYmVsOmkubGFiZWwsc2VyaWFsaXphdGlvbjppLnNlcmlhbGl6YXRpb24scmVsaWFibGU6aS5yZWxpYWJsZX0pLHRoaXMuX2FkZENvbm5lY3Rpb24ocyxfKSx0aGlzLmVtaXQoZC5QZWVyRXZlbnRUeXBlLkNvbm5lY3Rpb24sXyl9dmFyIHA9dGhpcy5fZ2V0TWVzc2FnZXMoYyk7dHJ5e2Zvcih2YXIgaD1uKHApLGY9aC5uZXh0KCk7IWYuZG9uZTtmPWgubmV4dCgpKXt2YXIgeT1mLnZhbHVlO18uaGFuZGxlTWVzc2FnZSh5KX19Y2F0Y2godil7dD17ZXJyb3I6dn19ZmluYWxseXt0cnl7ZiYmIWYuZG9uZSYmKHI9aC5yZXR1cm4pJiZyLmNhbGwoaCl9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fWJyZWFrO2RlZmF1bHQ6aWYoIWkpcmV0dXJuIHZvaWQgYS5kZWZhdWx0Lndhcm4oXCJZb3UgcmVjZWl2ZWQgYSBtYWxmb3JtZWQgbWVzc2FnZSBmcm9tIFwiK3MrXCIgb2YgdHlwZSBcIitvKTt2YXIgXztjPWkuY29ubmVjdGlvbklkOyhfPXRoaXMuZ2V0Q29ubmVjdGlvbihzLGMpKSYmXy5wZWVyQ29ubmVjdGlvbj9fLmhhbmRsZU1lc3NhZ2UoZSk6Yz90aGlzLl9zdG9yZU1lc3NhZ2UoYyxlKTphLmRlZmF1bHQud2FybihcIllvdSByZWNlaXZlZCBhbiB1bnJlY29nbml6ZWQgbWVzc2FnZTpcIixlKX19LGkucHJvdG90eXBlLl9zdG9yZU1lc3NhZ2U9ZnVuY3Rpb24oZSx0KXt0aGlzLl9sb3N0TWVzc2FnZXMuaGFzKGUpfHx0aGlzLl9sb3N0TWVzc2FnZXMuc2V0KGUsW10pLHRoaXMuX2xvc3RNZXNzYWdlcy5nZXQoZSkucHVzaCh0KX0saS5wcm90b3R5cGUuX2dldE1lc3NhZ2VzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2xvc3RNZXNzYWdlcy5nZXQoZSk7cmV0dXJuIHQ/KHRoaXMuX2xvc3RNZXNzYWdlcy5kZWxldGUoZSksdCk6W119LGkucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10JiYodD17fSksdGhpcy5kaXNjb25uZWN0ZWQpcmV0dXJuIGEuZGVmYXVsdC53YXJuKFwiWW91IGNhbm5vdCBjb25uZWN0IHRvIGEgbmV3IFBlZXIgYmVjYXVzZSB5b3UgY2FsbGVkIC5kaXNjb25uZWN0KCkgb24gdGhpcyBQZWVyIGFuZCBlbmRlZCB5b3VyIGNvbm5lY3Rpb24gd2l0aCB0aGUgc2VydmVyLiBZb3UgY2FuIGNyZWF0ZSBhIG5ldyBQZWVyIHRvIHJlY29ubmVjdCwgb3IgY2FsbCByZWNvbm5lY3Qgb24gdGhpcyBwZWVyIGlmIHlvdSBiZWxpZXZlIGl0cyBJRCB0byBzdGlsbCBiZSBhdmFpbGFibGUuXCIpLHZvaWQgdGhpcy5lbWl0RXJyb3IoZC5QZWVyRXJyb3JUeXBlLkRpc2Nvbm5lY3RlZCxcIkNhbm5vdCBjb25uZWN0IHRvIG5ldyBQZWVyIGFmdGVyIGRpc2Nvbm5lY3RpbmcgZnJvbSBzZXJ2ZXIuXCIpO3ZhciBuPW5ldyB1LkRhdGFDb25uZWN0aW9uKGUsdGhpcyx0KTtyZXR1cm4gdGhpcy5fYWRkQ29ubmVjdGlvbihlLG4pLG59LGkucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0LG4pe2lmKHZvaWQgMD09PW4mJihuPXt9KSx0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4gYS5kZWZhdWx0Lndhcm4oXCJZb3UgY2Fubm90IGNvbm5lY3QgdG8gYSBuZXcgUGVlciBiZWNhdXNlIHlvdSBjYWxsZWQgLmRpc2Nvbm5lY3QoKSBvbiB0aGlzIFBlZXIgYW5kIGVuZGVkIHlvdXIgY29ubmVjdGlvbiB3aXRoIHRoZSBzZXJ2ZXIuIFlvdSBjYW4gY3JlYXRlIGEgbmV3IFBlZXIgdG8gcmVjb25uZWN0LlwiKSx2b2lkIHRoaXMuZW1pdEVycm9yKGQuUGVlckVycm9yVHlwZS5EaXNjb25uZWN0ZWQsXCJDYW5ub3QgY29ubmVjdCB0byBuZXcgUGVlciBhZnRlciBkaXNjb25uZWN0aW5nIGZyb20gc2VydmVyLlwiKTtpZih0KXtuLl9zdHJlYW09dDt2YXIgcj1uZXcgbC5NZWRpYUNvbm5lY3Rpb24oZSx0aGlzLG4pO3JldHVybiB0aGlzLl9hZGRDb25uZWN0aW9uKGUscikscn1hLmRlZmF1bHQuZXJyb3IoXCJUbyBjYWxsIGEgcGVlciwgeW91IG11c3QgcHJvdmlkZSBhIHN0cmVhbSBmcm9tIHlvdXIgYnJvd3NlcidzIGBnZXRVc2VyTWVkaWFgLlwiKX0saS5wcm90b3R5cGUuX2FkZENvbm5lY3Rpb249ZnVuY3Rpb24oZSx0KXthLmRlZmF1bHQubG9nKFwiYWRkIGNvbm5lY3Rpb24gXCIrdC50eXBlK1wiOlwiK3QuY29ubmVjdGlvbklkK1wiIHRvIHBlZXJJZDpcIitlKSx0aGlzLl9jb25uZWN0aW9ucy5oYXMoZSl8fHRoaXMuX2Nvbm5lY3Rpb25zLnNldChlLFtdKSx0aGlzLl9jb25uZWN0aW9ucy5nZXQoZSkucHVzaCh0KX0saS5wcm90b3R5cGUuX3JlbW92ZUNvbm5lY3Rpb249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY29ubmVjdGlvbnMuZ2V0KGUucGVlcik7aWYodCl7dmFyIG49dC5pbmRleE9mKGUpOy0xIT09biYmdC5zcGxpY2UobiwxKX10aGlzLl9sb3N0TWVzc2FnZXMuZGVsZXRlKGUuY29ubmVjdGlvbklkKX0saS5wcm90b3R5cGUuZ2V0Q29ubmVjdGlvbj1mdW5jdGlvbihlLHQpe3ZhciByLG8saT10aGlzLl9jb25uZWN0aW9ucy5nZXQoZSk7aWYoIWkpcmV0dXJuIG51bGw7dHJ5e2Zvcih2YXIgcz1uKGkpLGE9cy5uZXh0KCk7IWEuZG9uZTthPXMubmV4dCgpKXt2YXIgYz1hLnZhbHVlO2lmKGMuY29ubmVjdGlvbklkPT09dClyZXR1cm4gY319Y2F0Y2gobCl7cj17ZXJyb3I6bH19ZmluYWxseXt0cnl7YSYmIWEuZG9uZSYmKG89cy5yZXR1cm4pJiZvLmNhbGwocyl9ZmluYWxseXtpZihyKXRocm93IHIuZXJyb3J9fXJldHVybiBudWxsfSxpLnByb3RvdHlwZS5fZGVsYXllZEFib3J0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5fYWJvcnQoZSx0KX0sMCl9LGkucHJvdG90eXBlLl9hYm9ydD1mdW5jdGlvbihlLHQpe2EuZGVmYXVsdC5lcnJvcihcIkFib3J0aW5nIVwiKSx0aGlzLmVtaXRFcnJvcihlLHQpLHRoaXMuX2xhc3RTZXJ2ZXJJZD90aGlzLmRpc2Nvbm5lY3QoKTp0aGlzLmRlc3Ryb3koKX0saS5wcm90b3R5cGUuZW1pdEVycm9yPWZ1bmN0aW9uKGUsdCl7dmFyIG47YS5kZWZhdWx0LmVycm9yKFwiRXJyb3I6XCIsdCksKG49XCJzdHJpbmdcIj09dHlwZW9mIHQ/bmV3IEVycm9yKHQpOnQpLnR5cGU9ZSx0aGlzLmVtaXQoZC5QZWVyRXZlbnRUeXBlLkVycm9yLG4pfSxpLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95ZWR8fChhLmRlZmF1bHQubG9nKFwiRGVzdHJveSBwZWVyIHdpdGggSUQ6XCIrdGhpcy5pZCksdGhpcy5kaXNjb25uZWN0KCksdGhpcy5fY2xlYW51cCgpLHRoaXMuX2Rlc3Ryb3llZD0hMCx0aGlzLmVtaXQoZC5QZWVyRXZlbnRUeXBlLkNsb3NlKSl9LGkucHJvdG90eXBlLl9jbGVhbnVwPWZ1bmN0aW9uKCl7dmFyIGUsdDt0cnl7Zm9yKHZhciByPW4odGhpcy5fY29ubmVjdGlvbnMua2V5cygpKSxvPXIubmV4dCgpOyFvLmRvbmU7bz1yLm5leHQoKSl7dmFyIGk9by52YWx1ZTt0aGlzLl9jbGVhbnVwUGVlcihpKSx0aGlzLl9jb25uZWN0aW9ucy5kZWxldGUoaSl9fWNhdGNoKHMpe2U9e2Vycm9yOnN9fWZpbmFsbHl7dHJ5e28mJiFvLmRvbmUmJih0PXIucmV0dXJuKSYmdC5jYWxsKHIpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX10aGlzLnNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoKX0saS5wcm90b3R5cGUuX2NsZWFudXBQZWVyPWZ1bmN0aW9uKGUpe3ZhciB0LHIsbz10aGlzLl9jb25uZWN0aW9ucy5nZXQoZSk7aWYobyl0cnl7Zm9yKHZhciBpPW4obykscz1pLm5leHQoKTshcy5kb25lO3M9aS5uZXh0KCkpe3MudmFsdWUuY2xvc2UoKX19Y2F0Y2goYSl7dD17ZXJyb3I6YX19ZmluYWxseXt0cnl7cyYmIXMuZG9uZSYmKHI9aS5yZXR1cm4pJiZyLmNhbGwoaSl9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fX0saS5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbigpe2lmKCF0aGlzLmRpc2Nvbm5lY3RlZCl7dmFyIGU9dGhpcy5pZDthLmRlZmF1bHQubG9nKFwiRGlzY29ubmVjdCBwZWVyIHdpdGggSUQ6XCIrZSksdGhpcy5fZGlzY29ubmVjdGVkPSEwLHRoaXMuX29wZW49ITEsdGhpcy5zb2NrZXQuY2xvc2UoKSx0aGlzLl9sYXN0U2VydmVySWQ9ZSx0aGlzLl9pZD1udWxsLHRoaXMuZW1pdChkLlBlZXJFdmVudFR5cGUuRGlzY29ubmVjdGVkLGUpfX0saS5wcm90b3R5cGUucmVjb25uZWN0PWZ1bmN0aW9uKCl7aWYodGhpcy5kaXNjb25uZWN0ZWQmJiF0aGlzLmRlc3Ryb3llZClhLmRlZmF1bHQubG9nKFwiQXR0ZW1wdGluZyByZWNvbm5lY3Rpb24gdG8gc2VydmVyIHdpdGggSUQgXCIrdGhpcy5fbGFzdFNlcnZlcklkKSx0aGlzLl9kaXNjb25uZWN0ZWQ9ITEsdGhpcy5faW5pdGlhbGl6ZSh0aGlzLl9sYXN0U2VydmVySWQpO2Vsc2V7aWYodGhpcy5kZXN0cm95ZWQpdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBwZWVyIGNhbm5vdCByZWNvbm5lY3QgdG8gdGhlIHNlcnZlci4gSXQgaGFzIGFscmVhZHkgYmVlbiBkZXN0cm95ZWQuXCIpO2lmKHRoaXMuZGlzY29ubmVjdGVkfHx0aGlzLm9wZW4pdGhyb3cgbmV3IEVycm9yKFwiUGVlciBcIit0aGlzLmlkK1wiIGNhbm5vdCByZWNvbm5lY3QgYmVjYXVzZSBpdCBpcyBub3QgZGlzY29ubmVjdGVkIGZyb20gdGhlIHNlcnZlciFcIik7YS5kZWZhdWx0LmVycm9yKFwiSW4gYSBodXJyeT8gV2UncmUgc3RpbGwgdHJ5aW5nIHRvIG1ha2UgdGhlIGluaXRpYWwgY29ubmVjdGlvbiFcIil9fSxpLnByb3RvdHlwZS5saXN0QWxsUGVlcnM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt2b2lkIDA9PT1lJiYoZT1mdW5jdGlvbihlKXt9KSx0aGlzLl9hcGkubGlzdEFsbFBlZXJzKCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gZSh0KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9hYm9ydChkLlBlZXJFcnJvclR5cGUuU2VydmVyRXJyb3IsZSl9KX0saS5ERUZBVUxUX0tFWT1cInBlZXJqc1wiLGl9KGkuRXZlbnRFbWl0dGVyKTtleHBvcnRzLlBlZXI9Zjtcbn0se1wiZXZlbnRlbWl0dGVyM1wiOlwiSkpsU1wiLFwiLi91dGlsXCI6XCJCSFhmXCIsXCIuL2xvZ2dlclwiOlwiV09zOVwiLFwiLi9zb2NrZXRcIjpcIndKbHZcIixcIi4vbWVkaWFjb25uZWN0aW9uXCI6XCJkYkhQXCIsXCIuL2RhdGFjb25uZWN0aW9uXCI6XCJHQlRRXCIsXCIuL2VudW1zXCI6XCJaUllmXCIsXCIuL2FwaVwiOlwiaW43TFwifV0sXCJpVEs2XCI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHtcblwidXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGV4cG9ydHMucGVlcmpzPXZvaWQgMDt2YXIgZT1yZXF1aXJlKFwiLi91dGlsXCIpLHI9cmVxdWlyZShcIi4vcGVlclwiKTtleHBvcnRzLnBlZXJqcz17UGVlcjpyLlBlZXIsdXRpbDplLnV0aWx9LGV4cG9ydHMuZGVmYXVsdD1yLlBlZXIsd2luZG93LnBlZXJqcz1leHBvcnRzLnBlZXJqcyx3aW5kb3cuUGVlcj1yLlBlZXI7XG59LHtcIi4vdXRpbFwiOlwiQkhYZlwiLFwiLi9wZWVyXCI6XCJIeHBkXCJ9XX0se30sW1wiaVRLNlwiXSwgbnVsbClcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPS9wZWVyanMubWluLmpzLm1hcCIsImltcG9ydCB7IHN0cmluZ19kaWN0IH0gZnJvbSBcImxpYi91dGlsc1wiO1xuaW1wb3J0IHtWZWN0b3Isb2JqX3N0YXRlLHJvb21fc3RhdGV9IGZyb20gXCIuLi9saWIvc3RhdGVcIjtcbmltcG9ydCB7Z2FtZSxHZXRWaWV3cG9ydERpbWVuc2lvbnMsdmlld3BvcnR9IGZyb20gXCIuLi92YW5cIjtcblxuY29uc3QgUFVaWkxFU19VUkwgPSBcIi9jb21tb24vaG9tZS9yYms3MC9wcm9qZWN0cy9jaGVzcy1wbGVhc2Uvc3JjL2dhbWUvcHV6emxlcy5jc3ZcIjtcblxubGV0IGNhbnZhc19lbGVtZW50OkhUTUxDYW52YXNFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXJnZXRcIikgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgZ2FtZV9zdGF0ZXtcbiAgcmF0aW5nOm51bWJlcixcbiAgcHV6emxlczogcHV6emxlW11cbn1cblxuZXhwb3J0IGludGVyZmFjZSBwdXp6bGUge1xuICBpZDpzdHJpbmdcbiAgcmF0aW5nOm51bWJlclxuICBmZW46c3RyaW5nXG4gIHNvbHV0aW9uOnN0cmluZ1tdXG59XG5cbmV4cG9ydCBsZXQgZzpnYW1lPGdhbWVfc3RhdGU+OyBcblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5leHRQdXp6bGUocHV6emxlczpwdXp6bGVbXSwgdGFyZ2V0X3JhdGluZzpudW1iZXIsIHJhbmdlOm51bWJlcil7XG4gIGxldCBmaWx0ZXJlZCA9IHB1enpsZXMuZmlsdGVyKHAgPT4gcC5yYXRpbmcgPj0gdGFyZ2V0X3JhdGluZyAtIHJhbmdlICYmIHAucmF0aW5nIDw9IHRhcmdldF9yYXRpbmcgKyByYW5nZSk7XG4gIGlmKGZpbHRlcmVkLmxlbmd0aCA9PSAwKXtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gZmlsdGVyZWRbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZmlsdGVyZWQubGVuZ3RoKV07XG59IFxuXG4oYXN5bmMgZnVuY3Rpb24oKXtcbiAgbGV0IHB1enpsZXNfcmF3ID0gYXdhaXQgZmV0Y2goUFVaWkxFU19VUkwpO1xuICBsZXQgcHV6emxlc19saW5lcyA9IChhd2FpdCBwdXp6bGVzX3Jhdy50ZXh0KCkpLnNwbGl0KFwiXFxuXCIpO1xuICBsZXQgcHV6emxlczpwdXp6bGVbXSA9IHB1enpsZXNfbGluZXMubWFwKGxpbmUgPT4ge1xuICAgIGxldCBsaW5lc19zcGxpdCA9IGxpbmUuc3BsaXQoXCIsXCIpO1xuICAgIHJldHVybiB7XG4gICAgICBpZDogbGluZXNfc3BsaXRbMF0sXG4gICAgICBmZW46IGxpbmVzX3NwbGl0WzFdLFxuICAgICAgc29sdXRpb246IGxpbmVzX3NwbGl0WzJdID8gbGluZXNfc3BsaXRbMl0uc3BsaXQoXCIgXCIpIDogW10sXG4gICAgICByYXRpbmc6IHBhcnNlSW50KGxpbmVzX3NwbGl0WzNdKVxuICAgIH07XG4gIH0pO1xuICBwdXp6bGVzLnNvcnQoKGEsYikgPT4gYS5yYXRpbmcgLSBiLnJhdGluZyk7XG4gIGcgPSBuZXcgZ2FtZTxnYW1lX3N0YXRlPihjYW52YXNfZWxlbWVudC5nZXRDb250ZXh0KFwiMmRcIikse1xuICAgIHJhdGluZzogMTYwMCxcbiAgICBwdXp6bGVzXG4gIH0pO1xuICBnLmxvYWRSb29tU3RyaW5nKFwiYm9hcmRWaWV3XCIpO1xufSkoKTtcbiIsImltcG9ydCB7IGcgfSBmcm9tIFwiZ2FtZS9tYWluXCI7XG5pbXBvcnQgeyBib2FyZFZpZXcgfSBmcm9tIFwiZ2FtZS9yb29tcy9ib2FyZFZpZXdcIjtcbmltcG9ydCB7IGV4ZWNfdHlwZSwgUG9sbF9Nb3VzZSB9IGZyb20gXCJsaWIvY29udHJvbHNcIjtcbmltcG9ydCB7b2JqfSBmcm9tIFwibGliL29iamVjdFwiO1xuaW1wb3J0IHsgb2JqX3N0YXRlLCBWZWN0b3IgfSBmcm9tIFwibGliL3N0YXRlXCI7XG5pbXBvcnQge2NvcHl9IGZyb20gXCJzcmMvdmFuXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgcGllY2Vfc3RhdGUgZXh0ZW5kcyBvYmpfc3RhdGV7XG4gICAgXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgcGllY2VfcGFyYW1ldGVyc3tcbiAgdHlwZTogc3RyaW5nLFxuICBzcXVhcmU6IHN0cmluZ1xufVxuICAgIFxuZXhwb3J0IGNsYXNzIHBpZWNlIGV4dGVuZHMgb2Jqe1xuICBzcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvRXJyb3IucG5nXCI7XG4gIGNvbGxpc2lvbiA9IGZhbHNlO1xuICByZW5kZXIgPSB0cnVlO1xuICBzdGF0ZTpwaWVjZV9zdGF0ZTtcbiAgc3RhdGljID0gdHJ1ZTtcbiAgcGFyYW1zOnBpZWNlX3BhcmFtZXRlcnM7XG4gIHN0YXRpYyBkZWZhdWx0X3BhcmFtczpwaWVjZV9wYXJhbWV0ZXJzID0ge1xuICAgIHR5cGU6IFwiUFwiLFxuICAgIHNxdWFyZTogXCJhMVwiXG4gIH1cbiAgY29uc3RydWN0b3Ioc3RhdGU6b2JqX3N0YXRlLHBhcmFtczpwaWVjZV9wYXJhbWV0ZXJzID0gY29weShwaWVjZS5kZWZhdWx0X3BhcmFtcykpe1xuICAgIHN1cGVyKHN0YXRlLHBhcmFtcyk7XG4gICAgdGhpcy50YWdzLmFkZChcInBpZWNlXCIpO1xuICAgIHN3aXRjaChwYXJhbXMudHlwZSl7XG4gICAgICBjYXNlIFwiUFwiOlxuICAgICAgICB0aGlzLnNwcml0ZV91cmwgPSBcIi4vc3ByaXRlcy9jaGVzcy93aGl0ZV9wYXduLnBuZ1wiO1xuICAgICAgICB0aGlzLndpZHRoID0gMTI7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMTY7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInBcIjpcbiAgICAgICAgdGhpcy5zcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvY2hlc3MvYmxhY2tfcGF3bi5wbmdcIjtcbiAgICAgICAgdGhpcy53aWR0aCA9IDEyO1xuICAgICAgICB0aGlzLmhlaWdodCA9IDE2O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJLXCI6XG4gICAgICAgIHRoaXMuc3ByaXRlX3VybCA9IFwiLi9zcHJpdGVzL2NoZXNzL3doaXRlX2tpbmcucG5nXCI7XG4gICAgICAgIHRoaXMud2lkdGggPSAyMDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAyMDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwia1wiOlxuICAgICAgICB0aGlzLnNwcml0ZV91cmwgPSBcIi4vc3ByaXRlcy9jaGVzcy9ibGFja19raW5nLnBuZ1wiO1xuICAgICAgICB0aGlzLndpZHRoID0gMjA7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMjA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIkJcIjpcbiAgICAgICAgdGhpcy5zcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvY2hlc3Mvd2hpdGVfYmlzaG9wLnBuZ1wiO1xuICAgICAgICB0aGlzLndpZHRoID0gMTY7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMjA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImJcIjpcbiAgICAgICAgdGhpcy5zcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvY2hlc3MvYmxhY2tfYmlzaG9wLnBuZ1wiO1xuICAgICAgICB0aGlzLndpZHRoID0gMTY7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMjA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIk5cIjpcbiAgICAgICAgdGhpcy5zcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvY2hlc3Mvd2hpdGVfa25pZ2h0LnBuZ1wiO1xuICAgICAgICB0aGlzLndpZHRoID0gMjA7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMjA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIm5cIjpcbiAgICAgICAgdGhpcy5zcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvY2hlc3MvYmxhY2tfa25pZ2h0LnBuZ1wiO1xuICAgICAgICB0aGlzLndpZHRoID0gMjA7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMjA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIlJcIjpcbiAgICAgICAgdGhpcy5zcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvY2hlc3Mvd2hpdGVfcm9vay5wbmdcIjtcbiAgICAgICAgdGhpcy53aWR0aCA9IDE2O1xuICAgICAgICB0aGlzLmhlaWdodCA9IDIwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJyXCI6XG4gICAgICAgIHRoaXMuc3ByaXRlX3VybCA9IFwiLi9zcHJpdGVzL2NoZXNzL2JsYWNrX3Jvb2sucG5nXCI7XG4gICAgICAgIHRoaXMud2lkdGggPSAxNDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAxODtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiUVwiOlxuICAgICAgICB0aGlzLnNwcml0ZV91cmwgPSBcIi4vc3ByaXRlcy9jaGVzcy93aGl0ZV9xdWVlbi5wbmdcIjtcbiAgICAgICAgdGhpcy53aWR0aCA9IDE4O1xuICAgICAgICB0aGlzLmhlaWdodCA9IDIwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJxXCI6XG4gICAgICAgIHRoaXMuc3ByaXRlX3VybCA9IFwiLi9zcHJpdGVzL2NoZXNzL2JsYWNrX3F1ZWVuLnBuZ1wiO1xuICAgICAgICB0aGlzLndpZHRoID0gMTg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMjA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBzdGF0ZWYodGltZV9kZWx0YTpudW1iZXIpe1xuICAgIHN1cGVyLnN0YXRlZih0aW1lX2RlbHRhKTtcbiAgfVxuICByZW5kZXJmKHRpbWVfZGVsdGE6bnVtYmVyKXtcbiAgIHJldHVybiBzdXBlci5yZW5kZXJmKHRpbWVfZGVsdGEpOyBcbiAgfVxuICByZWdpc3RlckFuaW1hdGlvbnMoKXtcbiAgICBcbiAgfVxuICByZWdpc3RlckF1ZGlvKCl7XG4gICAgXG4gIH1cbiAgcmVnaXN0ZXJDb250cm9scygpe1xuICAgIHRoaXMuYmluZENvbnRyb2woXCJtb3VzZTBkb3duXCIsZXhlY190eXBlLm9uY2UsICgpPT57XG4gICAgICBsZXQgbW91c2UgPSBQb2xsX01vdXNlKHRoaXMuZ2V0Um9vbTxib2FyZFZpZXc+KCkuY2FtZXJhc1swXSk7XG4gICAgICBpZih0aGlzLmNvbGxpZGVzV2l0aEJveCh7eDptb3VzZS54LHk6bW91c2UueSx3aWR0aDoyMCxoZWlnaHQ6MjB9KSl7XG4gICAgICAgIHRoaXMuZ2V0Um9vbTxib2FyZFZpZXc+KCkuc3RhdGUuZHJhZ2dpbmcgPSB0aGlzO1xuICAgICAgICB0aGlzLmdldFJvb208Ym9hcmRWaWV3PigpLnN0YXRlLnN0YXJ0X2RyYWcgPSB0aGlzLnN0YXRlLnBvc2l0aW9uO1xuICAgICAgICB0aGlzLmxheWVyID0gMjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSIsImltcG9ydCB7b2JqfSBmcm9tIFwibGliL29iamVjdFwiO1xuaW1wb3J0IHsgb2JqX3N0YXRlLCBWZWN0b3IgfSBmcm9tIFwibGliL3N0YXRlXCI7XG5pbXBvcnQge2NvcHl9IGZyb20gXCJzcmMvdmFuXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgYm9hcmRfc3RhdGUgZXh0ZW5kcyBvYmpfc3RhdGV7XG4gICAgXG59XG4gICAgXG5leHBvcnQgaW50ZXJmYWNlIGJvYXJkX3BhcmFtZXRlcnN7XG4gICAgXG59XG4gICAgXG5leHBvcnQgY2xhc3MgYm9hcmQgZXh0ZW5kcyBvYmp7XG4gIHNwcml0ZV91cmwgPSBcIi4vc3ByaXRlcy9jaGVzcy9ib2FyZC5wbmdcIjtcbiAgaGVpZ2h0ID0gMTgwO1xuICB3aWR0aCA9IDE4MDtcbiAgY29sbGlzaW9uID0gdHJ1ZTtcbiAgcmVuZGVyID0gdHJ1ZTtcbiAgbGF5ZXI6IG51bWJlciA9IDA7XG4gIHN0YXRpYyA9IHRydWU7XG4gIHN0YXRlOmJvYXJkX3N0YXRlO1xuICBwYXJhbXM6Ym9hcmRfcGFyYW1ldGVycztcbiAgc3RhdGljIGRlZmF1bHRfcGFyYW1zOmJvYXJkX3BhcmFtZXRlcnMgPSB7fVxuICBjb25zdHJ1Y3RvcihzdGF0ZTpvYmpfc3RhdGUscGFyYW1zOmJvYXJkX3BhcmFtZXRlcnMgPSBjb3B5KGJvYXJkLmRlZmF1bHRfcGFyYW1zKSl7XG4gICAgc3VwZXIoc3RhdGUscGFyYW1zKTtcbiAgICB0aGlzLnRhZ3MuYWRkKFwiYm9hcmRcIik7XG4gIH1cbiAgc3RhdGVmKHRpbWVfZGVsdGE6bnVtYmVyKXtcbiAgICBzdXBlci5zdGF0ZWYodGltZV9kZWx0YSk7XG4gIH1cbiAgcmVuZGVyZih0aW1lX2RlbHRhOm51bWJlcil7XG4gICByZXR1cm4gc3VwZXIucmVuZGVyZih0aW1lX2RlbHRhKTsgXG4gIH1cbiAgcmVnaXN0ZXJBbmltYXRpb25zKCl7XG4gICAgXG4gIH1cbiAgcmVnaXN0ZXJBdWRpbygpe1xuICAgIFxuICB9XG4gIHJlZ2lzdGVyQ29udHJvbHMoKXtcbiAgICAgICAgXG4gIH1cbn0iLCJpbXBvcnQge29ian0gZnJvbSBcImxpYi9vYmplY3RcIjtcbmltcG9ydCB7IG9ial9zdGF0ZSwgVmVjdG9yIH0gZnJvbSBcImxpYi9zdGF0ZVwiO1xuaW1wb3J0IHtjb3B5fSBmcm9tIFwic3JjL3ZhblwiO1xuaW1wb3J0IHsgcGllY2UsIHBpZWNlX3BhcmFtZXRlcnMgfSBmcm9tIFwiLi9hYnN0cmFjdC9waWVjZVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIHBhd25fc3RhdGUgZXh0ZW5kcyBvYmpfc3RhdGV7XG4gICAgXG59XG4gICAgXG5leHBvcnQgaW50ZXJmYWNlIHBhd25fcGFyYW1ldGVyc3tcbiAgICBcbn1cbiAgICBcbmV4cG9ydCBjbGFzcyBwYXduIGV4dGVuZHMgcGllY2V7XG4gIGNvbnN0cnVjdG9yKHN0YXRlOm9ial9zdGF0ZSxwYXJhbXM6cGllY2VfcGFyYW1ldGVycyA9IGNvcHkocGllY2UuZGVmYXVsdF9wYXJhbXMpKXtcbiAgICBzdXBlcihzdGF0ZSxwYXJhbXMpO1xuICAgIHRoaXMuc3RhdGUuc2NhbGluZyA9IHtcbiAgICAgIGhlaWdodDogOCxcbiAgICAgIHdpZHRoOiA4XG4gICAgfVxuICB9XG4gIHN0YXRlZih0aW1lX2RlbHRhOm51bWJlcil7XG4gICAgc3VwZXIuc3RhdGVmKHRpbWVfZGVsdGEpO1xuICB9XG4gIHJlbmRlcmYodGltZV9kZWx0YTpudW1iZXIpe1xuICAgcmV0dXJuIHN1cGVyLnJlbmRlcmYodGltZV9kZWx0YSk7IFxuICB9XG4gIHJlZ2lzdGVyQW5pbWF0aW9ucygpe1xuICAgIFxuICB9XG4gIHJlZ2lzdGVyQXVkaW8oKXtcbiAgICBcbiAgfVxufSIsIlxuaW50ZXJmYWNlIHByZWZhYnMge1xuICBbaW5kZXg6c3RyaW5nXTphbnlcbn1cbmltcG9ydCB7Ym9hcmR9IGZyb20gXCIuL2JvYXJkXCI7XG5pbXBvcnQge3Bhd259IGZyb20gXCIuL3Bhd25cIjtcbmV4cG9ydCBsZXQgcHJlZmFiczpwcmVmYWJzID0ge1xuXHRib2FyZDpib2FyZCxcblx0cGF3bjpwYXduLFxufSIsImltcG9ydCB7IHByb3hpbWl0eV9tYXRyaXgsIHJvb20gfSBmcm9tIFwibGliL3Jvb21cIjtcbmltcG9ydCB7IGdhbWUsIHZpZXdwb3J0IH0gZnJvbSBcInNyYy92YW5cIjtcbmltcG9ydCB7IHN0YXRlX2NvbmZpZyB9IGZyb20gXCJsaWIvcm9vbVwiO1xuaW1wb3J0ICogYXMgY29uZmlnIGZyb20gXCIuL2JvYXJkVmlldy5qc29uXCI7XG5pbXBvcnQgeyBleGVjX3R5cGUsIFBvbGxfTW91c2UgfSBmcm9tIFwibGliL2NvbnRyb2xzXCI7XG5pbXBvcnQgeyBnLCBnZXROZXh0UHV6emxlLCBwdXp6bGUgfSBmcm9tIFwiZ2FtZS9tYWluXCI7XG5pbXBvcnQgeyBDYW1lcmEgfSBmcm9tIFwibGliL3JlbmRlclwiO1xuaW1wb3J0IHsgcGllY2UgfSBmcm9tIFwiZ2FtZS9vYmplY3RzL2Fic3RyYWN0L3BpZWNlXCI7XG5pbXBvcnQge0NoZXNzfSBmcm9tIFwiY2hlc3MuanNcIjtcbmltcG9ydCB7IGNsYW1wLCBWZWMgfSBmcm9tIFwibGliL21hdGhcIjtcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCJsaWIvc3RhdGVcIjtcbmltcG9ydCB7IEhVRCwgVGV4dCB9IGZyb20gXCJsaWIvaHVkXCI7XG5sZXQgY2ZpZyA9IGNvbmZpZyBhcyB1bmtub3duIGFzIHN0YXRlX2NvbmZpZztcbmludGVyZmFjZSB2aWV3U3RhdGUge1xuICBkcmFnZ2luZzogcGllY2UsXG4gIHN0YXJ0X2RyYWc6IFZlY3RvcixcbiAgcGVyc3BlY3RpdmU6IFwid1wiIHwgXCJiXCIsXG4gIHB1enpsZTogcHV6emxlXG59XG5cbmNsYXNzIGJvYXJkSHVkIGV4dGVuZHMgSFVEIHtcbiAgc2V0VGV4dEVsZW1lbnRzKCkge1xuICAgIHJldHVybiBbXG4gICAgICBuZXcgVGV4dCh7XG4gICAgICAgIHBvc2l0aW9uOiBWZWMuY3JlYXRlKDQ5ICogdmlld3BvcnQud2lkdGggLyA1MCwgMiAqIHZpZXdwb3J0LmhlaWdodCAvIDIwKSxcbiAgICAgICAgc2l6ZTogNDAsXG4gICAgICAgIHNjYWxpbmc6IDEsXG4gICAgICAgIGZvbnQ6IFwiVlQzMjNcIixcbiAgICAgICAgY29sb3I6IFwid2hpdGVcIixcbiAgICAgICAgYWxpZ246IFwicmlnaHRcIlxuICAgICAgfSwgKCkgPT4gYCR7Zy5zdGF0ZS5nbG9iYWxzLnJhdGluZ31gKSxcbiAgICBdXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIGJvYXJkVmlldyBleHRlbmRzIHJvb208dmlld1N0YXRlPntcbiAgYmFja2dyb3VuZF91cmwgPSBcIi4vc3ByaXRlcy9FcnJvci5wbmdcIjtcbiAgcmVuZGVyID0gdHJ1ZTtcbiAgcHJveGltaXR5X21hcDpwcm94aW1pdHlfbWF0cml4ID0gbmV3IHByb3hpbWl0eV9tYXRyaXgoMjAwMCwxKTtcbiAgY29uc3RydWN0b3IoZ2FtZTogZ2FtZTx1bmtub3duPikge1xuICAgIHN1cGVyKGdhbWUsIGNmaWcpO1xuICAgIHRoaXMuY2FtZXJhcy5wdXNoKFxuICAgICAgbmV3IENhbWVyYSh7XG4gICAgICAgIHg6MCxcbiAgICAgICAgeTowLFxuICAgICAgICBkaW1lbnNpb25zOnZpZXdwb3J0LFxuICAgICAgICBzY2FsaW5nOjAuM1xuICAgICAgfSx7XG4gICAgICAgIHg6MCxcbiAgICAgICAgeTowLFxuICAgICAgICB3aWR0aDoxLFxuICAgICAgICBoZWlnaHQ6MVxuICAgICAgfSxcbiAgICAgIG5ldyBib2FyZEh1ZCgpXG4gICAgKSk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGRyYWdnaW5nOiBudWxsLFxuICAgICAgc3RhcnRfZHJhZzogbnVsbCxcbiAgICAgIHBlcnNwZWN0aXZlOiBudWxsLFxuICAgICAgcHV6emxlOiBudWxsXG4gICAgfVxuICB9XG4gIHJlZ2lzdGVyQ29udHJvbHMoKSB7XG4gICAgc3VwZXIucmVnaXN0ZXJDb250cm9scygpO1xuICAgIHRoaXMuYmluZENvbnRyb2woXCJLZXlDXCIsIGV4ZWNfdHlwZS5vbmNlLCAoKSA9PiB7XG4gICAgICB0aGlzLmdldE9iakJ5VGFnKFwicGllY2VcIikuZm9yRWFjaCgocGllY2UpID0+IHBpZWNlLmRlbGV0ZSgpKTtcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMub2JqZWN0cyk7XG4gICAgfSk7XG4gICAgdGhpcy5iaW5kQ29udHJvbChcIm1vdXNlMGRvd25cIiwgZXhlY190eXBlLm9uY2UsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMub2JqZWN0cyk7XG4gICAgfSk7XG4gICAgdGhpcy5iaW5kQ29udHJvbChcIm1vdXNlMHVwXCIsZXhlY190eXBlLm9uY2UsKCkgPT4ge1xuICAgICAgaWYodGhpcy5zdGF0ZS5kcmFnZ2luZyl7XG4gICAgICAgIGxldCBtb3VzZSA9IFBvbGxfTW91c2UodGhpcy5jYW1lcmFzWzBdKTtcbiAgICAgICAgdGhpcy5zdGF0ZS5kcmFnZ2luZy5sYXllciA9IDE7XG4gICAgICAgIGlmKG1vdXNlLnggPiA3MDAgfHwgbW91c2UueSA+IDcwMCB8fCBtb3VzZS54IDwgLTcwMCB8fCBtb3VzZS55IDwgLTcwMCl7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5kcmFnZ2luZy5zdGF0ZS5wb3NpdGlvbiA9IHRoaXMuc3RhdGUuc3RhcnRfZHJhZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgcm93cyA9IFtcImFcIixcImJcIixcImNcIixcImRcIixcImVcIixcImZcIixcImdcIixcImhcIl07XG4gICAgICAgICAgbGV0IGNvbHMgPSBbXCIxXCIsXCIyXCIsXCIzXCIsXCI0XCIsXCI1XCIsXCI2XCIsXCI3XCIsXCI4XCJdO1xuICAgICAgICAgIGlmKHRoaXMuc3RhdGUucGVyc3BlY3RpdmUgPT0gXCJ3XCIpe1xuICAgICAgICAgICAgcm93cyA9IHJvd3MucmV2ZXJzZSgpO1xuICAgICAgICAgICAgY29scyA9IGNvbHMucmV2ZXJzZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgbW9kX3ggPSBNYXRoLmZsb29yKG1vdXNlLnggLyAxNzguNTcxNDI5KSArIDQ7XG4gICAgICAgICAgbGV0IG1vZF95ID0gTWF0aC5mbG9vcihtb3VzZS55IC8gMTc4LjU3MTQyOSkgKyA0O1xuICAgICAgICAgIGxldCBzcXVhcmUgPSBgJHtyb3dzW21vZF94XX0ke2NvbHNbbW9kX3ldfWA7XG4gICAgICAgICAgbGV0IGZ1bGxfbW92ZSA9IHRoaXMuc3RhdGUuZHJhZ2dpbmcucGFyYW1zLnNxdWFyZSArIHNxdWFyZTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhmdWxsX21vdmUgKyBcIiBcIiArIHRoaXMuc3RhdGUucHV6emxlLnNvbHV0aW9uWzBdKTtcbiAgICAgICAgICBpZihmdWxsX21vdmUgPT0gdGhpcy5zdGF0ZS5wdXp6bGUuc29sdXRpb25bMF0pe1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjb3JyZWN0XCIpO1xuICAgICAgICAgICAgbGV0IHggPSAtNjI1ICsgMTc4LjU3MTQyOSAqIChtb2RfeCk7XG4gICAgICAgICAgICBsZXQgeSA9IC02MjUgKyAxNzguNTcxNDI5ICogKG1vZF95KTtcbiAgICAgICAgICAgIGxldCBjb2xsaXNpb24gPSB0aGlzLmNoZWNrT2JqZWN0c1BvaW50SW5jbHVzaXZlKG1vdXNlLFtcInBpZWNlXCJdKS5maWx0ZXIoKG9iaikgPT4gb2JqICE9IHRoaXMuc3RhdGUuZHJhZ2dpbmcpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5wdXp6bGUuc29sdXRpb24uc2hpZnQoKTtcbiAgICAgICAgICAgIGlmKGNvbGxpc2lvbi5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgICAgY29sbGlzaW9uWzBdLmRlbGV0ZSgpO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImRlbGV0ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3RhdGUuZHJhZ2dpbmcuc3RhdGUucG9zaXRpb24ueCA9IHg7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLmRyYWdnaW5nLnN0YXRlLnBvc2l0aW9uLnkgPSB5O1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5kcmFnZ2luZy5wYXJhbXMuc3F1YXJlID0gc3F1YXJlO1xuICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5wdXp6bGUuc29sdXRpb24ubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICAgIGxldCBuZXh0X21vdmUgPSB0aGlzLnN0YXRlLnB1enpsZS5zb2x1dGlvbi5zaGlmdCgpO1xuICAgICAgICAgICAgICB0aGlzLm90aGVyUGxheWVyTW92ZShuZXh0X21vdmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuc2hvd05leHRQdXp6bGUoKTtcbiAgICAgICAgICAgICAgZy5zdGF0ZS5nbG9iYWxzLnJhdGluZyArPSAyNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImluY29ycmVjdFwiKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuZHJhZ2dpbmcuc3RhdGUucG9zaXRpb24ueCA9IHRoaXMuc3RhdGUuc3RhcnRfZHJhZy54O1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5kcmFnZ2luZy5zdGF0ZS5wb3NpdGlvbi55ID0gdGhpcy5zdGF0ZS5zdGFydF9kcmFnLnk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUuZHJhZ2dpbmcgPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXRlLnN0YXJ0X2RyYWcgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuYmluZENvbnRyb2woXCJLZXlYXCIsIGV4ZWNfdHlwZS5vbmNlLCBhc3luYyAoKSA9PiB7XG4gICAgICBcbiAgICB9KTtcbiAgfVxuICBhc3luYyBzaG93TmV4dFB1enpsZSgpe1xuICAgIGxldCBwdXp6bGVzID0gZy5zdGF0ZS5nbG9iYWxzLnB1enpsZXM7XG4gICAgICBsZXQgcmF0aW5nID0gZy5zdGF0ZS5nbG9iYWxzLnJhdGluZztcbiAgICAgIGxldCBuZXh0X3B1enpsZTpwdXp6bGU7XG4gICAgICBkbyB7XG4gICAgICAgIG5leHRfcHV6emxlID0gZ2V0TmV4dFB1enpsZShwdXp6bGVzLCByYXRpbmcsIDUwKTtcbiAgICAgIH0gd2hpbGUgKG5leHRfcHV6emxlLnNvbHV0aW9uLmxlbmd0aCA8PSAyKTtcbiAgICAgIGxldCBjaGVzcyA9IG5ldyBDaGVzcyhuZXh0X3B1enpsZS5mZW4pO1xuICAgICAgbGV0IGJvYXJkID0gY2hlc3MuYm9hcmQoKTtcbiAgICAgIGNvbnNvbGUubG9nKGNoZXNzLmFzY2lpKCkpO1xuICAgICAgY29uc29sZS5sb2coY2hlc3MuZmVuKCkpO1xuICAgICAgdGhpcy5nZXRPYmpCeVRhZyhcInBpZWNlXCIpLmZvckVhY2gocCA9PiBwLmRlbGV0ZSgpKTtcbiAgICAgIHRoaXMuc3RhdGUucGVyc3BlY3RpdmUgPSBjaGVzcy50dXJuKCk7XG4gICAgICB0aGlzLnN0YXRlLnB1enpsZSA9IG5leHRfcHV6emxlO1xuICAgICAgaWYoY2hlc3MudHVybigpID09PSBcImJcIil7XG4gICAgICAgIGJvYXJkLnJldmVyc2UoKTtcbiAgICAgICAgLy9ib2FyZCA9IGJvYXJkLm1hcChyb3cgPT4gcm93LnJldmVyc2UoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBib2FyZCA9IGJvYXJkLm1hcChyb3cgPT4gcm93LnJldmVyc2UoKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKG5leHRfcHV6emxlLnNvbHV0aW9uKTtcbiAgICAgIGZvcihsZXQgeSA9IDA7IHkgPCA4OyB5Kyspe1xuICAgICAgICBmb3IobGV0IHggPSAwOyB4IDwgODsgeCsrKXtcbiAgICAgICAgICBpZihib2FyZFt5XVt4XSl7XG4gICAgICAgICAgICBsZXQgdHlwZTpzdHJpbmcgPSBib2FyZFt5XVt4XS50eXBlO1xuICAgICAgICAgICAgaWYoYm9hcmRbeV1beF0uY29sb3IgPT09IFwid1wiKXtcbiAgICAgICAgICAgICAgdHlwZSA9IHR5cGUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkSXRlbShuZXcgcGllY2Uoe1xuICAgICAgICAgICAgICBwb3NpdGlvbjogVmVjLmNyZWF0ZSgoeCAtIDQpICogMTc4LjU3MTQyOSArIDkwLCh5IC0gNCkgKiAxNzguNTcxNDI5ICsgOTApLFxuICAgICAgICAgICAgICBzY2FsaW5nOiB7XG4gICAgICAgICAgICAgICAgd2lkdGg6OCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6OFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LHtcbiAgICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgICAgc3F1YXJlOiAoPGFueT5ib2FyZFt5XVt4XSkuc3F1YXJlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgbmV4dF9tb3ZlID0gdGhpcy5zdGF0ZS5wdXp6bGUuc29sdXRpb24uc2hpZnQoKTtcbiAgICAgIHRoaXMub3RoZXJQbGF5ZXJNb3ZlKG5leHRfbW92ZSk7XG4gIH1cbiAgc3F1YXJlVG9Qb3NpdGlvbihzcXVhcmU6IHN0cmluZyl7XG4gICAgbGV0IHJvd3MgPSBbXCJhXCIsXCJiXCIsXCJjXCIsXCJkXCIsXCJlXCIsXCJmXCIsXCJnXCIsXCJoXCJdO1xuICAgIGxldCBjb2xzID0gW1wiMVwiLFwiMlwiLFwiM1wiLFwiNFwiLFwiNVwiLFwiNlwiLFwiN1wiLFwiOFwiXTtcbiAgICBpZiAodGhpcy5zdGF0ZS5wZXJzcGVjdGl2ZSA9PSBcIndcIil7XG4gICAgICByb3dzID0gcm93cy5yZXZlcnNlKCk7XG4gICAgICBjb2xzID0gY29scy5yZXZlcnNlKCk7XG4gICAgfVxuICAgIGxldCB4ID0gcm93cy5pbmRleE9mKHNxdWFyZVswXSk7XG4gICAgbGV0IHkgPSBjb2xzLmluZGV4T2Yoc3F1YXJlWzFdKTtcbiAgICByZXR1cm4gVmVjLmNyZWF0ZSgoeCAtIDQpICogMTc4LjU3MTQyOSArIDkwLCh5IC0gNCkgKiAxNzguNTcxNDI5ICsgOTApO1xuICB9XG4gIG90aGVyUGxheWVyTW92ZShtb3ZlOnN0cmluZyl7XG4gICAgbGV0IHN0YXJ0ID0gdGhpcy5zcXVhcmVUb1Bvc2l0aW9uKG1vdmUuc3Vic3RyaW5nKDAsMikpO1xuICAgIGxldCBlbmQgPSB0aGlzLnNxdWFyZVRvUG9zaXRpb24obW92ZS5zdWJzdHJpbmcoMiw0KSk7XG4gICAgbGV0IGFpX3BpZWNlID0gdGhpcy5jaGVja09iamVjdHNQb2ludEluY2x1c2l2ZShzdGFydCxbXCJwaWVjZVwiXSlbMF0gYXMgcGllY2U7XG4gICAgbGV0IHRha2VuX3BpZWNlID0gdGhpcy5jaGVja09iamVjdHNQb2ludEluY2x1c2l2ZShlbmQsW1wicGllY2VcIl0pO1xuICAgIGlmKHRha2VuX3BpZWNlLmxlbmd0aCA+IDApe1xuICAgICAgdGFrZW5fcGllY2VbMF0uZGVsZXRlKCk7XG4gICAgfVxuICAgIHRoaXMubW92ZVBpZWNlKGFpX3BpZWNlLGVuZCwxNzUpOyBcbiAgfVxuICBtb3ZlUGllY2UocGllY2U6IHBpZWNlLCB0YXJnZXQ6IFZlY3RvciwgdGltZTpudW1iZXIpe1xuICAgIGxldCBjb3VudGVyID0gMDtcbiAgICBsZXQgZGlmZiA9IFZlYy5zdWIodGFyZ2V0LHBpZWNlLnN0YXRlLnBvc2l0aW9uKTtcbiAgICBsZXQgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBsZXQgb2Zmc2V0ID0gVmVjLmZ1bmMoZGlmZiwgKHYpID0+IHYgLyA2MCk7XG4gICAgICBwaWVjZS5zdGF0ZS5wb3NpdGlvbiA9IFZlYy5hZGQocGllY2Uuc3RhdGUucG9zaXRpb24sIG9mZnNldCk7XG4gICAgICBjb3VudGVyKys7XG4gICAgICBpZihjb3VudGVyID09PSA2MCl7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgfVxuICAgIH0sIHRpbWUvNjApO1xuICB9XG4gIHJlZ2lzdGVyUGFydGljbGVzKCkge1xuXG4gIH1cbiAgcmVnaXN0ZXJBdWRpbygpe1xuICAgIHRoaXMuYXVkaW8uYWRkKFwicnVzc2lhblwiLFwiLi9zb3VuZHMvUnVzc2lhbi5tcGdhXCIpO1xuICB9XG4gIGFzeW5jIGluaXRpYWxpemUoKXtcbiAgICBhd2FpdCB0aGlzLnNob3dOZXh0UHV6emxlKCk7XG4gICAgdGhpcy5hdWRpby5wbGF5KFwicnVzc2lhblwiLDEpO1xuICB9XG4gIHN0YXRlZihkZWx0YV90aW1lOiBudW1iZXIpIHtcbiAgICBzdXBlci5zdGF0ZWYoZGVsdGFfdGltZSk7XG4gICAgaWYodGhpcy5zdGF0ZS5kcmFnZ2luZyl7XG4gICAgICBsZXQgbW91c2UgPSBQb2xsX01vdXNlKHRoaXMuY2FtZXJhc1swXSk7XG4gICAgICB0aGlzLnN0YXRlLmRyYWdnaW5nLnN0YXRlLnBvc2l0aW9uID0gbW91c2U7XG4gICAgfVxuICB9XG5cbn0iLCJcbmludGVyZmFjZSByb29tX2RpciB7XG4gIFtpbmRleDpzdHJpbmddOmFueVxufVxuaW1wb3J0IHtib2FyZFZpZXd9IGZyb20gXCIuL2JvYXJkVmlld1wiO1xuZXhwb3J0IGxldCByb29tczpyb29tX2RpciA9IHtcblx0Ym9hcmRWaWV3OmJvYXJkVmlldyxcbn0iLCJpbXBvcnQgeyByb290X3BhdGgsIHBhdGggfSBmcm9tIFwiLi9kZWJ1Z1wiO1xuaW1wb3J0IHsgREVCVUcgfSBmcm9tIFwiLi4vdmFuXCI7XG5cbmludGVyZmFjZSBzb3VuZF9zdG9yYWdlIHtcbiAgW2luZGV4OiBzdHJpbmddOiBIVE1MQXVkaW9FbGVtZW50XG59XG5cbmV4cG9ydCBjbGFzcyBhdWRpbyB7XG4gIHNvdW5kczogc291bmRfc3RvcmFnZSA9IHt9O1xuICBhZGQobmFtZTogc3RyaW5nLCB1cmw6IHN0cmluZykge1xuICAgIGxldCBwID0gdXJsO1xuICAgIGlmIChERUJVRykge1xuICAgICAgcCA9IHBhdGguam9pbihyb290X3BhdGgsIHVybCk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKHApO1xuICAgIHRoaXMuc291bmRzW25hbWVdID0gbmV3IEF1ZGlvKHApO1xuICAgIGNvbnNvbGUubG9nKHRoaXMuc291bmRzW25hbWVdKTtcbiAgfVxuICBhc3luYyBsb2FkKCkge1xuICAgIGxldCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5zb3VuZHMpO1xuICAgIGxldCBwcm9taXNlcyA9IGtleXMubWFwKChrZXkpID0+IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHRoaXMuc291bmRzW2tleV0uYWRkRXZlbnRMaXN0ZW5lcihcImNhbnBsYXl0aHJvdWdoXCIsIChlKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KVxuICAgIHRyeSB7XG4gICAgICBsZXQgeCA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICAgIHJldHVybiAoeCk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICB9XG4gIH1cbiAgcGxheShuYW1lOiBzdHJpbmcsIHZvbHVtZTogbnVtYmVyKSB7XG4gICAgbGV0IGEgPSB0aGlzLnNvdW5kc1tuYW1lXTtcbiAgICBhLnBhdXNlKClcbiAgICBhLmN1cnJlbnRUaW1lID0gMDtcbiAgICBhLnZvbHVtZSA9IHZvbHVtZTtcbiAgICBhLnBsYXkoKTtcbiAgfVxufSIsImltcG9ydCB7IG9iaiwgZ2V0SWQgfSBmcm9tIFwiLi4vbGliL29iamVjdFwiO1xuaW1wb3J0IHsgb2JqX3N0YXRlLCBWZWN0b3IgfSBmcm9tIFwiLi4vbGliL3N0YXRlXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgY29sbGlzaW9uX2JveCB7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xuICB3aWR0aDogbnVtYmVyO1xuICBoZWlnaHQ6IG51bWJlcjtcbn1cblxuZW51bSBkaXJlY3Rpb24ge1xuICBsZWZ0LFxuICByaWdodCxcbiAgdXAsXG4gIGRvd25cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gcG9pbnRDb2xsaWRlc1dpdGhCb3gocG9pbnQ6VmVjdG9yLGJveDpjb2xsaXNpb25fYm94KXtcbiAgcmV0dXJuIGJveENvbGxpZGVzV2l0aEJveCh7eDpwb2ludC54LHk6cG9pbnQueSx3aWR0aDowLGhlaWdodDowfSxib3gpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGJveENvbGxpZGVzV2l0aEJveChib3gxOiBjb2xsaXNpb25fYm94LCBib3gyOiBjb2xsaXNpb25fYm94KSB7XG4gIGxldCBjb2xsaWRlc19ob3JyaXpvbnRhbGx5ID0gZmFsc2UsIGNvbGxpZGVzX3ZlcnRpY2FsbHkgPSBmYWxzZTtcbiAgbGV0IG9iamVjdF9ib3VuZHMgPSB7XG4gICAgbGVmdDogYm94MS54IC0gYm94MS53aWR0aC8yLFxuICAgIHJpZ2h0OiBib3gxLnggKyBib3gxLndpZHRoLzIsXG4gICAgdG9wOiBib3gxLnkgKyBib3gxLmhlaWdodC8yLFxuICAgIGJvdHRvbTogYm94MS55IC0gYm94MS5oZWlnaHQvMlxuICB9XG5cbiAgbGV0IG90aGVyX29iamVjdF9ib3VuZHMgPSB7XG4gICAgbGVmdDogYm94Mi54IC0gYm94Mi53aWR0aC8yLFxuICAgIHJpZ2h0OiBib3gyLnggKyBib3gyLndpZHRoLzIsXG4gICAgdG9wOiBib3gyLnkgKyBib3gyLmhlaWdodC8yLFxuICAgIGJvdHRvbTogYm94Mi55IC0gYm94Mi5oZWlnaHQvMlxuICB9XG5cbiAgLy9XZSBjYW4gY29tcGFyZSB0aGUgc2lkZXMgb2YgdGhlIGJveGVzIHRvIHNlZSBpZiB0aGV5IG92ZXJsYXBcbiAgLy9XZSBjaGVjayBvbmNlIGZvciBob2l6b250YWwgb3ZlcmxhcCwgdGhlbiB2ZXJ0aWNhbC5cbiAgaWYgKChvYmplY3RfYm91bmRzLmxlZnQgPj0gb3RoZXJfb2JqZWN0X2JvdW5kcy5sZWZ0ICYmIG9iamVjdF9ib3VuZHMubGVmdCA8IG90aGVyX29iamVjdF9ib3VuZHMucmlnaHQpIHx8IChvdGhlcl9vYmplY3RfYm91bmRzLmxlZnQgPiBvYmplY3RfYm91bmRzLmxlZnQgJiYgb3RoZXJfb2JqZWN0X2JvdW5kcy5sZWZ0IDwgb2JqZWN0X2JvdW5kcy5yaWdodCkpIHtcbiAgICBjb2xsaWRlc19ob3JyaXpvbnRhbGx5ID0gdHJ1ZTtcbiAgfVxuICBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKChvYmplY3RfYm91bmRzLmJvdHRvbSA+PSBvdGhlcl9vYmplY3RfYm91bmRzLmJvdHRvbSAmJiBvYmplY3RfYm91bmRzLmJvdHRvbSA8IG90aGVyX29iamVjdF9ib3VuZHMudG9wKSB8fCAob3RoZXJfb2JqZWN0X2JvdW5kcy5ib3R0b20gPiBvYmplY3RfYm91bmRzLmJvdHRvbSAmJiBvdGhlcl9vYmplY3RfYm91bmRzLmJvdHRvbSA8IG9iamVjdF9ib3VuZHMudG9wKSkge1xuICAgIGNvbGxpZGVzX3ZlcnRpY2FsbHkgPSB0cnVlO1xuICB9XG4gIGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gY29sbGlkZXNfaG9ycml6b250YWxseSAmJiBjb2xsaWRlc192ZXJ0aWNhbGx5O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW5jb21wYXNzaW5nQm94KG9iamVjdHM6IG9ialtdKTogY29sbGlzaW9uX2JveCB7XG4gIGxldCBmaXJzdF9vYmplY3QgPSBvYmplY3RzWzBdLmdldEJvdW5kaW5nQm94KCk7XG4gIGxldCBtYXhfeSA9IGZpcnN0X29iamVjdC50b3BfcmlnaHQueTtcbiAgbGV0IG1heF94ID0gZmlyc3Rfb2JqZWN0LnRvcF9yaWdodC54O1xuICBsZXQgbWluX3kgPSBmaXJzdF9vYmplY3QuYm90dG9tX2xlZnQueTtcbiAgbGV0IG1pbl94ID0gZmlyc3Rfb2JqZWN0LmJvdHRvbV9sZWZ0Lng7XG4gIGZvciAobGV0IGEgPSAxOyBhIDwgb2JqZWN0cy5sZW5ndGg7IGErKykge1xuICAgIGxldCBvYmplY3QgPSBvYmplY3RzW2FdLmdldEJvdW5kaW5nQm94KCk7XG4gICAgaWYgKG9iamVjdC50b3BfcmlnaHQueSA+IG1heF95KVxuICAgICAgbWF4X3kgPSBvYmplY3QudG9wX3JpZ2h0Lnk7XG4gICAgaWYgKG9iamVjdC50b3BfcmlnaHQueCA+IG1heF94KVxuICAgICAgbWF4X3ggPSBvYmplY3QudG9wX3JpZ2h0Lng7XG4gICAgaWYgKG9iamVjdC5ib3R0b21fbGVmdC55IDwgbWluX3kpXG4gICAgICBtaW5feSA9IG9iamVjdC5ib3R0b21fbGVmdC55O1xuICAgIGlmIChvYmplY3QuYm90dG9tX2xlZnQueCA8IG1pbl94KVxuICAgICAgbWluX3ggPSBvYmplY3QuYm90dG9tX2xlZnQueDtcbiAgfVxuICByZXR1cm4ge1xuICAgIHg6IG1pbl94ICsgKG1heF94IC0gbWluX3gpIC8gMixcbiAgICB5OiBtaW5feSArIChtYXhfeSAtIG1pbl95KSAvIDIsXG4gICAgaGVpZ2h0OiBtYXhfeSAtIG1pbl95LFxuICAgIHdpZHRoOiBtYXhfeCAtIG1pbl94XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrX2FsbF9vYmplY3RzKGM6IGNvbGxpc2lvbl9ib3gsIG9ianM6IG9ialtdLCBleGVtcHRpb246IHN0cmluZ1tdID0gW10pOiBvYmpbXSB7XG4gIHJldHVybiBvYmpzLmZpbHRlcigoYSkgPT4gKCFleGVtcHRpb24uc29tZSgoYikgPT4gYS50YWdzLmhhcyhiKSkgJiYgYS5jb2xsaWRlc1dpdGhCb3goYykpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrX2FsbF9jb2xsaXNpb25zKGM6IGNvbGxpc2lvbl9ib3gsIG9ianM6IG9ialtdLCBleGVtcHRpb246IHN0cmluZ1tdID0gW10pOiBBcnJheTxvYmo+IHtcbiAgbGV0IG1hdGNoZWQgPSBbXTtcbiAgZm9yIChsZXQgYSBvZiBvYmpzKSB7XG4gICAgaWYgKCFleGVtcHRpb24uc29tZSgoYikgPT4gYS50YWdzLmhhcyhiKSkgJiYgYS5jb2xsaXNpb24gJiYgYS5jb2xsaWRlc1dpdGhCb3goYykpIHtcbiAgICAgIG1hdGNoZWQucHVzaChhKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1hdGNoZWRcbn1cbi8vQ2hlY2tzIHVwIHRvIHRoZSBmaXJzdCBjb2xsaXNpb25cbmV4cG9ydCBmdW5jdGlvbiBjaGVja19jb2xsaXNpb25zKGM6IGNvbGxpc2lvbl9ib3gsIG9ianM6IG9ialtdLCBleGVtcHRpb246IHN0cmluZykge1xuICBmb3IgKGxldCBhIG9mIG9ianMpIHtcbiAgICBpZiAoYS5pZCAhPT0gZXhlbXB0aW9uICYmIGEuY29sbGlzaW9uICYmIGEuY29sbGlkZXNXaXRoQm94KGMpKSB7XG4gICAgICByZXR1cm4gYTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIHZlbG9jaXR5X21heCh2ZWxvY2l0eTogbnVtYmVyLCBib3g6IGNvbGxpc2lvbl9ib3gsIG9ianM6IG9ialtdLCBleGVtcHRpb246IHN0cmluZywgZGlyOiBkaXJlY3Rpb24pIHtcbiAgbGV0IGNvbGxpc2lvbiA9IGNoZWNrX2NvbGxpc2lvbnMoYm94LCBvYmpzLCBleGVtcHRpb24pO1xuICBpZiAoY29sbGlzaW9uID09IG51bGwpIHtcbiAgICByZXR1cm4gdmVsb2NpdHk7XG4gIH1cbiAgZWxzZSB7XG4gICAgbGV0IGNvbGxpZGVyID0gY29sbGlzaW9uO1xuICAgIGxldCBvcmlnaW4gPSBnZXRJZChvYmpzLCBleGVtcHRpb24pO1xuICAgIGxldCBvcmlnX3N0ID0gb3JpZ2luLnN0YXRlIGFzIG9ial9zdGF0ZTtcbiAgICBsZXQgY29sbGlkZXJfc3QgPSBjb2xsaWRlci5zdGF0ZSBhcyBvYmpfc3RhdGU7XG4gICAgbGV0IG9yaWdfY29sID0gb3JpZ2luLmdldEZ1bGxDb2xsaXNpb25Cb3goKTtcbiAgICBsZXQgY29sbGlkZXJfY29sID0gY29sbGlkZXIuZ2V0RnVsbENvbGxpc2lvbkJveCgpO1xuICAgIGlmIChkaXIgPT0gZGlyZWN0aW9uLmxlZnQpIHtcbiAgICAgIHJldHVybiAob3JpZ19jb2wueCAtIG9yaWdfY29sLndpZHRoIC8gMikgLSAoY29sbGlkZXJfY29sLnggKyBjb2xsaWRlcl9jb2wud2lkdGggLyAyKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGlyID09IGRpcmVjdGlvbi5yaWdodCkge1xuICAgICAgcmV0dXJuIChjb2xsaWRlcl9jb2wueCAtIGNvbGxpZGVyX2NvbC53aWR0aCAvIDIpIC0gKG9yaWdfY29sLnggKyBvcmlnX2NvbC53aWR0aCAvIDIpO1xuICAgIH1cbiAgICBlbHNlIGlmIChkaXIgPT0gZGlyZWN0aW9uLmRvd24pIHtcbiAgICAgIHJldHVybiAob3JpZ19jb2wueSAtIG9yaWdfY29sLmhlaWdodCAvIDIpIC0gKGNvbGxpZGVyX2NvbC55ICsgY29sbGlkZXJfY29sLmhlaWdodCAvIDIpO1xuICAgIH1cbiAgICBlbHNlIGlmIChkaXIgPT0gZGlyZWN0aW9uLnVwKSB7XG4gICAgICByZXR1cm4gKGNvbGxpZGVyX2NvbC55IC0gY29sbGlkZXJfY29sLmhlaWdodCAvIDIpIC0gKG9yaWdfY29sLnkgKyBvcmlnX2NvbC5oZWlnaHQgLyAyKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZlbG9jaXR5Q29sbGlzaW9uQ2hlY2sob2JqZWN0OiBvYmosIGxpc3Q6IG9ialtdKSB7XG4gIGxpc3QgPSBbLi4ubGlzdF07XG4gIGxldCBvYiA9IG9iamVjdDtcbiAgbGV0IHN0ID0gb2JqZWN0LnN0YXRlIGFzIG9ial9zdGF0ZTtcbiAgbGV0IHhfdmVsID0gc3QudmVsb2NpdHkueDtcbiAgbGV0IHlfdmVsID0gc3QudmVsb2NpdHkueTtcbiAgaWYgKHhfdmVsID09IDAgJiYgeV92ZWwgPT0gMCkgcmV0dXJuO1xuICBpZiAoIW9iLmNvbGxpc2lvbikge1xuICAgICg8b2JqX3N0YXRlPm9iLnN0YXRlKS5wb3NpdGlvbi54ICs9ICg8b2JqX3N0YXRlPm9iLnN0YXRlKS52ZWxvY2l0eS54O1xuICAgICg8b2JqX3N0YXRlPm9iLnN0YXRlKS5wb3NpdGlvbi55ICs9ICg8b2JqX3N0YXRlPm9iLnN0YXRlKS52ZWxvY2l0eS55O1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgY29sX2JveCA9IG9iLmdldEZ1bGxDb2xsaXNpb25Cb3goKTtcbiAgaWYgKHhfdmVsID4gMCkge1xuICAgIGxldCBib3ggPSB7XG4gICAgICB4OiBjb2xfYm94LnggKyBjb2xfYm94LndpZHRoIC8gMiArIHhfdmVsIC8gMixcbiAgICAgIHk6IGNvbF9ib3gueSxcbiAgICAgIHdpZHRoOiB4X3ZlbCxcbiAgICAgIGhlaWdodDogY29sX2JveC5oZWlnaHRcbiAgICB9O1xuICAgIGxldCB2ZWwgPSB2ZWxvY2l0eV9tYXgoc3QudmVsb2NpdHkueCwgYm94LCBsaXN0LCBvYi5pZCwgZGlyZWN0aW9uLnJpZ2h0KTtcbiAgICBpZiAodmVsID4gMCkge1xuICAgICAgc3QucG9zaXRpb24ueCA9IHN0LnBvc2l0aW9uLnggKyB2ZWxcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzdC52ZWxvY2l0eS54ID0gMDtcbiAgICB9XG4gIH1cbiAgZWxzZSBpZiAoeF92ZWwgPCAwKSB7XG4gICAgbGV0IGJveCA9IHtcbiAgICAgIHg6IHhfdmVsIC8gMiArIGNvbF9ib3gueCAtIGNvbF9ib3gud2lkdGggLyAyLFxuICAgICAgeTogY29sX2JveC55LFxuICAgICAgd2lkdGg6IC0xICogeF92ZWwsXG4gICAgICBoZWlnaHQ6IGNvbF9ib3guaGVpZ2h0XG4gICAgfVxuICAgIGxldCB2ZWwgPSB2ZWxvY2l0eV9tYXgoc3QudmVsb2NpdHkueCwgYm94LCBsaXN0LCBvYi5pZCwgZGlyZWN0aW9uLmxlZnQpO1xuICAgIGlmICh2ZWwgPCAwKSB7XG4gICAgICBzdC5wb3NpdGlvbi54ID0gc3QucG9zaXRpb24ueCArIHZlbFxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHN0LnZlbG9jaXR5LnggPSAwO1xuICAgIH1cbiAgfVxuICBpZiAoeV92ZWwgPiAwKSB7XG4gICAgbGV0IGJveCA9IHtcbiAgICAgIHg6IGNvbF9ib3gueCxcbiAgICAgIHk6IGNvbF9ib3gueSArIGNvbF9ib3guaGVpZ2h0IC8gMiArIHlfdmVsIC8gMixcbiAgICAgIHdpZHRoOiBjb2xfYm94LndpZHRoLFxuICAgICAgaGVpZ2h0OiB5X3ZlbFxuICAgIH1cbiAgICBsZXQgdmVsID0gdmVsb2NpdHlfbWF4KHN0LnZlbG9jaXR5LnksIGJveCwgbGlzdCwgb2IuaWQsIGRpcmVjdGlvbi51cCk7XG4gICAgaWYgKHZlbCA+IDApIHtcbiAgICAgIHN0LnBvc2l0aW9uLnkgPSBzdC5wb3NpdGlvbi55ICsgdmVsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHN0LnZlbG9jaXR5LnkgPSAwO1xuICAgIH1cbiAgfVxuICBlbHNlIGlmICh5X3ZlbCA8IDApIHtcbiAgICBsZXQgYm94ID0ge1xuICAgICAgeDogY29sX2JveC54LFxuICAgICAgeTogeV92ZWwgLyAyICsgY29sX2JveC55IC0gY29sX2JveC5oZWlnaHQgLyAyLFxuICAgICAgd2lkdGg6IGNvbF9ib3gud2lkdGgsXG4gICAgICBoZWlnaHQ6IC0xICogeV92ZWxcbiAgICB9XG4gICAgbGV0IHZlbCA9IHZlbG9jaXR5X21heChzdC52ZWxvY2l0eS55LCBib3gsIGxpc3QsIG9iLmlkLCBkaXJlY3Rpb24uZG93bik7XG4gICAgaWYgKHZlbCA8IDApIHtcbiAgICAgIHN0LnBvc2l0aW9uLnkgPSBzdC5wb3NpdGlvbi55ICsgdmVsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHN0LnZlbG9jaXR5LnkgPSAwO1xuICAgIH1cbiAgfVxufSIsImltcG9ydCB7IGcgfSBmcm9tIFwiLi4vZ2FtZS9tYWluXCI7XG5pbXBvcnQgeyBnYW1lLCBQQVVTRUQsIERFQlVHLCBHZXRTY3JlZW5EaW1lbnNpb25zLCBHZXRWaWV3cG9ydERpbWVuc2lvbnMsIHZpZXdwb3J0IH0gZnJvbSBcIi4uL3ZhblwiO1xuaW1wb3J0IHsgY29sbGlzaW9uX2JveCB9IGZyb20gXCIuL2NvbGxpc2lvblwiO1xuaW1wb3J0IHsgb2JqIH0gZnJvbSBcIi4vb2JqZWN0XCI7XG5pbXBvcnQgeyBDYW1lcmEgfSBmcm9tIFwiLi9yZW5kZXJcIjtcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuL3N0YXRlXCI7XG5pbXBvcnQgeyBkZWJ1Z19zdGF0ZSB9IGZyb20gXCIuL2RlYnVnXCI7XG5cbmludGVyZmFjZSBtb3VzZVBvcyB7XG4gIHg6IG51bWJlcixcbiAgeTogbnVtYmVyLFxuICBsYXN0OiB7XG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlclxuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgY29udHJvbF9mdW5jIHtcbiAgKGE/OiBudW1iZXIsIGI/OiBudW1iZXIpOiB2b2lkXG59XG5cbmludGVyZmFjZSBtb3VzZUJpbmRzIHtcbiAgW2tleTogc3RyaW5nXTogQXJyYXk8W2NvbnRyb2xfZnVuYywgb2JqXT5cbn1cblxuaW50ZXJmYWNlIGtleUJpbmRzIHtcbiAgW2tleTogc3RyaW5nXTogQXJyYXk8Y29udHJvbF9mdW5jPlxufVxuXG5leHBvcnQgZW51bSBidHlwZSB7XG4gIG1vdXNlLFxuICBrZXlib2FyZCxcbiAgZ2FtZXBhZFxufVxuXG5pbnRlcmZhY2UgYmluZCB7XG4gIGtleTogc3RyaW5nLFxuICB0eXBlOiBidHlwZSxcbiAgaWQ6IG51bWJlcixcbiAgZnVuY3Rpb246IGNvbnRyb2xfZnVuYyxcbiAgZXhlY3V0ZTogZXhlY190eXBlLFxuICByZXBlYXRfdGltZXI/OiByZXBlYXRfYmluZCxcbiAgb2JqPzogb2JqLFxuICBleGVjdXRlZD86IGJvb2xlYW4sXG4gIGludGVydmFsPzogbnVtYmVyLFxuICBjYW1lcmE/OiBDYW1lcmEsXG4gIGRlYnVnOiBib29sZWFuXG59XG5cbmludGVyZmFjZSByZXBlYXRfYmluZCB7XG4gIGJpbmQ6IGJpbmQsXG4gIHRpbWVyOiBudW1iZXIsXG4gIGludGVydmFsOiBudW1iZXIsXG4gIGFjdGl2ZTogYm9vbGVhblxufVxuXG5leHBvcnQgZW51bSBleGVjX3R5cGUge1xuICBvbmNlLFxuICByZXBlYXRcbn1cblxubGV0IGlkID0gMDtcblxubGV0IHggPSAwO1xubGV0IHkgPSAwO1xubGV0IGxhc3RfeCA9IDA7XG5sZXQgbGFzdF95ID0gMDtcbmxldCBiaW5kczoga2V5QmluZHMgPSB7fTtcbmV4cG9ydCBsZXQgZGVidWdfYmluZHM6IGJpbmRbXSA9IFtdO1xubGV0IG1vdXNlQmluZHM6IG1vdXNlQmluZHMgPSB7fTtcbmxldCBiaW5kX2NvdW50ID0gMDtcblxubGV0IGFsbF9iaW5kczogQXJyYXk8YmluZD4gPSBbXVxuXG5sZXQgcmVwZWF0X2JpbmRzOiBBcnJheTxyZXBlYXRfYmluZD4gPSBbXTtcblxubGV0IHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFyZ2V0XCIpO1xuLypcbmV4cG9ydCBmdW5jdGlvbiBpbml0X2NsaWNrX2hhbmRsZXIoZ2FtZTpnYW1lPHVua25vd24+KXtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLChlKT0+e1xuICAgIFxuICAgIGxldCBtb3VzZSA9IFBvbGxfTW91c2UoZ2FtZS5zdGF0ZS5jYW1lcmFzWzBdKTtcbiAgICBpZighbW91c2Upe1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGxldCBib3g6Y29sbGlzaW9uX2JveCA9IHtcbiAgICAgIHg6bW91c2UueCxcbiAgICAgIHk6bW91c2UueSxcbiAgICAgIGhlaWdodDoxLFxuICAgICAgd2lkdGg6MVxuICAgIH07XG4gICAgXG4gIGxldCBkOmJpbmRbXTtcbiAgaWYoREVCVUcpe1xuICAgIGlmKGRlYnVnX3N0YXRlLmxhc3RfY2xpY2tlZCAmJiBkZWJ1Z19zdGF0ZS5sYXN0X2NsaWNrZWQuaWQgPT0gXCJkZWJ1Z190YXJnZXRcIil7XG4gICAgICBkID0gWy4uLmRlYnVnX2JpbmRzXTtcbiAgICB9XG4gICAgZWxzZSBpZighUEFVU0VEICYmIGRlYnVnX3N0YXRlLmxhc3RfY2xpY2tlZCAmJiBkZWJ1Z19zdGF0ZS5sYXN0X2NsaWNrZWQuaWQgPT0gXCJ0YXJnZXRcIil7XG4gICAgICBkPSBbLi4uYWxsX2JpbmRzXVxuICAgIH1cbiAgICBlbHNle1xuICAgICAgZCA9IFtdO1xuICAgIH1cbiAgfVxuICBlbHNle1xuICAgIGQgPSBbLi4uYWxsX2JpbmRzXTtcbiAgfVxuICAgIGZvcihsZXQgYSA9IDA7YSA8IGQubGVuZ3RoO2ErKyl7XG4gICAgICBsZXQgc2VsZWN0ZWQgPSBkW2FdO1xuICAgICAgaWYoc2VsZWN0ZWQudHlwZSA9PT0gYnR5cGUubW91c2UgJiYgc2VsZWN0ZWQua2V5ID09PSBcIm1vdXNlMVwiICYmIHNlbGVjdGVkLmV4ZWN1dGUgPT0gZXhlY190eXBlLm9uY2Upe1xuICAgICAgICBpZihzZWxlY3RlZC5vYmogIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgaWYoc2VsZWN0ZWQub2JqLmNvbGxpZGVzV2l0aEJveChib3gpKXtcbiAgICAgICAgICAgIHNlbGVjdGVkLmZ1bmN0aW9uKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgc2VsZWN0ZWQuZnVuY3Rpb24oKTsgICAgICAgIFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAgXG4gIH0pXG59XG4qL1xuXG5leHBvcnQgZnVuY3Rpb24gd2l0aGluX0NhbnZhcyhjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XG4gIGxldCB3cmF0aW8gPSBwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGNhbnZhcykud2lkdGgpIC8gR2V0Vmlld3BvcnREaW1lbnNpb25zKCkud2lkdGg7XG4gIGxldCB2cmF0aW8gPSBwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGNhbnZhcykuaGVpZ2h0KSAvIEdldFZpZXdwb3J0RGltZW5zaW9ucygpLmhlaWdodDtcbiAgbGV0IGJvdW5kcyA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgaWYgKHggPiBib3VuZHMubGVmdCAmJiB4IDwgYm91bmRzLnJpZ2h0ICYmIHkgPCBib3VuZHMuYm90dG9tICYmIHkgPiBib3VuZHMudG9wKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5sZXQgYmluZGluZ19tYXA6IHtcbiAgW2luZGV4OiBzdHJpbmddOiBiaW5kW11cbn0gPSB7fTtcblxubGV0IHByZXNzQmluZCA9IChrZXk6IHN0cmluZyxodWRfbGF5ZXIgPSBmYWxzZSkgPT4ge1xuICBsZXQgb25fbmFtZXM7XG4gIGxldCBvZmZfbmFtZXM7XG4gIGxldCBiYXNlO1xuICBsZXQgc2VsZWN0ZWRfYmluZF9tYXA7XG4gIGlmIChrZXkuc2xpY2UoLTQpID09PSBcImRvd25cIikge1xuICAgIGJhc2UgPSBrZXkuc3Vic3RyaW5nKDAsIGtleS5sZW5ndGggLSA0KTtcbiAgICBvbl9uYW1lcyA9IFtiYXNlLCBrZXldO1xuICAgIG9mZl9uYW1lcyA9IFtgJHtiYXNlfXVwYF07XG4gIH1cbiAgZWxzZSBpZiAoa2V5LnNsaWNlKC0yKSA9PT0gXCJ1cFwiKSB7XG4gICAgYmFzZSA9IGtleS5zdWJzdHJpbmcoMCwga2V5Lmxlbmd0aCAtIDIpO1xuICAgIG9uX25hbWVzID0gW2tleV07XG4gICAgb2ZmX25hbWVzID0gW2Ake2Jhc2V9ZG93bmAsIGJhc2VdO1xuICB9XG4gIGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBhY3RpdmF0ZSBpbnZhbGlkIGJpbmQuXCIpO1xuICB9XG4gIGNvbnN0IGNsaWNrZWRfb24gPSAodGFyZ2V0OnN0cmluZykgPT4gKGRlYnVnX3N0YXRlLmxhc3RfY2xpY2tlZCAmJiBkZWJ1Z19zdGF0ZS5sYXN0X2NsaWNrZWQuaWQgPT0gdGFyZ2V0KVxuICBjb25zdCB2YWxpZF9tb3VzZV9jbGljayA9IChiaW5kOmJpbmQsaW5kZXg6bnVtYmVyKSA9PiB7XG4gICAgcmV0dXJuIGJpbmQudHlwZSAhPSBidHlwZS5tb3VzZSB8fCAod2l0aGluX0NhbnZhcyhnLnN0YXRlLmNhbnZhc2VzW2luZGV4XSkgJiYgKGJpbmQub2JqID09IHVuZGVmaW5lZCB8fCAoYmluZC5vYmogJiYgYmluZC5vYmouaW5mby5vbl9odWRfbGF5ZXIgPT0gaHVkX2xheWVyKSkpXG4gIH07XG4gIGZvciAobGV0IGtleW5hbWUgb2Ygb25fbmFtZXMpIHtcbiAgICBpZiAoa2V5bmFtZSA9PSBiYXNlKSB7XG4gICAgICBoZWxkX2tleXNba2V5bmFtZV0gPSB0cnVlO1xuICAgIH1cbiAgICBsZXQgc2VsZWN0ZWRfYmluZHMgPSBiaW5kaW5nX21hcFtrZXluYW1lXTtcbiAgICBpZiAoc2VsZWN0ZWRfYmluZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZm9yIChsZXQgYmluZCBvZiBzZWxlY3RlZF9iaW5kcykge1xuICAgICAgICBpZihcbiAgICAgICAgICAoREVCVUcgJiYgYmluZC5kZWJ1ZyAmJiBjbGlja2VkX29uKFwiZGVidWdfdGFyZ2V0XCIpICYmIHZhbGlkX21vdXNlX2NsaWNrKGJpbmQsMSkpXG4gICAgICAgICAgfHxcbiAgICAgICAgICAoREVCVUcgJiYgKCFQQVVTRUQgJiYgY2xpY2tlZF9vbihcInRhcmdldFwiKSAmJiB2YWxpZF9tb3VzZV9jbGljayhiaW5kLDApKSlcbiAgICAgICAgICB8fFxuICAgICAgICAgICFERUJVRyAmJiB2YWxpZF9tb3VzZV9jbGljayhiaW5kLDApXG4gICAgICAgICl7XG4gICAgICAgICAgYmluZC5leGVjdXRlZCA9IHRydWU7XG4gICAgICAgICAgaWYgKGJpbmQuZXhlY3V0ZSA9PSBleGVjX3R5cGUucmVwZWF0KSB7XG4gICAgICAgICAgICBiaW5kLnJlcGVhdF90aW1lci5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJpbmQuZnVuY3Rpb24oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZm9yIChsZXQga2V5bmFtZSBvZiBvZmZfbmFtZXMpIHtcbiAgICBpZiAoa2V5bmFtZSA9PSBiYXNlKSB7XG4gICAgICBoZWxkX2tleXNba2V5bmFtZV0gPSBmYWxzZTtcbiAgICB9XG4gICAgbGV0IHNlbGVjdGVkX2JpbmRzID0gYmluZGluZ19tYXBba2V5bmFtZV07XG4gICAgaWYgKHNlbGVjdGVkX2JpbmRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGZvciAobGV0IGJpbmQgb2Ygc2VsZWN0ZWRfYmluZHMpIHtcbiAgICAgICAgYmluZC5leGVjdXRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAoYmluZC5leGVjdXRlID09IGV4ZWNfdHlwZS5yZXBlYXQpIHtcbiAgICAgICAgICBiaW5kLnJlcGVhdF90aW1lci5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgZm9yIChsZXQgcmVwZWF0X2JpbmQgb2YgcmVwZWF0X2JpbmRzKSB7XG4gICAgbGV0IGJpbmQgPSByZXBlYXRfYmluZC5iaW5kO1xuICAgIGlmIChvbl9uYW1lcy5pbmNsdWRlcyhyZXBlYXRfYmluZC5iaW5kLmtleSkpIHtcbiAgICAgIGlmKFxuICAgICAgICAoREVCVUcgJiYgYmluZC5kZWJ1ZyAmJiBjbGlja2VkX29uKFwiZGVidWdfdGFyZ2V0XCIpICYmIHZhbGlkX21vdXNlX2NsaWNrKGJpbmQsMSkpXG4gICAgICAgIHx8XG4gICAgICAgIChERUJVRyAmJiAoIVBBVVNFRCAmJiBjbGlja2VkX29uKFwidGFyZ2V0XCIpICYmIHZhbGlkX21vdXNlX2NsaWNrKGJpbmQsMCkpKVxuICAgICAgICB8fFxuICAgICAgICAhREVCVUcgJiYgdmFsaWRfbW91c2VfY2xpY2soYmluZCwwKVxuICAgICAgKXtcbiAgICAgICAgcmVwZWF0X2JpbmQuYWN0aXZlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAob2ZmX25hbWVzLmluY2x1ZGVzKHJlcGVhdF9iaW5kLmJpbmQua2V5KSkge1xuICAgICAgcmVwZWF0X2JpbmQuYWN0aXZlID0gZmFsc2U7XG4gICAgfVxuICB9XG59XG5cblxubGV0IHhib3hfa2V5ID0gW1wiQVwiLCBcIkJcIiwgXCJYXCIsIFwiWVwiLCBcIkxCXCIsIFwiUkJcIiwgXCJMVFwiLCBcIlJUXCIsIFwiQmFja1wiLCBcIlNlbGVjdFwiLCBcIlRodW1iTGVmdERvd25cIiwgXCJUaHVtYlJpZ2h0RG93blwiLCBcIlBhZFVwXCIsIFwiUGFkRG93blwiLCBcIlBhZExlZnRcIiwgXCJQYWRSaWdodFwiLCBcIlN0YXJ0XCJdO1xubGV0IHhib3hfa2V5c19zdGF0ZTogQXJyYXk8e1xuICBrZXk6IHN0cmluZyxcbiAgbGFzdF9zdGF0ZTogbnVtYmVyXG59PiA9IFtdXG54Ym94X2tleS5mb3JFYWNoKChrZXkpID0+IHtcbiAgeGJveF9rZXlzX3N0YXRlLnB1c2goe1xuICAgIGtleSxcbiAgICBsYXN0X3N0YXRlOiAwXG4gIH0pXG59KVxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUdhbWVwYWQoZ2FtZXBhZDogR2FtZXBhZCkge1xuICBpZihiaW5kaW5nX21hcFtcIkdhbWVwYWRMZWZ0VGh1bWJcIl0gIT0gdW5kZWZpbmVkKXtcbiAgICBmb3IobGV0IGJpbmQgb2YgYmluZGluZ19tYXBbXCJHYW1lcGFkTGVmdFRodW1iXCJdKXtcbiAgICAgIGJpbmQuZnVuY3Rpb24oZ2FtZXBhZC5heGVzWzBdLCBnYW1lcGFkLmF4ZXNbMV0gKiAtMSlcbiAgICB9XG4gIH1cbiAgaWYoYmluZGluZ19tYXBbXCJHYW1lcGFkUmlnaHRUaHVtYlwiXSAhPSB1bmRlZmluZWQpe1xuICAgIGZvcihsZXQgYmluZCBvZiBiaW5kaW5nX21hcFtcIkdhbWVwYWRSaWdodFRodW1iXCJdKXtcbiAgICAgIGJpbmQuZnVuY3Rpb24oZ2FtZXBhZC5heGVzWzJdLCBnYW1lcGFkLmF4ZXNbM10gKiAtMSlcbiAgICB9XG4gIH1cbiAgZm9yIChsZXQgW2ksIGJ1dHRvbl0gb2YgZ2FtZXBhZC5idXR0b25zLmVudHJpZXMoKSkge1xuICAgIGxldCBidXR0b25fZW50cnkgPSB4Ym94X2tleXNfc3RhdGVbaV07XG4gICAgaWYgKGJ1dHRvbi52YWx1ZSA+IDAgJiYgYnV0dG9uX2VudHJ5Lmxhc3Rfc3RhdGUgPT0gMCkge1xuICAgICAgLy9CdXR0b24gRG93blxuICAgICAgcHJlc3NCaW5kKGBHYW1lcGFkJHtidXR0b25fZW50cnkua2V5fWRvd25gKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYnV0dG9uLnZhbHVlID09IDAgJiYgeGJveF9rZXlzX3N0YXRlW2ldLmxhc3Rfc3RhdGUgPiAwKSB7XG4gICAgICBwcmVzc0JpbmQoYEdhbWVwYWQke2J1dHRvbl9lbnRyeS5rZXl9dXBgKTtcbiAgICB9XG4gICAgYnV0dG9uX2VudHJ5Lmxhc3Rfc3RhdGUgPSBidXR0b24udmFsdWU7XG4gIH1cbn1cblxubGV0IHdhc192YWxpZDogYm9vbGVhbiA9IGZhbHNlO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGxldCBodWRfY2xpY2tlZCA9IGZhbHNlO1xuICBmb3IobGV0IGNhbWVyYSBvZiBnLmdldFJvb20oKS5jYW1lcmFzKXtcbiAgICBsZXQgbW91c2UgPSBQb2xsX01vdXNlKGNhbWVyYSx0cnVlKTtcbiAgICBpZihtb3VzZSAmJiBjYW1lcmEuaHVkKXtcbiAgICAgIGZvcihsZXQgb2JqIG9mIGNhbWVyYS5odWQuZ3JhcGhpY19lbGVtZW50cy5maWx0ZXIoKG9iaik9Pm9iai5odWRfY2xpY2thYmxlKSl7XG4gICAgICAgIGlmKG9iai5jb2xsaWRlc1dpdGhCb3goe3g6bW91c2UueCx5Om1vdXNlLnksd2lkdGg6MCxoZWlnaHQ6MH0pKXtcbiAgICAgICAgICBwcmVzc0JpbmQoXCJtb3VzZVwiICsgZS5idXR0b24gKyBcImRvd25cIix0cnVlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcHJlc3NCaW5kKFwibW91c2VcIiArIGUuYnV0dG9uICsgXCJkb3duXCIpO1xufSlcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIChlKSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgcHJlc3NCaW5kKGBtb3VzZSR7ZS5idXR0b259dXBgKVxufSlcblxuaW50ZXJmYWNlIGhlbGRfa2V5cyB7XG4gIFtpbmRleDogc3RyaW5nXTogYm9vbGVhblxufVxuXG5leHBvcnQgbGV0IGhlbGRfa2V5czogaGVsZF9rZXlzID0ge307XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgKGUpID0+IHtcbiAgbGV0IGNvZGU6IHN0cmluZztcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBpZiAoZS5kZWx0YVkgPCAwKSB7XG4gICAgY29kZSA9IFwic2Nyb2xsdXBcIjtcbiAgfVxuICBlbHNlIGlmIChlLmRlbHRhWSA+IDApIHtcbiAgICBjb2RlID0gXCJzY3JvbGxkb3duXCI7XG4gIH1cbiAgcHJlc3NCaW5kKGNvZGUpO1xufSlcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG5cbiAgaWYgKGUuY29kZSA9PSBcIlRhYlwiKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG4gIHByZXNzQmluZChgJHtlLmNvZGV9ZG93bmApO1xuXG59KVxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCAoZSkgPT4ge1xuICBwcmVzc0JpbmQoYCR7ZS5jb2RlfXVwYCk7XG59KVxubGV0IHRyYWNrZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhcmdldFwiKTtcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIChlKSA9PiB7XG4gIHZhciByZWN0ID0gKGUudGFyZ2V0IGFzIEhUTUxDYW52YXNFbGVtZW50KS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgLy9jb25zb2xlLmxvZyhlLnRhcmdldClcbiAgbGFzdF94ID0geDtcbiAgbGFzdF95ID0geTtcbiAgeCA9IGUuY2xpZW50WDsgLy94IHBvc2l0aW9uIHdpdGhpbiB0aGUgZWxlbWVudC5cbiAgeSA9IGUuY2xpZW50WTsgIC8veSBwb3NpdGlvbiB3aXRoaW4gdGhlIGVsZW1lbnQuXG5cbn0pXG5cbmV4cG9ydCBmdW5jdGlvbiBQb2xsX01vdXNlKGNhbWVyYTogQ2FtZXJhLCBodWRfbGF5ZXI6Ym9vbGVhbiA9IGZhbHNlLCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50ID0gZy5zdGF0ZS5jYW52YXNlc1swXSk6IFZlY3RvciB7XG4gIGxldCBoZWlnaHQgPSBHZXRWaWV3cG9ydERpbWVuc2lvbnMoKS5oZWlnaHQ7XG4gIGxldCB3cmF0aW8gPSBwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGNhbnZhcykud2lkdGgpIC8gR2V0Vmlld3BvcnREaW1lbnNpb25zKCkud2lkdGg7XG4gIGxldCB2cmF0aW8gPSBwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGNhbnZhcykuaGVpZ2h0KSAvIEdldFZpZXdwb3J0RGltZW5zaW9ucygpLmhlaWdodDtcbiAgbGV0IGJvdW5kcyA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgaWYgKHggPiBib3VuZHMubGVmdCAmJiB4IDwgYm91bmRzLnJpZ2h0ICYmIHkgPCBib3VuZHMuYm90dG9tICYmIHkgPiBib3VuZHMudG9wKSB7XG4gICAgXG4gICAgaWYoaHVkX2xheWVyKXtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHg6ICh4IC0gYm91bmRzLmxlZnQpIC8gd3JhdGlvLFxuICAgICAgICB5OiAoKGhlaWdodCAtICh5IC0gYm91bmRzLnRvcCkgLyB2cmF0aW8pIC0gY2FtZXJhLnN0YXRlLnZpZXdwb3J0LnkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAoe1xuICAgICAgeDogKCh4IC0gYm91bmRzLmxlZnQgLSBjYW1lcmEuc3RhdGUudmlld3BvcnQueCkgLyB3cmF0aW8gLyBjYW1lcmEuc3RhdGUuc2NhbGluZyArIGNhbWVyYS5zdGF0ZS5wb3NpdGlvbi54IC0gY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMud2lkdGggLyBjYW1lcmEuc3RhdGUuc2NhbGluZyAvIDIpLFxuICAgICAgeTogKChoZWlnaHQgLSAoeSAtIGJvdW5kcy50b3ApIC8gdnJhdGlvKSAvIGNhbWVyYS5zdGF0ZS5zY2FsaW5nICsgY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnkgLSBjYW1lcmEuc3RhdGUuZGltZW5zaW9ucy5oZWlnaHQgLyBjYW1lcmEuc3RhdGUuc2NhbGluZyAvIDIgLSBjYW1lcmEuc3RhdGUudmlld3BvcnQueSlcbiAgICB9KVxuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBFeGVjdXRlUmVwZWF0QmluZHMoYjogbnVtYmVyKSB7XG4gIGZvciAobGV0IGEgb2YgcmVwZWF0X2JpbmRzKSB7XG4gICAgaWYgKGEuYmluZC5leGVjdXRlID09PSBleGVjX3R5cGUucmVwZWF0ICYmIGEudGltZXIgPT0gMCAmJiBhLmFjdGl2ZSkge1xuICAgICAgYS5iaW5kLmZ1bmN0aW9uKCk7XG4gICAgfVxuICAgIGlmIChhLmFjdGl2ZSB8fCAoIWEuYWN0aXZlICYmIGEudGltZXIgIT0gMCkpXG4gICAgICBhLnRpbWVyICs9IGI7XG4gICAgaWYgKGEudGltZXIgPiBhLmludGVydmFsKSB7XG4gICAgICBhLnRpbWVyID0gMDtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFVuYmluZChiaW5kX2lkOiBudW1iZXIpIHtcbiAgZm9yKGxldCBrZXkgb2YgT2JqZWN0LmtleXMoYmluZGluZ19tYXApKXtcbiAgICBmb3IobGV0IGEgPSAwOyBhIDwgYmluZGluZ19tYXBba2V5XS5sZW5ndGg7IGErKyl7XG4gICAgICBpZihiaW5kaW5nX21hcFtrZXldW2FdLmlkID09IGJpbmRfaWQpe1xuICAgICAgICBiaW5kaW5nX21hcFtrZXldLnNwbGljZShhLDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZm9yIChsZXQgYSA9IDA7IGEgPCByZXBlYXRfYmluZHMubGVuZ3RoOyBhKyspIHtcbiAgICBpZiAocmVwZWF0X2JpbmRzW2FdLmJpbmQuaWQgPT0gYmluZF9pZCkge1xuICAgICAgcmVwZWF0X2JpbmRzLnNwbGljZShhLCAxKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gQmluZChrZXluYW1lOiBzdHJpbmcsIGZ1bmM6IGNvbnRyb2xfZnVuYywgdHlwZTogZXhlY190eXBlLCBpbnRlcnZhbDogbnVtYmVyLCBkZWJ1ZzogYm9vbGVhbiwgb2JqPzogb2JqKTogbnVtYmVyIHtcbiAgbGV0IGJpbmRfdHlwZSA9IGJ0eXBlLmtleWJvYXJkO1xuICBpZiAoa2V5bmFtZS5zbGljZSgwLCA1KSA9PT0gXCJtb3VzZVwiIHx8IGtleW5hbWUuc2xpY2UoMCwgNikgPT09IFwic2Nyb2xsXCIpIHtcbiAgICBiaW5kX3R5cGUgPSBidHlwZS5tb3VzZVxuICB9XG4gIGVsc2UgaWYgKGtleW5hbWUuc2xpY2UoMCwgNykgPT0gXCJHYW1lcGFkXCIpIHtcbiAgICBiaW5kX3R5cGUgPSBidHlwZS5nYW1lcGFkO1xuICB9XG4gIGxldCBiOiBiaW5kID0ge1xuICAgIGtleToga2V5bmFtZSxcbiAgICB0eXBlOiBiaW5kX3R5cGUsXG4gICAgZGVidWcsXG4gICAgaWQsXG4gICAgZnVuY3Rpb246IGZ1bmMsXG4gICAgZXhlY3V0ZTogdHlwZSxcbiAgICBleGVjdXRlZDogZmFsc2UsXG4gICAgaW50ZXJ2YWwsXG4gICAgb2JqIFxuICB9XG4gIGlmICh0eXBlID09IGV4ZWNfdHlwZS5yZXBlYXQpIHtcbiAgICBiLnJlcGVhdF90aW1lciA9IHtcbiAgICAgIGJpbmQ6IGIsXG4gICAgICB0aW1lcjogMCxcbiAgICAgIGludGVydmFsLFxuICAgICAgYWN0aXZlOiBmYWxzZVxuICAgIH1cbiAgICByZXBlYXRfYmluZHMucHVzaChiLnJlcGVhdF90aW1lcik7XG4gIH1cbiAgaWYgKGJpbmRpbmdfbWFwW2tleW5hbWVdID09IHVuZGVmaW5lZCkge1xuICAgIGJpbmRpbmdfbWFwW2tleW5hbWVdID0gW107XG4gICAgXG4gIH1cbiAgYmluZGluZ19tYXBba2V5bmFtZV0ucHVzaChiKTtcbiAgaWQrKztcbiAgcmV0dXJuIGlkIC0gMTtcbn0iLCJpbXBvcnQgeyBERUJVRywgUEFVU0VELCBzZXRQYXVzZWQsIHZpZXdwb3J0IH0gZnJvbSBcIi4uL3ZhblwiO1xuZXhwb3J0IGxldCBwYXRoOmFueTsgXG5sZXQgZnM6YW55O1xubGV0IGlwY1JlbmRlcmVyOmFueTtcbmltcG9ydCB7IHByZWZhYnMgfSBmcm9tIFwiLi4vZ2FtZS9vYmplY3RzL3ByZWZhYnNcIjtcbmV4cG9ydCBsZXQgcHJvamVjdF9wYXRoID0gXCJcIjtcbmV4cG9ydCBsZXQgcm9vdF9wYXRoID0gXCJcIjtcbmV4cG9ydCBsZXQgcmVuZGVyZXJfcGF0aCA9IFwiLi9yZW5kZXJlci5qc1wiO1xuaWYoREVCVUcpe1xuIHBhdGggPSAgd2luZG93LnJlcXVpcmUoXCJwYXRoXCIpO1xuIGZzID0gd2luZG93LnJlcXVpcmUoXCJmc1wiKTtcbiBpcGNSZW5kZXJlciAgPSB3aW5kb3cucmVxdWlyZShcImVsZWN0cm9uXCIpLmlwY1JlbmRlcmVyO1xuIHByb2plY3RfcGF0aCA9IGlwY1JlbmRlcmVyLnNlbmRTeW5jKCdwYXRoLXJlcXVlc3QnLCAncGluZycpWzBdXG4gcm9vdF9wYXRoID0gcGF0aC5qb2luKHByb2plY3RfcGF0aCxcIi4uXCIpXG4gcmVuZGVyZXJfcGF0aCA9IHBhdGguam9pbihyb290X3BhdGgsXCIuLi8uLi90YXJnZXQvcmVuZGVyZXIuanNcIik7XG5cbn1cbmltcG9ydCB7IG9iaiwgcGFyYW1zIH0gZnJvbSBcIi4vb2JqZWN0XCI7XG5pbXBvcnQgeyBvYmpfc3RhdGUgfSBmcm9tIFwiLi9zdGF0ZVwiO1xuaW1wb3J0IHtvYmplY3RfdGVtcGxhdGV9IGZyb20gXCIuL3RlbXBsYXRlcy9vYmplY3RfdGVtcGxhdGVcIjtcbmltcG9ydCB7cm9vbV90ZW1wbGF0ZX0gZnJvbSBcIi4vdGVtcGxhdGVzL3Jvb21fdGVtcGxhdGVcIjtcbmltcG9ydCB7IGcgfSBmcm9tIFwiLi4vZ2FtZS9tYWluXCI7XG5pbXBvcnQgeyByb29tcyBhcyByb29tX2xpc3QgfSBmcm9tIFwiLi4vZ2FtZS9yb29tcy9yb29tc1wiO1xuaW1wb3J0IHsgQmluZCwgYnR5cGUsIFBvbGxfTW91c2UsIGV4ZWNfdHlwZSwgaGVsZF9rZXlzLCBkZWJ1Z19iaW5kcyB9IGZyb20gXCIuLi9saWIvY29udHJvbHNcIjtcbmltcG9ydCB7IEhVRCwgVGV4dCB9IGZyb20gXCIuLi9saWIvaHVkXCI7XG5pbXBvcnQgeyBDYW1lcmEgfSBmcm9tIFwiLi4vbGliL3JlbmRlclwiO1xuaW1wb3J0IHsgVmVjdG9yLCBkaW1lbnNpb25zfSBmcm9tIFwiLi4vbGliL3N0YXRlXCI7XG5cbmV4cG9ydCBjbGFzcyBEZWJ1Z19odWQgZXh0ZW5kcyBIVUQge1xuICBzZXRUZXh0RWxlbWVudHMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIG5ldyBUZXh0KHtcbiAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICB4OiAxMCxcbiAgICAgICAgICB5OiB2aWV3cG9ydC5oZWlnaHQgLSAyNFxuICAgICAgICB9LFxuICAgICAgICBzaXplOiAyMixcbiAgICAgICAgZm9udDogXCJBbGF0YVwiLFxuICAgICAgICBjb2xvcjogXCJ3aGl0ZVwiLFxuICAgICAgICBhbGlnbjogXCJsZWZ0XCIsXG4gICAgICAgIHNjYWxpbmc6IDFcbiAgICAgIH0sICgpID0+IGRlYnVnX3N0YXRlLnJlbmRlcl9kZWx0YV90aW1lID4gMCA/IE1hdGgucm91bmQoMTAwMC9kZWJ1Z19zdGF0ZS5yZW5kZXJfZGVsdGFfdGltZSkgKyBcIlwiIDogXCJcIiksXG4gICAgICBuZXcgVGV4dCh7XG4gICAgICBwb3NpdGlvbjoge1xuICAgICAgICB4OiAxMCxcbiAgICAgICAgeTogMTBcbiAgICAgIH0sXG4gICAgICBzaXplOiAyMixcbiAgICAgIGZvbnQ6IFwiQWxhdGFcIixcbiAgICAgIGNvbG9yOiBcIndoaXRlXCIsXG4gICAgICBhbGlnbjogXCJsZWZ0XCIsXG4gICAgICBzY2FsaW5nOiAxXG4gICAgfSwgKCkgPT4gYFg6JHtkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUucG9zaXRpb24ueC50b0ZpeGVkKDApfWApLFxuICAgIG5ldyBUZXh0KHtcbiAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgIHg6IDEwLFxuICAgICAgICB5OiAzMlxuICAgICAgfSxcbiAgICAgIHNpemU6IDIyLFxuICAgICAgZm9udDogXCJBbGF0YVwiLFxuICAgICAgY29sb3I6IFwid2hpdGVcIixcbiAgICAgIGFsaWduOiBcImxlZnRcIixcbiAgICAgIHNjYWxpbmc6IDFcbiAgICB9LCAoKSA9PiBgWToke2RlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5wb3NpdGlvbi55LnRvRml4ZWQoMCl9YCksXG4gICAgbmV3IFRleHQoe1xuICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgeDogdmlld3BvcnQud2lkdGggLSAxMCxcbiAgICAgICAgeTogMzJcbiAgICAgIH0sXG4gICAgICBzaXplOiAyMixcbiAgICAgIGZvbnQ6IFwiQWxhdGFcIixcbiAgICAgIGNvbG9yOiBcIndoaXRlXCIsXG4gICAgICBhbGlnbjogXCJyaWdodFwiLFxuICAgICAgc2NhbGluZzogMVxuICAgIH0sICgpID0+IHtcbiAgICAgIGxldCBtb3VzZSA9IFBvbGxfTW91c2UoZGVidWdfc3RhdGUuY2FtZXJhLGZhbHNlLGRlYnVnX3N0YXRlLnRhcmdldCk7XG4gICAgICBpZihtb3VzZSl7XG4gICAgICAgIHJldHVybiBgJHttb3VzZS54LnRvRml4ZWQoMCl9OlhgXG4gICAgICB9XG4gICAgICByZXR1cm4gYDpYYFxuICAgIH0pLFxuICAgIG5ldyBUZXh0KHtcbiAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgIHg6IHZpZXdwb3J0LndpZHRoIC0gMTAsXG4gICAgICAgIHk6IDEwXG4gICAgICB9LFxuICAgICAgc2l6ZTogMjIsXG4gICAgICBmb250OiBcIkFsYXRhXCIsXG4gICAgICBjb2xvcjogXCJ3aGl0ZVwiLFxuICAgICAgYWxpZ246IFwicmlnaHRcIixcbiAgICAgIHNjYWxpbmc6IDFcbiAgICB9LCAoKSA9PiB7XG4gICAgICBsZXQgbW91c2UgPSBQb2xsX01vdXNlKGRlYnVnX3N0YXRlLmNhbWVyYSxmYWxzZSxkZWJ1Z19zdGF0ZS50YXJnZXQpO1xuICAgICAgaWYobW91c2Upe1xuICAgICAgICByZXR1cm4gYCR7bW91c2UueS50b0ZpeGVkKDApfTpZYFxuICAgICAgfVxuICAgICAgcmV0dXJuIGA6WWBcbiAgICB9KSxcbiAgICBuZXcgVGV4dCh7XG4gICAgICBwb3NpdGlvbjoge1xuICAgICAgICB4OiB2aWV3cG9ydC53aWR0aCAtIDEwLFxuICAgICAgICB5OiB2aWV3cG9ydC5oZWlnaHQgLSAyNFxuICAgICAgfSxcbiAgICAgIHNpemU6IDIyLFxuICAgICAgZm9udDogXCJBbGF0YVwiLFxuICAgICAgY29sb3I6IFwid2hpdGVcIixcbiAgICAgIGFsaWduOiBcInJpZ2h0XCIsXG4gICAgICBzY2FsaW5nOiAxXG4gICAgfSwgKCkgPT4ge1xuICAgICAgcmV0dXJuIGAke2cuc3RhdGUuY3VycmVudF9yb29tLmNvbnN0cnVjdG9yLm5hbWV9LnRzYFxuICAgIH0pXG4gICAgXTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVidWdfc3RhdGVmKHQ6IG51bWJlcikge1xuICBsZXQgbW91c2UgPSBQb2xsX01vdXNlKGRlYnVnX3N0YXRlLmNhbWVyYSwgZmFsc2UsIGRlYnVnX3N0YXRlLnRhcmdldCk7XG4gIGlmIChkZWJ1Z19zdGF0ZS5jYW1lcmEuaHVkKSB7XG4gICAgZGVidWdfc3RhdGUuY2FtZXJhLmh1ZC5zdGF0ZWYodCk7XG4gIH1cbiAgaWYgKCFQQVVTRUQpIHtcbiAgICBkZWJ1Z191cGRhdGVfcHJvcGVydGllc19lbGVtZW50KCk7XG4gIH1cbiAgaWYobW91c2Upe1xuICAgIGlmIChkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9lbGVtZW50KSB7XG4gICAgICBpZiAoUEFVU0VEICYmIGhlbGRfa2V5c1tcIkNvbnRyb2xMZWZ0XCJdICYmIGRlYnVnX3N0YXRlLmN1cnJlbnRfYWN0aW9uLnByb3BlcnR5ID09IFwic2NhbGluZ1wiKSB7XG4gICAgICAgIGxldCBkaXN0ID0ge1xuICAgICAgICAgIHg6IE1hdGguYWJzKG1vdXNlLnggLSBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9lbGVtZW50LnN0YXRlLnBvc2l0aW9uLngpLFxuICAgICAgICAgIHk6IE1hdGguYWJzKG1vdXNlLnkgLSBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9lbGVtZW50LnN0YXRlLnBvc2l0aW9uLnkpXG4gICAgICAgIH1cbiAgICAgICAgZGVidWdfc3RhdGUuc2VsZWN0ZWRfZWxlbWVudC5zdGF0ZS5zY2FsaW5nLndpZHRoID0gKDIgKiBkaXN0LngpIC8gZGVidWdfc3RhdGUuc2VsZWN0ZWRfZWxlbWVudC53aWR0aDtcbiAgICAgICAgZGVidWdfc3RhdGUuc2VsZWN0ZWRfZWxlbWVudC5zdGF0ZS5zY2FsaW5nLmhlaWdodCA9ICgyICogZGlzdC55KSAvIGRlYnVnX3N0YXRlLnNlbGVjdGVkX2VsZW1lbnQuaGVpZ2h0O1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGxldCBzdCA9IGRlYnVnX3N0YXRlLnNlbGVjdGVkX2VsZW1lbnQuc3RhdGU7XG4gICAgICAgIHN0LnBvc2l0aW9uLnggPSBtb3VzZS54IC0gZGVidWdfc3RhdGUuc2VsZWN0ZWRfZWxlbWVudF9vZmZzZXQueCxcbiAgICAgICAgc3QucG9zaXRpb24ueSA9IG1vdXNlLnkgLSBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9lbGVtZW50X29mZnNldC55XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChQQVVTRUQgJiYgZGVidWdfc3RhdGUucm90YXRpb25fZWxlbWVudCkge1xuICAgICAgZGVidWdfc3RhdGUucm90YXRpb25fZWxlbWVudC5zdGF0ZS5yb3RhdGlvbiA9IGRlYnVnX3N0YXRlLnJvdGF0aW9uX2VsZW1lbnQuYW5nbGVUb3dhcmRzUG9pbnQobW91c2UpO1xuICAgIH1cbiAgICBpZiAoZGVidWdfc3RhdGUubWlkZGxlX3Bvc2l0aW9uKSB7XG4gICAgICBsZXQgZGlmZl95ID0gbW91c2UueSAtIGRlYnVnX3N0YXRlLm1pZGRsZV9wb3NpdGlvbi55O1xuICAgICAgbGV0IGRpZmZfeCA9IG1vdXNlLnggLSBkZWJ1Z19zdGF0ZS5taWRkbGVfcG9zaXRpb24ueDtcbiAgICAgIGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5wb3NpdGlvbi54ID0gZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnggKyAtMSAqIGRpZmZfeDtcbiAgICAgIGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5wb3NpdGlvbi55ID0gZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnkgKyAtMSAqIGRpZmZfeTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYnVnX3VwZGF0ZV9yb29tX2xpc3QoKSB7XG4gIGxldCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyb29tX2xpc3RcIik7XG4gIGxpc3QudGV4dENvbnRlbnQgPSAnJztcbiAgZm9yIChsZXQgcm9vbV9uYW1lIG9mIE9iamVjdC5rZXlzKHJvb21fbGlzdCkpIHtcbiAgICBsZXQgcGFyYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIHBhcmEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocm9vbV9uYW1lKSk7XG4gICAgcGFyYS5jbGFzc0xpc3QuYWRkKFwicm9vbV9saXN0X2l0ZW1cIik7XG4gICAgcGFyYS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGcubG9hZFJvb21TdHJpbmcocm9vbV9uYW1lKTtcbiAgICB9KVxuICAgIGxpc3QuYXBwZW5kQ2hpbGQocGFyYSk7XG4gIH1cbn1cblxuaW50ZXJmYWNlIHByb3BlcnRpZXNfZWxlbWVudCB7XG4gIHBvc194OiBIVE1MSW5wdXRFbGVtZW50LFxuICBwb3NfeTogSFRNTElucHV0RWxlbWVudCxcbiAgdmVsX3g6IEhUTUxJbnB1dEVsZW1lbnQsXG4gIHZlbF95OiBIVE1MSW5wdXRFbGVtZW50LFxuICByb3Q6IEhUTUxJbnB1dEVsZW1lbnQsXG4gIHNjYV94OiBIVE1MSW5wdXRFbGVtZW50LFxuICBzY2FfeTogSFRNTElucHV0RWxlbWVudCxcbiAgcmVuZGVyOiBIVE1MSW5wdXRFbGVtZW50LFxuICBjb2xsaXNpb246IEhUTUxJbnB1dEVsZW1lbnQsXG4gIHRhZ3M6SFRNTElucHV0RWxlbWVudCxcbiAgbGF5ZXI6SFRNTElucHV0RWxlbWVudFxufVxubGV0IHByb3BlcnRpZXNfZWxlbWVudHM6IHByb3BlcnRpZXNfZWxlbWVudCA9IHVuZGVmaW5lZDtcbmlmIChERUJVRykge1xuICBwcm9wZXJ0aWVzX2VsZW1lbnRzID0ge1xuICAgIHBvc194OiAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3NfeFwiKSksXG4gICAgcG9zX3k6ICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvc195XCIpKSxcbiAgICB2ZWxfeDogKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmVsX3hcIikpLFxuICAgIHZlbF95OiAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2ZWxfeVwiKSksXG4gICAgcm90OiAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyb3RcIikpLFxuICAgIHNjYV94OiAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzY2FfeFwiKSksXG4gICAgc2NhX3k6ICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjYV95XCIpKSxcbiAgICByZW5kZXI6ICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlbmRlclwiKSksXG4gICAgY29sbGlzaW9uOiAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb2xsaXNpb25cIikpLFxuICAgIHRhZ3M6ICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhZ3NcIikpLFxuICAgIGxheWVyOig8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxheWVyXCIpKVxuICB9XG5cbiAgbGV0IGlucHV0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIik7XG4gIGZvciAobGV0IGEgPSAwOyBhIDwgaW5wdXRzLmxlbmd0aDsgYSsrKSB7XG4gICAgaW5wdXRzW2FdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgKDxIVE1MRWxlbWVudD5pbnB1dHNbYV0pLmZvY3VzKCk7XG4gICAgfSlcbiAgfVxuICBsZXQgZm9jdXNlZDtcbiAgbGV0IGRlYnVnX3RhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVidWdfdGFyZ2V0XCIpXG4gIGRlYnVnX3RhcmdldC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBmb3IgKGxldCBhID0gMDsgYSA8IGlucHV0cy5sZW5ndGg7IGErKykge1xuICAgICAgaW5wdXRzW2FdLmJsdXIoKTtcbiAgICB9XG4gIH0pXG4gIGxldCB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhcmdldFwiKTtcbiAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGZvciAobGV0IGEgPSAwOyBhIDwgaW5wdXRzLmxlbmd0aDsgYSsrKSB7XG4gICAgICBpbnB1dHNbYV0uYmx1cigpO1xuICAgIH1cbiAgfSlcbiAgcHJvcGVydGllc19lbGVtZW50cy5wb3NfeC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcblxuICAgIGxldCBlbGUgPSBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9wcm9wZXJ0aWVzX2VsZW1lbnQ7XG4gICAgbGV0IG5ld192YWwgPSBwYXJzZUZsb2F0KHByb3BlcnRpZXNfZWxlbWVudHMucG9zX3gudmFsdWUpIHx8IDA7XG4gICAgZGVidWdfc3RhdGUuYWN0aW9uc19zdGFjay5wdXNoKHtcbiAgICAgIHByb3BlcnR5OiBcInBvc2l0aW9uXCIsXG4gICAgICBlbGVtZW50OiBlbGUsXG4gICAgICBuZXc6IEpTT04uc3RyaW5naWZ5KHsgeDogbmV3X3ZhbCwgeTogZWxlLnN0YXRlLnBvc2l0aW9uLnkgfSksXG4gICAgICBvbGQ6IEpTT04uc3RyaW5naWZ5KGVsZS5zdGF0ZS5wb3NpdGlvbilcbiAgICB9KVxuICAgIGVsZS5zdGF0ZS5wb3NpdGlvbi54ID0gbmV3X3ZhbDtcbiAgfSlcbiAgcHJvcGVydGllc19lbGVtZW50cy5wb3NfeS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICBsZXQgZWxlID0gZGVidWdfc3RhdGUuc2VsZWN0ZWRfcHJvcGVydGllc19lbGVtZW50O1xuICAgIGxldCBuZXdfdmFsID0gcGFyc2VGbG9hdChwcm9wZXJ0aWVzX2VsZW1lbnRzLnBvc195LnZhbHVlKSB8fCAwO1xuICAgIGRlYnVnX3N0YXRlLmFjdGlvbnNfc3RhY2sucHVzaCh7XG4gICAgICBwcm9wZXJ0eTogXCJwb3NpdGlvblwiLFxuICAgICAgZWxlbWVudDogZWxlLFxuICAgICAgbmV3OiBKU09OLnN0cmluZ2lmeSh7IHg6IGVsZS5zdGF0ZS5wb3NpdGlvbi54LCB5OiBuZXdfdmFsIH0pLFxuICAgICAgb2xkOiBKU09OLnN0cmluZ2lmeShlbGUuc3RhdGUucG9zaXRpb24pXG4gICAgfSlcbiAgICBlbGUuc3RhdGUucG9zaXRpb24ueSA9IG5ld192YWw7XG4gIH0pXG4gIHByb3BlcnRpZXNfZWxlbWVudHMudmVsX3guYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgbGV0IGVsZSA9IGRlYnVnX3N0YXRlLnNlbGVjdGVkX3Byb3BlcnRpZXNfZWxlbWVudDtcbiAgICBlbGUuc3RhdGUudmVsb2NpdHkueCA9IHBhcnNlRmxvYXQocHJvcGVydGllc19lbGVtZW50cy52ZWxfeC52YWx1ZSkgfHwgMDtcbiAgfSlcbiAgcHJvcGVydGllc19lbGVtZW50cy52ZWxfeS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICBsZXQgZWxlID0gZGVidWdfc3RhdGUuc2VsZWN0ZWRfcHJvcGVydGllc19lbGVtZW50O1xuICAgIGVsZS5zdGF0ZS52ZWxvY2l0eS55ID0gcGFyc2VGbG9hdChwcm9wZXJ0aWVzX2VsZW1lbnRzLnZlbF95LnZhbHVlKSB8fCAwO1xuICB9KVxuICBwcm9wZXJ0aWVzX2VsZW1lbnRzLnJvdC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICBsZXQgZWxlID0gZGVidWdfc3RhdGUuc2VsZWN0ZWRfcHJvcGVydGllc19lbGVtZW50O1xuICAgIGxldCBuZXdfdmFsID0gcGFyc2VGbG9hdChwcm9wZXJ0aWVzX2VsZW1lbnRzLnJvdC52YWx1ZSkgfHwgMDtcbiAgICBkZWJ1Z19zdGF0ZS5hY3Rpb25zX3N0YWNrLnB1c2goe1xuICAgICAgcHJvcGVydHk6IFwicm90YXRpb25cIixcbiAgICAgIGVsZW1lbnQ6IGVsZSxcbiAgICAgIG5ldzogSlNPTi5zdHJpbmdpZnkobmV3X3ZhbCksXG4gICAgICBvbGQ6IEpTT04uc3RyaW5naWZ5KGVsZS5zdGF0ZS5yb3RhdGlvbilcbiAgICB9KVxuICAgIGVsZS5zdGF0ZS5yb3RhdGlvbiA9IG5ld192YWw7XG4gIH0pXG4gIHByb3BlcnRpZXNfZWxlbWVudHMuc2NhX3guYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgbGV0IGVsZSA9IGRlYnVnX3N0YXRlLnNlbGVjdGVkX3Byb3BlcnRpZXNfZWxlbWVudDtcbiAgICBsZXQgbmV3X3ZhbCA9IHBhcnNlRmxvYXQocHJvcGVydGllc19lbGVtZW50cy5zY2FfeC52YWx1ZSkgfHwgMDtcbiAgICBkZWJ1Z19zdGF0ZS5hY3Rpb25zX3N0YWNrLnB1c2goe1xuICAgICAgcHJvcGVydHk6IFwic2NhbGluZ1wiLFxuICAgICAgZWxlbWVudDogZWxlLFxuICAgICAgbmV3OiBKU09OLnN0cmluZ2lmeSh7IHdpZHRoOiBuZXdfdmFsLCBoZWlnaHQ6IGVsZS5zdGF0ZS5zY2FsaW5nLmhlaWdodCB9KSxcbiAgICAgIG9sZDogSlNPTi5zdHJpbmdpZnkoZWxlLnN0YXRlLnNjYWxpbmcpXG4gICAgfSlcbiAgICBlbGUuc3RhdGUuc2NhbGluZy53aWR0aCA9IG5ld192YWw7XG4gIH0pXG4gIHByb3BlcnRpZXNfZWxlbWVudHMuc2NhX3kuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgbGV0IGVsZSA9IGRlYnVnX3N0YXRlLnNlbGVjdGVkX3Byb3BlcnRpZXNfZWxlbWVudDtcbiAgICBsZXQgbmV3X3ZhbCA9IHBhcnNlRmxvYXQocHJvcGVydGllc19lbGVtZW50cy5zY2FfeS52YWx1ZSkgfHwgMDtcbiAgICBkZWJ1Z19zdGF0ZS5hY3Rpb25zX3N0YWNrLnB1c2goe1xuICAgICAgcHJvcGVydHk6IFwic2NhbGluZ1wiLFxuICAgICAgZWxlbWVudDogZWxlLFxuICAgICAgbmV3OiBKU09OLnN0cmluZ2lmeSh7IHdpZHRoOiBlbGUuc3RhdGUuc2NhbGluZy53aWR0aCwgaGVpZ2h0OiBuZXdfdmFsIH0pLFxuICAgICAgb2xkOiBKU09OLnN0cmluZ2lmeShlbGUuc3RhdGUuc2NhbGluZylcbiAgICB9KVxuICAgIGVsZS5zdGF0ZS5zY2FsaW5nLmhlaWdodCA9IG5ld192YWw7XG4gIH0pXG4gIHByb3BlcnRpZXNfZWxlbWVudHMucmVuZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgIGxldCBlbGUgPSBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9wcm9wZXJ0aWVzX2VsZW1lbnQ7XG4gICAgZWxlLnJlbmRlciA9IHByb3BlcnRpZXNfZWxlbWVudHMucmVuZGVyLmNoZWNrZWQ7XG4gIH0pXG4gIHByb3BlcnRpZXNfZWxlbWVudHMuY29sbGlzaW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgIGxldCBlbGUgPSBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9wcm9wZXJ0aWVzX2VsZW1lbnQ7XG4gICAgZWxlLmNvbGxpc2lvbiA9IHByb3BlcnRpZXNfZWxlbWVudHMuY29sbGlzaW9uLmNoZWNrZWQ7XG4gIH0pXG4gIHByb3BlcnRpZXNfZWxlbWVudHMudGFncy5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICBsZXQgZWxlID0gZGVidWdfc3RhdGUuc2VsZWN0ZWRfcHJvcGVydGllc19lbGVtZW50O1xuICAgIGVsZS50YWdzID0gbmV3IFNldChwcm9wZXJ0aWVzX2VsZW1lbnRzLnRhZ3MudmFsdWUuc3BsaXQoXCIsXCIpKTtcbiAgfSlcbiAgcHJvcGVydGllc19lbGVtZW50cy5sYXllci5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICBsZXQgZWxlID0gZGVidWdfc3RhdGUuc2VsZWN0ZWRfcHJvcGVydGllc19lbGVtZW50O1xuICAgIGVsZS5sYXllciA9IHBhcnNlSW50KHByb3BlcnRpZXNfZWxlbWVudHMubGF5ZXIudmFsdWUpO1xuICB9KVxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlbGV0ZV9lbGVtZW50XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGxldCBlbGUgPSBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9wcm9wZXJ0aWVzX2VsZW1lbnQ7XG4gICAgZWxlLmRlbGV0ZSgpO1xuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVidWdfdXBkYXRlX3Byb3BlcnRpZXNfZWxlbWVudCgpIHtcbiAgaWYgKGRlYnVnX3N0YXRlLnNlbGVjdGVkX3Byb3BlcnRpZXNfZWxlbWVudCkge1xuICAgIGxldCBlbGUgPSBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9wcm9wZXJ0aWVzX2VsZW1lbnQ7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvYmpfbmFtZVwiKS5pbm5lckhUTUwgPSBlbGUuY29uc3RydWN0b3IubmFtZTtcbiAgICBwcm9wZXJ0aWVzX2VsZW1lbnRzLnBvc194LnZhbHVlID0gXCJcIiArIGVsZS5zdGF0ZS5wb3NpdGlvbi54LnRvRml4ZWQoMik7XG4gICAgcHJvcGVydGllc19lbGVtZW50cy5wb3NfeS52YWx1ZSA9IFwiXCIgKyBlbGUuc3RhdGUucG9zaXRpb24ueS50b0ZpeGVkKDIpO1xuICAgIHByb3BlcnRpZXNfZWxlbWVudHMudmVsX3gudmFsdWUgPSBcIlwiICsgZWxlLnN0YXRlLnZlbG9jaXR5LngudG9GaXhlZCgyKTtcbiAgICBwcm9wZXJ0aWVzX2VsZW1lbnRzLnZlbF95LnZhbHVlID0gXCJcIiArIGVsZS5zdGF0ZS52ZWxvY2l0eS55LnRvRml4ZWQoMik7XG4gICAgcHJvcGVydGllc19lbGVtZW50cy5yb3QudmFsdWUgPSBcIlwiICsgZWxlLnN0YXRlLnJvdGF0aW9uLnRvRml4ZWQoMik7XG4gICAgcHJvcGVydGllc19lbGVtZW50cy5zY2FfeC52YWx1ZSA9IFwiXCIgKyBlbGUuc3RhdGUuc2NhbGluZy53aWR0aC50b0ZpeGVkKDIpO1xuICAgIHByb3BlcnRpZXNfZWxlbWVudHMuc2NhX3kudmFsdWUgPSBcIlwiICsgZWxlLnN0YXRlLnNjYWxpbmcuaGVpZ2h0LnRvRml4ZWQoMik7XG4gICAgcHJvcGVydGllc19lbGVtZW50cy50YWdzLnZhbHVlID0gXCJcIiArIEFycmF5LmZyb20oZWxlLnRhZ3MpLmpvaW4oXCIsXCIpO1xuICAgIHByb3BlcnRpZXNfZWxlbWVudHMucmVuZGVyLmNoZWNrZWQgPSBlbGUucmVuZGVyO1xuICAgIHByb3BlcnRpZXNfZWxlbWVudHMuY29sbGlzaW9uLmNoZWNrZWQgPSBlbGUuY29sbGlzaW9uO1xuICAgIHByb3BlcnRpZXNfZWxlbWVudHMubGF5ZXIudmFsdWUgPSBcIlwiICsgZWxlLmxheWVyO1xuICAgIGxldCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXJhbXNfbGlzdFwiKTtcbiAgICBsaXN0LnRleHRDb250ZW50ID0gJyc7XG4gICAgZm9yIChsZXQgayBvZiBPYmplY3Qua2V5cyhlbGUucGFyYW1zKSkge1xuXG4gICAgICBsZXQgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgbGV0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgIHNwYW4uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaykpO1xuICAgICAgbGV0IGlucHV0OiBIVE1MSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgaWYgKHR5cGVvZiAoPHBhcmFtcz5lbGUucGFyYW1zKVtrXSA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImNoZWNrYm94XCIpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAodHlwZW9mICg8cGFyYW1zPmVsZS5wYXJhbXMpW2tdID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJudW1iZXJcIik7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0eXBlb2YgKDxwYXJhbXM+ZWxlLnBhcmFtcylba10gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gICAgICB9XG5cbiAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcImlkXCIsIGspXG4gICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCAoSlNPTi5zdHJpbmdpZnkoKDxwYXJhbXM+ZWxlLnBhcmFtcylba10pKSk7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICAgIH0pXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICAgICAgbGV0IGVsZSA9IGRlYnVnX3N0YXRlLnNlbGVjdGVkX3Byb3BlcnRpZXNfZWxlbWVudDtcbiAgICAgICAgbGV0IHZhbDogc3RyaW5nID0gaW5wdXQudmFsdWU7XG4gICAgICAgIGlmICghaXNOYU4odmFsIGFzIHVua25vd24gYXMgbnVtYmVyKSkge1xuICAgICAgICAgICg8cGFyYW1zPmVsZS5wYXJhbXMpW2tdID0gcGFyc2VGbG9hdCh2YWwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbCA9PSBcInRydWVcIikge1xuICAgICAgICAgICg8cGFyYW1zPmVsZS5wYXJhbXMpW2tdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWwgPT0gXCJmYWxzZVwiKSB7XG4gICAgICAgICAgKDxwYXJhbXM+ZWxlLnBhcmFtcylba10gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB0cnl7XG4gICAgICAgICAgICBsZXQgcGFyc2VkID0gSlNPTi5wYXJzZSh2YWwpO1xuICAgICAgICAgICAgKDxwYXJhbXM+ZWxlLnBhcmFtcylba10gPSBKU09OLnBhcnNlKHZhbCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhdGNoKGUpe1xuICAgICAgICAgICAgXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcC5hcHBlbmRDaGlsZChzcGFuKTtcbiAgICAgIHAuYXBwZW5kKGlucHV0KTtcbiAgICAgIGxpc3QuYXBwZW5kKHApO1xuICAgIH1cbiAgfVxuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWJ1Z191cGRhdGVfb2JqX2xpc3QoKSB7XG4gIGxldCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvYmplY3RzX2xpc3RcIik7XG4gIGxpc3QudGV4dENvbnRlbnQgPSAnJztcbiAgaWYgKGcuZ2V0Um9vbSgpKSB7XG4gICAgZm9yIChsZXQgb2JqIG9mIGcuZ2V0Um9vbSgpLm9iamVjdHMuc2xpY2UoKS5yZXZlcnNlKCkpIHtcbiAgICAgIGxldCBwYXJhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICBwYXJhLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG9iai5jb25zdHJ1Y3Rvci5uYW1lKSk7XG4gICAgICBwYXJhLmNsYXNzTGlzdC5hZGQoXCJvYmplY3RfbGlzdF9pdGVtXCIpO1xuICAgICAgcGFyYS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgaWYgKGRlYnVnX3N0YXRlLnNlbGVjdGVkX3Byb3BlcnRpZXNfZWxlbWVudCA9PSA8b2JqPm9iaikge1xuICAgICAgICAgIGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5wb3NpdGlvbiA9IE9iamVjdC5hc3NpZ24oe30sICg8b2JqPm9iaikuc3RhdGUucG9zaXRpb24pXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGVidWdfc3RhdGUuc2VsZWN0ZWRfcHJvcGVydGllc19lbGVtZW50ID0gPG9iaj5vYmo7XG4gICAgICAgICAgZGVidWdfdXBkYXRlX3Byb3BlcnRpZXNfZWxlbWVudCgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBsaXN0LmFwcGVuZENoaWxkKHBhcmEpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVidWdfdXBkYXRlX3ByZWZhYnMoKSB7XG4gIGxldCBwcmVzID0gT2JqZWN0LmtleXMocHJlZmFicykubWFwKGFzeW5jIChvOiBzdHJpbmcpID0+IHtcbiAgICBsZXQgYSA9IDxvYmo+KG5ldyBwcmVmYWJzW29dKHtcbiAgICAgIHBvc2l0aW9uOiB7IHg6IDAsIHk6IDAgfSxcbiAgICAgIHZlbG9jaXR5OiB7IHg6IDAsIHk6IDAgfSxcbiAgICAgIHJvdGF0aW9uOiAwLFxuICAgICAgc2NhbGluZzogeyB3aWR0aDogMSwgaGVpZ2h0OiAxIH1cbiAgICB9KSk7XG4gICAgYXdhaXQgYS5sb2FkKCk7XG4gICAgYS5yZW5kZXIgPSB0cnVlO1xuICAgIGxldCBvYmpzID0gYS5jb21iaW5lZE9iamVjdHMoKTtcbiAgICBmb3IgKGxldCBvYmogb2Ygb2Jqcykge1xuICAgICAgb2JqLlVuYmluZEFsbCgpO1xuICAgIH1cbiAgICBsZXQgciA9IGEucmVuZGVyZigwKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgcHJlZmFiOiBwcmVmYWJzW29dLFxuICAgICAgbmFtZTogYS5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgICAgcmVuZGVyZWQ6ciBcbiAgICB9O1xuXG4gIH0pXG4gIGxldCBhID0gYXdhaXQgUHJvbWlzZS5hbGwocHJlcyk7XG5cbiAgbGV0IHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJlZmFiX3RhcmdldFwiKTtcbiAgdGFyZ2V0LnRleHRDb250ZW50ID0gJyc7XG4gIGZvciAobGV0IHByZWZhYiBvZiBhKSB7XG5cbiAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBsZXQgcGFyYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIHBhcmEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocHJlZmFiLm5hbWUpKTtcbiAgICBkaXYuYXBwZW5kQ2hpbGQocGFyYSk7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocHJlZmFiLnJlbmRlcmVkKSkge1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGRpdi5hcHBlbmQocHJlZmFiLnJlbmRlcmVkLnNwcml0ZS5zcHJpdGVfc2hlZXQpO1xuICAgIH1cbiAgICBkaXYuY2xhc3NMaXN0LmFkZChcInByZWZhYl9ib3hcIik7XG4gICAgZGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IHZhbCA9IHtcbiAgICAgICAgcG9zaXRpb246IHsgeDogZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnBvc2l0aW9uLngsIHk6IGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5wb3NpdGlvbi55IH0sXG4gICAgICAgIHZlbG9jaXR5OiB7IHg6IDAsIHk6IDAgfSxcbiAgICAgICAgcm90YXRpb246IDAsXG4gICAgICAgIHNjYWxpbmc6IHsgd2lkdGg6IDEsIGhlaWdodDogMSB9XG4gICAgICB9O1xuICAgICAgbGV0IG9iaiA9IDxvYmo+KG5ldyBwcmVmYWIucHJlZmFiKHZhbCkpO1xuICAgICAgYXdhaXQgZy5zdGF0ZS5jdXJyZW50X3Jvb20uYWRkSXRlbXMob2JqLmNvbWJpbmVkT2JqZWN0cygpKTtcbiAgICB9KTtcbiAgICB0YXJnZXQuYXBwZW5kKGRpdik7XG4gIH1cbn1cblxuaW50ZXJmYWNlIGRlYnVnX2FjdGlvbiB7XG4gIHByb3BlcnR5OiBzdHJpbmcsXG4gIG9sZDogc3RyaW5nLFxuICBuZXc6IHN0cmluZyxcbiAgZWxlbWVudDogb2JqXG59XG5cbmludGVyZmFjZSByZW5kZXJfdG9nZ2xlX2VudHJ5e1xuICBbaW5kZXg6c3RyaW5nXTpib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgZGVidWdfdmFycyB7XG4gIHRhcmdldDogSFRNTENhbnZhc0VsZW1lbnQsXG4gIGNhbWVyYTogQ2FtZXJhLFxuICBsYXN0X2NsaWNrZWQ6IEhUTUxFbGVtZW50LFxuICBzZWxlY3RlZF9lbGVtZW50X2luaXRpYWxfc2NhbGluZzogZGltZW5zaW9ucyxcbiAgc2VsZWN0ZWRfZWxlbWVudDogb2JqLFxuICBzZWxlY3RlZF9lbGVtZW50X29mZnNldDogVmVjdG9yLFxuICByb3RhdGlvbl9lbGVtZW50OiBvYmosXG4gIHNlbGVjdGVkX3Byb3BlcnRpZXNfZWxlbWVudDogb2JqLFxuICBtaWRkbGVfcG9zaXRpb246IFZlY3RvcixcbiAgY2xpY2tfcG9zaXRpb246IFZlY3RvcixcbiAgYWN0aW9uc19zdGFjazogZGVidWdfYWN0aW9uW10sXG4gIGN1cnJlbnRfYWN0aW9uOiBkZWJ1Z19hY3Rpb24sXG4gIHJlbmRlcl9kZWx0YV90aW1lOm51bWJlcixcbiAgcmVuZGVyX3RvZ2dsZXM6cmVuZGVyX3RvZ2dsZV9lbnRyeVxufVxuXG5leHBvcnQgbGV0IGRlYnVnX3N0YXRlOiBkZWJ1Z192YXJzO1xuXG5leHBvcnQgbGV0IGRlYnVnX3NldHVwID0gKCkgPT4ge1xuICBkZWJ1Z19zdGF0ZSA9IHtcbiAgICB0YXJnZXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVidWdfdGFyZ2V0XCIpIGFzIEhUTUxDYW52YXNFbGVtZW50LFxuICAgIGNhbWVyYTogbmV3IENhbWVyYSh7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIGRpbWVuc2lvbnM6IHtcbiAgICAgICAgaGVpZ2h0OiB2aWV3cG9ydC5oZWlnaHQsXG4gICAgICAgIHdpZHRoOiB2aWV3cG9ydC53aWR0aFxuICAgICAgfSxcbiAgICAgIHNjYWxpbmc6IDEsXG4gICAgICBkZWJ1ZzogdHJ1ZVxuICAgIH1cbiAgICAgICwge1xuICAgICAgICB4OiAxLFxuICAgICAgICB5OiAwLFxuICAgICAgICB3aWR0aDogMSxcbiAgICAgICAgaGVpZ2h0OiAxXG4gICAgICB9KSxcbiAgICBsYXN0X2NsaWNrZWQ6IHVuZGVmaW5lZCxcbiAgICBzZWxlY3RlZF9lbGVtZW50OiB1bmRlZmluZWQsXG4gICAgc2VsZWN0ZWRfZWxlbWVudF9vZmZzZXQ6IHVuZGVmaW5lZCxcbiAgICByb3RhdGlvbl9lbGVtZW50OiB1bmRlZmluZWQsXG4gICAgbWlkZGxlX3Bvc2l0aW9uOiB1bmRlZmluZWQsXG4gICAgY2xpY2tfcG9zaXRpb246IHVuZGVmaW5lZCxcbiAgICBzZWxlY3RlZF9wcm9wZXJ0aWVzX2VsZW1lbnQ6IHVuZGVmaW5lZCxcbiAgICBzZWxlY3RlZF9lbGVtZW50X2luaXRpYWxfc2NhbGluZzogeyB3aWR0aDogMSwgaGVpZ2h0OiAxIH0sXG4gICAgYWN0aW9uc19zdGFjazogW10sXG4gICAgcmVuZGVyX2RlbHRhX3RpbWU6MCxcbiAgICBjdXJyZW50X2FjdGlvbjogdW5kZWZpbmVkLFxuICAgIHJlbmRlcl90b2dnbGVzOntcbiAgICAgIFwicHJveGltaXR5X2JveFwiOmZhbHNlLFxuICAgICAgXCJwYXRoX2ZpbmRpbmdcIjpmYWxzZSxcbiAgICAgIFwiY29sbGlzaW9uX2JveFwiOmZhbHNlLFxuICAgICAgXCJib3VuZGluZ19ib3hcIjpmYWxzZVxuICAgIH1cbiAgfVxuICBkZWJ1Z19zdGF0ZS5jYW1lcmEuaHVkID0gbmV3IERlYnVnX2h1ZCgpO1xuICBCaW5kKFwibW91c2UwZG93blwiLCgpID0+IHtcbiAgICBpZiAoZGVidWdfc3RhdGUuc2VsZWN0ZWRfZWxlbWVudCkge1xuICAgICAgZGVidWdfc3RhdGUuc2VsZWN0ZWRfZWxlbWVudCA9IG51bGw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgbGV0IG1vdXNlID0gUG9sbF9Nb3VzZShkZWJ1Z19zdGF0ZS5jYW1lcmEsIGZhbHNlLCBkZWJ1Z19zdGF0ZS50YXJnZXQpO1xuICAgICAgaWYoIW1vdXNlKXtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBkZWJ1Z19zdGF0ZS5jbGlja19wb3NpdGlvbiA9IG1vdXNlO1xuICAgICAgbGV0IGFsbF9jbGlja2VkID0gZy5nZXRSb29tKCkuY2hlY2tPYmplY3RzUG9pbnQobW91c2UpO1xuICAgICAgbGV0IGNsaWNrZWQ7XG4gICAgICBsZXQgZmlsdGVyZWQgPSBhbGxfY2xpY2tlZC5maWx0ZXIoKGVsZSkgPT4gZWxlID09IGRlYnVnX3N0YXRlLnNlbGVjdGVkX3Byb3BlcnRpZXNfZWxlbWVudClcbiAgICAgIGlmIChmaWx0ZXJlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNsaWNrZWQgPSBmaWx0ZXJlZFswXVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNsaWNrZWQgPSBhbGxfY2xpY2tlZC5zb3J0KChhLCBiKSA9PiAoYi5sYXllciAtIGEubGF5ZXIpKVswXTtcbiAgICAgIH1cbiAgICAgIGlmIChjbGlja2VkKSB7XG4gICAgICAgIGlmIChoZWxkX2tleXNbXCJDb250cm9sTGVmdFwiXSkge1xuICAgICAgICAgIGRlYnVnX3N0YXRlLmN1cnJlbnRfYWN0aW9uID0ge1xuICAgICAgICAgICAgZWxlbWVudDogY2xpY2tlZCxcbiAgICAgICAgICAgIHByb3BlcnR5OiBcInNjYWxpbmdcIixcbiAgICAgICAgICAgIG9sZDogSlNPTi5zdHJpbmdpZnkoY2xpY2tlZC5zdGF0ZS5zY2FsaW5nKSxcbiAgICAgICAgICAgIG5ldzogdW5kZWZpbmVkXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGRlYnVnX3N0YXRlLmN1cnJlbnRfYWN0aW9uID0ge1xuICAgICAgICAgICAgZWxlbWVudDogY2xpY2tlZCxcbiAgICAgICAgICAgIHByb3BlcnR5OiBcInBvc2l0aW9uXCIsXG4gICAgICAgICAgICBvbGQ6IEpTT04uc3RyaW5naWZ5KGNsaWNrZWQuc3RhdGUucG9zaXRpb24pLFxuICAgICAgICAgICAgbmV3OiB1bmRlZmluZWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGVidWdfc3RhdGUuc2VsZWN0ZWRfcHJvcGVydGllc19lbGVtZW50ID0gY2xpY2tlZDtcbiAgICAgICAgZGVidWdfdXBkYXRlX3Byb3BlcnRpZXNfZWxlbWVudCgpXG4gICAgICAgIGRlYnVnX3N0YXRlLnNlbGVjdGVkX2VsZW1lbnQgPSBjbGlja2VkO1xuICAgICAgICBkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9lbGVtZW50X2luaXRpYWxfc2NhbGluZyA9IGNsaWNrZWQuc3RhdGUuc2NhbGluZztcbiAgICAgICAgZGVidWdfc3RhdGUuc2VsZWN0ZWRfZWxlbWVudF9vZmZzZXQgPSB7XG4gICAgICAgICAgeDogbW91c2UueCAtIGNsaWNrZWQuc3RhdGUucG9zaXRpb24ueCxcbiAgICAgICAgICB5OiBtb3VzZS55IC0gY2xpY2tlZC5zdGF0ZS5wb3NpdGlvbi55XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sZXhlY190eXBlLm9uY2UsMSx0cnVlKVxuICBCaW5kKFwibW91c2UxdXBcIiwoKSA9PiB7XG4gICAgZGVidWdfc3RhdGUubWlkZGxlX3Bvc2l0aW9uID0gdW5kZWZpbmVkO1xuICB9LGV4ZWNfdHlwZS5vbmNlLDEsdHJ1ZSk7XG4gIEJpbmQoXCJtb3VzZTFkb3duXCIsKCkgPT4ge1xuICAgIGxldCBtb3VzZSA9IFBvbGxfTW91c2UoZGVidWdfc3RhdGUuY2FtZXJhLCBmYWxzZSwgZGVidWdfc3RhdGUudGFyZ2V0KTtcbiAgICBpZighbW91c2Upe1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGRlYnVnX3N0YXRlLm1pZGRsZV9wb3NpdGlvbiA9IG1vdXNlO1xuICB9LCBleGVjX3R5cGUub25jZSwgMSwgdHJ1ZSk7XG4gIEJpbmQoXCJtb3VzZTB1cFwiLCAoKSA9PiB7XG4gICAgaWYgKGRlYnVnX3N0YXRlLnNlbGVjdGVkX2VsZW1lbnQpIHtcbiAgICAgIGlmIChkZWJ1Z19zdGF0ZS5jdXJyZW50X2FjdGlvbi5wcm9wZXJ0eSA9PSBcInNjYWxpbmdcIikge1xuICAgICAgICBkZWJ1Z19zdGF0ZS5jdXJyZW50X2FjdGlvbi5uZXcgPSBKU09OLnN0cmluZ2lmeShkZWJ1Z19zdGF0ZS5zZWxlY3RlZF9lbGVtZW50LnN0YXRlLnNjYWxpbmcpXG4gICAgICB9XG4gICAgICBlbHNlIGlmIChkZWJ1Z19zdGF0ZS5jdXJyZW50X2FjdGlvbi5wcm9wZXJ0eSA9PSBcInBvc2l0aW9uXCIpIHtcbiAgICAgICAgZGVidWdfc3RhdGUuY3VycmVudF9hY3Rpb24ubmV3ID0gSlNPTi5zdHJpbmdpZnkoKDxvYmpfc3RhdGU+ZGVidWdfc3RhdGUuc2VsZWN0ZWRfZWxlbWVudC5zdGF0ZSkucG9zaXRpb24pXG4gICAgICB9XG4gICAgICBkZWJ1Z19zdGF0ZS5hY3Rpb25zX3N0YWNrLnB1c2goZGVidWdfc3RhdGUuY3VycmVudF9hY3Rpb24pO1xuICAgICAgZGVidWdfc3RhdGUuc2VsZWN0ZWRfZWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH0sIGV4ZWNfdHlwZS5vbmNlLCAxLCB0cnVlKTtcbiAgQmluZChcIm1vdXNlMmRvd25cIiwoKSA9PiB7XG4gICAgaWYgKGRlYnVnX3N0YXRlLnJvdGF0aW9uX2VsZW1lbnQpIHtcbiAgICAgIGRlYnVnX3N0YXRlLnJvdGF0aW9uX2VsZW1lbnQgPSBudWxsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGxldCBtb3VzZSA9IFBvbGxfTW91c2UoZGVidWdfc3RhdGUuY2FtZXJhLCBmYWxzZSwgZGVidWdfc3RhdGUudGFyZ2V0KTtcbiAgICAgIGlmKCFtb3VzZSl7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgbGV0IGNsaWNrZWQgPSBnLmdldFJvb20oKS5jaGVja09iamVjdHNQb2ludChtb3VzZSlbMF1cbiAgICAgIGlmIChjbGlja2VkKSB7XG4gICAgICAgIGRlYnVnX3N0YXRlLnJvdGF0aW9uX2VsZW1lbnQgPSBjbGlja2VkO1xuICAgICAgICBkZWJ1Z19zdGF0ZS5jdXJyZW50X2FjdGlvbiA9IHtcbiAgICAgICAgICBlbGVtZW50OiBkZWJ1Z19zdGF0ZS5yb3RhdGlvbl9lbGVtZW50LFxuICAgICAgICAgIHByb3BlcnR5OiBcInJvdGF0aW9uXCIsXG4gICAgICAgICAgb2xkOiBKU09OLnN0cmluZ2lmeShkZWJ1Z19zdGF0ZS5yb3RhdGlvbl9lbGVtZW50LnN0YXRlLnJvdGF0aW9uKSxcbiAgICAgICAgICBuZXc6IHVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LGV4ZWNfdHlwZS5vbmNlLDEsdHJ1ZSk7XG4gIEJpbmQoXCJtb3VzZTJ1cFwiLCgpID0+IHtcbiAgICBkZWJ1Z19zdGF0ZS5jdXJyZW50X2FjdGlvbi5uZXcgPSBKU09OLnN0cmluZ2lmeShkZWJ1Z19zdGF0ZS5yb3RhdGlvbl9lbGVtZW50LnN0YXRlLnJvdGF0aW9uKVxuICAgIGRlYnVnX3N0YXRlLmFjdGlvbnNfc3RhY2sucHVzaChkZWJ1Z19zdGF0ZS5jdXJyZW50X2FjdGlvbik7XG4gICAgZGVidWdfc3RhdGUucm90YXRpb25fZWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgfSxleGVjX3R5cGUub25jZSwxLHRydWUpO1xuICBsZXQgbGVmdF9mdW5jID0gKCkgPT4ge1xuICAgIGxldCBzaGlmdF9oZWxkID0gaGVsZF9rZXlzW1wiU2hpZnRMZWZ0XCJdID8gMSA6IDA7XG4gICAgaWYgKGRlYnVnX3N0YXRlLmxhc3RfY2xpY2tlZC5pZCA9PSBcImRlYnVnX3RhcmdldFwiKVxuICAgICAgZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnggPSBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUucG9zaXRpb24ueCAtICgoNSArIHNoaWZ0X2hlbGQgKiA1KSAqICgxIC8gZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnNjYWxpbmcpKTtcbiAgfTtcbiAgbGV0IHJpZ2h0X2Z1bmMgPSAoKSA9PiB7XG4gICAgbGV0IHNoaWZ0X2hlbGQgPSBoZWxkX2tleXNbXCJTaGlmdExlZnRcIl0gPyAxIDogMDtcbiAgICBpZiAoZGVidWdfc3RhdGUubGFzdF9jbGlja2VkLmlkID09IFwiZGVidWdfdGFyZ2V0XCIpXG4gICAgICBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUucG9zaXRpb24ueCA9IGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5wb3NpdGlvbi54ICsgKCg1ICsgc2hpZnRfaGVsZCAqIDUpICogKDEgLyBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUuc2NhbGluZykpO1xuICB9O1xuICBsZXQgZG93bl9mdW5jID0gKCkgPT4ge1xuICAgIGxldCBzaGlmdF9oZWxkID0gaGVsZF9rZXlzW1wiU2hpZnRMZWZ0XCJdID8gMSA6IDA7XG5cbiAgICBpZiAoIWhlbGRfa2V5c1tcIkNvbnRyb2xMZWZ0XCJdICYmIGRlYnVnX3N0YXRlLmxhc3RfY2xpY2tlZC5pZCA9PSBcImRlYnVnX3RhcmdldFwiKVxuICAgICAgZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnkgPSBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUucG9zaXRpb24ueSAtICgoNSArIHNoaWZ0X2hlbGQgKiA1KSAqICgxIC8gZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnNjYWxpbmcpKTtcbiAgfTtcbiAgbGV0IHVwX2Z1bmMgPSAoKSA9PiB7XG4gICAgbGV0IHNoaWZ0X2hlbGQgPSBoZWxkX2tleXNbXCJTaGlmdExlZnRcIl0gPyAxIDogMDtcbiAgICBpZiAoZGVidWdfc3RhdGUubGFzdF9jbGlja2VkLmlkID09IFwiZGVidWdfdGFyZ2V0XCIpXG4gICAgICBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUucG9zaXRpb24ueSA9IGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5wb3NpdGlvbi55ICsgKCg1ICsgc2hpZnRfaGVsZCAqIDUpICogKDEgLyBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUuc2NhbGluZykpO1xuICB9O1xuICBsZXQgc2Nyb2xsX3VwID0gKCkgPT4ge1xuICAgIGlmIChkZWJ1Z19zdGF0ZS5sYXN0X2NsaWNrZWQuaWQgPT0gXCJkZWJ1Z190YXJnZXRcIiAmJiBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUuc2NhbGluZyA8IDAuMDUpXG4gICAgICBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUuc2NhbGluZyA9IGRlYnVnX3N0YXRlLmNhbWVyYS5zdGF0ZS5zY2FsaW5nICsgMC4wMTtcbiAgICBlbHNlIGlmKGRlYnVnX3N0YXRlLmxhc3RfY2xpY2tlZC5pZCA9PSBcImRlYnVnX3RhcmdldFwiKVxuICAgICAgZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnNjYWxpbmcgPSBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUuc2NhbGluZyArIDAuMDU7XG4gIH1cbiAgbGV0IHNhdmVfZnVuYyA9ICgpID0+IHtcbiAgICBsZXQgY3RybF9oZWxkID0gaGVsZF9rZXlzW1wiQ29udHJvbExlZnRcIl07XG4gICAgaWYgKGN0cmxfaGVsZCAmJiBQQVVTRUQpIHtcbiAgICAgIGxldCBuYW1lID0gZy5nZXRSb29tKCkuY29uc3RydWN0b3IubmFtZTtcbiAgICAgIGxldCBhID0gcGF0aC5qb2luKGAke3Byb2plY3RfcGF0aH1gLCBgLi4vcm9vbXMvJHtuYW1lfS5qc29uYCk7XG4gICAgICB0cnkge1xuICAgICAgICBmcy53cml0ZUZpbGVTeW5jKGEsIEpTT04uc3RyaW5naWZ5KGcuZ2V0Um9vbSgpLmV4cG9ydFN0YXRlQ29uZmlnKCkpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgV1JJVElORyBST09NIElORk8gRklMRS5cIik7XG4gICAgICAgIGFsZXJ0KFwiRXJyb3JcIik7XG4gICAgICB9XG4gICAgICBhbGVydChcIlNhdmVkXCIpO1xuXG4gICAgfVxuICAgIGVsc2UgaWYgKGN0cmxfaGVsZCAmJiAhUEFVU0VEKSB7XG4gICAgICBhbGVydChcInBhdXNlIHRvIGVuYWJsZSBzYXZpbmcuXCIpXG4gICAgfVxuICB9XG4gIGxldCBzY3JvbGxfZG93biA9ICgpID0+IHtcbiAgICBpZiAoZGVidWdfc3RhdGUubGFzdF9jbGlja2VkLmlkID09IFwiZGVidWdfdGFyZ2V0XCIgJiYgZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnNjYWxpbmcgPiAwLjA1KVxuICAgICAgZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnNjYWxpbmcgPSBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUuc2NhbGluZyAtIDAuMDU7XG4gICAgZWxzZSBpZiAoZGVidWdfc3RhdGUubGFzdF9jbGlja2VkLmlkID09IFwiZGVidWdfdGFyZ2V0XCIgJiYgZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnNjYWxpbmcgPiAwLjAxKVxuICAgICAgZGVidWdfc3RhdGUuY2FtZXJhLnN0YXRlLnNjYWxpbmcgPSBkZWJ1Z19zdGF0ZS5jYW1lcmEuc3RhdGUuc2NhbGluZyAtIDAuMDE7XG4gIH1cbiAgbGV0IHVuZG9fZnVuYyA9ICgpID0+IHtcbiAgICBpZiAoaGVsZF9rZXlzW1wiQ29udHJvbExlZnRcIl0pIHtcbiAgICAgIGxldCBjdXJyOiBkZWJ1Z19hY3Rpb24gPSBkZWJ1Z19zdGF0ZS5hY3Rpb25zX3N0YWNrLnBvcCgpO1xuICAgICAgaWYgKGN1cnIpIHtcbiAgICAgICAgaWYgKGN1cnIucHJvcGVydHkgPT0gXCJwb3NpdGlvblwiKSB7XG4gICAgICAgICAgY3Vyci5lbGVtZW50LnN0YXRlLnBvc2l0aW9uID0gSlNPTi5wYXJzZShjdXJyLm9sZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3Vyci5wcm9wZXJ0eSA9PT0gXCJyb3RhdGlvblwiKSB7XG4gICAgICAgICAgY3Vyci5lbGVtZW50LnN0YXRlLnJvdGF0aW9uID0gSlNPTi5wYXJzZShjdXJyLm9sZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3Vyci5wcm9wZXJ0eSA9PT0gXCJzY2FsaW5nXCIpIHtcbiAgICAgICAgICBjdXJyLmVsZW1lbnQuc3RhdGUuc2NhbGluZyA9IEpTT04ucGFyc2UoY3Vyci5vbGQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIEJpbmQoXCJLZXlBXCIsbGVmdF9mdW5jLGV4ZWNfdHlwZS5yZXBlYXQsMSx0cnVlKTtcbiAgQmluZChcIktleURcIixyaWdodF9mdW5jLGV4ZWNfdHlwZS5yZXBlYXQsMSx0cnVlKTtcbiAgQmluZChcIktleVdcIix1cF9mdW5jLGV4ZWNfdHlwZS5yZXBlYXQsMSx0cnVlKTtcbiAgQmluZChcIktleVNcIixkb3duX2Z1bmMsZXhlY190eXBlLnJlcGVhdCwxLHRydWUpO1xuICBCaW5kKFwic2Nyb2xsdXBcIixzY3JvbGxfdXAsZXhlY190eXBlLm9uY2UsMSx0cnVlKTtcbiAgQmluZChcInNjcm9sbGRvd25cIixzY3JvbGxfZG93bixleGVjX3R5cGUub25jZSwxLHRydWUpO1xuICBCaW5kKFwiS2V5U1wiLHNhdmVfZnVuYyxleGVjX3R5cGUub25jZSwxLHRydWUpO1xuICBCaW5kKFwiS2V5WlwiLHVuZG9fZnVuYyxleGVjX3R5cGUub25jZSwxLHRydWUpO1xuICBCaW5kKFwiS2V5UVwiLCgpPT57XG4gICAgZGVidWdfc3RhdGUucmVuZGVyX3RvZ2dsZXNbXCJwYXRoX2ZpbmRpbmdcIl0gPSAhZGVidWdfc3RhdGUucmVuZGVyX3RvZ2dsZXNbXCJwYXRoX2ZpbmRpbmdcIl1cbiAgfSxleGVjX3R5cGUub25jZSwxLHRydWUpO1xuICBCaW5kKFwiS2V5RVwiLCgpPT57XG4gICAgZGVidWdfc3RhdGUucmVuZGVyX3RvZ2dsZXNbXCJwcm94aW1pdHlfYm94XCJdID0gIWRlYnVnX3N0YXRlLnJlbmRlcl90b2dnbGVzW1wicHJveGltaXR5X2JveFwiXVxuICB9LGV4ZWNfdHlwZS5vbmNlLDEsdHJ1ZSk7XG4gIEJpbmQoXCJLZXlSXCIsKCk9PntcbiAgICBkZWJ1Z19zdGF0ZS5yZW5kZXJfdG9nZ2xlc1tcImNvbGxpc2lvbl9ib3hcIl0gPSAhZGVidWdfc3RhdGUucmVuZGVyX3RvZ2dsZXNbXCJjb2xsaXNpb25fYm94XCJdXG4gIH0sZXhlY190eXBlLm9uY2UsMSx0cnVlKTtcbiAgQmluZChcIktleVRcIiwoKT0+e1xuICAgIGRlYnVnX3N0YXRlLnJlbmRlcl90b2dnbGVzW1wiYm91bmRpbmdfYm94XCJdID0gIWRlYnVnX3N0YXRlLnJlbmRlcl90b2dnbGVzW1wiYm91bmRpbmdfYm94XCJdXG4gIH0sZXhlY190eXBlLm9uY2UsMSx0cnVlKTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICBkZWJ1Z19zdGF0ZS5sYXN0X2NsaWNrZWQgPSBlLnRhcmdldDtcbiAgICB9XG4gIH0pXG4gIGxldCBwYXVzZV9idXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhdXNlX2J1dHRvblwiKVxuICBwYXVzZV9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgc2V0UGF1c2VkKCFQQVVTRUQpO1xuICAgIGlmIChQQVVTRUQpIHtcbiAgICAgIHBhdXNlX2J1dHRvbi5pbm5lckhUTUwgPSBcIlVOUEFVU0VcIjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBwYXVzZV9idXR0b24uaW5uZXJIVE1MID0gXCJQQVVTRVwiO1xuICAgIH1cbiAgfSk7XG4gIGxldCBvYmpfYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXdfb2JqZWN0X2J1dHRvblwiKTtcbiAgbGV0IHJvb21fYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXdfcm9vbV9idXR0b25cIik7XG4gIHJvb21fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGxldCBmaWxlX3BhdGggPSBpcGNSZW5kZXJlci5zZW5kU3luYygnb2JqZWN0LXBhdGgtcmVxdWVzdCcsIFwicm9vbXNcIik7XG4gICAgaWYgKGZpbGVfcGF0aCkge1xuICAgICAgbGV0IGZ1bGxfbmFtZSA9IHBhdGgucGFyc2UoZmlsZV9wYXRoKS5iYXNlO1xuICAgICAgbGV0IG5ld19uYW1lID0gZnVsbF9uYW1lLnN1YnN0cigwLCBmdWxsX25hbWUubGVuZ3RoIC0gMyk7XG4gICAgICBsZXQgcGF0aF90b193cml0ZSA9IHBhdGguam9pbihgJHtmaWxlX3BhdGh9YCwgXCIuLlwiLCBuZXdfbmFtZSArIFwiLnRzXCIpO1xuICAgICAgZnMud3JpdGVGaWxlU3luYyhwYXRoX3RvX3dyaXRlLCByb29tX3RlbXBsYXRlLnNwbGl0KFwidGVtcGxhdGVcIikuam9pbihuZXdfbmFtZSkpO1xuXG4gICAgICBwYXRoX3RvX3dyaXRlID0gcGF0aC5qb2luKGAke2ZpbGVfcGF0aH1gLCBcIi4uXCIsIG5ld19uYW1lICsgXCIuanNvblwiKTtcblxuICAgICAgZnMud3JpdGVGaWxlU3luYyhwYXRoX3RvX3dyaXRlLCBgXG4gICAge1xuICAgICAgXCJvYmplY3RzXCI6W11cbiAgICB9XG4gICAgYClcbiAgICB9XG4gIH0pXG4gIG9ial9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgbGV0IGZpbGVfcGF0aCA9IGlwY1JlbmRlcmVyLnNlbmRTeW5jKCdvYmplY3QtcGF0aC1yZXF1ZXN0JywgXCJvYmplY3RzXCIpO1xuICAgIGlmIChmaWxlX3BhdGgpIHtcbiAgICAgIGxldCBmdWxsX25hbWUgPSBwYXRoLnBhcnNlKGZpbGVfcGF0aCkuYmFzZTtcbiAgICAgIGxldCBuZXdfbmFtZSA9IGZ1bGxfbmFtZS5zdWJzdHIoMCwgZnVsbF9uYW1lLmxlbmd0aCAtIDMpO1xuICAgICAgbGV0IHBhdGhfdG9fd3JpdGUgPSBwYXRoLmpvaW4oYCR7ZmlsZV9wYXRofWAsIFwiLi5cIiwgbmV3X25hbWUgKyBcIi50c1wiKTtcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMocGF0aF90b193cml0ZSxvYmplY3RfdGVtcGxhdGUuc3BsaXQoXCJ0ZW1wbGF0ZVwiKS5qb2luKG5ld19uYW1lKSk7XG4gICAgfVxuICB9KVxuXG59IiwiaW1wb3J0IHtvYmp9IGZyb20gXCIuL29iamVjdFwiO1xuaW1wb3J0IHtWZWN0b3J9IGZyb20gXCJsaWIvc3RhdGVcIjtcbmltcG9ydCB7IGNvcHkgfSBmcm9tIFwic3JjL3ZhblwiO1xuaW50ZXJmYWNlIEh1ZFRleHRHZXRGdW5je1xuICAoKTpzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUZXh0U2V0dGluZ3tcbiAgeDpudW1iZXIsXG4gIHk6bnVtYmVyLFxuICBmb250OkZvbnRcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGb250e1xuICBtYXhfd2lkdGg/Om51bWJlcixcbiAgc2l6ZTpudW1iZXIsXG4gIGZvbnQ6c3RyaW5nLFxuICBjb2xvcjpzdHJpbmcsXG4gIHRleHQ6c3RyaW5nLFxuICBhbGlnbjpDYW52YXNUZXh0QWxpZ25cbn1cblxuZXhwb3J0IGludGVyZmFjZSBUZXh0X05vZGV7XG4gIG1heF93aWR0aD86bnVtYmVyLFxuICBwb3NpdGlvbjpWZWN0b3JcbiAgc2l6ZTpudW1iZXI7XG4gIHNjYWxpbmc6bnVtYmVyO1xuICBmb250OnN0cmluZztcbiAgY29sb3I6c3RyaW5nO1xuICB0ZXh0PzpzdHJpbmc7XG4gIGFsaWduPzpDYW52YXNUZXh0QWxpZ247XG59XG5leHBvcnQgY2xhc3MgSFVEe1xuICBncmFwaGljX2VsZW1lbnRzOm9ialtdID0gW107XG4gIHRleHRfZWxlbWVudHM6QXJyYXk8VGV4dD4gPSBbXTtcbiAgcmVuZGVyaW5nOmJvb2xlYW4gPSBmYWxzZTtcbiAgY29uc3RydWN0b3IoKXtcbiAgICB0aGlzLnRleHRfZWxlbWVudHMucHVzaCguLi50aGlzLnNldFRleHRFbGVtZW50cygpKTtcbiAgICBmb3IobGV0IGcgb2YgdGhpcy5zZXRHcmFwaGljRWxlbWVudHMoKSl7XG4gICAgICB0aGlzLmFkZEdyYXBoaWMoZyk7XG4gICAgfVxuICB9XG4gIGFzeW5jIGFkZEdyYXBoaWMobzpvYmope1xuICAgIGF3YWl0IG8ubG9hZCgpO1xuICAgIG8uaW5mby5vbl9odWRfbGF5ZXIgPSB0cnVlO1xuICAgIHRoaXMuZ3JhcGhpY19lbGVtZW50cy5wdXNoKG8pO1xuXG4gIH1cbiAgYXN5bmMgYWRkR3JhcGhpY3MobzpvYmpbXSl7XG4gICAgZm9yKGxldCBvYmogb2YgbyApe1xuICAgICAgdGhpcy5hZGRHcmFwaGljKG9iaik7XG4gICAgfVxuICB9XG4gIHN0YXRlZihhOm51bWJlcil7XG4gICAgZm9yKGxldCB4IG9mIHRoaXMuZ3JhcGhpY19lbGVtZW50cyl7XG4gICAgICB4LnN0YXRlZihhKTtcbiAgICB9XG4gICAgZm9yKGxldCB4IG9mIHRoaXMudGV4dF9lbGVtZW50cyl7XG4gICAgICB4LnN0YXRlZihhKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgc2V0QWN0aXZlKCl7XG5cbiAgfVxuICBsb2FkKCl7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHRoaXMuZ3JhcGhpY19lbGVtZW50cy5tYXAoKGEpPT5hLmxvYWQoKSkpXG4gIH1cbiAgc2V0VGV4dEVsZW1lbnRzKCk6VGV4dFtde1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBzZXRHcmFwaGljRWxlbWVudHMoKTpvYmpbXXtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRleHR7XG4gIGdldEZ1bmM6SHVkVGV4dEdldEZ1bmM7XG4gIHN0YXRlOlRleHRfTm9kZTtcbiAgY29uc3RydWN0b3Iobm9kZTpUZXh0X05vZGUsZ2V0RnVuYzpIdWRUZXh0R2V0RnVuYyl7XG4gICAgaWYoIW5vZGUuYWxpZ24pe1xuICAgICAgbm9kZS5hbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgfVxuICAgIHRoaXMuc3RhdGUgPSBub2RlO1xuICAgIGlmKCF0aGlzLnN0YXRlLnRleHQpe1xuICAgICAgdGhpcy5zdGF0ZS50ZXh0ID0gXCJcIjtcbiAgICB9XG4gICAgdGhpcy5nZXRGdW5jID0gZ2V0RnVuYztcbiAgfVxuICBzdGF0ZWYoYTpudW1iZXIpe1xuICAgdGhpcy5zdGF0ZS50ZXh0ID0gdGhpcy5nZXRGdW5jKCk7XG4gIH1cbiAgcmVuZGVyZihhOm51bWJlcik6Rm9udHtcbiAgICBsZXQge3NpemUsY29sb3IsZm9udCx0ZXh0LG1heF93aWR0aCxhbGlnbn0gPSB0aGlzLnN0YXRlO1xuICAgIHJldHVybiB7XG4gICAgICBzaXplLFxuICAgICAgY29sb3IsXG4gICAgICBmb250LFxuICAgICAgdGV4dCxcbiAgICAgIG1heF93aWR0aCxcbiAgICAgIGFsaWduXG4gICAgfTtcbiAgfVxufSIsImltcG9ydCB7VmVjdG9yfSBmcm9tIFwiLi9zdGF0ZVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZEludChtaW46bnVtYmVyLCBtYXg6bnVtYmVyKSB7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSApICsgbWluO1xufVxuXG5pbnRlcmZhY2UgVmVjX2Z1bmN7XG4gIChhOm51bWJlcik6bnVtYmVyXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhbmdsZV90b3dhcmRzKHRhcmdldDE6VmVjdG9yLHRhcmdldDI6VmVjdG9yKTpudW1iZXJ7XG4gIHJldHVybiA5MCAtIE1hdGguYXRhbjIoKHRhcmdldDEueSAtIHRhcmdldDIueSksKHRhcmdldDEueCAtIHRhcmdldDIueCkpICogMTgwL01hdGguUEk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGFtcCh2YWx1ZTpudW1iZXIsbWluOm51bWJlcixtYXg6bnVtYmVyKXtcbiAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHZhbHVlLG1pbiksbWF4KTtcbn1cblxuLy9GaW5kcyB0aGUgc2lkZSBsZW5ndGhzIG9mIGEgdHJpYW5nbGUgaWYgZ2l2ZW4gdGhlICBhbmdsZSAoaW4gZGVncmVlcylcbi8vYWxvbmcgd2l0aCB0aGUgbGVuZ3RoIG9mIHRoZSBoeXBvdGVudXNlXG5leHBvcnQgZnVuY3Rpb24gcm90YXRpb25fbGVuZ3RoKGxlbmd0aDogbnVtYmVyLCBkZWdyZWU6IG51bWJlcikge1xuICBsZXQgYV9sZW4gPSBsZW5ndGggKiBNYXRoLnNpbihkZWdyZWUgKiBNYXRoLlBJIC8gMTgwKTtcbiAgbGV0IGJfbGVuID0gbGVuZ3RoICogTWF0aC5jb3MoZGVncmVlICogTWF0aC5QSSAvIDE4MCk7XG4gIHJldHVybiB7XG4gICAgeDogYV9sZW4sXG4gICAgeTogYl9sZW5cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVmVje1xuICBzdGF0aWMgZnJvbShhOlZlY3Rvcil7XG4gICAgcmV0dXJuIFZlYy5jcmVhdGUoYS54LGEueSk7XG4gIH1cbiAgc3RhdGljIGFkZChhOlZlY3RvcixiOlZlY3Rvcik6VmVjdG9ye1xuICAgIHJldHVybiB7eDphLngrYi54LHk6YS55K2IueX07XG4gIH1cbiAgc3RhdGljIHN1YihhOlZlY3RvcixiOlZlY3Rvcik6VmVjdG9ye1xuICAgIHJldHVybiB7eDphLnggLSBiLngseTphLnkgLSBiLnl9XG4gIH1cbiAgc3RhdGljIHNjYWxhcl9kaXZpZGUoYTpWZWN0b3IsYjpudW1iZXIpe1xuICAgIHJldHVybiB7eDphLngvYix5OmEueS9ifTtcbiAgfVxuICBzdGF0aWMgc2NhbGFyX2FkZChhOlZlY3RvcixiOm51bWJlcil7XG4gICAgcmV0dXJuIHt4OmEueCArIGIseTphLnkgKyBifTtcbiAgfVxuICBzdGF0aWMgc2NhbGFyX3N1YihhOlZlY3RvcixiOm51bWJlcil7XG4gICAgcmV0dXJuIHt4OmEueCAtIGIsIHk6YS55IC0gYn07XG4gIH1cbiAgc3RhdGljIHNjYWxhcl9tb2QoYTpWZWN0b3IsYjpudW1iZXIpe1xuICAgIHJldHVybiB7eDphLnggJSBiLCB5OiBhLnkgJSBifTtcbiAgfVxuICBzdGF0aWMgc2NhbGFyX211bHQoYTpWZWN0b3IsYjpudW1iZXIpe1xuICAgIHJldHVybiB7eDphLnggKiBiLHk6YS55ICogYn07XG4gIH1cbiAgc3RhdGljIGZ1bmMoYTpWZWN0b3IsYjpWZWNfZnVuYyk6VmVjdG9ye1xuICAgIGxldCBhcnIgPSBbYS54LGEueV0ubWFwKGIpO1xuICAgIHJldHVybiBWZWMuY3JlYXRlKGFyclswXSxhcnJbMV0pO1xuICB9XG4gIHN0YXRpYyBkaXN0YW5jZShhOlZlY3RvcixiOlZlY3Rvcil7XG4gICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhhLnggLSBiLngsMikgKyBNYXRoLnBvdyhhLnkgLSBiLnksMikpO1xuICB9XG4gIHN0YXRpYyBjcmVhdGUoeDpudW1iZXIseTpudW1iZXIpe1xuICAgIHJldHVybiB7eCx5fTtcbiAgfVxufSIsImltcG9ydCB7IHBlZXJfY29ubmVjdGlvbiwgcGVlcl90b19wZWVyX2dhbWUgfSBmcm9tIFwic3JjL3ZhblwiO1xuaW1wb3J0IHsgZ2V0UmFuZEludCB9IGZyb20gXCJsaWIvbWF0aFwiO1xuaW1wb3J0IFBlZXIgZnJvbSAncGVlcmpzJztcbmltcG9ydCB7IHAycF9yb29tIH0gZnJvbSBcIi4vcm9vbVwiO1xuaW1wb3J0IHsgZyB9IGZyb20gXCJnYW1lL21haW5cIjtcblxuZXhwb3J0IGVudW0gbmV0X3R5cGUge1xuICAgIHNpbmdsZV9wbGF5ZXIsXG4gICAgd2ViLFxuICAgIHNpbmdsZV9ob3N0XG59XG5cbmV4cG9ydCBlbnVtIG9ial9uZXRfdHlwZSB7XG4gICAgbG9jYWwsXG4gICAgc3luYyxcbiAgICBob3N0XG59XG5cbmludGVyZmFjZSBwZWVye1xuICAgIGNvbm5lY3Rpb246UGVlci5EYXRhQ29ubmVjdGlvbixcbiAgICBhdXRoZW50aWNhdGVkOmJvb2xlYW4sXG4gICAgbG9jYWxfaWQ6c3RyaW5nLFxuICAgIHBlZXJfaWQ6c3RyaW5nXG59XG5cblxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgTmV0d29yayB7XG4gICAgdHlwZTogbmV0X3R5cGU7XG4gICAgZ2FtZTogcGVlcl90b19wZWVyX2dhbWU8dW5rbm93bj47XG4gICAgcGVlcl9jb25uZWN0aW9uczogcGVlcltdID0gW107XG4gICAgaWQgPSBnZXRSYW5kSW50KDAsIDk5OTk5OSk7XG4gICAgbG9jYWxfY29ubmVjdGlvbjogUGVlcjtcbiAgICBtYXhfcGxheWVyczpudW1iZXIgPSA4O1xuICAgIGN1cnJlbnRfcGxheWVyczpudW1iZXIgPSAwO1xuICAgIGlkX2NvdW50ZXIgPSAxO1xuICAgIHBhc3N3b3JkOnN0cmluZyA9IFwiXCI7XG4gICAgbG9jYWxfaWQ6c3RyaW5nID0gXCIwXCI7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubG9jYWxfY29ubmVjdGlvbiA9IG5ldyBQZWVyKHRoaXMuaWQgKyBcIlwiLCB7XG4gICAgICAgICAgICBob3N0OiAnbG9jYWxob3N0JyxcbiAgICAgICAgICAgIHBvcnQ6IDkwMDAsXG4gICAgICAgICAgICBwYXRoOiAnLydcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubG9jYWxfY29ubmVjdGlvbi5vbihcImVycm9yXCIsKGVycik9PntcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZXJyKTtcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5sb2NhbF9jb25uZWN0aW9uLm9uKFwiY29ubmVjdGlvblwiLChjb25uZWN0aW9uKT0+e1xuICAgICAgICAgICAgdGhpcy5yZWNpZXZlX2Nvbm5lY3QoY29ubmVjdGlvbik7XG4gICAgICAgIH0pXG4gICAgfVxuICAgIGluaXQoKXtcbiAgICAgICAgXG4gICAgfVxuICAgIHNlbmQodHlwZTpzdHJpbmcsZGF0YTphbnkpIHtcblxuICAgIH1cbiAgICByZWNpZXZlKHR5cGU6c3RyaW5nLCBkYXRhOiBhbnksIGxvY2FsX2lkOnN0cmluZykge1xuICAgICAgICBsZXQgcm9vbSA9IHRoaXMuZ2FtZS5zdGF0ZS5jdXJyZW50X3Jvb20gYXMgcDJwX3Jvb208dW5rbm93bj47XG4gICAgICAgIHN3aXRjaCh0eXBlKXtcbiAgICAgICAgICAgIGNhc2UgXCJ1cGRhdGVfaXRlbVwiOntcbiAgICAgICAgICAgICAgbGV0IHtpZCxzdGF0ZX0gPSBkYXRhO1xuICAgICAgICAgICAgICBsZXQgb2JqID0gcm9vbS5nZXRPYmooaWQpO1xuICAgICAgICAgICAgICBmb3IobGV0IGtleSBvZiBPYmplY3Qua2V5cyhzdGF0ZSkpe1xuICAgICAgICAgICAgICAgICg8YW55Pm9iai5zdGF0ZSlba2V5XSA9IEpTT04ucGFyc2Uoc3RhdGVba2V5XSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9ICAgICAgIFxuICAgICAgICAgICAgY2FzZSBcImFkZF9pdGVtXCI6e1xuICAgICAgICAgICAgICBsZXQge3N0YXRlX2NvbmZpZyxpZH0gPSBkYXRhO1xuICAgICAgICAgICAgICByb29tLmFkZEl0ZW1TdGF0ZUNvbmZpZyhzdGF0ZV9jb25maWcsaWQpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJjb25uZWN0aW9uXCI6e1xuICAgICAgICAgICAgICAgIGxldCB7YWRkcmVzcyxsb2NhbF9pZH0gPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICAgICAgIGlmKGFkZHJlc3MgPT0gdGhpcy5pZCl7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxfaWQgPSBsb2NhbF9pZDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYodGhpcy5jdXJyZW50X3BsYXllcnMgPCB0aGlzLm1heF9wbGF5ZXJzICYmICF0aGlzLnBlZXJfY29ubmVjdGlvbnMubWFwKGVudCA9PiBlbnQucGVlcl9pZCkuaW5jbHVkZXMoYWRkcmVzcykpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3QoYWRkcmVzcyx0aGlzLnBhc3N3b3JkLGxvY2FsX2lkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXhfcGxheWVycysrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcm9vbS5wYXJzZV9wYWNrZXQodHlwZSxkYXRhLGxvY2FsX2lkKTtcbiAgICB9XG4gICAgYXN5bmMgY29ubmVjdChhZGRyZXNzOiBzdHJpbmcsIHBhc3N3b3JkID0gXCJcIiwgbG9jYWxfaWQ6c3RyaW5nID0gdW5kZWZpbmVkKTpQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZWNpZXZlX2Nvbm5lY3QocGVlcjpQZWVyLkRhdGFDb25uZWN0aW9uKSB7XG5cbiAgICB9XG4gICAgZXJyb3IoZXJyb3I6YW55KXtcblxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFNpbmdsZV9QbGF5ZXIgZXh0ZW5kcyBOZXR3b3JrIHtcbiAgICB0eXBlID0gbmV0X3R5cGUuc2luZ2xlX3BsYXllcjtcbn1cblxuZXhwb3J0IGNsYXNzIFdlYiBleHRlbmRzIE5ldHdvcmsge1xuICAgIHR5cGUgPSBuZXRfdHlwZS53ZWI7XG4gICAgYXN5bmMgY29ubmVjdChhZGRyZXNzOiBzdHJpbmcscGFzc3dvcmQgPSBcIlwiLCBsb2NhbF9pZDpzdHJpbmcgPSBcIjBcIik6UHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxib29sZWFuPigocmVzb2x2ZSxyZWplY3QpPT57XG4gICAgICAgICAgICBsZXQgcGVlciA9IHRoaXMubG9jYWxfY29ubmVjdGlvbi5jb25uZWN0KGFkZHJlc3MpO1xuICAgICAgICAgICAgcGVlci5vbihcIm9wZW5cIiwoKT0+e1xuICAgICAgICAgICAgICAgIGxldCBlbnRyeTpwZWVyID0ge1xuICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGVkOmZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uOnBlZXIsXG4gICAgICAgICAgICAgICAgICAgIHBlZXJfaWQ6YWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxfaWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wZWVyX2Nvbm5lY3Rpb25zLnB1c2goZW50cnkpO1xuICAgICAgICAgICAgICAgIHBlZXIuc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6XCJwYXNzd29yZFwiLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOnBhc3N3b3JkXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHBlZXIub24oXCJkYXRhXCIsKGQpPT57XG4gICAgICAgICAgICAgICAgICAgIGxldCB7dHlwZSxkYXRhfSA9IEpTT04ucGFyc2UoZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGUgPT0gXCJhdXRoXCIgJiYgZGF0YS5yZXN1bHQgPT0gXCJzdWNjZXNzXCIgJiYgIWVudHJ5LmF1dGhlbnRpY2F0ZWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkuYXV0aGVudGljYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZWVyLm9uKFwiZGF0YVwiLCAoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB7dHlwZSxkYXRhLGlkfSA9IEpTT04ucGFyc2UoZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWNpZXZlKHR5cGUsZGF0YSxlbnRyeS5sb2NhbF9pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuICAgIHNlbmQodHlwZTpzdHJpbmcsZGF0YTphbnkpe1xuICAgICAgICBmb3IobGV0IHBlZXIgb2YgdGhpcy5wZWVyX2Nvbm5lY3Rpb25zKXtcbiAgICAgICAgICAgIHBlZXIuY29ubmVjdGlvbi5zZW5kKEpTT04uc3RyaW5naWZ5KHt0eXBlLGRhdGEsaWQ6dGhpcy5sb2NhbF9pZH0pKVxuICAgICAgICB9XG4gICAgfVxuICAgIHJlY2lldmVfY29ubmVjdChwZWVyOlBlZXIuRGF0YUNvbm5lY3Rpb24pe1xuICAgICAgICBsZXQgZW50cnk6cGVlciA9IHtcbiAgICAgICAgICAgIGNvbm5lY3Rpb246cGVlcixcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0ZWQ6ZmFsc2UsXG4gICAgICAgICAgICBwZWVyX2lkOnBlZXIucGVlcixcbiAgICAgICAgICAgIGxvY2FsX2lkOnVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGVlcl9jb25uZWN0aW9ucy5wdXNoKGVudHJ5KTtcbiAgICAgICAgcGVlci5vbihcImRhdGFcIiwoZCk9PntcbiAgICAgICAgICAgIGxldCB7dHlwZSxkYXRhfSA9IEpTT04ucGFyc2UoZCk7XG4gICAgICAgICAgICBpZih0eXBlID09IFwicGFzc3dvcmRcIiAmJiBkYXRhID09IHRoaXMucGFzc3dvcmQgJiYgIWVudHJ5LmF1dGhlbnRpY2F0ZWQpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicGFzc3dvcmQgcmlnaHRcIilcbiAgICAgICAgICAgICAgICBlbnRyeS5hdXRoZW50aWNhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBlbnRyeS5sb2NhbF9pZCA9IGAke3RoaXMuaWRfY291bnRlcisrfWBcbiAgICAgICAgICAgICAgICBwZWVyLnNlbmQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOlwiYXV0aFwiLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOntcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDpcInN1Y2Nlc3NcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2lnbmVkX2lkOmVudHJ5LmxvY2FsX2lkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmQoXCJjb25uZWN0aW9uXCIsSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOnBlZXIucGVlcixcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxfaWQ6ZW50cnkubG9jYWxfaWRcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgZW50cnkuYXV0aGVudGljYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcGVlci5vbihcImRhdGFcIiwoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQge3R5cGUsZGF0YX0gPSBKU09OLnBhcnNlKGQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY2lldmUodHlwZSxkYXRhLGVudHJ5LmxvY2FsX2lkKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZih0eXBlID09IFwicGFzc3dvcmRcIiAmJiBkYXRhICE9IHRoaXMucGFzc3dvcmQpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicGFzc3dvcmQgd3JvbmdcIilcbiAgICAgICAgICAgICAgICBwZWVyLnNlbmQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOlwiYXV0aFwiLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBcImZhaWx1cmVcIlxuICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbn0iLCJpbXBvcnQgeyBzdGF0ZV9mdW5jLCBvYmpfc3RhdGUsIFZlY3RvciwgZGltZW5zaW9ucyB9IGZyb20gXCIuL3N0YXRlXCI7XG5pbXBvcnQgeyByZW5kZXJfZnVuYywgcmVuZGVyX3R5cGUgLHNjYWxlX3R5cGV9IGZyb20gXCIuL3JlbmRlclwiO1xuaW1wb3J0IHsgUGFydGljbGUsIHBvc2l0aW9uZWRfc3ByaXRlLCBzcHJpdGUsIHNwcml0ZV9nZW4gfSBmcm9tIFwiLi9zcHJpdGVcIjtcbmltcG9ydCB7IGNvbGxpc2lvbl9ib3ggfSBmcm9tIFwiLi9jb2xsaXNpb25cIjtcbmltcG9ydCB7IFVuYmluZCwgQmluZCwgY29udHJvbF9mdW5jLCBleGVjX3R5cGUgfSBmcm9tIFwiLi9jb250cm9sc1wiO1xuaW1wb3J0IHthdWRpb30gZnJvbSBcIi4vYXVkaW9cIjtcbmltcG9ydCB7REVCVUcsIGNvcHksIGdhbWV9IGZyb20gXCIuLi92YW5cIjtcbmltcG9ydCB7IFZlYyxyb3RhdGlvbl9sZW5ndGgsYW5nbGVfdG93YXJkcyB9IGZyb20gXCIuL21hdGhcIjtcbmltcG9ydCB7cm9vdF9wYXRoLHBhdGh9IGZyb20gXCIuLi9saWIvZGVidWdcIjsgXG5pbXBvcnQge1RleHR9IGZyb20gXCIuL2h1ZFwiO1xuaW1wb3J0IHtkaWZmLCBzdHJpbmdfZGljdH0gZnJvbSBcImxpYi91dGlsc1wiO1xuXG5pbnRlcmZhY2Ugb2JqX2k8VD4ge1xuICBzdGF0ZWY6IHN0YXRlX2Z1bmM8VD4sXG4gIHJlbmRlcmY6IHJlbmRlcl9mdW5jXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJZChhOiBvYmpbXSwgaWQ6IHN0cmluZyk6IG9iaiB7XG4gIGZvciAobGV0IGIgPSAwOyBiIDwgYS5sZW5ndGg7IGIrKykge1xuICAgIGlmIChhW2JdLmlkID09IGlkKSB7XG4gICAgICByZXR1cm4gYVtiXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuXG5cbi8vVGhpcyBjb3VudGVyIHRyYWNrcyB0aGUgZ2xvYmFsIG51bWJlciBvZiBvYmplY3RzIGNyZWF0ZWQgc28gZmFyXG4vL2FuIG9iamVjdCdzIGlkIChpZiBub3Qgb3ZlcndyaXR0ZW4pIHdpbGwgYmUgYSB1bmlxdWUgaW50ZWdlciwgd2hpY2hcbi8vdXNlcyB0aGlzIGNvdW50ZXIuXG5sZXQgY291bnRlciA9IDA7XG5cbmludGVyZmFjZSBhbmltX3N0b3JhZ2Uge1xuICBbaW5kZXg6IHN0cmluZ106IFtBcnJheTxbbnVtYmVyLCBzcHJpdGVdPiwgbnVtYmVyXVxufVxuXG5pbnRlcmZhY2Ugdm9pZF9mdW5jIHtcbiAgKCk6IHZvaWRcbn1cblxuY2xhc3MgYW5pbWF0aW9ucyB7XG4gIGFuaW1hdGlvbnM6IGFuaW1fc3RvcmFnZSA9IHt9O1xuICAvL1RyYWNrcyB0aGUgdGltZSBwYXNzZWQgc2luY2UgdGhlIGN1cnJlbnQgYW5pbWF0aW9uXG4gIC8vaGFzIHN0YXJ0ZWQgcGxheWluZ1xuICBhbmltYXRpb25fdHJhY2tlciA9IDA7XG4gIGN1cnJlbnQ6IHN0cmluZztcbiAgY2FsbGJhY2s6IHZvaWRfZnVuYztcbiAgYW5pbWF0aW5nOmJvb2xlYW4gPSBmYWxzZTtcbiAgLy9kZWZpbmVzIGFuIGFuaW1hdGlvbiB0aGF0IGNhbiBiZSBwbGF5ZWQgdXNpbmcgdGhlIHBsYXkgbWV0aG9kXG4gIC8vdGhlIGtleWZyYW1lcyBhcmUgYW4gYXJyYXkgb2YgdHVwbGVzIGluIHRoZSBcbiAgLy9mb3JtYXQgb2YgWyh0aW1lIGZvciB0aGlzIHNwcml0ZSB0byBzaG93KSwgc3ByaXRlXVxuICBhZGQobmFtZTogc3RyaW5nLCBrZXlmcmFtZXM6IEFycmF5PFtudW1iZXIsIHNwcml0ZV0+LCBsZW5ndGg6IG51bWJlcikge1xuICAgIHRoaXMuYW5pbWF0aW9uc1tuYW1lXSA9IFtrZXlmcmFtZXMsIGxlbmd0aF07XG4gIH1cbiAgcGxheShuYW1lOiBzdHJpbmcsIGNhbGxiYWNrPzogdm9pZF9mdW5jKSB7XG4gICAgdGhpcy5jdXJyZW50ID0gbmFtZTtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgdGhpcy5hbmltYXRpb25fdHJhY2tlciA9IDA7XG4gIH1cbiAgcmVuZGVyZih0OiBudW1iZXIpOiBzcHJpdGUge1xuICAgIGxldCBjdXJyX2FuaW1hdGlvbiA9IHRoaXMuYW5pbWF0aW9uc1t0aGlzLmN1cnJlbnRdWzBdO1xuICAgIGxldCBsZW5ndGg6IG51bWJlciA9IHRoaXMuYW5pbWF0aW9uc1t0aGlzLmN1cnJlbnRdWzFdO1xuICAgIGxldCBpbmRleCA9IDA7XG4gICAgZm9yICg7IGluZGV4IDwgY3Vycl9hbmltYXRpb24ubGVuZ3RoIC0gMTsgaW5kZXgrKykge1xuICAgICAgbGV0IGtleWZyYW1lX3RpbWUgPSBjdXJyX2FuaW1hdGlvbltpbmRleF1bMF07XG4gICAgICBsZXQgbmV4dF9rZXlmcmFtZV90aW1lID0gY3Vycl9hbmltYXRpb25baW5kZXggKyAxXVswXTtcbiAgICAgIGlmICh0aGlzLmFuaW1hdGlvbl90cmFja2VyID49IGtleWZyYW1lX3RpbWUgJiYgdGhpcy5hbmltYXRpb25fdHJhY2tlciA8IG5leHRfa2V5ZnJhbWVfdGltZSkge1xuICAgICAgICB0aGlzLmFuaW1hdGlvbl90cmFja2VyID0gdGhpcy5hbmltYXRpb25fdHJhY2tlciArIHQ7XG4gICAgICAgIHRoaXMuYW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgLy9SZXR1cm5zIHRoZSByYXcgc3ByaXRlIHRoYXQncyBjb3JyZWN0IHRvIHNob3cgYXQgdGhpcyB0aW1lXG4gICAgICAgIHJldHVybiBjdXJyX2FuaW1hdGlvbltpbmRleF1bMV07XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmFuaW1hdGlvbl90cmFja2VyID49IGxlbmd0aCkge1xuICAgICAgdGhpcy5hbmltYXRpb25fdHJhY2tlciA9IDA7XG4gICAgICB0aGlzLmFuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMuY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5jYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuYW5pbWF0aW9uX3RyYWNrZXIgKz0gdDtcbiAgICB9XG4gICAgLy9SZXR1cm5zIHRoZSBsYXN0IGFwcHJvcHJpYXRlIGZyYW1lIHVudGlsIHRoZSBhbmltYXRpb24gaXMgb3Zlci5cbiAgICByZXR1cm4gY3Vycl9hbmltYXRpb25baW5kZXhdWzFdO1xuICB9XG59XG5cbmludGVyZmFjZSBoaXRib3h7XG4gIHdpZHRoOm51bWJlcixcbiAgaGVpZ2h0Om51bWJlcixcbiAgeF9vZmZzZXQ6bnVtYmVyLFxuICB5X29mZnNldDpudW1iZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBwYXJhbXN7XG4gIFtpbmRleDpzdHJpbmddOmJvb2xlYW58c3RyaW5nfG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIGJvdW5kaW5nX2JveHtcbiAgYm90dG9tX2xlZnQ6VmVjdG9yLFxuICB0b3BfcmlnaHQ6VmVjdG9yXG59XG5cbmludGVyZmFjZSBjYWNoZV9lbnRyaWVze1xuICBbaW5kZXg6c3RyaW5nXTphbnlcbn1cblxuaW50ZXJmYWNlIHN0cmluZ19tYXA8VD57XG4gIFtpbmRleDpzdHJpbmddOlRcbn1cblxuaW50ZXJmYWNlIGV2ZW50X2hhbmRsZXJ7XG4gIHR5cGU6c3RyaW5nLFxuICBpbmRleDpudW1iZXJcbn1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIG9iantcbiAgLy9VcmwgdG8gdGhlIG9iamVjdCdzIGluZGl2aWR1YWwgc3ByaXRlLCBvciBhbGwgb2YgaXRzIHNwcml0ZXNcbiAgLy9idW5kbGVkIGludG8gYSBzcHJpdGVzaGVldFxuICBzcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvRXJyb3IucG5nXCI7XG4gIC8vVGhpcyBpcyB0aGUgbG9hZGVkIHNwcml0ZS9zcHJpdGVzaGVldCBvZiB0aGUgb2JqZWN0XG4gIC8vd2hpY2ggaXMgZmV0Y2hlZCBmcm9tIHRoZSB1cmwgYWJvdmVcbiAgc3ByaXRlX3NoZWV0OiBIVE1MSW1hZ2VFbGVtZW50O1xuICBzcHJpdGVfc2hlZXRfYmFzZTY0OnN0cmluZztcbiAgc3RhdGU6IG9ial9zdGF0ZTtcbiAgcmVuZGVyX3R5cGUgPSByZW5kZXJfdHlwZS5zcHJpdGU7XG4gIC8vVGhlc2Ugc2hvdWxkIGNvcnJlc3BvbmQgdG8gdGhlIGFjdHVhbCBvYmplY3QncyBzcHJpdGUgaGVpZ2h0IGFuZCB3aWR0aFxuICAvL0lmIHVzaW5nIGEgc3ByaXRlIHNoZWV0LCB0aGVzZSBiZSBvbmUgc3ByaXRlJ3MgaGVpZ2h0IGFuZCB3aWR0aC5cbiAgaGVpZ2h0OiBudW1iZXI7XG4gIHdpZHRoOiBudW1iZXI7XG4gIFxuICBjb2xsaXNpb246IGJvb2xlYW4gPSBmYWxzZTtcbiAgaGl0Ym94OiBoaXRib3hcbiAgaWQ6IHN0cmluZztcbiAgLy9BcnJheSBvZiBiaW5kIGlkc1xuICAvL0JpbmRzIGFyZSBpbmRlbnRpZmllZCBieSBhIHVuaXF1ZSBudW1iZXIgdGhhdCBpcyByZXR1cm4gd2hlblxuICAvL1RoZSBiaW5kIGlzIGNyZWF0ZWQuIFdlIG11c3Qgc3RvcmUgdGhlc2UgaWRzIGluIG9yZGVyIHRvIFxuICAvL2RlbGV0ZSB0aGUgYmluZHMgd2hlbiB0aGV5IGFyZSBtYW51YWxseSB1bmJvdW5kLCBvciB0aGUgb2JqZWN0IGlzIGRlbGV0ZWQuXG4gIGJpbmRzOiBBcnJheTxudW1iZXI+O1xuICB0YWdzOlNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICAvL3RhZ3MgYXJlIHVzZWQgdG8gZXhjbHVkZSBvciBpbmNsdWRlIG9iamVjdHMgd2hlbiBjaGVja2luZyBmb3IgY29sbGlzaW9ucyxcbiAgLy9hbmQgZm9yIG9iamVjdCBpZGVudGlmaWNhdGlvbiAvIGNsYXNzaWZpY2F0aW9uIGluIHNjcmlwdHNcbiAgcmVuZGVyID0gdHJ1ZTtcbiAgYW5pbWF0aW9ucyA9IG5ldyBhbmltYXRpb25zKCk7XG4gIGF1ZGlvID0gbmV3IGF1ZGlvKCk7XG4gIC8vTGFzdCByZW5kZXIgdGltZSwgdXNlZCB0byBjYWxjdWxhdGUgZGVsdGFfdGltZVxuICBsYXN0X3JlbmRlcjpudW1iZXIgPSAwO1xuICBnYW1lOmdhbWU8dW5rbm93bj47XG4gIHBhcmVudDpjb21wb3NpdGVfb2JqO1xuICAvL1BhcmFtcyBhcmUgb3B0aW9ucyBmb3IgdGhlIG9iamVjdCwgdGhhdCBkbyBub3QgcmVseSBvbiBzdGF0ZVxuICAvLyBGb3IgZXhhbXBsZSwgdGhlIHNpZGUgb2YgYSBwaWVjZSBpbiBjaGVzcy5cbiAgcGFyYW1zOnVua25vd24gPSB7fTtcbiAgc3RhdGljID0gZmFsc2U7XG4gIGxheWVyOm51bWJlciA9IDE7XG4gIHNhdmVfdG9fZmlsZTpib29sZWFuID0gdHJ1ZTtcbiAgdGlja19zdGF0ZSA9IHRydWU7XG4gIHNjYWxlX3R5cGUgPSBzY2FsZV90eXBlLmdyb3c7XG4gIHN0YXRpYyBkZWZhdWx0X3BhcmFtczp1bmtub3duID0ge307XG4gIHByb3hpbWl0eV9ib3hlczpTZXQ8VmVjdG9yPiA9IG5ldyBTZXQoKTtcbiAgb3BhY2l0eTpudW1iZXI7XG4gIGh1ZF9jbGlja2FibGU6Ym9vbGVhbiA9IHRydWU7XG4gIGluZm86c3RyaW5nX21hcDxhbnk+ID0ge31cbiAgdGV4dF9ub2RlczpUZXh0W10gPSBbXTtcbiAgY2FjaGVfZW50cmllczpzdHJpbmdfbWFwPGFueT4gPSB7fTtcbiAgaW50ZXJuYWxfY2FjaGU6c3RyaW5nX21hcDxhbnk+ID0ge307XG4gIHN0YXRlX3Byb3BlcnRpZXNfdG9fc3luYzpzdHJpbmdbXSA9IFtdO1xuICBwYXN0X3N0YXRlOnN0cmluZ19tYXA8c3RyaW5nPiA9IHt9O1xuICBkaWZmX3N0YXRlOnN0cmluZ19tYXA8c3RyaW5nPiA9IHt9O1xuICBldmVudF9oYW5kbGVyczpzdHJpbmdfbWFwPHZvaWRfZnVuY1tdPiA9IHt9O1xuICBnZXRTdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgfVxuICAvL0FuaW1hdGlvbnMgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgdXNpbmcgdGhpcy5hbmltYXRpb25zLmFkZCBpbiB0aGlzIG1ldGhvZFxuICByZWdpc3RlckFuaW1hdGlvbnMoKSB7XG5cbiAgfVxuICAvL1NvdW5kcyBzaG91bGQgYmUgcmVnaXN0ZXJlZCB1c2luZyB0aGlzLmF1ZGlvLmFkZCBpbiB0aGlzIG1ldGhvZC5cbiAgcmVnaXN0ZXJBdWRpbygpIHtcblxuICB9XG4gIHJlZ2lzdGVyRXZlbnRzKCl7XG5cbiAgfVxuICByZW1vdmVBbGxFdmVudEhhbmRsZXJzKCl7XG4gICAgdGhpcy5ldmVudF9oYW5kbGVycyA9IHt9O1xuICB9XG4gIHJlbW92ZUV2ZW50SGFuZGxlcihldmVudDpldmVudF9oYW5kbGVyKXtcbiAgICB0aGlzLmV2ZW50X2hhbmRsZXJzW2V2ZW50LnR5cGVdLnNwbGljZShldmVudC5pbmRleCwxKTtcbiAgfVxuICBhZGRFdmVudEhhbmRsZXIoZXZlbnQ6c3RyaW5nLGZ1bmM6dm9pZF9mdW5jKTpldmVudF9oYW5kbGVye1xuICAgIGlmKCF0aGlzLmV2ZW50X2hhbmRsZXJzW2V2ZW50XSl7XG4gICAgICB0aGlzLmV2ZW50X2hhbmRsZXJzW2V2ZW50XSA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50X2hhbmRsZXJzW2V2ZW50XS5wdXNoKGZ1bmMpO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOmV2ZW50LFxuICAgICAgaW5kZXg6dGhpcy5ldmVudF9oYW5kbGVyc1tldmVudF0uaW5kZXhPZihmdW5jKVxuICAgIH1cbiAgfVxuICBldmVudChldmVudDpzdHJpbmcpe1xuICAgIGlmKHRoaXMuZXZlbnRfaGFuZGxlcnNbZXZlbnRdKXtcbiAgICAgIGZvcihsZXQgZnVuYyBvZiB0aGlzLmV2ZW50X2hhbmRsZXJzW2V2ZW50XSl7XG4gICAgICAgIGZ1bmMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZGVmYXVsdFBhcmFtcygpOnVua25vd257XG4gICAgcmV0dXJuIGNvcHkodGhpcy5kZWZhdWx0UGFyYW1zKTtcbiAgfVxuICB4X3Byb3h5KHZhbDpudW1iZXIpe1xuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgeV9wcm94eSh2YWw6bnVtYmVyKXtcbiAgICByZXR1cm4gdmFsO1xuICB9XG4gIHJlY2FsY3VsYXRlUHJveEJveGVzKCl7XG4gICAgbGV0IGJvdW5kcyA9IHRoaXMuZ2V0Qm91bmRpbmdCb3goKTtcbiAgICAgICAgICBcbiAgICBsZXQgcHJveF9tYXAgPSB0aGlzLmdhbWUuZ2V0Um9vbSgpLnByb3hpbWl0eV9tYXA7XG4gICAgbGV0IGJveGVzID0gcHJveF9tYXAuZ2V0Qm94TG9jYXRpb25zKHRoaXMpO1xuICAgIGZvciAobGV0IGNvcmQgb2YgdGhpcy5wcm94aW1pdHlfYm94ZXMpIHtcbiAgICAgIHByb3hfbWFwLnJlbW92ZShjb3JkLCB0aGlzKTtcbiAgICB9XG4gICAgZm9yIChsZXQgY29yZCBvZiBib3hlcykge1xuICAgICAgcHJveF9tYXAuYWRkKGNvcmQsIHRoaXMpO1xuICAgIH0gIFxuICB9XG4gIGNvbnN0cnVjdG9yKHN0YXRlOm9ial9zdGF0ZSxwYXJhbXMgPSBvYmouZGVmYXVsdF9wYXJhbXMpIHtcblxuICAgIHRoaXMuaWQgPSBcIlwiICsgY291bnRlcjtcbiAgICB0aGlzLmJpbmRzID0gW107XG4gICAgY291bnRlcisrO1xuICAgIHRoaXMucGFyYW1zID0gT2JqZWN0LmFzc2lnbih7fSxwYXJhbXMpO1xuICAgIHRoaXMucmVnaXN0ZXJDb250cm9scygpO1xuICAgIHRoaXMucmVnaXN0ZXJBdWRpbygpO1xuICAgIHRoaXMucmVnaXN0ZXJFdmVudHMoKTtcbiAgICBsZXQgcG9zaXRpb25fcHJveHkgPSAocG9zOlZlY3RvcikgPT4gbmV3IFByb3h5KHBvcywge1xuICAgICAgXCJzZXRcIjogKHRhcmdldCwgcHJvcCwgcmVjaWV2ZXI6IG51bWJlcikgPT4ge1xuXG4gICAgICAgIGlmIChwcm9wID09IFwieVwiIHx8IHByb3AgPT0gXCJ4XCIpIHtcbiAgICAgICAgICBpZiAodGFyZ2V0W3Byb3BdID09IHJlY2lldmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IHJvb20gPSB0aGlzLmdhbWUuZ2V0Um9vbSgpO1xuICAgICAgICAgIGxldCBvZmZzZXQgPSAwXG4gICAgICAgICAgaWYgKHByb3AgPT0gXCJ5XCIpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IHRoaXMuZ2V0RnVsbENvbGxpc2lvbkJveCgpLmhlaWdodCAvIDI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKHByb3AgPT0gXCJ4XCIpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IHRoaXMuZ2V0RnVsbENvbGxpc2lvbkJveCgpLndpZHRoIC8gMjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJlY2lldmVyID4gMCkge1xuICAgICAgICAgICAgb2Zmc2V0ID0gLW9mZnNldDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJlY2lldmVyID4gcm9vbS5wcm94aW1pdHlfbWFwLmxlbmd0aCAvIDIgKyBvZmZzZXQpIHtcbiAgICAgICAgICAgIHJlY2lldmVyID0gcm9vbS5wcm94aW1pdHlfbWFwLmxlbmd0aCAvIDIgKyBvZmZzZXQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChyZWNpZXZlciA8IC1yb29tLnByb3hpbWl0eV9tYXAubGVuZ3RoIC8gMiArIG9mZnNldCkge1xuICAgICAgICAgICAgcmVjaWV2ZXIgPSAtcm9vbS5wcm94aW1pdHlfbWFwLmxlbmd0aCAvIDIgKyBvZmZzZXRcbiAgICAgICAgICB9XG4gICAgICAgICAgdGFyZ2V0W3Byb3BdID0gdGhpcy54X3Byb3h5KHJlY2lldmVyKTtcbiAgICAgICAgICB0aGlzLnJlY2FsY3VsYXRlUHJveEJveGVzKCk7XG4gICAgICAgICAgaWYodGhpcy5zdGF0aWMpe1xuICAgICAgICAgICAgbGV0IGNvbF9ib3ggPSB0aGlzLmdldEZ1bGxDb2xsaXNpb25Cb3goKTtcbiAgICAgICAgICAgIGNvbF9ib3guaGVpZ2h0ID0gY29sX2JveC5oZWlnaHQgKyAyICogdGhpcy5nYW1lLmdldFJvb20oKS5wcm94aW1pdHlfbWFwLnNxdWFyZV9sZW5ndGg7XG4gICAgICAgICAgICBjb2xfYm94LndpZHRoID0gY29sX2JveC53aWR0aCArIDIgKiB0aGlzLmdhbWUuZ2V0Um9vbSgpLnByb3hpbWl0eV9tYXAuc3F1YXJlX2xlbmd0aDtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS51cGRhdGVTdGF0aWNzSW5Db2xsaXNpb24oY29sX2JveCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGxldCBzY2FsaW5nX3Byb3h5ID0gKGE6ZGltZW5zaW9ucykgPT4gbmV3IFByb3h5KGEse1xuICAgICAgXCJzZXRcIiA6ICh0YXJnZXQscHJvcCxyZWNpZXZlcjpudW1iZXIpID0+IHtcbiAgICAgICAgaWYocHJvcCA9PSBcIndpZHRoXCIgfHwgcHJvcCA9PSBcImhlaWdodFwiKXtcbiAgICAgICAgICB0YXJnZXRbcHJvcF0gPSByZWNpZXZlcjtcbiAgICAgICAgICB0aGlzLnJlY2FsY3VsYXRlUHJveEJveGVzKCk7XG4gICAgICAgICAgaWYodGhpcy5zdGF0aWMpe1xuICAgICAgICAgICAgdGhpcy5nYW1lLnVwZGF0ZVN0YXRpY3NJbkNvbGxpc2lvbih0aGlzLmdldEZ1bGxDb2xsaXNpb25Cb3goKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8vQ3JlYXRlcyBhIGNvcHkgb2YgdGhlIHBhc3NlZCBpbiBpbml0aWFsIHN0YXRlIHRvIGF2b2lkIFxuICAgIC8vVXBkYXRpbmcgdGhlIHNhdmVkIHN0YXRlIG9mIHRoZSByb29tXG4gICAgdGhpcy5zdGF0ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3RhdGUpKTtcbiAgICB0aGlzLmluZm8gPSB7XG4gICAgICBvbl9odWRfbGF5ZXI6ZmFsc2VcbiAgICB9XG4gICAgaWYoIXN0YXRlLnZlbG9jaXR5KXtcbiAgICAgIHRoaXMuc3RhdGUudmVsb2NpdHkgPSBWZWMuY3JlYXRlKDAsMCk7XG4gICAgfVxuICAgIGlmKCFzdGF0ZS5zY2FsaW5nKXtcbiAgICAgIHRoaXMuc3RhdGUuc2NhbGluZyA9IHtoZWlnaHQ6MSx3aWR0aDoxfTtcbiAgICB9XG4gICAgaWYoIXN0YXRlLnJvdGF0aW9uKXtcbiAgICAgIHRoaXMuc3RhdGUucm90YXRpb24gPSAwO1xuICAgIH1cbiAgICB0aGlzLnN0YXRlID0gbmV3IFByb3h5KHRoaXMuc3RhdGUse1xuICAgICAgXCJzZXRcIjogKHRhcmdldCwgcHJvcCwgcmVjaWV2ZXI6IHVua25vd24pID0+IHtcbiAgICAgICAgaWYgKHByb3AgPT0gXCJwb3NpdGlvblwiKSB7XG4gICAgICAgICAgbGV0IHJlcyA9IHJlY2lldmVyIGFzIFZlY3RvcjtcbiAgICAgICAgICBsZXQgdmVjID0gVmVjLmNyZWF0ZShyZXMueCxyZXMueSk7XG4gICAgICAgICAgdGFyZ2V0W3Byb3BdID0gcG9zaXRpb25fcHJveHkodmVjKTtcbiAgICAgICAgICBpZih0aGlzLmdhbWUgJiYgdGhpcy5nYW1lLmdldFJvb20oKSl7XG4gICAgICAgICAgICB0aGlzLnJlY2FsY3VsYXRlUHJveEJveGVzKCk7XG4gICAgICAgICAgICBpZih0aGlzLnN0YXRpYyl7XG4gICAgICAgICAgICAgIHRoaXMuZ2FtZS51cGRhdGVTdGF0aWNzSW5Db2xsaXNpb24odGhpcy5nZXRGdWxsQ29sbGlzaW9uQm94KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmKHByb3AgPT0gXCJzY2FsaW5nXCIpe1xuICAgICAgICAgIGxldCByZXMgPSByZWNpZXZlciBhcyBkaW1lbnNpb25zO1xuICAgICAgICAgIGxldCBkaW0gPSB7d2lkdGg6cmVzLndpZHRoLGhlaWdodDpyZXMuaGVpZ2h0fTtcbiAgICAgICAgICB0YXJnZXRbcHJvcF0gPSBzY2FsaW5nX3Byb3h5KGRpbSk7XG4gICAgICAgICAgaWYodGhpcy5nYW1lICYmIHRoaXMuZ2FtZS5nZXRSb29tKCkpe1xuICAgICAgICAgICAgdGhpcy5yZWNhbGN1bGF0ZVByb3hCb3hlcygpO1xuICAgICAgICAgICAgaWYodGhpcy5zdGF0aWMpe1xuICAgICAgICAgICAgICB0aGlzLmdhbWUudXBkYXRlU3RhdGljc0luQ29sbGlzaW9uKHRoaXMuZ2V0RnVsbENvbGxpc2lvbkJveCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAodGFyZ2V0IGFzIGFueSlbcHJvcF0gPSByZWNpZXZlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLnN0YXRlLnBvc2l0aW9uID0gcG9zaXRpb25fcHJveHkodGhpcy5zdGF0ZS5wb3NpdGlvbik7IFxuICAgIHRoaXMuc3RhdGUuc2NhbGluZyA9IHNjYWxpbmdfcHJveHkodGhpcy5zdGF0ZS5zY2FsaW5nKTtcbiAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgfVxuICBtdXRhdGUoa2V5OnN0cmluZyx2YWx1ZTphbnkpe1xuICAgICg8YW55PnRoaXMpW2tleV0gPSB2YWx1ZTtcbiAgfVxuICBnZXRSb29tPFQ+KCk6VHtcbiAgICByZXR1cm4gdGhpcy5nYW1lLmdldFJvb20oKSBhcyB1bmtub3duIGFzIFQ7XG4gIH1cblxuICBsb2FkKCkge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgbGV0IHVybCA9IHRoaXMuc3ByaXRlX3VybDtcbiAgICAgIGlmKERFQlVHKXtcbiAgICAgICAgdXJsID0gcGF0aC5qb2luKHJvb3RfcGF0aCx0aGlzLnNwcml0ZV91cmwpO1xuICAgICAgfVxuICAgICAgaW1hZ2Uuc3JjID0gdXJsO1xuICAgICAgaW1hZ2Uub25sb2FkID0gKGFzeW5jICgpID0+IHtcbiAgICAgICAgX3RoaXMuc3ByaXRlX3NoZWV0ID0gaW1hZ2U7XG4gICAgICAgIF90aGlzLnJlZ2lzdGVyQW5pbWF0aW9ucygpO1xuICAgICAgICBhd2FpdCB0aGlzLmF1ZGlvLmxvYWQoKTtcbiAgICAgICAgLyp3b3JrZXJfcG9vbC5zZW5kX2FsbChcInNwcml0ZV9zaGVldF9jYWNoZVwiLHtcbiAgICAgICAgICBuYW1lOnRoaXMuY29uc3RydWN0b3IubmFtZSxcbiAgICAgICAgICBlbmNvZGVkXG4gICAgICAgIH0pO1xuICAgICAgICAqL1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICB9KVxuICB9XG4gIC8vV2l0aGluIG5vcm1hbCBvYmplY3RzLCB0aGlzIGp1c3QgcmV0dXJucyBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIHRoZSBvYmplY3QuXG4gIC8vVGhpcyBtZXRob2QgaXMgb3ZlcndyaXR0ZW4gYnkgY29tcG9zaXRlIG9iamVjdHMsIHdoaWNoIHJldHVybnMgZXZlcnkgb2JqZWN0XG4gIC8vdGhhdCB0aGUgY29tcG9zaXRlIG9iamVjdCBjb250YWlucy4gVGhpcyBzaW1wbGlmaWVzIHRoZSBiYWNrZW5kIHdvcmssIGFzIGVhY2hcbiAgLy9vYmplY3QgcmV0dXJucyBhbiBhcnJheSBvZiBhdGxlYXN0IG9uZSBvYmplY3QuXG4gIGNvbWJpbmVkT2JqZWN0cygpOm9ialtde1xuICAgIHJldHVybiBbdGhpc107XG4gIH1cbiAgZ2V0Qm91bmRpbmdCb3goKTpib3VuZGluZ19ib3h7XG4gICAgbGV0IGNvbGxfYm94ID0gdGhpcy5nZXRGdWxsQ29sbGlzaW9uQm94KCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvcF9yaWdodDp7XG4gICAgICAgIHg6Y29sbF9ib3gueCArIGNvbGxfYm94LndpZHRoLzIsXG4gICAgICAgIHk6Y29sbF9ib3gueSArIGNvbGxfYm94LmhlaWdodC8yXG4gICAgICB9LFxuICAgICAgYm90dG9tX2xlZnQ6e1xuICAgICAgICB4OmNvbGxfYm94LnggLSBjb2xsX2JveC53aWR0aC8yLFxuICAgICAgICB5OmNvbGxfYm94LnkgLSBjb2xsX2JveC5oZWlnaHQvMlxuICAgICAgfVxuICAgIH1cbiAgfVxuICAvL0Rpc3RhbmNlIGZyb20gb25lIG9iamVjdCB0byBhbm90aGVyLlxuICBkaXN0YW5jZSh0YXJnZXQ6b2JqKTpudW1iZXJ7XG4gICAgcmV0dXJuIFZlYy5kaXN0YW5jZSh0aGlzLnN0YXRlLnBvc2l0aW9uLHRhcmdldC5zdGF0ZS5wb3NpdGlvbik7XG4gIH1cbiAgYXBwbHlGb3JjZSh2ZWw6VmVjdG9yKXtcbiAgICB0aGlzLnN0YXRlLnZlbG9jaXR5LnggKz0gdmVsLng7XG4gICAgdGhpcy5zdGF0ZS52ZWxvY2l0eS55ICs9IHZlbC55O1xuICB9XG4gIGFuZ2xlVG93YXJkcyhhOiBvYmopOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmFuZ2xlVG93YXJkc1BvaW50KGEuc3RhdGUucG9zaXRpb24pO1xuICB9XG4gIGFuZ2xlVG93YXJkc1BvaW50KHRhcmdldDpWZWN0b3IpOm51bWJlcntcbiAgICByZXR1cm4gOTAgLSBNYXRoLmF0YW4yKCh0YXJnZXQueSAtIHRoaXMuc3RhdGUucG9zaXRpb24ueSksKHRhcmdldC54IC0gdGhpcy5zdGF0ZS5wb3NpdGlvbi54KSkgKiAxODAvTWF0aC5QSTtcbiAgfVxuICBiaW5kQ29udHJvbChrZXk6IHN0cmluZywgeDogZXhlY190eXBlLCBmdW5jOiBjb250cm9sX2Z1bmMsIGludGVydmFsID0gMSkge1xuICAgIHRoaXMuYmluZHMucHVzaChCaW5kKGtleSwgZnVuYywgeCwgaW50ZXJ2YWwsIGZhbHNlLCB0aGlzKSk7XG4gIH1cbiAgLy9UaGlzIG1ldGhvZCBpcyB3aGVyZSBjb250cm9scyBhbmQga2V5YmluZHMgc2hvdWxkXG4gIC8vYmUgZGVmaW5lZCB1c2luZyBiaW5kQ29udHJvbFxuICByZWdpc3RlckNvbnRyb2xzKCl7XG5cbiAgfVxuICBzdGF0ZWYodGltZTpudW1iZXIpe1xuICAgIGZvcihsZXQgbm9kZSBvZiB0aGlzLnRleHRfbm9kZXMpe1xuICAgICAgbm9kZS5zdGF0ZWYodGltZSk7XG4gICAgfVxuICAgIGlmKHRoaXMuc3RhdGVfcHJvcGVydGllc190b19zeW5jLmxlbmd0aCA+IDApe1xuICAgICAgbGV0IG5ldHdvcmtfcHJvcGVydGllczpzdHJpbmdfZGljdDxzdHJpbmc+ID0ge31cbiAgICAgIGxldCBzdGF0ZSA9IHRoaXMuc3RhdGUgYXMgYW55O1xuICAgICAgaWYodGhpcy5zdGF0ZV9wcm9wZXJ0aWVzX3RvX3N5bmMpe1xuICAgICAgICBmb3IobGV0IGtleSBvZiB0aGlzLnN0YXRlX3Byb3BlcnRpZXNfdG9fc3luYyl7XG4gICAgICAgICAgbmV0d29ya19wcm9wZXJ0aWVzW2tleV0gPSBKU09OLnN0cmluZ2lmeShzdGF0ZVtrZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5kaWZmX3N0YXRlID0gZGlmZih0aGlzLnBhc3Rfc3RhdGUsbmV0d29ya19wcm9wZXJ0aWVzKVxuICAgICAgdGhpcy5wYXN0X3N0YXRlID0gbmV0d29ya19wcm9wZXJ0aWVzO1xuICAgIH1cbiAgfVxuICBkZWxldGUoKSB7XG4gICAgZm9yIChsZXQgYSBvZiB0aGlzLmJpbmRzKSB7XG4gICAgICBVbmJpbmQoYSk7XG4gICAgfVxuICAgIGZvciAobGV0IGNvcmQgb2YgdGhpcy5wcm94aW1pdHlfYm94ZXMpe1xuICAgICAgdGhpcy5nYW1lLmdldFJvb20oKS5wcm94aW1pdHlfbWFwLnJlbW92ZShjb3JkLHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLmdhbWUuZ2V0Um9vbSgpLmRlbGV0ZUl0ZW0odGhpcy5pZCk7XG4gICAgaWYodGhpcy5zdGF0aWMpe1xuICAgICAgdGhpcy5nYW1lLnVwZGF0ZVN0YXRpY3NJbkNvbGxpc2lvbih0aGlzLmdldEZ1bGxDb2xsaXNpb25Cb3goKSk7XG4gICAgfVxuICB9XG4gIFVuYmluZEFsbCgpe1xuICAgIGZvciAobGV0IGEgb2YgdGhpcy5iaW5kcykge1xuICAgICAgVW5iaW5kKGEpO1xuICAgIH1cbiAgfVxuICAvL1JldHVybnMgdGhlIGNvbGxpc2lvbiBib3ggb2YgdGhlIG9iamVjdFxuICAvL0RvZXMgbm90IGhhdmUgdG8gY29ycmVzcG9uZCB0byB0aGUgb2JqZWN0J3Mgc3ByaXRlJ3Mgc2l6ZSBcbiAgLy9BIGNvbXBvc2l0ZSBvYmplY3QgaW5zdGVhZCByZXR1cm5zIHRoZSBib3VuZGluZyBib3ggdGhhdCBcbiAgLy9jb250YWlucyBldmVyeSBvbmUgb2YgaXRzIGNvbnRhaW5lZCBvYmplY3RzXG4gIGdldEZ1bGxDb2xsaXNpb25Cb3goKTpjb2xsaXNpb25fYm94e1xuICAgIC8vSWYgYSBkZXZlbG9wZXIgZGVmaW5lZCBoaXRib3ggZXhpc3RzLCB1c2UgdGhhdCwgb3RoZXJ3aXNlXG4gICAgLy9nZW5lcmF0ZSBpdCB1c2luZyB0aGUgc3ByaXRlIHdpZHRoIC8gaGVpZ2h0XG4gICAgaWYodGhpcy5oaXRib3gpe1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgeDp0aGlzLnN0YXRlLnBvc2l0aW9uLngsXG4gICAgICAgIHk6dGhpcy5zdGF0ZS5wb3NpdGlvbi55LFxuICAgICAgICB3aWR0aDp0aGlzLmhpdGJveC53aWR0aCAqIHRoaXMuc3RhdGUuc2NhbGluZy53aWR0aCxcbiAgICAgICAgaGVpZ2h0OnRoaXMuaGl0Ym94LmhlaWdodCAqIHRoaXMuc3RhdGUuc2NhbGluZy5oZWlnaHRcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHg6dGhpcy5zdGF0ZS5wb3NpdGlvbi54LFxuICAgICAgICB5OnRoaXMuc3RhdGUucG9zaXRpb24ueSxcbiAgICAgICAgd2lkdGg6dGhpcy53aWR0aCAqIHRoaXMuc3RhdGUuc2NhbGluZy53aWR0aCxcbiAgICAgICAgaGVpZ2h0OnRoaXMuaGVpZ2h0ICogdGhpcy5zdGF0ZS5zY2FsaW5nLmhlaWdodFxuICAgICAgfVxuICAgIH1cbiAgfVxuICAvL1RoaXMgaXMgYW5vdGhlciBtZXRob2RzLCBzaW1pbGFyIHRvIGdldENvbWJpbmVkXG4gIC8vSnVzdCByZXR1cm5zIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIG9iamVjdCdzIGNvbGxpc2lvbiBib3hcbiAgLy9PdmVyd3JpdHRlbiBpbiBjb21wb3NpdGUgb2JqZWN0cyB0byByZXR1cm4gZXZlcnkgb2JqZWN0J3MgY29sbGlzaW9uIGJveFxuICAvL3dpdGhpbiB0aGUgY29tcG9zaXRlIG9iZWN0LlxuICBnZXRBbGxDb2xsaXNpb25Cb3hlcygpOmNvbGxpc2lvbl9ib3hbXXtcbiAgICByZXR1cm4gW3RoaXMuZ2V0RnVsbENvbGxpc2lvbkJveCgpXVxuICB9XG4gIGNhY2hlKGtleTpzdHJpbmcsdmFsdWU/OmFueSwpe1xuICAgIGlmKCF0aGlzLmNhY2hlX2VudHJpZXNba2V5XSl7XG4gICAgICB0aGlzLmNhY2hlX2VudHJpZXNba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jYWNoZV9lbnRyaWVzW2tleV07XG4gIH1cbiAgY29sbGlkZXNXaXRoUG9pbnQocG9pbnQ6VmVjdG9yKTpib29sZWFue1xuICAgIHJldHVybiB0aGlzLmNvbGxpZGVzV2l0aEJveCh7eDpwb2ludC54LHk6cG9pbnQueSxoZWlnaHQ6MCx3aWR0aDowfSk7XG4gIH1cbiAgLy9DaGVja3MgdG8gc2VlIGlmIGFuIG9iamVjdCBhY3R1YWxseSBjb2xsaWRlcyB3aXRoIHRoZSBwcm92aWRlZCBib3guXG4gIC8vQSBib3ggcmVwcmVzZW50cyBhbiBhcmVhIHdpdGhpbiB0aGUgZ2FtZSBzcGFjZVxuICAvL0NoZWNraW5nIGZvciBjb2xsaXNpb25zIGlzIHRyaXZpYWwgY3VycmVudGx5LCBhcyBhbGwgaGl0Ym94ZXMgYXJlIGF4aXMgYWxpZ25lZFxuICAvL0J1dCBpbXBsZW1lbnRpbmcgYSBtb3JlIGNvbXBsaWNhdGVkIHBoeXNpY3MgZW5naW5lIHdvdWxkIG1ha2UgdGhpcyBtZXRob2QncyBpbXBsLlxuICAvL3NpZ25pZmljYXRseSBtb3JlIGNvbXBsZXguXG4gIGNvbGxpZGVzV2l0aEJveChvdGhlcl9vYmplY3Q6IGNvbGxpc2lvbl9ib3gpOiBib29sZWFuIHtcbiAgICBsZXQgY29sbGlkZXNfaG9ycml6b250YWxseSA9IGZhbHNlLCBjb2xsaWRlc192ZXJ0aWNhbGx5ID0gZmFsc2U7XG4gICAgbGV0IGhib3ggPSB0aGlzLmhpdGJveDtcbiAgICBpZighdGhpcy5oaXRib3gpe1xuICAgICAgaGJveCA9IHtcbiAgICAgICAgeF9vZmZzZXQ6MCxcbiAgICAgICAgeV9vZmZzZXQ6MCxcbiAgICAgICAgd2lkdGg6dGhpcy53aWR0aCxcbiAgICAgICAgaGVpZ2h0OnRoaXMuaGVpZ2h0XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBvYmplY3RfYm91bmRzID0ge1xuICAgICAgbGVmdDogKHRoaXMuc3RhdGUucG9zaXRpb24ueCArIGhib3gueF9vZmZzZXQgLSBoYm94LndpZHRoICogdGhpcy5zdGF0ZS5zY2FsaW5nLndpZHRoIC8gMiksXG4gICAgICByaWdodDogKHRoaXMuc3RhdGUucG9zaXRpb24ueCArIGhib3gueF9vZmZzZXQgKyBoYm94LndpZHRoICogdGhpcy5zdGF0ZS5zY2FsaW5nLndpZHRoIC8gMiksXG4gICAgICB0b3A6ICh0aGlzLnN0YXRlLnBvc2l0aW9uLnkgKyBoYm94Lnlfb2Zmc2V0ICsgaGJveC5oZWlnaHQgKiB0aGlzLnN0YXRlLnNjYWxpbmcuaGVpZ2h0IC8gMiksXG4gICAgICBib3R0b206ICh0aGlzLnN0YXRlLnBvc2l0aW9uLnkgKyBoYm94Lnlfb2Zmc2V0IC0gaGJveC5oZWlnaHQgKiB0aGlzLnN0YXRlLnNjYWxpbmcuaGVpZ2h0IC8gMilcbiAgICB9XG5cbiAgICBsZXQgb3RoZXJfb2JqZWN0X2JvdW5kcyA9IHtcbiAgICAgIGxlZnQ6IChvdGhlcl9vYmplY3QueCAtIG90aGVyX29iamVjdC53aWR0aCAvIDIpLFxuICAgICAgcmlnaHQ6IChvdGhlcl9vYmplY3QueCArIG90aGVyX29iamVjdC53aWR0aCAvIDIpLFxuICAgICAgdG9wOiAob3RoZXJfb2JqZWN0LnkgKyBvdGhlcl9vYmplY3QuaGVpZ2h0IC8gMiksXG4gICAgICBib3R0b206IChvdGhlcl9vYmplY3QueSAtIG90aGVyX29iamVjdC5oZWlnaHQgLyAyKVxuICAgIH1cblxuICAgIC8vV2UgY2FuIGNvbXBhcmUgdGhlIHNpZGVzIG9mIHRoZSBib3hlcyB0byBzZWUgaWYgdGhleSBvdmVybGFwXG4gICAgLy9XZSBjaGVjayBvbmNlIGZvciBob2l6b250YWwgb3ZlcmxhcCwgdGhlbiB2ZXJ0aWNhbC5cbiAgICBpZiAoKG9iamVjdF9ib3VuZHMubGVmdCA+PSBvdGhlcl9vYmplY3RfYm91bmRzLmxlZnQgJiYgb2JqZWN0X2JvdW5kcy5sZWZ0IDwgb3RoZXJfb2JqZWN0X2JvdW5kcy5yaWdodCkgfHwgKG90aGVyX29iamVjdF9ib3VuZHMubGVmdCA+IG9iamVjdF9ib3VuZHMubGVmdCAmJiBvdGhlcl9vYmplY3RfYm91bmRzLmxlZnQgPCBvYmplY3RfYm91bmRzLnJpZ2h0KSkge1xuICAgICAgY29sbGlkZXNfaG9ycml6b250YWxseSA9IHRydWU7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICgob2JqZWN0X2JvdW5kcy5ib3R0b20gPj0gb3RoZXJfb2JqZWN0X2JvdW5kcy5ib3R0b20gJiYgb2JqZWN0X2JvdW5kcy5ib3R0b20gPCBvdGhlcl9vYmplY3RfYm91bmRzLnRvcCkgfHwgKG90aGVyX29iamVjdF9ib3VuZHMuYm90dG9tID4gb2JqZWN0X2JvdW5kcy5ib3R0b20gJiYgb3RoZXJfb2JqZWN0X2JvdW5kcy5ib3R0b20gPCBvYmplY3RfYm91bmRzLnRvcCkpe1xuICAgICAgY29sbGlkZXNfdmVydGljYWxseSA9IHRydWU7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBjb2xsaWRlc19ob3JyaXpvbnRhbGx5ICYmIGNvbGxpZGVzX3ZlcnRpY2FsbHk7XG4gIH1cbiAgLy9UaGUgcGFydGljbGUgbXVzdCBiZSByZWdpc3RlcmVkIGluIHRoZSByb29tJ3MgcmVnaXN0ZXJQYXJ0aWNsZXMgbWV0aG9kIFxuICAvL1RoZSBuYW1lIHBhcmFtZXRlciBzaG91bGQgY29ycmVzcG9uZCB0byB0aGUga2V5IG9mIGEgcGFydGljbGVcbiAgZW1pdFBhcnRpY2xlKG5hbWU6c3RyaW5nLG9mZnNldDpWZWN0b3IsbGlmZXRpbWU6bnVtYmVyLHJhbmdlOm51bWJlcil7XG4gICAgbGV0IHJvb20gPSB0aGlzLmdhbWUuZ2V0Um9vbSgpO1xuICAgIGxldCBzdCA9IHRoaXMuc3RhdGUgYXMgdW5rbm93biBhcyBvYmpfc3RhdGU7XG4gICAgbGV0IGZpbmFsX3Bvc2l0aW9uOlZlY3RvciA9IHtcbiAgICAgIHg6c3QucG9zaXRpb24ueCArIG9mZnNldC54LFxuICAgICAgeTpzdC5wb3NpdGlvbi55ICsgb2Zmc2V0LnlcbiAgICB9XG4gICAgcm9vbS5lbWl0UGFydGljbGUobmFtZSxmaW5hbF9wb3NpdGlvbixsaWZldGltZSxyYW5nZSlcbiAgfVxuICAvL0ludGVybmFsIG1ldGhvZCB0aGF0IGtlZXBzIGNhbGN1bGF0ZXMgdGhlIGRlbHRhX3RpbWVcbiAgLy9BbHNvIGNvbnZlcnRzIGluZGl2aWR1YWwgc3ByaXRlcyBpbnRvIGFycmF5cyBvZiBvbmUgc3ByaXRlLlxuICByZW5kZXJUcmFjayh0aW1lOm51bWJlcik6IHBvc2l0aW9uZWRfc3ByaXRlW10ge1xuICAgIGxldCByZW5kZXJlZCA9IHRoaXMucmVuZGVyZih0aW1lIC0gdGhpcy5sYXN0X3JlbmRlcik7XG4gICAgbGV0IGZpbmFsOnBvc2l0aW9uZWRfc3ByaXRlW107XG4gICAgdGhpcy5sYXN0X3JlbmRlciA9IHRpbWU7XG4gICAgaWYoQXJyYXkuaXNBcnJheShyZW5kZXJlZCkpXG4gICAgICBmaW5hbCA9IHJlbmRlcmVkXG4gICAgZWxzZXtcbiAgICAgIGZpbmFsID0gW3JlbmRlcmVkXVxuICAgIH1cbiAgICByZXR1cm4gZmluYWw7XG4gIH1cbiAgLy9Nb3N0IG9iamVjdHMgc2hvdWxkIG5vdCBiZSBvdmVyd3JpdHRpbmcgdGhlIHJlbmRlcmYgbWV0aG9kXG4gIC8vUmV0dXJucyB0aGUgYXBwcm9wcmlhdGUgc3ByaXRlIGZvciB0aGUgb2JqZWN0XG4gIHJlbmRlcmYodGltZTogbnVtYmVyKTogcG9zaXRpb25lZF9zcHJpdGVbXSB8IHBvc2l0aW9uZWRfc3ByaXRle1xuICAgIC8vSWYgdGhlIG9iamVjdCBkb2Vzbid0IGhhdmUgcmVnaXN0ZXJlZCBhbmltYXRpb25zLCBvciBpc24ndCBwbGF5aW5nIG9uZVxuICAgIC8vV2UgaGF2ZSB0byBjcmVhdGUgdGhlIHNwcml0ZSBoZXJlLlxuICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmFuaW1hdGlvbnMuYW5pbWF0aW9ucykubGVuZ3RoID09IDAgfHwgIXRoaXMuYW5pbWF0aW9ucy5jdXJyZW50KSB7XG4gICAgICBpZighdGhpcy5zcHJpdGVfc2hlZXQpe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNwcml0ZTp1bmRlZmluZWQsXG4gICAgICAgICAgeDp0aGlzLnN0YXRlLnBvc2l0aW9uLngsXG4gICAgICAgICAgeTp0aGlzLnN0YXRlLnBvc2l0aW9uLnlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IHNwcml0ZV9oZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICAgIGxldCBzcHJpdGVfd2lkdGggPSB0aGlzLndpZHRoO1xuICAgICAgLy9UZWNobmljYWxseSB3ZSBkb24ndCBuZWVkIHRvIGRlZmluZSBhbiBvYmplY3QgaGVpZ2h0IGFuZCB3aWR0aFxuICAgICAgLy9JZiB0aGUgc3ByaXRlX3VybCBwb2ludHMgdG8gYSBzaW5nbGUgc3RhdGljIHNwcml0ZSwgYXMgd2UgY2FuIGp1c3QgcHVsbFxuICAgICAgLy90aGUgZGltZW5zaW9ucyBmcm9tIHRoZSBpbWFnZVxuICAgICAgaWYgKHRoaXMuaGVpZ2h0ID09IHVuZGVmaW5lZCkge1xuICAgICAgICBzcHJpdGVfaGVpZ2h0ID0gdGhpcy5zcHJpdGVfc2hlZXQuaGVpZ2h0O1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMud2lkdGggPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNwcml0ZV93aWR0aCA9IHRoaXMuc3ByaXRlX3NoZWV0LndpZHRoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3ByaXRlOiB7XG4gICAgICAgICAgc3ByaXRlX3NoZWV0OiB0aGlzLnNwcml0ZV9zaGVldCxcbiAgICAgICAgICBuYW1lOnRoaXMuY29uc3RydWN0b3IubmFtZSxcbiAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICBzcHJpdGVfd2lkdGg6IHNwcml0ZV93aWR0aCxcbiAgICAgICAgICBzcHJpdGVfaGVpZ2h0OiBzcHJpdGVfaGVpZ2h0LFxuICAgICAgICAgIG9wYWNpdHk6dGhpcy5vcGFjaXR5IHx8IDFcbiAgICAgICAgfSxcbiAgICAgICAgeDogdGhpcy5zdGF0ZS5wb3NpdGlvbi54LFxuICAgICAgICB5OiB0aGlzLnN0YXRlLnBvc2l0aW9uLnlcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBzcHJpdGU6dGhpcy5hbmltYXRpb25zLnJlbmRlcmYodGltZSksXG4gICAgICB4OiB0aGlzLnN0YXRlLnBvc2l0aW9uLngsXG4gICAgICB5OiB0aGlzLnN0YXRlLnBvc2l0aW9uLnlcbiAgICB9O1xuICB9XG59XG5cbmludGVyZmFjZSBjb21wb3NpdGVfc3RhdGlje1xuICB4Om51bWJlcixcbiAgeTpudW1iZXIsXG4gIG9iajpvYmpcbn1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIGNvbXBvc2l0ZV9vYmogZXh0ZW5kcyBvYmp7XG4gIG9iamVjdHM6b2JqW10gPSBbXTtcbiAgcmVuZGVyID0gZmFsc2U7XG4gIHJlZ2lzdGVyZWQgPSBmYWxzZTtcbiAgY29sbGlzaW9uID0gZmFsc2U7XG4gIHN0YXRpY3M6Y29tcG9zaXRlX3N0YXRpY1tdID0gW107XG4gIGNvbnN0cnVjdG9yKHBvczpvYmpfc3RhdGUscGFyYW1zOnVua25vd24pe1xuICAgIHN1cGVyKHBvcyxwYXJhbXMpO1xuICB9XG4gIGFzeW5jIGxvYWQoKXtcbiAgICBhd2FpdCBzdXBlci5sb2FkKCk7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoWy4uLnRoaXMub2JqZWN0cy5tYXAoKGEpPT5hLmxvYWQoKSksLi4udGhpcy5zdGF0aWNzLm1hcChhPT5hLm9iai5sb2FkKCkpXSk7XG4gIH1cbiAgY29tYmluZWRPYmplY3RzKCk6b2JqW117XG4gICAgbGV0IGNvbWJpbmVkID0gWy4uLnRoaXMub2JqZWN0cywuLi50aGlzLnN0YXRpY3MubWFwKGE9PmEub2JqKV07XG4gICAgcmV0dXJuIFsuLi5jb21iaW5lZCx0aGlzXTtcbiAgfVxuICBnZXRJdGVtc0J5VGFnKHRhZzpzdHJpbmcpe1xuICAgIHJldHVybiB0aGlzLmNvbWJpbmVkT2JqZWN0cygpLmZpbHRlcigoYSk9PmEudGFncy5oYXModGFnKSk7XG4gIH1cbiAgYWRkSXRlbShhOm9iaixsaXN0PXRoaXMub2JqZWN0cyl7XG4gICAgYS5wYXJlbnQgPSB0aGlzO1xuICAgIGxpc3QucHVzaCguLi5hLmNvbWJpbmVkT2JqZWN0cygpKTtcbiAgfVxuICBhZGRJdGVtcyhhOm9ialtdLGxpc3Q9dGhpcy5vYmplY3RzKXtcbiAgICBmb3IobGV0IG8gb2YgYSl7XG4gICAgICB0aGlzLmFkZEl0ZW0obyxsaXN0KTtcbiAgICB9XG4gIH1cbiAgZ2V0QWxsQ29sbGlzaW9uQm94ZXMoKTpjb2xsaXNpb25fYm94W117XG4gICAgbGV0IGFycjpjb2xsaXNpb25fYm94W10gPSBbXTtcbiAgICBmb3IobGV0IG9iaiBvZiBbLi4udGhpcy5zdGF0aWNzLm1hcChhPT5hLm9iaiksLi4udGhpcy5vYmplY3RzXSl7XG4gICAgICBsZXQgY3JlYXRlZF9ib3ggPSBvYmouZ2V0QWxsQ29sbGlzaW9uQm94ZXMoKTtcbiAgICAgIGlmKEFycmF5LmlzQXJyYXkoY3JlYXRlZF9ib3gpKXtcbiAgICAgICAgYXJyLnB1c2goLi4uY3JlYXRlZF9ib3gpO1xuICAgICAgfVxuICAgICAgZWxzZXtcbiAgICAgICAgYXJyLnB1c2goY3JlYXRlZF9ib3gpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJyO1xuICB9XG4gIGRlbGV0ZSgpe1xuICAgIGZvcihsZXQgYSBvZiB0aGlzLm9iamVjdHMpe1xuICAgICAgYS5kZWxldGUoKTtcbiAgICB9XG4gICAgZm9yKGxldCBhIG9mIHRoaXMuc3RhdGljcyl7XG4gICAgICBhLm9iai5kZWxldGUoKTtcbiAgICB9XG4gICAgc3VwZXIuZGVsZXRlKCk7XG4gIH1cbiAgY29sbGlkZXNXaXRoQm94KGE6IGNvbGxpc2lvbl9ib3gpOmJvb2xlYW57XG4gICAgZm9yKGxldCBvYmogb2YgdGhpcy5vYmplY3RzKXtcbiAgICAgIGlmKG9iai5jb2xsaWRlc1dpdGhCb3goYSkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBmb3IobGV0IG8gb2YgdGhpcy5zdGF0aWNzKXtcbiAgICAgIGlmKG8ub2JqLmNvbGxpZGVzV2l0aEJveChhKSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSAgXG59XG5cblxuZXhwb3J0IGNsYXNzIHN0YXRpY19vYmoge1xuICBzcHJpdGVfdXJsID0gXCJcIjtcbiAgc3ByaXRlOiBIVE1MSW1hZ2VFbGVtZW50O1xufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgZ3Jhdml0eV9vYmogZXh0ZW5kcyBvYmp7XG4gIGdyYXZpdHkgPSB0cnVlXG59IiwiaW1wb3J0IHsgc3ByaXRlIH0gZnJvbSBcIi4vc3ByaXRlXCI7XG5pbXBvcnQgeyBHZXRWaWV3cG9ydERpbWVuc2lvbnMgfSBmcm9tIFwiLi4vdmFuXCI7XG5pbXBvcnQgeyBvYmogfSBmcm9tIFwiLi9vYmplY3RcIjtcbmltcG9ydCB7IGRpbWVuc2lvbnMsIG9ial9zdGF0ZSwgVmVjdG9yIH0gZnJvbSBcIi4vc3RhdGVcIjtcbmltcG9ydCB7IFRleHRfTm9kZSwgVGV4dFNldHRpbmcsSFVELFRleHQgfSBmcm9tIFwiLi9odWRcIjtcbmltcG9ydCB7cG9zaXRpb25lZF9zcHJpdGV9IGZyb20gXCIuL3Nwcml0ZVwiXG5pbXBvcnQgeyBWZWMscm90YXRpb25fbGVuZ3RoLGFuZ2xlX3Rvd2FyZHMgfSBmcm9tIFwiLi9tYXRoXCI7XG5cbmludGVyZmFjZSBjYW1lcmFfc3RhdGUge1xuICBzY2FsaW5nOiBudW1iZXIsXG4gIHBvc2l0aW9uOiB7XG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlclxuICB9XG4gIGRpbWVuc2lvbnM6IHtcbiAgICB3aWR0aDogbnVtYmVyLFxuICAgIGhlaWdodDogbnVtYmVyXG4gIH0sXG4gIHZpZXdwb3J0OiB2aWV3cG9ydCxcbiAgZGVidWc6Ym9vbGVhbixcbiAgaHVkOkhVRCxcbiAgdGFyZ2V0X3BvczpWZWN0b3IsXG4gIHN0YXJ0X3BvczpWZWN0b3IsXG4gIGVhc2luZ190aW1lOm51bWJlcixcbiAgY3VycmVudF90aW1lOm51bWJlcixcbiAgc3BlZWQ6bnVtYmVyXG59XG5cbmludGVyZmFjZSB2aWV3cG9ydCB7XG4gIHg6IG51bWJlcixcbiAgeTogbnVtYmVyLFxuICB3aWR0aDogbnVtYmVyLFxuICBoZWlnaHQ6IG51bWJlclxufVxuXG5pbnRlcmZhY2UgY2FtZXJhX3Byb3BlcnRpZXMge1xuICB4Om51bWJlcixcbiAgeTpudW1iZXIsXG4gIGRpbWVuc2lvbnM6e1xuICAgIGhlaWdodDpudW1iZXIsXG4gICAgd2lkdGg6bnVtYmVyXG4gIH1cbiAgc2NhbGluZzpudW1iZXIsXG4gIFxuICBkZWJ1Zz86Ym9vbGVhblxufVxuXG5leHBvcnQgY2xhc3MgQ2FtZXJhIHtcbiAgc3RhdGU6IGNhbWVyYV9zdGF0ZTtcbiAgaHVkOiBIVUQ7XG4gIGNvbnN0cnVjdG9yKHByb3BzOmNhbWVyYV9wcm9wZXJ0aWVzLCB2OiB2aWV3cG9ydCwgaHVkOkhVRCA9IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzY2FsaW5nOnByb3BzLnNjYWxpbmcsXG4gICAgICBwb3NpdGlvbjoge1xuICAgICAgICB4OiBwcm9wcy54LFxuICAgICAgICB5OiBwcm9wcy55XG4gICAgICB9LFxuICAgICAgZGltZW5zaW9uczogcHJvcHMuZGltZW5zaW9ucyxcbiAgICAgIHZpZXdwb3J0OiB7XG4gICAgICAgIHg6di54LFxuICAgICAgICB5OnYueSAsXG4gICAgICAgIHdpZHRoOiB2LndpZHRoICogcHJvcHMuZGltZW5zaW9ucy53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiB2LmhlaWdodCAqIHByb3BzLmRpbWVuc2lvbnMuaGVpZ2h0XG4gICAgICB9LFxuICAgICAgZGVidWc6cHJvcHMuZGVidWcsXG4gICAgICBodWQsXG4gICAgICB0YXJnZXRfcG9zOnVuZGVmaW5lZCxcbiAgICAgIHN0YXJ0X3Bvczp1bmRlZmluZWQsXG4gICAgICBlYXNpbmdfdGltZTowLFxuICAgICAgY3VycmVudF90aW1lOjAsXG4gICAgICBzcGVlZDowXG4gICAgfVxuICAgIGlmKGh1ZCl7XG4gICAgICBodWQuZ3JhcGhpY19lbGVtZW50cy5mb3JFYWNoKGU9PntcbiAgICAgICAgZS5VbmJpbmRBbGwoKTtcbiAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMuc2V0SHVkKGh1ZCk7XG4gIH1cbiAgc3RhdGVmKGRlbHRhX3RpbWU6bnVtYmVyKXtcbiAgICBcbiAgICBpZih0aGlzLnN0YXRlLnRhcmdldF9wb3Mpe1xuICAgICAgbGV0IHQgPSB0aGlzLnN0YXRlLmN1cnJlbnRfdGltZS90aGlzLnN0YXRlLmVhc2luZ190aW1lO1xuICAgICAgbGV0IGRpc3RhbmNlID0gVmVjLmRpc3RhbmNlKHRoaXMuc3RhdGUucG9zaXRpb24sdGhpcy5zdGF0ZS50YXJnZXRfcG9zKTtcbiAgICAgIGxldCBjb2VmZjtcbiAgICAgIGlmKHQgPD0gMC41KXtcbiAgICAgICAgY29lZmYgPSAyICogdCAqIHQ7XG4gICAgICB9XG4gICAgICBlbHNle1xuICAgICAgICB0IC09IDAuNTtcbiAgICAgICAgY29lZmYgPSAyICogdCAqICgxIC0gdCkgKyAwLjU7XG4gICAgICB9IFxuICAgICAgbGV0IGFuZ2xlID0gYW5nbGVfdG93YXJkcyh0aGlzLnN0YXRlLnRhcmdldF9wb3MsdGhpcy5zdGF0ZS5wb3NpdGlvbik7XG4gICAgICBsZXQgdmVsb2NpdHkgPSByb3RhdGlvbl9sZW5ndGgoMiAqIHRoaXMuc3RhdGUuc3BlZWQgKiBkZWx0YV90aW1lLGFuZ2xlKTtcbiAgICAgIHZlbG9jaXR5ID0gVmVjLnNjYWxhcl9tdWx0KHZlbG9jaXR5LGNvZWZmKTtcbiAgICAgIHRoaXMuc3RhdGUucG9zaXRpb24gPSBWZWMuYWRkKHRoaXMuc3RhdGUucG9zaXRpb24sdmVsb2NpdHkpO1xuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50X3RpbWUgKz0gZGVsdGFfdGltZTtcbiAgICAgIGlmKHRoaXMuc3RhdGUuY3VycmVudF90aW1lID4gdGhpcy5zdGF0ZS5lYXNpbmdfdGltZSl7XG4gICAgICAgIHRoaXMuc3RhdGUucG9zaXRpb24gPSBWZWMuZnJvbSh0aGlzLnN0YXRlLnRhcmdldF9wb3MpO1xuICAgICAgICB0aGlzLnN0YXRlLnRhcmdldF9wb3MgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHNldCB4KHg6IG51bWJlcikge1xuICAgIHRoaXMuc3RhdGUucG9zaXRpb24ueCA9IHg7XG4gIH1cbiAgc2V0IHkoeTogbnVtYmVyKSB7XG4gICAgdGhpcy5zdGF0ZS5wb3NpdGlvbi55ID0geVxuICB9XG4gIGdldCB4KCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLnBvc2l0aW9uLng7XG4gIH1cbiAgZ2V0IHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUucG9zaXRpb24ueTtcbiAgfVxuICBzZXRIdWQoaHVkOkhVRCA9IHVuZGVmaW5lZCl7XG4gICAgaWYodGhpcy5odWQpe1xuICAgICAgdGhpcy5odWQucmVuZGVyaW5nID0gZmFsc2U7XG4gICAgICBmb3IobGV0IG8gb2YgdGhpcy5odWQuZ3JhcGhpY19lbGVtZW50cyl7XG4gICAgICAgIG8uVW5iaW5kQWxsKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmKGh1ZCAmJiBodWQgIT0gdGhpcy5odWQpe1xuICAgICAgaHVkLnJlbmRlcmluZyA9IHRydWU7XG4gICAgICBmb3IobGV0IG8gb2YgaHVkLmdyYXBoaWNfZWxlbWVudHMpe1xuICAgICAgICBvLnJlZ2lzdGVyQ29udHJvbHMoKTtcbiAgICAgIH1cbiAgICAgIGh1ZC5zZXRBY3RpdmUoKTsgIFxuXG4gICAgfVxuICAgIHRoaXMuaHVkID0gaHVkO1xuICB9XG4gIG1vdmVUbyhwb3M6VmVjdG9yLHRpbWU6bnVtYmVyKXtcbiAgICBcbiAgICB0aGlzLnN0YXRlLnNwZWVkID0gVmVjLmRpc3RhbmNlKHRoaXMuc3RhdGUucG9zaXRpb24scG9zKS90aW1lO1xuICAgIHRoaXMuc3RhdGUudGFyZ2V0X3BvcyA9IHBvcztcbiAgICB0aGlzLnN0YXRlLnN0YXJ0X3BvcyA9IFZlYy5mcm9tKHRoaXMuc3RhdGUucG9zaXRpb24pO1xuICAgIHRoaXMuc3RhdGUuZWFzaW5nX3RpbWUgPSB0aW1lO1xuICAgIHRoaXMuc3RhdGUuY3VycmVudF90aW1lID0gMDtcbiAgfVxuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgcmVuZGVyX2Z1bmMge1xuICAoeDogbnVtYmVyLCB5OiBudW1iZXIsIHNjYWxpbmc6IG51bWJlcik6IHZvaWRcbn1cblxuaW50ZXJmYWNlIHJlY3RhbmdsZSB7XG4gIHdpZHRoOiBudW1iZXIsXG4gIGhlaWdodDogbnVtYmVyXG59XG5cbmludGVyZmFjZSBzcHJpdGVfYXJncyB7XG4gIHNwcml0ZTogc3ByaXRlLFxuICB4OiBudW1iZXIsXG4gIHk6IG51bWJlcixcbiAgcm90YXRpb246IG51bWJlcixcbiAgc2NhbGU6ZGltZW5zaW9ucyxcbiAgc2NhbGVfdHlwZTpzY2FsZV90eXBlXG59XG5cbmludGVyZmFjZSByZW5kZXJlcl9hcmdzIHtcbiAgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICBjYW1lcmE6IENhbWVyYVxufVxuXG5leHBvcnQgZW51bSByZW5kZXJfdHlwZSB7XG4gIHRleHQsXG4gIHNwcml0ZSxcbiAgcmVjdCxcbiAgc3Ryb2tlX3JlY3Rcbn1cblxuZXhwb3J0IGVudW0gc2NhbGVfdHlwZXtcbiAgZ3JvdyxcbiAgcmVwZWF0XG59XG5cbmV4cG9ydCBjb25zdCBodWRfdGV4dF9yZW5kZXJlciA9IChyOiByZW5kZXJlcl9hcmdzLCBzOiBUZXh0U2V0dGluZykgPT4ge1xuICBsZXQgdmhlaWdodCA9IEdldFZpZXdwb3J0RGltZW5zaW9ucygpLmhlaWdodDtcbiAgci5jb250ZXh0LmZvbnQgPSBgJHtzLmZvbnQuc2l6ZX1weCAke3MuZm9udC5mb250fWA7XG4gIHIuY29udGV4dC5maWxsU3R5bGUgPSBzLmZvbnQuY29sb3I7XG4gIHIuY29udGV4dC50ZXh0QWxpZ24gPSBzLmZvbnQuYWxpZ247XG4gIGlmIChzLmZvbnQubWF4X3dpZHRoKSB7XG4gICAgci5jb250ZXh0LmZpbGxUZXh0KHMuZm9udC50ZXh0LCBzLngsIHZoZWlnaHQgLSBzLnksIHMuZm9udC5tYXhfd2lkdGgpO1xuICB9XG4gIGVsc2Uge1xuICAgIHIuY29udGV4dC5maWxsVGV4dChzLmZvbnQudGV4dCwgcy54LCB2aGVpZ2h0IC0gcy55KTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgdGV4dF9yZW5kZXJlciA9IChyOnJlbmRlcmVyX2FyZ3MsczpUZXh0U2V0dGluZykgPT4ge1xuICBsZXQgY2FtZXJhID0gci5jYW1lcmE7XG4gIGxldCB2aGVpZ2h0ID0gci5jYW1lcmEuc3RhdGUuZGltZW5zaW9ucy5oZWlnaHQ7XG4gIGxldCBmaW5hbF94ID0gKChzLnggLSBjYW1lcmEuc3RhdGUucG9zaXRpb24ueCArIGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLndpZHRoICogKDEvci5jYW1lcmEuc3RhdGUuc2NhbGluZykgLyAyKSAqIHIuY2FtZXJhLnN0YXRlLnNjYWxpbmcpO1xuICBsZXQgZmluYWxfeSA9ICgodmhlaWdodCAtIHMueSAqIGNhbWVyYS5zdGF0ZS5zY2FsaW5nIC0gY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMuaGVpZ2h0LzIgKyBjYW1lcmEuc3RhdGUucG9zaXRpb24ueSAqIGNhbWVyYS5zdGF0ZS5zY2FsaW5nKSk7XG4gIHIuY29udGV4dC5mb250ID0gYCR7cy5mb250LnNpemUgKiByLmNhbWVyYS5zdGF0ZS5zY2FsaW5nfXB4ICR7cy5mb250LmZvbnR9YDtcbiAgci5jb250ZXh0LmZpbGxTdHlsZSA9IHMuZm9udC5jb2xvcjtcbiAgci5jb250ZXh0LnRleHRBbGlnbiA9IHMuZm9udC5hbGlnblxuICByLmNvbnRleHQuc2F2ZSgpO1xuICByLmNvbnRleHQudHJhbnNsYXRlKGZpbmFsX3gsIGZpbmFsX3kpO1xuICBpZiAocy5mb250Lm1heF93aWR0aCkge1xuICAgIHIuY29udGV4dC5maWxsVGV4dChzLmZvbnQudGV4dCwgMCwgMCwgcy5mb250Lm1heF93aWR0aCk7XG4gIH1cbiAgZWxzZSB7XG4gICAgci5jb250ZXh0LmZpbGxUZXh0KHMuZm9udC50ZXh0LCAwLCAwKTtcbiAgfVxuICByLmNvbnRleHQucmVzdG9yZSgpO1xufVxuZXhwb3J0IGludGVyZmFjZSBjYW52YXNfYXJnc3tcbiAgY2FudmFzOkhUTUxDYW52YXNFbGVtZW50LFxuICB3aWR0aDpudW1iZXI7XG4gIGhlaWdodDpudW1iZXIsXG4gIHg6bnVtYmVyLFxuICB5Om51bWJlcixcbiAgc2NhbGU6ZGltZW5zaW9uc1xufVxuZXhwb3J0IGNvbnN0IGNhbnZhc19yZW5kZXJlciA9IChyOnJlbmRlcmVyX2FyZ3MsYTpjYW52YXNfYXJncykgPT4ge1xuICBsZXQgY2FtZXJhID0gci5jYW1lcmE7XG4gIGxldCB2aGVpZ2h0ID0gci5jYW1lcmEuc3RhdGUuZGltZW5zaW9ucy5oZWlnaHQgLyByLmNhbWVyYS5zdGF0ZS5zY2FsaW5nO1xuICBsZXQgZmluYWxfeCA9ICgoYS54IC0gY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnggKyBjYW1lcmEuc3RhdGUuZGltZW5zaW9ucy53aWR0aCAqICgxL3IuY2FtZXJhLnN0YXRlLnNjYWxpbmcpIC8gMiAtIGEud2lkdGggKiBhLnNjYWxlLndpZHRoIC8gMikgKiByLmNhbWVyYS5zdGF0ZS5zY2FsaW5nKTtcbiAgbGV0IGZpbmFsX3kgPSAoKHZoZWlnaHQgLSBhLnkgLSBjYW1lcmEuc3RhdGUuZGltZW5zaW9ucy5oZWlnaHQgKiAoMS9yLmNhbWVyYS5zdGF0ZS5zY2FsaW5nKSAvIDIgLSBhLmhlaWdodCAqIGEuc2NhbGUuaGVpZ2h0IC8gMiArIGNhbWVyYS5zdGF0ZS5wb3NpdGlvbi55KSAqIHIuY2FtZXJhLnN0YXRlLnNjYWxpbmcpO1xuICBsZXQgaGVpZ2h0ID0gYS5oZWlnaHQgKiByLmNhbWVyYS5zdGF0ZS5zY2FsaW5nICogYS5zY2FsZS5oZWlnaHQ7XG4gIGxldCB3aWR0aCA9IGEud2lkdGggKiByLmNhbWVyYS5zdGF0ZS5zY2FsaW5nICogYS5zY2FsZS53aWR0aDtcbiAgci5jb250ZXh0LnNhdmUoKTtcbiAgci5jb250ZXh0LnRyYW5zbGF0ZShmaW5hbF94ICArICh3aWR0aCkgLyAyLCBmaW5hbF95ICsgaGVpZ2h0IC8gMik7XG4gIHIuY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgYS5jYW52YXMsXG4gICAgLSh3aWR0aCApIC8gMixcbiAgICAtaGVpZ2h0IC8gMixcbiAgICB3aWR0aCxcbiAgICBoZWlnaHRcbiAgKVxuICByLmNvbnRleHQucmVzdG9yZSgpO1xufVxuXG5leHBvcnQgY29uc3QgaHVkX3Nwcml0ZV9yZW5kZXJlciA9IChyOnJlbmRlcmVyX2FyZ3MsIHM6c3ByaXRlX2FyZ3MpID0+IHtcbiAgbGV0IGNhbWVyYSA9IHIuY2FtZXJhO1xuICBsZXQgdmhlaWdodCA9IHIuY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMuaGVpZ2h0O1xuICBsZXQgZmluYWxfeCA9IChzLnggLSBzLnNwcml0ZS5zcHJpdGVfd2lkdGggKiBzLnNjYWxlLndpZHRoIC8gMik7XG4gIGxldCBmaW5hbF95ID0gKHZoZWlnaHQgLSBzLnkgLSBzLnNwcml0ZS5zcHJpdGVfaGVpZ2h0ICogcy5zY2FsZS5oZWlnaHQgLyAyKSA7XG4gIGxldCBoZWlnaHQgPSBzLnNwcml0ZS5zcHJpdGVfaGVpZ2h0ICogcy5zY2FsZS5oZWlnaHQ7XG4gIGxldCB3aWR0aCA9IHMuc3ByaXRlLnNwcml0ZV93aWR0aCAqIHMuc2NhbGUud2lkdGg7XG4gIHIuY29udGV4dC5zYXZlKCk7XG4gIHIuY29udGV4dC5nbG9iYWxBbHBoYSA9IHMuc3ByaXRlLm9wYWNpdHk7XG4gIHIuY29udGV4dC50cmFuc2xhdGUoZmluYWxfeCAgKyAod2lkdGgpIC8gMiwgZmluYWxfeSArIGhlaWdodCAvIDIpO1xuICBsZXQgcmFkaWFucyA9IHMucm90YXRpb24gKiAoTWF0aC5QSSAvIDE4MCk7XG4gIHIuY29udGV4dC5yb3RhdGUocmFkaWFucyk7XG4gIGlmKHMuc2NhbGVfdHlwZSA9PSBzY2FsZV90eXBlLmdyb3cpe1xuICAgIGlmKHR5cGVvZiBzLnNwcml0ZS5zcHJpdGVfc2hlZXQgPT0gXCJzdHJpbmdcIil7XG4gICAgICBsZXQgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgci5jb250ZXh0LmRyYXdJbWFnZShcbiAgICAgICAgICBpbWFnZSxcbiAgICAgICAgICBzLnNwcml0ZS5sZWZ0LFxuICAgICAgICAgIHMuc3ByaXRlLnRvcCxcbiAgICAgICAgICBzLnNwcml0ZS5zcHJpdGVfd2lkdGgsXG4gICAgICAgICAgcy5zcHJpdGUuc3ByaXRlX2hlaWdodCxcbiAgICAgICAgICAtKHdpZHRoICkgLyAyLFxuICAgICAgICAgIC1oZWlnaHQgLyAyLFxuICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgIGhlaWdodFxuICAgICAgICApXG4gICAgICAgIHIuY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICB9XG4gICAgICBpbWFnZS5zcmMgPSBzLnNwcml0ZS5zcHJpdGVfc2hlZXQ7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICByLmNvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgICBzLnNwcml0ZS5zcHJpdGVfc2hlZXQsXG4gICAgICAgIHMuc3ByaXRlLmxlZnQsXG4gICAgICAgIHMuc3ByaXRlLnRvcCxcbiAgICAgICAgcy5zcHJpdGUuc3ByaXRlX3dpZHRoLFxuICAgICAgICBzLnNwcml0ZS5zcHJpdGVfaGVpZ2h0LFxuICAgICAgICAtKHdpZHRoICkgLyAyLFxuICAgICAgICAtaGVpZ2h0IC8gMixcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGhlaWdodFxuICAgICAgKVxuICAgICAgci5jb250ZXh0LnJlc3RvcmUoKTsgICAgIFxuICAgIH1cbiAgfVxuICBlbHNlIGlmKHMuc2NhbGVfdHlwZSA9PSBzY2FsZV90eXBlLnJlcGVhdCl7XG4gICAgbGV0IG9uZV93aWR0aCA9IHMuc3ByaXRlLnNwcml0ZV93aWR0aCAqIHIuY2FtZXJhLnN0YXRlLnNjYWxpbmc7XG4gICAgbGV0IG9uZV9oZWlnaHQgPSBzLnNwcml0ZS5zcHJpdGVfaGVpZ2h0ICogci5jYW1lcmEuc3RhdGUuc2NhbGluZztcbiAgICBsZXQgdG90YWxfaG9yX3Nwcml0ZXMgPSB3aWR0aC9vbmVfd2lkdGhcbiAgICBsZXQgdG90YWxfdmVyX3Nwcml0ZXMgPSBoZWlnaHQvb25lX2hlaWdodDtcbiAgIGZvcihsZXQgYSA9IDA7YSA8IHRvdGFsX2hvcl9zcHJpdGVzO2EgKz0gMSl7XG4gICAgIGZvcihsZXQgYiA9IDA7YiA8IHRvdGFsX3Zlcl9zcHJpdGVzO2IgKz0gMSl7XG4gICAgICAgbGV0IG5ld193aWR0aCA9IG9uZV93aWR0aDtcbiAgICAgICBsZXQgbmV3X2hlaWdodCA9IG9uZV9oZWlnaHQ7XG4gICAgICAgaWYoKGEgKyAxKSAqIG9uZV93aWR0aCAtIHdpZHRoID4gMCl7XG4gICAgICAgICBuZXdfd2lkdGggPSB3aWR0aCAlIG9uZV93aWR0aDtcbiAgICAgICB9XG4gICAgICAgaWYoKGIgKyAxKSAqIG9uZV9oZWlnaHQgLSBoZWlnaHQgPiAwKXtcbiAgICAgICAgIG5ld19oZWlnaHQgPSBoZWlnaHQgJSBvbmVfaGVpZ2h0O1xuICAgICAgIH1cbiAgICAgICBpZih0eXBlb2Ygcy5zcHJpdGUuc3ByaXRlX3NoZWV0ID09IFwic3RyaW5nXCIpe1xuICAgICAgICBsZXQgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1hZ2Uub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgIHIuY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAgICAgICBpbWFnZSxcbiAgICAgICAgICAgIHMuc3ByaXRlLmxlZnQsXG4gICAgICAgICAgICBzLnNwcml0ZS50b3AsXG4gICAgICAgICAgICBuZXdfd2lkdGggLyAoci5jYW1lcmEuc3RhdGUuc2NhbGluZyksXG4gICAgICAgICAgICBuZXdfaGVpZ2h0IC8gKHIuY2FtZXJhLnN0YXRlLnNjYWxpbmcpLFxuICAgICAgICAgICAgLXdpZHRoLzIgKyBhICogb25lX3dpZHRoLFxuICAgICAgICAgICAgLWhlaWdodC8yICsgYiAqIG9uZV9oZWlnaHQsXG4gICAgICAgICAgICBuZXdfd2lkdGgsXG4gICAgICAgICAgICBuZXdfaGVpZ2h0XG4gICAgICAgICAgKVxuICAgICAgICAgIHIuY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaW1hZ2Uuc3JjID0gcy5zcHJpdGUuc3ByaXRlX3NoZWV0O1xuICAgICAgIH1cbiAgICAgICBlbHNle1xuICAgICAgICByLmNvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgICAgIHMuc3ByaXRlLnNwcml0ZV9zaGVldCxcbiAgICAgICAgICBzLnNwcml0ZS5sZWZ0LFxuICAgICAgICAgIHMuc3ByaXRlLnRvcCxcbiAgICAgICAgICBuZXdfd2lkdGggLyAoci5jYW1lcmEuc3RhdGUuc2NhbGluZyksXG4gICAgICAgICAgbmV3X2hlaWdodCAvIChyLmNhbWVyYS5zdGF0ZS5zY2FsaW5nKSxcbiAgICAgICAgICAtd2lkdGgvMiArIGEgKiBvbmVfd2lkdGgsXG4gICAgICAgICAgLWhlaWdodC8yICsgYiAqIG9uZV9oZWlnaHQsXG4gICAgICAgICAgbmV3X3dpZHRoLFxuICAgICAgICAgIG5ld19oZWlnaHRcbiAgICAgICAgIClcbiAgICAgICAgIHIuY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgfVxuXG4gICAgIH1cblxuICAgfSBcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIHdvcmtlcl9zcHJpdGV7XG4gIHRyYW5zbGF0ZTpWZWN0b3IsXG4gIHNwcml0ZTp7XG4gICAgbmFtZTpzdHJpbmcsXG4gICAgbGVmdDpudW1iZXIsXG4gICAgdG9wOm51bWJlcixcbiAgICBzcHJpdGVfd2lkdGg6bnVtYmVyLFxuICAgIHNwcml0ZV9oZWlnaHQ6bnVtYmVyXG4gIH1cbiAgd2lkdGg6bnVtYmVyLFxuICBoZWlnaHQ6bnVtYmVyXG59XG5cbmV4cG9ydCBjb25zdCBzcHJpdGVfcmVuZGVyZXIgPSAocjogcmVuZGVyZXJfYXJncywgczogc3ByaXRlX2FyZ3MpID0+IHtcbiAgbGV0IGNhbWVyYSA9IHIuY2FtZXJhO1xuICBsZXQgdmhlaWdodCA9IHIuY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMuaGVpZ2h0IC8gci5jYW1lcmEuc3RhdGUuc2NhbGluZztcbiAgbGV0IGZpbmFsX3ggPSAoKHMueCAtIGNhbWVyYS5zdGF0ZS5wb3NpdGlvbi54ICsgY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMud2lkdGggKiAoMS9yLmNhbWVyYS5zdGF0ZS5zY2FsaW5nKSAvIDIgLSBzLnNwcml0ZS5zcHJpdGVfd2lkdGggKiBzLnNjYWxlLndpZHRoIC8gMikgKiByLmNhbWVyYS5zdGF0ZS5zY2FsaW5nKTtcbiAgbGV0IGZpbmFsX3kgPSAoKHZoZWlnaHQgLSBzLnkgLSBjYW1lcmEuc3RhdGUuZGltZW5zaW9ucy5oZWlnaHQgKiAoMS9yLmNhbWVyYS5zdGF0ZS5zY2FsaW5nKSAvIDIgLSBzLnNwcml0ZS5zcHJpdGVfaGVpZ2h0ICogcy5zY2FsZS5oZWlnaHQgLyAyICsgY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnkpICogci5jYW1lcmEuc3RhdGUuc2NhbGluZyk7XG4gIGxldCBoZWlnaHQgPSBzLnNwcml0ZS5zcHJpdGVfaGVpZ2h0ICogci5jYW1lcmEuc3RhdGUuc2NhbGluZyAqIHMuc2NhbGUuaGVpZ2h0O1xuICBsZXQgd2lkdGggPSBzLnNwcml0ZS5zcHJpdGVfd2lkdGggKiByLmNhbWVyYS5zdGF0ZS5zY2FsaW5nICogcy5zY2FsZS53aWR0aDtcbiAgci5jb250ZXh0LnNhdmUoKTtcbiAgci5jb250ZXh0Lmdsb2JhbEFscGhhID0gcy5zcHJpdGUub3BhY2l0eTtcbiAgci5jb250ZXh0LnRyYW5zbGF0ZShmaW5hbF94ICArICh3aWR0aCkgLyAyLCBmaW5hbF95ICsgaGVpZ2h0IC8gMik7XG4gIGxldCByYWRpYW5zID0gcy5yb3RhdGlvbiAqIChNYXRoLlBJIC8gMTgwKTtcbiAgci5jb250ZXh0LnJvdGF0ZShyYWRpYW5zKTtcbiAgaWYocy5zY2FsZV90eXBlID09IHNjYWxlX3R5cGUuZ3Jvdyl7XG4gICAgaWYodHlwZW9mIHMuc3ByaXRlLnNwcml0ZV9zaGVldCA9PSBcInN0cmluZ1wiKXtcbiAgICAgIFxuICAgIH1cbiAgICBlbHNle1xuICAgICAgci5jb250ZXh0LmRyYXdJbWFnZShcbiAgICAgICAgcy5zcHJpdGUuc3ByaXRlX3NoZWV0LFxuICAgICAgICBzLnNwcml0ZS5sZWZ0LFxuICAgICAgICBzLnNwcml0ZS50b3AsXG4gICAgICAgIHMuc3ByaXRlLnNwcml0ZV93aWR0aCxcbiAgICAgICAgcy5zcHJpdGUuc3ByaXRlX2hlaWdodCxcbiAgICAgICAgLSh3aWR0aCApIC8gMixcbiAgICAgICAgLWhlaWdodCAvIDIsXG4gICAgICAgIHdpZHRoLFxuICAgICAgICBoZWlnaHRcbiAgICAgIClcbiAgICAgIHIuY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAvKlxuICAgICAgcmV0dXJuIHdvcmtlcl9wb29sLnNlbmQoXCJkcmF3X3Nwcml0ZVwiLHtcbiAgICAgICAgdHJhbnNsYXRlOnt4OmZpbmFsX3ggICsgKHdpZHRoKSAvIDIseTogZmluYWxfeSArIGhlaWdodCAvIDJ9LFxuICAgICAgICBzcHJpdGU6e1xuICAgICAgICAgIG5hbWU6cy5zcHJpdGUubmFtZSxcbiAgICAgICAgICBsZWZ0OnMuc3ByaXRlLmxlZnQsXG4gICAgICAgICAgdG9wOnMuc3ByaXRlLnRvcCxcbiAgICAgICAgICBzcHJpdGVfd2lkdGg6cy5zcHJpdGUuc3ByaXRlX3dpZHRoLFxuICAgICAgICAgIHNwcml0ZV9oZWlnaHQ6cy5zcHJpdGUuc3ByaXRlX2hlaWdodFxuICAgICAgICB9LFxuICAgICAgICB3aWR0aCxcbiAgICAgICAgaGVpZ2h0XG4gICAgICB9KVxuICAgICAgKi9cbiAgICB9XG4gIH1cbiAgZWxzZSBpZihzLnNjYWxlX3R5cGUgPT0gc2NhbGVfdHlwZS5yZXBlYXQpe1xuICAgIGxldCBvbmVfd2lkdGggPSBzLnNwcml0ZS5zcHJpdGVfd2lkdGggKiByLmNhbWVyYS5zdGF0ZS5zY2FsaW5nO1xuICAgIGxldCBvbmVfaGVpZ2h0ID0gcy5zcHJpdGUuc3ByaXRlX2hlaWdodCAqIHIuY2FtZXJhLnN0YXRlLnNjYWxpbmc7XG4gICAgbGV0IHRvdGFsX2hvcl9zcHJpdGVzID0gd2lkdGgvb25lX3dpZHRoXG4gICAgbGV0IHRvdGFsX3Zlcl9zcHJpdGVzID0gaGVpZ2h0L29uZV9oZWlnaHQ7XG4gICBmb3IobGV0IGEgPSAwO2EgPCB0b3RhbF9ob3Jfc3ByaXRlczthICs9IDEpe1xuICAgICBmb3IobGV0IGIgPSAwO2IgPCB0b3RhbF92ZXJfc3ByaXRlcztiICs9IDEpe1xuICAgICAgIGxldCBuZXdfd2lkdGggPSBvbmVfd2lkdGg7XG4gICAgICAgbGV0IG5ld19oZWlnaHQgPSBvbmVfaGVpZ2h0O1xuICAgICAgIGlmKChhICsgMSkgKiBvbmVfd2lkdGggLSB3aWR0aCA+IDApe1xuICAgICAgICAgbmV3X3dpZHRoID0gd2lkdGggJSBvbmVfd2lkdGg7XG4gICAgICAgfVxuICAgICAgIGlmKChiICsgMSkgKiBvbmVfaGVpZ2h0IC0gaGVpZ2h0ID4gMCl7XG4gICAgICAgICBuZXdfaGVpZ2h0ID0gaGVpZ2h0ICUgb25lX2hlaWdodDtcbiAgICAgICB9XG4gICAgICAgci5jb250ZXh0LmRyYXdJbWFnZShcbiAgICAgICAgcy5zcHJpdGUuc3ByaXRlX3NoZWV0LFxuICAgICAgICBzLnNwcml0ZS5sZWZ0LFxuICAgICAgICBzLnNwcml0ZS50b3AsXG4gICAgICAgIG5ld193aWR0aCAvIChyLmNhbWVyYS5zdGF0ZS5zY2FsaW5nKSxcbiAgICAgICAgbmV3X2hlaWdodCAvIChyLmNhbWVyYS5zdGF0ZS5zY2FsaW5nKSxcbiAgICAgICAgLXdpZHRoLzIgKyBhICogb25lX3dpZHRoLFxuICAgICAgICAtaGVpZ2h0LzIgKyBiICogb25lX2hlaWdodCxcbiAgICAgICAgbmV3X3dpZHRoLFxuICAgICAgICBuZXdfaGVpZ2h0XG4gICAgICAgKVxuICAgICB9XG5cbiAgIH0gXG4gIH1cbiAgXG4gIFxuICByLmNvbnRleHQucmVzdG9yZSgpO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIGxpbmV7XG4gIHN0YXJ0OlZlY3RvcixcbiAgZW5kOlZlY3RvclxufVxuXG5leHBvcnQgY29uc3QgbGluZV9yZW5kZXJlciA9IChjb250ZXh0OkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxsaW5lOmxpbmUsY29sb3I6c3RyaW5nLGxpbmVXaWR0aDpudW1iZXIsY2FtZXJhOkNhbWVyYSkgPT4ge1xuICBsZXQgdmhlaWdodCA9IGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLmhlaWdodCAvIGNhbWVyYS5zdGF0ZS5zY2FsaW5nO1xuICBsZXQgc3RhcnRfeCA9ICgobGluZS5zdGFydC54IC0gY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnggKyBjYW1lcmEuc3RhdGUuZGltZW5zaW9ucy53aWR0aCAqICgxL2NhbWVyYS5zdGF0ZS5zY2FsaW5nKSAvIDIpICogY2FtZXJhLnN0YXRlLnNjYWxpbmcpO1xuICBsZXQgc3RhcnRfeSA9ICgodmhlaWdodCAtIGxpbmUuc3RhcnQueSArIGNhbWVyYS5zdGF0ZS5wb3NpdGlvbi55IC0gY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMuaGVpZ2h0ICogKDEvY2FtZXJhLnN0YXRlLnNjYWxpbmcpIC8gMikgKiBjYW1lcmEuc3RhdGUuc2NhbGluZyk7XG5cbiAgbGV0IGVuZF94ID0gKChsaW5lLmVuZC54IC0gY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnggKyBjYW1lcmEuc3RhdGUuZGltZW5zaW9ucy53aWR0aCAqICgxL2NhbWVyYS5zdGF0ZS5zY2FsaW5nKSAvIDIpICogY2FtZXJhLnN0YXRlLnNjYWxpbmcpO1xuICBsZXQgZW5kX3kgPSAoKHZoZWlnaHQgLSBsaW5lLmVuZC55ICsgY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnkgLSBjYW1lcmEuc3RhdGUuZGltZW5zaW9ucy5oZWlnaHQgKiAoMS9jYW1lcmEuc3RhdGUuc2NhbGluZykgLyAyKSAqIGNhbWVyYS5zdGF0ZS5zY2FsaW5nKTtcbiAgXG4gIFxuICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICBjb250ZXh0LnN0cm9rZVN0eWxlID0gY29sb3I7XG4gIGNvbnRleHQubGluZVdpZHRoID0gbGluZVdpZHRoICogY2FtZXJhLnN0YXRlLnNjYWxpbmc7XG4gIGNvbnRleHQubW92ZVRvKHN0YXJ0X3gsc3RhcnRfeSk7XG4gIGNvbnRleHQubGluZVRvKGVuZF94LGVuZF95KTtcbiAgY29udGV4dC5zdHJva2UoKTsgXG59XG5cbmV4cG9ydCBjb25zdCBzdHJva2VkX3JlY3RfcmVuZGVyZXIgPSAoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCByZWN0OiByZWN0YW5nbGUsIHg6IG51bWJlciwgeTogbnVtYmVyLCBjb2xvcjogc3RyaW5nLCBsaW5lV2lkdGg6bnVtYmVyLCBjYW1lcmE6IENhbWVyYSkgPT4ge1xuICBsZXQgdmhlaWdodCA9IGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLmhlaWdodCAvIGNhbWVyYS5zdGF0ZS5zY2FsaW5nO1xuICBsZXQgZmluYWxfeCA9ICgoeCAtIGNhbWVyYS5zdGF0ZS5wb3NpdGlvbi54ICsgY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMud2lkdGggKiAoMS9jYW1lcmEuc3RhdGUuc2NhbGluZykgLyAyIC0gcmVjdC53aWR0aCAvIDIpICogY2FtZXJhLnN0YXRlLnNjYWxpbmcpO1xuICBsZXQgZmluYWxfeSA9ICgodmhlaWdodCAtIHkgKyBjYW1lcmEuc3RhdGUucG9zaXRpb24ueSAtIGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLmhlaWdodCAqICgxL2NhbWVyYS5zdGF0ZS5zY2FsaW5nKSAvIDIgLSByZWN0LmhlaWdodCAvIDIgKSAqIGNhbWVyYS5zdGF0ZS5zY2FsaW5nKTtcbiAgbGV0IGhlaWdodCA9IHJlY3QuaGVpZ2h0ICogY2FtZXJhLnN0YXRlLnNjYWxpbmc7XG4gIGxldCB3aWR0aCA9IHJlY3Qud2lkdGggKiBjYW1lcmEuc3RhdGUuc2NhbGluZztcbiAgY29udGV4dC5zdHJva2VTdHlsZSA9IGNvbG9yO1xuICBjb250ZXh0LmxpbmVXaWR0aCA9IGxpbmVXaWR0aCAqIGNhbWVyYS5zdGF0ZS5zY2FsaW5nO1xuICBjb250ZXh0LnN0cm9rZVJlY3QoZmluYWxfeCwgZmluYWxfeSwgd2lkdGgsIGhlaWdodCk7XG59XG5cbmV4cG9ydCBjb25zdCByZWN0X3JlbmRlcmVyID0gKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgcmVjdDogcmVjdGFuZ2xlLCB4OiBudW1iZXIsIHk6IG51bWJlciwgY29sb3I6IHN0cmluZywgY2FtZXJhOiBDYW1lcmEsb3BhY2l0eTpudW1iZXIgPSAxKSA9PiB7XG4gIGxldCB2aGVpZ2h0ID0gY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMuaGVpZ2h0IC8gY2FtZXJhLnN0YXRlLnNjYWxpbmc7XG4gIGxldCBmaW5hbF94ID0gKCh4IC0gY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnggKyBjYW1lcmEuc3RhdGUuZGltZW5zaW9ucy53aWR0aCAqICgxL2NhbWVyYS5zdGF0ZS5zY2FsaW5nKSAvIDIgLSByZWN0LndpZHRoIC8gMikgKiBjYW1lcmEuc3RhdGUuc2NhbGluZyk7XG4gIGxldCBmaW5hbF95ID0gKCh2aGVpZ2h0IC0geSAtIHJlY3QuaGVpZ2h0IC8gMiAtIGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLmhlaWdodCAqICgxL2NhbWVyYS5zdGF0ZS5zY2FsaW5nKSAvIDIgKyBjYW1lcmEuc3RhdGUucG9zaXRpb24ueSkgKiBjYW1lcmEuc3RhdGUuc2NhbGluZyk7XG4gIGxldCBoZWlnaHQgPSByZWN0LmhlaWdodCAqIGNhbWVyYS5zdGF0ZS5zY2FsaW5nO1xuICBsZXQgd2lkdGggPSByZWN0LndpZHRoICogY2FtZXJhLnN0YXRlLnNjYWxpbmc7XG4gIGNvbnRleHQuc2F2ZSgpO1xuICBjb250ZXh0LnRyYW5zbGF0ZShmaW5hbF94LGZpbmFsX3kpO1xuICBjb250ZXh0Lmdsb2JhbEFscGhhID0gb3BhY2l0eTtcbiAgY29udGV4dC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgY29udGV4dC5maWxsUmVjdCgtd2lkdGgvMiwgLWhlaWdodC8yLCB3aWR0aCwgaGVpZ2h0KTtcbiAgY29udGV4dC5yZXN0b3JlKCk7XG59IiwiaW1wb3J0IHsgYm91bmRpbmdfYm94LCBncmF2aXR5X29iaixvYmogfSBmcm9tIFwiLi9vYmplY3RcIjtcbmltcG9ydCB7IFBhcnRpY2xlLCBzcHJpdGUgfSBmcm9tIFwiLi9zcHJpdGVcIjtcbmltcG9ydCB7IGRpbWVuc2lvbnMsIG9ial9zdGF0ZSwgVmVjdG9yIH0gZnJvbSBcIi4vc3RhdGVcIjtcbmltcG9ydCB7IHZlbG9jaXR5Q29sbGlzaW9uQ2hlY2ssY2hlY2tfY29sbGlzaW9ucyxjb2xsaXNpb25fYm94LGNoZWNrX2FsbF9jb2xsaXNpb25zLGNoZWNrX2FsbF9vYmplY3RzfSBmcm9tIFwiLi9jb2xsaXNpb25cIjtcbmltcG9ydCB7cmVuZGVyX2NvbGxpc2lvbl9ib3gsREVCVUcsIFBBVVNFRCwgcGVlcl9jb25uZWN0aW9uLCBjcmVhdGVJdGVtU3RyaW5nfSBmcm9tIFwiLi4vdmFuXCI7XG5pbXBvcnQge0JpbmQsY29udHJvbF9mdW5jLCBleGVjX3R5cGUsIFBvbGxfTW91c2V9IGZyb20gXCIuL2NvbnRyb2xzXCI7XG5pbXBvcnQge0hVRCxUZXh0LCBUZXh0X05vZGV9IGZyb20gXCIuL2h1ZFwiO1xuaW1wb3J0IHthdWRpb30gZnJvbSBcIi4vYXVkaW9cIlxuaW1wb3J0IHtnYW1lLHBlZXJfdG9fcGVlcl9nYW1lfSBmcm9tIFwiLi4vdmFuXCI7XG5pbXBvcnQge2RlYnVnX3VwZGF0ZV9vYmpfbGlzdCxyb290X3BhdGgscGF0aCwgZGVidWdfc3RhdGV9IGZyb20gXCIuLi9saWIvZGVidWdcIjtcbmltcG9ydCB7cHJlZmFic30gZnJvbSBcIi4uL2dhbWUvb2JqZWN0cy9wcmVmYWJzXCI7XG5pbXBvcnQge1ZlYyxnZXRSYW5kSW50fSBmcm9tIFwibGliL21hdGhcIjtcbmltcG9ydCB7IENhbWVyYSB9IGZyb20gXCIuL3JlbmRlclwiO1xuaW1wb3J0IHtuZXRfdHlwZSwgV2ViLCBOZXR3b3JrfSBmcm9tIFwiLi9uZXR3b3JrXCI7XG5cbmludGVyZmFjZSBwb3NpdGlvbntcbiAgeDpudW1iZXIsXG4gIHk6bnVtYmVyXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBseUdyYXZpdHkob2I6Z3Jhdml0eV9vYmosZ3Jhdl9jb25zdDpudW1iZXIsIGdyYXZfbWF4Om51bWJlcil7XG4gIGlmKG9iLmdyYXZpdHkgJiYgb2Iuc3RhdGUudmVsb2NpdHkueSA+IGdyYXZfbWF4KXtcbiAgICBvYi5zdGF0ZS52ZWxvY2l0eS55ICs9IGdyYXZfY29uc3Q7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBwYXJ0aWNsZV9lbnRyeXtcbiAgc3ByaXRlOnN0cmluZyxcbiAgaGVpZ2h0Om51bWJlcixcbiAgd2lkdGg6bnVtYmVyXG59XG5cbmludGVyZmFjZSBwYXJ0aWNsZXN7XG4gIFtpbmRleDpzdHJpbmddOnBhcnRpY2xlX2VudHJ5XG59XG5cbmV4cG9ydCBpbnRlcmZhY2Ugcm9vbV9pPFQ+e1xuICBiYWNrZ3JvdW5kX3VybDpzdHJpbmcsXG4gIG9iamVjdHM6b2JqW11cbiAgc3RhdGU6VFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIG9iamVjdF9zdGF0ZV9jb25maWcge1xuICB0eXBlOnN0cmluZyxcbiAgc3RhdGU6b2JqX3N0YXRlLFxuICBwYXJhbWV0ZXJzPzogdW5rbm93blxufVxuXG5leHBvcnQgaW50ZXJmYWNlIHN0YXRlX2NvbmZpZ3tcbiAgb2JqZWN0czpvYmplY3Rfc3RhdGVfY29uZmlnW11cbn1cblxuaW50ZXJmYWNlIGludGVybmFsX21hcHtcbiAgW2luZGV4Om51bWJlcl06e1xuICAgIFtpbmRleDpudW1iZXJdOk1hcDxzdHJpbmcsb2JqPlxuICB9XG59XG5cbmludGVyZmFjZSBjYWNoZV9lbnRyaWVze1xuICBbaW5kZXg6c3RyaW5nXTphbnlcbn1cblxuZXhwb3J0IGludGVyZmFjZSBwMnB7XG4gIHBhcnNlX3BhY2tldCh0eXBlOnN0cmluZyxkYXRhOnVua25vd24saWQ6c3RyaW5nKTp2b2lkXG59XG5cblxuZXhwb3J0IGNsYXNzIHByb3hpbWl0eV9tYXRyaXh7XG4gIGxlbmd0aDpudW1iZXI7XG4gIHNxdWFyZV9sZW5ndGg6bnVtYmVyO1xuICBpbnRlcm5hbF9tYXA6aW50ZXJuYWxfbWFwID0ge307XG4gIGNvbnN0cnVjdG9yKGZ1bGxfbGVuZ3RoOm51bWJlcixkaW1lbnNpb246bnVtYmVyKXtcbiAgICB0aGlzLmxlbmd0aCA9IGZ1bGxfbGVuZ3RoO1xuICAgIHRoaXMuc3F1YXJlX2xlbmd0aCA9IHRoaXMubGVuZ3RoL2RpbWVuc2lvbjtcbiAgICBpZihkaW1lbnNpb24gJSAyICE9IDEpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJveGltaXR5IG1hcCBtYXRpeCBkaW1lbnNpb24gbXVzdCBiZSBvZGQuIEdvdDpcIiArIGRpbWVuc2lvbilcbiAgICB9XG4gIH1cbiAgcHJpdmF0ZSBlbnN1cmUoYTpWZWN0b3Ipe1xuICAgIGlmKCF0aGlzLmludGVybmFsX21hcFthLnldKXtcbiAgICAgIHRoaXMuaW50ZXJuYWxfbWFwW2EueV0gPSB7fVxuICAgIH1cbiAgICBpZighdGhpcy5pbnRlcm5hbF9tYXBbYS55XVthLnhdKXtcbiAgICAgIHRoaXMuaW50ZXJuYWxfbWFwW2EueV1bYS54XSA9IG5ldyBNYXA8c3RyaW5nLG9iaj4oKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxfbWFwW2EueV1bYS54XTtcbiAgfVxuICBnZXQoYTpWZWN0b3Ipe1xuICAgIHJldHVybiB0aGlzLmVuc3VyZShhKTtcbiAgfVxuICBhZGQoYTpWZWN0b3IsbzpvYmope1xuICAgIGxldCBlbnRyeSA9IHRoaXMuZW5zdXJlKGEpO1xuICAgIGVudHJ5LnNldChvLmlkLG8pO1xuICAgIG8ucHJveGltaXR5X2JveGVzLmFkZChhKTtcbiAgfVxuICBleGlzdHMoYTpWZWN0b3Ipe1xuICAgIGlmKCF0aGlzLmludGVybmFsX21hcFthLnldIHx8ICF0aGlzLmludGVybmFsX21hcFthLnldW2EueF0pXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmVtb3ZlKGE6VmVjdG9yLG86b2JqKXtcbiAgICBsZXQgZW50cnkgPSB0aGlzLmludGVybmFsX21hcFthLnldW2EueF07XG4gICAgZW50cnkuZGVsZXRlKG8uaWQpO1xuICAgIG8ucHJveGltaXR5X2JveGVzLmRlbGV0ZShhKTtcbiAgfVxuICBnZXRPYmplY3RzRnJvbUJveChhOmNvbGxpc2lvbl9ib3gpOm9ialtde1xuICAgIHJldHVybiB0aGlzLmdldE9iamVjdHNGcm9tQ29yZHModGhpcy5nZXRDb3Jkc0Zyb21Cb3goYSkpO1xuICB9XG4gIGdldE9iamVjdHNGcm9tQ29yZHMoaW5wdXQ6VmVjdG9yW10pOm9ialtde1xuICAgIGxldCBvYmplY3Rfc2V0ID0gbmV3IFNldDxvYmo+KCk7XG4gICAgZm9yKGxldCBjb3JkIG9mIGlucHV0KXtcbiAgICAgIGlmKHRoaXMuZXhpc3RzKGNvcmQpKXtcbiAgICAgICAgbGV0IGtleXMgPSB0aGlzLmludGVybmFsX21hcFtjb3JkLnldW2NvcmQueF0ua2V5cygpO1xuICAgICAgICBmb3IobGV0IGsgb2Yga2V5cyl7XG4gICAgICAgICAgbGV0IGogPSB0aGlzLmludGVybmFsX21hcFtjb3JkLnldW2NvcmQueF0uZ2V0KGspO1xuICAgICAgICAgIG9iamVjdF9zZXQuYWRkKGopO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBBcnJheS5mcm9tKG9iamVjdF9zZXQpO1xuICB9XG4gIGdldENvcmRzRnJvbUJveChhOmNvbGxpc2lvbl9ib3gpe1xuICAgIGxldCBib3R0b21fbGVmdCA9IFZlYy5jcmVhdGUoYS54IC0gYS53aWR0aC8yLGEueSAtIGEuaGVpZ2h0LzIpO1xuICAgIGxldCB0b3BfcmlnaHQgPSBWZWMuY3JlYXRlKGEueCArIGEud2lkdGgvMixhLnkgKyBhLmhlaWdodC8yKTtcbiAgICByZXR1cm4gdGhpcy5nZXRDb3Jkc0Zyb21Cb3VuZGluZ0JveCh7Ym90dG9tX2xlZnQsdG9wX3JpZ2h0fSlcbiAgfVxuICBnZXRDb3Jkc0Zyb21Cb3VuZGluZ0JveChhOmJvdW5kaW5nX2JveCl7XG4gICAgbGV0IGJveCA9IGE7XG4gICAgbGV0IGJvdF9sZWZ0ID0gVmVjLnNjYWxhcl9kaXZpZGUoVmVjLnNjYWxhcl9hZGQoYm94LmJvdHRvbV9sZWZ0LHRoaXMubGVuZ3RoLzIpLHRoaXMuc3F1YXJlX2xlbmd0aCk7XG4gICAgbGV0IHRvcF9yaWdodCA9IFZlYy5zY2FsYXJfZGl2aWRlKFZlYy5zY2FsYXJfYWRkKGJveC50b3BfcmlnaHQsdGhpcy5sZW5ndGgvMiksdGhpcy5zcXVhcmVfbGVuZ3RoKTtcbiAgICBib3RfbGVmdCA9IFZlYy5mdW5jKGJvdF9sZWZ0LChhKT0+TWF0aC5tYXgoMCxhKSk7XG4gICAgdG9wX3JpZ2h0ID0gVmVjLmZ1bmModG9wX3JpZ2h0LChhKT0+TWF0aC5taW4odGhpcy5sZW5ndGgvdGhpcy5zcXVhcmVfbGVuZ3RoLGEpKTtcbiAgICBsZXQgbWluID0gVmVjLmZ1bmMoYm90X2xlZnQsKGEpPT5NYXRoLmZsb29yKGEpKTtcbiAgICBsZXQgbWF4ID0gVmVjLmZ1bmModG9wX3JpZ2h0LChhKT0+TWF0aC5jZWlsKGEpKTtcbiAgICBsZXQgZGltZW5zaW9uc19pbl9ib3hlcyA9IFZlYy5zdWIobWF4LG1pbik7XG4gICAgXG4gICAgbGV0IGFsbF9ib3hlcyA9IFtdO1xuICAgIGxldCBjb3JkID0gVmVjLmZ1bmMoXG4gICAgICBWZWMuc2NhbGFyX2RpdmlkZShcbiAgICAgICAgVmVjLnNjYWxhcl9hZGQoXG4gICAgICAgICAgVmVjLmZ1bmMoYm94LmJvdHRvbV9sZWZ0LChhKT0+TWF0aC5tYXgoYSwtdGhpcy5sZW5ndGgvMikpLFxuICAgICAgICAgIHRoaXMubGVuZ3RoLzIpLFxuICAgICAgICB0aGlzLnNxdWFyZV9sZW5ndGgpLFxuICAgICAgKGEpPT5NYXRoLmZsb29yKGEpXG4gICAgKTtcbiAgICBmb3IobGV0IGEgPSAwO2E8ZGltZW5zaW9uc19pbl9ib3hlcy55O2ErKyl7XG4gICAgICBmb3IobGV0IGIgPSAwO2I8ZGltZW5zaW9uc19pbl9ib3hlcy54O2IrKyl7XG4gICAgICAgIGxldCBuZXdfdmVjID0gVmVjLmFkZChWZWMuY3JlYXRlKGIsYSksY29yZCk7XG4gICAgICAgIG5ld192ZWMgPSBWZWMuZnVuYyhuZXdfdmVjLChhKT0+TWF0aC5mbG9vcihhKSk7XG4gICAgICAgIGFsbF9ib3hlcy5wdXNoKG5ld192ZWMpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWxsX2JveGVzO1xuICB9XG4gIFxuICBnZXRCb3hMb2NhdGlvbnMobzpvYmope1xuICAgIGxldCBib3ggPSBvLmdldEJvdW5kaW5nQm94KCk7XG4gICAgbGV0IGNvcmRzID0gdGhpcy5nZXRDb3Jkc0Zyb21Cb3VuZGluZ0JveChib3gpO1xuICAgIHJldHVybiBjb3JkcztcbiAgfVxuXG59XG5cbmV4cG9ydCBjbGFzcyByb29tPFQ+e1xuICAvL1VybCB0byBhbiBpbWFnZSB0byBiZSB1c2VkIGZvciB0aGUgcm9vbSBiYWNrZ3JvdW5kXG4gIGJhY2tncm91bmRfdXJsOiBzdHJpbmc7XG4gIGJhY2tncm91bmQ6IEhUTUxJbWFnZUVsZW1lbnQ7XG4gIG9iamVjdHM6IG9ialtdID0gW107XG4gIC8vVGhpcyBvYmplY3QgY29udGFpbnMgcGFydGljbGUgZGVmaW5pdGlvbnNcbiAgcGFydGljbGVzOnBhcnRpY2xlcyA9IHt9O1xuICAvL1RoaXMgYXJyYXkgaXMgd2hhdCBhY3R1YWxseSBjb250YWlucyB0aGUgcGFydGljbGVzXG4gIC8vdGhhdCBleGlzdHMgd2l0aGluIHRoZSByb29tLlxuICBwYXJ0aWNsZXNfYXJyOiBvYmpbXSA9IFtdO1xuICBzdGF0ZTogVDtcbiAgYmluZHM6bnVtYmVyW10gPSBbXTtcbiAgZ2FtZTpnYW1lPHVua25vd24+O1xuICBodWQ6SFVEO1xuICBhdWRpbyA9IG5ldyBhdWRpbygpO1xuICAvL1RoZXNlIHRleHQgbm9kZXMgZXhpc3RzIGluIHRoZSBhY3R1YWwgcm9vbSBzcGFjZSwgcmF0aGVyIHRoYW5cbiAgLy9vbiB0aGUgaHVkIGxheWVyLlxuICByZW5kZXI6Ym9vbGVhbiA9IHRydWU7XG4gIHRleHRfbm9kZXM6VGV4dFtdID0gW107XG4gIGNvbmZpZzpzdGF0ZV9jb25maWc7XG4gIHByb3hpbWl0eV9tYXA6cHJveGltaXR5X21hdHJpeCA9IG5ldyBwcm94aW1pdHlfbWF0cml4KDEwMDAwLDUpO1xuICBjYW1lcmFzOkNhbWVyYVtdID0gW107XG4gIGNhY2hlX2VudHJpZXM6Y2FjaGVfZW50cmllcyA9IHt9O1xuICBjb25zdHJ1Y3RvcihnYW1lOmdhbWU8dW5rbm93bj4sY29uZmlnOnN0YXRlX2NvbmZpZyl7XG4gICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLmJpbmRDb250cm9sKFwibW91c2UwXCIsZXhlY190eXBlLm9uY2UsKCk9PntcbiAgICAgIGxldCBodWRfY2xpY2tlZCA9IGZhbHNlO1xuICAgICAgZm9yKGxldCBjYW0gb2YgdGhpcy5jYW1lcmFzKXtcbiAgICAgICAgaWYoY2FtLmh1ZCl7XG4gICAgICAgICAgbGV0IG1vdXNlX2h1ZCA9IFBvbGxfTW91c2UoY2FtLHRydWUpO1xuICAgICAgICAgIGZvcihsZXQgb2JqIG9mIGNhbS5odWQuZ3JhcGhpY19lbGVtZW50cyl7XG4gICAgICAgICAgICBpZihvYmouY29sbGlkZXNXaXRoUG9pbnQobW91c2VfaHVkKSl7XG4gICAgICAgICAgICAgIGh1ZF9jbGlja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgb2JqLmV2ZW50KFwiY2xpY2tcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZighaHVkX2NsaWNrZWQpe1xuICAgICAgICBmb3IobGV0IGNhbSBvZiB0aGlzLmNhbWVyYXMpe1xuICAgICAgICAgIGxldCBtb3VzZSA9IFBvbGxfTW91c2UoY2FtKVxuICAgICAgICAgIGxldCBjb2xsaWRlcnMgPSB0aGlzLmNoZWNrT2JqZWN0c1BvaW50KG1vdXNlKTtcbiAgICAgICAgICBmb3IobGV0IG9iaiBvZiBjb2xsaWRlcnMpe1xuICAgICAgICAgICAgb2JqLmV2ZW50KFwiY2xpY2tcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuICBcbiAgZXhwb3J0U3RhdGVDb25maWcoKXtcbiAgICBsZXQgY29uZmlnOnN0YXRlX2NvbmZpZyA9IHtvYmplY3RzOltdfTtcbiAgICBsZXQgZmlsdGVyZWQgPSB0aGlzLm9iamVjdHMuZmlsdGVyKChvYmopPT5vYmouc2F2ZV90b19maWxlICYmICFvYmoucGFyZW50KVxuICAgIGZvcihsZXQgbyBvZiBmaWx0ZXJlZCl7XG4gICAgICAvL0lmIGFuIG9iamVjdCBoYXMgYSBwYXJlbnQgb2JqZWN0LCBpdCdzIGEgZGVzY2VuZGVudCBvZiBhIGNvbXBvc2l0ZSBvYmplY3RcbiAgICAgIC8vVGhlIHBhcmVudCB3aWxsIHNwYXduIHRoaXMgb2JqZWN0IHdoZW4gaXQncyBpbnN0YW50aWF0ZWQsIHNvIHdlIGRvXG4gICAgICAvL25vdCBoYXZlIHRvIHNhdmUgdGhpcyBpbnN0YW5jZS5cbiAgICAgICAgbGV0IHN0YXRlOm9ial9zdGF0ZSA9IHtcbiAgICAgICAgICBwb3NpdGlvbjpWZWMuZnJvbShvLnN0YXRlLnBvc2l0aW9uKVxuICAgICAgICB9XG4gICAgICAgIGlmKG8uc3RhdGUudmVsb2NpdHkueCAhPSAwIHx8IG8uc3RhdGUudmVsb2NpdHkueSAhPTApe1xuICAgICAgICAgIHN0YXRlLnZlbG9jaXR5ID0gVmVjLmZyb20oby5zdGF0ZS52ZWxvY2l0eSlcbiAgICAgICAgfVxuICAgICAgICBpZihvLnN0YXRlLnJvdGF0aW9uICE9IDApe1xuICAgICAgICAgIHN0YXRlLnJvdGF0aW9uID0gby5zdGF0ZS5yb3RhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZihvLnN0YXRlLnNjYWxpbmcud2lkdGggIT0gMSB8fCBvLnN0YXRlLnNjYWxpbmcuaGVpZ2h0ICE9IDEpe1xuICAgICAgICAgIHN0YXRlLnNjYWxpbmcgPSBvLnN0YXRlLnNjYWxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgaWYoT2JqZWN0LmtleXMoby5wYXJhbXMpLmxlbmd0aCA+IDApe1xuICAgICAgICAgIGNvbmZpZy5vYmplY3RzLnB1c2goe1xuICAgICAgICAgICAgdHlwZTpvLmNvbnN0cnVjdG9yLm5hbWUsXG4gICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6by5wYXJhbXNcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbmZpZy5vYmplY3RzLnB1c2goe1xuICAgICAgICAgICAgdHlwZTpvLmNvbnN0cnVjdG9yLm5hbWUsXG4gICAgICAgICAgICBzdGF0ZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbmZpZztcbiAgfVxuICAvL1RoaXMgaGFuZGxlcyB0aGUgbG9hZGluZyBvZiBhbGwgcm9vbSBzcHJpdGVzLCBhbmRcbiAgLy9hbnkgb2JqZWN0cyBpdCBjb250YWlucy5cbiAgbG9hZCgpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPihhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgYmFja2dyb3VuZCA9IG5ldyBJbWFnZSgpO1xuICAgICAgbGV0IG9iamVjdF9wcm9taXNlX2FycmF5ID0gdGhpcy5vYmplY3RzLm1hcCgoYSkgPT4gYS5sb2FkKCkpO1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwob2JqZWN0X3Byb21pc2VfYXJyYXkpO1xuICAgICAgbGV0IGJhY2tncm91bmRfdXJsID0gdGhpcy5iYWNrZ3JvdW5kX3VybDtcbiAgICAgIGlmKERFQlVHKXtcbiAgICAgICAgYmFja2dyb3VuZF91cmwgPSBwYXRoLmpvaW4ocm9vdF9wYXRoLHRoaXMuYmFja2dyb3VuZF91cmwpO1xuICAgICAgfVxuICAgICAgYmFja2dyb3VuZC5zcmMgPSBiYWNrZ3JvdW5kX3VybDtcbiAgICAgIGJhY2tncm91bmQub25lcnJvciA9ICgoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkxvYWRpbmcgRXJyb3I6XCIgKyB0aGlzLmJhY2tncm91bmRfdXJsKTtcbiAgICAgIH0pXG4gICAgICBiYWNrZ3JvdW5kLm9ubG9hZCA9IChhc3luYygpID0+IHtcbiAgICAgICAgX3RoaXMuYmFja2dyb3VuZCA9IGJhY2tncm91bmQ7XG4gICAgICAgIGF3YWl0IHRoaXMuYXVkaW8ubG9hZCgpO1xuICAgICAgICBmb3IobGV0IGNhbSBvZiB0aGlzLmNhbWVyYXMpe1xuICAgICAgICAgIGlmKGNhbS5odWQpe1xuICAgICAgICAgICAgYXdhaXQgY2FtLmh1ZC5sb2FkKClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgfSlcbiAgfVxuICBpbml0aWFsaXplKCl7XG5cbiAgfVxuICAvL1RoaXMgaXMgdXNlZCB3aGlsZSBsb2FkaW5nIG9iamVjdHMgZnJvbSBmaWxlLCBpdCdzIHVzZWQgdG8gZHluYW1pY2FsbHkgbG9hZFxuICAvL29iamVjdHMgZnJvbSB0aGUgcm9vbSdzIGpzb24uIElmIGFkZGluZyBpdGVtcyB3aXRoaW4gY29kZSwgaXQncyBiZXR0ZXIgdG8gY3JlYXRlXG4gIC8vbmV3IGluc3RhbmNlcyBvZiBvYmplY3RzIHRocm91Z2ggYWRkSXRlbVxuICBjcmVhdGVJdGVtU3RyaW5nKG5hbWU6c3RyaW5nLHN0YXRlX2NvbmZpZzpvYmpfc3RhdGUscGFyYW1ldGVyczphbnkpOm9iantcbiAgICByZXR1cm4gY3JlYXRlSXRlbVN0cmluZyhuYW1lLHN0YXRlX2NvbmZpZyxwYXJhbWV0ZXJzKTtcbiAgfVxuICBhc3luYyBhZGRJdGVtU3RhdGVDb25maWcoY29uZmlnOm9iamVjdF9zdGF0ZV9jb25maWcsaWQ/OnN0cmluZyl7XG4gICAgaWYocHJlZmFic1tjb25maWcudHlwZV0pe1xuICAgICAgbGV0IHBhcmFtcyA9IGNvbmZpZy5wYXJhbWV0ZXJzIHx8IHt9XG4gICAgICBsZXQgbmV3X29iaiA9IDxvYmo+KG5ldyBwcmVmYWJzW2NvbmZpZy50eXBlXShPYmplY3QuYXNzaWduKHt9LGNvbmZpZy5zdGF0ZSkscGFyYW1zKSk7XG4gICAgICBpZihpZCkgbmV3X29iai5pZCA9IGlkO1xuICAgICAgYXdhaXQgdGhpcy5hZGRJdGVtcyhuZXdfb2JqLmNvbWJpbmVkT2JqZWN0cygpKTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGNvbnNvbGUubG9nKFwiVU5LTk9XTiBUWVBFIEFUVEVNUFRFRCBUTyBMT0FEOiBcIiArIGNvbmZpZy50eXBlKVxuICAgIH1cbiAgfVxuICAvL0FkZHMgdGhlIHBhc3NlZCBpdGVtIHRvIHRoZSByb29tLlxuICBhc3luYyBhZGRJdGVtKG86b2JqLCBsaXN0ID0gdGhpcy5vYmplY3RzKXtcbiAgICBhd2FpdCB0aGlzLmFkZEl0ZW1zKFsuLi5vLmNvbWJpbmVkT2JqZWN0cygpXSxsaXN0KTtcbiAgfVxuICAvL0FkZHMgZXZlcnkgaXRlbSBpbiB0aGUgcGFzc2VkIGFycmF5IHRvIHRoZSByb29tLlxuICBhc3luYyBhZGRJdGVtcyhvOm9ialtdLCBsaXN0ID0gdGhpcy5vYmplY3RzKXtcbiAgICBmb3IobGV0IG9iIG9mIG8pe1xuICAgICAgb2IuZ2FtZSA9IHRoaXMuZ2FtZTtcbiAgICB9XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoby5tYXAoKGEpPT5hLmxvYWQoKSkpO1xuICAgIGlmKGxpc3QgPT0gdGhpcy5vYmplY3RzKXtcbiAgICAgIGZvcihsZXQgb2Igb2Ygbyl7XG4gICAgICAgIGxldCBjb3JkcyA9IHRoaXMucHJveGltaXR5X21hcC5nZXRCb3hMb2NhdGlvbnMob2IpO1xuICAgICAgICBmb3IobGV0IGNvcmQgb2YgY29yZHMpe1xuICAgICAgICAgIHRoaXMucHJveGltaXR5X21hcC5hZGQoY29yZCxvYik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgbGlzdC5wdXNoKC4uLm8pO1xuICAgIGlmKHRoaXMuZ2FtZS5zdGF0ZS5jdXJyZW50X3Jvb20gJiYgby5zb21lKChvKT0+by5zdGF0aWMpKXtcbiAgICAgIHRoaXMuZ2FtZS5kcmF3QWxsU3RhdGljcygpO1xuICAgIH1cbiAgICBpZihERUJVRyAmJiBsaXN0ID09PSB0aGlzLm9iamVjdHMpe1xuICAgICAgZGVidWdfdXBkYXRlX29ial9saXN0KCk7XG4gICAgfVxuICB9XG4gIC8vRGVsZXRlcyB0aGUgaXRlbSBhbmQgcmVtb3ZlcyBpdCBmcm9tIHRoZSByb29tJ3Mgb2JqZWN0IGxpc3RcbiAgZGVsZXRlSXRlbShpZDpzdHJpbmcsIGxpc3QgPSB0aGlzLm9iamVjdHMpe1xuICAgIGZvcihsZXQgYSA9IDA7YSA8IGxpc3QubGVuZ3RoO2ErKyl7XG4gICAgICBpZihsaXN0W2FdLmlkID09PSBpZCl7XG4gICAgICAgIGxpc3Quc3BsaWNlKGEsMSlcbiAgICAgICAgYS0tO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZihERUJVRyAmJiBsaXN0ID09PSB0aGlzLm9iamVjdHMpe1xuICAgICAgZGVidWdfdXBkYXRlX29ial9saXN0KCk7XG4gICAgfVxuICB9XG4gIC8vQW55IHBhcnRpY2xlcyB0aGF0IGFyZSBuZWVkZWQgaW4gdGhlIHJvb20gc2hvdWxkIGJlIGFkZGVkIHRvIHRoZSBwYXJ0aWNsZSBhcnJheSBoZXJlLlxuICByZWdpc3RlclBhcnRpY2xlcygpe1xuXG4gIH1cbiAgLy9BZGRzIGEgYmluZCB0aGF0IGlzIGV4ZWN1dGVkIHdoZW4gdGhlIHBhc3NlZCBrZXkgaXMgYWN0aXZhdGVkXG4gIC8va2V5IGV4YW1wbGVzOiBtb3VzZTBkb3duIEtleUFkb3duIEtleUx1cFxuICBiaW5kQ29udHJvbChrZXk6c3RyaW5nLHg6ZXhlY190eXBlLGZ1bmM6Y29udHJvbF9mdW5jLGludGVydmFsOm51bWJlciA9IDEpe1xuICAgIHRoaXMuYmluZHMucHVzaChCaW5kKGtleSxmdW5jLHgsaW50ZXJ2YWwsZmFsc2UpKTsgXG4gIH1cbiAgLy9DaGVja3MgZm9yIG9iamVjdHMgdGhhdCBoYXZlIGNvbGxpc2lvbiBhdCB0aGUgcGFzc2VkIHBvaW50XG4gIGNoZWNrQ29sbGlzaW9uc1BvaW50KHBvczpWZWN0b3IsZXhlbXB0PzpzdHJpbmdbXSxsaXN0ID0gdGhpcy5vYmplY3RzKTpvYmpbXXtcbiAgICByZXR1cm4gdGhpcy5jaGVja0NvbGxpc2lvbnMoe3g6cG9zLngseTpwb3MueSxoZWlnaHQ6MCx3aWR0aDowfSxleGVtcHQsbGlzdCk7XG4gIH1cbiAgLy9DaGVja3MgZm9yIGFueSBvYmplY3RzIGF0IHRoZSBwYXNzZWQgcG9pbnRcbiAgY2hlY2tPYmplY3RzUG9pbnQocG9zOlZlY3RvcixleGVtcHQ/OnN0cmluZ1tdLGxpc3QgPSB0aGlzLm9iamVjdHMpOm9ialtde1xuICAgIHJldHVybiB0aGlzLmNoZWNrT2JqZWN0cyh7eDpwb3MueCx5OnBvcy55LGhlaWdodDowLHdpZHRoOjB9LGV4ZW1wdCxsaXN0KTtcbiAgfVxuICAvL0NoZWNrcyBmb3IgY29sbGlzaW9ucyBhdCB0aGUgcG9pbnQgdGhhdCBjb250YWluIGV2ZXJ5IHRhZyB3aXRoaW4gdGhlIHNlY29uZCBhcmd1bWVudFxuICBjaGVja0NvbGxpc2lvbnNQb2ludEluY2x1c2l2ZShwb3M6VmVjdG9yLHRhZ3M/OnN0cmluZ1tdLGxpc3QgPSB0aGlzLm9iamVjdHMpOm9ialtde1xuICAgIHJldHVybiB0aGlzLmNoZWNrQ29sbGlzaW9uc0luY2x1c2l2ZSh7eDpwb3MueCx5OnBvcy55LGhlaWdodDowLHdpZHRoOjB9LHRhZ3MsbGlzdCk7XG4gIH1cbiAgLy9DaGVja3MgZm9yIGFueSBvYmplY3RzIHRoYXQgY29udGFpbiBldmVyeSB0YWcgd2l0aGluIHRoZSBzZWNvbmQgYXJndW1lbnRcbiAgY2hlY2tPYmplY3RzUG9pbnRJbmNsdXNpdmUocG9zOlZlY3Rvcix0YWdzPzpzdHJpbmdbXSxsaXN0ID0gdGhpcy5vYmplY3RzKTpvYmpbXXtcbiAgICByZXR1cm4gdGhpcy5jaGVja09iamVjdHNJbmNsdXNpdmUoe3g6cG9zLngseTpwb3MueSxoZWlnaHQ6MCx3aWR0aDowfSx0YWdzLGxpc3QpO1xuICB9XG4gIC8vQ2hlY2tzIGZvciBjb2xsaXNpb25zIGluIHRoZSBib3ggdGhhdCBjb250YWluIHRoZSB0YWdzIGluIHRoZSBzZWNvbmQgYXJndW1lbnRcbiAgY2hlY2tDb2xsaXNpb25zSW5jbHVzaXZlKGJveDpjb2xsaXNpb25fYm94LHRhZ3M6c3RyaW5nW10sbGlzdD10aGlzLm9iamVjdHMpOm9ialtde1xuICAgIGlmKERFQlVHKXtcbiAgICAgIHJlbmRlcl9jb2xsaXNpb25fYm94KGJveCk7XG4gICAgfVxuICAgIGlmKGxpc3QgPT0gdGhpcy5vYmplY3RzKXtcbiAgICAgIGxpc3QgPSB0aGlzLnByb3hpbWl0eV9tYXAuZ2V0T2JqZWN0c0Zyb21Cb3goYm94KTtcbiAgICB9XG4gICAgcmV0dXJuIGxpc3QuZmlsdGVyKG9iaj0+b2JqLmNvbGxpc2lvbiAmJiBvYmouY29sbGlkZXNXaXRoQm94KGJveCkgJiYgdGFncy5ldmVyeSgodmFsKT0+b2JqLnRhZ3MuaGFzKHZhbCkpKTtcbiAgICBcbiAgfVxuICAvL0NoZWNrcyBmb3IgYW55IG9iamVjdHMgaW4gdGhlIGJveCB0aGF0IGNvbnRhaW4gYWxsIHRhZ3MgaW4gdGhlIHNlY29uZCBhcmd1bWVudFxuICBjaGVja09iamVjdHNJbmNsdXNpdmUoYm94OmNvbGxpc2lvbl9ib3gsdGFnczpzdHJpbmdbXSxsaXN0PXRoaXMub2JqZWN0cyk6b2JqW117XG4gICAgaWYoREVCVUcgJiYgZGVidWdfc3RhdGUucmVuZGVyX3RvZ2dsZXNbXCJjb2xsaXNpb25fYm94XCJdKXtcbiAgICAgIHJlbmRlcl9jb2xsaXNpb25fYm94KGJveCk7XG4gICAgfVxuICAgIGlmKGxpc3QgPT0gdGhpcy5vYmplY3RzKXtcbiAgICAgIGxpc3QgPSB0aGlzLnByb3hpbWl0eV9tYXAuZ2V0T2JqZWN0c0Zyb21Cb3goYm94KTtcbiAgICB9XG4gICAgcmV0dXJuIGxpc3QuZmlsdGVyKChvYmopPT5vYmouY29sbGlkZXNXaXRoQm94KGJveCkgJiYgdGFncy5ldmVyeSgodmFsKT0+b2JqLnRhZ3MuaGFzKHZhbCkpKTtcbiAgICBcbiAgfVxuICAvL2NoZWNrcyBmb3Igb2JqZWN0cyB3aXRoIGNvbGxpc2lvbiBpbiB0aGUgYm94IHRoYXQgZG8gbm90IGNvbnRhaW4gdGhlIHRhZ3MgaW4gdGhlIHNlY29uZCBhcmd1bWVudFxuICBjaGVja0NvbGxpc2lvbnMoYm94OmNvbGxpc2lvbl9ib3gsZXhlbXB0OnN0cmluZ1tdID0gW10sbGlzdD10aGlzLm9iamVjdHMpOm9ialtde1xuICAgIGlmKERFQlVHICYmIGRlYnVnX3N0YXRlLnJlbmRlcl90b2dnbGVzW1wiY29sbGlzaW9uX2JveFwiXSl7XG4gICAgICByZW5kZXJfY29sbGlzaW9uX2JveChib3gpO1xuICAgIH1cbiAgICBpZihsaXN0ID09IHRoaXMub2JqZWN0cyl7XG4gICAgICBsaXN0ID0gdGhpcy5wcm94aW1pdHlfbWFwLmdldE9iamVjdHNGcm9tQm94KGJveCk7XG4gICAgfVxuICAgIHJldHVybiBsaXN0LmZpbHRlcihvYmo9Pm9iai5jb2xsaXNpb24gJiYgb2JqLmNvbGxpZGVzV2l0aEJveChib3gpICYmIGV4ZW1wdC5ldmVyeSgodmFsKT0+IW9iai50YWdzLmhhcyh2YWwpKSk7XG4gIH1cbiAgLy9jaGVja3MgZm9yICBhbnkgb2JqZWN0cyBpbiB0aGUgYm94IHRoYXQgZG8gbm90IGNvbnRhaW4gdGhlIHRhZ3MgaW4gdGhlIHNlY29uZCBhcmd1bWVudFxuICBjaGVja09iamVjdHMoYm94OmNvbGxpc2lvbl9ib3gsZXhlbXB0OnN0cmluZ1tdID0gW10sbGlzdD10aGlzLm9iamVjdHMpOm9ialtde1xuICAgIGlmKERFQlVHICYmIGRlYnVnX3N0YXRlLnJlbmRlcl90b2dnbGVzW1wiY29sbGlzaW9uX2JveFwiXSl7XG4gICAgICByZW5kZXJfY29sbGlzaW9uX2JveChib3gpO1xuICAgIH1cbiAgICBpZihsaXN0ID09IHRoaXMub2JqZWN0cyl7XG4gICAgICBsaXN0ID0gdGhpcy5wcm94aW1pdHlfbWFwLmdldE9iamVjdHNGcm9tQm94KGJveCk7XG4gICAgfVxuICAgIHJldHVybiBsaXN0LmZpbHRlcihvYmo9Pm9iai5jb2xsaWRlc1dpdGhCb3goYm94KSAmJiBleGVtcHQuZXZlcnkoKHZhbCk9PiFvYmoudGFncy5oYXModmFsKSkpO1xuICB9XG4gIC8vVGhpcyBtZXRob2Qgc2hvdWxkIGJlIHVzZWQgdG8gY2FsbCBiaW5kQ29udHJvbCBhbmQgY3JlYXRlIGFueSBuZWVkZWQga2V5QmluZGluZ3NcbiAgcmVnaXN0ZXJDb250cm9scygpe1xuXG4gIH1cbiAgcmVnaXN0ZXJBdWRpbygpe1xuXG4gIH1cbiAgY2xlYW51cCgpe1xuXG4gIH1cbiAgY2FjaGUoa2V5OnN0cmluZyx2YWx1ZT86YW55KXtcbiAgICBpZighdGhpcy5jYWNoZV9lbnRyaWVzW2tleV0pe1xuICAgICAgdGhpcy5jYWNoZV9lbnRyaWVzW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2FjaGVfZW50cmllc1trZXldO1xuICB9XG4gIC8vVGhlIHJvb20ncyBzdGF0ZSB1cGRhdGluZyBmdW5jdGlvbi5cbiAgc3RhdGVmKHRpbWU6IG51bWJlcikge1xuICAgIGZvcihsZXQgcGFydGljbGUgb2YgdGhpcy5wYXJ0aWNsZXNfYXJyKXtcbiAgICAgIHBhcnRpY2xlLnN0YXRlZih0aW1lKTtcbiAgICB9XG4gICAgZm9yKGxldCB0ZXh0X25vZGUgb2YgdGhpcy50ZXh0X25vZGVzKXtcbiAgICAgIHRleHRfbm9kZS5zdGF0ZWYodGltZSk7XG4gICAgfVxuICAgIGxldCB0aWNraW5nX29iamVjdHMgPSB0aGlzLm9iamVjdHMuZmlsdGVyKChvKT0+by50aWNrX3N0YXRlKTtcbiAgICBmb3IgKGxldCBhID0gMDsgYSA8IHRpY2tpbmdfb2JqZWN0cy5sZW5ndGg7IGErKykge1xuICAgICAgLy9UaGlzIGZ1bmN0aW9uIGNoZWNrcyB0aGUgdmVsb2NpdHkgb2YgZXZlcnkgb2JqZWN0LCBhbmQgbW92ZXMgaXQgaW50byBpdCdzIG5leHQgbG9jYXRpb25cbiAgICAgIC8vcHJvdmlkZWQgdGhhdCBpdCBjYW4gZml0IHRoZXJlLlxuICAgICAgdmVsb2NpdHlDb2xsaXNpb25DaGVjayh0aWNraW5nX29iamVjdHNbYV0sIHRoaXMub2JqZWN0cyk7XG4gICAgICB0aWNraW5nX29iamVjdHNbYV0uc3RhdGVmKHRpbWUpO1xuICAgIH1cbiAgICBmb3IobGV0IGNhbSBvZiB0aGlzLmNhbWVyYXMpe1xuICAgICAgaWYoY2FtLmh1ZCl7XG4gICAgICAgIGNhbS5odWQuc3RhdGVmKHRpbWUpO1xuICAgICAgfVxuICAgICAgY2FtLnN0YXRlZih0aW1lKTtcbiAgICB9XG4gIH1cbiAgZW1pdFBhcnRpY2xlKG5hbWU6c3RyaW5nLHBvczpwb3NpdGlvbixsaWZldGltZTpudW1iZXIscG9zX3JhbmdlOm51bWJlcil7XG4gICAgbGV0IHN0YXRlID0ge1xuICAgICAgcG9zaXRpb246VmVjLmZ1bmMocG9zLChhKSA9PiBhICsgZ2V0UmFuZEludCgtcG9zX3JhbmdlLHBvc19yYW5nZSkpLFxuICAgICAgdmVsb2NpdHk6e3g6MCx5OjB9LFxuICAgICAgcm90YXRpb246MCxcbiAgICAgIHNjYWxpbmc6e3dpZHRoOjEsaGVpZ2h0OjF9XG4gICAgfVxuICAgIHRoaXMuYWRkSXRlbShuZXcgUGFydGljbGUodGhpcy5wYXJ0aWNsZXNbbmFtZV0sc3RhdGUsbGlmZXRpbWUpLHRoaXMucGFydGljbGVzX2Fycik7XG4gIH1cbiAgZ2V0T2JqKGlkOnN0cmluZyl7XG4gICAgZm9yKGxldCBhID0gMDsgYSA8IHRoaXMub2JqZWN0cy5sZW5ndGg7IGErKyl7XG4gICAgICBpZih0aGlzLm9iamVjdHNbYV0uaWQgPT0gaWQpe1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0c1thXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLy9HZXRzIGFueSBvYmplY3RzIHRoYXQgaGF2ZSB0aGUgcGFzc2VkIHRhZ1xuICBnZXRPYmpCeVRhZyh0YWc6c3RyaW5nKTpvYmpbXXtcbiAgICByZXR1cm4gdGhpcy5vYmplY3RzLmZpbHRlcigoYSk9PmEudGFncy5oYXModGFnKSk7XG4gIH1cbiAgLy9yZW5kZXJzIHRoZSByb29tJ3Mgc3ByaXRlXG4gIHJlbmRlcmYodGltZTogbnVtYmVyKTogc3ByaXRlIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3ByaXRlX3NoZWV0OiB0aGlzLmJhY2tncm91bmQsXG4gICAgICBuYW1lOnRoaXMuY29uc3RydWN0b3IubmFtZSxcbiAgICAgIGxlZnQ6IDAsXG4gICAgICB0b3A6IDAsXG4gICAgICBzcHJpdGVfaGVpZ2h0OiB0aGlzLmJhY2tncm91bmQuaGVpZ2h0LFxuICAgICAgc3ByaXRlX3dpZHRoOiB0aGlzLmJhY2tncm91bmQud2lkdGgsXG4gICAgICBvcGFjaXR5OjFcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIHAycF9yb29tPFQ+IGV4dGVuZHMgcm9vbTxUPiBpbXBsZW1lbnRzIHAycHtcbiAgbmV0d29yazpOZXR3b3JrO1xuICBuZXRfdHlwZTpuZXRfdHlwZTtcbiAgZ2FtZTpwZWVyX3RvX3BlZXJfZ2FtZTx1bmtub3duPjtcbiAgY29uc3RydWN0b3IoZ2FtZTpwZWVyX3RvX3BlZXJfZ2FtZTx1bmtub3duPixjb25maWc6c3RhdGVfY29uZmlnKXtcbiAgICBzdXBlcihnYW1lLGNvbmZpZyk7XG4gICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICB0aGlzLm5ldHdvcmsgPSBnYW1lLm5ldHdvcms7XG4gICAgdGhpcy5uZXRfdHlwZSA9IGdhbWUubmV0X3R5cGU7XG4gIH1cbiAgcGFyc2VfcGFja2V0KHR5cGU6c3RyaW5nLGRhdGE6dW5rbm93bixpZDpzdHJpbmcpe1xuICAgIFxuICB9XG4gIHNlbmRfcGFja2V0KHR5cGU6c3RyaW5nLGRhdGE6YW55LHBlZXJfaWQ/Om51bWJlcil7XG4gICAgdGhpcy5uZXR3b3JrLnNlbmQodHlwZSxkYXRhKTtcbiAgfVxuICBhc3luYyBhZGRJdGVtTmV0d29yayh0eXBlOnN0cmluZyxzdGF0ZTphbnkscGFyYW1ldGVyczphbnkpe1xuICAgIGxldCBpZCA9IGdldFJhbmRJbnQoMTAwMDAwLDk5OTk5OSlcbiAgICBsZXQgc3RhdGVfY29uZmlnID0ge1xuICAgICAgdHlwZSxcbiAgICAgIHN0YXRlLFxuICAgICAgcGFyYW1ldGVyc1xuICAgIH1cbiAgICB0aGlzLnNlbmRfcGFja2V0KFwiYWRkX2l0ZW1cIix7XG4gICAgICBpZCxcbiAgICAgIHN0YXRlX2NvbmZpZ1xuICAgIH0pO1xuICAgIGF3YWl0IHRoaXMuYWRkSXRlbVN0YXRlQ29uZmlnKHN0YXRlX2NvbmZpZyxpZC50b1N0cmluZygpKTtcbiAgfVxuICByZWNpZXZlX3BhY2tldChpZDpudW1iZXIsdHlwZTpzdHJpbmcsZGF0YTpzdHJpbmcpe1xuXG4gIH1cbiAgc3RhdGVmKHRpbWU6bnVtYmVyKXtcbiAgICBzdXBlci5zdGF0ZWYodGltZSk7XG4gICAgbGV0IG5ldHdvcmtfaXRlbXMgPSB0aGlzLm9iamVjdHMuZmlsdGVyKChvKT0+by5zdGF0ZV9wcm9wZXJ0aWVzX3RvX3N5bmMubGVuZ3RoID4gMCAmJiBPYmplY3Qua2V5cyhvLmRpZmZfc3RhdGUpLmxlbmd0aCA+IDApO1xuICAgIGZvcihsZXQgaXRlbSBvZiBuZXR3b3JrX2l0ZW1zKXtcbiAgICAgIHRoaXMuc2VuZF9wYWNrZXQoXCJ1cGRhdGVfaXRlbVwiLHtcbiAgICAgICAgaWQ6aXRlbS5pZCxcbiAgICAgICAgc3RhdGU6aXRlbS5kaWZmX3N0YXRlXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgb2JqIH0gZnJvbSBcIi4vb2JqZWN0XCI7XG5pbXBvcnQgeyBvYmpfc3RhdGUsIFZlY3RvciwgZGltZW5zaW9uc30gZnJvbSBcIi4vc3RhdGVcIjtcbmltcG9ydCB7Z2V0UmFuZEludCxWZWN9IGZyb20gXCIuL21hdGhcIjtcbmltcG9ydCB7cGFydGljbGVfZW50cnl9IGZyb20gXCIuL3Jvb21cIjtcblxuZXhwb3J0IGludGVyZmFjZSBzcHJpdGV7XG4gIHNwcml0ZV9zaGVldDpDYW52YXNJbWFnZVNvdXJjZSB8IEltYWdlRGF0YSxcbiAgc3ByaXRlX3NoZWV0X2J1ZmZlcj86QXJyYXlCdWZmZXIsXG4gIG5hbWU6c3RyaW5nLFxuICBsZWZ0Om51bWJlcixcbiAgdG9wOm51bWJlcixcbiAgc3ByaXRlX3dpZHRoOm51bWJlcixcbiAgc3ByaXRlX2hlaWdodDpudW1iZXIsXG4gIG9wYWNpdHk6bnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgcGFzc2VkX3Nwcml0ZXtcbiAgbGVmdDpudW1iZXIsXG4gIHRvcDpudW1iZXIsXG4gIHNwcml0ZV93aWR0aDpudW1iZXIsXG4gIHNwcml0ZV9oZWlnaHQ6bnVtYmVyLFxuICBvcGFjaXR5Om51bWJlclxuICBuYW1lOnN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIHBvc2l0aW9uZWRfc3ByaXRle1xuICBzcHJpdGU6c3ByaXRlLFxuICB4Om51bWJlcixcbiAgeTpudW1iZXJcbn1cblxuaW50ZXJmYWNlIFBhcnRpY2xlX2kgZXh0ZW5kcyBvYmpfc3RhdGV7XG4gIGxpZmV0aW1lOm51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIFBhcnRpY2xlIGV4dGVuZHMgb2JqIHtcbiAgY29sbGlzaW9uID0gZmFsc2U7XG4gIHJhbmRvbV9yYW5nZTpudW1iZXI7XG4gIG1heF9saWZldGltZTpudW1iZXI7XG4gIHN0YXRlOlBhcnRpY2xlX2k7XG4gIHNlbGVjdGVkX3Nwcml0ZTpzcHJpdGU7XG4gIGNvbnN0cnVjdG9yKHBhcnQ6cGFydGljbGVfZW50cnksc3RhdGU6b2JqX3N0YXRlLGxpZmV0aW1lOm51bWJlcikge1xuICAgIHN1cGVyKHN0YXRlKTtcbiAgICB0aGlzLnN0YXRlLnBvc2l0aW9uID0gVmVjLmNyZWF0ZSh0aGlzLnN0YXRlLnBvc2l0aW9uLngsdGhpcy5zdGF0ZS5wb3NpdGlvbi55KTtcbiAgICB0aGlzLnN0YXRlLmxpZmV0aW1lID0gMDtcbiAgICB0aGlzLnNwcml0ZV91cmwgPSBwYXJ0LnNwcml0ZTtcbiAgICB0aGlzLmhlaWdodCA9IHBhcnQuaGVpZ2h0O1xuICAgIHRoaXMud2lkdGggPSBwYXJ0LndpZHRoO1xuICAgIHRoaXMubWF4X2xpZmV0aW1lID0gbGlmZXRpbWU7XG4gIH1cbiAgc3RhdGVmKHRpbWU6bnVtYmVyKSB7XG4gICAgdGhpcy5zdGF0ZS5saWZldGltZSArPSB0aW1lO1xuICAgIGlmICh0aGlzLnN0YXRlLmxpZmV0aW1lID4gdGhpcy5tYXhfbGlmZXRpbWUpIHtcbiAgICAgIHRoaXMuZGVsZXRlKCk7XG4gICAgfVxuICB9XG4gIGRlbGV0ZSgpIHtcbiAgICBsZXQgcm9vbSA9IHRoaXMuZ2FtZS5nZXRSb29tKCk7XG4gICAgcm9vbS5kZWxldGVJdGVtKHRoaXMuaWQscm9vbS5wYXJ0aWNsZXNfYXJyKTtcbiAgfVxuICByZW5kZXJmKHRpbWU6bnVtYmVyKTpwb3NpdGlvbmVkX3Nwcml0ZSB7XG4gICAgaWYgKCF0aGlzLnNlbGVjdGVkX3Nwcml0ZSkge1xuICAgICAgbGV0IHNwcml0ZXMgPSBzcHJpdGVfZ2VuKHRoaXMsdGhpcy53aWR0aCx0aGlzLmhlaWdodCk7XG4gICAgICBsZXQgcmFuZG9tX3JvdyA9IGdldFJhbmRJbnQoMCxzcHJpdGVzLmxlbmd0aCk7XG4gICAgICBsZXQgcmFuZG9tX2NvbCA9IGdldFJhbmRJbnQoMCxzcHJpdGVzW3JhbmRvbV9yb3ddLmxlbmd0aCk7XG4gICAgICB0aGlzLnNlbGVjdGVkX3Nwcml0ZSA9IHNwcml0ZXNbcmFuZG9tX3Jvd11bcmFuZG9tX2NvbF07XG4gICAgfVxuICAgIHRoaXMuc2VsZWN0ZWRfc3ByaXRlLm9wYWNpdHkgPSAxIC0gdGhpcy5zdGF0ZS5saWZldGltZS90aGlzLm1heF9saWZldGltZTtcbiAgICByZXR1cm4ge1xuICAgICAgeDp0aGlzLnN0YXRlLnBvc2l0aW9uLngsXG4gICAgICB5OnRoaXMuc3RhdGUucG9zaXRpb24ueSxcbiAgICAgIHNwcml0ZTp0aGlzLnNlbGVjdGVkX3Nwcml0ZSBcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzcHJpdGVfZ2VuKG9iajpvYmosc3ByaXRlX3dpZHRoOm51bWJlcixzcHJpdGVfaGVpZ2h0Om51bWJlcik6QXJyYXk8QXJyYXk8c3ByaXRlPj4ge1xuICBsZXQgd2lkdGggPSBvYmouc3ByaXRlX3NoZWV0LndpZHRoO1xuICBsZXQgaGVpZ2h0ID0gb2JqLnNwcml0ZV9zaGVldC5oZWlnaHQ7XG4gIGxldCBzcHJpdGVzOkFycmF5PEFycmF5PHNwcml0ZT4+ID0gW107XG4gIGZvciAobGV0IGIgPSAwOyBiIDwgaGVpZ2h0O2IgKz0gc3ByaXRlX2hlaWdodCkge1xuICAgIHNwcml0ZXMucHVzaChbXSk7XG4gICAgZm9yIChsZXQgYSA9IDA7IGEgPCB3aWR0aDthICs9IHNwcml0ZV93aWR0aCkge1xuICAgICAgc3ByaXRlc1tiL3Nwcml0ZV9oZWlnaHRdLnB1c2goe1xuICAgICAgICBzcHJpdGVfc2hlZXQ6b2JqLnNwcml0ZV9zaGVldCxcbiAgICAgICAgc3ByaXRlX3NoZWV0X2J1ZmZlcjpvYmouc3ByaXRlX3NoZWV0X2J1ZmZlcixcbiAgICAgICAgbmFtZTpvYmouY29uc3RydWN0b3IubmFtZSxcbiAgICAgICAgbGVmdDphLFxuICAgICAgICB0b3A6YixcbiAgICAgICAgc3ByaXRlX2hlaWdodCxcbiAgICAgICAgc3ByaXRlX3dpZHRoLFxuICAgICAgICBvcGFjaXR5OjFcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc3ByaXRlcztcbn1cblxuIiwiZXhwb3J0IGxldCBvYmplY3RfdGVtcGxhdGUgPSBcbmBpbXBvcnQge29ian0gZnJvbSBcImxpYi9vYmplY3RcIjtcbmltcG9ydCB7IG9ial9zdGF0ZSwgVmVjdG9yIH0gZnJvbSBcImxpYi9zdGF0ZVwiO1xuaW1wb3J0IHtjb3B5fSBmcm9tIFwic3JjL3ZhblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIHRlbXBsYXRlX3N0YXRlIGV4dGVuZHMgb2JqX3N0YXRle1xuICAgIFxufVxuICAgIFxuZXhwb3J0IGludGVyZmFjZSB0ZW1wbGF0ZV9wYXJhbWV0ZXJze1xuICAgIFxufVxuICAgIFxuZXhwb3J0IGNsYXNzIHRlbXBsYXRlIGV4dGVuZHMgb2Jqe1xuICBzcHJpdGVfdXJsID0gXCIuL3Nwcml0ZXMvRXJyb3IucG5nXCI7XG4gIGhlaWdodCA9IDEwMDtcbiAgd2lkdGggPSAxMDA7XG4gIHRhZ3M6QXJyYXk8c3RyaW5nPjtcbiAgY29sbGlzaW9uID0gdHJ1ZTtcbiAgcmVuZGVyID0gdHJ1ZTtcbiAgc3RhdGU6dGVtcGxhdGVfc3RhdGU7XG4gIHBhcmFtczp0ZW1wbGF0ZV9wYXJhbWV0ZXJzO1xuICBzdGF0aWMgZGVmYXVsdF9wYXJhbXM6dGVtcGxhdGVfcGFyYW1ldGVycyA9IHt9XG4gIGNvbnN0cnVjdG9yKHN0YXRlOm9ial9zdGF0ZSxwYXJhbXM6dGVtcGxhdGVfcGFyYW1ldGVycyA9IGNvcHkodGVtcGxhdGUuZGVmYXVsdF9wYXJhbXMpKXtcbiAgICBzdXBlcihzdGF0ZSxwYXJhbXMpO1xuICB9XG4gIHN0YXRlZih0aW1lX2RlbHRhOm51bWJlcil7XG4gICAgc3VwZXIuc3RhdGVmKHRpbWVfZGVsdGEpO1xuICB9XG4gIHJlbmRlcmYodGltZV9kZWx0YTpudW1iZXIpe1xuICAgcmV0dXJuIHN1cGVyLnJlbmRlcmYodGltZV9kZWx0YSk7IFxuICB9XG4gIHJlZ2lzdGVyQW5pbWF0aW9ucygpe1xuICAgIFxuICB9XG4gIHJlZ2lzdGVyQXVkaW8oKXtcbiAgICBcbiAgfVxuICByZWdpc3RlckNvbnRyb2xzKCl7XG4gICAgICAgIFxuICB9XG59YDsgICAgIiwiZXhwb3J0IGxldCByb29tX3RlbXBsYXRlID0gXG5gaW1wb3J0IHsgcm9vbSB9IGZyb20gXCJsaWIvcm9vbVwiO1xuaW1wb3J0IHsgZ2FtZSB9IGZyb20gXCJzcmMvdmFuXCI7XG5pbXBvcnQgeyBzdGF0ZV9jb25maWcgfSBmcm9tIFwibGliL3Jvb21cIjtcbmltcG9ydCAqIGFzIGNvbmZpZyBmcm9tIFwiLi90ZW1wbGF0ZS5qc29uXCI7XG5sZXQgY2ZpZyA9IGNvbmZpZyBhcyB1bmtub3duIGFzIHN0YXRlX2NvbmZpZztcbmludGVyZmFjZSB0ZW1wbGF0ZV9zdGF0ZSB7XG5cbn1cblxuZXhwb3J0IGNsYXNzIHRlbXBsYXRlIGV4dGVuZHMgcm9vbTx0ZW1wbGF0ZV9zdGF0ZT57XG4gIGJhY2tncm91bmRfdXJsID0gXCIuL3Nwcml0ZXMvRXJyb3IucG5nXCI7XG4gIHJlbmRlciA9IHRydWU7XG4gIGNvbnN0cnVjdG9yKGdhbWU6IGdhbWU8dW5rbm93bj4pIHtcbiAgICBzdXBlcihnYW1lLCBjZmlnKTtcbiAgfVxuICByZWdpc3RlckNvbnRyb2xzKCkge1xuXG4gIH1cbiAgcmVnaXN0ZXJQYXJ0aWNsZXMoKSB7XG5cbiAgfVxuICBzdGF0ZWYoZGVsdGFfdGltZTogbnVtYmVyKSB7XG4gICAgc3VwZXIuc3RhdGVmKGRlbHRhX3RpbWUpO1xuICB9XG5cbn1gOyIsIlxuZXhwb3J0IGludGVyZmFjZSBzdHJpbmdfZGljdDxUPiB7XG4gICAgW2luZGV4OnN0cmluZ106VFxufVxuXG5cbmV4cG9ydCBsZXQgZGlmZiA9IGZ1bmN0aW9uKHByZXZfc3RhdGU6c3RyaW5nX2RpY3Q8c3RyaW5nPixuZXdfc3RhdGU6c3RyaW5nX2RpY3Q8c3RyaW5nPik6c3RyaW5nX2RpY3Q8c3RyaW5nPntcbiAgICBsZXQgZGVsdGFfc3RhdGU6c3RyaW5nX2RpY3Q8c3RyaW5nPiA9IHt9O1xuICAgIGxldCBrZXlzID0gT2JqZWN0LmtleXMobmV3X3N0YXRlKTtcblxuICAgIGZvcihsZXQga2V5IG9mIGtleXMpe1xuICAgICAgICBpZighcHJldl9zdGF0ZSB8fCBuZXdfc3RhdGVba2V5XSAhPSBwcmV2X3N0YXRlW2tleV0pe1xuICAgICAgICAgICAgZGVsdGFfc3RhdGVba2V5XSA9IG5ld19zdGF0ZVtrZXldXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRlbHRhX3N0YXRlO1xufVxuXG5leHBvcnQgY29uc3QgcmFuZ2UgPSBmdW5jdGlvbihmaXJzdDpudW1iZXIsc2Vjb25kPzpudW1iZXIpe1xuICAgIGxldCBzdGFydDtcbiAgICBsZXQgZW5kO1xuICAgIGlmKHNlY29uZCl7XG4gICAgICAgIHN0YXJ0ID0gZmlyc3Q7XG4gICAgICAgIGVuZCA9IHNlY29uZDtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgICBlbmQgPSBmaXJzdDtcbiAgICB9XG4gICAgbGV0IHRvX3JldHVybiA9IFtdO1xuICAgIGZvcihsZXQgYSA9IHN0YXJ0OyBhIDwgZW5kOyBhKyspe1xuICAgICAgICB0b19yZXR1cm4ucHVzaChhKTtcbiAgICB9XG4gICAgcmV0dXJuIHRvX3JldHVybjtcbn0iLCJleHBvcnQgbGV0IERFQlVHID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXYnO1xuZXhwb3J0IGxldCBQQVVTRUQgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2Rldic7XG5pbXBvcnQgeyBvYmogfSBmcm9tIFwiLi9saWIvb2JqZWN0XCI7XG5pbXBvcnQgeyBwMnAsIHJvb20scDJwX3Jvb20gfSBmcm9tIFwiLi9saWIvcm9vbVwiO1xuaW1wb3J0IHsgY29sbGlzaW9uX2JveCB9IGZyb20gXCIuL2xpYi9jb2xsaXNpb25cIjtcbmltcG9ydCB7IHNwcml0ZV9yZW5kZXJlciwgcmVjdF9yZW5kZXJlciwgc3Ryb2tlZF9yZWN0X3JlbmRlcmVyLCBodWRfc3ByaXRlX3JlbmRlcmVyLCBodWRfdGV4dF9yZW5kZXJlciwgQ2FtZXJhLCB0ZXh0X3JlbmRlcmVyLCBzY2FsZV90eXBlLCBsaW5lLCBsaW5lX3JlbmRlcmVyLCBjYW52YXNfcmVuZGVyZXIgfSBmcm9tIFwiLi9saWIvcmVuZGVyXCI7XG5pbXBvcnQgeyBFeGVjdXRlUmVwZWF0QmluZHMsIFVuYmluZCwgaGFuZGxlR2FtZXBhZCB9IGZyb20gXCIuL2xpYi9jb250cm9sc1wiO1xuaW1wb3J0IHsgZGVidWdfc3RhdGUscmVuZGVyZXJfcGF0aCwgZGVidWdfdXBkYXRlX3Jvb21fbGlzdCwgZGVidWdfdXBkYXRlX29ial9saXN0LCBkZWJ1Z191cGRhdGVfcHJlZmFicywgZGVidWdfc3RhdGVmLCBkZWJ1Z19zZXR1cCB9IGZyb20gXCIuL2xpYi9kZWJ1Z1wiO1xuaW1wb3J0IHsgcG9zaXRpb25lZF9zcHJpdGUgfSBmcm9tIFwibGliL3Nwcml0ZVwiO1xuaW1wb3J0IHsgcm9vbXMgYXMgcm9vbV9saXN0IH0gZnJvbSBcIi4vZ2FtZS9yb29tcy9yb29tc1wiO1xuaW1wb3J0IHsgZ2V0UmFuZEludCwgVmVjIH0gZnJvbSBcImxpYi9tYXRoXCI7XG5pbXBvcnQge1BhdGhpbmdfUm9vbX0gZnJvbSBcImdhbWUvcm9vbXMvYWJzdHJhY3QvUGF0aGluZ19Sb29tXCI7XG5pbXBvcnQgUGVlciBmcm9tICdwZWVyanMnO1xuaW1wb3J0IHsgbmV0X3R5cGUsTmV0d29yaywgV2VifSBmcm9tIFwibGliL25ldHdvcmtcIjtcbmltcG9ydCB7IFdvcmtlclBvb2wgfSBmcm9tIFwibGliL3dvcmtlcnNcIjtcbmltcG9ydCB7IG9ial9zdGF0ZSB9IGZyb20gXCJsaWIvc3RhdGVcIjtcbmltcG9ydCB7IHByZWZhYnMgfSBmcm9tIFwiZ2FtZS9vYmplY3RzL3ByZWZhYnNcIjtcblxuXG5cbmxldCBjYW52YXNfZWxlbWVudDogSFRNTENhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhcmdldFwiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbmxldCBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgPSBjYW52YXNfZWxlbWVudC5nZXRDb250ZXh0KFwiMmRcIik7XG5cblxubGV0IHNjcmVlbl93aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xubGV0IHNjcmVlbl9oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cblxuLy9Ib3cgb2Z0ZW4gdGhlIGdhbWUgbG9naWMgbG9vcCBzaG91bGQgcnVuLCBpbiBtaWxsaXNlY29uZHNcbmxldCBsb2dpY19sb29wX2ludGVydmFsOiBudW1iZXIgPSAxMDAwIC8gNjA7XG5cbmxldCBsYXN0X3RpbWUgPSBuZXcgRGF0ZSgpO1xuXG5sZXQgbGFzdF9yZW5kZXJfdGltZSA9IDA7XG5cbmludGVyZmFjZSBkaW1lbnNpb25zIHtcbiAgaGVpZ2h0OiBudW1iZXIsXG4gIHdpZHRoOiBudW1iZXJcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gR2V0U2NyZWVuRGltZW5zaW9ucygpOiBkaW1lbnNpb25zIHtcbiAgcmV0dXJuICh7XG4gICAgd2lkdGg6IHNjcmVlbl93aWR0aCxcbiAgICBoZWlnaHQ6IHNjcmVlbl9oZWlnaHRcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEdldFZpZXdwb3J0RGltZW5zaW9ucygpOiBkaW1lbnNpb25zIHtcbiAgcmV0dXJuICh7XG4gICAgaGVpZ2h0OiBjYW52YXNfZWxlbWVudC5oZWlnaHQsXG4gICAgd2lkdGg6IGNhbnZhc19lbGVtZW50LndpZHRoXG4gIH0pXG59XG5cbmV4cG9ydCBsZXQgdmlld3BvcnQgPSB7XG4gIGhlaWdodDogR2V0Vmlld3BvcnREaW1lbnNpb25zKCkuaGVpZ2h0LFxuICB3aWR0aDogR2V0Vmlld3BvcnREaW1lbnNpb25zKCkud2lkdGhcbn1cblxud2luZG93Lm9ucmVzaXplID0gKCkgPT4ge1xuICB2aWV3cG9ydC5oZWlnaHQgPSBHZXRWaWV3cG9ydERpbWVuc2lvbnMoKS5oZWlnaHRcbiAgdmlld3BvcnQud2lkdGggPSBHZXRWaWV3cG9ydERpbWVuc2lvbnMoKS53aWR0aFxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0RGVidWcoeDogYm9vbGVhbikge1xuICBERUJVRyA9IHg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRQYXVzZWQoeDogYm9vbGVhbikge1xuICBQQVVTRUQgPSB4O1xufVxuXG5leHBvcnQgY29uc3QgcmVuZGVyX2NvbGxpc2lvbl9ib3ggPSAoYm94OiBjb2xsaXNpb25fYm94LGNvbG9yOnN0cmluZyA9IFwicmVkXCIpID0+IHtcbiAgYm94ZXMucHVzaCh7XG4gICAgYm94LFxuICAgIGNvbG9yXG4gIH0pO1xufVxuXG5leHBvcnQgY29uc3QgcmVuZGVyX2ZpbGxlZF9ib3ggPSAoYm94OmNvbGxpc2lvbl9ib3gsY29sb3I6c3RyaW5nID0gXCJyZWRcIiwgb3BhY2l0eTpudW1iZXIgPSAxKSA9PiB7XG4gIGZpbGxlZF9ib3hlcy5wdXNoKHtcbiAgICBib3gsXG4gICAgY29sb3IsXG4gICAgb3BhY2l0eVxuICB9KVxufVxuXG5sZXQgbGluZXM6IGxpbmVbXSA9IFtdO1xuXG5leHBvcnQgY29uc3QgcmVuZGVyX2xpbmUgPSAoYTogbGluZSkgPT4ge1xuICBsaW5lcy5wdXNoKGEpO1xufVxuXG5cblxubGV0IGJveGVzOiBBcnJheTx7XG4gIGNvbG9yOnN0cmluZyxcbiAgYm94OmNvbGxpc2lvbl9ib3hcbn0+ID0gW107XG5cbmxldCBmaWxsZWRfYm94ZXM6QXJyYXk8e1xuICBjb2xvcjpzdHJpbmcsXG4gIGJveDpjb2xsaXNpb25fYm94LFxuICBvcGFjaXR5Om51bWJlclxufT4gPSBbXTtcblxuZXhwb3J0IGxldCBjb3B5ID0gKGE6IGFueSkgPT4ge1xuICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhKSk7XG59XG5cbmludGVyZmFjZSBnYW1lX3N0YXRlPFQ+IHtcbiAgbG9naWM6IG51bWJlcixcbiAgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICBjdXJyZW50X3Jvb206IHJvb208dW5rbm93bj4sXG4gIGNhbWVyYXM6IEFycmF5PENhbWVyYT4sXG4gIGNhbnZhc2VzOiBIVE1MQ2FudmFzRWxlbWVudFtdLFxuICBnbG9iYWxzOiBUXG59XG5cbmV4cG9ydCBsZXQgcm9vbXM6IGFueVtdID0gW107XG5leHBvcnQgbGV0IG9iamVjdHM6IGFueVtdO1xuXG4vL2V4cG9ydCBsZXQgd29ya2VyX3Bvb2wgPSBuZXcgV29ya2VyUG9vbChyZW5kZXJlcl9wYXRoLDEpO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlSXRlbVN0cmluZyA9IChuYW1lOnN0cmluZyxzdGF0ZV9jb25maWc6b2JqX3N0YXRlLHBhcmFtZXRlcnM/OmFueSk6b2JqID0+IHtcbiAgaWYocHJlZmFic1tuYW1lXSl7XG4gICAgbGV0IG5ld19vYmogPSA8b2JqPihuZXcgcHJlZmFic1tuYW1lXShPYmplY3QuYXNzaWduKHt9LHN0YXRlX2NvbmZpZykscGFyYW1ldGVycykpO1xuICAgIHJldHVybiBuZXdfb2JqO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGNyZWF0ZSB1bmtub3duIG9iaiB0eXBlIDwke25hbWV9PmApXG59XG5cbmV4cG9ydCBjbGFzcyBnYW1lPFQ+e1xuICBzdGF0ZTogZ2FtZV9zdGF0ZTxUPjtcbiAgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICAvL1RoZSBvZmZzY3JlZW4gY2FudmFzIGFuZCBjb250ZXh0IGFyZSB1c2VkIGluIHJlbmRlcmluZyBtdWx0aXBsZSBDYW1lcmFzXG4gIC8vVGhlIGNvbnRlbnRzIGFyZSByZW5kZXJlZCB0byB0aGUgb2Zmc2NyZWVuIGNhbnZhcywgdGhlbiBjb3BpZWQgdG8gdGhlIFxuICAvL29uc2NyZWVuIGNhbnZhcywgaW4gdGhlIHByb3BlciBwb3NpdGlvbiBpbiB0aGUgdmlld3BvcnRcbiAgb2Zmc2NyZWVuX2NhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gIG9mZnNjcmVlbl9jb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gIHN0YXRpY19jYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICBzdGF0aWNfY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICBwcm90b3R5cGVzOiBBcnJheTxvYmo+ID0gW107XG4gIHJvb21zOiBBcnJheTxhbnk+ID0gW107XG4gIHRlc3RfY2FudmFzOkhUTUxDYW52YXNFbGVtZW50O1xuICBpc1JlbmRlcmluZyA9IGZhbHNlO1xuICBjb25zdHJ1Y3RvcihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgaW5pdF9zdGF0ZTogVCkge1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBjYW52YXNlczogW2NhbnZhc19lbGVtZW50XSxcbiAgICAgIGxvZ2ljOiB1bmRlZmluZWQsXG4gICAgICBjb250ZXh0OiBjdHgsXG4gICAgICBjYW1lcmFzOiBbXG4gICAgICBdLFxuICAgICAgY3VycmVudF9yb29tOiB1bmRlZmluZWQsXG4gICAgICBnbG9iYWxzOiBpbml0X3N0YXRlXG4gICAgfVxuICAgIHRoaXMub2Zmc2NyZWVuX2NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG5cbiAgLyogICAgXG4gICAgdGhpcy50ZXN0X2NhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRlc3RcIik7XG4gICAgdGhpcy50ZXN0X2NhbnZhcy5oZWlnaHQgPSB2aWV3cG9ydC5oZWlnaHQ7XG4gICAgdGhpcy50ZXN0X2NhbnZhcy53aWR0aCA9IHZpZXdwb3J0LndpZHRoO1xuICAgIGxldCBvZmZzY3JlZW4gPSB0aGlzLnRlc3RfY2FudmFzLnRyYW5zZmVyQ29udHJvbFRvT2Zmc2NyZWVuKCk7XG4gICAgLy93b3JrZXJfcG9vbC5zZW5kX2FsbChcImNhbnZhc19wYXNzXCIse2NhbnZhczpvZmZzY3JlZW4sdmlld3BvcnR9LFtvZmZzY3JlZW5dKVxuICAgICovXG4gICAgdGhpcy5vZmZzY3JlZW5fY29udGV4dCA9IHRoaXMub2Zmc2NyZWVuX2NhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgdGhpcy5zdGF0aWNfY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICB0aGlzLnN0YXRpY19jb250ZXh0ID0gdGhpcy5zdGF0aWNfY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAvL3dvcmtlcl9wb29sLnNlbmRfYWxsKFwiY2FudmFzX3Bhc3NcIix7Y2FudmFzOm9mZnNjcmVlbix2aWV3cG9ydH0sW29mZnNjcmVlbl0pXG4gICAgLy9ERUJVRyBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGdhbWUgaXMgcnVubmluZyB3aXRoaW4gdGhlIGVkaXRvclxuICAgIGlmIChERUJVRykge1xuXG4gICAgICAvL1NldHMgdXAgc29tZSBnbG9iYWwgZGVidWcgc3RhdGUgYW5kIHRoZSBlZGl0b3Iga2V5YmluZGluZ3NcbiAgICAgIGRlYnVnX3NldHVwKCk7XG4gICAgICB0aGlzLnN0YXRlLmNhbnZhc2VzLnB1c2goZGVidWdfc3RhdGUudGFyZ2V0KTtcbiAgICAgIC8vSW5pdGlhbGl6ZXMgYSBzZXBhcmF0ZSBsb2dpYyBsb29wIHNvbGVseSBmb3IgdGhlIGVkaXRvclxuICAgICAgLy9UaGlzIHNlcGFyYXRpb24gYWxsb3dzIGZvciB0aGUgZWRpdG9yIHRvIGludGVyYWN0IHdpdGggdGhlIGVudmlyb25tZW50IHdoaWxlXG4gICAgICAvL3RoZSBhY3R1YWwgcm9vbSdzIHN0YXRlIGxvb3AgaXMgcGF1c2VkLlxuICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5nZXRSb29tKCkpIHtcbiAgICAgICAgICAvL1RoaXMgZnVuY3Rpb25zIGhhbmRsZXMgdGhlIGVkaXRvciBpbnRlcmFjdGlvbnMgd2l0aCB0aGUgZ2FtZSBlbnZpcm9ubWVudFxuICAgICAgICAgIGRlYnVnX3N0YXRlZigxNi42Nik7XG4gICAgICAgIH1cbiAgICAgIH0sIDE2LjY2KVxuICAgIH1cbiAgICAvL0NyZWF0ZXMgYSBvbmNsaWNrIGZ1bmN0aW9uIG9uIHRoZSB3aW5kb3cgdGhhdCBoYW5kbGVzIGVsZW1lbnQgb25jbGljayBmdW5jdGlvbnNcbiAgICAvL2luaXRfY2xpY2tfaGFuZGxlcih0aGlzKTtcbiAgfVxuICBhc3luYyByZW5kZXIodDogbnVtYmVyKSB7XG4gICAgLy90IGlzIGN1cnJlbnQgcmVuZGVyIHRpbWVcbiAgICBsZXQgZGVsdGFfdGltZSA9IHQgLSBsYXN0X3JlbmRlcl90aW1lXG4gICAgbGFzdF9yZW5kZXJfdGltZSA9IHQ7XG4gICAgbGV0IGFsbF9jYW1lcmFzID0gWy4uLnRoaXMuc3RhdGUuY2FtZXJhcywuLi50aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS5jYW1lcmFzXTtcbiAgICBsZXQgZWRpdG9yX2NhbWVyYV9pbmRleCA9IC0xO1xuICAgIGlmIChERUJVRykge1xuICAgICAgZGVidWdfc3RhdGUucmVuZGVyX2RlbHRhX3RpbWUgPSBkZWx0YV90aW1lO1xuICAgICAgYWxsX2NhbWVyYXMgPSBbLi4uYWxsX2NhbWVyYXMsIGRlYnVnX3N0YXRlLmNhbWVyYV1cbiAgICAgIGVkaXRvcl9jYW1lcmFfaW5kZXggPSBhbGxfY2FtZXJhcy5sZW5ndGggLSAxO1xuICAgICAgaWYgKGFsbF9jYW1lcmFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB0aGlzLnN0YXRlLmNvbnRleHQuZmlsbFN0eWxlID0gXCJ3aGl0ZVwiXG4gICAgICAgIHRoaXMuc3RhdGUuY29udGV4dC5mb250ID0gXCI1MHB4IEFyaWFsXCJcbiAgICAgICAgdGhpcy5zdGF0ZS5jb250ZXh0LnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgICAgIHRoaXMuc3RhdGUuY29udGV4dC5maWxsVGV4dChcIk5PIENBTUVSQVwiLCB2aWV3cG9ydC53aWR0aCAvIDIsIHZpZXdwb3J0LmhlaWdodCAvIDIpO1xuICAgICAgfVxuICAgICAgLy9UaGUgZWRpdG9yIGNhbWVyYSBpcyBhbHdheXMgdGhlIGxhc3QgY2FtZXJhIGluc2lkZSB0aGUgY2FtZXJhcyBhcnJheVxuICAgICAgLy90aGUgZWRpdG9yIGNhbWVyYSBpcyByZW5kZXJlZCB0byBhIGRpZmZlcmVudCBjYW52YXMgdGhhbiB0aGUgbWFpbiBnYW1lIGNhbnZhc1xuICAgICAgLy9zbyB3ZSB1c2UgdGhlIGNhbWVyYSdzIGluZGV4IHRvIGNoZWNrIHdoYXQgY2FudmFzIHRvIHJlbmRlciB0b1xuICAgIH1cbiAgICBmb3IgKGxldCBhID0gMDsgYSA8IGFsbF9jYW1lcmFzLmxlbmd0aDsgYSsrKSB7XG4gICAgICBsZXQgY2FtZXJhID0gYWxsX2NhbWVyYXNbYV07XG4gICAgICAvL1dlIHJlbmRlciB0aGUgY2FtZXJhcyBjb250ZW50cyB0byBhbiBvZmZzY3JlZW4gY2FudmFzLCB0aGVuIGNvcHkgaXRzIGNvbnRlbnRzXG4gICAgICAvL3RvIHRoZSBtYWluIGNhbnZhcy5cbiAgICAgIC8vVGhpcyBhbGxvd3MgdXMgdG8gYXZvaWQgYW55IG1hdGggbmVlZGVkIHRvIGRldGVybWluZSBzcHJpdGVzIHRoYXQgYXJlIHBhcnRpYWxseSBvZmZzY3JlZW5cbiAgICAgIC8vYXMgYW55IG9mZnNjcmVlbiBzZWN0aW9ucyBvZiB0aGUgc3ByaXRlcyB3aWxsIG5vdCBiZSBjb3BpZWQgb3ZlciwgcmF0aGVyIHRoYW4gZXhwbGljaXRseSBcbiAgICAgIC8vY2FsY3VsYXRpbmcgdGhlIGN1dG9mZnNcblxuICAgICAgdGhpcy5vZmZzY3JlZW5fY2FudmFzLmhlaWdodCA9IGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLmhlaWdodDtcbiAgICAgIHRoaXMub2Zmc2NyZWVuX2NhbnZhcy53aWR0aCA9IGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLndpZHRoO1xuICAgICAgdGhpcy5vZmZzY3JlZW5fY29udGV4dC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XG4gICAgICAvL2xldCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLndpZHRoLGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLmhlaWdodCk7XG4gICAgICAvL2F3YWl0IHdvcmtlcl9wb29sLnNlbmQoXCJjbGVhcl9jYW52YXNcIilcbiAgICAgIHRoaXMub2Zmc2NyZWVuX2NvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FtZXJhLnN0YXRlLmRpbWVuc2lvbnMud2lkdGgsIGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLmhlaWdodClcbiAgICAgIC8vVGhpcyBjb2xsaXNpb24gYm94IHJlcHJlc2VudHMgdGhlIGNhbWVyYSdzIGZpZWxkIG9mIHZpZXcgaW4gdGhlIGdhbWUgc3BhY2VcbiAgICAgIC8vV2UgdXNlIHRoZSByb29tJ3MgY2hlY2tPYmplY3RzIGZ1bmN0aW9uIHRvIGZpbmQgYW55IG9iamVjdCB0aGF0IGV4aXN0cyB3aXRoaW4gdGhpcyBhcmVhXG4gICAgICAvL1RoZXNlIG9iamVjdHMgYXJlIHRoZSBvYmplY3RzIHRoYXQgbmVlZCB0byBiZSByZW5kZXJlZCBmb3IgdGhpcyBjYW1lcmFcbiAgICAgIGxldCBjYW1lcmFfYm94ID0ge1xuICAgICAgICB4OiBjYW1lcmEuc3RhdGUucG9zaXRpb24ueCxcbiAgICAgICAgeTogY2FtZXJhLnN0YXRlLnBvc2l0aW9uLnksXG4gICAgICAgIHdpZHRoOiBjYW1lcmEuc3RhdGUuZGltZW5zaW9ucy53aWR0aCAqICgxIC8gY2FtZXJhLnN0YXRlLnNjYWxpbmcpLFxuICAgICAgICBoZWlnaHQ6IGNhbWVyYS5zdGF0ZS5kaW1lbnNpb25zLmhlaWdodCAqICgxIC8gY2FtZXJhLnN0YXRlLnNjYWxpbmcpXG4gICAgICB9O1xuICAgICAgbGV0IHJvb20gPSB0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbTtcbiAgICAgIC8vTGlzdCBvZiBhbGwgcGFydGljbGVzIHdpdGhpbiB0aGUgY2FtZXJhJ3MgZm92XG4gICAgICBsZXQgY29yZHMgPSByb29tLnByb3hpbWl0eV9tYXAuZ2V0Q29yZHNGcm9tQm94KGNhbWVyYV9ib3gpO1xuICAgICAgbGV0IHRvX2NoZWNrID0gcm9vbS5wcm94aW1pdHlfbWFwLmdldE9iamVjdHNGcm9tQ29yZHMoY29yZHMpO1xuICAgICAgbGV0IHBhcnRpY2xlX2NvbGxpZGVzID0gdGhpcy5zdGF0ZS5jdXJyZW50X3Jvb20uY2hlY2tPYmplY3RzKGNhbWVyYV9ib3gsIFtdLCB0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS5wYXJ0aWNsZXNfYXJyKTtcbiAgICAgIC8vTGlzdCBvZiBhbGwgb2JqZWN0cyB3aXRoaW4gdGhlIGNhbWVyYSdzIGZvdlxuICAgICAgbGV0IGNhbWVyYV9jb2xsaWRlcnMgPSBbLi4udGhpcy5zdGF0ZS5jdXJyZW50X3Jvb20uY2hlY2tPYmplY3RzKGNhbWVyYV9ib3gsIFtdLCB0b19jaGVjayksIC4uLnBhcnRpY2xlX2NvbGxpZGVzXTtcbiAgICAgIGxldCByZW5kZXJfYXJncyA9IHtcbiAgICAgICAgY29udGV4dDogdGhpcy5vZmZzY3JlZW5fY29udGV4dCxcbiAgICAgICAgY2FtZXJhOiBjYW1lcmEsXG4gICAgICB9O1xuICAgICAgLy9SZW5kZXJzIHRoZSByb29tJ3MgYmFja2dyb3VuZC5cbiAgICAgIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS5yZW5kZXIpIHtcbiAgICAgICAgc3ByaXRlX3JlbmRlcmVyKHJlbmRlcl9hcmdzLCB7XG4gICAgICAgICAgc3ByaXRlOiB0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS5yZW5kZXJmKGRlbHRhX3RpbWUpLFxuICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgeTogMCxcbiAgICAgICAgICByb3RhdGlvbjogMCxcbiAgICAgICAgICBzY2FsZToge1xuICAgICAgICAgICAgd2lkdGg6IDEsXG4gICAgICAgICAgICBoZWlnaHQ6IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNjYWxlX3R5cGU6IHNjYWxlX3R5cGUuZ3Jvd1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNhbnZhc19yZW5kZXJlcihyZW5kZXJfYXJncywge1xuICAgICAgICBjYW52YXM6IHRoaXMuc3RhdGljX2NhbnZhcyxcbiAgICAgICAgd2lkdGg6IHRoaXMuc3RhdGUuY3VycmVudF9yb29tLnByb3hpbWl0eV9tYXAubGVuZ3RoLFxuICAgICAgICBoZWlnaHQ6IHRoaXMuc3RhdGUuY3VycmVudF9yb29tLnByb3hpbWl0eV9tYXAubGVuZ3RoLFxuICAgICAgICB4OiAwLFxuICAgICAgICB5OiAwLFxuICAgICAgICBzY2FsZTogeyB3aWR0aDogMSwgaGVpZ2h0OiAxIH1cbiAgICAgIH0pXG4gICAgICAvL0FycmF5IG9mIGhpdGJveGVzIGZvciBlYWNoIGl0ZW0gaW4gdGhlIHJvb21cbiAgICAgIGxldCBoaXRib3hlczogY29sbGlzaW9uX2JveFtdID0gW107XG4gICAgICBsZXQgcmVuZGVyX3RvZ2dsZXMgPSBkZWJ1Z19zdGF0ZSA/IGRlYnVnX3N0YXRlLnJlbmRlcl90b2dnbGVzIDogdW5kZWZpbmVkO1xuICAgICAgY2FtZXJhX2NvbGxpZGVycyA9IGNhbWVyYV9jb2xsaWRlcnMuZmlsdGVyKChiKSA9PiBiLnJlbmRlciAmJiAhYi5zdGF0aWMpLnNvcnQoKGEsIGIpID0+IChhLmxheWVyIC0gYi5sYXllcikpXG4gICAgICBsZXQgcHJvbWlzZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGEgb2YgY2FtZXJhX2NvbGxpZGVycykge1xuICAgICAgICBsZXQgcmVuZGVyZWQgPSBhLnJlbmRlclRyYWNrKHQpO1xuICAgICAgICBcbiAgICAgICAgLy9PYmplY3RzIGNhbiByZXR1cm4gZWl0aGVyIGEgc3ByaXRlLCBvciBhbiBhcnJheSBvZiBzcHJpdGVzIHRvIHNpbXBsaWZ5IHRoZSBBUElcbiAgICAgICAgLy9Gb3IgdGhlIHVzZXIsIGFuZCBmb3IgdXNlIGluIGNvbXBvc2l0ZSBvYmplY3RzKG9iamVjdCB0aGF0IGJ1bmRsZXMgb3RoZXIgb2JqZWN0cyB0b2dldGhlcilcbiAgICAgICAgLy9JbnRlcm5hbGx5LCB3ZSBjb252ZXJ0IGFueSBzaW5nbGUgc3ByaXRlIGludG8gYW4gYXJyYXkgb2Ygb25lIHNwcml0ZS5cblxuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgcG9zaXRpb25lZF9zcHJpdGUgb2YgcmVuZGVyZWQpIHtcbiAgICAgICAgICAvL3dvcmtlci5wb3N0TWVzc2FnZShwb3NpdGlvbmVkX3Nwcml0ZS5zcHJpdGUuc3ByaXRlX2Jhc2U2NCk7XG4gICAgICAgICAgYXdhaXQgc3ByaXRlX3JlbmRlcmVyKHJlbmRlcl9hcmdzLCB7XG4gICAgICAgICAgICBzcHJpdGU6IHBvc2l0aW9uZWRfc3ByaXRlLnNwcml0ZSxcbiAgICAgICAgICAgIHg6IHBvc2l0aW9uZWRfc3ByaXRlLngsXG4gICAgICAgICAgICB5OiBwb3NpdGlvbmVkX3Nwcml0ZS55LFxuICAgICAgICAgICAgcm90YXRpb246IGEuc3RhdGUucm90YXRpb24sXG4gICAgICAgICAgICBzY2FsZTogYS5zdGF0ZS5zY2FsaW5nLFxuICAgICAgICAgICAgc2NhbGVfdHlwZTogYS5zY2FsZV90eXBlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZvciAobGV0IG5vZGUgb2YgYS50ZXh0X25vZGVzKSB7XG4gICAgICAgICAgdGV4dF9yZW5kZXJlcihyZW5kZXJfYXJncywge1xuICAgICAgICAgICAgeDogbm9kZS5zdGF0ZS5wb3NpdGlvbi54LFxuICAgICAgICAgICAgeTogbm9kZS5zdGF0ZS5wb3NpdGlvbi55LFxuICAgICAgICAgICAgZm9udDogbm9kZS5yZW5kZXJmKHQpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vSGl0Ym94ZXMgYXJlIHJlbmRlcmVkIGxhdGUgaW4gdGhlIHJlbmRlciBsb29wLCB0byBlbnN1cmUgb2JqZWN0cyBkb24ndCBvdmVybGFwIHRoZW1cbiAgICAgICAgLy9BcyB3ZSByZW5kZXIgb2JqZWN0cywgd2UgYWRkIHRoZWlyIGhpdGJveGVzIHRvIHRoaXMgbGlzdFxuICAgICAgICBpZiAoREVCVUcgJiYgYS5jb2xsaXNpb24gJiYgcmVuZGVyX3RvZ2dsZXNbXCJib3VuZGluZ19ib3hcIl0pIHtcbiAgICAgICAgICBoaXRib3hlcy5wdXNoKC4uLmEuZ2V0QWxsQ29sbGlzaW9uQm94ZXMoKSk7XG4gICAgICAgIH1cbiAgXG4gICAgICB9XG4gICAgICAvL1RoaXMgaXMgYSBzcGVjaWFsIGNsYXNzIG9mIG9iamVjdCB0aGF0IGV4aXN0cyBpbiB0aGUgZ2FtZSB3b3JsZFxuICAgICAgZm9yIChsZXQgbm9kZSBvZiB0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS50ZXh0X25vZGVzKSB7XG4gICAgICAgIHRleHRfcmVuZGVyZXIocmVuZGVyX2FyZ3MsIHtcbiAgICAgICAgICB4OiBub2RlLnN0YXRlLnBvc2l0aW9uLngsXG4gICAgICAgICAgeTogbm9kZS5zdGF0ZS5wb3NpdGlvbi55LFxuICAgICAgICAgIGZvbnQ6IG5vZGUucmVuZGVyZih0KVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoY2FtZXJhLmh1ZCkge1xuICAgICAgICBsZXQgZ3JhcGhpY3MgPSBjYW1lcmEuaHVkLmdyYXBoaWNfZWxlbWVudHM7XG4gICAgICAgIGxldCB0ZXh0X2VsZW1lbnRzID0gY2FtZXJhLmh1ZC50ZXh0X2VsZW1lbnRzO1xuICAgICAgICAvL1JlbmRlcnMgc3RhdGljIGdyYXBoaWNzIHRoYXQgYXJlIGEgcGFydCBvZiB0aGUgaHVkXG4gICAgICAgIGZvciAobGV0IGdyYXBoaWMgb2YgZ3JhcGhpY3MuZmlsdGVyKChiKSA9PiBiLnJlbmRlciAmJiAhYi5zdGF0aWMpLnNvcnQoKGEsIGIpID0+IChhLmxheWVyIC0gYi5sYXllcikpKSB7XG4gICAgICAgICAgbGV0IHJlbmRlcmVkID0gZ3JhcGhpYy5yZW5kZXJUcmFjayh0KTtcbiAgICAgICAgICBpZiAoZ3JhcGhpYy5yZW5kZXIpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHBvc2l0aW9uZWRfc3ByaXRlIG9mIHJlbmRlcmVkKSB7XG4gICAgICAgICAgICAgIGh1ZF9zcHJpdGVfcmVuZGVyZXIocmVuZGVyX2FyZ3MsIHtcbiAgICAgICAgICAgICAgICBzcHJpdGU6IHBvc2l0aW9uZWRfc3ByaXRlLnNwcml0ZSxcbiAgICAgICAgICAgICAgICB4OiBwb3NpdGlvbmVkX3Nwcml0ZS54LFxuICAgICAgICAgICAgICAgIHk6IHBvc2l0aW9uZWRfc3ByaXRlLnksXG4gICAgICAgICAgICAgICAgcm90YXRpb246IGdyYXBoaWMuc3RhdGUucm90YXRpb24sXG4gICAgICAgICAgICAgICAgc2NhbGU6IGdyYXBoaWMuc3RhdGUuc2NhbGluZyxcbiAgICAgICAgICAgICAgICBzY2FsZV90eXBlOiBncmFwaGljLnNjYWxlX3R5cGVcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBub2RlIG9mIGdyYXBoaWMudGV4dF9ub2Rlcykge1xuICAgICAgICAgICAgICBodWRfdGV4dF9yZW5kZXJlcihyZW5kZXJfYXJncywge1xuICAgICAgICAgICAgICAgIHg6IG5vZGUuc3RhdGUucG9zaXRpb24ueCxcbiAgICAgICAgICAgICAgICB5OiBub2RlLnN0YXRlLnBvc2l0aW9uLnksXG4gICAgICAgICAgICAgICAgZm9udDogbm9kZS5yZW5kZXJmKHQpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IHRleHQgb2YgdGV4dF9lbGVtZW50cykge1xuICAgICAgICAgIGh1ZF90ZXh0X3JlbmRlcmVyKHJlbmRlcl9hcmdzLCB7XG4gICAgICAgICAgICB4OiB0ZXh0LnN0YXRlLnBvc2l0aW9uLngsXG4gICAgICAgICAgICB5OiB0ZXh0LnN0YXRlLnBvc2l0aW9uLnksXG4gICAgICAgICAgICBmb250OiB0ZXh0LnJlbmRlcmYodClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvL0lmIGEgY2FtZXJhIGlzIG1hcmtlZCBhcyBhIGRlYnVnIGNhbWVyYSwgd2UgcmVuZGVyIHRoZVxuICAgICAgLy8gIGhpdGJveGVzLCBhbmQgcG90ZW50aWFsbHkgdXBkYXRlIHRoZSBlZGl0b3JcbiAgICAgIGlmIChjYW1lcmEuc3RhdGUuZGVidWcpIHtcbiAgICAgICAgXG5cbiAgICAgICAgaWYocmVuZGVyX3RvZ2dsZXNbXCJwcm94aW1pdHlfYm94XCJdKXtcbiAgICAgICAgICBsZXQgcm9vbSA9IHRoaXMuc3RhdGUuY3VycmVudF9yb29tO1xuICAgICAgICAgIFxuICAgICAgICAgIGxldCByb29tX2xlbmd0aCA9IHJvb20ucHJveGltaXR5X21hcC5sZW5ndGg7XG4gICAgICAgICAgbGV0IHNxdWFyZV9sZW5ndGggPSByb29tLnByb3hpbWl0eV9tYXAuc3F1YXJlX2xlbmd0aDtcbiAgICAgICAgICBsZXQgZGltZW5zaW9uID0gcm9vbV9sZW5ndGgvc3F1YXJlX2xlbmd0aDtcbiAgICAgICAgICBmb3IobGV0IHggPSAwOyB4IDwgZGltZW5zaW9uOyB4Kyspe1xuICAgICAgICAgICAgZm9yKGxldCB5ID0gMDsgeSA8IGRpbWVuc2lvbjt5Kyspe1xuICAgICAgICAgICAgICByZW5kZXJfY29sbGlzaW9uX2JveCh7XG4gICAgICAgICAgICAgICAgeDp4ICogc3F1YXJlX2xlbmd0aCArIHNxdWFyZV9sZW5ndGgvMiAtIHJvb21fbGVuZ3RoLzIsXG4gICAgICAgICAgICAgICAgeTp5ICogc3F1YXJlX2xlbmd0aCArIHNxdWFyZV9sZW5ndGgvMiAtIHJvb21fbGVuZ3RoLzIsXG4gICAgICAgICAgICAgICAgd2lkdGg6c3F1YXJlX2xlbmd0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6c3F1YXJlX2xlbmd0aFxuICAgICAgICAgICAgICB9LFwicHVycGxlXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZihyZW5kZXJfdG9nZ2xlc1tcImJvdW5kaW5nX2JveFwiXSl7XG4gICAgICAgICAgZm9yKGxldCBvYmogb2YgY2FtZXJhX2NvbGxpZGVycyl7XG4gICAgICAgICAgICByZW5kZXJfY29sbGlzaW9uX2JveChvYmouZ2V0RnVsbENvbGxpc2lvbkJveCgpLFwib3JhbmdlXCIpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKERFQlVHICYmIGRlYnVnX3N0YXRlLnJlbmRlcl90b2dnbGVzW1wicGF0aF9maW5kaW5nXCJdKXtcbiAgICAgICAgICBsZXQgcm9vbSA9IHRoaXMuc3RhdGUuY3VycmVudF9yb29tIGFzIFBhdGhpbmdfUm9vbTx1bmtub3duPjtcbiAgICAgICAgICBpZihyb29tLmNvbXB1dGVOYXZNZXNoKXtcbiAgICAgICAgICAgIGxldCBtZXNoID0gcm9vbS5jb21wdXRlTmF2TWVzaChyb29tLmZsb29yX3RhZyxcIlwiKTtcbiAgICAgICAgICAgIGZvcihsZXQgeSA9IDAgOyB5IDwgbWVzaC5ncmlkLmxlbmd0aDsgeSsrKXtcbiAgICAgICAgICAgICAgZm9yKGxldCB4ID0gMDsgeCA8ICBtZXNoLmdyaWRbeV0ubGVuZ3RoOyB4Kyspe1xuICAgICAgICAgICAgICAgIGxldCBmaW5hbF95ID0geSpyb29tLm5hdl9ub2RlX2RpYW1ldGVyICsgKG1lc2guYm94LnkgLSBtZXNoLmJveC5oZWlnaHQvMikgKyByb29tLm5hdl9ub2RlX2RpYW1ldGVyLzI7XG4gICAgICAgICAgICAgICAgbGV0IGZpbmFsX3ggPSB4KnJvb20ubmF2X25vZGVfZGlhbWV0ZXIgKyAobWVzaC5ib3gueCAtIG1lc2guYm94LndpZHRoLzIpICsgcm9vbS5uYXZfbm9kZV9kaWFtZXRlci8yO1xuICAgICAgICAgICAgICAgIHJlbmRlcl9maWxsZWRfYm94KHtcbiAgICAgICAgICAgICAgICAgIHg6ZmluYWxfeCxcbiAgICAgICAgICAgICAgICAgIHk6ZmluYWxfeSxcbiAgICAgICAgICAgICAgICAgIHdpZHRoOnJvb20ubmF2X25vZGVfZGlhbWV0ZXIsXG4gICAgICAgICAgICAgICAgICBoZWlnaHQ6cm9vbS5uYXZfbm9kZV9kaWFtZXRlclxuICAgICAgICAgICAgICAgIH0sbWVzaC5ncmlkW3ldW3hdID09IDAgPyBcImdyZWVuXCIgOiBcInJlZFwiLDAuNCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgbGV0IGJveDogY29sbGlzaW9uX2JveDtcbiAgICAgICAgbGV0IGJveGVzX2NvcHkgPSBbLi4uYm94ZXNdO1xuICAgICAgICBsZXQgbGluZXNfY29weSA9IFsuLi5saW5lc107XG4gICAgICAgIHdoaWxlIChsaW5lc19jb3B5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBsZXQgbGluZSA9IGxpbmVzX2NvcHkucG9wKCk7XG4gICAgICAgICAgbGluZV9yZW5kZXJlcih0aGlzLm9mZnNjcmVlbl9jb250ZXh0LCBsaW5lLCBcIm9yYW5nZVwiLCAxMCwgY2FtZXJhKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoYm94ZXNfY29weS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgbGV0IGJveF9lbnRyeSA9IGJveGVzX2NvcHkucG9wKCk7XG4gICAgICAgICAgbGV0IHJlY3QgPSB7XG4gICAgICAgICAgICB3aWR0aDogYm94X2VudHJ5LmJveC53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogYm94X2VudHJ5LmJveC5oZWlnaHRcbiAgICAgICAgICB9XG4gICAgICAgICAgc3Ryb2tlZF9yZWN0X3JlbmRlcmVyKHRoaXMub2Zmc2NyZWVuX2NvbnRleHQsIHJlY3QsIGJveF9lbnRyeS5ib3gueCwgYm94X2VudHJ5LmJveC55LCBib3hfZW50cnkuY29sb3IsIDEsIGNhbWVyYSk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGhpdGJveGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBsZXQgYm94ID0gaGl0Ym94ZXMucG9wKCk7XG4gICAgICAgICAgbGV0IHJlY3QgPSB7XG4gICAgICAgICAgICB3aWR0aDogYm94LndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBib3guaGVpZ2h0XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0cm9rZWRfcmVjdF9yZW5kZXJlcih0aGlzLm9mZnNjcmVlbl9jb250ZXh0LCByZWN0LCBib3gueCwgYm94LnksIFwiIzAwODAwMFwiLCAxLCBjYW1lcmEpO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChmaWxsZWRfYm94ZXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgbGV0IGJveCA9IGZpbGxlZF9ib3hlcy5wb3AoKTtcbiAgICAgICAgICBsZXQgcmVjdCA9IHtcbiAgICAgICAgICAgIHdpZHRoOmJveC5ib3gud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6Ym94LmJveC5oZWlnaHRcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVjdF9yZW5kZXJlcih0aGlzLm9mZnNjcmVlbl9jb250ZXh0LCByZWN0LCBib3guYm94LngsYm94LmJveC55LGJveC5jb2xvcixjYW1lcmEsYm94Lm9wYWNpdHkpO1xuICAgICAgICB9XG4gICAgICAgIC8vRHJhd3MgYSBzcGVjaWFsIGJveCBhcm91bmQgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBlbGVtZW50XG4gICAgICAgIC8vaW5zaWRlIHRoZSBlZGl0b3IgVUlcbiAgICAgICAgaWYgKERFQlVHICYmIGRlYnVnX3N0YXRlLnNlbGVjdGVkX3Byb3BlcnRpZXNfZWxlbWVudCkge1xuICAgICAgICAgIGxldCBjb2xsID0gZGVidWdfc3RhdGUuc2VsZWN0ZWRfcHJvcGVydGllc19lbGVtZW50LmdldEZ1bGxDb2xsaXNpb25Cb3goKTtcbiAgICAgICAgICByZWN0X3JlbmRlcmVyKHRoaXMub2Zmc2NyZWVuX2NvbnRleHQsIHsgd2lkdGg6IDUsIGhlaWdodDogNSB9LCBjb2xsLngsIGNvbGwueSwgXCJza3libHVlXCIsIGNhbWVyYSk7XG4gICAgICAgICAgc3Ryb2tlZF9yZWN0X3JlbmRlcmVyKHRoaXMub2Zmc2NyZWVuX2NvbnRleHQsIGNvbGwsIGNvbGwueCwgY29sbC55LCBcImJsdWVcIiwgMSwgY2FtZXJhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0cm9rZWRfcmVjdF9yZW5kZXJlcih0aGlzLm9mZnNjcmVlbl9jb250ZXh0LCB7IHdpZHRoOiB0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS5wcm94aW1pdHlfbWFwLmxlbmd0aCwgaGVpZ2h0OiB0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS5wcm94aW1pdHlfbWFwLmxlbmd0aCB9LCAwLCAwLCBcInB1cnBsZVwiLCAxMCwgY2FtZXJhKTtcbiAgICAgIH1cbiAgICAgIC8vU2VwYXJhdGUgY2FudmFzIGZvciB0aGUgZWRpdG9yIGNhbWVyYVxuICAgICAgaWYgKGEgIT09IGVkaXRvcl9jYW1lcmFfaW5kZXgpIHtcbiAgICAgICAgLy90aGlzLnN0YXRlLmNvbnRleHQuZHJhd0ltYWdlKHRoaXMudGVzdF9jYW52YXMsIGNhbWVyYS5zdGF0ZS52aWV3cG9ydC54LCBjYW1lcmEuc3RhdGUudmlld3BvcnQueSk7XG4gICAgICAgIHRoaXMuc3RhdGUuY29udGV4dC5kcmF3SW1hZ2UodGhpcy5vZmZzY3JlZW5fY2FudmFzLCBjYW1lcmEuc3RhdGUudmlld3BvcnQueCwgY2FtZXJhLnN0YXRlLnZpZXdwb3J0LnkpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vZGVidWdfc3RhdGUudGFyZ2V0LmdldENvbnRleHQoXCIyZFwiKS5kcmF3SW1hZ2UodGhpcy50ZXN0X2NhbnZhcywgY2FtZXJhLnN0YXRlLnZpZXdwb3J0LngsIGNhbWVyYS5zdGF0ZS52aWV3cG9ydC55KTsgIFxuICAgICAgICBkZWJ1Z19zdGF0ZS50YXJnZXQuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZSh0aGlzLm9mZnNjcmVlbl9jYW52YXMsIGNhbWVyYS5zdGF0ZS52aWV3cG9ydC54LCBjYW1lcmEuc3RhdGUudmlld3BvcnQueSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChERUJVRykge1xuICAgICAgYm94ZXMgPSBbXTtcbiAgICAgIGZpbGxlZF9ib3hlcyA9IFtdO1xuICAgICAgbGluZXMgPSBbXTtcbiAgICB9XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFzeW5jIChhKSA9PiB7XG4gICAgICBpZiAodGhpcy5pc1JlbmRlcmluZyl7XG4gICAgICAgIGF3YWl0IHRoaXMucmVuZGVyKGEpXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgc3RhcnRfbG9naWMoYTogbnVtYmVyKSB7XG4gICAgLy90aGlzIGlzIHRoZSByb29tJ3Mgc3RhdGUgbG9vcFxuICAgIHJldHVybiB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgbGV0IG5ld190aW1lID0gbmV3IERhdGUoKTtcbiAgICAgIGlmICghUEFVU0VEKSB7XG5cbiAgICAgICAgbGV0IHRpbWVfc2luY2UgPSBuZXdfdGltZS5nZXRUaW1lKCkgLSBsYXN0X3RpbWUuZ2V0VGltZSgpO1xuICAgICAgICBsZXQgcm9vbSA9IHRoaXMuc3RhdGUuY3VycmVudF9yb29tO1xuICAgICAgICBpZiAocm9vbSkge1xuICAgICAgICAgIHJvb20uc3RhdGVmKHRpbWVfc2luY2UpO1xuICAgICAgICAgIGlmKHRoaXMuc3RhdGUuY2FtZXJhcyl7XG4gICAgICAgICAgICBmb3IobGV0IGNhbWVyYXMgb2YgdGhpcy5zdGF0ZS5jYW1lcmFzKXtcbiAgICAgICAgICAgICAgaWYoY2FtZXJhcy5odWQpe1xuICAgICAgICAgICAgICAgIGNhbWVyYXMuaHVkLnN0YXRlZih0aW1lX3NpbmNlKTtcbiAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsYXN0X3RpbWUgPSBuZXdfdGltZTtcbiAgICAgIC8vVGhpcyBmdW5jdGlvbnMgaGFuZGxlcyBiaW5kcyB0aGF0IG9jY3VyIG9uIGFuIGludGVydmFsXG4gICAgICBFeGVjdXRlUmVwZWF0QmluZHMoYSk7XG4gICAgICB2YXIgZ2FtZXBhZHMgPSBbLi4ubmF2aWdhdG9yLmdldEdhbWVwYWRzKCldO1xuICAgICAgZm9yKGxldCBnYW1lcGFkIG9mIGdhbWVwYWRzLmZpbHRlcihwYWQgPT4gcGFkICE9IG51bGwpKXtcbiAgICAgICAgaGFuZGxlR2FtZXBhZChnYW1lcGFkKTtcbiAgICAgIH1cbiAgICB9LCBhKTtcbiAgfVxuICBnZXRSb29tKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbTtcbiAgfVxuICBhc3luYyBsb2FkUm9vbVN0cmluZyh4OiBzdHJpbmcpIHtcbiAgICAvL3Jvb20gbGlzdCBpcyBhIG9iamVjdCB0aGF0IGNvbnRhaW5zIGVhY2ggcm9vbSdzIGNsYXNzLFxuICAgIC8vd2l0aCB0aGUgcm9vbSdzIG5hbWUgYXMgdGhlIGtleSBmb3IgY2xhc3NcbiAgICAvL1RoaXMgb2JqZWN0IGlzIHBvcHVsYXRlZCBhdCBjb21waWxlIHRpbWVcbiAgICBsZXQgbG9hZGVkX3Jvb20gPSBmYWxzZTtcbiAgICBmb3IgKGxldCBhIG9mIE9iamVjdC5rZXlzKHJvb21fbGlzdCkpIHtcbiAgICAgIGlmIChhID09IHgpIHtcbiAgICAgICAgLy90aGlzIGlzbid0IHBhcnRpY3VsYXJseSB0eXBlLXNhZmUuXG4gICAgICAgIGxldCBuZXdfcm9vbSA9IDxyb29tPHt9Pj5uZXcgcm9vbV9saXN0W2FdKHRoaXMpXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFJvb20obmV3X3Jvb20pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBsb2FkIG5vbi1leGlzdGluZyByb29tLlwiKTtcbiAgfVxuICAvL1JlZHJhd3MgYW55IHN0YXRpYyBvYmplY3RzIGNvbnRhaW5lZCB3aXRoaW4gdGhlIGxpc3RcbiAgZHJhd1N0YXRpY09iamVjdHMoaW5wdXQ6b2JqW10pe1xuICAgIGxldCByb29tX2xlbmd0aCA9IHRoaXMuc3RhdGUuY3VycmVudF9yb29tLnByb3hpbWl0eV9tYXAubGVuZ3RoO1xuICAgIGxldCBzdGF0aWNzID0gaW5wdXQuZmlsdGVyKHUgPT4gdS5zdGF0aWMpO1xuICAgIC8qVGhpcyBjYW1lcmEgc3BhbnMgdGhlIGVudGlyZSB3b3JsZCBzcGFjZSwgd2hpY2ggd2UgdXNlIHRvIGNhcHR1cmVcbiAgICBBIHJlbmRlciBvZiBldmVyeSBzdGF0aWMgb2JqZWN0cywgd2hpY2ggd2UgY2FjaGUuIEluc3RlYWQgb2YgcmVuZGVyaW5nIFxuICAgIGV2ZXJ5IHN0YXRpYyBvYmplY3QgZXZlcnkgZnJhbWUsIHdlIHJlbmRlciB0aGUgY2FjaGVkIGltYWdlLiAqL1xuICAgIGxldCBzdGF0aWNfY2FtID0gbmV3IENhbWVyYSh7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIGRpbWVuc2lvbnM6IHsgaGVpZ2h0OiByb29tX2xlbmd0aCwgd2lkdGg6IHJvb21fbGVuZ3RoIH0sXG4gICAgICBzY2FsaW5nOiAxLFxuICAgICAgZGVidWc6IGZhbHNlXG4gICAgfSwge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICB3aWR0aDogMSxcbiAgICAgIGhlaWdodDogMVxuICAgIH0pXG4gICAgc3RhdGljcy5mb3JFYWNoKCh1KSA9PiB7XG4gICAgICBsZXQgcmVuZGVyZWQgPSB1LnJlbmRlclRyYWNrKHUubGFzdF9yZW5kZXIpO1xuICAgICAgZm9yIChsZXQgciBvZiByZW5kZXJlZCkge1xuICAgICAgICBzcHJpdGVfcmVuZGVyZXIoe1xuICAgICAgICAgIGNvbnRleHQ6IHRoaXMuc3RhdGljX2NvbnRleHQsXG4gICAgICAgICAgY2FtZXJhOiBzdGF0aWNfY2FtXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBzcHJpdGU6IHIuc3ByaXRlLFxuICAgICAgICAgIHg6IHIueCxcbiAgICAgICAgICB5OiByLnksXG4gICAgICAgICAgcm90YXRpb246IHUuc3RhdGUucm90YXRpb24sXG4gICAgICAgICAgc2NhbGU6IHUuc3RhdGUuc2NhbGluZyxcbiAgICAgICAgICBzY2FsZV90eXBlOiB1LnNjYWxlX3R5cGVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSlcbiAgfVxuICAvL1JlZHJhd3MgdGhlIHN0YXRpY3MgdGhhdCBhcmUgY29udGFpbmVkIHdpdGhpbiB0aGUgaW5wdXQgY29sbGlzaW9uIGJveC5cbiAgdXBkYXRlU3RhdGljc0luQ29sbGlzaW9uKGlucHV0OmNvbGxpc2lvbl9ib3gpe1xuICAgIGxldCBwcm94X2JveGVzID0gdGhpcy5zdGF0ZS5jdXJyZW50X3Jvb20ucHJveGltaXR5X21hcC5nZXRDb3Jkc0Zyb21Cb3goaW5wdXQpO1xuICAgIGxldCBzcXVhcmVfbGVuZ3RoID0gdGhpcy5zdGF0ZS5jdXJyZW50X3Jvb20ucHJveGltaXR5X21hcC5zcXVhcmVfbGVuZ3RoO1xuICAgIGxldCByb29tX2xlbmd0aCA9IHRoaXMuc3RhdGUuY3VycmVudF9yb29tLnByb3hpbWl0eV9tYXAubGVuZ3RoO1xuICAgIGZvcihsZXQgYm94IG9mIHByb3hfYm94ZXMpe1xuICAgICAgdGhpcy5zdGF0aWNfY29udGV4dC5jbGVhclJlY3QoYm94LnggKiBzcXVhcmVfbGVuZ3RoLHJvb21fbGVuZ3RoIC0gKGJveC55ICogc3F1YXJlX2xlbmd0aCArIHNxdWFyZV9sZW5ndGgpLHNxdWFyZV9sZW5ndGgsc3F1YXJlX2xlbmd0aCk7XG4gICAgfVxuICAgIGxldCBzdGF0aWNzID0gdGhpcy5zdGF0ZS5jdXJyZW50X3Jvb20ucHJveGltaXR5X21hcC5nZXRPYmplY3RzRnJvbUNvcmRzKHByb3hfYm94ZXMpO1xuICAgIHRoaXMuZHJhd1N0YXRpY09iamVjdHMoc3RhdGljcyk7XG4gIH1cbiAgLy9DcmVhdGVzIHRoZSBpbml0YWwgY2FjaGVkIHJlbmRlciBvZiB0aGUgc3RhdGljIG9iamVjdHMuXG4gIGRyYXdBbGxTdGF0aWNzKCkge1xuICAgIGxldCByb29tX2xlbmd0aCA9IHRoaXMuc3RhdGUuY3VycmVudF9yb29tLnByb3hpbWl0eV9tYXAubGVuZ3RoO1xuICAgIHRoaXMuc3RhdGljX2NhbnZhcy53aWR0aCA9IHJvb21fbGVuZ3RoO1xuICAgIHRoaXMuc3RhdGljX2NhbnZhcy5oZWlnaHQgPSByb29tX2xlbmd0aDtcbiAgICB0aGlzLnN0YXRpY19jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCByb29tX2xlbmd0aCwgcm9vbV9sZW5ndGgpO1xuICAgIHRoaXMuZHJhd1N0YXRpY09iamVjdHModGhpcy5zdGF0ZS5jdXJyZW50X3Jvb20ub2JqZWN0cylcbiAgfVxuICBhc3luYyBsb2FkUm9vbSh4OiByb29tPHVua25vd24+KSB7XG4gICAgLy9DbGVhcnMgdGhlIHJvb20ncyBsb2dpYyBsb29wIGlmIG9uZVxuICAgIC8vV2FzIGFscmVhZHkgcnVubmluZ1xuICAgIHRoaXMuaXNSZW5kZXJpbmcgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5zdGF0ZS5sb2dpYykge1xuICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5zdGF0ZS5sb2dpYyk7XG4gICAgfVxuICAgIC8vVGhpcyByZWZlcmVuY2UgaXMgdXNlZCBkdXJpbmcgaW5pdGlhbGl6YXRpb25cbiAgICB4LmdhbWUgPSB0aGlzO1xuXG4gICAgLy9EZWxldGVzIGVhY2ggb2JqZWN0IGluIHRoZSByb29tICh3aGljaCBhbHNvIHVuYmluZHMgdGhlaXIgYmluZHMpLFxuICAgIC8vYW5kIHVuYmluZHMgdGhlIHJvb20ncyBiaW5kaW5ncy5cbiAgICBpZiAodGhpcy5zdGF0ZS5jdXJyZW50X3Jvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgd2hpbGUgKHRoaXMuc3RhdGUuY3VycmVudF9yb29tLm9iamVjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRfcm9vbS5vYmplY3RzWzBdLmRlbGV0ZSgpO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgaWQgb2YgdGhpcy5zdGF0ZS5jdXJyZW50X3Jvb20uYmluZHMpIHtcbiAgICAgICAgVW5iaW5kKGlkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgeC5sb2FkKCk7XG4gICAgZm9yIChsZXQgYyBvZiB4LmNvbmZpZy5vYmplY3RzKSB7XG4gICAgICAvL1RoaXMgaGFuZGxlcyBsb2FkaW5nIG9iamVjdHMgZnJvbSB0aGUgc2F2ZWQganNvbiBmaWxlIGFzc29jaWF0ZWQgd2l0aCBlYWNoIHJvb20uXG4gICAgICBhd2FpdCB4LmFkZEl0ZW1TdGF0ZUNvbmZpZyhjKVxuICAgIH1cbiAgICB4LnJlZ2lzdGVyQ29udHJvbHMoKTtcbiAgICB4LnJlZ2lzdGVyUGFydGljbGVzKCk7XG4gICAgeC5yZWdpc3RlckF1ZGlvKCk7XG4gICAgdGhpcy5zdGF0ZS5jdXJyZW50X3Jvb20gPSB4O1xuICAgIGF3YWl0IHRoaXMuc3RhdGUuY3VycmVudF9yb29tLmluaXRpYWxpemUoKTtcbiAgICB0aGlzLmRyYXdBbGxTdGF0aWNzKCk7XG4gICAgdGhpcy5zdGF0ZS5sb2dpYyA9IHRoaXMuc3RhcnRfbG9naWMobG9naWNfbG9vcF9pbnRlcnZhbClcblxuICAgIGlmIChERUJVRykge1xuICAgICAgZGVidWdfdXBkYXRlX3Jvb21fbGlzdCgpO1xuICAgICAgZGVidWdfdXBkYXRlX3ByZWZhYnMoKTtcbiAgICAgIGRlYnVnX3VwZGF0ZV9vYmpfbGlzdCgpO1xuICAgIH1cblxuXG4gICAgaWYgKCF0aGlzLmlzUmVuZGVyaW5nKSB7XG4gICAgICB0aGlzLmlzUmVuZGVyaW5nID0gdHJ1ZTtcbiAgICAgIC8vVGhpcyBzdGFydHMgdGhlIHJlbmRlciBsb29wIGZvciB0aGUgcm9vbVxuICAgICAgdGhpcy5yZW5kZXIoMCk7XG5cblxuICAgIH1cblxuICB9XG59XG5cbmV4cG9ydCBlbnVtIHBlZXJfY29ubmVjdGlvbntcbiAgY2hpbGQsXG4gIGhvc3Rcbn1cblxuZXhwb3J0IGNsYXNzIHBlZXJfdG9fcGVlcl9nYW1lPFQ+IGV4dGVuZHMgZ2FtZTxUPntcbiAgbmV0X3R5cGU6bmV0X3R5cGUgPSBuZXRfdHlwZS53ZWI7XG4gIG5ldHdvcms6TmV0d29yayA9IG5ldyBXZWIoKTtcbiAgY29uc3RydWN0b3IoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGluaXRfc3RhdGU6IFQpIHtcbiAgICBzdXBlcihjdHgsaW5pdF9zdGF0ZSk7XG4gICAgdGhpcy5uZXR3b3JrLmdhbWUgPSB0aGlzO1xuICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==